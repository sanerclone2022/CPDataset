[{"authorTime":"2000-07-21 19:44:34","codes":[{"authorDate":"2000-07-21 19:44:34","commitOrder":1,"curCode":"    public void targetFinished(BuildEvent event) {\n        long totalTime = System.currentTimeMillis() - targetStartTime;\n        targetElement.setAttribute(TIME_ATTR, formatTime(totalTime));\n        if (taskElement == null) {\n            buildElement.appendChild(targetElement);\n        } else {\n            taskElement.appendChild(targetElement);\n        }\n\n        targetElement = null;\n\n        if (!targetStack.isEmpty()) {\n            targetStartTime = ((Long) targetTimeStack.pop()).longValue();\n            targetElement = (Element) targetStack.pop();\n        }\n    }\n","date":"2000-07-21 19:44:34","endLine":172,"groupId":"794","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"targetFinished","params":"(BuildEventevent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/06/696f58051cce00a6315f8d23916a8c66b03702.src","preCode":"    public void targetFinished(BuildEvent event) {\n        long totalTime = System.currentTimeMillis() - targetStartTime;\n        targetElement.setAttribute(TIME_ATTR, formatTime(totalTime));\n        if (taskElement == null) {\n            buildElement.appendChild(targetElement);\n        } else {\n            taskElement.appendChild(targetElement);\n        }\n\n        targetElement = null;\n\n        if (!targetStack.isEmpty()) {\n            targetStartTime = ((Long) targetTimeStack.pop()).longValue();\n            targetElement = (Element) targetStack.pop();\n        }\n    }\n","realPath":"src/main/org/apache/tools/ant/XmlLogger.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":157,"status":"B"},{"authorDate":"2000-07-21 19:44:34","commitOrder":1,"curCode":"    public void taskFinished(BuildEvent event) {\n        long totalTime = System.currentTimeMillis() - taskStartTime;\n        taskElement.setAttribute(TIME_ATTR, formatTime(totalTime));\n        targetElement.appendChild(taskElement);\n\n        taskElement = null;\n        if (!taskStack.isEmpty()) {\n            taskStartTime = ((Long) taskTimeStack.pop()).longValue();\n            taskElement = (Element) taskStack.pop();\n        }\n    }\n","date":"2000-07-21 19:44:34","endLine":203,"groupId":"4915","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"taskFinished","params":"(BuildEventevent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/06/696f58051cce00a6315f8d23916a8c66b03702.src","preCode":"    public void taskFinished(BuildEvent event) {\n        long totalTime = System.currentTimeMillis() - taskStartTime;\n        taskElement.setAttribute(TIME_ATTR, formatTime(totalTime));\n        targetElement.appendChild(taskElement);\n\n        taskElement = null;\n        if (!taskStack.isEmpty()) {\n            taskStartTime = ((Long) taskTimeStack.pop()).longValue();\n            taskElement = (Element) taskStack.pop();\n        }\n    }\n","realPath":"src/main/org/apache/tools/ant/XmlLogger.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":193,"status":"B"}],"commitId":"c4b5bdd374681d596ca0793c46701736892a258b","commitMessage":"@@@Better support for subbuilds in XmlLogger. Output of XmlLogger can be\nsent to another file using the XmlLogger.file property.\nSubmitted by:\tGlenn McAllister <glennm@ca.ibm.com>\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@267811 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2000-07-21 19:44:34","modifiedFileCount":"1","status":"B","submitter":"Stefan Bodewig"},{"authorTime":"2000-09-21 15:42:48","codes":[{"authorDate":"2000-09-21 15:42:48","commitOrder":2,"curCode":"    public void targetFinished(BuildEvent event) {\n        long totalTime = System.currentTimeMillis() - targetStartTime;\n        targetElement.setAttribute(TIME_ATTR, DefaultLogger.formatTime(totalTime));\n        if (taskElement == null) {\n            buildElement.appendChild(targetElement);\n        } else {\n            taskElement.appendChild(targetElement);\n        }\n\n        targetElement = null;\n\n        if (!targetStack.isEmpty()) {\n            targetStartTime = ((Long) targetTimeStack.pop()).longValue();\n            targetElement = (Element) targetStack.pop();\n        }\n    }\n","date":"2000-09-21 15:42:48","endLine":172,"groupId":"794","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"targetFinished","params":"(BuildEventevent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/34/580ef01ec6705ea6b026da512a3809619b55b2.src","preCode":"    public void targetFinished(BuildEvent event) {\n        long totalTime = System.currentTimeMillis() - targetStartTime;\n        targetElement.setAttribute(TIME_ATTR, formatTime(totalTime));\n        if (taskElement == null) {\n            buildElement.appendChild(targetElement);\n        } else {\n            taskElement.appendChild(targetElement);\n        }\n\n        targetElement = null;\n\n        if (!targetStack.isEmpty()) {\n            targetStartTime = ((Long) targetTimeStack.pop()).longValue();\n            targetElement = (Element) targetStack.pop();\n        }\n    }\n","realPath":"src/main/org/apache/tools/ant/XmlLogger.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":157,"status":"M"},{"authorDate":"2000-09-21 15:42:48","commitOrder":2,"curCode":"    public void taskFinished(BuildEvent event) {\n        long totalTime = System.currentTimeMillis() - taskStartTime;\n        taskElement.setAttribute(TIME_ATTR, DefaultLogger.formatTime(totalTime));\n        targetElement.appendChild(taskElement);\n\n        taskElement = null;\n        if (!taskStack.isEmpty()) {\n            taskStartTime = ((Long) taskTimeStack.pop()).longValue();\n            taskElement = (Element) taskStack.pop();\n        }\n    }\n","date":"2000-09-21 15:42:48","endLine":203,"groupId":"4915","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"taskFinished","params":"(BuildEventevent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/34/580ef01ec6705ea6b026da512a3809619b55b2.src","preCode":"    public void taskFinished(BuildEvent event) {\n        long totalTime = System.currentTimeMillis() - taskStartTime;\n        taskElement.setAttribute(TIME_ATTR, formatTime(totalTime));\n        targetElement.appendChild(taskElement);\n\n        taskElement = null;\n        if (!taskStack.isEmpty()) {\n            taskStartTime = ((Long) taskTimeStack.pop()).longValue();\n            taskElement = (Element) taskStack.pop();\n        }\n    }\n","realPath":"src/main/org/apache/tools/ant/XmlLogger.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":193,"status":"M"}],"commitId":"6422ae65b1c12e1f5979c9e172fe20023448a7e1","commitMessage":"@@@Cosmetic changes.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@268025 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2000-09-21 15:42:48","modifiedFileCount":"6","status":"M","submitter":"Stefan Bodewig"},{"authorTime":"2001-08-08 23:28:48","codes":[{"authorDate":"2001-08-08 23:28:48","commitOrder":3,"curCode":"    public void targetFinished(BuildEvent event) {\n        Target target = event.getTarget();\n        TimedElement targetElement = (TimedElement)targets.get(target);\n        if (targetElement != null) {\n            long totalTime = System.currentTimeMillis() - targetElement.startTime;\n            targetElement.element.setAttribute(TIME_ATTR, DefaultLogger.formatTime(totalTime));\n\n            TimedElement parentElement = null;            \n            Stack threadStack = getStack();\n            if (!threadStack.empty()) {\n                TimedElement poppedStack = (TimedElement)threadStack.pop();\n                if (poppedStack != targetElement) {\n                    throw new RuntimeException(\"Mismatch - popped element = \" + poppedStack.element +\n                    \" finished task element = \" + targetElement.element);\n                }                                           \n                if (!threadStack.empty()) {\n                    parentElement = (TimedElement)threadStack.peek();\n                }\n            }\n            if (parentElement == null) {\n                buildElement.element.appendChild(targetElement.element);\n            }\n            else {                \n                parentElement.element.appendChild(targetElement.element);\n            }\n        }\n    }\n","date":"2001-08-08 23:28:48","endLine":195,"groupId":"9458","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"targetFinished","params":"(BuildEventevent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/fc/d573d65209a30f07cf0732ea279c370c1f98cb.src","preCode":"    public void targetFinished(BuildEvent event) {\n        long totalTime = System.currentTimeMillis() - targetStartTime;\n        targetElement.setAttribute(TIME_ATTR, DefaultLogger.formatTime(totalTime));\n        if (taskElement == null) {\n            buildElement.appendChild(targetElement);\n        } else {\n            taskElement.appendChild(targetElement);\n        }\n\n        targetElement = null;\n\n        if (!targetStack.isEmpty()) {\n            targetStartTime = ((Long) targetTimeStack.pop()).longValue();\n            targetElement = (Element) targetStack.pop();\n        }\n    }\n","realPath":"src/main/org/apache/tools/ant/XmlLogger.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":169,"status":"M"},{"authorDate":"2001-08-08 23:28:48","commitOrder":3,"curCode":"    public void taskFinished(BuildEvent event) {\n        Task task = event.getTask();\n        TimedElement taskElement = (TimedElement)tasks.get(task);\n        if (taskElement != null) {\n            long totalTime = System.currentTimeMillis() - taskElement.startTime;\n            taskElement.element.setAttribute(TIME_ATTR, DefaultLogger.formatTime(totalTime));\n            Target target = task.getOwningTarget();\n            TimedElement targetElement = (TimedElement)targets.get(target);\n            if (targetElement == null) {\n                buildElement.element.appendChild(taskElement.element);\n            }\n            else {\n                targetElement.element.appendChild(taskElement.element);\n            }\n            Stack threadStack = getStack();\n            if (!threadStack.empty()) {\n                TimedElement poppedStack = (TimedElement)threadStack.pop();\n                if (poppedStack != taskElement) {\n                    throw new RuntimeException(\"Mismatch - popped element = \" + poppedStack.element +\n                    \" finished task element = \" + taskElement.element);\n                }                                           \n            }\n        }\n    }\n","date":"2001-08-08 23:28:48","endLine":237,"groupId":"3721","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"taskFinished","params":"(BuildEventevent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/fc/d573d65209a30f07cf0732ea279c370c1f98cb.src","preCode":"    public void taskFinished(BuildEvent event) {\n        long totalTime = System.currentTimeMillis() - taskStartTime;\n        taskElement.setAttribute(TIME_ATTR, DefaultLogger.formatTime(totalTime));\n        targetElement.appendChild(taskElement);\n\n        taskElement = null;\n        if (!taskStack.isEmpty()) {\n            taskStartTime = ((Long) taskTimeStack.pop()).longValue();\n            taskElement = (Element) taskStack.pop();\n        }\n    }\n","realPath":"src/main/org/apache/tools/ant/XmlLogger.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":214,"status":"M"}],"commitId":"bdd7cc0e9751c1a7378bc59a9825e6fb5b169c71","commitMessage":"@@@New Threadsafe (needs more testing) version of the XMLLogger. Used the\nconcept of a TimedElement from Thomas' patch but not the rest of it\nsince I didn't want to modify other components. Tracks what happens\non each thread.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@269521 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2001-08-08 23:28:48","modifiedFileCount":"1","status":"M","submitter":"Conor MacNeill"},{"authorTime":"2002-02-14 21:27:04","codes":[{"authorDate":"2002-02-14 21:27:04","commitOrder":4,"curCode":"    public void targetFinished(BuildEvent event) {\n        Target target = event.getTarget();\n        TimedElement targetElement = (TimedElement)targets.get(target);\n        if (targetElement != null) {\n            long totalTime = System.currentTimeMillis() - targetElement.startTime;\n            targetElement.element.setAttribute(TIME_ATTR, DefaultLogger.formatTime(totalTime));\n\n            TimedElement parentElement = null;\n            Stack threadStack = getStack();\n            if (!threadStack.empty()) {\n                TimedElement poppedStack = (TimedElement)threadStack.pop();\n                if (poppedStack != targetElement) {\n                    throw new RuntimeException(\"Mismatch - popped element = \" + poppedStack.element +\n                    \" finished target element = \" + targetElement.element);\n                }\n                if (!threadStack.empty()) {\n                    parentElement = (TimedElement)threadStack.peek();\n                }\n            }\n            if (parentElement == null) {\n                buildElement.element.appendChild(targetElement.element);\n            }\n            else {\n                parentElement.element.appendChild(targetElement.element);\n            }\n        }\n    }\n","date":"2002-02-14 21:27:04","endLine":213,"groupId":"9458","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"targetFinished","params":"(BuildEventevent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/3b/a3c3b08e55b070c622932e55919ba32e46b917.src","preCode":"    public void targetFinished(BuildEvent event) {\n        Target target = event.getTarget();\n        TimedElement targetElement = (TimedElement)targets.get(target);\n        if (targetElement != null) {\n            long totalTime = System.currentTimeMillis() - targetElement.startTime;\n            targetElement.element.setAttribute(TIME_ATTR, DefaultLogger.formatTime(totalTime));\n\n            TimedElement parentElement = null;\n            Stack threadStack = getStack();\n            if (!threadStack.empty()) {\n                TimedElement poppedStack = (TimedElement)threadStack.pop();\n                if (poppedStack != targetElement) {\n                    throw new RuntimeException(\"Mismatch - popped element = \" + poppedStack.element +\n                    \" finished task element = \" + targetElement.element);\n                }\n                if (!threadStack.empty()) {\n                    parentElement = (TimedElement)threadStack.peek();\n                }\n            }\n            if (parentElement == null) {\n                buildElement.element.appendChild(targetElement.element);\n            }\n            else {\n                parentElement.element.appendChild(targetElement.element);\n            }\n        }\n    }\n","realPath":"src/main/org/apache/tools/ant/XmlLogger.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":187,"status":"M"},{"authorDate":"2002-02-14 21:27:04","commitOrder":4,"curCode":"    public void taskFinished(BuildEvent event) {\n        Task task = event.getTask();\n        TimedElement taskElement = (TimedElement)tasks.get(task);\n        if (taskElement != null) {\n            long totalTime = System.currentTimeMillis() - taskElement.startTime;\n            taskElement.element.setAttribute(TIME_ATTR, DefaultLogger.formatTime(totalTime));\n            Target target = task.getOwningTarget();\n            TimedElement targetElement = null;\n            if (target != null) {\n                targetElement = (TimedElement)targets.get(target);\n            }\n            if (targetElement == null) {\n                buildElement.element.appendChild(taskElement.element);\n            }\n            else {\n                targetElement.element.appendChild(taskElement.element);\n            }\n            Stack threadStack = getStack();\n            if (!threadStack.empty()) {\n                TimedElement poppedStack = (TimedElement)threadStack.pop();\n                if (poppedStack != taskElement) {\n                    throw new RuntimeException(\"Mismatch - popped element = \" + poppedStack.element +\n                    \" finished task element = \" + taskElement.element);\n                }\n            }\n        }\n    }\n","date":"2002-02-14 21:27:04","endLine":254,"groupId":"6232","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"taskFinished","params":"(BuildEventevent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/3b/a3c3b08e55b070c622932e55919ba32e46b917.src","preCode":"    public void taskFinished(BuildEvent event) {\n        Task task = event.getTask();\n        TimedElement taskElement = (TimedElement)tasks.get(task);\n        if (taskElement != null) {\n            long totalTime = System.currentTimeMillis() - taskElement.startTime;\n            taskElement.element.setAttribute(TIME_ATTR, DefaultLogger.formatTime(totalTime));\n            Target target = task.getOwningTarget();\n            TimedElement targetElement = (TimedElement)targets.get(target);\n            if (targetElement == null) {\n                buildElement.element.appendChild(taskElement.element);\n            }\n            else {\n                targetElement.element.appendChild(taskElement.element);\n            }\n            Stack threadStack = getStack();\n            if (!threadStack.empty()) {\n                TimedElement poppedStack = (TimedElement)threadStack.pop();\n                if (poppedStack != taskElement) {\n                    throw new RuntimeException(\"Mismatch - popped element = \" + poppedStack.element +\n                    \" finished task element = \" + taskElement.element);\n                }\n            }\n        }\n    }\n","realPath":"src/main/org/apache/tools/ant/XmlLogger.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":228,"status":"M"}],"commitId":"2976ded16aac6c226c4631cf80e937d1d43e81cf","commitMessage":"@@@Handle badly configured tasks created outside of Ant's core\n\nPR:\t6309\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@271348 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2002-02-14 21:27:04","modifiedFileCount":"1","status":"M","submitter":"Conor MacNeill"},{"authorTime":"2004-02-09 21:58:02","codes":[{"authorDate":"2004-02-09 21:58:02","commitOrder":5,"curCode":"    public void targetFinished(BuildEvent event) {\n        Target target = event.getTarget();\n        TimedElement targetElement = (TimedElement) targets.get(target);\n        if (targetElement != null) {\n            long totalTime\n                    = System.currentTimeMillis() - targetElement.startTime;\n            targetElement.element.setAttribute(TIME_ATTR,\n                    DefaultLogger.formatTime(totalTime));\n\n            TimedElement parentElement = null;\n            Stack threadStack = getStack();\n            if (!threadStack.empty()) {\n                TimedElement poppedStack = (TimedElement) threadStack.pop();\n                if (poppedStack != targetElement) {\n                    throw new RuntimeException(\"Mismatch - popped element = \"\n                            + poppedStack.element\n                            + \" finished target element = \"\n                            + targetElement.element);\n                }\n                if (!threadStack.empty()) {\n                    parentElement = (TimedElement) threadStack.peek();\n                }\n            }\n            if (parentElement == null) {\n                buildElement.element.appendChild(targetElement.element);\n            } else {\n                parentElement.element.appendChild(targetElement.element);\n            }\n        }\n        targets.remove(target);\n    }\n","date":"2004-02-09 21:58:02","endLine":271,"groupId":"9458","id":9,"instanceNumber":1,"isCurCommit":0,"methodName":"targetFinished","params":"(BuildEventevent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/19/ffbb8e8040c177214a36a8dfb1ca15d51d3d5f.src","preCode":"    public void targetFinished(BuildEvent event) {\n        Target target = event.getTarget();\n        TimedElement targetElement = (TimedElement) targets.get(target);\n        if (targetElement != null) {\n            long totalTime\n                    = System.currentTimeMillis() - targetElement.startTime;\n            targetElement.element.setAttribute(TIME_ATTR,\n                    DefaultLogger.formatTime(totalTime));\n\n            TimedElement parentElement = null;\n            Stack threadStack = getStack();\n            if (!threadStack.empty()) {\n                TimedElement poppedStack = (TimedElement) threadStack.pop();\n                if (poppedStack != targetElement) {\n                    throw new RuntimeException(\"Mismatch - popped element = \"\n                            + poppedStack.element\n                            + \" finished target element = \"\n                            + targetElement.element);\n                }\n                if (!threadStack.empty()) {\n                    parentElement = (TimedElement) threadStack.peek();\n                }\n            }\n            if (parentElement == null) {\n                buildElement.element.appendChild(targetElement.element);\n            } else {\n                parentElement.element.appendChild(targetElement.element);\n            }\n        }\n    }\n","realPath":"src/main/org/apache/tools/ant/XmlLogger.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":241,"status":"M"},{"authorDate":"2004-02-09 21:58:02","commitOrder":5,"curCode":"    public void taskFinished(BuildEvent event) {\n        Task task = event.getTask();\n        TimedElement taskElement = (TimedElement) tasks.get(task);\n        if (taskElement != null) {\n            long totalTime = System.currentTimeMillis() - taskElement.startTime;\n            taskElement.element.setAttribute(TIME_ATTR,\n                    DefaultLogger.formatTime(totalTime));\n            Target target = task.getOwningTarget();\n            TimedElement targetElement = null;\n            if (target != null) {\n                targetElement = (TimedElement) targets.get(target);\n            }\n            if (targetElement == null) {\n                buildElement.element.appendChild(taskElement.element);\n            } else {\n                targetElement.element.appendChild(taskElement.element);\n            }\n            Stack threadStack = getStack();\n            if (!threadStack.empty()) {\n                TimedElement poppedStack = (TimedElement) threadStack.pop();\n                if (poppedStack != taskElement) {\n                    throw new RuntimeException(\"Mismatch - popped element = \"\n                            + poppedStack.element + \" finished task element = \"\n                            + taskElement.element);\n                }\n            }\n            tasks.remove(task);\n        }\n    }\n","date":"2004-02-09 21:58:02","endLine":330,"groupId":"6232","id":10,"instanceNumber":2,"isCurCommit":0,"methodName":"taskFinished","params":"(BuildEventevent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/19/ffbb8e8040c177214a36a8dfb1ca15d51d3d5f.src","preCode":"    public void taskFinished(BuildEvent event) {\n        Task task = event.getTask();\n        TimedElement taskElement = (TimedElement) tasks.get(task);\n        if (taskElement != null) {\n            long totalTime = System.currentTimeMillis() - taskElement.startTime;\n            taskElement.element.setAttribute(TIME_ATTR,\n                    DefaultLogger.formatTime(totalTime));\n            Target target = task.getOwningTarget();\n            TimedElement targetElement = null;\n            if (target != null) {\n                targetElement = (TimedElement) targets.get(target);\n            }\n            if (targetElement == null) {\n                buildElement.element.appendChild(taskElement.element);\n            } else {\n                targetElement.element.appendChild(taskElement.element);\n            }\n            Stack threadStack = getStack();\n            if (!threadStack.empty()) {\n                TimedElement poppedStack = (TimedElement) threadStack.pop();\n                if (poppedStack != taskElement) {\n                    throw new RuntimeException(\"Mismatch - popped element = \"\n                            + poppedStack.element + \" finished task element = \"\n                            + taskElement.element);\n                }\n            }\n        }\n    }\n","realPath":"src/main/org/apache/tools/ant/XmlLogger.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":302,"status":"M"}],"commitId":"58116029742ae1792d5689c9e40428849f503dcf","commitMessage":"@@@XmlLogger:\nRemove tasks and targets from the hashtables when the task/target finished\nevent arrives.\nPR: 25086 (a patch provided in one of the comments)\nObtained from: Artur Lorincz\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@276063 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2004-02-09 21:58:02","modifiedFileCount":"1","status":"M","submitter":"Peter Reilly"},{"authorTime":"2004-05-17 21:43:32","codes":[{"authorDate":"2004-05-17 21:43:32","commitOrder":6,"curCode":"    public void targetFinished(BuildEvent event) {\n        Target target = event.getTarget();\n        TimedElement targetElement = (TimedElement) targets.get(target);\n        if (targetElement != null) {\n            long totalTime\n                    = System.currentTimeMillis() - targetElement.startTime;\n            targetElement.element.setAttribute(TIME_ATTR,\n                    DefaultLogger.formatTime(totalTime));\n\n            TimedElement parentElement = null;\n            Stack threadStack = getStack();\n            if (!threadStack.empty()) {\n                TimedElement poppedStack = (TimedElement) threadStack.pop();\n                if (poppedStack != targetElement) {\n                    throw new RuntimeException(\"Mismatch - popped element = \"\n                            + poppedStack\n                            + \" finished target element = \"\n                            + targetElement);\n                }\n                if (!threadStack.empty()) {\n                    parentElement = (TimedElement) threadStack.peek();\n                }\n            }\n            if (parentElement == null) {\n                buildElement.element.appendChild(targetElement.element);\n            } else {\n                parentElement.element.appendChild(targetElement.element);\n            }\n        }\n        targets.remove(target);\n    }\n","date":"2004-05-17 21:43:32","endLine":277,"groupId":"5168","id":11,"instanceNumber":1,"isCurCommit":0,"methodName":"targetFinished","params":"(BuildEventevent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/71/0b0e68cdc428b5d308f571d872896884d68bac.src","preCode":"    public void targetFinished(BuildEvent event) {\n        Target target = event.getTarget();\n        TimedElement targetElement = (TimedElement) targets.get(target);\n        if (targetElement != null) {\n            long totalTime\n                    = System.currentTimeMillis() - targetElement.startTime;\n            targetElement.element.setAttribute(TIME_ATTR,\n                    DefaultLogger.formatTime(totalTime));\n\n            TimedElement parentElement = null;\n            Stack threadStack = getStack();\n            if (!threadStack.empty()) {\n                TimedElement poppedStack = (TimedElement) threadStack.pop();\n                if (poppedStack != targetElement) {\n                    throw new RuntimeException(\"Mismatch - popped element = \"\n                            + poppedStack.element\n                            + \" finished target element = \"\n                            + targetElement.element);\n                }\n                if (!threadStack.empty()) {\n                    parentElement = (TimedElement) threadStack.peek();\n                }\n            }\n            if (parentElement == null) {\n                buildElement.element.appendChild(targetElement.element);\n            } else {\n                parentElement.element.appendChild(targetElement.element);\n            }\n        }\n        targets.remove(target);\n    }\n","realPath":"src/main/org/apache/tools/ant/XmlLogger.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":247,"status":"M"},{"authorDate":"2004-05-17 21:43:32","commitOrder":6,"curCode":"    public void taskFinished(BuildEvent event) {\n        Task task = event.getTask();\n        TimedElement taskElement = (TimedElement) tasks.get(task);\n        if (taskElement != null) {\n            long totalTime = System.currentTimeMillis() - taskElement.startTime;\n            taskElement.element.setAttribute(TIME_ATTR,\n                    DefaultLogger.formatTime(totalTime));\n            Target target = task.getOwningTarget();\n            TimedElement targetElement = null;\n            if (target != null) {\n                targetElement = (TimedElement) targets.get(target);\n            }\n            if (targetElement == null) {\n                buildElement.element.appendChild(taskElement.element);\n            } else {\n                targetElement.element.appendChild(taskElement.element);\n            }\n            Stack threadStack = getStack();\n            if (!threadStack.empty()) {\n                TimedElement poppedStack = (TimedElement) threadStack.pop();\n                if (poppedStack != taskElement) {\n                    throw new RuntimeException(\"Mismatch - popped element = \"\n                            + poppedStack + \" finished task element = \"\n                            + taskElement);\n                }\n            }\n            tasks.remove(task);\n        } else {\n            throw new RuntimeException(\"Unknown task \" + task + \" not in \" + tasks);\n        }\n    }\n","date":"2004-05-17 21:43:32","endLine":338,"groupId":"6232","id":12,"instanceNumber":2,"isCurCommit":0,"methodName":"taskFinished","params":"(BuildEventevent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/71/0b0e68cdc428b5d308f571d872896884d68bac.src","preCode":"    public void taskFinished(BuildEvent event) {\n        Task task = event.getTask();\n        TimedElement taskElement = (TimedElement) tasks.get(task);\n        if (taskElement != null) {\n            long totalTime = System.currentTimeMillis() - taskElement.startTime;\n            taskElement.element.setAttribute(TIME_ATTR,\n                    DefaultLogger.formatTime(totalTime));\n            Target target = task.getOwningTarget();\n            TimedElement targetElement = null;\n            if (target != null) {\n                targetElement = (TimedElement) targets.get(target);\n            }\n            if (targetElement == null) {\n                buildElement.element.appendChild(taskElement.element);\n            } else {\n                targetElement.element.appendChild(taskElement.element);\n            }\n            Stack threadStack = getStack();\n            if (!threadStack.empty()) {\n                TimedElement poppedStack = (TimedElement) threadStack.pop();\n                if (poppedStack != taskElement) {\n                    throw new RuntimeException(\"Mismatch - popped element = \"\n                            + poppedStack.element + \" finished task element = \"\n                            + taskElement.element);\n                }\n            }\n            tasks.remove(task);\n        }\n    }\n","realPath":"src/main/org/apache/tools/ant/XmlLogger.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":308,"status":"M"}],"commitId":"6cc4c84df32750d9eb14789fe9ff8bd7dbd3dc81","commitMessage":"@@@better diagnostics from XmlLogger.java\nPR: 28993\nObtained from: Jesse Glick\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@276464 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2004-05-17 21:43:32","modifiedFileCount":"2","status":"M","submitter":"Peter Reilly"},{"authorTime":"2007-07-18 02:09:35","codes":[{"authorDate":"2004-05-17 21:43:32","commitOrder":7,"curCode":"    public void targetFinished(BuildEvent event) {\n        Target target = event.getTarget();\n        TimedElement targetElement = (TimedElement) targets.get(target);\n        if (targetElement != null) {\n            long totalTime\n                    = System.currentTimeMillis() - targetElement.startTime;\n            targetElement.element.setAttribute(TIME_ATTR,\n                    DefaultLogger.formatTime(totalTime));\n\n            TimedElement parentElement = null;\n            Stack threadStack = getStack();\n            if (!threadStack.empty()) {\n                TimedElement poppedStack = (TimedElement) threadStack.pop();\n                if (poppedStack != targetElement) {\n                    throw new RuntimeException(\"Mismatch - popped element = \"\n                            + poppedStack\n                            + \" finished target element = \"\n                            + targetElement);\n                }\n                if (!threadStack.empty()) {\n                    parentElement = (TimedElement) threadStack.peek();\n                }\n            }\n            if (parentElement == null) {\n                buildElement.element.appendChild(targetElement.element);\n            } else {\n                parentElement.element.appendChild(targetElement.element);\n            }\n        }\n        targets.remove(target);\n    }\n","date":"2004-05-17 21:43:32","endLine":277,"groupId":"5168","id":13,"instanceNumber":1,"isCurCommit":0,"methodName":"targetFinished","params":"(BuildEventevent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/71/0b0e68cdc428b5d308f571d872896884d68bac.src","preCode":"    public void targetFinished(BuildEvent event) {\n        Target target = event.getTarget();\n        TimedElement targetElement = (TimedElement) targets.get(target);\n        if (targetElement != null) {\n            long totalTime\n                    = System.currentTimeMillis() - targetElement.startTime;\n            targetElement.element.setAttribute(TIME_ATTR,\n                    DefaultLogger.formatTime(totalTime));\n\n            TimedElement parentElement = null;\n            Stack threadStack = getStack();\n            if (!threadStack.empty()) {\n                TimedElement poppedStack = (TimedElement) threadStack.pop();\n                if (poppedStack != targetElement) {\n                    throw new RuntimeException(\"Mismatch - popped element = \"\n                            + poppedStack\n                            + \" finished target element = \"\n                            + targetElement);\n                }\n                if (!threadStack.empty()) {\n                    parentElement = (TimedElement) threadStack.peek();\n                }\n            }\n            if (parentElement == null) {\n                buildElement.element.appendChild(targetElement.element);\n            } else {\n                parentElement.element.appendChild(targetElement.element);\n            }\n        }\n        targets.remove(target);\n    }\n","realPath":"src/main/org/apache/tools/ant/XmlLogger.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":247,"status":"N"},{"authorDate":"2007-07-18 02:09:35","commitOrder":7,"curCode":"    public void taskFinished(BuildEvent event) {\n        Task task = event.getTask();\n        TimedElement taskElement = (TimedElement) tasks.get(task);\n        if (taskElement == null) {\n            throw new RuntimeException(\"Unknown task \" + task + \" not in \" + tasks);\n        }\n        long totalTime = System.currentTimeMillis() - taskElement.startTime;\n        taskElement.element.setAttribute(TIME_ATTR, DefaultLogger.formatTime(totalTime));\n        Target target = task.getOwningTarget();\n        TimedElement targetElement = null;\n        if (target != null) {\n            targetElement = (TimedElement) targets.get(target);\n        }\n        if (targetElement == null) {\n            buildElement.element.appendChild(taskElement.element);\n        } else {\n            targetElement.element.appendChild(taskElement.element);\n        }\n        Stack threadStack = getStack();\n        if (!threadStack.empty()) {\n            TimedElement poppedStack = (TimedElement) threadStack.pop();\n            if (poppedStack != taskElement) {\n                throw new RuntimeException(\"Mismatch - popped element = \" + poppedStack\n                        + \" finished task element = \" + taskElement);\n            }\n        }\n        tasks.remove(task);\n    }\n","date":"2007-07-18 02:09:35","endLine":336,"groupId":"6232","id":14,"instanceNumber":2,"isCurCommit":0,"methodName":"taskFinished","params":"(BuildEventevent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/d5/ba6b39549255e69128522be6d09e3f2295d09c.src","preCode":"    public void taskFinished(BuildEvent event) {\n        Task task = event.getTask();\n        TimedElement taskElement = (TimedElement) tasks.get(task);\n        if (taskElement != null) {\n            long totalTime = System.currentTimeMillis() - taskElement.startTime;\n            taskElement.element.setAttribute(TIME_ATTR,\n                    DefaultLogger.formatTime(totalTime));\n            Target target = task.getOwningTarget();\n            TimedElement targetElement = null;\n            if (target != null) {\n                targetElement = (TimedElement) targets.get(target);\n            }\n            if (targetElement == null) {\n                buildElement.element.appendChild(taskElement.element);\n            } else {\n                targetElement.element.appendChild(taskElement.element);\n            }\n            Stack threadStack = getStack();\n            if (!threadStack.empty()) {\n                TimedElement poppedStack = (TimedElement) threadStack.pop();\n                if (poppedStack != taskElement) {\n                    throw new RuntimeException(\"Mismatch - popped element = \"\n                            + poppedStack + \" finished task element = \"\n                            + taskElement);\n                }\n            }\n            tasks.remove(task);\n        } else {\n            throw new RuntimeException(\"Unknown task \" + task + \" not in \" + tasks);\n        }\n    }\n","realPath":"src/main/org/apache/tools/ant/XmlLogger.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":309,"status":"M"}],"commitId":"64886360cf0d83287454a0b04a6613c3f47c0e7d","commitMessage":"@@@fmt/refac\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@557005 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2007-07-18 02:09:35","modifiedFileCount":"4","status":"M","submitter":"Matthew Jason Benson"},{"authorTime":"2008-07-11 23:45:53","codes":[{"authorDate":"2008-07-11 23:45:53","commitOrder":8,"curCode":"    public void targetFinished(BuildEvent event) {\n        Target target = event.getTarget();\n        TimedElement targetElement = (TimedElement) targets.get(target);\n        if (targetElement != null) {\n            long totalTime = System.currentTimeMillis() - targetElement.startTime;\n            targetElement.element.setAttribute(TIME_ATTR, DefaultLogger.formatTime(totalTime));\n\n            TimedElement parentElement = null;\n            Stack threadStack = getStack();\n            if (!threadStack.empty()) {\n                TimedElement poppedStack = (TimedElement) threadStack.pop();\n                if (poppedStack != targetElement) {\n                    throw new RuntimeException(\"Mismatch - popped element = \" + poppedStack\n                            + \" finished target element = \" + targetElement);\n                }\n                if (!threadStack.empty()) {\n                    parentElement = (TimedElement) threadStack.peek();\n                }\n            }\n            if (parentElement == null) {\n                synchronizedAppend(buildElement.element, targetElement.element);\n            } else {\n                synchronizedAppend(parentElement.element,\n                                   targetElement.element);\n            }\n        }\n        targets.remove(target);\n    }\n","date":"2008-07-11 23:45:53","endLine":278,"groupId":"5168","id":15,"instanceNumber":1,"isCurCommit":0,"methodName":"targetFinished","params":"(BuildEventevent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/b2/a86c5844b3efca019d53679dd3327fd4a21445.src","preCode":"    public void targetFinished(BuildEvent event) {\n        Target target = event.getTarget();\n        TimedElement targetElement = (TimedElement) targets.get(target);\n        if (targetElement != null) {\n            long totalTime = System.currentTimeMillis() - targetElement.startTime;\n            targetElement.element.setAttribute(TIME_ATTR, DefaultLogger.formatTime(totalTime));\n\n            TimedElement parentElement = null;\n            Stack threadStack = getStack();\n            if (!threadStack.empty()) {\n                TimedElement poppedStack = (TimedElement) threadStack.pop();\n                if (poppedStack != targetElement) {\n                    throw new RuntimeException(\"Mismatch - popped element = \" + poppedStack\n                            + \" finished target element = \" + targetElement);\n                }\n                if (!threadStack.empty()) {\n                    parentElement = (TimedElement) threadStack.peek();\n                }\n            }\n            if (parentElement == null) {\n                buildElement.element.appendChild(targetElement.element);\n            } else {\n                parentElement.element.appendChild(targetElement.element);\n            }\n        }\n        targets.remove(target);\n    }\n","realPath":"src/main/org/apache/tools/ant/XmlLogger.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":251,"status":"M"},{"authorDate":"2008-07-11 23:45:53","commitOrder":8,"curCode":"    public void taskFinished(BuildEvent event) {\n        Task task = event.getTask();\n        TimedElement taskElement = (TimedElement) tasks.get(task);\n        if (taskElement == null) {\n            throw new RuntimeException(\"Unknown task \" + task + \" not in \" + tasks);\n        }\n        long totalTime = System.currentTimeMillis() - taskElement.startTime;\n        taskElement.element.setAttribute(TIME_ATTR, DefaultLogger.formatTime(totalTime));\n        Target target = task.getOwningTarget();\n        TimedElement targetElement = null;\n        if (target != null) {\n            targetElement = (TimedElement) targets.get(target);\n        }\n        if (targetElement == null) {\n            synchronizedAppend(buildElement.element, taskElement.element);\n        } else {\n            synchronizedAppend(targetElement.element, taskElement.element);\n        }\n        Stack threadStack = getStack();\n        if (!threadStack.empty()) {\n            TimedElement poppedStack = (TimedElement) threadStack.pop();\n            if (poppedStack != taskElement) {\n                throw new RuntimeException(\"Mismatch - popped element = \" + poppedStack\n                        + \" finished task element = \" + taskElement);\n            }\n        }\n        tasks.remove(task);\n    }\n","date":"2008-07-11 23:45:53","endLine":338,"groupId":"6232","id":16,"instanceNumber":2,"isCurCommit":0,"methodName":"taskFinished","params":"(BuildEventevent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/b2/a86c5844b3efca019d53679dd3327fd4a21445.src","preCode":"    public void taskFinished(BuildEvent event) {\n        Task task = event.getTask();\n        TimedElement taskElement = (TimedElement) tasks.get(task);\n        if (taskElement == null) {\n            throw new RuntimeException(\"Unknown task \" + task + \" not in \" + tasks);\n        }\n        long totalTime = System.currentTimeMillis() - taskElement.startTime;\n        taskElement.element.setAttribute(TIME_ATTR, DefaultLogger.formatTime(totalTime));\n        Target target = task.getOwningTarget();\n        TimedElement targetElement = null;\n        if (target != null) {\n            targetElement = (TimedElement) targets.get(target);\n        }\n        if (targetElement == null) {\n            buildElement.element.appendChild(taskElement.element);\n        } else {\n            targetElement.element.appendChild(taskElement.element);\n        }\n        Stack threadStack = getStack();\n        if (!threadStack.empty()) {\n            TimedElement poppedStack = (TimedElement) threadStack.pop();\n            if (poppedStack != taskElement) {\n                throw new RuntimeException(\"Mismatch - popped element = \" + poppedStack\n                        + \" finished task element = \" + taskElement);\n            }\n        }\n        tasks.remove(task);\n    }\n","realPath":"src/main/org/apache/tools/ant/XmlLogger.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":311,"status":"M"}],"commitId":"f110a5fb7a1553b1a15ab5c2da02235e48101426","commitMessage":"@@@XmlLogger could lose messages when parallel is used.  PR 25734.  Based on analysis and patch by Craig Sandvik\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@675993 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2008-07-11 23:45:53","modifiedFileCount":"1","status":"M","submitter":"Stefan Bodewig"},{"authorTime":"2012-08-21 01:49:13","codes":[{"authorDate":"2012-08-21 01:49:13","commitOrder":9,"curCode":"    public void targetFinished(BuildEvent event) {\n        Target target = event.getTarget();\n        TimedElement targetElement = (TimedElement) targets.get(target);\n        if (targetElement != null) {\n            long totalTime = System.currentTimeMillis() - targetElement.startTime;\n            targetElement.element.setAttribute(TIME_ATTR, DefaultLogger.formatTime(totalTime));\n\n            TimedElement parentElement = null;\n            Stack<TimedElement> threadStack = getStack();\n            if (!threadStack.empty()) {\n                TimedElement poppedStack = threadStack.pop();\n                if (poppedStack != targetElement) {\n                    throw new RuntimeException(\"Mismatch - popped element = \" + poppedStack\n                            + \" finished target element = \" + targetElement);\n                }\n                if (!threadStack.empty()) {\n                    parentElement = (TimedElement) threadStack.peek();\n                }\n            }\n            if (parentElement == null) {\n                synchronizedAppend(buildElement.element, targetElement.element);\n            } else {\n                synchronizedAppend(parentElement.element,\n                                   targetElement.element);\n            }\n        }\n        targets.remove(target);\n    }\n","date":"2012-08-21 01:49:13","endLine":279,"groupId":"5168","id":17,"instanceNumber":1,"isCurCommit":0,"methodName":"targetFinished","params":"(BuildEventevent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/b9/98821860023e957214178d72962cd0d84536d7.src","preCode":"    public void targetFinished(BuildEvent event) {\n        Target target = event.getTarget();\n        TimedElement targetElement = (TimedElement) targets.get(target);\n        if (targetElement != null) {\n            long totalTime = System.currentTimeMillis() - targetElement.startTime;\n            targetElement.element.setAttribute(TIME_ATTR, DefaultLogger.formatTime(totalTime));\n\n            TimedElement parentElement = null;\n            Stack threadStack = getStack();\n            if (!threadStack.empty()) {\n                TimedElement poppedStack = (TimedElement) threadStack.pop();\n                if (poppedStack != targetElement) {\n                    throw new RuntimeException(\"Mismatch - popped element = \" + poppedStack\n                            + \" finished target element = \" + targetElement);\n                }\n                if (!threadStack.empty()) {\n                    parentElement = (TimedElement) threadStack.peek();\n                }\n            }\n            if (parentElement == null) {\n                synchronizedAppend(buildElement.element, targetElement.element);\n            } else {\n                synchronizedAppend(parentElement.element,\n                                   targetElement.element);\n            }\n        }\n        targets.remove(target);\n    }\n","realPath":"src/main/org/apache/tools/ant/XmlLogger.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":252,"status":"M"},{"authorDate":"2012-08-21 01:49:13","commitOrder":9,"curCode":"    public void taskFinished(BuildEvent event) {\n        Task task = event.getTask();\n        TimedElement taskElement = (TimedElement) tasks.get(task);\n        if (taskElement == null) {\n            throw new RuntimeException(\"Unknown task \" + task + \" not in \" + tasks);\n        }\n        long totalTime = System.currentTimeMillis() - taskElement.startTime;\n        taskElement.element.setAttribute(TIME_ATTR, DefaultLogger.formatTime(totalTime));\n        Target target = task.getOwningTarget();\n        TimedElement targetElement = null;\n        if (target != null) {\n            targetElement = (TimedElement) targets.get(target);\n        }\n        if (targetElement == null) {\n            synchronizedAppend(buildElement.element, taskElement.element);\n        } else {\n            synchronizedAppend(targetElement.element, taskElement.element);\n        }\n        Stack<TimedElement> threadStack = getStack();\n        if (!threadStack.empty()) {\n            TimedElement poppedStack = threadStack.pop();\n            if (poppedStack != taskElement) {\n                throw new RuntimeException(\"Mismatch - popped element = \" + poppedStack\n                        + \" finished task element = \" + taskElement);\n            }\n        }\n        tasks.remove(task);\n    }\n","date":"2012-08-21 01:49:13","endLine":339,"groupId":"6232","id":18,"instanceNumber":2,"isCurCommit":0,"methodName":"taskFinished","params":"(BuildEventevent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/b9/98821860023e957214178d72962cd0d84536d7.src","preCode":"    public void taskFinished(BuildEvent event) {\n        Task task = event.getTask();\n        TimedElement taskElement = (TimedElement) tasks.get(task);\n        if (taskElement == null) {\n            throw new RuntimeException(\"Unknown task \" + task + \" not in \" + tasks);\n        }\n        long totalTime = System.currentTimeMillis() - taskElement.startTime;\n        taskElement.element.setAttribute(TIME_ATTR, DefaultLogger.formatTime(totalTime));\n        Target target = task.getOwningTarget();\n        TimedElement targetElement = null;\n        if (target != null) {\n            targetElement = (TimedElement) targets.get(target);\n        }\n        if (targetElement == null) {\n            synchronizedAppend(buildElement.element, taskElement.element);\n        } else {\n            synchronizedAppend(targetElement.element, taskElement.element);\n        }\n        Stack threadStack = getStack();\n        if (!threadStack.empty()) {\n            TimedElement poppedStack = (TimedElement) threadStack.pop();\n            if (poppedStack != taskElement) {\n                throw new RuntimeException(\"Mismatch - popped element = \" + poppedStack\n                        + \" finished task element = \" + taskElement);\n            }\n        }\n        tasks.remove(task);\n    }\n","realPath":"src/main/org/apache/tools/ant/XmlLogger.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":312,"status":"M"}],"commitId":"3d706ab8188a674936880b6f4530b0cf3991758b","commitMessage":"@@@java 5 updates\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@1375137 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2012-08-21 01:49:13","modifiedFileCount":"29","status":"M","submitter":"Matthew Jason Benson"},{"authorTime":"2014-08-14 17:27:31","codes":[{"authorDate":"2014-08-14 17:27:31","commitOrder":10,"curCode":"    public void targetFinished(BuildEvent event) {\n        Target target = event.getTarget();\n        TimedElement targetElement = targets.get(target);\n        if (targetElement != null) {\n            long totalTime = System.currentTimeMillis() - targetElement.startTime;\n            targetElement.element.setAttribute(TIME_ATTR, DefaultLogger.formatTime(totalTime));\n\n            TimedElement parentElement = null;\n            Stack<TimedElement> threadStack = getStack();\n            if (!threadStack.empty()) {\n                TimedElement poppedStack = threadStack.pop();\n                if (poppedStack != targetElement) {\n                    throw new RuntimeException(\"Mismatch - popped element = \" + poppedStack\n                            + \" finished target element = \" + targetElement);\n                }\n                if (!threadStack.empty()) {\n                    parentElement = threadStack.peek();\n                }\n            }\n            if (parentElement == null) {\n                synchronizedAppend(buildElement.element, targetElement.element);\n            } else {\n                synchronizedAppend(parentElement.element,\n                                   targetElement.element);\n            }\n        }\n        targets.remove(target);\n    }\n","date":"2014-08-14 17:27:31","endLine":282,"groupId":"10569","id":19,"instanceNumber":1,"isCurCommit":0,"methodName":"targetFinished","params":"(BuildEventevent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/a6/7a260ed23f77b633342fd42fe1331304b59084.src","preCode":"    public void targetFinished(BuildEvent event) {\n        Target target = event.getTarget();\n        TimedElement targetElement = (TimedElement) targets.get(target);\n        if (targetElement != null) {\n            long totalTime = System.currentTimeMillis() - targetElement.startTime;\n            targetElement.element.setAttribute(TIME_ATTR, DefaultLogger.formatTime(totalTime));\n\n            TimedElement parentElement = null;\n            Stack<TimedElement> threadStack = getStack();\n            if (!threadStack.empty()) {\n                TimedElement poppedStack = threadStack.pop();\n                if (poppedStack != targetElement) {\n                    throw new RuntimeException(\"Mismatch - popped element = \" + poppedStack\n                            + \" finished target element = \" + targetElement);\n                }\n                if (!threadStack.empty()) {\n                    parentElement = (TimedElement) threadStack.peek();\n                }\n            }\n            if (parentElement == null) {\n                synchronizedAppend(buildElement.element, targetElement.element);\n            } else {\n                synchronizedAppend(parentElement.element,\n                                   targetElement.element);\n            }\n        }\n        targets.remove(target);\n    }\n","realPath":"src/main/org/apache/tools/ant/XmlLogger.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":255,"status":"M"},{"authorDate":"2014-08-14 17:27:31","commitOrder":10,"curCode":"    public void taskFinished(BuildEvent event) {\n        Task task = event.getTask();\n        TimedElement taskElement = tasks.get(task);\n        if (taskElement == null) {\n            throw new RuntimeException(\"Unknown task \" + task + \" not in \" + tasks);\n        }\n        long totalTime = System.currentTimeMillis() - taskElement.startTime;\n        taskElement.element.setAttribute(TIME_ATTR, DefaultLogger.formatTime(totalTime));\n        Target target = task.getOwningTarget();\n        TimedElement targetElement = null;\n        if (target != null) {\n            targetElement = targets.get(target);\n        }\n        if (targetElement == null) {\n            synchronizedAppend(buildElement.element, taskElement.element);\n        } else {\n            synchronizedAppend(targetElement.element, taskElement.element);\n        }\n        Stack<TimedElement> threadStack = getStack();\n        if (!threadStack.empty()) {\n            TimedElement poppedStack = threadStack.pop();\n            if (poppedStack != taskElement) {\n                throw new RuntimeException(\"Mismatch - popped element = \" + poppedStack\n                        + \" finished task element = \" + taskElement);\n            }\n        }\n        tasks.remove(task);\n    }\n","date":"2014-08-14 17:27:31","endLine":342,"groupId":"10569","id":20,"instanceNumber":2,"isCurCommit":0,"methodName":"taskFinished","params":"(BuildEventevent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/a6/7a260ed23f77b633342fd42fe1331304b59084.src","preCode":"    public void taskFinished(BuildEvent event) {\n        Task task = event.getTask();\n        TimedElement taskElement = (TimedElement) tasks.get(task);\n        if (taskElement == null) {\n            throw new RuntimeException(\"Unknown task \" + task + \" not in \" + tasks);\n        }\n        long totalTime = System.currentTimeMillis() - taskElement.startTime;\n        taskElement.element.setAttribute(TIME_ATTR, DefaultLogger.formatTime(totalTime));\n        Target target = task.getOwningTarget();\n        TimedElement targetElement = null;\n        if (target != null) {\n            targetElement = (TimedElement) targets.get(target);\n        }\n        if (targetElement == null) {\n            synchronizedAppend(buildElement.element, taskElement.element);\n        } else {\n            synchronizedAppend(targetElement.element, taskElement.element);\n        }\n        Stack<TimedElement> threadStack = getStack();\n        if (!threadStack.empty()) {\n            TimedElement poppedStack = threadStack.pop();\n            if (poppedStack != taskElement) {\n                throw new RuntimeException(\"Mismatch - popped element = \" + poppedStack\n                        + \" finished task element = \" + taskElement);\n            }\n        }\n        tasks.remove(task);\n    }\n","realPath":"src/main/org/apache/tools/ant/XmlLogger.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":315,"status":"M"}],"commitId":"d92b5275c6bd7e50d7961055fdc68c45e74d5272","commitMessage":"@@@Bug-56850: null safe property access","date":"2014-08-14 17:27:31","modifiedFileCount":"1","status":"M","submitter":"Jan Mat?rne"}]
