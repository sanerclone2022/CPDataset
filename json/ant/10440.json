[{"authorTime":"2006-05-09 12:26:36","codes":[{"authorDate":"2006-05-09 12:26:36","commitOrder":1,"curCode":"    public void execute() throws IOException, JSchException {\n        ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n            try {\n                SftpATTRS attrs = channel.stat(remoteFile);\n                if (attrs.isDir() && !remoteFile.endsWith(\"/\")) {\n                    remoteFile=remoteFile+\"/\";\n                }\n            } catch(SftpException ee) {\n            }\n            getDir(channel, remoteFile, localFile);\n        } catch(SftpException e) {\n            throw new JSchException(e.toString());\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n        log(\"done\\n\");\n    }\n","date":"2006-05-09 12:26:36","endLine":106,"groupId":"8939","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"execute","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/77/fb244dd291a438f7215eda5019a0ee55ab8d73.src","preCode":"    public void execute() throws IOException, JSchException {\n        ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n            try {\n                SftpATTRS attrs = channel.stat(remoteFile);\n                if (attrs.isDir() && !remoteFile.endsWith(\"/\")) {\n                    remoteFile=remoteFile+\"/\";\n                }\n            } catch(SftpException ee) {\n            }\n            getDir(channel, remoteFile, localFile);\n        } catch(SftpException e) {\n            throw new JSchException(e.toString());\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n        log(\"done\\n\");\n    }\n","realPath":"src/main/org/apache/tools/ant/taskdefs/optional/ssh/ScpFromMessageBySftp.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":86,"status":"B"},{"authorDate":"2006-05-09 12:26:36","commitOrder":1,"curCode":"    private void doMultipleTransfer() throws IOException, JSchException {\n        ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n\n            try{\n                channel.cd(remotePath);\n                for (Iterator i = directoryList.iterator(); i.hasNext();) {\n                    Directory current = (Directory) i.next();\n                    sendDirectory(channel, current);\n                }\n            }\n            catch(SftpException e){\n                throw new JSchException(e.toString());\n            }\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n    }\n","date":"2006-05-09 12:26:36","endLine":166,"groupId":"1888","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"doMultipleTransfer","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/88/6d9eb4b0cbd87a0773fd54d9ee2e333245dfba.src","preCode":"    private void doMultipleTransfer() throws IOException, JSchException {\n        ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n\n            try{\n                channel.cd(remotePath);\n                for (Iterator i = directoryList.iterator(); i.hasNext();) {\n                    Directory current = (Directory) i.next();\n                    sendDirectory(channel, current);\n                }\n            }\n            catch(SftpException e){\n                throw new JSchException(e.toString());\n            }\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n    }\n","realPath":"src/main/org/apache/tools/ant/taskdefs/optional/ssh/ScpToMessageBySftp.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":146,"status":"B"}],"commitId":"59e489be6d6d656a7358bed90a391fda6342076c","commitMessage":"@@@Make <scp> support the sftp protocol.  PR 39373\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@405300 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2006-05-09 12:26:36","modifiedFileCount":"4","status":"B","submitter":"Stefan Bodewig"},{"authorTime":"2008-06-14 00:37:25","codes":[{"authorDate":"2008-06-14 00:37:25","commitOrder":2,"curCode":"    public void execute() throws IOException, JSchException {\n        ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n            try {\n                SftpATTRS attrs = channel.stat(remoteFile);\n                if (attrs.isDir() && !remoteFile.endsWith(\"/\")) {\n                    remoteFile = remoteFile + \"/\";\n                }\n            } catch (SftpException ee) {\n                \r\n            }\n            getDir(channel, remoteFile, localFile);\n        } catch (SftpException e) {\n            JSchException schException = new JSchException(\"Could not get '\"+ remoteFile\n                    +\"' to '\"+localFile+\"' - \"\n                    +e.toString());\n            schException.initCause(e);\n            throw schException;\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n        log(\"done\\n\");\n    }\n","date":"2008-06-14 00:37:25","endLine":108,"groupId":"8182","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"execute","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/36/69e3f2eae3a1e26fd6ef56b7539ba48665bff2.src","preCode":"    public void execute() throws IOException, JSchException {\n        ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n            try {\n                SftpATTRS attrs = channel.stat(remoteFile);\n                if (attrs.isDir() && !remoteFile.endsWith(\"/\")) {\n                    remoteFile = remoteFile + \"/\";\n                }\n            } catch (SftpException ee) {\n                \r\n            }\n            getDir(channel, remoteFile, localFile);\n        } catch (SftpException e) {\n            throw new JSchException(e.toString());\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n        log(\"done\\n\");\n    }\n","realPath":"src/main/org/apache/tools/ant/taskdefs/optional/ssh/ScpFromMessageBySftp.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":83,"status":"M"},{"authorDate":"2008-06-14 00:37:25","commitOrder":2,"curCode":"    private void doMultipleTransfer() throws IOException, JSchException {\n        ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n\n            try {\n                channel.cd(remotePath);\n            } catch (SftpException e) {\n                JSchException schException = new JSchException(\"Could not CD to '\" + remotePath + \"' - \" + e.toString());\n                schException.initCause(e);\n                throw schException;\n            }\n            try {\n                for (Iterator i = directoryList.iterator(); i.hasNext();) {\n                    Directory current = (Directory) i.next();\n                    if(getVerbose()) {\n                        log(\"Sending directory \" + current);\n                    }\n                    sendDirectory(channel, current);\n                }\n            } catch (SftpException e) {\n                JSchException schException = new JSchException(e.toString());\n                schException.initCause(e);\n                throw schException;\n            }\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n    }\n","date":"2008-06-14 00:37:25","endLine":180,"groupId":"1888","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"doMultipleTransfer","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/76/7b172f0089873c65702790987bee1c2b83cc08.src","preCode":"    private void doMultipleTransfer() throws IOException, JSchException {\n        ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n\n            try {\n                channel.cd(remotePath);\n                for (Iterator i = directoryList.iterator(); i.hasNext();) {\n                    Directory current = (Directory) i.next();\n                    sendDirectory(channel, current);\n                }\n            } catch (SftpException e) {\n                throw new JSchException(e.toString());\n            }\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n    }\n","realPath":"src/main/org/apache/tools/ant/taskdefs/optional/ssh/ScpToMessageBySftp.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":150,"status":"M"}],"commitId":"7d77f6e9fbd9ef55d8ee92aa2578c513ac3b4e53","commitMessage":"@@@add some useful diagnostics messages when sftp fails.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@667587 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2008-06-14 00:37:25","modifiedFileCount":"2","status":"M","submitter":"Steve Loughran"},{"authorTime":"2008-07-16 17:32:52","codes":[{"authorDate":"2008-06-14 00:37:25","commitOrder":3,"curCode":"    public void execute() throws IOException, JSchException {\n        ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n            try {\n                SftpATTRS attrs = channel.stat(remoteFile);\n                if (attrs.isDir() && !remoteFile.endsWith(\"/\")) {\n                    remoteFile = remoteFile + \"/\";\n                }\n            } catch (SftpException ee) {\n                \r\n            }\n            getDir(channel, remoteFile, localFile);\n        } catch (SftpException e) {\n            JSchException schException = new JSchException(\"Could not get '\"+ remoteFile\n                    +\"' to '\"+localFile+\"' - \"\n                    +e.toString());\n            schException.initCause(e);\n            throw schException;\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n        log(\"done\\n\");\n    }\n","date":"2008-06-14 00:37:25","endLine":108,"groupId":"8182","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"execute","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/36/69e3f2eae3a1e26fd6ef56b7539ba48665bff2.src","preCode":"    public void execute() throws IOException, JSchException {\n        ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n            try {\n                SftpATTRS attrs = channel.stat(remoteFile);\n                if (attrs.isDir() && !remoteFile.endsWith(\"/\")) {\n                    remoteFile = remoteFile + \"/\";\n                }\n            } catch (SftpException ee) {\n                \r\n            }\n            getDir(channel, remoteFile, localFile);\n        } catch (SftpException e) {\n            JSchException schException = new JSchException(\"Could not get '\"+ remoteFile\n                    +\"' to '\"+localFile+\"' - \"\n                    +e.toString());\n            schException.initCause(e);\n            throw schException;\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n        log(\"done\\n\");\n    }\n","realPath":"src/main/org/apache/tools/ant/taskdefs/optional/ssh/ScpFromMessageBySftp.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":83,"status":"N"},{"authorDate":"2008-07-16 17:32:52","commitOrder":3,"curCode":"    private void doMultipleTransfer() throws IOException, JSchException {\n        ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n\n            try {\n                try {\n                    channel.stat(remotePath);\n                } catch (SftpException e) {\n                    if (e.id == ChannelSftp.SSH_FX_NO_SUCH_FILE) {\n                        \r\n                        channel.mkdir(remotePath);\n                    } else {\n                        throw new JSchException(\"failed to access remote dir '\"\n                                                + remotePath + \"'\", e);\n                    }\n                }\n                channel.cd(remotePath);\n            } catch (SftpException e) {\n                throw new JSchException(\"Could not CD to '\" + remotePath\n                                        + \"' - \" + e.toString(), e);\n            }\n            Directory current = null;\n            try {\n                for (Iterator i = directoryList.iterator(); i.hasNext();) {\n                    current = (Directory) i.next();\n                    if (getVerbose()) {\n                        log(\"Sending directory \" + current);\n                    }\n                    sendDirectory(channel, current);\n                }\n            } catch (SftpException e) {\n                String msg = \"Error sending directory\";\n                if (current != null && current.getDirectory() != null) {\n                    msg += \" '\" + current.getDirectory().getName() + \"'\";\n                }\n                throw new JSchException(msg, e);\n            }\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n    }\n","date":"2008-07-16 17:32:52","endLine":193,"groupId":"1537","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"doMultipleTransfer","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/c9/4415978c9d2ea3eaa65cb55c215ffe60e20ac8.src","preCode":"    private void doMultipleTransfer() throws IOException, JSchException {\n        ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n\n            try {\n                channel.cd(remotePath);\n            } catch (SftpException e) {\n                JSchException schException = new JSchException(\"Could not CD to '\" + remotePath + \"' - \" + e.toString());\n                schException.initCause(e);\n                throw schException;\n            }\n            try {\n                for (Iterator i = directoryList.iterator(); i.hasNext();) {\n                    Directory current = (Directory) i.next();\n                    if(getVerbose()) {\n                        log(\"Sending directory \" + current);\n                    }\n                    sendDirectory(channel, current);\n                }\n            } catch (SftpException e) {\n                JSchException schException = new JSchException(e.toString());\n                schException.initCause(e);\n                throw schException;\n            }\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n    }\n","realPath":"src/main/org/apache/tools/ant/taskdefs/optional/ssh/ScpToMessageBySftp.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":150,"status":"M"}],"commitId":"fd126ea83074cffca634b5e6ef2ae80844ff7695","commitMessage":"@@@Create remoteDir if needed.  More meaningful error when exception occurs.  PR 42781.  Submitted by Eduard Wirch.\n\ngit-svn-id: https://svn.apache.org/repos/asf/ant/core/trunk@677211 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2008-07-16 17:32:52","modifiedFileCount":"1","status":"M","submitter":"Stefan Bodewig"},{"authorTime":"2014-07-04 21:05:12","codes":[{"authorDate":"2014-07-04 21:05:12","commitOrder":4,"curCode":"    public void execute() throws IOException, JSchException {\n        final ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n            try {\n                final SftpATTRS attrs = channel.stat(remoteFile);\n                if (attrs.isDir() && !remoteFile.endsWith(\"/\")) {\n                    remoteFile = remoteFile + \"/\";\n                }\n            } catch (final SftpException ee) {\n                \r\n            }\n            getDir(channel, remoteFile, localFile);\n        } catch (final SftpException e) {\n            final JSchException schException = new JSchException(\"Could not get '\"+ remoteFile\n                    +\"' to '\"+localFile+\"' - \"\n                    +e.toString());\n            schException.initCause(e);\n            throw schException;\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n        log(\"done\\n\");\n    }\n","date":"2014-07-04 21:05:12","endLine":131,"groupId":"8182","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"execute","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/04/f72d235622f6f832b575e41f4a758c2a486808.src","preCode":"    public void execute() throws IOException, JSchException {\n        ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n            try {\n                SftpATTRS attrs = channel.stat(remoteFile);\n                if (attrs.isDir() && !remoteFile.endsWith(\"/\")) {\n                    remoteFile = remoteFile + \"/\";\n                }\n            } catch (SftpException ee) {\n                \r\n            }\n            getDir(channel, remoteFile, localFile);\n        } catch (SftpException e) {\n            JSchException schException = new JSchException(\"Could not get '\"+ remoteFile\n                    +\"' to '\"+localFile+\"' - \"\n                    +e.toString());\n            schException.initCause(e);\n            throw schException;\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n        log(\"done\\n\");\n    }\n","realPath":"src/main/org/apache/tools/ant/taskdefs/optional/ssh/ScpFromMessageBySftp.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":106,"status":"M"},{"authorDate":"2014-07-04 21:05:12","commitOrder":4,"curCode":"    private void doMultipleTransfer() throws IOException, JSchException {\n        final ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n\n            try {\n                try {\n                    channel.stat(remotePath);\n                } catch (final SftpException e) {\n                    if (e.id == ChannelSftp.SSH_FX_NO_SUCH_FILE) {\n                        \r\n                        channel.mkdir(remotePath);\n                    } else {\n                        throw new JSchException(\"failed to access remote dir '\"\n                                                + remotePath + \"'\", e);\n                    }\n                }\n                channel.cd(remotePath);\n            } catch (final SftpException e) {\n                throw new JSchException(\"Could not CD to '\" + remotePath\n                                        + \"' - \" + e.toString(), e);\n            }\n            Directory current = null;\n            try {\n                for (final Iterator i = directoryList.iterator(); i.hasNext();) {\n                    current = (Directory) i.next();\n                    if (getVerbose()) {\n                        log(\"Sending directory \" + current);\n                    }\n                    sendDirectory(channel, current);\n                }\n            } catch (final SftpException e) {\n                String msg = \"Error sending directory\";\n                if (current != null && current.getDirectory() != null) {\n                    msg += \" '\" + current.getDirectory().getName() + \"'\";\n                }\n                throw new JSchException(msg, e);\n            }\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n    }\n","date":"2014-07-04 21:05:12","endLine":193,"groupId":"1537","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"doMultipleTransfer","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/a3/a35fa93f7b97b20ae181e59b4dfb5aba4f69a2.src","preCode":"    private void doMultipleTransfer() throws IOException, JSchException {\n        ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n\n            try {\n                try {\n                    channel.stat(remotePath);\n                } catch (SftpException e) {\n                    if (e.id == ChannelSftp.SSH_FX_NO_SUCH_FILE) {\n                        \r\n                        channel.mkdir(remotePath);\n                    } else {\n                        throw new JSchException(\"failed to access remote dir '\"\n                                                + remotePath + \"'\", e);\n                    }\n                }\n                channel.cd(remotePath);\n            } catch (SftpException e) {\n                throw new JSchException(\"Could not CD to '\" + remotePath\n                                        + \"' - \" + e.toString(), e);\n            }\n            Directory current = null;\n            try {\n                for (Iterator i = directoryList.iterator(); i.hasNext();) {\n                    current = (Directory) i.next();\n                    if (getVerbose()) {\n                        log(\"Sending directory \" + current);\n                    }\n                    sendDirectory(channel, current);\n                }\n            } catch (SftpException e) {\n                String msg = \"Error sending directory\";\n                if (current != null && current.getDirectory() != null) {\n                    msg += \" '\" + current.getDirectory().getName() + \"'\";\n                }\n                throw new JSchException(msg, e);\n            }\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n    }\n","realPath":"src/main/org/apache/tools/ant/taskdefs/optional/ssh/ScpToMessageBySftp.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":150,"status":"M"}],"commitId":"789422e131b6c2c003d94f394169a64297e986c6","commitMessage":"@@@oops - make it compile under Java5 again","date":"2014-07-04 21:05:12","modifiedFileCount":"20","status":"M","submitter":"Jan Mat?rne"},{"authorTime":"2015-05-17 13:41:36","codes":[{"authorDate":"2014-07-04 21:05:12","commitOrder":5,"curCode":"    public void execute() throws IOException, JSchException {\n        final ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n            try {\n                final SftpATTRS attrs = channel.stat(remoteFile);\n                if (attrs.isDir() && !remoteFile.endsWith(\"/\")) {\n                    remoteFile = remoteFile + \"/\";\n                }\n            } catch (final SftpException ee) {\n                \r\n            }\n            getDir(channel, remoteFile, localFile);\n        } catch (final SftpException e) {\n            final JSchException schException = new JSchException(\"Could not get '\"+ remoteFile\n                    +\"' to '\"+localFile+\"' - \"\n                    +e.toString());\n            schException.initCause(e);\n            throw schException;\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n        log(\"done\\n\");\n    }\n","date":"2014-07-04 21:05:12","endLine":131,"groupId":"8182","id":9,"instanceNumber":1,"isCurCommit":0,"methodName":"execute","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/04/f72d235622f6f832b575e41f4a758c2a486808.src","preCode":"    public void execute() throws IOException, JSchException {\n        final ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n            try {\n                final SftpATTRS attrs = channel.stat(remoteFile);\n                if (attrs.isDir() && !remoteFile.endsWith(\"/\")) {\n                    remoteFile = remoteFile + \"/\";\n                }\n            } catch (final SftpException ee) {\n                \r\n            }\n            getDir(channel, remoteFile, localFile);\n        } catch (final SftpException e) {\n            final JSchException schException = new JSchException(\"Could not get '\"+ remoteFile\n                    +\"' to '\"+localFile+\"' - \"\n                    +e.toString());\n            schException.initCause(e);\n            throw schException;\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n        log(\"done\\n\");\n    }\n","realPath":"src/main/org/apache/tools/ant/taskdefs/optional/ssh/ScpFromMessageBySftp.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":106,"status":"N"},{"authorDate":"2015-05-17 13:41:36","commitOrder":5,"curCode":"    private void doMultipleTransfer() throws IOException, JSchException {\n        final ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n\n            try {\n                try {\n                    channel.stat(remotePath);\n                } catch (final SftpException e) {\n                    if (e.id == ChannelSftp.SSH_FX_NO_SUCH_FILE) {\n                        \r\n                        channel.mkdir(remotePath);\n                        channel.chmod(getDirMode(), remotePath);\n                    } else {\n                        throw new JSchException(\"failed to access remote dir '\"\n                                                + remotePath + \"'\", e);\n                    }\n                }\n                channel.cd(remotePath);\n            } catch (final SftpException e) {\n                throw new JSchException(\"Could not CD to '\" + remotePath\n                                        + \"' - \" + e.toString(), e);\n            }\n            Directory current = null;\n            try {\n                for (final Iterator i = directoryList.iterator(); i.hasNext();) {\n                    current = (Directory) i.next();\n                    if (getVerbose()) {\n                        log(\"Sending directory \" + current);\n                    }\n                    sendDirectory(channel, current);\n                }\n            } catch (final SftpException e) {\n                String msg = \"Error sending directory\";\n                if (current != null && current.getDirectory() != null) {\n                    msg += \" '\" + current.getDirectory().getName() + \"'\";\n                }\n                throw new JSchException(msg, e);\n            }\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n    }\n","date":"2015-05-17 13:42:53","endLine":195,"groupId":"1537","id":10,"instanceNumber":2,"isCurCommit":0,"methodName":"doMultipleTransfer","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/2b/32907d7e5151aa4c41da14626b46e7c5a012f9.src","preCode":"    private void doMultipleTransfer() throws IOException, JSchException {\n        final ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n\n            try {\n                try {\n                    channel.stat(remotePath);\n                } catch (final SftpException e) {\n                    if (e.id == ChannelSftp.SSH_FX_NO_SUCH_FILE) {\n                        \r\n                        channel.mkdir(remotePath);\n                    } else {\n                        throw new JSchException(\"failed to access remote dir '\"\n                                                + remotePath + \"'\", e);\n                    }\n                }\n                channel.cd(remotePath);\n            } catch (final SftpException e) {\n                throw new JSchException(\"Could not CD to '\" + remotePath\n                                        + \"' - \" + e.toString(), e);\n            }\n            Directory current = null;\n            try {\n                for (final Iterator i = directoryList.iterator(); i.hasNext();) {\n                    current = (Directory) i.next();\n                    if (getVerbose()) {\n                        log(\"Sending directory \" + current);\n                    }\n                    sendDirectory(channel, current);\n                }\n            } catch (final SftpException e) {\n                String msg = \"Error sending directory\";\n                if (current != null && current.getDirectory() != null) {\n                    msg += \" '\" + current.getDirectory().getName() + \"'\";\n                }\n                throw new JSchException(msg, e);\n            }\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n    }\n","realPath":"src/main/org/apache/tools/ant/taskdefs/optional/ssh/ScpToMessageBySftp.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":151,"status":"M"}],"commitId":"2f0edba2aca306e591a8f156f8af1e7155fd580e","commitMessage":"@@@all permissions to be set when uploading files/dirs\n\nhttps://bz.apache.org/bugzilla/show_bug.cgi?id=43271\n\nApparently the remote umask still comes into play and the result won't\nbe exactly what we intended it to be.\n\nBased on patch by Holly Cummins\n","date":"2015-05-17 13:42:53","modifiedFileCount":"3","status":"M","submitter":"Stefan Bodewig"},{"authorTime":"2017-04-13 23:15:22","codes":[{"authorDate":"2014-07-04 21:05:12","commitOrder":6,"curCode":"    public void execute() throws IOException, JSchException {\n        final ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n            try {\n                final SftpATTRS attrs = channel.stat(remoteFile);\n                if (attrs.isDir() && !remoteFile.endsWith(\"/\")) {\n                    remoteFile = remoteFile + \"/\";\n                }\n            } catch (final SftpException ee) {\n                \r\n            }\n            getDir(channel, remoteFile, localFile);\n        } catch (final SftpException e) {\n            final JSchException schException = new JSchException(\"Could not get '\"+ remoteFile\n                    +\"' to '\"+localFile+\"' - \"\n                    +e.toString());\n            schException.initCause(e);\n            throw schException;\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n        log(\"done\\n\");\n    }\n","date":"2014-07-04 21:05:12","endLine":131,"groupId":"8182","id":11,"instanceNumber":1,"isCurCommit":0,"methodName":"execute","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/04/f72d235622f6f832b575e41f4a758c2a486808.src","preCode":"    public void execute() throws IOException, JSchException {\n        final ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n            try {\n                final SftpATTRS attrs = channel.stat(remoteFile);\n                if (attrs.isDir() && !remoteFile.endsWith(\"/\")) {\n                    remoteFile = remoteFile + \"/\";\n                }\n            } catch (final SftpException ee) {\n                \r\n            }\n            getDir(channel, remoteFile, localFile);\n        } catch (final SftpException e) {\n            final JSchException schException = new JSchException(\"Could not get '\"+ remoteFile\n                    +\"' to '\"+localFile+\"' - \"\n                    +e.toString());\n            schException.initCause(e);\n            throw schException;\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n        log(\"done\\n\");\n    }\n","realPath":"src/main/org/apache/tools/ant/taskdefs/optional/ssh/ScpFromMessageBySftp.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":106,"status":"N"},{"authorDate":"2017-04-13 23:15:22","commitOrder":6,"curCode":"    private void doMultipleTransfer() throws IOException, JSchException {\n        final ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n\n            try {\n                try {\n                    channel.stat(remotePath);\n                } catch (final SftpException e) {\n                    if (e.id == ChannelSftp.SSH_FX_NO_SUCH_FILE) {\n                        \r\n                        channel.mkdir(remotePath);\n                        channel.chmod(getDirMode(), remotePath);\n                    } else {\n                        throw new JSchException(\"failed to access remote dir '\"\n                                                + remotePath + \"'\", e);\n                    }\n                }\n                channel.cd(remotePath);\n            } catch (final SftpException e) {\n                throw new JSchException(\"Could not CD to '\" + remotePath\n                                        + \"' - \" + e.toString(), e);\n            }\n            for (Directory current : directoryList) {\n                try {\n                    if (getVerbose()) {\n                        log(\"Sending directory \" + current);\n                    }\n                    sendDirectory(channel, current);\n                } catch (final SftpException e) {\n                    String msg = \"Error sending directory\";\n                    if (current != null && current.getDirectory() != null) {\n                        msg += \" '\" + current.getDirectory().getName() + \"'\";\n                    }\n                    throw new JSchException(msg, e);\n                }\n            }\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n    }\n","date":"2017-04-13 23:15:22","endLine":193,"groupId":"3767","id":12,"instanceNumber":2,"isCurCommit":0,"methodName":"doMultipleTransfer","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/dc/8f2f15db75671af93152b1299326716d292963.src","preCode":"    private void doMultipleTransfer() throws IOException, JSchException {\n        final ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n\n            try {\n                try {\n                    channel.stat(remotePath);\n                } catch (final SftpException e) {\n                    if (e.id == ChannelSftp.SSH_FX_NO_SUCH_FILE) {\n                        \r\n                        channel.mkdir(remotePath);\n                        channel.chmod(getDirMode(), remotePath);\n                    } else {\n                        throw new JSchException(\"failed to access remote dir '\"\n                                                + remotePath + \"'\", e);\n                    }\n                }\n                channel.cd(remotePath);\n            } catch (final SftpException e) {\n                throw new JSchException(\"Could not CD to '\" + remotePath\n                                        + \"' - \" + e.toString(), e);\n            }\n            Directory current = null;\n            try {\n                for (final Iterator i = directoryList.iterator(); i.hasNext();) {\n                    current = (Directory) i.next();\n                    if (getVerbose()) {\n                        log(\"Sending directory \" + current);\n                    }\n                    sendDirectory(channel, current);\n                }\n            } catch (final SftpException e) {\n                String msg = \"Error sending directory\";\n                if (current != null && current.getDirectory() != null) {\n                    msg += \" '\" + current.getDirectory().getName() + \"'\";\n                }\n                throw new JSchException(msg, e);\n            }\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n    }\n","realPath":"src/main/org/apache/tools/ant/taskdefs/optional/ssh/ScpToMessageBySftp.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":151,"status":"M"}],"commitId":"b7d1e9bde44cb8e5233d6e70bb96e14cbb2f3e2d","commitMessage":"@@@java 5-8\n","date":"2017-04-13 23:15:22","modifiedFileCount":"609","status":"M","submitter":"Matt Benson"},{"authorTime":"2017-04-13 23:15:22","codes":[{"authorDate":"2018-04-01 02:42:51","commitOrder":7,"curCode":"    public void execute() throws IOException, JSchException {\n        final ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n            try {\n                final SftpATTRS attrs = channel.stat(remoteFile);\n                if (attrs.isDir() && !remoteFile.endsWith(\"/\")) {\n                    remoteFile = remoteFile + \"/\";\n                }\n            } catch (final SftpException ee) {\n                \r\n            }\n            getDir(channel, remoteFile, localFile);\n        } catch (final SftpException e) {\n            throw new JSchException(\"Could not get '\" + remoteFile + \"' to '\"\n                + localFile + \"' - \" + e.toString(), e);\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n        log(\"done\\n\");\n    }\n","date":"2018-04-01 02:42:51","endLine":129,"groupId":"8939","id":13,"instanceNumber":1,"isCurCommit":0,"methodName":"execute","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/3c/b120a3687a3c4634365ebb23d001117d72c8dd.src","preCode":"    public void execute() throws IOException, JSchException {\n        final ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n            try {\n                final SftpATTRS attrs = channel.stat(remoteFile);\n                if (attrs.isDir() && !remoteFile.endsWith(\"/\")) {\n                    remoteFile = remoteFile + \"/\";\n                }\n            } catch (final SftpException ee) {\n                \r\n            }\n            getDir(channel, remoteFile, localFile);\n        } catch (final SftpException e) {\n            final JSchException schException =\n                new JSchException(\"Could not get '\" + remoteFile + \"' to '\"\n                    + localFile + \"' - \" + e.toString());\n            schException.initCause(e);\n            throw schException;\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n        log(\"done\\n\");\n    }\n","realPath":"src/main/org/apache/tools/ant/taskdefs/optional/ssh/ScpFromMessageBySftp.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":107,"status":"M"},{"authorDate":"2017-04-13 23:15:22","commitOrder":7,"curCode":"    private void doMultipleTransfer() throws IOException, JSchException {\n        final ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n\n            try {\n                try {\n                    channel.stat(remotePath);\n                } catch (final SftpException e) {\n                    if (e.id == ChannelSftp.SSH_FX_NO_SUCH_FILE) {\n                        \r\n                        channel.mkdir(remotePath);\n                        channel.chmod(getDirMode(), remotePath);\n                    } else {\n                        throw new JSchException(\"failed to access remote dir '\"\n                                                + remotePath + \"'\", e);\n                    }\n                }\n                channel.cd(remotePath);\n            } catch (final SftpException e) {\n                throw new JSchException(\"Could not CD to '\" + remotePath\n                                        + \"' - \" + e.toString(), e);\n            }\n            for (Directory current : directoryList) {\n                try {\n                    if (getVerbose()) {\n                        log(\"Sending directory \" + current);\n                    }\n                    sendDirectory(channel, current);\n                } catch (final SftpException e) {\n                    String msg = \"Error sending directory\";\n                    if (current != null && current.getDirectory() != null) {\n                        msg += \" '\" + current.getDirectory().getName() + \"'\";\n                    }\n                    throw new JSchException(msg, e);\n                }\n            }\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n    }\n","date":"2017-04-13 23:15:22","endLine":193,"groupId":"3767","id":14,"instanceNumber":2,"isCurCommit":0,"methodName":"doMultipleTransfer","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/dc/8f2f15db75671af93152b1299326716d292963.src","preCode":"    private void doMultipleTransfer() throws IOException, JSchException {\n        final ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n\n            try {\n                try {\n                    channel.stat(remotePath);\n                } catch (final SftpException e) {\n                    if (e.id == ChannelSftp.SSH_FX_NO_SUCH_FILE) {\n                        \r\n                        channel.mkdir(remotePath);\n                        channel.chmod(getDirMode(), remotePath);\n                    } else {\n                        throw new JSchException(\"failed to access remote dir '\"\n                                                + remotePath + \"'\", e);\n                    }\n                }\n                channel.cd(remotePath);\n            } catch (final SftpException e) {\n                throw new JSchException(\"Could not CD to '\" + remotePath\n                                        + \"' - \" + e.toString(), e);\n            }\n            for (Directory current : directoryList) {\n                try {\n                    if (getVerbose()) {\n                        log(\"Sending directory \" + current);\n                    }\n                    sendDirectory(channel, current);\n                } catch (final SftpException e) {\n                    String msg = \"Error sending directory\";\n                    if (current != null && current.getDirectory() != null) {\n                        msg += \" '\" + current.getDirectory().getName() + \"'\";\n                    }\n                    throw new JSchException(msg, e);\n                }\n            }\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n    }\n","realPath":"src/main/org/apache/tools/ant/taskdefs/optional/ssh/ScpToMessageBySftp.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":151,"status":"N"}],"commitId":"b4243b93002ec9bb7060ccd2dab58a0000e1e511","commitMessage":"@@@Shorten fully qualified names and other small fixes","date":"2018-04-01 02:42:51","modifiedFileCount":"35","status":"M","submitter":"Gintas Grigelionis"},{"authorTime":"2017-04-13 23:15:22","codes":[{"authorDate":"2018-04-06 14:32:31","commitOrder":8,"curCode":"    public void execute() throws IOException, JSchException {\n        final ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n            try {\n                final SftpATTRS attrs = channel.stat(remoteFile);\n                if (attrs.isDir() && !remoteFile.endsWith(\"/\")) {\n                    remoteFile += \"/\";\n                }\n            } catch (final SftpException ee) {\n                \r\n            }\n            getDir(channel, remoteFile, localFile);\n        } catch (final SftpException e) {\n            throw new JSchException(\"Could not get '\" + remoteFile + \"' to '\"\n                + localFile + \"' - \" + e.toString(), e);\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n        log(\"done\\n\");\n    }\n","date":"2018-04-06 14:48:19","endLine":131,"groupId":"10440","id":15,"instanceNumber":1,"isCurCommit":0,"methodName":"execute","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/8c/1ccf925ce96d7b7b80c8c4f9caaf1b29353e91.src","preCode":"    public void execute() throws IOException, JSchException {\n        final ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n            try {\n                final SftpATTRS attrs = channel.stat(remoteFile);\n                if (attrs.isDir() && !remoteFile.endsWith(\"/\")) {\n                    remoteFile = remoteFile + \"/\";\n                }\n            } catch (final SftpException ee) {\n                \r\n            }\n            getDir(channel, remoteFile, localFile);\n        } catch (final SftpException e) {\n            throw new JSchException(\"Could not get '\" + remoteFile + \"' to '\"\n                + localFile + \"' - \" + e.toString(), e);\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n        log(\"done\\n\");\n    }\n","realPath":"src/main/org/apache/tools/ant/taskdefs/optional/ssh/ScpFromMessageBySftp.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":109,"status":"M"},{"authorDate":"2017-04-13 23:15:22","commitOrder":8,"curCode":"    private void doMultipleTransfer() throws IOException, JSchException {\n        final ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n\n            try {\n                try {\n                    channel.stat(remotePath);\n                } catch (final SftpException e) {\n                    if (e.id == ChannelSftp.SSH_FX_NO_SUCH_FILE) {\n                        \r\n                        channel.mkdir(remotePath);\n                        channel.chmod(getDirMode(), remotePath);\n                    } else {\n                        throw new JSchException(\"failed to access remote dir '\"\n                                                + remotePath + \"'\", e);\n                    }\n                }\n                channel.cd(remotePath);\n            } catch (final SftpException e) {\n                throw new JSchException(\"Could not CD to '\" + remotePath\n                                        + \"' - \" + e.toString(), e);\n            }\n            for (Directory current : directoryList) {\n                try {\n                    if (getVerbose()) {\n                        log(\"Sending directory \" + current);\n                    }\n                    sendDirectory(channel, current);\n                } catch (final SftpException e) {\n                    String msg = \"Error sending directory\";\n                    if (current != null && current.getDirectory() != null) {\n                        msg += \" '\" + current.getDirectory().getName() + \"'\";\n                    }\n                    throw new JSchException(msg, e);\n                }\n            }\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n    }\n","date":"2017-04-13 23:15:22","endLine":193,"groupId":"10440","id":16,"instanceNumber":2,"isCurCommit":0,"methodName":"doMultipleTransfer","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-ant-10-0.7/blobInfo/CC_OUT/blobs/dc/8f2f15db75671af93152b1299326716d292963.src","preCode":"    private void doMultipleTransfer() throws IOException, JSchException {\n        final ChannelSftp channel = openSftpChannel();\n        try {\n            channel.connect();\n\n            try {\n                try {\n                    channel.stat(remotePath);\n                } catch (final SftpException e) {\n                    if (e.id == ChannelSftp.SSH_FX_NO_SUCH_FILE) {\n                        \r\n                        channel.mkdir(remotePath);\n                        channel.chmod(getDirMode(), remotePath);\n                    } else {\n                        throw new JSchException(\"failed to access remote dir '\"\n                                                + remotePath + \"'\", e);\n                    }\n                }\n                channel.cd(remotePath);\n            } catch (final SftpException e) {\n                throw new JSchException(\"Could not CD to '\" + remotePath\n                                        + \"' - \" + e.toString(), e);\n            }\n            for (Directory current : directoryList) {\n                try {\n                    if (getVerbose()) {\n                        log(\"Sending directory \" + current);\n                    }\n                    sendDirectory(channel, current);\n                } catch (final SftpException e) {\n                    String msg = \"Error sending directory\";\n                    if (current != null && current.getDirectory() != null) {\n                        msg += \" '\" + current.getDirectory().getName() + \"'\";\n                    }\n                    throw new JSchException(msg, e);\n                }\n            }\n        } finally {\n            if (channel != null) {\n                channel.disconnect();\n            }\n        }\n    }\n","realPath":"src/main/org/apache/tools/ant/taskdefs/optional/ssh/ScpToMessageBySftp.java","repoName":"ant","snippetEndLine":0,"snippetStartLine":0,"startLine":151,"status":"N"}],"commitId":"4b14d85f11b9a7728dcd2d9420551fd28bf8f45e","commitMessage":"@@@Avoid repetition","date":"2018-04-06 14:48:19","modifiedFileCount":"28","status":"M","submitter":"Gintas Grigelionis"}]
