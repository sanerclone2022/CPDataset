[{"authorTime":"2016-05-23 14:35:53","codes":[{"authorDate":"2018-01-23 20:35:14","commitOrder":2,"curCode":"  public static void setupCluster() throws Exception {\n    configureCluster(1).configure();\n    CollectionAdminRequest.createCollection(COLLECTION, 2, 1) \r\n        .setMaxShardsPerNode(2)\n        .process(cluster.getSolrClient());\n    cluster.getSolrClient().waitForState(COLLECTION, DEFAULT_TIMEOUT, TimeUnit.SECONDS,\n        (n, c) -> DocCollection.isFullyActive(n, c, 2, 1));\n  }\n","date":"2018-01-23 20:35:14","endLine":49,"groupId":"52650","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"setupCluster","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/84/5678708bb20ee5fabce17ae9bcc22ef8252dc3.src","preCode":"  public static void setupCluster() throws Exception {\n    configureCluster(1).configure();\n    CollectionAdminRequest.createCollection(COLLECTION, 2, 1) \r\n        .setMaxShardsPerNode(2)\n        .process(cluster.getSolrClient());\n    cluster.getSolrClient().waitForState(COLLECTION, DEFAULT_TIMEOUT, TimeUnit.SECONDS,\n        (n, c) -> DocCollection.isFullyActive(n, c, 2, 1));\n  }\n","realPath":"solr/core/src/test/org/apache/solr/schema/SchemaApiFailureTest.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":42,"status":"B"},{"authorDate":"2016-05-23 14:35:53","commitOrder":2,"curCode":"  public static void setupCluster() throws Exception {\n    configureCluster(2)\n        .addConfig(\"conf\", TEST_PATH().resolve(\"configsets\").resolve(\"doc-expiry\").resolve(\"conf\"))\n        .configure();\n\n    CollectionAdminRequest.createCollection(COLLECTION, \"conf\", 2, 1)\n        .processAndWait(cluster.getSolrClient(), DEFAULT_TIMEOUT);\n    cluster.getSolrClient().waitForState(COLLECTION, DEFAULT_TIMEOUT, TimeUnit.SECONDS,\n        (n, c) -> DocCollection.isFullyActive(n, c, 2, 1));\n  }\n","date":"2016-05-23 14:35:53","endLine":64,"groupId":"45951","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"setupCluster","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/31/f8418ba4129e09ac86724b2e2f34951f0b9971.src","preCode":"  public static void setupCluster() throws Exception {\n    configureCluster(2)\n        .addConfig(\"conf\", TEST_PATH().resolve(\"configsets\").resolve(\"doc-expiry\").resolve(\"conf\"))\n        .configure();\n\n    CollectionAdminRequest.createCollection(COLLECTION, \"conf\", 2, 1)\n        .processAndWait(cluster.getSolrClient(), DEFAULT_TIMEOUT);\n    cluster.getSolrClient().waitForState(COLLECTION, DEFAULT_TIMEOUT, TimeUnit.SECONDS,\n        (n, c) -> DocCollection.isFullyActive(n, c, 2, 1));\n  }\n","realPath":"solr/core/src/test/org/apache/solr/cloud/DistribDocExpirationUpdateProcessorTest.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":55,"status":"NB"}],"commitId":"653935bbdfd70fa9490f8c363ffcf9832d3141a5","commitMessage":"@@@Merge branch 'master' of https://git-wip-us.apache.org/repos/asf/lucene-solr\n","date":"2018-01-23 20:35:14","modifiedFileCount":"279","status":"M","submitter":"Karl Wright"},{"authorTime":"2020-01-23 00:32:25","codes":[{"authorDate":"2018-01-23 20:35:14","commitOrder":3,"curCode":"  public static void setupCluster() throws Exception {\n    configureCluster(1).configure();\n    CollectionAdminRequest.createCollection(COLLECTION, 2, 1) \r\n        .setMaxShardsPerNode(2)\n        .process(cluster.getSolrClient());\n    cluster.getSolrClient().waitForState(COLLECTION, DEFAULT_TIMEOUT, TimeUnit.SECONDS,\n        (n, c) -> DocCollection.isFullyActive(n, c, 2, 1));\n  }\n","date":"2018-01-23 20:35:14","endLine":49,"groupId":"52650","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"setupCluster","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/84/5678708bb20ee5fabce17ae9bcc22ef8252dc3.src","preCode":"  public static void setupCluster() throws Exception {\n    configureCluster(1).configure();\n    CollectionAdminRequest.createCollection(COLLECTION, 2, 1) \r\n        .setMaxShardsPerNode(2)\n        .process(cluster.getSolrClient());\n    cluster.getSolrClient().waitForState(COLLECTION, DEFAULT_TIMEOUT, TimeUnit.SECONDS,\n        (n, c) -> DocCollection.isFullyActive(n, c, 2, 1));\n  }\n","realPath":"solr/core/src/test/org/apache/solr/schema/SchemaApiFailureTest.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":42,"status":"N"},{"authorDate":"2020-01-23 00:32:25","commitOrder":3,"curCode":"  public void setupCluster(boolean security) throws Exception {\n    \r\n    final Builder b = configureCluster(4)\n      .addConfig(\"conf\", TEST_PATH().resolve(\"configsets\").resolve(\"doc-expiry\").resolve(\"conf\"));\n\n    COLLECTION = \"expiring\";\n    if (security) {\n      USER = \"solr\";\n      PASS = \"SolrRocksAgain\";\n      COLLECTION += \"_secure\";\n      \n      final String SECURITY_JSON = Utils.toJSONString\n        (Utils.makeMap(\"authorization\",\n                       Utils.makeMap(\"class\", RuleBasedAuthorizationPlugin.class.getName(),\n                                     \"user-role\", singletonMap(USER,\"admin\"),\n                                     \"permissions\", singletonList(Utils.makeMap(\"name\",\"all\",\n                                                                                \"role\",\"admin\"))),\n                       \"authentication\",\n                       Utils.makeMap(\"class\", BasicAuthPlugin.class.getName(),\n                                     \"blockUnknown\",true,\n                                     \"credentials\", singletonMap(USER, getSaltedHashedValue(PASS)))));\n      b.withSecurityJson(SECURITY_JSON);\n    }\n    b.configure();\n\n    setAuthIfNeeded(CollectionAdminRequest.createCollection(COLLECTION, \"conf\", 2, 2))\n      .process(cluster.getSolrClient());\n\n    cluster.getSolrClient().waitForState(COLLECTION, DEFAULT_TIMEOUT, TimeUnit.SECONDS,\n        (n, c) -> DocCollection.isFullyActive(n, c, 2, 2));\n  }\n","date":"2020-01-23 00:32:25","endLine":119,"groupId":"9703","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"setupCluster","params":"(booleansecurity)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/d9/9a4069e21089eef3ccd85dd430a8c41bddec67.src","preCode":"  public static void setupCluster() throws Exception {\n    configureCluster(2)\n        .addConfig(\"conf\", TEST_PATH().resolve(\"configsets\").resolve(\"doc-expiry\").resolve(\"conf\"))\n        .configure();\n\n    CollectionAdminRequest.createCollection(COLLECTION, \"conf\", 2, 1)\n        .processAndWait(cluster.getSolrClient(), DEFAULT_TIMEOUT);\n    cluster.getSolrClient().waitForState(COLLECTION, DEFAULT_TIMEOUT, TimeUnit.SECONDS,\n        (n, c) -> DocCollection.isFullyActive(n, c, 2, 1));\n  }\n","realPath":"solr/core/src/test/org/apache/solr/cloud/DistribDocExpirationUpdateProcessorTest.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":89,"status":"M"}],"commitId":"95dfddc7d4eaaa5997ccd69797dbe1fd966f32ac","commitMessage":"@@@SOLR-12859: Fixed DocExpirationUpdateProcessorFactory to work with BasicAuth and other auth plugins that delegate to PKI for server initiated node-to-node communication.\n","date":"2020-01-23 00:32:25","modifiedFileCount":"4","status":"M","submitter":"Chris Hostetter"},{"authorTime":"2020-01-23 00:32:25","codes":[{"authorDate":"2020-07-08 23:57:24","commitOrder":4,"curCode":"  public static void setupCluster() throws Exception {\n    configureCluster(1).configure();\n    CollectionAdminRequest.createCollection(COLLECTION, 2, 1) \r\n        .process(cluster.getSolrClient());\n    cluster.getSolrClient().waitForState(COLLECTION, DEFAULT_TIMEOUT, TimeUnit.SECONDS,\n        (n, c) -> DocCollection.isFullyActive(n, c, 2, 1));\n  }\n","date":"2020-07-08 23:57:24","endLine":44,"groupId":"52650","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"setupCluster","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/b4/c21296560d57bd4c41fec97cbbb9b4a1f8c305.src","preCode":"  public static void setupCluster() throws Exception {\n    configureCluster(1).configure();\n    CollectionAdminRequest.createCollection(COLLECTION, 2, 1) \r\n        .setMaxShardsPerNode(2)\n        .process(cluster.getSolrClient());\n    cluster.getSolrClient().waitForState(COLLECTION, DEFAULT_TIMEOUT, TimeUnit.SECONDS,\n        (n, c) -> DocCollection.isFullyActive(n, c, 2, 1));\n  }\n","realPath":"solr/core/src/test/org/apache/solr/schema/SchemaApiFailureTest.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":38,"status":"M"},{"authorDate":"2020-01-23 00:32:25","commitOrder":4,"curCode":"  public void setupCluster(boolean security) throws Exception {\n    \r\n    final Builder b = configureCluster(4)\n      .addConfig(\"conf\", TEST_PATH().resolve(\"configsets\").resolve(\"doc-expiry\").resolve(\"conf\"));\n\n    COLLECTION = \"expiring\";\n    if (security) {\n      USER = \"solr\";\n      PASS = \"SolrRocksAgain\";\n      COLLECTION += \"_secure\";\n      \n      final String SECURITY_JSON = Utils.toJSONString\n        (Utils.makeMap(\"authorization\",\n                       Utils.makeMap(\"class\", RuleBasedAuthorizationPlugin.class.getName(),\n                                     \"user-role\", singletonMap(USER,\"admin\"),\n                                     \"permissions\", singletonList(Utils.makeMap(\"name\",\"all\",\n                                                                                \"role\",\"admin\"))),\n                       \"authentication\",\n                       Utils.makeMap(\"class\", BasicAuthPlugin.class.getName(),\n                                     \"blockUnknown\",true,\n                                     \"credentials\", singletonMap(USER, getSaltedHashedValue(PASS)))));\n      b.withSecurityJson(SECURITY_JSON);\n    }\n    b.configure();\n\n    setAuthIfNeeded(CollectionAdminRequest.createCollection(COLLECTION, \"conf\", 2, 2))\n      .process(cluster.getSolrClient());\n\n    cluster.getSolrClient().waitForState(COLLECTION, DEFAULT_TIMEOUT, TimeUnit.SECONDS,\n        (n, c) -> DocCollection.isFullyActive(n, c, 2, 2));\n  }\n","date":"2020-01-23 00:32:25","endLine":119,"groupId":"9703","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"setupCluster","params":"(booleansecurity)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/d9/9a4069e21089eef3ccd85dd430a8c41bddec67.src","preCode":"  public void setupCluster(boolean security) throws Exception {\n    \r\n    final Builder b = configureCluster(4)\n      .addConfig(\"conf\", TEST_PATH().resolve(\"configsets\").resolve(\"doc-expiry\").resolve(\"conf\"));\n\n    COLLECTION = \"expiring\";\n    if (security) {\n      USER = \"solr\";\n      PASS = \"SolrRocksAgain\";\n      COLLECTION += \"_secure\";\n      \n      final String SECURITY_JSON = Utils.toJSONString\n        (Utils.makeMap(\"authorization\",\n                       Utils.makeMap(\"class\", RuleBasedAuthorizationPlugin.class.getName(),\n                                     \"user-role\", singletonMap(USER,\"admin\"),\n                                     \"permissions\", singletonList(Utils.makeMap(\"name\",\"all\",\n                                                                                \"role\",\"admin\"))),\n                       \"authentication\",\n                       Utils.makeMap(\"class\", BasicAuthPlugin.class.getName(),\n                                     \"blockUnknown\",true,\n                                     \"credentials\", singletonMap(USER, getSaltedHashedValue(PASS)))));\n      b.withSecurityJson(SECURITY_JSON);\n    }\n    b.configure();\n\n    setAuthIfNeeded(CollectionAdminRequest.createCollection(COLLECTION, \"conf\", 2, 2))\n      .process(cluster.getSolrClient());\n\n    cluster.getSolrClient().waitForState(COLLECTION, DEFAULT_TIMEOUT, TimeUnit.SECONDS,\n        (n, c) -> DocCollection.isFullyActive(n, c, 2, 2));\n  }\n","realPath":"solr/core/src/test/org/apache/solr/cloud/DistribDocExpirationUpdateProcessorTest.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":89,"status":"N"}],"commitId":"cf742f45963f4747e7041e8131248bc3a2b44864","commitMessage":"@@@SOLR-12847: Remove support for maxShardsPerNode.\n","date":"2020-07-08 23:57:24","modifiedFileCount":"144","status":"M","submitter":"Andrzej Bialecki"},{"authorTime":"2021-06-03 06:17:26","codes":[{"authorDate":"2020-07-08 23:57:24","commitOrder":5,"curCode":"  public static void setupCluster() throws Exception {\n    configureCluster(1).configure();\n    CollectionAdminRequest.createCollection(COLLECTION, 2, 1) \r\n        .process(cluster.getSolrClient());\n    cluster.getSolrClient().waitForState(COLLECTION, DEFAULT_TIMEOUT, TimeUnit.SECONDS,\n        (n, c) -> DocCollection.isFullyActive(n, c, 2, 1));\n  }\n","date":"2020-07-08 23:57:24","endLine":44,"groupId":"52650","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"setupCluster","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/b4/c21296560d57bd4c41fec97cbbb9b4a1f8c305.src","preCode":"  public static void setupCluster() throws Exception {\n    configureCluster(1).configure();\n    CollectionAdminRequest.createCollection(COLLECTION, 2, 1) \r\n        .process(cluster.getSolrClient());\n    cluster.getSolrClient().waitForState(COLLECTION, DEFAULT_TIMEOUT, TimeUnit.SECONDS,\n        (n, c) -> DocCollection.isFullyActive(n, c, 2, 1));\n  }\n","realPath":"solr/core/src/test/org/apache/solr/schema/SchemaApiFailureTest.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":38,"status":"N"},{"authorDate":"2021-06-03 06:17:26","commitOrder":5,"curCode":"  public void setupCluster(boolean security) throws Exception {\n    \r\n    final Builder b = configureCluster(4)\n      .addConfig(\"conf\", TEST_PATH().resolve(\"configsets\").resolve(\"doc-expiry\").resolve(\"conf\"));\n\n    COLLECTION = \"expiring\";\n    if (security) {\n      USER = \"solr\";\n      PASS = \"SolrRocksAgain\";\n      COLLECTION += \"_secure\";\n      \n      final String SECURITY_JSON = Utils.toJSONString\n        (Map.of(\"authorization\",\n                       Map.of(\"class\", RuleBasedAuthorizationPlugin.class.getName(),\n                                     \"user-role\", Map.of(USER,\"admin\"),\n                                     \"permissions\", singletonList(Map.of(\"name\",\"all\",\n                                                                                \"role\",\"admin\"))),\n                       \"authentication\",\n                       Map.of(\"class\", BasicAuthPlugin.class.getName(),\n                                     \"blockUnknown\",true,\n                                     \"credentials\", Map.of(USER, getSaltedHashedValue(PASS)))));\n      b.withSecurityJson(SECURITY_JSON);\n    }\n    b.configure();\n\n    setAuthIfNeeded(CollectionAdminRequest.createCollection(COLLECTION, \"conf\", 2, 2))\n      .process(cluster.getSolrClient());\n\n    cluster.getSolrClient().waitForState(COLLECTION, DEFAULT_TIMEOUT, TimeUnit.SECONDS,\n        (n, c) -> DocCollection.isFullyActive(n, c, 2, 2));\n  }\n","date":"2021-06-03 06:17:26","endLine":119,"groupId":"52650","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"setupCluster","params":"(booleansecurity)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/d1/1546a49b59f4e56cf959285e3a0df0683223aa.src","preCode":"  public void setupCluster(boolean security) throws Exception {\n    \r\n    final Builder b = configureCluster(4)\n      .addConfig(\"conf\", TEST_PATH().resolve(\"configsets\").resolve(\"doc-expiry\").resolve(\"conf\"));\n\n    COLLECTION = \"expiring\";\n    if (security) {\n      USER = \"solr\";\n      PASS = \"SolrRocksAgain\";\n      COLLECTION += \"_secure\";\n      \n      final String SECURITY_JSON = Utils.toJSONString\n        (Utils.makeMap(\"authorization\",\n                       Utils.makeMap(\"class\", RuleBasedAuthorizationPlugin.class.getName(),\n                                     \"user-role\", singletonMap(USER,\"admin\"),\n                                     \"permissions\", singletonList(Utils.makeMap(\"name\",\"all\",\n                                                                                \"role\",\"admin\"))),\n                       \"authentication\",\n                       Utils.makeMap(\"class\", BasicAuthPlugin.class.getName(),\n                                     \"blockUnknown\",true,\n                                     \"credentials\", singletonMap(USER, getSaltedHashedValue(PASS)))));\n      b.withSecurityJson(SECURITY_JSON);\n    }\n    b.configure();\n\n    setAuthIfNeeded(CollectionAdminRequest.createCollection(COLLECTION, \"conf\", 2, 2))\n      .process(cluster.getSolrClient());\n\n    cluster.getSolrClient().waitForState(COLLECTION, DEFAULT_TIMEOUT, TimeUnit.SECONDS,\n        (n, c) -> DocCollection.isFullyActive(n, c, 2, 2));\n  }\n","realPath":"solr/core/src/test/org/apache/solr/cloud/DistribDocExpirationUpdateProcessorTest.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":89,"status":"M"}],"commitId":"c8e06a7298a2745c2b83102169073e2f8e8eceb5","commitMessage":"@@@SOLR-15385 Address many rawtypes warnings (#107)\n\nAddressed significant usage of raw types with Class.  Map.  and SolrRequest; removed over 400 SuppressWarning annotations.\n\nMap construction was replaced with Map.of when immutability was possible.  and Utils.makeMap when a mutable map was required.\n\nDiscovered a potential bug in the PackageStore tests where not all assertions were being verified - these tests will be fixed separately.\n\nCo-authored-by: David Smiley <dsmiley@salesforce.com>","date":"2021-06-03 06:17:26","modifiedFileCount":"244","status":"M","submitter":"Mike Drob"},{"authorTime":"2021-08-10 09:28:22","codes":[{"authorDate":"2020-07-08 23:57:24","commitOrder":6,"curCode":"  public static void setupCluster() throws Exception {\n    configureCluster(1).configure();\n    CollectionAdminRequest.createCollection(COLLECTION, 2, 1) \r\n        .process(cluster.getSolrClient());\n    cluster.getSolrClient().waitForState(COLLECTION, DEFAULT_TIMEOUT, TimeUnit.SECONDS,\n        (n, c) -> DocCollection.isFullyActive(n, c, 2, 1));\n  }\n","date":"2020-07-08 23:57:24","endLine":44,"groupId":"102719","id":9,"instanceNumber":1,"isCurCommit":0,"methodName":"setupCluster","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/b4/c21296560d57bd4c41fec97cbbb9b4a1f8c305.src","preCode":"  public static void setupCluster() throws Exception {\n    configureCluster(1).configure();\n    CollectionAdminRequest.createCollection(COLLECTION, 2, 1) \r\n        .process(cluster.getSolrClient());\n    cluster.getSolrClient().waitForState(COLLECTION, DEFAULT_TIMEOUT, TimeUnit.SECONDS,\n        (n, c) -> DocCollection.isFullyActive(n, c, 2, 1));\n  }\n","realPath":"solr/core/src/test/org/apache/solr/schema/SchemaApiFailureTest.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":38,"status":"N"},{"authorDate":"2021-08-10 09:28:22","commitOrder":6,"curCode":"  public void setupCluster(boolean security) throws Exception {\n    \r\n    final MiniSolrCloudCluster.Builder b = configureCluster(4)\n      .addConfig(\"conf\", TEST_PATH().resolve(\"configsets\").resolve(\"doc-expiry\").resolve(\"conf\"));\n\n    COLLECTION = \"expiring\";\n    if (security) {\n      USER = \"solr\";\n      PASS = \"SolrRocksAgain\";\n      COLLECTION += \"_secure\";\n      \n      final String SECURITY_JSON = Utils.toJSONString\n        (Map.of(\"authorization\",\n                       Map.of(\"class\", RuleBasedAuthorizationPlugin.class.getName(),\n                                     \"user-role\", Map.of(USER,\"admin\"),\n                                     \"permissions\", singletonList(Map.of(\"name\",\"all\",\n                                                                                \"role\",\"admin\"))),\n                       \"authentication\",\n                       Map.of(\"class\", BasicAuthPlugin.class.getName(),\n                                     \"blockUnknown\",true,\n                                     \"credentials\", Map.of(USER, getSaltedHashedValue(PASS)))));\n      b.withSecurityJson(SECURITY_JSON);\n    }\n    b.configure();\n\n    setAuthIfNeeded(CollectionAdminRequest.createCollection(COLLECTION, \"conf\", 2, 2))\n      .process(cluster.getSolrClient());\n\n    cluster.getSolrClient().waitForState(COLLECTION, DEFAULT_TIMEOUT, TimeUnit.SECONDS,\n        (n, c) -> DocCollection.isFullyActive(n, c, 2, 2));\n  }\n","date":"2021-08-10 09:28:22","endLine":118,"groupId":"102719","id":10,"instanceNumber":2,"isCurCommit":1,"methodName":"setupCluster","params":"(booleansecurity)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/da/d34efdd2d097e25cbbbfbbc43427d63a0a81bc.src","preCode":"  public void setupCluster(boolean security) throws Exception {\n    \r\n    final Builder b = configureCluster(4)\n      .addConfig(\"conf\", TEST_PATH().resolve(\"configsets\").resolve(\"doc-expiry\").resolve(\"conf\"));\n\n    COLLECTION = \"expiring\";\n    if (security) {\n      USER = \"solr\";\n      PASS = \"SolrRocksAgain\";\n      COLLECTION += \"_secure\";\n      \n      final String SECURITY_JSON = Utils.toJSONString\n        (Map.of(\"authorization\",\n                       Map.of(\"class\", RuleBasedAuthorizationPlugin.class.getName(),\n                                     \"user-role\", Map.of(USER,\"admin\"),\n                                     \"permissions\", singletonList(Map.of(\"name\",\"all\",\n                                                                                \"role\",\"admin\"))),\n                       \"authentication\",\n                       Map.of(\"class\", BasicAuthPlugin.class.getName(),\n                                     \"blockUnknown\",true,\n                                     \"credentials\", Map.of(USER, getSaltedHashedValue(PASS)))));\n      b.withSecurityJson(SECURITY_JSON);\n    }\n    b.configure();\n\n    setAuthIfNeeded(CollectionAdminRequest.createCollection(COLLECTION, \"conf\", 2, 2))\n      .process(cluster.getSolrClient());\n\n    cluster.getSolrClient().waitForState(COLLECTION, DEFAULT_TIMEOUT, TimeUnit.SECONDS,\n        (n, c) -> DocCollection.isFullyActive(n, c, 2, 2));\n  }\n","realPath":"solr/core/src/test/org/apache/solr/cloud/DistribDocExpirationUpdateProcessorTest.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":88,"status":"M"}],"commitId":"890ef78421f8c0645ae9f4f53ebca1177e8141d9","commitMessage":"@@@SOLR-15428: Integrate the OpenJDK JMH micro benchmark framework for micro benchmarks and performance comparisons & investigation. (#214)\n\n","date":"2021-08-10 09:28:22","modifiedFileCount":"13","status":"M","submitter":"Mark Robert Miller"}]
