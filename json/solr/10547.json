[{"authorTime":"2018-12-17 00:58:20","codes":[{"authorDate":"2018-12-17 00:58:20","commitOrder":1,"curCode":"  public void testQuery() throws Exception {\n    DebugServlet.clear();\n    try (Http2SolrClient client = getHttp2SolrClient(jetty.getBaseUrl().toString() + \"/debug/foo\")) {\n      SolrQuery q = new SolrQuery(\"foo\");\n      q.setParam(\"a\", \"\\u1234\");\n      try {\n        client.query(q, SolrRequest.METHOD.GET);\n      } catch (ParseException ignored) {}\n\n      \r\n      assertEquals(\"get\", DebugServlet.lastMethod);\n      \r\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      \r\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      \r\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      \r\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      \r\n      assertEquals(null, DebugServlet.headers.get(\"content-type\"));\n      \r\n      assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n      assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n\n      \r\n      DebugServlet.clear();\n      try {\n        client.query(q, SolrRequest.METHOD.POST);\n      } catch (ParseException ignored) {}\n\n      assertEquals(\"post\", DebugServlet.lastMethod);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n      assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(\"application/x-www-form-urlencoded\", DebugServlet.headers.get(\"content-type\"));\n\n      \r\n      DebugServlet.clear();\n      try {\n        client.query(q, SolrRequest.METHOD.PUT);\n      } catch (ParseException ignored) {}\n\n      assertEquals(\"put\", DebugServlet.lastMethod);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n      assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(\"application/x-www-form-urlencoded\", DebugServlet.headers.get(\"content-type\"));\n\n      \r\n      client.setParser(new XMLResponseParser());\n      DebugServlet.clear();\n      try {\n        client.query(q, SolrRequest.METHOD.GET);\n      } catch (ParseException ignored) {}\n\n      assertEquals(\"get\", DebugServlet.lastMethod);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n      assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n\n      \r\n      client.setParser(new XMLResponseParser());\n      DebugServlet.clear();\n      try {\n        client.query(q, SolrRequest.METHOD.POST);\n      } catch (ParseException ignored) {}\n\n      assertEquals(\"post\", DebugServlet.lastMethod);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n      assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(\"application/x-www-form-urlencoded\", DebugServlet.headers.get(\"content-type\"));\n\n      client.setParser(new XMLResponseParser());\n      DebugServlet.clear();\n      try {\n        client.query(q, SolrRequest.METHOD.PUT);\n      } catch (ParseException ignored) {}\n\n      assertEquals(\"put\", DebugServlet.lastMethod);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n      assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(\"application/x-www-form-urlencoded\", DebugServlet.headers.get(\"content-type\"));\n    }\n\n  }\n","date":"2018-12-17 00:58:20","endLine":325,"groupId":"14552","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testQuery","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/ad/7838bb44f8d224796bc73ea4222192d170cc09.src","preCode":"  public void testQuery() throws Exception {\n    DebugServlet.clear();\n    try (Http2SolrClient client = getHttp2SolrClient(jetty.getBaseUrl().toString() + \"/debug/foo\")) {\n      SolrQuery q = new SolrQuery(\"foo\");\n      q.setParam(\"a\", \"\\u1234\");\n      try {\n        client.query(q, SolrRequest.METHOD.GET);\n      } catch (ParseException ignored) {}\n\n      \r\n      assertEquals(\"get\", DebugServlet.lastMethod);\n      \r\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      \r\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      \r\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      \r\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      \r\n      assertEquals(null, DebugServlet.headers.get(\"content-type\"));\n      \r\n      assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n      assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n\n      \r\n      DebugServlet.clear();\n      try {\n        client.query(q, SolrRequest.METHOD.POST);\n      } catch (ParseException ignored) {}\n\n      assertEquals(\"post\", DebugServlet.lastMethod);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n      assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(\"application/x-www-form-urlencoded\", DebugServlet.headers.get(\"content-type\"));\n\n      \r\n      DebugServlet.clear();\n      try {\n        client.query(q, SolrRequest.METHOD.PUT);\n      } catch (ParseException ignored) {}\n\n      assertEquals(\"put\", DebugServlet.lastMethod);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n      assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(\"application/x-www-form-urlencoded\", DebugServlet.headers.get(\"content-type\"));\n\n      \r\n      client.setParser(new XMLResponseParser());\n      DebugServlet.clear();\n      try {\n        client.query(q, SolrRequest.METHOD.GET);\n      } catch (ParseException ignored) {}\n\n      assertEquals(\"get\", DebugServlet.lastMethod);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n      assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n\n      \r\n      client.setParser(new XMLResponseParser());\n      DebugServlet.clear();\n      try {\n        client.query(q, SolrRequest.METHOD.POST);\n      } catch (ParseException ignored) {}\n\n      assertEquals(\"post\", DebugServlet.lastMethod);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n      assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(\"application/x-www-form-urlencoded\", DebugServlet.headers.get(\"content-type\"));\n\n      client.setParser(new XMLResponseParser());\n      DebugServlet.clear();\n      try {\n        client.query(q, SolrRequest.METHOD.PUT);\n      } catch (ParseException ignored) {}\n\n      assertEquals(\"put\", DebugServlet.lastMethod);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n      assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(\"application/x-www-form-urlencoded\", DebugServlet.headers.get(\"content-type\"));\n    }\n\n  }\n","realPath":"solr/solrj/src/test/org/apache/solr/client/solrj/impl/Http2SolrClientTest.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":211,"status":"B"},{"authorDate":"2018-12-17 00:58:20","commitOrder":1,"curCode":"  public void testDelete() throws Exception {\n    DebugServlet.clear();\n    try (Http2SolrClient client = getHttp2SolrClient(jetty.getBaseUrl().toString() + \"/debug/foo\")) {\n      try {\n        client.deleteById(\"id\");\n      } catch (ParseException ignored) {}\n\n      \r\n      assertEquals(\"post\", DebugServlet.lastMethod);\n      \r\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      \r\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      \r\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      \r\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n\n      \r\n      client.setParser(new XMLResponseParser());\n      try {\n        client.deleteByQuery(\"*:*\");\n      } catch (ParseException ignored) {}\n\n      assertEquals(\"post\", DebugServlet.lastMethod);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n    }\n\n  }\n","date":"2018-12-17 00:58:20","endLine":363,"groupId":"3131","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testDelete","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/ad/7838bb44f8d224796bc73ea4222192d170cc09.src","preCode":"  public void testDelete() throws Exception {\n    DebugServlet.clear();\n    try (Http2SolrClient client = getHttp2SolrClient(jetty.getBaseUrl().toString() + \"/debug/foo\")) {\n      try {\n        client.deleteById(\"id\");\n      } catch (ParseException ignored) {}\n\n      \r\n      assertEquals(\"post\", DebugServlet.lastMethod);\n      \r\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      \r\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      \r\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      \r\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n\n      \r\n      client.setParser(new XMLResponseParser());\n      try {\n        client.deleteByQuery(\"*:*\");\n      } catch (ParseException ignored) {}\n\n      assertEquals(\"post\", DebugServlet.lastMethod);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n    }\n\n  }\n","realPath":"solr/solrj/src/test/org/apache/solr/client/solrj/impl/Http2SolrClientTest.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":328,"status":"B"}],"commitId":"f80e8e11672d31c6e12069d2bd12a28b92e5a336","commitMessage":"@@@Merge jira/http2 branch to master\n","date":"2018-12-17 00:58:20","modifiedFileCount":"47","status":"B","submitter":"Cao Manh Dat"},{"authorTime":"2020-05-13 05:50:07","codes":[{"authorDate":"2020-05-13 05:50:07","commitOrder":2,"curCode":"  public void testQuery() throws Exception {\n    DebugServlet.clear();\n    try (Http2SolrClient client = getHttp2SolrClient(jetty.getBaseUrl().toString() + \"/debug/foo\")) {\n      SolrQuery q = new SolrQuery(\"foo\");\n      q.setParam(\"a\", \"\\u1234\");\n      try {\n        client.query(q, SolrRequest.METHOD.GET);\n      } catch (BaseHttpSolrClient.RemoteSolrException ignored) {}\n\n      \r\n      assertEquals(\"get\", DebugServlet.lastMethod);\n      \r\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      \r\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      \r\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      \r\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      \r\n      assertEquals(null, DebugServlet.headers.get(\"content-type\"));\n      \r\n      assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n      assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n\n      \r\n      DebugServlet.clear();\n      try {\n        client.query(q, SolrRequest.METHOD.POST);\n      } catch (BaseHttpSolrClient.RemoteSolrException ignored) {}\n\n      assertEquals(\"post\", DebugServlet.lastMethod);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n      assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(\"application/x-www-form-urlencoded\", DebugServlet.headers.get(\"content-type\"));\n\n      \r\n      DebugServlet.clear();\n      try {\n        client.query(q, SolrRequest.METHOD.PUT);\n      } catch (BaseHttpSolrClient.RemoteSolrException ignored) {}\n\n      assertEquals(\"put\", DebugServlet.lastMethod);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n      assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(\"application/x-www-form-urlencoded\", DebugServlet.headers.get(\"content-type\"));\n\n      \r\n      client.setParser(new XMLResponseParser());\n      DebugServlet.clear();\n      try {\n        client.query(q, SolrRequest.METHOD.GET);\n      } catch (BaseHttpSolrClient.RemoteSolrException ignored) {}\n\n      assertEquals(\"get\", DebugServlet.lastMethod);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n      assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n\n      \r\n      client.setParser(new XMLResponseParser());\n      DebugServlet.clear();\n      try {\n        client.query(q, SolrRequest.METHOD.POST);\n      } catch (BaseHttpSolrClient.RemoteSolrException ignored) {}\n\n      assertEquals(\"post\", DebugServlet.lastMethod);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n      assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(\"application/x-www-form-urlencoded\", DebugServlet.headers.get(\"content-type\"));\n\n      client.setParser(new XMLResponseParser());\n      DebugServlet.clear();\n      try {\n        client.query(q, SolrRequest.METHOD.PUT);\n      } catch (BaseHttpSolrClient.RemoteSolrException ignored) {}\n\n      assertEquals(\"put\", DebugServlet.lastMethod);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n      assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(\"application/x-www-form-urlencoded\", DebugServlet.headers.get(\"content-type\"));\n    }\n\n  }\n","date":"2020-05-13 05:50:07","endLine":336,"groupId":"10547","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testQuery","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/53/df0ca298cdb3fb83b4b8baf9a84d997a1b85cd.src","preCode":"  public void testQuery() throws Exception {\n    DebugServlet.clear();\n    try (Http2SolrClient client = getHttp2SolrClient(jetty.getBaseUrl().toString() + \"/debug/foo\")) {\n      SolrQuery q = new SolrQuery(\"foo\");\n      q.setParam(\"a\", \"\\u1234\");\n      try {\n        client.query(q, SolrRequest.METHOD.GET);\n      } catch (ParseException ignored) {}\n\n      \r\n      assertEquals(\"get\", DebugServlet.lastMethod);\n      \r\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      \r\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      \r\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      \r\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      \r\n      assertEquals(null, DebugServlet.headers.get(\"content-type\"));\n      \r\n      assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n      assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n\n      \r\n      DebugServlet.clear();\n      try {\n        client.query(q, SolrRequest.METHOD.POST);\n      } catch (ParseException ignored) {}\n\n      assertEquals(\"post\", DebugServlet.lastMethod);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n      assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(\"application/x-www-form-urlencoded\", DebugServlet.headers.get(\"content-type\"));\n\n      \r\n      DebugServlet.clear();\n      try {\n        client.query(q, SolrRequest.METHOD.PUT);\n      } catch (ParseException ignored) {}\n\n      assertEquals(\"put\", DebugServlet.lastMethod);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n      assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(\"application/x-www-form-urlencoded\", DebugServlet.headers.get(\"content-type\"));\n\n      \r\n      client.setParser(new XMLResponseParser());\n      DebugServlet.clear();\n      try {\n        client.query(q, SolrRequest.METHOD.GET);\n      } catch (ParseException ignored) {}\n\n      assertEquals(\"get\", DebugServlet.lastMethod);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n      assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n\n      \r\n      client.setParser(new XMLResponseParser());\n      DebugServlet.clear();\n      try {\n        client.query(q, SolrRequest.METHOD.POST);\n      } catch (ParseException ignored) {}\n\n      assertEquals(\"post\", DebugServlet.lastMethod);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n      assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(\"application/x-www-form-urlencoded\", DebugServlet.headers.get(\"content-type\"));\n\n      client.setParser(new XMLResponseParser());\n      DebugServlet.clear();\n      try {\n        client.query(q, SolrRequest.METHOD.PUT);\n      } catch (ParseException ignored) {}\n\n      assertEquals(\"put\", DebugServlet.lastMethod);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      assertEquals(1, DebugServlet.parameters.get(\"a\").length);\n      assertEquals(\"\\u1234\", DebugServlet.parameters.get(\"a\")[0]);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(\"application/x-www-form-urlencoded\", DebugServlet.headers.get(\"content-type\"));\n    }\n\n  }\n","realPath":"solr/solrj/src/test/org/apache/solr/client/solrj/impl/Http2SolrClientTest.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":222,"status":"M"},{"authorDate":"2020-05-13 05:50:07","commitOrder":2,"curCode":"  public void testDelete() throws Exception {\n    DebugServlet.clear();\n    try (Http2SolrClient client = getHttp2SolrClient(jetty.getBaseUrl().toString() + \"/debug/foo\")) {\n      try {\n        client.deleteById(\"id\");\n      } catch (BaseHttpSolrClient.RemoteSolrException ignored) {}\n\n      \r\n      assertEquals(\"post\", DebugServlet.lastMethod);\n      \r\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      \r\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      \r\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      \r\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n\n      \r\n      client.setParser(new XMLResponseParser());\n      try {\n        client.deleteByQuery(\"*:*\");\n      } catch (BaseHttpSolrClient.RemoteSolrException ignored) {}\n\n      assertEquals(\"post\", DebugServlet.lastMethod);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n    }\n\n  }\n","date":"2020-05-13 05:50:07","endLine":374,"groupId":"10547","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testDelete","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/53/df0ca298cdb3fb83b4b8baf9a84d997a1b85cd.src","preCode":"  public void testDelete() throws Exception {\n    DebugServlet.clear();\n    try (Http2SolrClient client = getHttp2SolrClient(jetty.getBaseUrl().toString() + \"/debug/foo\")) {\n      try {\n        client.deleteById(\"id\");\n      } catch (ParseException ignored) {}\n\n      \r\n      assertEquals(\"post\", DebugServlet.lastMethod);\n      \r\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      \r\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"javabin\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      \r\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      \r\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n\n      \r\n      client.setParser(new XMLResponseParser());\n      try {\n        client.deleteByQuery(\"*:*\");\n      } catch (ParseException ignored) {}\n\n      assertEquals(\"post\", DebugServlet.lastMethod);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.WT).length);\n      assertEquals(\"xml\", DebugServlet.parameters.get(CommonParams.WT)[0]);\n      assertEquals(1, DebugServlet.parameters.get(CommonParams.VERSION).length);\n      assertEquals(client.getParser().getVersion(), DebugServlet.parameters.get(CommonParams.VERSION)[0]);\n      assertEquals(EXPECTED_USER_AGENT, DebugServlet.headers.get(\"user-agent\"));\n    }\n\n  }\n","realPath":"solr/solrj/src/test/org/apache/solr/client/solrj/impl/Http2SolrClientTest.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":339,"status":"M"}],"commitId":"adddab9d1466675cd79fd06c37592000a56841d2","commitMessage":"@@@SOLR-14456: Fix Content-Type header forwarding on compressed requests (#1480)\n\nCo-authored-by: Samuel Garc?a Mart?nez <samuelgma@inditex.com>","date":"2020-05-13 05:50:07","modifiedFileCount":"6","status":"M","submitter":"Samuel Garc?a Mart?nez"}]
