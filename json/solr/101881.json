[{"authorTime":"2018-11-30 01:58:18","codes":[{"authorDate":"2018-11-30 01:58:18","commitOrder":4,"curCode":"  public static boolean waitForServerDown(String hp, long timeoutMs) {\n    final TimeOut timeout = new TimeOut(timeoutMs, TimeUnit.MILLISECONDS, TimeSource.NANO_TIME);\n    while (true) {\n      try {\n        HostPort hpobj = parseHostPortList(hp).get(0);\n        send4LetterWord(hpobj.host, hpobj.port, \"stat\");\n      } catch (IOException e) {\n        return true;\n      }\n      \n      if (timeout.hasTimedOut()) {\n        throw new RuntimeException(\"Time out waiting for ZooKeeper shutdown!\");\n      }\n      try {\n        Thread.sleep(250);\n      } catch (InterruptedException e) {\n        \r\n      }\n    }\n  }\n","date":"2018-11-30 01:58:51","endLine":650,"groupId":"39810","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"waitForServerDown","params":"(Stringhp@longtimeoutMs)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/85/f6afb17880d328e4a32f825dffd31776d7b826.src","preCode":"  public static boolean waitForServerDown(String hp, long timeoutMs) {\n    final TimeOut timeout = new TimeOut(timeoutMs, TimeUnit.MILLISECONDS, TimeSource.NANO_TIME);\n    while (true) {\n      try {\n        HostPort hpobj = parseHostPortList(hp).get(0);\n        send4LetterWord(hpobj.host, hpobj.port, \"stat\");\n      } catch (IOException e) {\n        return true;\n      }\n      \n      if (timeout.hasTimedOut()) {\n        throw new RuntimeException(\"Time out waiting for ZooKeeper shutdown!\");\n      }\n      try {\n        Thread.sleep(250);\n      } catch (InterruptedException e) {\n        \r\n      }\n    }\n  }\n","realPath":"solr/test-framework/src/java/org/apache/solr/cloud/ZkTestServer.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":631,"status":"MB"},{"authorDate":"2018-11-30 01:58:18","commitOrder":4,"curCode":"  public static boolean waitForServerUp(String hp, long timeoutMs) {\n    final TimeOut timeout = new TimeOut(timeoutMs, TimeUnit.MILLISECONDS, TimeSource.NANO_TIME);\n    while (true) {\n      try {\n        HostPort hpobj = parseHostPortList(hp).get(0);\n        send4LetterWord(hpobj.host, hpobj.port, \"stat\");\n        return true;\n      } catch (IOException e) {\n        e.printStackTrace();\n      }\n      \n      if (timeout.hasTimedOut()) {\n        throw new RuntimeException(\"Time out waiting for ZooKeeper to startup!\");\n      }\n      try {\n        Thread.sleep(250);\n      } catch (InterruptedException e) {\n        \r\n      }\n    }\n  }\n","date":"2018-11-30 01:58:51","endLine":672,"groupId":"13190","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"waitForServerUp","params":"(Stringhp@longtimeoutMs)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/85/f6afb17880d328e4a32f825dffd31776d7b826.src","preCode":"  public static boolean waitForServerUp(String hp, long timeoutMs) {\n    final TimeOut timeout = new TimeOut(timeoutMs, TimeUnit.MILLISECONDS, TimeSource.NANO_TIME);\n    while (true) {\n      try {\n        HostPort hpobj = parseHostPortList(hp).get(0);\n        send4LetterWord(hpobj.host, hpobj.port, \"stat\");\n        return true;\n      } catch (IOException e) {\n        e.printStackTrace();\n      }\n      \n      if (timeout.hasTimedOut()) {\n        throw new RuntimeException(\"Time out waiting for ZooKeeper to startup!\");\n      }\n      try {\n        Thread.sleep(250);\n      } catch (InterruptedException e) {\n        \r\n      }\n    }\n  }\n","realPath":"solr/test-framework/src/java/org/apache/solr/cloud/ZkTestServer.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":652,"status":"B"}],"commitId":"75b183196798232aa6f2dcaaaab117f309119053","commitMessage":"@@@SOLR-12801: Make massive improvements to the tests.\n\nSOLR-12804: Remove static modifier from Overseer queue access.\n\nSOLR-12896: Introduce more checks for shutdown and closed to improve clean close and shutdown. (Partial)\n\nSOLR-12897: Introduce AlreadyClosedException to clean up silly close / shutdown logging. (Partial)\n\nSOLR-12898: Replace cluster state polling with ZkStateReader#waitFor. (Partial)\n\nSOLR-12923: The new AutoScaling tests are way too flaky and need special attention. (Partial)\n\nSOLR-12932: ant test (without badapples=false) should pass easily for developers. (Partial)\n\nSOLR-12933: Fix SolrCloud distributed commit.\n","date":"2018-11-30 01:58:51","modifiedFileCount":"339","status":"M","submitter":"markrmiller"},{"authorTime":"2019-08-22 04:13:40","codes":[{"authorDate":"2019-08-22 04:13:40","commitOrder":5,"curCode":"  public static boolean waitForServerDown(String hp, long timeoutMs) {\n    log.info(\"waitForServerDown: {}\", hp);\n    final TimeOut timeout = new TimeOut(timeoutMs, TimeUnit.MILLISECONDS, TimeSource.NANO_TIME);\n    while (true) {\n      try {\n        HostPort hpobj = parseHostPortList(hp).get(0);\n        send4LetterWord(hpobj.host, hpobj.port, \"stat\");\n      } catch (IOException e) {\n        return true;\n      }\n\n      if (timeout.hasTimedOut()) {\n        throw new RuntimeException(\"Time out waiting for ZooKeeper shutdown!\");\n      }\n      try {\n        Thread.sleep(250);\n      } catch (InterruptedException e) {\n        \r\n      }\n    }\n  }\n","date":"2019-08-22 04:13:40","endLine":661,"groupId":"101881","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"waitForServerDown","params":"(Stringhp@longtimeoutMs)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/71/95cd1f4629b9f64864b4999fe64e8b1ce9923b.src","preCode":"  public static boolean waitForServerDown(String hp, long timeoutMs) {\n    final TimeOut timeout = new TimeOut(timeoutMs, TimeUnit.MILLISECONDS, TimeSource.NANO_TIME);\n    while (true) {\n      try {\n        HostPort hpobj = parseHostPortList(hp).get(0);\n        send4LetterWord(hpobj.host, hpobj.port, \"stat\");\n      } catch (IOException e) {\n        return true;\n      }\n\n      if (timeout.hasTimedOut()) {\n        throw new RuntimeException(\"Time out waiting for ZooKeeper shutdown!\");\n      }\n      try {\n        Thread.sleep(250);\n      } catch (InterruptedException e) {\n        \r\n      }\n    }\n  }\n","realPath":"solr/test-framework/src/java/org/apache/solr/cloud/ZkTestServer.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":641,"status":"M"},{"authorDate":"2019-08-22 04:13:40","commitOrder":5,"curCode":"  public static boolean waitForServerUp(String hp, long timeoutMs) {\n    log.info(\"waitForServerUp: {}\", hp);\n    final TimeOut timeout = new TimeOut(timeoutMs, TimeUnit.MILLISECONDS, TimeSource.NANO_TIME);\n    while (true) {\n      try {\n        HostPort hpobj = parseHostPortList(hp).get(0);\n        send4LetterWord(hpobj.host, hpobj.port, \"stat\");\n        return true;\n      } catch (IOException e) {\n        e.printStackTrace();\n      }\n\n      if (timeout.hasTimedOut()) {\n        throw new RuntimeException(\"Time out waiting for ZooKeeper to startup!\");\n      }\n      try {\n        Thread.sleep(250);\n      } catch (InterruptedException e) {\n        \r\n      }\n    }\n  }\n","date":"2019-08-22 04:13:40","endLine":684,"groupId":"101881","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"waitForServerUp","params":"(Stringhp@longtimeoutMs)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/71/95cd1f4629b9f64864b4999fe64e8b1ce9923b.src","preCode":"  public static boolean waitForServerUp(String hp, long timeoutMs) {\n    final TimeOut timeout = new TimeOut(timeoutMs, TimeUnit.MILLISECONDS, TimeSource.NANO_TIME);\n    while (true) {\n      try {\n        HostPort hpobj = parseHostPortList(hp).get(0);\n        send4LetterWord(hpobj.host, hpobj.port, \"stat\");\n        return true;\n      } catch (IOException e) {\n        e.printStackTrace();\n      }\n\n      if (timeout.hasTimedOut()) {\n        throw new RuntimeException(\"Time out waiting for ZooKeeper to startup!\");\n      }\n      try {\n        Thread.sleep(250);\n      } catch (InterruptedException e) {\n        \r\n      }\n    }\n  }\n","realPath":"solr/test-framework/src/java/org/apache/solr/cloud/ZkTestServer.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":663,"status":"M"}],"commitId":"2fdc882bc473627744c1fd184848dfabeab3648d","commitMessage":"@@@Additional logging in test framework methods that 'waitFor' something to better trace order of operations when failures occur\n","date":"2019-08-22 04:13:40","modifiedFileCount":"6","status":"M","submitter":"Chris Hostetter"}]
