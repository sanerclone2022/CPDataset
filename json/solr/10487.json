[{"authorTime":"2020-11-20 01:57:47","codes":[{"authorDate":"2020-11-20 01:57:47","commitOrder":5,"curCode":"  public void queryWithLocalShardsPreferenceRulesTest() throws Exception {\n\n    String collectionName = \"localShardsTestColl\";\n\n    int liveNodes = cluster.getJettySolrRunners().size();\n\n    \r\n    \r\n    \r\n    CollectionAdminRequest.createCollection(collectionName, \"conf\", liveNodes, liveNodes)\n        .processAndWait(cluster.getSolrClient(), TIMEOUT);\n    cluster.waitForActiveCollection(collectionName, liveNodes, liveNodes * liveNodes);\n    \r\n    new UpdateRequest()\n        .add(id, \"0\", \"a_t\", \"hello1\")\n        .add(id, \"2\", \"a_t\", \"hello2\")\n        .add(id, \"3\", \"a_t\", \"hello2\")\n        .commit(getRandomClient(), collectionName);\n\n    queryWithShardsPreferenceRules(getRandomClient(), collectionName);\n  }\n","date":"2020-11-20 01:57:47","endLine":427,"groupId":"60300","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"queryWithLocalShardsPreferenceRulesTest","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/81/80358e3865d292d6acbecea7380da445f2b636.src","preCode":"  public void queryWithLocalShardsPreferenceRulesTest() throws Exception {\n\n    String collectionName = \"localShardsTestColl\";\n\n    int liveNodes = cluster.getJettySolrRunners().size();\n\n    \r\n    \r\n    \r\n    CollectionAdminRequest.createCollection(collectionName, \"conf\", liveNodes, liveNodes)\n        .processAndWait(cluster.getSolrClient(), TIMEOUT);\n    cluster.waitForActiveCollection(collectionName, liveNodes, liveNodes * liveNodes);\n    \r\n    new UpdateRequest()\n        .add(id, \"0\", \"a_t\", \"hello1\")\n        .add(id, \"2\", \"a_t\", \"hello2\")\n        .add(id, \"3\", \"a_t\", \"hello2\")\n        .commit(getRandomClient(), collectionName);\n\n    queryWithShardsPreferenceRules(getRandomClient(), collectionName);\n  }\n","realPath":"solr/solrj/src/test/org/apache/solr/client/solrj/impl/CloudSolrClientTest.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":407,"status":"B"},{"authorDate":"2020-11-20 01:57:47","commitOrder":5,"curCode":"  public void preferReplicaTypesTest() throws Exception {\n\n    String collectionName = \"replicaTypesTestColl\";\n\n    int liveNodes = cluster.getJettySolrRunners().size();\n\n    \r\n    \r\n    int pullReplicas = Math.max(1, liveNodes - 2);\n    CollectionAdminRequest.createCollection(collectionName, \"conf\", liveNodes, 1, 1, pullReplicas)\n        .processAndWait(cluster.getSolrClient(), TIMEOUT);\n    cluster.waitForActiveCollection(collectionName, liveNodes, liveNodes * (2 + pullReplicas));\n    \n    \r\n    new UpdateRequest()\n        .add(id, \"0\", \"a_t\", \"hello1\")\n        .add(id, \"2\", \"a_t\", \"hello2\")\n        .add(id, \"3\", \"a_t\", \"hello2\")\n        .commit(getRandomClient(), collectionName);\n\n    \r\n    queryWithPreferReplicaTypes(getRandomClient(), \"PULL\", collectionName);\n    queryWithPreferReplicaTypes(getRandomClient(), \"PULL|TLOG\", collectionName);\n    queryWithPreferReplicaTypes(getRandomClient(), \"TLOG\", collectionName);\n    queryWithPreferReplicaTypes(getRandomClient(), \"TLOG|PULL\", collectionName);\n    queryWithPreferReplicaTypes(getRandomClient(), \"NRT\", collectionName);\n    queryWithPreferReplicaTypes(getRandomClient(), \"NRT|PULL\", collectionName);\n    CollectionAdminRequest.deleteCollection(collectionName)\n        .processAndWait(cluster.getSolrClient(), TIMEOUT);\n  }\n","date":"2020-11-20 01:57:47","endLine":956,"groupId":"19207","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"preferReplicaTypesTest","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/81/80358e3865d292d6acbecea7380da445f2b636.src","preCode":"  public void preferReplicaTypesTest() throws Exception {\n\n    String collectionName = \"replicaTypesTestColl\";\n\n    int liveNodes = cluster.getJettySolrRunners().size();\n\n    \r\n    \r\n    int pullReplicas = Math.max(1, liveNodes - 2);\n    CollectionAdminRequest.createCollection(collectionName, \"conf\", liveNodes, 1, 1, pullReplicas)\n        .processAndWait(cluster.getSolrClient(), TIMEOUT);\n    cluster.waitForActiveCollection(collectionName, liveNodes, liveNodes * (2 + pullReplicas));\n    \n    \r\n    new UpdateRequest()\n        .add(id, \"0\", \"a_t\", \"hello1\")\n        .add(id, \"2\", \"a_t\", \"hello2\")\n        .add(id, \"3\", \"a_t\", \"hello2\")\n        .commit(getRandomClient(), collectionName);\n\n    \r\n    queryWithPreferReplicaTypes(getRandomClient(), \"PULL\", collectionName);\n    queryWithPreferReplicaTypes(getRandomClient(), \"PULL|TLOG\", collectionName);\n    queryWithPreferReplicaTypes(getRandomClient(), \"TLOG\", collectionName);\n    queryWithPreferReplicaTypes(getRandomClient(), \"TLOG|PULL\", collectionName);\n    queryWithPreferReplicaTypes(getRandomClient(), \"NRT\", collectionName);\n    queryWithPreferReplicaTypes(getRandomClient(), \"NRT|PULL\", collectionName);\n    CollectionAdminRequest.deleteCollection(collectionName)\n        .processAndWait(cluster.getSolrClient(), TIMEOUT);\n  }\n","realPath":"solr/solrj/src/test/org/apache/solr/client/solrj/impl/CloudSolrClientTest.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":927,"status":"MB"}],"commitId":"c4d4767bca196ad358b72156889effd27fdfcc9b","commitMessage":"@@@SOLR-14035: Remove deprecated preferLocalShards=true support in favour of the shards.preference=replica.location:local alternative.\n(Alex Bulygin via Christine Poerschke)\n","date":"2020-11-20 01:57:47","modifiedFileCount":"5","status":"M","submitter":"Christine Poerschke"},{"authorTime":"2020-11-20 01:57:47","codes":[{"authorDate":"2021-01-18 23:59:41","commitOrder":6,"curCode":"  public void queryWithLocalShardsPreferenceRulesTest() throws Exception {\n\n    String collectionName = \"localShardsTestColl\";\n\n    int liveNodes = cluster.getJettySolrRunners().size();\n\n    \r\n    \r\n    \r\n    CollectionAdminRequest.createCollection(collectionName, \"conf\", liveNodes, liveNodes)\n        .setPerReplicaState(USE_PER_REPLICA_STATE)\n        .processAndWait(cluster.getSolrClient(), TIMEOUT);\n    cluster.waitForActiveCollection(collectionName, liveNodes, liveNodes * liveNodes);\n    \r\n    new UpdateRequest()\n        .add(id, \"0\", \"a_t\", \"hello1\")\n        .add(id, \"2\", \"a_t\", \"hello2\")\n        .add(id, \"3\", \"a_t\", \"hello2\")\n        .commit(getRandomClient(), collectionName);\n\n    queryWithShardsPreferenceRules(getRandomClient(), collectionName);\n  }\n","date":"2021-01-18 23:59:41","endLine":442,"groupId":"10487","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"queryWithLocalShardsPreferenceRulesTest","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/e1/56607561e27fb90b089d6c2abf2126045876ee.src","preCode":"  public void queryWithLocalShardsPreferenceRulesTest() throws Exception {\n\n    String collectionName = \"localShardsTestColl\";\n\n    int liveNodes = cluster.getJettySolrRunners().size();\n\n    \r\n    \r\n    \r\n    CollectionAdminRequest.createCollection(collectionName, \"conf\", liveNodes, liveNodes)\n        .processAndWait(cluster.getSolrClient(), TIMEOUT);\n    cluster.waitForActiveCollection(collectionName, liveNodes, liveNodes * liveNodes);\n    \r\n    new UpdateRequest()\n        .add(id, \"0\", \"a_t\", \"hello1\")\n        .add(id, \"2\", \"a_t\", \"hello2\")\n        .add(id, \"3\", \"a_t\", \"hello2\")\n        .commit(getRandomClient(), collectionName);\n\n    queryWithShardsPreferenceRules(getRandomClient(), collectionName);\n  }\n","realPath":"solr/solrj/src/test/org/apache/solr/client/solrj/impl/CloudSolrClientTest.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":421,"status":"M"},{"authorDate":"2020-11-20 01:57:47","commitOrder":6,"curCode":"  public void preferReplicaTypesTest() throws Exception {\n\n    String collectionName = \"replicaTypesTestColl\";\n\n    int liveNodes = cluster.getJettySolrRunners().size();\n\n    \r\n    \r\n    int pullReplicas = Math.max(1, liveNodes - 2);\n    CollectionAdminRequest.createCollection(collectionName, \"conf\", liveNodes, 1, 1, pullReplicas)\n        .processAndWait(cluster.getSolrClient(), TIMEOUT);\n    cluster.waitForActiveCollection(collectionName, liveNodes, liveNodes * (2 + pullReplicas));\n    \n    \r\n    new UpdateRequest()\n        .add(id, \"0\", \"a_t\", \"hello1\")\n        .add(id, \"2\", \"a_t\", \"hello2\")\n        .add(id, \"3\", \"a_t\", \"hello2\")\n        .commit(getRandomClient(), collectionName);\n\n    \r\n    queryWithPreferReplicaTypes(getRandomClient(), \"PULL\", collectionName);\n    queryWithPreferReplicaTypes(getRandomClient(), \"PULL|TLOG\", collectionName);\n    queryWithPreferReplicaTypes(getRandomClient(), \"TLOG\", collectionName);\n    queryWithPreferReplicaTypes(getRandomClient(), \"TLOG|PULL\", collectionName);\n    queryWithPreferReplicaTypes(getRandomClient(), \"NRT\", collectionName);\n    queryWithPreferReplicaTypes(getRandomClient(), \"NRT|PULL\", collectionName);\n    CollectionAdminRequest.deleteCollection(collectionName)\n        .processAndWait(cluster.getSolrClient(), TIMEOUT);\n  }\n","date":"2020-11-20 01:57:47","endLine":956,"groupId":"10487","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"preferReplicaTypesTest","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/81/80358e3865d292d6acbecea7380da445f2b636.src","preCode":"  public void preferReplicaTypesTest() throws Exception {\n\n    String collectionName = \"replicaTypesTestColl\";\n\n    int liveNodes = cluster.getJettySolrRunners().size();\n\n    \r\n    \r\n    int pullReplicas = Math.max(1, liveNodes - 2);\n    CollectionAdminRequest.createCollection(collectionName, \"conf\", liveNodes, 1, 1, pullReplicas)\n        .processAndWait(cluster.getSolrClient(), TIMEOUT);\n    cluster.waitForActiveCollection(collectionName, liveNodes, liveNodes * (2 + pullReplicas));\n    \n    \r\n    new UpdateRequest()\n        .add(id, \"0\", \"a_t\", \"hello1\")\n        .add(id, \"2\", \"a_t\", \"hello2\")\n        .add(id, \"3\", \"a_t\", \"hello2\")\n        .commit(getRandomClient(), collectionName);\n\n    \r\n    queryWithPreferReplicaTypes(getRandomClient(), \"PULL\", collectionName);\n    queryWithPreferReplicaTypes(getRandomClient(), \"PULL|TLOG\", collectionName);\n    queryWithPreferReplicaTypes(getRandomClient(), \"TLOG\", collectionName);\n    queryWithPreferReplicaTypes(getRandomClient(), \"TLOG|PULL\", collectionName);\n    queryWithPreferReplicaTypes(getRandomClient(), \"NRT\", collectionName);\n    queryWithPreferReplicaTypes(getRandomClient(), \"NRT|PULL\", collectionName);\n    CollectionAdminRequest.deleteCollection(collectionName)\n        .processAndWait(cluster.getSolrClient(), TIMEOUT);\n  }\n","realPath":"solr/solrj/src/test/org/apache/solr/client/solrj/impl/CloudSolrClientTest.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":927,"status":"N"}],"commitId":"8505d4d416fdf707bab55bc4da9a71ddb3374274","commitMessage":"@@@SOLR-15052: Per-replica states for reducing overseer bottlenecks (trunk) (#2177)\n\n","date":"2021-01-18 23:59:41","modifiedFileCount":"53","status":"M","submitter":"Noble Paul"}]
