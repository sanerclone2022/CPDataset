[{"authorTime":"2015-01-22 05:39:15","codes":[{"authorDate":"2015-02-26 07:19:08","commitOrder":9,"curCode":"  public static void beforeClass() throws Exception {\n    dfsCluster = HdfsTestUtil.setupClass(createTempDir().toFile().getAbsolutePath());\n    hdfsUri = dfsCluster.getFileSystem().getUri().toString();\n    \n    try {\n      URI uri = new URI(hdfsUri);\n      Configuration conf = new Configuration();\n      conf.setBoolean(\"fs.hdfs.impl.disable.cache\", true);\n      fs = FileSystem.get(uri, conf);\n    } catch (IOException e) {\n      throw new RuntimeException(e);\n    } catch (URISyntaxException e) {\n      throw new RuntimeException(e);\n    }\n    \n    System.setProperty(\"solr.ulog.dir\", hdfsUri + \"/solr/shard1\");\n    \n    initCore(\"solrconfig-tlog.xml\",\"schema15.xml\");\n  }\n","date":"2015-02-26 07:19:08","endLine":68,"groupId":"26483","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"beforeClass","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/b7/82a04a7a3ec463ae439c34ed4821b46d523c2e.src","preCode":"  public static void beforeClass() throws Exception {\n    dfsCluster = HdfsTestUtil.setupClass(createTempDir().toFile().getAbsolutePath());\n    hdfsUri = dfsCluster.getFileSystem().getUri().toString();\n    \n    try {\n      URI uri = new URI(hdfsUri);\n      Configuration conf = new Configuration();\n      conf.setBoolean(\"fs.hdfs.impl.disable.cache\", true);\n      fs = FileSystem.get(uri, conf);\n    } catch (IOException e) {\n      throw new RuntimeException(e);\n    } catch (URISyntaxException e) {\n      throw new RuntimeException(e);\n    }\n    \n    System.setProperty(\"solr.ulog.dir\", hdfsUri + \"/solr/shard1\");\n    \n    initCore(\"solrconfig-tlog.xml\",\"schema15.xml\");\n  }\n","realPath":"solr/core/src/test/org/apache/solr/update/TestHdfsUpdateLog.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":50,"status":"B"},{"authorDate":"2015-01-22 05:39:15","commitOrder":9,"curCode":"  public static void beforeClass() throws Exception {\n    dfsCluster = HdfsTestUtil.setupClass(createTempDir().toFile().getAbsolutePath());\n    System.setProperty(\"solr.hdfs.home\", dfsCluster.getURI().toString() + \"/solr\");\n    hdfsUri = dfsCluster.getFileSystem().getUri().toString();\n    \n    try {\n      URI uri = new URI(hdfsUri);\n      fs = FileSystem.newInstance(uri, new Configuration());\n    } catch (IOException | URISyntaxException e) {\n      throw new RuntimeException(e);\n    }\n\n    System.setProperty(\"solr.ulog.dir\", hdfsUri + \"/solr/shard1\");\n    \n    initCore(\"solrconfig-tlog.xml\",\"schema15.xml\");\n  }\n","date":"2015-01-22 05:39:15","endLine":92,"groupId":"37558","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"beforeClass","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/a8/033528a36b9709769d159909dca27e6a20a863.src","preCode":"  public static void beforeClass() throws Exception {\n    dfsCluster = HdfsTestUtil.setupClass(createTempDir().toFile().getAbsolutePath());\n    System.setProperty(\"solr.hdfs.home\", dfsCluster.getURI().toString() + \"/solr\");\n    hdfsUri = dfsCluster.getFileSystem().getUri().toString();\n    \n    try {\n      URI uri = new URI(hdfsUri);\n      fs = FileSystem.newInstance(uri, new Configuration());\n    } catch (IOException | URISyntaxException e) {\n      throw new RuntimeException(e);\n    }\n\n    System.setProperty(\"solr.ulog.dir\", hdfsUri + \"/solr/shard1\");\n    \n    initCore(\"solrconfig-tlog.xml\",\"schema15.xml\");\n  }\n","realPath":"solr/core/src/test/org/apache/solr/search/TestRecoveryHdfs.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":77,"status":"NB"}],"commitId":"f2c9067e59b81b3dea7903315431babcd2506167","commitMessage":"@@@SOLR-7113: Multiple calls to UpdateLog#init is not thread safe with respect to the HDFS FileSystem client object usage.\n\ngit-svn-id: https://svn.apache.org/repos/asf/lucene/dev/trunk@1662324 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2015-02-26 07:19:08","modifiedFileCount":"5","status":"M","submitter":"Mark Robert Miller"},{"authorTime":"2015-03-23 01:09:40","codes":[{"authorDate":"2015-02-26 07:19:08","commitOrder":10,"curCode":"  public static void beforeClass() throws Exception {\n    dfsCluster = HdfsTestUtil.setupClass(createTempDir().toFile().getAbsolutePath());\n    hdfsUri = dfsCluster.getFileSystem().getUri().toString();\n    \n    try {\n      URI uri = new URI(hdfsUri);\n      Configuration conf = new Configuration();\n      conf.setBoolean(\"fs.hdfs.impl.disable.cache\", true);\n      fs = FileSystem.get(uri, conf);\n    } catch (IOException e) {\n      throw new RuntimeException(e);\n    } catch (URISyntaxException e) {\n      throw new RuntimeException(e);\n    }\n    \n    System.setProperty(\"solr.ulog.dir\", hdfsUri + \"/solr/shard1\");\n    \n    initCore(\"solrconfig-tlog.xml\",\"schema15.xml\");\n  }\n","date":"2015-02-26 07:19:08","endLine":68,"groupId":"26483","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"beforeClass","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/b7/82a04a7a3ec463ae439c34ed4821b46d523c2e.src","preCode":"  public static void beforeClass() throws Exception {\n    dfsCluster = HdfsTestUtil.setupClass(createTempDir().toFile().getAbsolutePath());\n    hdfsUri = dfsCluster.getFileSystem().getUri().toString();\n    \n    try {\n      URI uri = new URI(hdfsUri);\n      Configuration conf = new Configuration();\n      conf.setBoolean(\"fs.hdfs.impl.disable.cache\", true);\n      fs = FileSystem.get(uri, conf);\n    } catch (IOException e) {\n      throw new RuntimeException(e);\n    } catch (URISyntaxException e) {\n      throw new RuntimeException(e);\n    }\n    \n    System.setProperty(\"solr.ulog.dir\", hdfsUri + \"/solr/shard1\");\n    \n    initCore(\"solrconfig-tlog.xml\",\"schema15.xml\");\n  }\n","realPath":"solr/core/src/test/org/apache/solr/update/TestHdfsUpdateLog.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":50,"status":"N"},{"authorDate":"2015-03-23 01:09:40","commitOrder":10,"curCode":"  public static void beforeClass() throws Exception {\n    dfsCluster = HdfsTestUtil.setupClass(createTempDir().toFile().getAbsolutePath());\n    System.setProperty(\"solr.hdfs.home\", dfsCluster.getURI().toString() + \"/solr\");\n    hdfsUri = dfsCluster.getFileSystem().getUri().toString();\n    \n    try {\n      URI uri = new URI(hdfsUri);\n      Configuration conf = new Configuration();\n      conf.setBoolean(\"fs.hdfs.impl.disable.cache\", true);\n      fs = FileSystem.get(uri, conf);\n    } catch (IOException | URISyntaxException e) {\n      throw new RuntimeException(e);\n    }\n\n    System.setProperty(\"solr.ulog.dir\", hdfsUri + \"/solr/shard1\");\n    \n    initCore(\"solrconfig-tlog.xml\",\"schema15.xml\");\n  }\n","date":"2015-03-23 01:09:40","endLine":94,"groupId":"26483","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"beforeClass","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/6f/866a2ec14ba3a3c12035c9abc8a8efd8627ea1.src","preCode":"  public static void beforeClass() throws Exception {\n    dfsCluster = HdfsTestUtil.setupClass(createTempDir().toFile().getAbsolutePath());\n    System.setProperty(\"solr.hdfs.home\", dfsCluster.getURI().toString() + \"/solr\");\n    hdfsUri = dfsCluster.getFileSystem().getUri().toString();\n    \n    try {\n      URI uri = new URI(hdfsUri);\n      fs = FileSystem.newInstance(uri, new Configuration());\n    } catch (IOException | URISyntaxException e) {\n      throw new RuntimeException(e);\n    }\n\n    System.setProperty(\"solr.ulog.dir\", hdfsUri + \"/solr/shard1\");\n    \n    initCore(\"solrconfig-tlog.xml\",\"schema15.xml\");\n  }\n","realPath":"solr/core/src/test/org/apache/solr/search/TestRecoveryHdfs.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":77,"status":"M"}],"commitId":"4e01da3843fb82fa3188d0b03cbc500aa9618212","commitMessage":"@@@SOLR-7284: HdfsUpdateLog is using hdfs FileSystem.get without turning off the cache.\nSOLR-7286: Using HDFS's FileSystem.newInstance does not guarantee a new instance.\n\ngit-svn-id: https://svn.apache.org/repos/asf/lucene/dev/trunk@1668411 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2015-03-23 01:09:40","modifiedFileCount":"7","status":"M","submitter":"Mark Robert Miller"},{"authorTime":"2015-04-24 23:08:11","codes":[{"authorDate":"2015-04-24 23:08:11","commitOrder":11,"curCode":"  public static void beforeClass() throws Exception {\n    dfsCluster = HdfsTestUtil.setupClass(createTempDir().toFile().getAbsolutePath());\n    hdfsUri = HdfsTestUtil.getURI(dfsCluster);\n    \n    try {\n      URI uri = new URI(hdfsUri);\n      Configuration conf = HdfsTestUtil.getClientConfiguration(dfsCluster);\n      conf.setBoolean(\"fs.hdfs.impl.disable.cache\", true);\n      fs = FileSystem.get(uri, conf);\n    } catch (IOException e) {\n      throw new RuntimeException(e);\n    } catch (URISyntaxException e) {\n      throw new RuntimeException(e);\n    }\n    \n    System.setProperty(\"solr.ulog.dir\", hdfsUri + \"/solr/shard1\");\n    \n    initCore(\"solrconfig-tlog.xml\",\"schema15.xml\");\n  }\n","date":"2015-04-24 23:08:11","endLine":70,"groupId":"20954","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"beforeClass","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/50/21d843d5ca509244538e12c83b10ba1c17172c.src","preCode":"  public static void beforeClass() throws Exception {\n    dfsCluster = HdfsTestUtil.setupClass(createTempDir().toFile().getAbsolutePath());\n    hdfsUri = dfsCluster.getFileSystem().getUri().toString();\n    \n    try {\n      URI uri = new URI(hdfsUri);\n      Configuration conf = new Configuration();\n      conf.setBoolean(\"fs.hdfs.impl.disable.cache\", true);\n      fs = FileSystem.get(uri, conf);\n    } catch (IOException e) {\n      throw new RuntimeException(e);\n    } catch (URISyntaxException e) {\n      throw new RuntimeException(e);\n    }\n    \n    System.setProperty(\"solr.ulog.dir\", hdfsUri + \"/solr/shard1\");\n    \n    initCore(\"solrconfig-tlog.xml\",\"schema15.xml\");\n  }\n","realPath":"solr/core/src/test/org/apache/solr/update/TestHdfsUpdateLog.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":52,"status":"M"},{"authorDate":"2015-04-24 23:08:11","commitOrder":11,"curCode":"  public static void beforeClass() throws Exception {\n    dfsCluster = HdfsTestUtil.setupClass(createTempDir().toFile().getAbsolutePath());\n    hdfsUri = HdfsTestUtil.getURI(dfsCluster);\n    \n    try {\n      URI uri = new URI(hdfsUri);\n      Configuration conf = HdfsTestUtil.getClientConfiguration(dfsCluster);\n      conf.setBoolean(\"fs.hdfs.impl.disable.cache\", true);\n      fs = FileSystem.get(uri, conf);\n    } catch (IOException | URISyntaxException e) {\n      throw new RuntimeException(e);\n    }\n\n    System.setProperty(\"solr.ulog.dir\", hdfsUri + \"/solr/shard1\");\n    \n    initCore(\"solrconfig-tlog.xml\",\"schema15.xml\");\n  }\n","date":"2015-04-24 23:08:11","endLine":95,"groupId":"20954","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"beforeClass","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/6a/8c89f87dedbdb8d1d32ac8d86fe1aa4a89501e.src","preCode":"  public static void beforeClass() throws Exception {\n    dfsCluster = HdfsTestUtil.setupClass(createTempDir().toFile().getAbsolutePath());\n    System.setProperty(\"solr.hdfs.home\", dfsCluster.getURI().toString() + \"/solr\");\n    hdfsUri = dfsCluster.getFileSystem().getUri().toString();\n    \n    try {\n      URI uri = new URI(hdfsUri);\n      Configuration conf = new Configuration();\n      conf.setBoolean(\"fs.hdfs.impl.disable.cache\", true);\n      fs = FileSystem.get(uri, conf);\n    } catch (IOException | URISyntaxException e) {\n      throw new RuntimeException(e);\n    }\n\n    System.setProperty(\"solr.ulog.dir\", hdfsUri + \"/solr/shard1\");\n    \n    initCore(\"solrconfig-tlog.xml\",\"schema15.xml\");\n  }\n","realPath":"solr/core/src/test/org/apache/solr/search/TestRecoveryHdfs.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":79,"status":"M"}],"commitId":"ed9e1fc1b5557360fdcd9c90aa3ff3802152c05a","commitMessage":"@@@SOLR-7311: Add some infrastructure and tests to make sure Solr works well in the face of Name Node high availability and failover.\n\ngit-svn-id: https://svn.apache.org/repos/asf/lucene/dev/trunk@1675883 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2015-04-24 23:08:11","modifiedFileCount":"11","status":"M","submitter":"Mark Robert Miller"},{"authorTime":"2019-03-13 01:06:19","codes":[{"authorDate":"2019-03-13 01:06:19","commitOrder":12,"curCode":"  public static void beforeClass() throws Exception {\n    dfsCluster = HdfsTestUtil.setupClass(createTempDir().toFile().getAbsolutePath());\n    hdfsUri = HdfsTestUtil.getURI(dfsCluster);\n    \n    try {\n      URI uri = new URI(hdfsUri);\n      Configuration conf = HdfsTestUtil.getClientConfiguration(dfsCluster);\n      fs = FileSystem.get(uri, conf);\n    } catch (IOException | URISyntaxException e) {\n      throw new RuntimeException(e);\n    }\n\n    System.setProperty(\"solr.ulog.dir\", hdfsUri + \"/solr/shard1\");\n    \n    initCore(\"solrconfig-tlog.xml\",\"schema15.xml\");\n  }\n","date":"2019-03-19 03:25:36","endLine":61,"groupId":"102895","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"beforeClass","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/5b/a7f58ec1493c3dddc67cda6beae188ef6279c4.src","preCode":"  public static void beforeClass() throws Exception {\n    dfsCluster = HdfsTestUtil.setupClass(createTempDir().toFile().getAbsolutePath());\n    hdfsUri = HdfsTestUtil.getURI(dfsCluster);\n    \n    try {\n      URI uri = new URI(hdfsUri);\n      Configuration conf = HdfsTestUtil.getClientConfiguration(dfsCluster);\n      conf.setBoolean(\"fs.hdfs.impl.disable.cache\", true);\n      fs = FileSystem.get(uri, conf);\n    } catch (IOException e) {\n      throw new RuntimeException(e);\n    } catch (URISyntaxException e) {\n      throw new RuntimeException(e);\n    }\n    \n    System.setProperty(\"solr.ulog.dir\", hdfsUri + \"/solr/shard1\");\n    \n    initCore(\"solrconfig-tlog.xml\",\"schema15.xml\");\n  }\n","realPath":"solr/core/src/test/org/apache/solr/update/TestHdfsUpdateLog.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":46,"status":"M"},{"authorDate":"2019-03-13 01:06:19","commitOrder":12,"curCode":"  public static void beforeClass() throws Exception {\n    dfsCluster = HdfsTestUtil.setupClass(createTempDir().toFile().getAbsolutePath());\n    hdfsUri = HdfsTestUtil.getURI(dfsCluster);\n    \n    try {\n      URI uri = new URI(hdfsUri);\n      Configuration conf = HdfsTestUtil.getClientConfiguration(dfsCluster);\n      fs = FileSystem.get(uri, conf);\n    } catch (IOException | URISyntaxException e) {\n      throw new RuntimeException(e);\n    }\n\n    System.setProperty(\"solr.ulog.dir\", hdfsUri + \"/solr/shard1\");\n    \n    initCore(\"solrconfig-tlog.xml\",\"schema15.xml\");\n  }\n","date":"2019-03-19 03:25:36","endLine":93,"groupId":"102895","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"beforeClass","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/9c/97c03babade9f376b936df8a9814e3135c7ba5.src","preCode":"  public static void beforeClass() throws Exception {\n    dfsCluster = HdfsTestUtil.setupClass(createTempDir().toFile().getAbsolutePath());\n    hdfsUri = HdfsTestUtil.getURI(dfsCluster);\n    \n    try {\n      URI uri = new URI(hdfsUri);\n      Configuration conf = HdfsTestUtil.getClientConfiguration(dfsCluster);\n      conf.setBoolean(\"fs.hdfs.impl.disable.cache\", true);\n      fs = FileSystem.get(uri, conf);\n    } catch (IOException | URISyntaxException e) {\n      throw new RuntimeException(e);\n    }\n\n    System.setProperty(\"solr.ulog.dir\", hdfsUri + \"/solr/shard1\");\n    \n    initCore(\"solrconfig-tlog.xml\",\"schema15.xml\");\n  }\n","realPath":"solr/core/src/test/org/apache/solr/search/TestRecoveryHdfs.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":78,"status":"M"}],"commitId":"cf828163bdfa010c87f1171b6919e444bd0ff01c","commitMessage":"@@@SOLR-13330: Improve HDFS tests\n\nRelated JIRAs:\n* SOLR-11010\n* SOLR-11381\n* SOLR-12040\n* SOLR-13297\n\nChanges:\n* Consolidate hdfs configuration into HdfsTestUtil\n* Ensure socketTimeout long enough for HDFS tests\n* Ensure HdfsTestUtil.getClientConfiguration used in tests\n* Replace deprecated HDFS calls\n* Use try-with-resources to ensure closing of HDFS resources\n\nSigned-off-by: Kevin Risden <krisden@apache.org>\n","date":"2019-03-19 03:25:36","modifiedFileCount":"23","status":"M","submitter":"Kevin Risden"}]
