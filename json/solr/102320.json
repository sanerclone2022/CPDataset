[{"authorTime":"2011-07-10 07:01:53","codes":[{"authorDate":"2011-07-10 07:01:53","commitOrder":1,"curCode":"  public void modifyRequest(ResponseBuilder rb, SearchComponent who, ShardRequest sreq) {\n    if (!rb.doFacets) return;\n\n    if ((sreq.purpose & ShardRequest.PURPOSE_GET_TOP_IDS) != 0) {\n        sreq.purpose |= ShardRequest.PURPOSE_GET_FACETS;\n\n        FacetInfo fi = rb._facetInfo;\n        if (fi == null) {\n          rb._facetInfo = fi = new FacetInfo();\n          fi.parse(rb.req.getParams(), rb);\n          \r\n          \r\n        }\n\n        sreq.params.remove(FacetParams.FACET_MINCOUNT);\n        sreq.params.remove(FacetParams.FACET_OFFSET);\n        sreq.params.remove(FacetParams.FACET_LIMIT);\n\n        for (DistribFieldFacet dff : fi.facets.values()) {\n          String paramStart = \"f.\" + dff.field + '.';\n          sreq.params.remove(paramStart + FacetParams.FACET_MINCOUNT);\n          sreq.params.remove(paramStart + FacetParams.FACET_OFFSET);\n\n          dff.initialLimit = dff.limit <= 0 ? dff.limit : dff.offset + dff.limit;\n\n          if (dff.sort.equals(FacetParams.FACET_SORT_COUNT)) {\n            if (dff.limit > 0) {\n              \r\n              dff.initialLimit = (int)(dff.initialLimit * 1.5) + 10;\n              dff.initialMincount = 0;      \r\n            } else {\n              \r\n              dff.initialMincount = Math.min(dff.minCount, 1);\n            }\n          } else {\n            \r\n            \r\n            \r\n            \r\n            \r\n            \r\n            \r\n            \r\n            \r\n            if (dff.minCount <= 1) {\n              dff.initialMincount = dff.minCount;\n            } else {\n              dff.initialMincount = (int)Math.ceil((double)dff.minCount / rb.slices.length);\n              \r\n            }\n          }\n\n          if (dff.initialMincount != 0) {\n            sreq.params.set(paramStart + FacetParams.FACET_MINCOUNT, dff.initialMincount);\n          }\n\n          \r\n          \r\n          dff.initialLimit = rb.req.getParams().getInt(\"facet.shard.limit\", dff.initialLimit);\n\n          sreq.params.set(paramStart + FacetParams.FACET_LIMIT,  dff.initialLimit);\n      }\n    } else {\n      \r\n      sreq.params.set(FacetParams.FACET, \"false\");\n      \r\n    }\n  }\n","date":"2011-07-10 07:01:53","endLine":269,"groupId":"42240","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"modifyRequest","params":"(ResponseBuilderrb@SearchComponentwho@ShardRequestsreq)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/a3/98967ccdfab2cfb39a57e32ae4a59fc3f2f534.src","preCode":"  public void modifyRequest(ResponseBuilder rb, SearchComponent who, ShardRequest sreq) {\n    if (!rb.doFacets) return;\n\n    if ((sreq.purpose & ShardRequest.PURPOSE_GET_TOP_IDS) != 0) {\n        sreq.purpose |= ShardRequest.PURPOSE_GET_FACETS;\n\n        FacetInfo fi = rb._facetInfo;\n        if (fi == null) {\n          rb._facetInfo = fi = new FacetInfo();\n          fi.parse(rb.req.getParams(), rb);\n          \r\n          \r\n        }\n\n        sreq.params.remove(FacetParams.FACET_MINCOUNT);\n        sreq.params.remove(FacetParams.FACET_OFFSET);\n        sreq.params.remove(FacetParams.FACET_LIMIT);\n\n        for (DistribFieldFacet dff : fi.facets.values()) {\n          String paramStart = \"f.\" + dff.field + '.';\n          sreq.params.remove(paramStart + FacetParams.FACET_MINCOUNT);\n          sreq.params.remove(paramStart + FacetParams.FACET_OFFSET);\n\n          dff.initialLimit = dff.limit <= 0 ? dff.limit : dff.offset + dff.limit;\n\n          if (dff.sort.equals(FacetParams.FACET_SORT_COUNT)) {\n            if (dff.limit > 0) {\n              \r\n              dff.initialLimit = (int)(dff.initialLimit * 1.5) + 10;\n              dff.initialMincount = 0;      \r\n            } else {\n              \r\n              dff.initialMincount = Math.min(dff.minCount, 1);\n            }\n          } else {\n            \r\n            \r\n            \r\n            \r\n            \r\n            \r\n            \r\n            \r\n            \r\n            if (dff.minCount <= 1) {\n              dff.initialMincount = dff.minCount;\n            } else {\n              dff.initialMincount = (int)Math.ceil((double)dff.minCount / rb.slices.length);\n              \r\n            }\n          }\n\n          if (dff.initialMincount != 0) {\n            sreq.params.set(paramStart + FacetParams.FACET_MINCOUNT, dff.initialMincount);\n          }\n\n          \r\n          \r\n          dff.initialLimit = rb.req.getParams().getInt(\"facet.shard.limit\", dff.initialLimit);\n\n          sreq.params.set(paramStart + FacetParams.FACET_LIMIT,  dff.initialLimit);\n      }\n    } else {\n      \r\n      sreq.params.set(FacetParams.FACET, \"false\");\n      \r\n    }\n  }\n","realPath":"solr/core/src/java/org/apache/solr/handler/component/FacetComponent.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":202,"status":"B"},{"authorDate":"2011-07-10 07:01:53","commitOrder":1,"curCode":"  public void modifyRequest(ResponseBuilder rb, SearchComponent who, ShardRequest sreq) {\n    if (!rb.doHighlights) return;\n\n    \r\n    if ((sreq.purpose & ShardRequest.PURPOSE_GET_FIELDS) != 0) {\n        sreq.purpose |= ShardRequest.PURPOSE_GET_HIGHLIGHTS;\n        \r\n        sreq.params.set(HighlightParams.HIGHLIGHT, \"true\");      \n    } else {\n      sreq.params.set(HighlightParams.HIGHLIGHT, \"false\");      \n    }\n  }\n","date":"2011-07-10 07:01:53","endLine":146,"groupId":"62727","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"modifyRequest","params":"(ResponseBuilderrb@SearchComponentwho@ShardRequestsreq)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/f0/55e29faf34377ce2936b35abade46b8315b079.src","preCode":"  public void modifyRequest(ResponseBuilder rb, SearchComponent who, ShardRequest sreq) {\n    if (!rb.doHighlights) return;\n\n    \r\n    if ((sreq.purpose & ShardRequest.PURPOSE_GET_FIELDS) != 0) {\n        sreq.purpose |= ShardRequest.PURPOSE_GET_HIGHLIGHTS;\n        \r\n        sreq.params.set(HighlightParams.HIGHLIGHT, \"true\");      \n    } else {\n      sreq.params.set(HighlightParams.HIGHLIGHT, \"false\");      \n    }\n  }\n","realPath":"solr/core/src/java/org/apache/solr/handler/component/HighlightComponent.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":135,"status":"B"}],"commitId":"429093b236e30940d69edc8869346819c337cd10","commitMessage":"@@@SOLR-2452: Rewrote Solr build system (tighter integration with the Lucene build system) and restructured Solr internal and contrib modules\n\ngit-svn-id: https://svn.apache.org/repos/asf/lucene/dev/trunk@1144761 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2011-07-10 07:01:53","modifiedFileCount":"0","status":"B","submitter":"Steven Rowe"},{"authorTime":"2011-07-10 07:01:53","codes":[{"authorDate":"2014-08-14 02:23:53","commitOrder":2,"curCode":"  public void modifyRequest(ResponseBuilder rb, SearchComponent who,ShardRequest sreq) {\n\n    if (!rb.doFacets) return;\n    \n    if ((sreq.purpose & ShardRequest.PURPOSE_GET_TOP_IDS) != 0) {\n      sreq.purpose |= ShardRequest.PURPOSE_GET_FACETS;\n      \n      FacetInfo fi = rb._facetInfo;\n      if (fi == null) {\n        rb._facetInfo = fi = new FacetInfo();\n        fi.parse(rb.req.getParams(), rb);\n      }\n      \n      modifyRequestForFieldFacets(rb, sreq, fi);\n      \n      modifyRequestForPivotFacets(rb, sreq, fi.pivotFacets);\n      \n      sreq.params.remove(FacetParams.FACET_MINCOUNT);\n      sreq.params.remove(FacetParams.FACET_OFFSET);\n      \n    } else {\n      \r\n      sreq.params.set(FacetParams.FACET, \"false\");\n      \r\n    }\n  }\n","date":"2014-08-14 02:23:53","endLine":313,"groupId":"42898","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"modifyRequest","params":"(ResponseBuilderrb@SearchComponentwho@ShardRequestsreq)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/f3/86bc0d8b6a513931224bcc7906895d52427ccc.src","preCode":"  public void modifyRequest(ResponseBuilder rb, SearchComponent who, ShardRequest sreq) {\n    if (!rb.doFacets) return;\n\n    if ((sreq.purpose & ShardRequest.PURPOSE_GET_TOP_IDS) != 0) {\n        sreq.purpose |= ShardRequest.PURPOSE_GET_FACETS;\n\n        FacetInfo fi = rb._facetInfo;\n        if (fi == null) {\n          rb._facetInfo = fi = new FacetInfo();\n          fi.parse(rb.req.getParams(), rb);\n          \r\n          \r\n        }\n\n        sreq.params.remove(FacetParams.FACET_MINCOUNT);\n        sreq.params.remove(FacetParams.FACET_OFFSET);\n        sreq.params.remove(FacetParams.FACET_LIMIT);\n\n        for (DistribFieldFacet dff : fi.facets.values()) {\n          String paramStart = \"f.\" + dff.field + '.';\n          sreq.params.remove(paramStart + FacetParams.FACET_MINCOUNT);\n          sreq.params.remove(paramStart + FacetParams.FACET_OFFSET);\n\n          dff.initialLimit = dff.limit <= 0 ? dff.limit : dff.offset + dff.limit;\n\n          if (dff.sort.equals(FacetParams.FACET_SORT_COUNT)) {\n            if (dff.limit > 0) {\n              \r\n              dff.initialLimit = (int)(dff.initialLimit * 1.5) + 10;\n              dff.initialMincount = 0;      \r\n            } else {\n              \r\n              dff.initialMincount = Math.min(dff.minCount, 1);\n            }\n          } else {\n            \r\n            \r\n            \r\n            \r\n            \r\n            \r\n            \r\n            \r\n            \r\n            if (dff.minCount <= 1) {\n              dff.initialMincount = dff.minCount;\n            } else {\n              dff.initialMincount = (int)Math.ceil((double)dff.minCount / rb.slices.length);\n              \r\n            }\n          }\n\n          if (dff.initialMincount != 0) {\n            sreq.params.set(paramStart + FacetParams.FACET_MINCOUNT, dff.initialMincount);\n          }\n\n          \r\n          \r\n          dff.initialLimit = rb.req.getParams().getInt(\"facet.shard.limit\", dff.initialLimit);\n\n          sreq.params.set(paramStart + FacetParams.FACET_LIMIT,  dff.initialLimit);\n      }\n    } else {\n      \r\n      sreq.params.set(FacetParams.FACET, \"false\");\n      \r\n    }\n  }\n","realPath":"solr/core/src/java/org/apache/solr/handler/component/FacetComponent.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":288,"status":"M"},{"authorDate":"2011-07-10 07:01:53","commitOrder":2,"curCode":"  public void modifyRequest(ResponseBuilder rb, SearchComponent who, ShardRequest sreq) {\n    if (!rb.doHighlights) return;\n\n    \r\n    if ((sreq.purpose & ShardRequest.PURPOSE_GET_FIELDS) != 0) {\n        sreq.purpose |= ShardRequest.PURPOSE_GET_HIGHLIGHTS;\n        \r\n        sreq.params.set(HighlightParams.HIGHLIGHT, \"true\");      \n    } else {\n      sreq.params.set(HighlightParams.HIGHLIGHT, \"false\");      \n    }\n  }\n","date":"2011-07-10 07:01:53","endLine":146,"groupId":"62727","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"modifyRequest","params":"(ResponseBuilderrb@SearchComponentwho@ShardRequestsreq)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/f0/55e29faf34377ce2936b35abade46b8315b079.src","preCode":"  public void modifyRequest(ResponseBuilder rb, SearchComponent who, ShardRequest sreq) {\n    if (!rb.doHighlights) return;\n\n    \r\n    if ((sreq.purpose & ShardRequest.PURPOSE_GET_FIELDS) != 0) {\n        sreq.purpose |= ShardRequest.PURPOSE_GET_HIGHLIGHTS;\n        \r\n        sreq.params.set(HighlightParams.HIGHLIGHT, \"true\");      \n    } else {\n      sreq.params.set(HighlightParams.HIGHLIGHT, \"false\");      \n    }\n  }\n","realPath":"solr/core/src/java/org/apache/solr/handler/component/HighlightComponent.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":135,"status":"N"}],"commitId":"910d467a93398670c6a16ed79da5672da34514d5","commitMessage":"@@@SOLR-2894: Distributed query support for facet.pivot\n\ngit-svn-id: https://svn.apache.org/repos/asf/lucene/dev/trunk@1617789 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2014-08-14 02:23:53","modifiedFileCount":"11","status":"M","submitter":"Chris M. Hostetter"},{"authorTime":"2011-07-10 07:01:53","codes":[{"authorDate":"2014-09-09 00:34:23","commitOrder":3,"curCode":"  public void modifyRequest(ResponseBuilder rb, SearchComponent who,ShardRequest sreq) {\n\n    if (!rb.doFacets) return;\n    \n    if ((sreq.purpose & ShardRequest.PURPOSE_GET_TOP_IDS) != 0) {\n      sreq.purpose |= ShardRequest.PURPOSE_GET_FACETS;\n      \n      FacetInfo fi = rb._facetInfo;\n      if (fi == null) {\n        rb._facetInfo = fi = new FacetInfo();\n        fi.parse(rb.req.getParams(), rb);\n      }\n      \n      modifyRequestForFieldFacets(rb, sreq, fi);\n\n      modifyRequestForRangeFacets(sreq, fi);\n      \n      modifyRequestForPivotFacets(rb, sreq, fi.pivotFacets);\n      \n      sreq.params.remove(FacetParams.FACET_MINCOUNT);\n      sreq.params.remove(FacetParams.FACET_OFFSET);\n      \n    } else {\n      \r\n      sreq.params.set(FacetParams.FACET, \"false\");\n      \r\n    }\n  }\n","date":"2014-09-09 00:34:23","endLine":330,"groupId":"42240","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"modifyRequest","params":"(ResponseBuilderrb@SearchComponentwho@ShardRequestsreq)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/5a/9b86ec4929312b05ed721e1476290e9811e7b2.src","preCode":"  public void modifyRequest(ResponseBuilder rb, SearchComponent who,ShardRequest sreq) {\n\n    if (!rb.doFacets) return;\n    \n    if ((sreq.purpose & ShardRequest.PURPOSE_GET_TOP_IDS) != 0) {\n      sreq.purpose |= ShardRequest.PURPOSE_GET_FACETS;\n      \n      FacetInfo fi = rb._facetInfo;\n      if (fi == null) {\n        rb._facetInfo = fi = new FacetInfo();\n        fi.parse(rb.req.getParams(), rb);\n      }\n      \n      modifyRequestForFieldFacets(rb, sreq, fi);\n      \n      modifyRequestForPivotFacets(rb, sreq, fi.pivotFacets);\n      \n      sreq.params.remove(FacetParams.FACET_MINCOUNT);\n      sreq.params.remove(FacetParams.FACET_OFFSET);\n      \n    } else {\n      \r\n      sreq.params.set(FacetParams.FACET, \"false\");\n      \r\n    }\n  }\n","realPath":"solr/core/src/java/org/apache/solr/handler/component/FacetComponent.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":303,"status":"M"},{"authorDate":"2011-07-10 07:01:53","commitOrder":3,"curCode":"  public void modifyRequest(ResponseBuilder rb, SearchComponent who, ShardRequest sreq) {\n    if (!rb.doHighlights) return;\n\n    \r\n    if ((sreq.purpose & ShardRequest.PURPOSE_GET_FIELDS) != 0) {\n        sreq.purpose |= ShardRequest.PURPOSE_GET_HIGHLIGHTS;\n        \r\n        sreq.params.set(HighlightParams.HIGHLIGHT, \"true\");      \n    } else {\n      sreq.params.set(HighlightParams.HIGHLIGHT, \"false\");      \n    }\n  }\n","date":"2011-07-10 07:01:53","endLine":146,"groupId":"62727","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"modifyRequest","params":"(ResponseBuilderrb@SearchComponentwho@ShardRequestsreq)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/f0/55e29faf34377ce2936b35abade46b8315b079.src","preCode":"  public void modifyRequest(ResponseBuilder rb, SearchComponent who, ShardRequest sreq) {\n    if (!rb.doHighlights) return;\n\n    \r\n    if ((sreq.purpose & ShardRequest.PURPOSE_GET_FIELDS) != 0) {\n        sreq.purpose |= ShardRequest.PURPOSE_GET_HIGHLIGHTS;\n        \r\n        sreq.params.set(HighlightParams.HIGHLIGHT, \"true\");      \n    } else {\n      sreq.params.set(HighlightParams.HIGHLIGHT, \"false\");      \n    }\n  }\n","realPath":"solr/core/src/java/org/apache/solr/handler/component/HighlightComponent.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":135,"status":"N"}],"commitId":"7fbd55f67949836ca051333937e8b4a7acb231ec","commitMessage":"@@@SOLR-6187: facet.mincount ignored in range faceting using distributed search\n\ngit-svn-id: https://svn.apache.org/repos/asf/lucene/dev/trunk@1623429 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2014-09-09 00:34:23","modifiedFileCount":"2","status":"M","submitter":"Erick Erickson"},{"authorTime":"2011-07-10 07:01:53","codes":[{"authorDate":"2015-02-10 10:31:02","commitOrder":4,"curCode":"  public void modifyRequest(ResponseBuilder rb, SearchComponent who,ShardRequest sreq) {\n\n    if (!rb.doFacets) return;\n    \n    if ((sreq.purpose & ShardRequest.PURPOSE_GET_TOP_IDS) != 0) {\n      sreq.purpose |= ShardRequest.PURPOSE_GET_FACETS;\n      \n      FacetInfo fi = rb._facetInfo;\n      if (fi == null) {\n        rb._facetInfo = fi = new FacetInfo();\n        fi.parse(rb.req.getParams(), rb);\n      }\n      \n      modifyRequestForFieldFacets(rb, sreq, fi);\n\n      modifyRequestForRangeFacets(sreq, fi);\n      \n      modifyRequestForPivotFacets(rb, sreq, fi.pivotFacets);\n\n      SpatialHeatmapFacets.distribModifyRequest(sreq, fi.heatmapFacets);\n      \n      sreq.params.remove(FacetParams.FACET_MINCOUNT);\n      sreq.params.remove(FacetParams.FACET_OFFSET);\n      \n    } else {\n      \r\n      sreq.params.set(FacetParams.FACET, \"false\");\n      \r\n    }\n  }\n","date":"2015-02-10 10:31:02","endLine":332,"groupId":"42240","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"modifyRequest","params":"(ResponseBuilderrb@SearchComponentwho@ShardRequestsreq)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/f8/01b0ad3f560c45dd3a99441d747ec2b010fd45.src","preCode":"  public void modifyRequest(ResponseBuilder rb, SearchComponent who,ShardRequest sreq) {\n\n    if (!rb.doFacets) return;\n    \n    if ((sreq.purpose & ShardRequest.PURPOSE_GET_TOP_IDS) != 0) {\n      sreq.purpose |= ShardRequest.PURPOSE_GET_FACETS;\n      \n      FacetInfo fi = rb._facetInfo;\n      if (fi == null) {\n        rb._facetInfo = fi = new FacetInfo();\n        fi.parse(rb.req.getParams(), rb);\n      }\n      \n      modifyRequestForFieldFacets(rb, sreq, fi);\n\n      modifyRequestForRangeFacets(sreq, fi);\n      \n      modifyRequestForPivotFacets(rb, sreq, fi.pivotFacets);\n      \n      sreq.params.remove(FacetParams.FACET_MINCOUNT);\n      sreq.params.remove(FacetParams.FACET_OFFSET);\n      \n    } else {\n      \r\n      sreq.params.set(FacetParams.FACET, \"false\");\n      \r\n    }\n  }\n","realPath":"solr/core/src/java/org/apache/solr/handler/component/FacetComponent.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":303,"status":"M"},{"authorDate":"2011-07-10 07:01:53","commitOrder":4,"curCode":"  public void modifyRequest(ResponseBuilder rb, SearchComponent who, ShardRequest sreq) {\n    if (!rb.doHighlights) return;\n\n    \r\n    if ((sreq.purpose & ShardRequest.PURPOSE_GET_FIELDS) != 0) {\n        sreq.purpose |= ShardRequest.PURPOSE_GET_HIGHLIGHTS;\n        \r\n        sreq.params.set(HighlightParams.HIGHLIGHT, \"true\");      \n    } else {\n      sreq.params.set(HighlightParams.HIGHLIGHT, \"false\");      \n    }\n  }\n","date":"2011-07-10 07:01:53","endLine":146,"groupId":"62727","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"modifyRequest","params":"(ResponseBuilderrb@SearchComponentwho@ShardRequestsreq)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/f0/55e29faf34377ce2936b35abade46b8315b079.src","preCode":"  public void modifyRequest(ResponseBuilder rb, SearchComponent who, ShardRequest sreq) {\n    if (!rb.doHighlights) return;\n\n    \r\n    if ((sreq.purpose & ShardRequest.PURPOSE_GET_FIELDS) != 0) {\n        sreq.purpose |= ShardRequest.PURPOSE_GET_HIGHLIGHTS;\n        \r\n        sreq.params.set(HighlightParams.HIGHLIGHT, \"true\");      \n    } else {\n      sreq.params.set(HighlightParams.HIGHLIGHT, \"false\");      \n    }\n  }\n","realPath":"solr/core/src/java/org/apache/solr/handler/component/HighlightComponent.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":135,"status":"N"}],"commitId":"ac50da161391474338b3740a0b82548d43410055","commitMessage":"@@@SOLR-7005: New facet.heatmap on spatial RPT fields\n\ngit-svn-id: https://svn.apache.org/repos/asf/lucene/dev/trunk@1658614 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2015-02-10 10:31:02","modifiedFileCount":"5","status":"M","submitter":"David Wayne Smiley"},{"authorTime":"2011-07-10 07:01:53","codes":[{"authorDate":"2015-02-12 17:24:37","commitOrder":5,"curCode":"  public void modifyRequest(ResponseBuilder rb, SearchComponent who,ShardRequest sreq) {\n\n    if (!rb.doFacets) return;\n    \n    if ((sreq.purpose & ShardRequest.PURPOSE_GET_TOP_IDS) != 0) {\n      sreq.purpose |= ShardRequest.PURPOSE_GET_FACETS;\n      \n      FacetInfo fi = rb._facetInfo;\n      if (fi == null) {\n        rb._facetInfo = fi = new FacetInfo();\n        fi.parse(rb.req.getParams(), rb);\n      }\n      \n      modifyRequestForFieldFacets(rb, sreq, fi);\n\n      modifyRequestForRangeFacets(sreq);\n      \n      modifyRequestForPivotFacets(rb, sreq, fi.pivotFacets);\n\n      SpatialHeatmapFacets.distribModifyRequest(sreq, fi.heatmapFacets);\n      \n      sreq.params.remove(FacetParams.FACET_MINCOUNT);\n      sreq.params.remove(FacetParams.FACET_OFFSET);\n      \n    } else {\n      \r\n      sreq.params.set(FacetParams.FACET, \"false\");\n      \r\n    }\n  }\n","date":"2015-02-12 17:24:37","endLine":330,"groupId":"102320","id":9,"instanceNumber":1,"isCurCommit":0,"methodName":"modifyRequest","params":"(ResponseBuilderrb@SearchComponentwho@ShardRequestsreq)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/31/d2710f8cefcefa16ecfbfed190a351a2ec76bb.src","preCode":"  public void modifyRequest(ResponseBuilder rb, SearchComponent who,ShardRequest sreq) {\n\n    if (!rb.doFacets) return;\n    \n    if ((sreq.purpose & ShardRequest.PURPOSE_GET_TOP_IDS) != 0) {\n      sreq.purpose |= ShardRequest.PURPOSE_GET_FACETS;\n      \n      FacetInfo fi = rb._facetInfo;\n      if (fi == null) {\n        rb._facetInfo = fi = new FacetInfo();\n        fi.parse(rb.req.getParams(), rb);\n      }\n      \n      modifyRequestForFieldFacets(rb, sreq, fi);\n\n      modifyRequestForRangeFacets(sreq, fi);\n      \n      modifyRequestForPivotFacets(rb, sreq, fi.pivotFacets);\n\n      SpatialHeatmapFacets.distribModifyRequest(sreq, fi.heatmapFacets);\n      \n      sreq.params.remove(FacetParams.FACET_MINCOUNT);\n      sreq.params.remove(FacetParams.FACET_OFFSET);\n      \n    } else {\n      \r\n      sreq.params.set(FacetParams.FACET, \"false\");\n      \r\n    }\n  }\n","realPath":"solr/core/src/java/org/apache/solr/handler/component/FacetComponent.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":301,"status":"M"},{"authorDate":"2011-07-10 07:01:53","commitOrder":5,"curCode":"  public void modifyRequest(ResponseBuilder rb, SearchComponent who, ShardRequest sreq) {\n    if (!rb.doHighlights) return;\n\n    \r\n    if ((sreq.purpose & ShardRequest.PURPOSE_GET_FIELDS) != 0) {\n        sreq.purpose |= ShardRequest.PURPOSE_GET_HIGHLIGHTS;\n        \r\n        sreq.params.set(HighlightParams.HIGHLIGHT, \"true\");      \n    } else {\n      sreq.params.set(HighlightParams.HIGHLIGHT, \"false\");      \n    }\n  }\n","date":"2011-07-10 07:01:53","endLine":146,"groupId":"102320","id":10,"instanceNumber":2,"isCurCommit":0,"methodName":"modifyRequest","params":"(ResponseBuilderrb@SearchComponentwho@ShardRequestsreq)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-solr-10-0.7/blobInfo/CC_OUT/blobs/f0/55e29faf34377ce2936b35abade46b8315b079.src","preCode":"  public void modifyRequest(ResponseBuilder rb, SearchComponent who, ShardRequest sreq) {\n    if (!rb.doHighlights) return;\n\n    \r\n    if ((sreq.purpose & ShardRequest.PURPOSE_GET_FIELDS) != 0) {\n        sreq.purpose |= ShardRequest.PURPOSE_GET_HIGHLIGHTS;\n        \r\n        sreq.params.set(HighlightParams.HIGHLIGHT, \"true\");      \n    } else {\n      sreq.params.set(HighlightParams.HIGHLIGHT, \"false\");      \n    }\n  }\n","realPath":"solr/core/src/java/org/apache/solr/handler/component/HighlightComponent.java","repoName":"solr","snippetEndLine":0,"snippetStartLine":0,"startLine":135,"status":"N"}],"commitId":"9ace7e16947dc2f6d6071991b18dfbd63b56e184","commitMessage":"@@@SOLR-7103: Remove unused method params in faceting code\n\ngit-svn-id: https://svn.apache.org/repos/asf/lucene/dev/trunk@1659175 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2015-02-12 17:24:37","modifiedFileCount":"3","status":"M","submitter":"Shalin Shekhar Mangar"}]
