[{"authorTime":"2020-10-16 18:20:52","codes":[{"authorDate":"2020-10-16 18:20:52","commitOrder":1,"curCode":"    public Response.ResponseBuilder buildResponse(\n            final IResourceContext resourceContext,\n            final ManagedObject objectAdapter) {\n\n        boolean canAccept = canAccept(resourceContext);\n        if(!canAccept) {\n            return null;\n        }\n\n        final EnumSet<SuppressionType> suppression = suppress(resourceContext);\n        final boolean suppressRO = suppression.contains(SuppressionType.RO);\n\n        final JsonRepresentation rootRepresentation = JsonRepresentation.newMap();\n\n        appendObjectTo(resourceContext, objectAdapter, rootRepresentation, suppression);\n\n        final JsonRepresentation $$roRepresentation;\n        if(!suppressRO) {\n            $$roRepresentation = JsonRepresentation.newMap();\n            rootRepresentation.mapPut(\"$$ro\", $$roRepresentation);\n        } else {\n            $$roRepresentation = null;\n        }\n        final Response.ResponseBuilder responseBuilder =\n                restfulObjectsV1_0.buildResponseTo(\n                        resourceContext, objectAdapter, $$roRepresentation, rootRepresentation);\n\n        responseBuilder.type(CONTENT_TYPE_OAI_V2_OBJECT);\n\n        return responseBuilder(responseBuilder);\n    }\n","date":"2020-10-16 18:20:52","endLine":141,"groupId":"13361","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"buildResponse","params":"(finalIResourceContextresourceContext@finalManagedObjectobjectAdapter)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-isis-10-0.7/blobInfo/CC_OUT/blobs/fc/ae6e818dcd07fce6cba21b6e117a00f096afbf.src","preCode":"    public Response.ResponseBuilder buildResponse(\n            final IResourceContext resourceContext,\n            final ManagedObject objectAdapter) {\n\n        boolean canAccept = canAccept(resourceContext);\n        if(!canAccept) {\n            return null;\n        }\n\n        final EnumSet<SuppressionType> suppression = suppress(resourceContext);\n        final boolean suppressRO = suppression.contains(SuppressionType.RO);\n\n        final JsonRepresentation rootRepresentation = JsonRepresentation.newMap();\n\n        appendObjectTo(resourceContext, objectAdapter, rootRepresentation, suppression);\n\n        final JsonRepresentation $$roRepresentation;\n        if(!suppressRO) {\n            $$roRepresentation = JsonRepresentation.newMap();\n            rootRepresentation.mapPut(\"$$ro\", $$roRepresentation);\n        } else {\n            $$roRepresentation = null;\n        }\n        final Response.ResponseBuilder responseBuilder =\n                restfulObjectsV1_0.buildResponseTo(\n                        resourceContext, objectAdapter, $$roRepresentation, rootRepresentation);\n\n        responseBuilder.type(CONTENT_TYPE_OAI_V2_OBJECT);\n\n        return responseBuilder(responseBuilder);\n    }\n","realPath":"viewers/restfulobjects/rendering/src/main/java/org/apache/isis/viewer/restfulobjects/rendering/service/conneg/ContentNegotiationServiceOrgApacheIsisV2.java","repoName":"isis","snippetEndLine":0,"snippetStartLine":0,"startLine":111,"status":"B"},{"authorDate":"2020-10-16 18:20:52","commitOrder":1,"curCode":"    public Response.ResponseBuilder buildResponse(\n            final IResourceContext resourceContext,\n            final ManagedCollection managedCollection) {\n\n        if(!canAccept(resourceContext)) {\n            return null;\n        }\n        final EnumSet<SuppressionType> suppression = suppress(resourceContext);\n        final boolean suppressRO = suppression.contains(SuppressionType.RO);\n\n        final JsonRepresentation rootRepresentation = JsonRepresentation.newArray();\n\n        appendCollectionTo(resourceContext, managedCollection, rootRepresentation, suppression);\n\n        final JsonRepresentation $$roRepresentation;\n        if(!suppressRO) {\n            \r\n            final JsonRepresentation $$roContainerRepresentation = JsonRepresentation.newMap();\n            rootRepresentation.arrayAdd($$roContainerRepresentation);\n\n            $$roRepresentation = JsonRepresentation.newMap();\n            $$roContainerRepresentation.mapPut(\"$$ro\", $$roRepresentation);\n        } else {\n            $$roRepresentation = null;\n        }\n\n        final Response.ResponseBuilder responseBuilder =\n                restfulObjectsV1_0.buildResponseTo(\n                        resourceContext, managedCollection, $$roRepresentation, rootRepresentation);\n\n        responseBuilder.type(CONTENT_TYPE_OAI_V2_OBJECT_COLLECTION);\n\n        return responseBuilder(responseBuilder);\n    }\n","date":"2020-10-16 18:20:52","endLine":192,"groupId":"5008","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"buildResponse","params":"(finalIResourceContextresourceContext@finalManagedCollectionmanagedCollection)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-isis-10-0.7/blobInfo/CC_OUT/blobs/fc/ae6e818dcd07fce6cba21b6e117a00f096afbf.src","preCode":"    public Response.ResponseBuilder buildResponse(\n            final IResourceContext resourceContext,\n            final ManagedCollection managedCollection) {\n\n        if(!canAccept(resourceContext)) {\n            return null;\n        }\n        final EnumSet<SuppressionType> suppression = suppress(resourceContext);\n        final boolean suppressRO = suppression.contains(SuppressionType.RO);\n\n        final JsonRepresentation rootRepresentation = JsonRepresentation.newArray();\n\n        appendCollectionTo(resourceContext, managedCollection, rootRepresentation, suppression);\n\n        final JsonRepresentation $$roRepresentation;\n        if(!suppressRO) {\n            \r\n            final JsonRepresentation $$roContainerRepresentation = JsonRepresentation.newMap();\n            rootRepresentation.arrayAdd($$roContainerRepresentation);\n\n            $$roRepresentation = JsonRepresentation.newMap();\n            $$roContainerRepresentation.mapPut(\"$$ro\", $$roRepresentation);\n        } else {\n            $$roRepresentation = null;\n        }\n\n        final Response.ResponseBuilder responseBuilder =\n                restfulObjectsV1_0.buildResponseTo(\n                        resourceContext, managedCollection, $$roRepresentation, rootRepresentation);\n\n        responseBuilder.type(CONTENT_TYPE_OAI_V2_OBJECT_COLLECTION);\n\n        return responseBuilder(responseBuilder);\n    }\n","realPath":"viewers/restfulobjects/rendering/src/main/java/org/apache/isis/viewer/restfulobjects/rendering/service/conneg/ContentNegotiationServiceOrgApacheIsisV2.java","repoName":"isis","snippetEndLine":0,"snippetStartLine":0,"startLine":159,"status":"B"}],"commitId":"9fdd36b61941abfd441a332974e93c136aca81f2","commitMessage":"@@@ISIS-2449: new profile: \"urn:org.apache.isis/v2\"\n\nlet RO viewer return HTTP 501 NOT_IMPLEMENTED when client is requesting\n\"urn:org.apache.isis/v1\" also producing a warning log with instructions","date":"2020-10-16 18:20:52","modifiedFileCount":"3","status":"B","submitter":"Andi Huber"},{"authorTime":"2020-10-17 00:22:38","codes":[{"authorDate":"2020-10-17 00:22:38","commitOrder":2,"curCode":"    public Response.ResponseBuilder buildResponse(\n            final IResourceContext resourceContext,\n            final ManagedObject objectAdapter) {\n\n        boolean canAccept = canAccept(resourceContext);\n        if(!canAccept) {\n            return null;\n        }\n\n        final EnumSet<SuppressionType> suppression = suppress(resourceContext);\n        final boolean suppressRO = suppression.contains(SuppressionType.RO);\n\n        final JsonRepresentation rootRepresentation = JsonRepresentation.newMap();\n\n        appendObjectTo(resourceContext, objectAdapter, rootRepresentation, suppression);\n\n        final JsonRepresentation $$roRepresentation;\n        if(!suppressRO) {\n            $$roRepresentation = JsonRepresentation.newMap();\n            rootRepresentation.mapPut(\"$$ro\", $$roRepresentation);\n        } else {\n            $$roRepresentation = null;\n        }\n        final Response.ResponseBuilder responseBuilder =\n                restfulObjectsV1_0.buildResponseTo(\n                        resourceContext, objectAdapter, $$roRepresentation, rootRepresentation);\n\n        responseBuilder.type(\n                RepresentationTypeSimplifiedV2.OBJECT.getContentTypeHeaderValue(ACCEPT_PROFILE));\n\n        return responseBuilder(responseBuilder);\n    }\n","date":"2020-10-17 00:22:38","endLine":116,"groupId":"11457","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"buildResponse","params":"(finalIResourceContextresourceContext@finalManagedObjectobjectAdapter)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-isis-10-0.7/blobInfo/CC_OUT/blobs/79/fffd87b2efe630df6cf6b5daadf42a4f76a2ac.src","preCode":"    public Response.ResponseBuilder buildResponse(\n            final IResourceContext resourceContext,\n            final ManagedObject objectAdapter) {\n\n        boolean canAccept = canAccept(resourceContext);\n        if(!canAccept) {\n            return null;\n        }\n\n        final EnumSet<SuppressionType> suppression = suppress(resourceContext);\n        final boolean suppressRO = suppression.contains(SuppressionType.RO);\n\n        final JsonRepresentation rootRepresentation = JsonRepresentation.newMap();\n\n        appendObjectTo(resourceContext, objectAdapter, rootRepresentation, suppression);\n\n        final JsonRepresentation $$roRepresentation;\n        if(!suppressRO) {\n            $$roRepresentation = JsonRepresentation.newMap();\n            rootRepresentation.mapPut(\"$$ro\", $$roRepresentation);\n        } else {\n            $$roRepresentation = null;\n        }\n        final Response.ResponseBuilder responseBuilder =\n                restfulObjectsV1_0.buildResponseTo(\n                        resourceContext, objectAdapter, $$roRepresentation, rootRepresentation);\n\n        responseBuilder.type(CONTENT_TYPE_OAI_V2_OBJECT);\n\n        return responseBuilder(responseBuilder);\n    }\n","realPath":"viewers/restfulobjects/rendering/src/main/java/org/apache/isis/viewer/restfulobjects/rendering/service/conneg/ContentNegotiationServiceOrgApacheIsisV2.java","repoName":"isis","snippetEndLine":0,"snippetStartLine":0,"startLine":85,"status":"M"},{"authorDate":"2020-10-17 00:22:38","commitOrder":2,"curCode":"    public Response.ResponseBuilder buildResponse(\n            final IResourceContext resourceContext,\n            final ManagedCollection managedCollection) {\n\n        if(!canAccept(resourceContext)) {\n            return null;\n        }\n        final EnumSet<SuppressionType> suppression = suppress(resourceContext);\n        final boolean suppressRO = suppression.contains(SuppressionType.RO);\n\n        final JsonRepresentation rootRepresentation = JsonRepresentation.newArray();\n\n        appendCollectionTo(resourceContext, managedCollection, rootRepresentation, suppression);\n\n        final JsonRepresentation $$roRepresentation;\n        if(!suppressRO) {\n            \r\n            final JsonRepresentation $$roContainerRepresentation = JsonRepresentation.newMap();\n            rootRepresentation.arrayAdd($$roContainerRepresentation);\n\n            $$roRepresentation = JsonRepresentation.newMap();\n            $$roContainerRepresentation.mapPut(\"$$ro\", $$roRepresentation);\n        } else {\n            $$roRepresentation = null;\n        }\n\n        final Response.ResponseBuilder responseBuilder =\n                restfulObjectsV1_0.buildResponseTo(\n                        resourceContext, managedCollection, $$roRepresentation, rootRepresentation);\n\n        responseBuilder.type(\n                RepresentationTypeSimplifiedV2.OBJECT_COLLECTION.getContentTypeHeaderValue(ACCEPT_PROFILE));\n\n        return responseBuilder(responseBuilder);\n    }\n","date":"2020-10-17 00:22:38","endLine":168,"groupId":"11457","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"buildResponse","params":"(finalIResourceContextresourceContext@finalManagedCollectionmanagedCollection)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-isis-10-0.7/blobInfo/CC_OUT/blobs/79/fffd87b2efe630df6cf6b5daadf42a4f76a2ac.src","preCode":"    public Response.ResponseBuilder buildResponse(\n            final IResourceContext resourceContext,\n            final ManagedCollection managedCollection) {\n\n        if(!canAccept(resourceContext)) {\n            return null;\n        }\n        final EnumSet<SuppressionType> suppression = suppress(resourceContext);\n        final boolean suppressRO = suppression.contains(SuppressionType.RO);\n\n        final JsonRepresentation rootRepresentation = JsonRepresentation.newArray();\n\n        appendCollectionTo(resourceContext, managedCollection, rootRepresentation, suppression);\n\n        final JsonRepresentation $$roRepresentation;\n        if(!suppressRO) {\n            \r\n            final JsonRepresentation $$roContainerRepresentation = JsonRepresentation.newMap();\n            rootRepresentation.arrayAdd($$roContainerRepresentation);\n\n            $$roRepresentation = JsonRepresentation.newMap();\n            $$roContainerRepresentation.mapPut(\"$$ro\", $$roRepresentation);\n        } else {\n            $$roRepresentation = null;\n        }\n\n        final Response.ResponseBuilder responseBuilder =\n                restfulObjectsV1_0.buildResponseTo(\n                        resourceContext, managedCollection, $$roRepresentation, rootRepresentation);\n\n        responseBuilder.type(CONTENT_TYPE_OAI_V2_OBJECT_COLLECTION);\n\n        return responseBuilder(responseBuilder);\n    }\n","realPath":"viewers/restfulobjects/rendering/src/main/java/org/apache/isis/viewer/restfulobjects/rendering/service/conneg/ContentNegotiationServiceOrgApacheIsisV2.java","repoName":"isis","snippetEndLine":0,"snippetStartLine":0,"startLine":134,"status":"M"}],"commitId":"0560816e19da93cb10cc3379035a9563c7295697","commitMessage":"@@@ISIS-2449: refactors representation-types into an enum\n\nRepresentationTypeSimplifiedV2.  so can be shared by server and client\nro-client also makes use of the repr-type header value","date":"2020-10-17 00:22:38","modifiedFileCount":"2","status":"M","submitter":"Andi Huber"}]
