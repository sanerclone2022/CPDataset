[{"authorTime":"2020-07-21 12:42:42","codes":[{"authorDate":"2020-07-21 12:42:42","commitOrder":1,"curCode":"    public synchronized boolean finishTabletDownloadTask(DownloadTask task, TFinishTaskRequest request) {\n        if (checkTaskStatus(task, task.getJobId(), request)) {\n            return false;\n        }\n\n        Preconditions.checkState(request.isSetDownloaded_tablet_ids());\n\n        for (Long tabletId : request.getDownloaded_tablet_ids()) {\n            SnapshotInfo info = snapshotInfos.get(tabletId, task.getBackendId());\n            if (info == null) {\n                LOG.error(\"failed to find snapshot infos of tablet {} in be {}, {}\",\n                          tabletId, task.getBackendId(), this);\n                return false;\n            }\n        }\n\n        taskProgress.remove(task.getSignature());\n        Long beId = unfinishedSignatureToId.remove(task.getSignature());\n        if (beId == null || beId != task.getBackendId()) {\n            LOG.error(\"invalid download task: {}. {}\", task, this);\n            return false;\n        }\n\n        taskErrMsg.remove(task.getSignature());\n        return true;\n    }\n","date":"2020-07-21 12:42:42","endLine":229,"groupId":"7309","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"finishTabletDownloadTask","params":"(DownloadTasktask@TFinishTaskRequestrequest)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/97/d2e99bd83d0e785e6f6a408edc5f58688a4e34.src","preCode":"    public synchronized boolean finishTabletDownloadTask(DownloadTask task, TFinishTaskRequest request) {\n        if (checkTaskStatus(task, task.getJobId(), request)) {\n            return false;\n        }\n\n        Preconditions.checkState(request.isSetDownloaded_tablet_ids());\n\n        for (Long tabletId : request.getDownloaded_tablet_ids()) {\n            SnapshotInfo info = snapshotInfos.get(tabletId, task.getBackendId());\n            if (info == null) {\n                LOG.error(\"failed to find snapshot infos of tablet {} in be {}, {}\",\n                          tabletId, task.getBackendId(), this);\n                return false;\n            }\n        }\n\n        taskProgress.remove(task.getSignature());\n        Long beId = unfinishedSignatureToId.remove(task.getSignature());\n        if (beId == null || beId != task.getBackendId()) {\n            LOG.error(\"invalid download task: {}. {}\", task, this);\n            return false;\n        }\n\n        taskErrMsg.remove(task.getSignature());\n        return true;\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/backup/RestoreJob.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":204,"status":"B"},{"authorDate":"2020-07-21 12:42:42","commitOrder":1,"curCode":"    public synchronized boolean finishDirMoveTask(DirMoveTask task, TFinishTaskRequest request) {\n        if (checkTaskStatus(task, task.getJobId(), request)) {\n            return false;\n        }\n\n        taskProgress.remove(task.getSignature());\n        Long tabletId = unfinishedSignatureToId.remove(task.getSignature());\n        if (tabletId == null || tabletId != task.getTabletId()) {\n            LOG.error(\"invalid dir move task: {}. {}\", task, this);\n            return false;\n        }\n\n        taskErrMsg.remove(task.getSignature());\n        return true;\n    }\n","date":"2020-07-21 12:42:42","endLine":245,"groupId":"7309","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"finishDirMoveTask","params":"(DirMoveTasktask@TFinishTaskRequestrequest)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/97/d2e99bd83d0e785e6f6a408edc5f58688a4e34.src","preCode":"    public synchronized boolean finishDirMoveTask(DirMoveTask task, TFinishTaskRequest request) {\n        if (checkTaskStatus(task, task.getJobId(), request)) {\n            return false;\n        }\n\n        taskProgress.remove(task.getSignature());\n        Long tabletId = unfinishedSignatureToId.remove(task.getSignature());\n        if (tabletId == null || tabletId != task.getTabletId()) {\n            LOG.error(\"invalid dir move task: {}. {}\", task, this);\n            return false;\n        }\n\n        taskErrMsg.remove(task.getSignature());\n        return true;\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/backup/RestoreJob.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":231,"status":"B"}],"commitId":"ad17afef9139a9aeedeb2e92638e95886d515f14","commitMessage":"@@@[CodeRefactor] #4098 Make FE multi module (#4099)\n\nThis PR change the FE code structure to maven multi module structure. \nSee ISSUE: #4098 for more info.  such as How to resolve conflicts.","date":"2020-07-21 12:42:42","modifiedFileCount":"0","status":"B","submitter":"Mingyu Chen"},{"authorTime":"2020-07-21 12:42:42","codes":[{"authorDate":"2020-08-28 13:28:11","commitOrder":2,"curCode":"    public synchronized boolean finishTabletDownloadTask(DownloadTask task, TFinishTaskRequest request) {\n        if (checkTaskStatus(task, task.getJobId(), request)) {\n            return false;\n        }\n\n        Preconditions.checkState(request.isSetDownloadedTabletIds());\n\n        for (Long tabletId : request.getDownloadedTabletIds()) {\n            SnapshotInfo info = snapshotInfos.get(tabletId, task.getBackendId());\n            if (info == null) {\n                LOG.error(\"failed to find snapshot infos of tablet {} in be {}, {}\",\n                          tabletId, task.getBackendId(), this);\n                return false;\n            }\n        }\n\n        taskProgress.remove(task.getSignature());\n        Long beId = unfinishedSignatureToId.remove(task.getSignature());\n        if (beId == null || beId != task.getBackendId()) {\n            LOG.error(\"invalid download task: {}. {}\", task, this);\n            return false;\n        }\n\n        taskErrMsg.remove(task.getSignature());\n        return true;\n    }\n","date":"2020-08-28 13:28:11","endLine":229,"groupId":"7309","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"finishTabletDownloadTask","params":"(DownloadTasktask@TFinishTaskRequestrequest)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/8b/79bf065c3759d395cf0558996053b8c736f824.src","preCode":"    public synchronized boolean finishTabletDownloadTask(DownloadTask task, TFinishTaskRequest request) {\n        if (checkTaskStatus(task, task.getJobId(), request)) {\n            return false;\n        }\n\n        Preconditions.checkState(request.isSetDownloaded_tablet_ids());\n\n        for (Long tabletId : request.getDownloaded_tablet_ids()) {\n            SnapshotInfo info = snapshotInfos.get(tabletId, task.getBackendId());\n            if (info == null) {\n                LOG.error(\"failed to find snapshot infos of tablet {} in be {}, {}\",\n                          tabletId, task.getBackendId(), this);\n                return false;\n            }\n        }\n\n        taskProgress.remove(task.getSignature());\n        Long beId = unfinishedSignatureToId.remove(task.getSignature());\n        if (beId == null || beId != task.getBackendId()) {\n            LOG.error(\"invalid download task: {}. {}\", task, this);\n            return false;\n        }\n\n        taskErrMsg.remove(task.getSignature());\n        return true;\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/backup/RestoreJob.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":204,"status":"M"},{"authorDate":"2020-07-21 12:42:42","commitOrder":2,"curCode":"    public synchronized boolean finishDirMoveTask(DirMoveTask task, TFinishTaskRequest request) {\n        if (checkTaskStatus(task, task.getJobId(), request)) {\n            return false;\n        }\n\n        taskProgress.remove(task.getSignature());\n        Long tabletId = unfinishedSignatureToId.remove(task.getSignature());\n        if (tabletId == null || tabletId != task.getTabletId()) {\n            LOG.error(\"invalid dir move task: {}. {}\", task, this);\n            return false;\n        }\n\n        taskErrMsg.remove(task.getSignature());\n        return true;\n    }\n","date":"2020-07-21 12:42:42","endLine":245,"groupId":"7309","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"finishDirMoveTask","params":"(DirMoveTasktask@TFinishTaskRequestrequest)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/97/d2e99bd83d0e785e6f6a408edc5f58688a4e34.src","preCode":"    public synchronized boolean finishDirMoveTask(DirMoveTask task, TFinishTaskRequest request) {\n        if (checkTaskStatus(task, task.getJobId(), request)) {\n            return false;\n        }\n\n        taskProgress.remove(task.getSignature());\n        Long tabletId = unfinishedSignatureToId.remove(task.getSignature());\n        if (tabletId == null || tabletId != task.getTabletId()) {\n            LOG.error(\"invalid dir move task: {}. {}\", task, this);\n            return false;\n        }\n\n        taskErrMsg.remove(task.getSignature());\n        return true;\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/backup/RestoreJob.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":231,"status":"N"}],"commitId":"3b7614e174d3999e18056d6d741641d664c52908","commitMessage":"@@@[Refactor] Use camelCase in thrift generated java sources (#4443)\n\nUse camelCase in thrift generated java sources to make us fe's code style is more unified","date":"2020-08-28 13:28:11","modifiedFileCount":"109","status":"M","submitter":"Zhengguo Yang"},{"authorTime":"2021-02-07 22:39:45","codes":[{"authorDate":"2021-02-07 22:39:45","commitOrder":3,"curCode":"    public synchronized boolean finishTabletDownloadTask(DownloadTask task, TFinishTaskRequest request) {\n        if (checkTaskStatus(task, task.getJobId(), request)) {\n            return false;\n        }\n\n        Preconditions.checkState(request.isSetDownloadedTabletIds());\n\n        for (Long tabletId : request.getDownloadedTabletIds()) {\n            SnapshotInfo info = snapshotInfos.get(tabletId, task.getBackendId());\n            if (info == null) {\n                LOG.error(\"failed to find snapshot infos of tablet {} in be {}, {}\",\n                          tabletId, task.getBackendId(), this);\n                return false;\n            }\n        }\n\n        taskProgress.remove(task.getSignature());\n        Long beId = unfinishedSignatureToId.remove(task.getSignature());\n        if (beId == null || beId != task.getBackendId()) {\n            LOG.warn(\"invalid download task: {}. {}\", task, this);\n            return false;\n        }\n\n        taskErrMsg.remove(task.getSignature());\n        return true;\n    }\n","date":"2021-02-07 22:39:45","endLine":240,"groupId":"7309","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"finishTabletDownloadTask","params":"(DownloadTasktask@TFinishTaskRequestrequest)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/71/4d215cfccc4539e7c21ef2be9246eb55ff805f.src","preCode":"    public synchronized boolean finishTabletDownloadTask(DownloadTask task, TFinishTaskRequest request) {\n        if (checkTaskStatus(task, task.getJobId(), request)) {\n            return false;\n        }\n\n        Preconditions.checkState(request.isSetDownloadedTabletIds());\n\n        for (Long tabletId : request.getDownloadedTabletIds()) {\n            SnapshotInfo info = snapshotInfos.get(tabletId, task.getBackendId());\n            if (info == null) {\n                LOG.error(\"failed to find snapshot infos of tablet {} in be {}, {}\",\n                          tabletId, task.getBackendId(), this);\n                return false;\n            }\n        }\n\n        taskProgress.remove(task.getSignature());\n        Long beId = unfinishedSignatureToId.remove(task.getSignature());\n        if (beId == null || beId != task.getBackendId()) {\n            LOG.error(\"invalid download task: {}. {}\", task, this);\n            return false;\n        }\n\n        taskErrMsg.remove(task.getSignature());\n        return true;\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/backup/RestoreJob.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":215,"status":"M"},{"authorDate":"2021-02-07 22:39:45","commitOrder":3,"curCode":"    public synchronized boolean finishDirMoveTask(DirMoveTask task, TFinishTaskRequest request) {\n        if (checkTaskStatus(task, task.getJobId(), request)) {\n            return false;\n        }\n\n        taskProgress.remove(task.getSignature());\n        Long tabletId = unfinishedSignatureToId.remove(task.getSignature());\n        if (tabletId == null || tabletId != task.getTabletId()) {\n            LOG.warn(\"invalid dir move task: {}. {}\", task, this);\n            return false;\n        }\n\n        taskErrMsg.remove(task.getSignature());\n        return true;\n    }\n","date":"2021-02-07 22:39:45","endLine":256,"groupId":"7309","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"finishDirMoveTask","params":"(DirMoveTasktask@TFinishTaskRequestrequest)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/71/4d215cfccc4539e7c21ef2be9246eb55ff805f.src","preCode":"    public synchronized boolean finishDirMoveTask(DirMoveTask task, TFinishTaskRequest request) {\n        if (checkTaskStatus(task, task.getJobId(), request)) {\n            return false;\n        }\n\n        taskProgress.remove(task.getSignature());\n        Long tabletId = unfinishedSignatureToId.remove(task.getSignature());\n        if (tabletId == null || tabletId != task.getTabletId()) {\n            LOG.error(\"invalid dir move task: {}. {}\", task, this);\n            return false;\n        }\n\n        taskErrMsg.remove(task.getSignature());\n        return true;\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/backup/RestoreJob.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":242,"status":"M"}],"commitId":"f77b8ce8e4ca8cfc2edc25d6e11d57f49d5b0636","commitMessage":"@@@[UT] Modify to avoid some UT failure accidentally (#5359)\n\nAfter an Alter job finished.  the job's state is FINISHED.  but table's state\nmay not be NORMAL for a while.\nWe need to make sure that table's state become NORMAL to continue next UT.","date":"2021-02-07 22:39:45","modifiedFileCount":"5","status":"M","submitter":"Mingyu Chen"},{"authorTime":"2021-02-07 22:39:45","codes":[{"authorDate":"2021-02-07 22:41:13","commitOrder":4,"curCode":"    public synchronized boolean finishTabletDownloadTask(DownloadTask task, TFinishTaskRequest request) {\n        if (checkTaskStatus(task, task.getJobId(), request)) {\n            return false;\n        }\n\n        Preconditions.checkState(request.isSetDownloadedTabletIds());\n\n        for (Long tabletId : request.getDownloadedTabletIds()) {\n            SnapshotInfo info = snapshotInfos.get(tabletId, task.getBackendId());\n            if (info == null) {\n                LOG.warn(\"failed to find snapshot infos of tablet {} in be {}, {}\",\n                          tabletId, task.getBackendId(), this);\n                return false;\n            }\n        }\n\n        taskProgress.remove(task.getSignature());\n        Long beId = unfinishedSignatureToId.remove(task.getSignature());\n        if (beId == null || beId != task.getBackendId()) {\n            LOG.warn(\"invalid download task: {}. {}\", task, this);\n            return false;\n        }\n\n        taskErrMsg.remove(task.getSignature());\n        return true;\n    }\n","date":"2021-02-07 22:41:13","endLine":240,"groupId":"10947","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"finishTabletDownloadTask","params":"(DownloadTasktask@TFinishTaskRequestrequest)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/12/d4ef1d85ef15f21542f7c74472444fb4acd1fb.src","preCode":"    public synchronized boolean finishTabletDownloadTask(DownloadTask task, TFinishTaskRequest request) {\n        if (checkTaskStatus(task, task.getJobId(), request)) {\n            return false;\n        }\n\n        Preconditions.checkState(request.isSetDownloadedTabletIds());\n\n        for (Long tabletId : request.getDownloadedTabletIds()) {\n            SnapshotInfo info = snapshotInfos.get(tabletId, task.getBackendId());\n            if (info == null) {\n                LOG.error(\"failed to find snapshot infos of tablet {} in be {}, {}\",\n                          tabletId, task.getBackendId(), this);\n                return false;\n            }\n        }\n\n        taskProgress.remove(task.getSignature());\n        Long beId = unfinishedSignatureToId.remove(task.getSignature());\n        if (beId == null || beId != task.getBackendId()) {\n            LOG.warn(\"invalid download task: {}. {}\", task, this);\n            return false;\n        }\n\n        taskErrMsg.remove(task.getSignature());\n        return true;\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/backup/RestoreJob.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":215,"status":"M"},{"authorDate":"2021-02-07 22:39:45","commitOrder":4,"curCode":"    public synchronized boolean finishDirMoveTask(DirMoveTask task, TFinishTaskRequest request) {\n        if (checkTaskStatus(task, task.getJobId(), request)) {\n            return false;\n        }\n\n        taskProgress.remove(task.getSignature());\n        Long tabletId = unfinishedSignatureToId.remove(task.getSignature());\n        if (tabletId == null || tabletId != task.getTabletId()) {\n            LOG.warn(\"invalid dir move task: {}. {}\", task, this);\n            return false;\n        }\n\n        taskErrMsg.remove(task.getSignature());\n        return true;\n    }\n","date":"2021-02-07 22:39:45","endLine":256,"groupId":"10947","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"finishDirMoveTask","params":"(DirMoveTasktask@TFinishTaskRequestrequest)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/71/4d215cfccc4539e7c21ef2be9246eb55ff805f.src","preCode":"    public synchronized boolean finishDirMoveTask(DirMoveTask task, TFinishTaskRequest request) {\n        if (checkTaskStatus(task, task.getJobId(), request)) {\n            return false;\n        }\n\n        taskProgress.remove(task.getSignature());\n        Long tabletId = unfinishedSignatureToId.remove(task.getSignature());\n        if (tabletId == null || tabletId != task.getTabletId()) {\n            LOG.warn(\"invalid dir move task: {}. {}\", task, this);\n            return false;\n        }\n\n        taskErrMsg.remove(task.getSignature());\n        return true;\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/backup/RestoreJob.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":242,"status":"N"}],"commitId":"2ec55bf19e7bef461e769dd20196048408142d37","commitMessage":"@@@[LOG] Change some log level (#5361)\n\nChange some log level from error to warn","date":"2021-02-07 22:41:13","modifiedFileCount":"1","status":"M","submitter":"xxiao2018"}]
