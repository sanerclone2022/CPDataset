[{"authorTime":"2020-07-21 12:42:42","codes":[{"authorDate":"2020-07-21 12:42:42","commitOrder":1,"curCode":"    public boolean createTableWithLock(Table table, boolean isReplay, boolean setIfNotExist) {\n        boolean result = true;\n        writeLock();\n        try {\n            String tableName = table.getName();\n            if (nameToTable.containsKey(tableName)) {\n                result = setIfNotExist;\n            } else {\n                idToTable.put(table.getId(), table);\n                nameToTable.put(table.getName(), table);\n\n                if (!isReplay) {\n                    \r\n                    CreateTableInfo info = new CreateTableInfo(fullQualifiedName, table);\n                    Catalog.getCurrentCatalog().getEditLog().logCreateTable(info);\n                }\n                if (table.getType() == TableType.ELASTICSEARCH) {\n                    Catalog.getCurrentCatalog().getEsRepository().registerTable((EsTable)table);\n                }\n            }\n            return result;\n        } finally {\n            writeUnlock();\n        }\n    }\n","date":"2020-07-21 12:42:42","endLine":306,"groupId":"3968","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"createTableWithLock","params":"(Tabletable@booleanisReplay@booleansetIfNotExist)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/3c/0fb15916850ac50b416ba47b0cdd4e39674123.src","preCode":"    public boolean createTableWithLock(Table table, boolean isReplay, boolean setIfNotExist) {\n        boolean result = true;\n        writeLock();\n        try {\n            String tableName = table.getName();\n            if (nameToTable.containsKey(tableName)) {\n                result = setIfNotExist;\n            } else {\n                idToTable.put(table.getId(), table);\n                nameToTable.put(table.getName(), table);\n\n                if (!isReplay) {\n                    \r\n                    CreateTableInfo info = new CreateTableInfo(fullQualifiedName, table);\n                    Catalog.getCurrentCatalog().getEditLog().logCreateTable(info);\n                }\n                if (table.getType() == TableType.ELASTICSEARCH) {\n                    Catalog.getCurrentCatalog().getEsRepository().registerTable((EsTable)table);\n                }\n            }\n            return result;\n        } finally {\n            writeUnlock();\n        }\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/catalog/Database.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":282,"status":"B"},{"authorDate":"2020-07-21 12:42:42","commitOrder":1,"curCode":"    public boolean createTable(Table table) {\n        boolean result = true;\n        String tableName = table.getName();\n        if (nameToTable.containsKey(tableName)) {\n            result = false;\n        } else {\n            idToTable.put(table.getId(), table);\n            nameToTable.put(table.getName(), table);\n        }\n        return result;\n    }\n","date":"2020-07-21 12:42:42","endLine":318,"groupId":"6655","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"createTable","params":"(Tabletable)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/3c/0fb15916850ac50b416ba47b0cdd4e39674123.src","preCode":"    public boolean createTable(Table table) {\n        boolean result = true;\n        String tableName = table.getName();\n        if (nameToTable.containsKey(tableName)) {\n            result = false;\n        } else {\n            idToTable.put(table.getId(), table);\n            nameToTable.put(table.getName(), table);\n        }\n        return result;\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/catalog/Database.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":308,"status":"B"}],"commitId":"ad17afef9139a9aeedeb2e92638e95886d515f14","commitMessage":"@@@[CodeRefactor] #4098 Make FE multi module (#4099)\n\nThis PR change the FE code structure to maven multi module structure. \nSee ISSUE: #4098 for more info.  such as How to resolve conflicts.","date":"2020-07-21 12:42:42","modifiedFileCount":"0","status":"B","submitter":"Mingyu Chen"},{"authorTime":"2020-07-21 12:42:42","codes":[{"authorDate":"2021-03-12 14:24:34","commitOrder":2,"curCode":"    public Pair<Boolean, Boolean> createTableWithLock(Table table, boolean isReplay, boolean setIfNotExist) {\n        boolean result = true;\n        \r\n        \r\n        boolean isTableExist = false;\n        writeLock();\n        try {\n            String tableName = table.getName();\n            if (nameToTable.containsKey(tableName)) {\n                result = setIfNotExist;\n                isTableExist = true;\n            } else {\n                idToTable.put(table.getId(), table);\n                nameToTable.put(table.getName(), table);\n\n                if (!isReplay) {\n                    \r\n                    CreateTableInfo info = new CreateTableInfo(fullQualifiedName, table);\n                    Catalog.getCurrentCatalog().getEditLog().logCreateTable(info);\n                }\n                if (table.getType() == TableType.ELASTICSEARCH) {\n                    Catalog.getCurrentCatalog().getEsRepository().registerTable((EsTable)table);\n                }\n            }\n            return Pair.create(result, isTableExist);\n        } finally {\n            writeUnlock();\n        }\n    }\n","date":"2021-03-12 14:24:34","endLine":312,"groupId":"6654","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"createTableWithLock","params":"(Tabletable@booleanisReplay@booleansetIfNotExist)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/c1/d6f975d36c59c6af5721f0f51e08b17763724a.src","preCode":"    public boolean createTableWithLock(Table table, boolean isReplay, boolean setIfNotExist) {\n        boolean result = true;\n        writeLock();\n        try {\n            String tableName = table.getName();\n            if (nameToTable.containsKey(tableName)) {\n                result = setIfNotExist;\n            } else {\n                idToTable.put(table.getId(), table);\n                nameToTable.put(table.getName(), table);\n\n                if (!isReplay) {\n                    \r\n                    CreateTableInfo info = new CreateTableInfo(fullQualifiedName, table);\n                    Catalog.getCurrentCatalog().getEditLog().logCreateTable(info);\n                }\n                if (table.getType() == TableType.ELASTICSEARCH) {\n                    Catalog.getCurrentCatalog().getEsRepository().registerTable((EsTable)table);\n                }\n            }\n            return result;\n        } finally {\n            writeUnlock();\n        }\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/catalog/Database.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":284,"status":"M"},{"authorDate":"2020-07-21 12:42:42","commitOrder":2,"curCode":"    public boolean createTable(Table table) {\n        boolean result = true;\n        String tableName = table.getName();\n        if (nameToTable.containsKey(tableName)) {\n            result = false;\n        } else {\n            idToTable.put(table.getId(), table);\n            nameToTable.put(table.getName(), table);\n        }\n        return result;\n    }\n","date":"2020-07-21 12:42:42","endLine":318,"groupId":"6655","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"createTable","params":"(Tabletable)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/3c/0fb15916850ac50b416ba47b0cdd4e39674123.src","preCode":"    public boolean createTable(Table table) {\n        boolean result = true;\n        String tableName = table.getName();\n        if (nameToTable.containsKey(tableName)) {\n            result = false;\n        } else {\n            idToTable.put(table.getId(), table);\n            nameToTable.put(table.getName(), table);\n        }\n        return result;\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/catalog/Database.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":308,"status":"N"}],"commitId":"543ed46bc3d65bc9c050dd346ff72f5cad9e27ad","commitMessage":"@@@(#5390)fix NPE when replay colocate group (#5391)\n\n* (#5390)fix NPE when replay colocate group\n\n* remove table id from colocate group when duplicate create table\n\n* remove tablet id when duplicate create table. just like ddlexception\n\n* add ut","date":"2021-03-12 14:24:34","modifiedFileCount":"7","status":"M","submitter":"wangbo"},{"authorTime":"2021-08-25 22:34:45","codes":[{"authorDate":"2021-08-25 22:34:45","commitOrder":3,"curCode":"    public Pair<Boolean, Boolean> createTableWithLock(Table table, boolean isReplay, boolean setIfNotExist) {\n        boolean result = true;\n        \r\n        \r\n        boolean isTableExist = false;\n        writeLock();\n        try {\n            String tableName = table.getName();\n            if (Catalog.isStoredTableNamesLowerCase()) {\n                tableName = tableName.toLowerCase();\n            }\n            if (isTableExist(tableName)) {\n                result = setIfNotExist;\n                isTableExist = true;\n            } else {\n                idToTable.put(table.getId(), table);\n                nameToTable.put(table.getName(), table);\n                lowerCaseToTableName.put(tableName.toLowerCase(), tableName);\n\n                if (!isReplay) {\n                    \r\n                    CreateTableInfo info = new CreateTableInfo(fullQualifiedName, table);\n                    Catalog.getCurrentCatalog().getEditLog().logCreateTable(info);\n                }\n                if (table.getType() == TableType.ELASTICSEARCH) {\n                    Catalog.getCurrentCatalog().getEsRepository().registerTable((EsTable) table);\n                }\n            }\n            return Pair.create(result, isTableExist);\n        } finally {\n            writeUnlock();\n        }\n    }\n","date":"2021-08-25 22:34:45","endLine":332,"groupId":"101397","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"createTableWithLock","params":"(Tabletable@booleanisReplay@booleansetIfNotExist)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/c3/ad35a91c5bc5eebc1df75aba795981d6c41eec.src","preCode":"    public Pair<Boolean, Boolean> createTableWithLock(Table table, boolean isReplay, boolean setIfNotExist) {\n        boolean result = true;\n        \r\n        \r\n        boolean isTableExist = false;\n        writeLock();\n        try {\n            String tableName = table.getName();\n            if (nameToTable.containsKey(tableName)) {\n                result = setIfNotExist;\n                isTableExist = true;\n            } else {\n                idToTable.put(table.getId(), table);\n                nameToTable.put(table.getName(), table);\n\n                if (!isReplay) {\n                    \r\n                    CreateTableInfo info = new CreateTableInfo(fullQualifiedName, table);\n                    Catalog.getCurrentCatalog().getEditLog().logCreateTable(info);\n                }\n                if (table.getType() == TableType.ELASTICSEARCH) {\n                    Catalog.getCurrentCatalog().getEsRepository().registerTable((EsTable)table);\n                }\n            }\n            return Pair.create(result, isTableExist);\n        } finally {\n            writeUnlock();\n        }\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/catalog/Database.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":300,"status":"M"},{"authorDate":"2021-08-25 22:34:45","commitOrder":3,"curCode":"    public boolean createTable(Table table) {\n        boolean result = true;\n        String tableName = table.getName();\n        if (Catalog.isStoredTableNamesLowerCase()) {\n            tableName = tableName.toLowerCase();\n        }\n        if (isTableExist(tableName)) {\n            result = false;\n        } else {\n            idToTable.put(table.getId(), table);\n            nameToTable.put(table.getName(), table);\n            lowerCaseToTableName.put(tableName.toLowerCase(), tableName);\n        }\n        return result;\n    }\n","date":"2021-08-25 22:34:45","endLine":348,"groupId":"101397","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"createTable","params":"(Tabletable)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/c3/ad35a91c5bc5eebc1df75aba795981d6c41eec.src","preCode":"    public boolean createTable(Table table) {\n        boolean result = true;\n        String tableName = table.getName();\n        if (nameToTable.containsKey(tableName)) {\n            result = false;\n        } else {\n            idToTable.put(table.getId(), table);\n            nameToTable.put(table.getName(), table);\n        }\n        return result;\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/catalog/Database.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":334,"status":"M"}],"commitId":"92e50504e5b299200408f916e8742dc8772c0263","commitMessage":"@@@[Feature] Supports case-insensitive table names. (#6403)\n\nImplement the lower_case_table_names variable of mysql. The value meaning is as follows:\n0: the table names are case-sensitive.\n1: table names are stored in lowercase and comparisons are not case sensitive.\n2: table names are stored as given but compared case-insensitively.","date":"2021-08-25 22:34:45","modifiedFileCount":"6","status":"M","submitter":"luozenglin"}]
