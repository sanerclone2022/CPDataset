[{"authorTime":"2020-09-16 15:02:59","codes":[{"authorDate":"2020-09-16 15:02:59","commitOrder":1,"curCode":"    public Object multi_desc(\n            @PathVariable(value = DB_KEY) final String dbName,\n            HttpServletRequest request, HttpServletResponse response)\n            throws DdlException {\n        executeCheckPassword(request, response);\n\n        execEnv = ExecuteEnv.getInstance();\n        String label = request.getParameter(LABEL_KEY);\n        if (Strings.isNullOrEmpty(label)) {\n            return ResponseEntityBuilder.badRequest(\"No label selected\");\n        }\n\n        String fullDbName = getFullDbName(dbName);\n        checkDbAuth(ConnectContext.get().getCurrentUserIdentity(), fullDbName, PrivPredicate.LOAD);\n\n        \r\n        RedirectView redirectView = redirectToMaster(request, response);\n        if (redirectView != null) {\n            return redirectView;\n        }\n\n        execEnv = ExecuteEnv.getInstance();\n        final List<String> labels = Lists.newArrayList();\n        execEnv.getMultiLoadMgr().desc(fullDbName, label, labels);\n        return ResponseEntityBuilder.ok(labels);\n    }\n","date":"2020-09-16 15:02:59","endLine":76,"groupId":"810","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"multi_desc","params":"(@PathVariable(value=DB_KEY)finalStringdbName@HttpServletRequestrequest@HttpServletResponseresponse)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/dd/0a99387cdb1e1f57e16d98e91f4f77e9c97cab.src","preCode":"    public Object multi_desc(\n            @PathVariable(value = DB_KEY) final String dbName,\n            HttpServletRequest request, HttpServletResponse response)\n            throws DdlException {\n        executeCheckPassword(request, response);\n\n        execEnv = ExecuteEnv.getInstance();\n        String label = request.getParameter(LABEL_KEY);\n        if (Strings.isNullOrEmpty(label)) {\n            return ResponseEntityBuilder.badRequest(\"No label selected\");\n        }\n\n        String fullDbName = getFullDbName(dbName);\n        checkDbAuth(ConnectContext.get().getCurrentUserIdentity(), fullDbName, PrivPredicate.LOAD);\n\n        \r\n        RedirectView redirectView = redirectToMaster(request, response);\n        if (redirectView != null) {\n            return redirectView;\n        }\n\n        execEnv = ExecuteEnv.getInstance();\n        final List<String> labels = Lists.newArrayList();\n        execEnv.getMultiLoadMgr().desc(fullDbName, label, labels);\n        return ResponseEntityBuilder.ok(labels);\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/httpv2/rest/MultiAction.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":51,"status":"B"},{"authorDate":"2020-09-16 15:02:59","commitOrder":1,"curCode":"    public Object multi_abort(\n            @PathVariable(value = DB_KEY) final String dbName,\n            HttpServletRequest request, HttpServletResponse response)\n            throws DdlException {\n        executeCheckPassword(request, response);\n        execEnv = ExecuteEnv.getInstance();\n\n        String label = request.getParameter(LABEL_KEY);\n        if (Strings.isNullOrEmpty(label)) {\n            return ResponseEntityBuilder.badRequest(\"No label selected\");\n        }\n\n        String fullDbName = getFullDbName(dbName);\n        checkDbAuth(ConnectContext.get().getCurrentUserIdentity(), fullDbName, PrivPredicate.LOAD);\n\n        \r\n\n        RedirectView redirectView = redirectToMaster(request, response);\n        if (redirectView != null) {\n            return redirectView;\n        }\n\n        execEnv.getMultiLoadMgr().abort(fullDbName, label);\n        return ResponseEntityBuilder.ok();\n    }\n","date":"2020-09-16 15:02:59","endLine":221,"groupId":"810","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"multi_abort","params":"(@PathVariable(value=DB_KEY)finalStringdbName@HttpServletRequestrequest@HttpServletResponseresponse)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/dd/0a99387cdb1e1f57e16d98e91f4f77e9c97cab.src","preCode":"    public Object multi_abort(\n            @PathVariable(value = DB_KEY) final String dbName,\n            HttpServletRequest request, HttpServletResponse response)\n            throws DdlException {\n        executeCheckPassword(request, response);\n        execEnv = ExecuteEnv.getInstance();\n\n        String label = request.getParameter(LABEL_KEY);\n        if (Strings.isNullOrEmpty(label)) {\n            return ResponseEntityBuilder.badRequest(\"No label selected\");\n        }\n\n        String fullDbName = getFullDbName(dbName);\n        checkDbAuth(ConnectContext.get().getCurrentUserIdentity(), fullDbName, PrivPredicate.LOAD);\n\n        \r\n\n        RedirectView redirectView = redirectToMaster(request, response);\n        if (redirectView != null) {\n            return redirectView;\n        }\n\n        execEnv.getMultiLoadMgr().abort(fullDbName, label);\n        return ResponseEntityBuilder.ok();\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/httpv2/rest/MultiAction.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":197,"status":"B"}],"commitId":"17a8b57018ac76eb5bf19c35e0c3fce7f5bbdd26","commitMessage":"@@@[UI Part 3] New implemented HTTP RESTful API of Frontend (#4596)\n\nUse spring mvc rest to replace the original netty http rest\nCreated a new package `org/apache/doris/httpv2`. \nand the origin implementations under `org/apache/doris/http` remain unchanged.\n\nThis part of the code will not be used at present.  so it will not affect existing functions.\n\nAPI document can be found in #4584 \n\nProposal #4308","date":"2020-09-16 15:02:59","modifiedFileCount":"2","status":"B","submitter":"???"},{"authorTime":"2021-05-30 23:08:38","codes":[{"authorDate":"2021-05-30 23:08:38","commitOrder":2,"curCode":"    public Object multi_desc(\n            @PathVariable(value = DB_KEY) final String dbName,\n            HttpServletRequest request, HttpServletResponse response) {\n        try {\n            executeCheckPassword(request, response);\n\n            execEnv = ExecuteEnv.getInstance();\n            String label = request.getParameter(LABEL_KEY);\n            if (Strings.isNullOrEmpty(label)) {\n                return new RestBaseResult(\"No label selected\");\n            }\n\n            String fullDbName = getFullDbName(dbName);\n            checkDbAuth(ConnectContext.get().getCurrentUserIdentity(), fullDbName, PrivPredicate.LOAD);\n\n            \r\n            RedirectView redirectView = redirectToMaster(request, response);\n            if (redirectView != null) {\n                return redirectView;\n            }\n\n            execEnv = ExecuteEnv.getInstance();\n            final List<String> labels = Lists.newArrayList();\n            execEnv.getMultiLoadMgr().desc(fullDbName, label, labels);\n            return new MultiLabelResult(labels);\n        } catch (Exception e) {\n            return new RestBaseResult(e.getMessage());\n        }\n    }\n","date":"2021-05-30 23:08:38","endLine":82,"groupId":"101420","id":3,"instanceNumber":1,"isCurCommit":1,"methodName":"multi_desc","params":"(@PathVariable(value=DB_KEY)finalStringdbName@HttpServletRequestrequest@HttpServletResponseresponse)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/94/3aa26bac3c5428d22138587b85a2878429801d.src","preCode":"    public Object multi_desc(\n            @PathVariable(value = DB_KEY) final String dbName,\n            HttpServletRequest request, HttpServletResponse response)\n            throws DdlException {\n        executeCheckPassword(request, response);\n\n        execEnv = ExecuteEnv.getInstance();\n        String label = request.getParameter(LABEL_KEY);\n        if (Strings.isNullOrEmpty(label)) {\n            return ResponseEntityBuilder.badRequest(\"No label selected\");\n        }\n\n        String fullDbName = getFullDbName(dbName);\n        checkDbAuth(ConnectContext.get().getCurrentUserIdentity(), fullDbName, PrivPredicate.LOAD);\n\n        \r\n        RedirectView redirectView = redirectToMaster(request, response);\n        if (redirectView != null) {\n            return redirectView;\n        }\n\n        execEnv = ExecuteEnv.getInstance();\n        final List<String> labels = Lists.newArrayList();\n        execEnv.getMultiLoadMgr().desc(fullDbName, label, labels);\n        return ResponseEntityBuilder.ok(labels);\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/httpv2/rest/MultiAction.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":54,"status":"M"},{"authorDate":"2021-05-30 23:08:38","commitOrder":2,"curCode":"    public Object multi_abort(\n            @PathVariable(value = DB_KEY) final String dbName,\n            HttpServletRequest request, HttpServletResponse response)\n            throws DdlException {\n        try {\n            executeCheckPassword(request, response);\n            execEnv = ExecuteEnv.getInstance();\n\n            String label = request.getParameter(LABEL_KEY);\n            if (Strings.isNullOrEmpty(label)) {\n                return new RestBaseResult(\"No label selected\");\n            }\n\n            String fullDbName = getFullDbName(dbName);\n            checkDbAuth(ConnectContext.get().getCurrentUserIdentity(), fullDbName, PrivPredicate.LOAD);\n\n            \r\n            RedirectView redirectView = redirectToMaster(request, response);\n            if (redirectView != null) {\n                return redirectView;\n            }\n\n            execEnv.getMultiLoadMgr().abort(fullDbName, label);\n            return RestBaseResult.getOk();\n        } catch (Exception e) {\n            return new RestBaseResult(e.getMessage());\n        }\n    }\n","date":"2021-05-30 23:08:38","endLine":250,"groupId":"101420","id":4,"instanceNumber":2,"isCurCommit":1,"methodName":"multi_abort","params":"(@PathVariable(value=DB_KEY)finalStringdbName@HttpServletRequestrequest@HttpServletResponseresponse)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/94/3aa26bac3c5428d22138587b85a2878429801d.src","preCode":"    public Object multi_abort(\n            @PathVariable(value = DB_KEY) final String dbName,\n            HttpServletRequest request, HttpServletResponse response)\n            throws DdlException {\n        executeCheckPassword(request, response);\n        execEnv = ExecuteEnv.getInstance();\n\n        String label = request.getParameter(LABEL_KEY);\n        if (Strings.isNullOrEmpty(label)) {\n            return ResponseEntityBuilder.badRequest(\"No label selected\");\n        }\n\n        String fullDbName = getFullDbName(dbName);\n        checkDbAuth(ConnectContext.get().getCurrentUserIdentity(), fullDbName, PrivPredicate.LOAD);\n\n        \r\n\n        RedirectView redirectView = redirectToMaster(request, response);\n        if (redirectView != null) {\n            return redirectView;\n        }\n\n        execEnv.getMultiLoadMgr().abort(fullDbName, label);\n        return ResponseEntityBuilder.ok();\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/httpv2/rest/MultiAction.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":223,"status":"M"}],"commitId":"0da59aab531186b519a6165944dedf037e5f504d","commitMessage":"@@@[Bug] Fix bug of multi load and some issue about httpv2 (#5848)\n\nTo be compatible with http v1 so that user don't need to change their code","date":"2021-05-30 23:08:38","modifiedFileCount":"6","status":"M","submitter":"Mingyu Chen"}]
