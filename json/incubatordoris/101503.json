[{"authorTime":"2020-07-21 12:42:42","codes":[{"authorDate":"2020-07-21 12:42:42","commitOrder":1,"curCode":"    public boolean checkDbPriv(UserIdentity currentUser, String db, PrivPredicate wanted) {\n        if (!Config.enable_auth_check) {\n            return true;\n        }\n        if (wanted.getPrivs().containsNodePriv()) {\n            LOG.debug(\"should not check NODE priv in Database level. user: {}, db: {}\",\n                    currentUser, db);\n            return false;\n        }\n\n        PrivBitSet savedPrivs = PrivBitSet.of();\n        if (checkGlobalInternal(currentUser, wanted, savedPrivs)\n                || checkDbInternal(currentUser, db, wanted, savedPrivs)) {\n            return true;\n        }\n\n        \r\n        if (db != null && wanted == PrivPredicate.SHOW && checkTblWithDb(currentUser, db)) {\n            return true;\n        }\n\n        LOG.debug(\"failed to get wanted privs: {}, ganted: {}\", wanted, savedPrivs);\n        return false;\n    }\n","date":"2020-07-21 12:42:42","endLine":318,"groupId":"1568","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"checkDbPriv","params":"(UserIdentitycurrentUser@Stringdb@PrivPredicatewanted)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/bf/d2e320defdbd3ee9eefcd6158bc1e6da219811.src","preCode":"    public boolean checkDbPriv(UserIdentity currentUser, String db, PrivPredicate wanted) {\n        if (!Config.enable_auth_check) {\n            return true;\n        }\n        if (wanted.getPrivs().containsNodePriv()) {\n            LOG.debug(\"should not check NODE priv in Database level. user: {}, db: {}\",\n                    currentUser, db);\n            return false;\n        }\n\n        PrivBitSet savedPrivs = PrivBitSet.of();\n        if (checkGlobalInternal(currentUser, wanted, savedPrivs)\n                || checkDbInternal(currentUser, db, wanted, savedPrivs)) {\n            return true;\n        }\n\n        \r\n        if (db != null && wanted == PrivPredicate.SHOW && checkTblWithDb(currentUser, db)) {\n            return true;\n        }\n\n        LOG.debug(\"failed to get wanted privs: {}, ganted: {}\", wanted, savedPrivs);\n        return false;\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/mysql/privilege/PaloAuth.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":295,"status":"B"},{"authorDate":"2020-07-21 12:42:42","commitOrder":1,"curCode":"    public boolean checkResourcePriv(UserIdentity currentUser, String resourceName, PrivPredicate wanted) {\n        if (!Config.enable_auth_check) {\n            return true;\n        }\n\n        PrivBitSet savedPrivs = PrivBitSet.of();\n        if (checkGlobalInternal(currentUser, wanted, savedPrivs)\n                || checkResourceInternal(currentUser, resourceName, wanted, savedPrivs)) {\n            return true;\n        }\n\n        LOG.debug(\"failed to get wanted privs: {}, granted: {}\", wanted, savedPrivs);\n        return false;\n    }\n","date":"2020-07-21 12:42:42","endLine":375,"groupId":"3341","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"checkResourcePriv","params":"(UserIdentitycurrentUser@StringresourceName@PrivPredicatewanted)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/bf/d2e320defdbd3ee9eefcd6158bc1e6da219811.src","preCode":"    public boolean checkResourcePriv(UserIdentity currentUser, String resourceName, PrivPredicate wanted) {\n        if (!Config.enable_auth_check) {\n            return true;\n        }\n\n        PrivBitSet savedPrivs = PrivBitSet.of();\n        if (checkGlobalInternal(currentUser, wanted, savedPrivs)\n                || checkResourceInternal(currentUser, resourceName, wanted, savedPrivs)) {\n            return true;\n        }\n\n        LOG.debug(\"failed to get wanted privs: {}, granted: {}\", wanted, savedPrivs);\n        return false;\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/mysql/privilege/PaloAuth.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":362,"status":"B"}],"commitId":"ad17afef9139a9aeedeb2e92638e95886d515f14","commitMessage":"@@@[CodeRefactor] #4098 Make FE multi module (#4099)\n\nThis PR change the FE code structure to maven multi module structure. \nSee ISSUE: #4098 for more info.  such as How to resolve conflicts.","date":"2020-07-21 12:42:42","modifiedFileCount":"0","status":"B","submitter":"Mingyu Chen"},{"authorTime":"2020-07-21 12:42:42","codes":[{"authorDate":"2020-10-10 21:16:25","commitOrder":2,"curCode":"    public boolean checkDbPriv(UserIdentity currentUser, String db, PrivPredicate wanted) {\n        if (!Config.enable_auth_check) {\n            return true;\n        }\n        if (wanted.getPrivs().containsNodePriv()) {\n            LOG.debug(\"should not check NODE priv in Database level. user: {}, db: {}\",\n                    currentUser, db);\n            return false;\n        }\n\n        PrivBitSet savedPrivs = PrivBitSet.of();\n        if (checkGlobalInternal(currentUser, wanted, savedPrivs)\n                || checkDbInternal(currentUser, db, wanted, savedPrivs)) {\n            return true;\n        }\n\n        \r\n        if (db != null && wanted == PrivPredicate.SHOW && checkTblWithDb(currentUser, db)) {\n            return true;\n        }\n\n        LOG.debug(\"failed to get wanted privs: {}, granted: {}\", wanted, savedPrivs);\n        return false;\n    }\n","date":"2020-10-10 21:16:25","endLine":318,"groupId":"101503","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"checkDbPriv","params":"(UserIdentitycurrentUser@Stringdb@PrivPredicatewanted)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/91/54c7c7af743bd87e7d76b2e0d4fc50b7f76c7c.src","preCode":"    public boolean checkDbPriv(UserIdentity currentUser, String db, PrivPredicate wanted) {\n        if (!Config.enable_auth_check) {\n            return true;\n        }\n        if (wanted.getPrivs().containsNodePriv()) {\n            LOG.debug(\"should not check NODE priv in Database level. user: {}, db: {}\",\n                    currentUser, db);\n            return false;\n        }\n\n        PrivBitSet savedPrivs = PrivBitSet.of();\n        if (checkGlobalInternal(currentUser, wanted, savedPrivs)\n                || checkDbInternal(currentUser, db, wanted, savedPrivs)) {\n            return true;\n        }\n\n        \r\n        if (db != null && wanted == PrivPredicate.SHOW && checkTblWithDb(currentUser, db)) {\n            return true;\n        }\n\n        LOG.debug(\"failed to get wanted privs: {}, ganted: {}\", wanted, savedPrivs);\n        return false;\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/mysql/privilege/PaloAuth.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":295,"status":"M"},{"authorDate":"2020-07-21 12:42:42","commitOrder":2,"curCode":"    public boolean checkResourcePriv(UserIdentity currentUser, String resourceName, PrivPredicate wanted) {\n        if (!Config.enable_auth_check) {\n            return true;\n        }\n\n        PrivBitSet savedPrivs = PrivBitSet.of();\n        if (checkGlobalInternal(currentUser, wanted, savedPrivs)\n                || checkResourceInternal(currentUser, resourceName, wanted, savedPrivs)) {\n            return true;\n        }\n\n        LOG.debug(\"failed to get wanted privs: {}, granted: {}\", wanted, savedPrivs);\n        return false;\n    }\n","date":"2020-07-21 12:42:42","endLine":375,"groupId":"101503","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"checkResourcePriv","params":"(UserIdentitycurrentUser@StringresourceName@PrivPredicatewanted)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/bf/d2e320defdbd3ee9eefcd6158bc1e6da219811.src","preCode":"    public boolean checkResourcePriv(UserIdentity currentUser, String resourceName, PrivPredicate wanted) {\n        if (!Config.enable_auth_check) {\n            return true;\n        }\n\n        PrivBitSet savedPrivs = PrivBitSet.of();\n        if (checkGlobalInternal(currentUser, wanted, savedPrivs)\n                || checkResourceInternal(currentUser, resourceName, wanted, savedPrivs)) {\n            return true;\n        }\n\n        LOG.debug(\"failed to get wanted privs: {}, granted: {}\", wanted, savedPrivs);\n        return false;\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/mysql/privilege/PaloAuth.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":362,"status":"N"}],"commitId":"94a81e52c796150333c54838a889be01934983a4","commitMessage":"@@@Fix typo in our code (#4696)\n\n* fix typo in our code\n\n* fix\n\n* fix","date":"2020-10-10 21:16:25","modifiedFileCount":"176","status":"M","submitter":"Zhengguo Yang"}]
