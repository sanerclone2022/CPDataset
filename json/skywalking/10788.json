[{"authorTime":"2019-07-20 22:59:52","codes":[{"authorDate":"2019-07-21 15:07:35","commitOrder":5,"curCode":"    protected List<StorageData> getByIDs(JDBCHikariCPClient h2Client, String modelName, String[] ids,\n        StorageBuilder storageBuilder) throws IOException {\n\n        try (Connection connection = h2Client.getConnection()) {\n            \r\n\r\n\r\n\n            String param = ArrayParamBuilder.build(ids);\n\n            try (ResultSet rs = h2Client.executeQuery(connection, \"SELECT * FROM \" + modelName + \" WHERE id in (\" + param + \")\")) {\n                List<StorageData> storageDataList = new ArrayList<>();\n                StorageData storageData;\n                do {\n                    storageData = toStorageData(rs, modelName, storageBuilder);\n                    if (storageData != null) {\n                        storageDataList.add(storageData);\n                    }\n                }\n                while (storageData != null);\n                return storageDataList;\n            }\n        } catch (SQLException | JDBCClientException e) {\n            throw new IOException(e.getMessage(), e);\n        }\n    }\n","date":"2019-07-21 15:07:35","endLine":75,"groupId":"3840","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"getByIDs","params":"(JDBCHikariCPClienth2Client@StringmodelName@String[]ids@StorageBuilderstorageBuilder)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/14/2770d584f0de672b50350fa06e642e3b826341.src","preCode":"    protected List<StorageData> getByIDs(JDBCHikariCPClient h2Client, String modelName, String[] ids,\n        StorageBuilder storageBuilder) throws IOException {\n\n        try (Connection connection = h2Client.getConnection()) {\n            \r\n\r\n\r\n\n            String param = ArrayParamBuilder.build(ids);\n\n            try (ResultSet rs = h2Client.executeQuery(connection, \"SELECT * FROM \" + modelName + \" WHERE id in (\" + param + \")\")) {\n                List<StorageData> storageDataList = new ArrayList<>();\n                StorageData storageData;\n                do {\n                    storageData = toStorageData(rs, modelName, storageBuilder);\n                    if (storageData != null) {\n                        storageDataList.add(storageData);\n                    }\n                }\n                while (storageData != null);\n                return storageDataList;\n            }\n        } catch (SQLException | JDBCClientException e) {\n            throw new IOException(e.getMessage(), e);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2SQLExecutor.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":50,"status":"MB"},{"authorDate":"2019-07-20 22:59:52","commitOrder":5,"curCode":"    protected StorageData getByColumn(JDBCHikariCPClient h2Client, String modelName, String columnName, Object value,\n        StorageBuilder storageBuilder) throws IOException {\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet rs = h2Client.executeQuery(connection, \"SELECT * FROM \" + modelName + \" WHERE \" + columnName + \" = ?\", value)) {\n                return toStorageData(rs, modelName, storageBuilder);\n            }\n        } catch (SQLException | JDBCClientException e) {\n            throw new IOException(e.getMessage(), e);\n        }\n    }\n","date":"2019-07-20 22:59:52","endLine":60,"groupId":"3151","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"getByColumn","params":"(JDBCHikariCPClienth2Client@StringmodelName@StringcolumnName@Objectvalue@StorageBuilderstorageBuilder)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/3a/b7d291d21a6cb605bbf3a7e74702fcd2c39090.src","preCode":"    protected StorageData getByColumn(JDBCHikariCPClient h2Client, String modelName, String columnName, Object value,\n        StorageBuilder storageBuilder) throws IOException {\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet rs = h2Client.executeQuery(connection, \"SELECT * FROM \" + modelName + \" WHERE \" + columnName + \" = ?\", value)) {\n                return toStorageData(rs, modelName, storageBuilder);\n            }\n        } catch (SQLException | JDBCClientException e) {\n            throw new IOException(e.getMessage(), e);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2SQLExecutor.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":51,"status":"NB"}],"commitId":"ab9bc9226b962fd42ad4fc97b457e6514781a4e0","commitMessage":"@@@Fix H2 metrics read bug.  can't read expected existing metrics. (#3132)\n\nMake agent mock works as usual.","date":"2019-07-21 15:07:35","modifiedFileCount":"3","status":"M","submitter":"?? Wu Sheng"},{"authorTime":"2020-03-31 00:04:17","codes":[{"authorDate":"2020-03-31 00:04:17","commitOrder":6,"curCode":"    protected <T extends StorageData> List<StorageData> getByIDs(JDBCHikariCPClient h2Client,\n                                                                 String modelName,\n                                                                 String[] ids,\n                                                                 StorageBuilder<T> storageBuilder) throws IOException {\n        \r\n\r\n\r\n\n        String param = ArrayParamBuilder.build(ids);\n\n        try (Connection connection = h2Client.getConnection();\n             ResultSet rs = h2Client.executeQuery(\n                 connection, \"SELECT * FROM \" + modelName + \" WHERE id in (\" + param + \")\")) {\n            List<StorageData> storageDataList = new ArrayList<>();\n            StorageData storageData;\n            do {\n                storageData = toStorageData(rs, modelName, storageBuilder);\n                if (storageData != null) {\n                    storageDataList.add(storageData);\n                }\n            }\n            while (storageData != null);\n\n            return storageDataList;\n        } catch (SQLException | JDBCClientException e) {\n            throw new IOException(e.getMessage(), e);\n        }\n    }\n","date":"2020-03-31 00:04:17","endLine":75,"groupId":"3840","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"getByIDs","params":"(JDBCHikariCPClienth2Client@StringmodelName@String[]ids@StorageBuilder<T>storageBuilder)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/bd/26cd33bdd70b9b892fa3a6e4d86f76aed1cfce.src","preCode":"    protected List<StorageData> getByIDs(JDBCHikariCPClient h2Client, String modelName, String[] ids,\n        StorageBuilder storageBuilder) throws IOException {\n\n        try (Connection connection = h2Client.getConnection()) {\n            \r\n\r\n\r\n\n            String param = ArrayParamBuilder.build(ids);\n\n            try (ResultSet rs = h2Client.executeQuery(connection, \"SELECT * FROM \" + modelName + \" WHERE id in (\" + param + \")\")) {\n                List<StorageData> storageDataList = new ArrayList<>();\n                StorageData storageData;\n                do {\n                    storageData = toStorageData(rs, modelName, storageBuilder);\n                    if (storageData != null) {\n                        storageDataList.add(storageData);\n                    }\n                }\n                while (storageData != null);\n\n                return storageDataList;\n            }\n        } catch (SQLException | JDBCClientException e) {\n            throw new IOException(e.getMessage(), e);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2SQLExecutor.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":48,"status":"M"},{"authorDate":"2020-03-31 00:04:17","commitOrder":6,"curCode":"    protected StorageData getByColumn(JDBCHikariCPClient h2Client, String modelName, String columnName, Object value,\n                                      StorageBuilder<? extends StorageData> storageBuilder) throws IOException {\n        try (Connection connection = h2Client.getConnection();\n             ResultSet rs = h2Client.executeQuery(\n                 connection, \"SELECT * FROM \" + modelName + \" WHERE \" + columnName + \" = ?\", value)) {\n            return toStorageData(rs, modelName, storageBuilder);\n        } catch (SQLException | JDBCClientException e) {\n            throw new IOException(e.getMessage(), e);\n        }\n    }\n","date":"2020-03-31 00:04:17","endLine":96,"groupId":"3151","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"getByColumn","params":"(JDBCHikariCPClienth2Client@StringmodelName@StringcolumnName@Objectvalue@StorageBuilder<?extendsStorageData>storageBuilder)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/bd/26cd33bdd70b9b892fa3a6e4d86f76aed1cfce.src","preCode":"    protected StorageData getByColumn(JDBCHikariCPClient h2Client, String modelName, String columnName, Object value,\n        StorageBuilder storageBuilder) throws IOException {\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet rs = h2Client.executeQuery(connection, \"SELECT * FROM \" + modelName + \" WHERE \" + columnName + \" = ?\", value)) {\n                return toStorageData(rs, modelName, storageBuilder);\n            }\n        } catch (SQLException | JDBCClientException e) {\n            throw new IOException(e.getMessage(), e);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2SQLExecutor.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":87,"status":"M"}],"commitId":"b28b811af79af504abd5dede1e4605843d887ec3","commitMessage":"@@@[BugFix] Fix wrong H2 column type (#4593)\n\nMEDIUMTEXT in H2 is CLOB in JDBC type.  and casting it to `String` causes `ClassCastException`","date":"2020-03-31 00:04:17","modifiedFileCount":"5","status":"M","submitter":"kezhenxu94"},{"authorTime":"2021-02-06 21:22:58","codes":[{"authorDate":"2021-02-06 21:22:58","commitOrder":7,"curCode":"    protected <T extends StorageData> List<StorageData> getByIDs(JDBCHikariCPClient h2Client,\n                                                                 String modelName,\n                                                                 String[] ids,\n                                                                 StorageHashMapBuilder<T> storageBuilder) throws IOException {\n        \r\n\r\n\r\n\n        String param = ArrayParamBuilder.build(ids);\n\n        try (Connection connection = h2Client.getConnection();\n             ResultSet rs = h2Client.executeQuery(\n                 connection, \"SELECT * FROM \" + modelName + \" WHERE id in (\" + param + \")\")) {\n            List<StorageData> storageDataList = new ArrayList<>();\n            StorageData storageData;\n            do {\n                storageData = toStorageData(rs, modelName, storageBuilder);\n                if (storageData != null) {\n                    storageDataList.add(storageData);\n                }\n            }\n            while (storageData != null);\n\n            return storageDataList;\n        } catch (SQLException | JDBCClientException e) {\n            throw new IOException(e.getMessage(), e);\n        }\n    }\n","date":"2021-02-06 21:22:58","endLine":70,"groupId":"10788","id":5,"instanceNumber":1,"isCurCommit":1,"methodName":"getByIDs","params":"(JDBCHikariCPClienth2Client@StringmodelName@String[]ids@StorageHashMapBuilder<T>storageBuilder)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/5d/4b1c13a0b8bcf631af9bf47727b08d1dfefce0.src","preCode":"    protected <T extends StorageData> List<StorageData> getByIDs(JDBCHikariCPClient h2Client,\n                                                                 String modelName,\n                                                                 String[] ids,\n                                                                 StorageBuilder<T> storageBuilder) throws IOException {\n        \r\n\r\n\r\n\n        String param = ArrayParamBuilder.build(ids);\n\n        try (Connection connection = h2Client.getConnection();\n             ResultSet rs = h2Client.executeQuery(\n                 connection, \"SELECT * FROM \" + modelName + \" WHERE id in (\" + param + \")\")) {\n            List<StorageData> storageDataList = new ArrayList<>();\n            StorageData storageData;\n            do {\n                storageData = toStorageData(rs, modelName, storageBuilder);\n                if (storageData != null) {\n                    storageDataList.add(storageData);\n                }\n            }\n            while (storageData != null);\n\n            return storageDataList;\n        } catch (SQLException | JDBCClientException e) {\n            throw new IOException(e.getMessage(), e);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2SQLExecutor.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":43,"status":"M"},{"authorDate":"2021-02-06 21:22:58","commitOrder":7,"curCode":"    protected StorageData getByColumn(JDBCHikariCPClient h2Client, String modelName, String columnName, Object value,\n                                      StorageHashMapBuilder<? extends StorageData> storageBuilder) throws IOException {\n        try (Connection connection = h2Client.getConnection();\n             ResultSet rs = h2Client.executeQuery(\n                 connection, \"SELECT * FROM \" + modelName + \" WHERE \" + columnName + \" = ?\", value)) {\n            return toStorageData(rs, modelName, storageBuilder);\n        } catch (SQLException | JDBCClientException e) {\n            throw new IOException(e.getMessage(), e);\n        }\n    }\n","date":"2021-02-06 21:22:58","endLine":91,"groupId":"10788","id":6,"instanceNumber":2,"isCurCommit":1,"methodName":"getByColumn","params":"(JDBCHikariCPClienth2Client@StringmodelName@StringcolumnName@Objectvalue@StorageHashMapBuilder<?extendsStorageData>storageBuilder)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/5d/4b1c13a0b8bcf631af9bf47727b08d1dfefce0.src","preCode":"    protected StorageData getByColumn(JDBCHikariCPClient h2Client, String modelName, String columnName, Object value,\n                                      StorageBuilder<? extends StorageData> storageBuilder) throws IOException {\n        try (Connection connection = h2Client.getConnection();\n             ResultSet rs = h2Client.executeQuery(\n                 connection, \"SELECT * FROM \" + modelName + \" WHERE \" + columnName + \" = ?\", value)) {\n            return toStorageData(rs, modelName, storageBuilder);\n        } catch (SQLException | JDBCClientException e) {\n            throw new IOException(e.getMessage(), e);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2SQLExecutor.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":82,"status":"M"}],"commitId":"fc23dabf37a85cfc27482dbaf25b0109114f6ef7","commitMessage":"@@@Support multiple implementations of StorageBuilder in different storage implementations - stage 1. (#6334)\n\n","date":"2021-02-06 21:22:58","modifiedFileCount":"74","status":"M","submitter":"?? Wu Sheng"}]
