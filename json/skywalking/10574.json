[{"authorTime":"2020-10-05 20:16:18","codes":[{"authorDate":"2020-09-12 21:35:42","commitOrder":2,"curCode":"    private void sendAlarmMessage(CloseableHttpClient httpClient, String url, String requestBody) {\n        try {\n            HttpPost post = new HttpPost(url);\n            post.setConfig(requestConfig);\n            post.setHeader(HttpHeaders.ACCEPT, HttpHeaderValues.APPLICATION_JSON.toString());\n            post.setHeader(HttpHeaders.CONTENT_TYPE, HttpHeaderValues.APPLICATION_JSON.toString());\n            StringEntity entity = new StringEntity(requestBody, ContentType.APPLICATION_JSON);\n            post.setEntity(entity);\n            CloseableHttpResponse httpResponse = httpClient.execute(post);\n            StatusLine statusLine = httpResponse.getStatusLine();\n            if (statusLine != null && statusLine.getStatusCode() != HttpStatus.SC_OK) {\n                log.error(\"send wechat alarm to {} failure. Response code: {} \", url, statusLine.getStatusCode());\n            }\n        } catch (Throwable e) {\n            log.error(\"send wechat alarm to {} failure.\", url, e);\n        }\n    }\n","date":"2020-09-12 21:35:42","endLine":100,"groupId":"1774","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"sendAlarmMessage","params":"(CloseableHttpClienthttpClient@Stringurl@StringrequestBody)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/9a/c151778d132828f1c3966cd6b3adf46297d793.src","preCode":"    private void sendAlarmMessage(CloseableHttpClient httpClient, String url, String requestBody) {\n        try {\n            HttpPost post = new HttpPost(url);\n            post.setConfig(requestConfig);\n            post.setHeader(HttpHeaders.ACCEPT, HttpHeaderValues.APPLICATION_JSON.toString());\n            post.setHeader(HttpHeaders.CONTENT_TYPE, HttpHeaderValues.APPLICATION_JSON.toString());\n            StringEntity entity = new StringEntity(requestBody, ContentType.APPLICATION_JSON);\n            post.setEntity(entity);\n            CloseableHttpResponse httpResponse = httpClient.execute(post);\n            StatusLine statusLine = httpResponse.getStatusLine();\n            if (statusLine != null && statusLine.getStatusCode() != HttpStatus.SC_OK) {\n                log.error(\"send wechat alarm to {} failure. Response code: {} \", url, statusLine.getStatusCode());\n            }\n        } catch (Throwable e) {\n            log.error(\"send wechat alarm to {} failure.\", url, e);\n        }\n    }\n","realPath":"oap-server/server-alarm-plugin/src/main/java/org/apache/skywalking/oap/server/core/alarm/provider/wechat/WechatHookCallback.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":84,"status":"NB"},{"authorDate":"2020-10-05 20:16:18","commitOrder":2,"curCode":"    private void sendAlarmMessage(CloseableHttpClient httpClient, String url, String requestBody) {\n        try {\n            HttpPost post = new HttpPost(url);\n            post.setConfig(requestConfig);\n            post.setHeader(HttpHeaders.ACCEPT, HttpHeaderValues.APPLICATION_JSON.toString());\n            post.setHeader(HttpHeaders.CONTENT_TYPE, HttpHeaderValues.APPLICATION_JSON.toString());\n            StringEntity entity = new StringEntity(requestBody, ContentType.APPLICATION_JSON);\n            post.setEntity(entity);\n            CloseableHttpResponse httpResponse = httpClient.execute(post);\n            StatusLine statusLine = httpResponse.getStatusLine();\n            if (statusLine != null && statusLine.getStatusCode() != HttpStatus.SC_OK) {\n                log.error(\"send dingtalk alarm to {} failure. Response code: {}, Response content: {}\", url, statusLine.getStatusCode(),\n                        EntityUtils.toString(httpResponse.getEntity()));\n            }\n        } catch (Throwable e) {\n            log.error(\"send dingtalk alarm to {} failure.\", url, e);\n        }\n    }\n","date":"2020-10-05 20:16:18","endLine":153,"groupId":"1774","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"sendAlarmMessage","params":"(CloseableHttpClienthttpClient@Stringurl@StringrequestBody)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/5a/cc63a807f550ec0d66408c7a657b1ad3fe9331.src","preCode":"    private void sendAlarmMessage(CloseableHttpClient httpClient, String url, String requestBody) {\n        try {\n            HttpPost post = new HttpPost(url);\n            post.setConfig(requestConfig);\n            post.setHeader(HttpHeaders.ACCEPT, HttpHeaderValues.APPLICATION_JSON.toString());\n            post.setHeader(HttpHeaders.CONTENT_TYPE, HttpHeaderValues.APPLICATION_JSON.toString());\n            StringEntity entity = new StringEntity(requestBody, ContentType.APPLICATION_JSON);\n            post.setEntity(entity);\n            CloseableHttpResponse httpResponse = httpClient.execute(post);\n            StatusLine statusLine = httpResponse.getStatusLine();\n            if (statusLine != null && statusLine.getStatusCode() != HttpStatus.SC_OK) {\n                log.error(\"send dingtalk alarm to {} failure. Response code: {}, Response content: {}\", url, statusLine.getStatusCode(),\n                        EntityUtils.toString(httpResponse.getEntity()));\n            }\n        } catch (Throwable e) {\n            log.error(\"send dingtalk alarm to {} failure.\", url, e);\n        }\n    }\n","realPath":"oap-server/server-alarm-plugin/src/main/java/org/apache/skywalking/oap/server/core/alarm/provider/dingtalk/DingtalkHookCallback.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":136,"status":"B"}],"commitId":"117afff36fc2bbfafeeb9c02f584ef45539c12b5","commitMessage":"@@@Support Alarm to dingtalk (#5628)\n\n* Add dingtalk webhook\n\nCo-authored-by: ?? Wu Sheng <wu.sheng@foxmail.com>","date":"2020-10-05 20:16:18","modifiedFileCount":"5","status":"M","submitter":"xbkaishui"},{"authorTime":"2021-02-25 10:05:08","codes":[{"authorDate":"2021-02-25 10:05:08","commitOrder":3,"curCode":"    private void sendAlarmMessage(CloseableHttpClient httpClient, String url, String requestBody) {\n        CloseableHttpResponse httpResponse = null;\n        try {\n            HttpPost post = new HttpPost(url);\n            post.setConfig(requestConfig);\n            post.setHeader(HttpHeaders.ACCEPT, HttpHeaderValues.APPLICATION_JSON.toString());\n            post.setHeader(HttpHeaders.CONTENT_TYPE, HttpHeaderValues.APPLICATION_JSON.toString());\n            StringEntity entity = new StringEntity(requestBody, ContentType.APPLICATION_JSON);\n            post.setEntity(entity);\n            httpResponse = httpClient.execute(post);\n            StatusLine statusLine = httpResponse.getStatusLine();\n            if (statusLine != null && statusLine.getStatusCode() != HttpStatus.SC_OK) {\n                log.error(\"send wechat alarm to {} failure. Response code: {} \", url, statusLine.getStatusCode());\n            }\n        } catch (Throwable e) {\n            log.error(\"send wechat alarm to {} failure.\", url, e);\n        } finally {\n            if (httpResponse != null) {\n                try {\n                    httpResponse.close();\n                } catch (IOException e) {\n                    log.error(e.getMessage(), e);\n                }\n\n            }\n        }\n    }\n","date":"2021-02-25 10:05:08","endLine":110,"groupId":"10574","id":3,"instanceNumber":1,"isCurCommit":1,"methodName":"sendAlarmMessage","params":"(CloseableHttpClienthttpClient@Stringurl@StringrequestBody)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/24/bd8ad087037699292ac2f31fe33ae69ccdef7d.src","preCode":"    private void sendAlarmMessage(CloseableHttpClient httpClient, String url, String requestBody) {\n        try {\n            HttpPost post = new HttpPost(url);\n            post.setConfig(requestConfig);\n            post.setHeader(HttpHeaders.ACCEPT, HttpHeaderValues.APPLICATION_JSON.toString());\n            post.setHeader(HttpHeaders.CONTENT_TYPE, HttpHeaderValues.APPLICATION_JSON.toString());\n            StringEntity entity = new StringEntity(requestBody, ContentType.APPLICATION_JSON);\n            post.setEntity(entity);\n            CloseableHttpResponse httpResponse = httpClient.execute(post);\n            StatusLine statusLine = httpResponse.getStatusLine();\n            if (statusLine != null && statusLine.getStatusCode() != HttpStatus.SC_OK) {\n                log.error(\"send wechat alarm to {} failure. Response code: {} \", url, statusLine.getStatusCode());\n            }\n        } catch (Throwable e) {\n            log.error(\"send wechat alarm to {} failure.\", url, e);\n        }\n    }\n","realPath":"oap-server/server-alarm-plugin/src/main/java/org/apache/skywalking/oap/server/core/alarm/provider/wechat/WechatHookCallback.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":84,"status":"M"},{"authorDate":"2021-02-25 10:05:08","commitOrder":3,"curCode":"    private void sendAlarmMessage(CloseableHttpClient httpClient, String url, String requestBody) {\n        CloseableHttpResponse httpResponse = null;\n        try {\n            HttpPost post = new HttpPost(url);\n            post.setConfig(requestConfig);\n            post.setHeader(HttpHeaders.ACCEPT, HttpHeaderValues.APPLICATION_JSON.toString());\n            post.setHeader(HttpHeaders.CONTENT_TYPE, HttpHeaderValues.APPLICATION_JSON.toString());\n            StringEntity entity = new StringEntity(requestBody, ContentType.APPLICATION_JSON);\n            post.setEntity(entity);\n            httpResponse = httpClient.execute(post);\n            StatusLine statusLine = httpResponse.getStatusLine();\n            if (statusLine != null && statusLine.getStatusCode() != HttpStatus.SC_OK) {\n                log.error(\"send dingtalk alarm to {} failure. Response code: {}, Response content: {}\", url, statusLine.getStatusCode(),\n                        EntityUtils.toString(httpResponse.getEntity()));\n            }\n        } catch (Throwable e) {\n            log.error(\"send dingtalk alarm to {} failure.\", url, e);\n        } finally {\n            if (httpResponse != null) {\n                try {\n                    httpResponse.close();\n                } catch (IOException e) {\n                    log.error(e.getMessage(), e);\n                }\n\n            }\n        }\n    }\n","date":"2021-02-25 10:05:08","endLine":163,"groupId":"10574","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"sendAlarmMessage","params":"(CloseableHttpClienthttpClient@Stringurl@StringrequestBody)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/e2/ce79324509e6189b79345c37dc43414e39dbdf.src","preCode":"    private void sendAlarmMessage(CloseableHttpClient httpClient, String url, String requestBody) {\n        try {\n            HttpPost post = new HttpPost(url);\n            post.setConfig(requestConfig);\n            post.setHeader(HttpHeaders.ACCEPT, HttpHeaderValues.APPLICATION_JSON.toString());\n            post.setHeader(HttpHeaders.CONTENT_TYPE, HttpHeaderValues.APPLICATION_JSON.toString());\n            StringEntity entity = new StringEntity(requestBody, ContentType.APPLICATION_JSON);\n            post.setEntity(entity);\n            CloseableHttpResponse httpResponse = httpClient.execute(post);\n            StatusLine statusLine = httpResponse.getStatusLine();\n            if (statusLine != null && statusLine.getStatusCode() != HttpStatus.SC_OK) {\n                log.error(\"send dingtalk alarm to {} failure. Response code: {}, Response content: {}\", url, statusLine.getStatusCode(),\n                        EntityUtils.toString(httpResponse.getEntity()));\n            }\n        } catch (Throwable e) {\n            log.error(\"send dingtalk alarm to {} failure.\", url, e);\n        }\n    }\n","realPath":"oap-server/server-alarm-plugin/src/main/java/org/apache/skywalking/oap/server/core/alarm/provider/dingtalk/DingtalkHookCallback.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":136,"status":"M"}],"commitId":"5b49f8f9fd7aa0095e1922c2e6225948e244b57c","commitMessage":"@@@Fix alarm httpclient connection leak (#6431)\n\n","date":"2021-02-25 10:05:08","modifiedFileCount":"5","status":"M","submitter":"haoyann"}]
