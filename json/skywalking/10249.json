[{"authorTime":"2020-10-21 16:45:47","codes":[{"authorDate":"2020-04-29 08:43:26","commitOrder":2,"curCode":"    public void testBuilder() throws IllegalAccessException, InstantiationException {\n        PercentileFunctionInst inst = new PercentileFunctionInst();\n        inst.accept(\n            MeterEntity.newService(\"service-test\"),\n            new PercentileFunction.PercentileArgument(\n                new BucketedValues(\n                    BUCKETS,\n                    new long[] {\n                        10,\n                        20,\n                        30,\n                        40\n                    }\n                ),\n                RANKS\n            )\n        );\n        inst.calculate();\n\n        final StorageBuilder storageBuilder = inst.builder().newInstance();\n\n        \r\n        final Map map = storageBuilder.data2Map(inst);\n        map.put(PercentileFunction.DATASET, ((DataTable) map.get(PercentileFunction.DATASET)).toStorageData());\n        map.put(PercentileFunction.VALUE, ((DataTable) map.get(PercentileFunction.VALUE)).toStorageData());\n        map.put(PercentileFunction.RANKS, ((IntList) map.get(PercentileFunction.RANKS)).toStorageData());\n\n        final PercentileFunction inst2 = (PercentileFunction) storageBuilder.map2Data(map);\n        Assert.assertEquals(inst, inst2);\n        \r\n        Assert.assertEquals(inst.getDataset(), inst2.getDataset());\n        Assert.assertEquals(inst.getPercentileValues(), inst2.getPercentileValues());\n        Assert.assertEquals(inst.getRanks(), inst2.getRanks());\n    }\n","date":"2020-04-29 08:43:26","endLine":200,"groupId":"5076","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testBuilder","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/64/09d7bdbfae878486f49f20951768821ce2f419.src","preCode":"    public void testBuilder() throws IllegalAccessException, InstantiationException {\n        PercentileFunctionInst inst = new PercentileFunctionInst();\n        inst.accept(\n            MeterEntity.newService(\"service-test\"),\n            new PercentileFunction.PercentileArgument(\n                new BucketedValues(\n                    BUCKETS,\n                    new long[] {\n                        10,\n                        20,\n                        30,\n                        40\n                    }\n                ),\n                RANKS\n            )\n        );\n        inst.calculate();\n\n        final StorageBuilder storageBuilder = inst.builder().newInstance();\n\n        \r\n        final Map map = storageBuilder.data2Map(inst);\n        map.put(PercentileFunction.DATASET, ((DataTable) map.get(PercentileFunction.DATASET)).toStorageData());\n        map.put(PercentileFunction.VALUE, ((DataTable) map.get(PercentileFunction.VALUE)).toStorageData());\n        map.put(PercentileFunction.RANKS, ((IntList) map.get(PercentileFunction.RANKS)).toStorageData());\n\n        final PercentileFunction inst2 = (PercentileFunction) storageBuilder.map2Data(map);\n        Assert.assertEquals(inst, inst2);\n        \r\n        Assert.assertEquals(inst.getDataset(), inst2.getDataset());\n        Assert.assertEquals(inst.getPercentileValues(), inst2.getPercentileValues());\n        Assert.assertEquals(inst.getRanks(), inst2.getRanks());\n    }\n","realPath":"oap-server/server-core/src/test/java/org/apache/skywalking/oap/server/core/analysis/meter/function/PercentileFunctionTest.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":167,"status":"NB"},{"authorDate":"2020-10-21 16:45:47","commitOrder":2,"curCode":"    public void testFunction() {\n        PercentileFunctionInst inst = new PercentileFunctionInst();\n        inst.accept(\n            MeterEntity.newService(\"service-test\"),\n            new PercentileArgument(\n                new BucketedValues(\n                    BUCKETS,\n                    new long[] {\n                        10,\n                        20,\n                        30,\n                        40\n                    }\n                ),\n                RANKS\n            )\n        );\n\n        inst.accept(\n            MeterEntity.newService(\"service-test\"),\n            new PercentileArgument(\n                new BucketedValues(\n                    BUCKETS,\n                    new long[] {\n                        10,\n                        20,\n                        30,\n                        40\n                    }\n                ),\n                RANKS\n            )\n        );\n\n        inst.calculate();\n        final int[] values = inst.getValues();\n        \r\n\r\n\r\n\r\n\r\n\r\n\r\n\n        Assert.assertArrayEquals(new int[] {\n            100,\n            250\n        }, values);\n    }\n","date":"2020-10-21 16:45:47","endLine":96,"groupId":"4205","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testFunction","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/78/e34964314d338a8193a083365ea59533bbad00.src","preCode":"    public void testFunction() {\n        PercentileFunctionInst inst = new PercentileFunctionInst();\n        inst.accept(\n            MeterEntity.newService(\"service-test\"),\n            new PercentileArgument(\n                new BucketedValues(\n                    BUCKETS,\n                    new long[] {\n                        10,\n                        20,\n                        30,\n                        40\n                    }\n                ),\n                RANKS\n            )\n        );\n\n        inst.accept(\n            MeterEntity.newService(\"service-test\"),\n            new PercentileArgument(\n                new BucketedValues(\n                    BUCKETS,\n                    new long[] {\n                        10,\n                        20,\n                        30,\n                        40\n                    }\n                ),\n                RANKS\n            )\n        );\n\n        inst.calculate();\n        final int[] values = inst.getValues();\n        \r\n\r\n\r\n\r\n\r\n\r\n\r\n\n        Assert.assertArrayEquals(new int[] {\n            100,\n            250\n        }, values);\n    }\n","realPath":"oap-server/server-core/src/test/java/org/apache/skywalking/oap/server/core/analysis/meter/function/avg/AvgHistogramPercentileFunctionTest.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":47,"status":"B"}],"commitId":"9ce47d5bdc9e614885066d66384ee6092604efba","commitMessage":"@@@Meter Analysis Language (#5531)\n\n","date":"2020-10-21 16:45:47","modifiedFileCount":"7","status":"M","submitter":"Gao Hongtao"},{"authorTime":"2020-10-21 16:45:47","codes":[{"authorDate":"2021-02-06 21:22:58","commitOrder":3,"curCode":"    public void testBuilder() throws IllegalAccessException, InstantiationException {\n        PercentileFunctionInst inst = new PercentileFunctionInst();\n        inst.accept(\n            MeterEntity.newService(\"service-test\"),\n            new PercentileFunction.PercentileArgument(\n                new BucketedValues(\n                    BUCKETS,\n                    new long[] {\n                        10,\n                        20,\n                        30,\n                        40\n                    }\n                ),\n                RANKS\n            )\n        );\n        inst.calculate();\n\n        final StorageHashMapBuilder storageBuilder = inst.builder().newInstance();\n\n        \r\n        final Map map = storageBuilder.entity2Storage(inst);\n        map.put(PercentileFunction.DATASET, ((DataTable) map.get(PercentileFunction.DATASET)).toStorageData());\n        map.put(PercentileFunction.VALUE, ((DataTable) map.get(PercentileFunction.VALUE)).toStorageData());\n        map.put(PercentileFunction.RANKS, ((IntList) map.get(PercentileFunction.RANKS)).toStorageData());\n\n        final PercentileFunction inst2 = (PercentileFunction) storageBuilder.storage2Entity(map);\n        Assert.assertEquals(inst, inst2);\n        \r\n        Assert.assertEquals(inst.getDataset(), inst2.getDataset());\n        Assert.assertEquals(inst.getPercentileValues(), inst2.getPercentileValues());\n        Assert.assertEquals(inst.getRanks(), inst2.getRanks());\n    }\n","date":"2021-02-06 21:22:58","endLine":200,"groupId":"10249","id":3,"instanceNumber":1,"isCurCommit":1,"methodName":"testBuilder","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/b7/f477c62ced2d1a60b3dda6a327d03eb84ead53.src","preCode":"    public void testBuilder() throws IllegalAccessException, InstantiationException {\n        PercentileFunctionInst inst = new PercentileFunctionInst();\n        inst.accept(\n            MeterEntity.newService(\"service-test\"),\n            new PercentileFunction.PercentileArgument(\n                new BucketedValues(\n                    BUCKETS,\n                    new long[] {\n                        10,\n                        20,\n                        30,\n                        40\n                    }\n                ),\n                RANKS\n            )\n        );\n        inst.calculate();\n\n        final StorageBuilder storageBuilder = inst.builder().newInstance();\n\n        \r\n        final Map map = storageBuilder.data2Map(inst);\n        map.put(PercentileFunction.DATASET, ((DataTable) map.get(PercentileFunction.DATASET)).toStorageData());\n        map.put(PercentileFunction.VALUE, ((DataTable) map.get(PercentileFunction.VALUE)).toStorageData());\n        map.put(PercentileFunction.RANKS, ((IntList) map.get(PercentileFunction.RANKS)).toStorageData());\n\n        final PercentileFunction inst2 = (PercentileFunction) storageBuilder.map2Data(map);\n        Assert.assertEquals(inst, inst2);\n        \r\n        Assert.assertEquals(inst.getDataset(), inst2.getDataset());\n        Assert.assertEquals(inst.getPercentileValues(), inst2.getPercentileValues());\n        Assert.assertEquals(inst.getRanks(), inst2.getRanks());\n    }\n","realPath":"oap-server/server-core/src/test/java/org/apache/skywalking/oap/server/core/analysis/meter/function/PercentileFunctionTest.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":167,"status":"M"},{"authorDate":"2020-10-21 16:45:47","commitOrder":3,"curCode":"    public void testFunction() {\n        PercentileFunctionInst inst = new PercentileFunctionInst();\n        inst.accept(\n            MeterEntity.newService(\"service-test\"),\n            new PercentileArgument(\n                new BucketedValues(\n                    BUCKETS,\n                    new long[] {\n                        10,\n                        20,\n                        30,\n                        40\n                    }\n                ),\n                RANKS\n            )\n        );\n\n        inst.accept(\n            MeterEntity.newService(\"service-test\"),\n            new PercentileArgument(\n                new BucketedValues(\n                    BUCKETS,\n                    new long[] {\n                        10,\n                        20,\n                        30,\n                        40\n                    }\n                ),\n                RANKS\n            )\n        );\n\n        inst.calculate();\n        final int[] values = inst.getValues();\n        \r\n\r\n\r\n\r\n\r\n\r\n\r\n\n        Assert.assertArrayEquals(new int[] {\n            100,\n            250\n        }, values);\n    }\n","date":"2020-10-21 16:45:47","endLine":96,"groupId":"10249","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testFunction","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/78/e34964314d338a8193a083365ea59533bbad00.src","preCode":"    public void testFunction() {\n        PercentileFunctionInst inst = new PercentileFunctionInst();\n        inst.accept(\n            MeterEntity.newService(\"service-test\"),\n            new PercentileArgument(\n                new BucketedValues(\n                    BUCKETS,\n                    new long[] {\n                        10,\n                        20,\n                        30,\n                        40\n                    }\n                ),\n                RANKS\n            )\n        );\n\n        inst.accept(\n            MeterEntity.newService(\"service-test\"),\n            new PercentileArgument(\n                new BucketedValues(\n                    BUCKETS,\n                    new long[] {\n                        10,\n                        20,\n                        30,\n                        40\n                    }\n                ),\n                RANKS\n            )\n        );\n\n        inst.calculate();\n        final int[] values = inst.getValues();\n        \r\n\r\n\r\n\r\n\r\n\r\n\r\n\n        Assert.assertArrayEquals(new int[] {\n            100,\n            250\n        }, values);\n    }\n","realPath":"oap-server/server-core/src/test/java/org/apache/skywalking/oap/server/core/analysis/meter/function/avg/AvgHistogramPercentileFunctionTest.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":47,"status":"N"}],"commitId":"fc23dabf37a85cfc27482dbaf25b0109114f6ef7","commitMessage":"@@@Support multiple implementations of StorageBuilder in different storage implementations - stage 1. (#6334)\n\n","date":"2021-02-06 21:22:58","modifiedFileCount":"74","status":"M","submitter":"?? Wu Sheng"}]
