[{"authorTime":"2021-04-26 00:01:19","codes":[{"authorDate":"2019-10-23 00:35:04","commitOrder":6,"curCode":"    public void testWebhook() {\n        List<String> remoteEndpoints = new ArrayList<>();\n        remoteEndpoints.add(\"http://127.0.0.1:\" + port + \"/webhook/receiveAlarm\");\n        Rules rules = new Rules();\n        rules.setWebhooks(remoteEndpoints);\n        AlarmRulesWatcher alarmRulesWatcher = new AlarmRulesWatcher(rules, null);\n        WebhookCallback webhookCallback = new WebhookCallback(alarmRulesWatcher);\n        List<AlarmMessage> alarmMessages = new ArrayList<>(2);\n        AlarmMessage alarmMessage = new AlarmMessage();\n        alarmMessage.setScopeId(DefaultScopeDefine.ALL);\n        alarmMessage.setRuleName(\"service_resp_time_rule\");\n        alarmMessage.setAlarmMessage(\"alarmMessage with [DefaultScopeDefine.All]\");\n        alarmMessages.add(alarmMessage);\n        AlarmMessage anotherAlarmMessage = new AlarmMessage();\n        anotherAlarmMessage.setRuleName(\"service_resp_time_rule_2\");\n        anotherAlarmMessage.setScopeId(DefaultScopeDefine.ENDPOINT);\n        anotherAlarmMessage.setAlarmMessage(\"anotherAlarmMessage with [DefaultScopeDefine.Endpoint]\");\n        alarmMessages.add(anotherAlarmMessage);\n        webhookCallback.doAlarm(alarmMessages);\n\n        Assert.assertTrue(isSuccess);\n    }\n","date":"2019-10-23 00:35:04","endLine":101,"groupId":"1122","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testWebhook","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/6b/c84ae990efa3669f89ce334794f48a32311e3c.src","preCode":"    public void testWebhook() {\n        List<String> remoteEndpoints = new ArrayList<>();\n        remoteEndpoints.add(\"http://127.0.0.1:\" + port + \"/webhook/receiveAlarm\");\n        Rules rules = new Rules();\n        rules.setWebhooks(remoteEndpoints);\n        AlarmRulesWatcher alarmRulesWatcher = new AlarmRulesWatcher(rules, null);\n        WebhookCallback webhookCallback = new WebhookCallback(alarmRulesWatcher);\n        List<AlarmMessage> alarmMessages = new ArrayList<>(2);\n        AlarmMessage alarmMessage = new AlarmMessage();\n        alarmMessage.setScopeId(DefaultScopeDefine.ALL);\n        alarmMessage.setRuleName(\"service_resp_time_rule\");\n        alarmMessage.setAlarmMessage(\"alarmMessage with [DefaultScopeDefine.All]\");\n        alarmMessages.add(alarmMessage);\n        AlarmMessage anotherAlarmMessage = new AlarmMessage();\n        anotherAlarmMessage.setRuleName(\"service_resp_time_rule_2\");\n        anotherAlarmMessage.setScopeId(DefaultScopeDefine.ENDPOINT);\n        anotherAlarmMessage.setAlarmMessage(\"anotherAlarmMessage with [DefaultScopeDefine.Endpoint]\");\n        alarmMessages.add(anotherAlarmMessage);\n        webhookCallback.doAlarm(alarmMessages);\n\n        Assert.assertTrue(isSuccess);\n    }\n","realPath":"oap-server/server-alarm-plugin/src/test/java/org/apache/skywalking/oap/server/core/alarm/provider/WebhookCallbackTest.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":80,"status":"NB"},{"authorDate":"2021-04-26 00:01:19","commitOrder":6,"curCode":"    public void testWeLinkDoAlarm() {\n        List<WeLinkSettings.WebHookUrl> webHooks = new ArrayList<>();\n        webHooks.add(new WeLinkSettings.WebHookUrl(\"clientId\", \"clientSecret\",\n                                                   \"http://127.0.0.1:\" + port + \"/welinkhook/api/auth/v2/tickets\",\n                                                   \"http://127.0.0.1:\" + port + \"/welinkhook/api/welinkim/v1/im-service/chat/group-chat\",\n                                                   \"rebootName\", \"1,2,3\"\n        ));\n        Rules rules = new Rules();\n        String template = \"Apache SkyWalking Alarm: \\n %s.\";\n        rules.setWelinks(WeLinkSettings.builder().webhooks(webHooks).textTemplate(template).build());\n\n        AlarmRulesWatcher alarmRulesWatcher = new AlarmRulesWatcher(rules, null);\n        WeLinkHookCallback welinkHookCallback = new WeLinkHookCallback(alarmRulesWatcher);\n        List<AlarmMessage> alarmMessages = new ArrayList<>(2);\n        AlarmMessage alarmMessage = new AlarmMessage();\n        alarmMessage.setScopeId(DefaultScopeDefine.ALL);\n        alarmMessage.setRuleName(\"service_resp_time_rule\");\n        alarmMessage.setAlarmMessage(\"alarmMessage with [DefaultScopeDefine.All]\");\n        alarmMessages.add(alarmMessage);\n        AlarmMessage anotherAlarmMessage = new AlarmMessage();\n        anotherAlarmMessage.setRuleName(\"service_resp_time_rule_2\");\n        anotherAlarmMessage.setScopeId(DefaultScopeDefine.ENDPOINT);\n        anotherAlarmMessage.setAlarmMessage(\"anotherAlarmMessage with [DefaultScopeDefine.Endpoint]\");\n        alarmMessages.add(anotherAlarmMessage);\n        welinkHookCallback.doAlarm(alarmMessages);\n        Assert.assertTrue(isSuccess);\n    }\n","date":"2021-04-26 00:01:19","endLine":98,"groupId":"1122","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testWeLinkDoAlarm","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/8a/6e980cb9105e57e9638596ee5052b450ee84c0.src","preCode":"    public void testWeLinkDoAlarm() {\n        List<WeLinkSettings.WebHookUrl> webHooks = new ArrayList<>();\n        webHooks.add(new WeLinkSettings.WebHookUrl(\"clientId\", \"clientSecret\",\n                                                   \"http://127.0.0.1:\" + port + \"/welinkhook/api/auth/v2/tickets\",\n                                                   \"http://127.0.0.1:\" + port + \"/welinkhook/api/welinkim/v1/im-service/chat/group-chat\",\n                                                   \"rebootName\", \"1,2,3\"\n        ));\n        Rules rules = new Rules();\n        String template = \"Apache SkyWalking Alarm: \\n %s.\";\n        rules.setWelinks(WeLinkSettings.builder().webhooks(webHooks).textTemplate(template).build());\n\n        AlarmRulesWatcher alarmRulesWatcher = new AlarmRulesWatcher(rules, null);\n        WeLinkHookCallback welinkHookCallback = new WeLinkHookCallback(alarmRulesWatcher);\n        List<AlarmMessage> alarmMessages = new ArrayList<>(2);\n        AlarmMessage alarmMessage = new AlarmMessage();\n        alarmMessage.setScopeId(DefaultScopeDefine.ALL);\n        alarmMessage.setRuleName(\"service_resp_time_rule\");\n        alarmMessage.setAlarmMessage(\"alarmMessage with [DefaultScopeDefine.All]\");\n        alarmMessages.add(alarmMessage);\n        AlarmMessage anotherAlarmMessage = new AlarmMessage();\n        anotherAlarmMessage.setRuleName(\"service_resp_time_rule_2\");\n        anotherAlarmMessage.setScopeId(DefaultScopeDefine.ENDPOINT);\n        anotherAlarmMessage.setAlarmMessage(\"anotherAlarmMessage with [DefaultScopeDefine.Endpoint]\");\n        alarmMessages.add(anotherAlarmMessage);\n        welinkHookCallback.doAlarm(alarmMessages);\n        Assert.assertTrue(isSuccess);\n    }\n","realPath":"oap-server/server-alarm-plugin/src/test/java/org/apache/skywalking/oap/server/core/alarm/provider/welink/WeLinkHookCallbackTest.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":72,"status":"B"}],"commitId":"1aa5f2682d88145718f0ad5d893107cea26f46a7","commitMessage":"@@@feature:Support alarm to WeLink (#6794)\n\n","date":"2021-04-26 00:01:19","modifiedFileCount":"5","status":"M","submitter":"???"},{"authorTime":"2021-04-28 20:36:16","codes":[{"authorDate":"2019-10-23 00:35:04","commitOrder":7,"curCode":"    public void testWebhook() {\n        List<String> remoteEndpoints = new ArrayList<>();\n        remoteEndpoints.add(\"http://127.0.0.1:\" + port + \"/webhook/receiveAlarm\");\n        Rules rules = new Rules();\n        rules.setWebhooks(remoteEndpoints);\n        AlarmRulesWatcher alarmRulesWatcher = new AlarmRulesWatcher(rules, null);\n        WebhookCallback webhookCallback = new WebhookCallback(alarmRulesWatcher);\n        List<AlarmMessage> alarmMessages = new ArrayList<>(2);\n        AlarmMessage alarmMessage = new AlarmMessage();\n        alarmMessage.setScopeId(DefaultScopeDefine.ALL);\n        alarmMessage.setRuleName(\"service_resp_time_rule\");\n        alarmMessage.setAlarmMessage(\"alarmMessage with [DefaultScopeDefine.All]\");\n        alarmMessages.add(alarmMessage);\n        AlarmMessage anotherAlarmMessage = new AlarmMessage();\n        anotherAlarmMessage.setRuleName(\"service_resp_time_rule_2\");\n        anotherAlarmMessage.setScopeId(DefaultScopeDefine.ENDPOINT);\n        anotherAlarmMessage.setAlarmMessage(\"anotherAlarmMessage with [DefaultScopeDefine.Endpoint]\");\n        alarmMessages.add(anotherAlarmMessage);\n        webhookCallback.doAlarm(alarmMessages);\n\n        Assert.assertTrue(isSuccess);\n    }\n","date":"2019-10-23 00:35:04","endLine":101,"groupId":"10507","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testWebhook","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/6b/c84ae990efa3669f89ce334794f48a32311e3c.src","preCode":"    public void testWebhook() {\n        List<String> remoteEndpoints = new ArrayList<>();\n        remoteEndpoints.add(\"http://127.0.0.1:\" + port + \"/webhook/receiveAlarm\");\n        Rules rules = new Rules();\n        rules.setWebhooks(remoteEndpoints);\n        AlarmRulesWatcher alarmRulesWatcher = new AlarmRulesWatcher(rules, null);\n        WebhookCallback webhookCallback = new WebhookCallback(alarmRulesWatcher);\n        List<AlarmMessage> alarmMessages = new ArrayList<>(2);\n        AlarmMessage alarmMessage = new AlarmMessage();\n        alarmMessage.setScopeId(DefaultScopeDefine.ALL);\n        alarmMessage.setRuleName(\"service_resp_time_rule\");\n        alarmMessage.setAlarmMessage(\"alarmMessage with [DefaultScopeDefine.All]\");\n        alarmMessages.add(alarmMessage);\n        AlarmMessage anotherAlarmMessage = new AlarmMessage();\n        anotherAlarmMessage.setRuleName(\"service_resp_time_rule_2\");\n        anotherAlarmMessage.setScopeId(DefaultScopeDefine.ENDPOINT);\n        anotherAlarmMessage.setAlarmMessage(\"anotherAlarmMessage with [DefaultScopeDefine.Endpoint]\");\n        alarmMessages.add(anotherAlarmMessage);\n        webhookCallback.doAlarm(alarmMessages);\n\n        Assert.assertTrue(isSuccess);\n    }\n","realPath":"oap-server/server-alarm-plugin/src/test/java/org/apache/skywalking/oap/server/core/alarm/provider/WebhookCallbackTest.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":80,"status":"N"},{"authorDate":"2021-04-28 20:36:16","commitOrder":7,"curCode":"    public void testWeLinkDoAlarm() {\n        List<WeLinkSettings.WebHookUrl> webHooks = new ArrayList<>();\n        webHooks.add(new WeLinkSettings.WebHookUrl(\"clientId\", \"clientSecret\",\n                                                   \"http://127.0.0.1:\" + port + \"/welinkhook/api/auth/v2/tickets\",\n                                                   \"http://127.0.0.1:\" + port + \"/welinkhook/api/welinkim/v1/im-service/chat/group-chat\",\n                                                   \"robotName\", \"1,2,3\"\n        ));\n        Rules rules = new Rules();\n        String template = \"Apache SkyWalking Alarm: \\n %s.\";\n        rules.setWelinks(WeLinkSettings.builder().webhooks(webHooks).textTemplate(template).build());\n\n        AlarmRulesWatcher alarmRulesWatcher = new AlarmRulesWatcher(rules, null);\n        WeLinkHookCallback welinkHookCallback = new WeLinkHookCallback(alarmRulesWatcher);\n        List<AlarmMessage> alarmMessages = new ArrayList<>(2);\n        AlarmMessage alarmMessage = new AlarmMessage();\n        alarmMessage.setScopeId(DefaultScopeDefine.ALL);\n        alarmMessage.setRuleName(\"service_resp_time_rule\");\n        alarmMessage.setAlarmMessage(\"alarmMessage with [DefaultScopeDefine.All]\");\n        alarmMessages.add(alarmMessage);\n        AlarmMessage anotherAlarmMessage = new AlarmMessage();\n        anotherAlarmMessage.setRuleName(\"service_resp_time_rule_2\");\n        anotherAlarmMessage.setScopeId(DefaultScopeDefine.ENDPOINT);\n        anotherAlarmMessage.setAlarmMessage(\"anotherAlarmMessage with [DefaultScopeDefine.Endpoint]\");\n        alarmMessages.add(anotherAlarmMessage);\n        welinkHookCallback.doAlarm(alarmMessages);\n        Assert.assertTrue(isSuccess);\n    }\n","date":"2021-04-28 20:36:16","endLine":98,"groupId":"10507","id":4,"instanceNumber":2,"isCurCommit":1,"methodName":"testWeLinkDoAlarm","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/1b/e8f117fdeaa211151110837992ec5c17ff5f53.src","preCode":"    public void testWeLinkDoAlarm() {\n        List<WeLinkSettings.WebHookUrl> webHooks = new ArrayList<>();\n        webHooks.add(new WeLinkSettings.WebHookUrl(\"clientId\", \"clientSecret\",\n                                                   \"http://127.0.0.1:\" + port + \"/welinkhook/api/auth/v2/tickets\",\n                                                   \"http://127.0.0.1:\" + port + \"/welinkhook/api/welinkim/v1/im-service/chat/group-chat\",\n                                                   \"rebootName\", \"1,2,3\"\n        ));\n        Rules rules = new Rules();\n        String template = \"Apache SkyWalking Alarm: \\n %s.\";\n        rules.setWelinks(WeLinkSettings.builder().webhooks(webHooks).textTemplate(template).build());\n\n        AlarmRulesWatcher alarmRulesWatcher = new AlarmRulesWatcher(rules, null);\n        WeLinkHookCallback welinkHookCallback = new WeLinkHookCallback(alarmRulesWatcher);\n        List<AlarmMessage> alarmMessages = new ArrayList<>(2);\n        AlarmMessage alarmMessage = new AlarmMessage();\n        alarmMessage.setScopeId(DefaultScopeDefine.ALL);\n        alarmMessage.setRuleName(\"service_resp_time_rule\");\n        alarmMessage.setAlarmMessage(\"alarmMessage with [DefaultScopeDefine.All]\");\n        alarmMessages.add(alarmMessage);\n        AlarmMessage anotherAlarmMessage = new AlarmMessage();\n        anotherAlarmMessage.setRuleName(\"service_resp_time_rule_2\");\n        anotherAlarmMessage.setScopeId(DefaultScopeDefine.ENDPOINT);\n        anotherAlarmMessage.setAlarmMessage(\"anotherAlarmMessage with [DefaultScopeDefine.Endpoint]\");\n        alarmMessages.add(anotherAlarmMessage);\n        welinkHookCallback.doAlarm(alarmMessages);\n        Assert.assertTrue(isSuccess);\n    }\n","realPath":"oap-server/server-alarm-plugin/src/test/java/org/apache/skywalking/oap/server/core/alarm/provider/welink/WeLinkHookCallbackTest.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":72,"status":"M"}],"commitId":"d98b8ee977c908003df6afe6dc3d857d46bc559e","commitMessage":"@@@fix spelling errors(rebootName -> robotName) in WeLinkAlarm. (#6860)\n\n","date":"2021-04-28 20:36:16","modifiedFileCount":"3","status":"M","submitter":"???"}]
