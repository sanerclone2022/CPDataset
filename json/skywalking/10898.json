[{"authorTime":"2020-06-30 00:07:53","codes":[{"authorDate":"2020-06-30 00:07:53","commitOrder":1,"curCode":"    public void testExitSpanWithoutAlias() {\n        final MockReceiver mockReceiver = new MockReceiver();\n        MultiScopesAnalysisListener listener = new MultiScopesAnalysisListener(\n            mockReceiver,\n            CONFIG,\n            CACHE,\n            NAMING_CONTROL\n        );\n\n        final long startTime = System.currentTimeMillis();\n        SpanObject spanObject = SpanObject.newBuilder()\n                                          .setOperationName(\"/springMVC\")\n                                          .setStartTime(startTime)\n                                          .setEndTime(startTime + 1000L)\n                                          .setIsError(true)\n                                          .setSpanType(SpanType.Exit)\n                                          .setSpanLayer(SpanLayer.Database)\n                                          .setPeer(\"127.0.0.1:8080\")\n                                          .build();\n        final SegmentObject segment = SegmentObject.newBuilder()\n                                                   .setService(\"mock-service\")\n                                                   .setServiceInstance(\"mock-instance\")\n                                                   .addSpans(spanObject)\n                                                   .build();\n        listener.parseExit(spanObject, segment);\n        listener.build();\n\n        final List<Source> receivedSources = mockReceiver.getReceivedSources();\n        Assert.assertEquals(4, receivedSources.size());\n        final ServiceRelation serviceRelation = (ServiceRelation) receivedSources.get(0);\n        final ServiceInstanceRelation serviceInstanceRelation = (ServiceInstanceRelation) receivedSources.get(1);\n        final ServiceMeta serviceMeta = (ServiceMeta) receivedSources.get(2);\n        final DatabaseAccess databaseAccess = (DatabaseAccess) receivedSources.get(3);\n        Assert.assertEquals(\"mock-service\", serviceRelation.getSourceServiceName());\n        Assert.assertEquals(\"127.0.0.1:8080\", serviceRelation.getDestServiceName());\n        Assert.assertEquals(\"mock-instance\", serviceInstanceRelation.getSourceServiceInstanceName());\n        Assert.assertEquals(\"127.0.0.1:8080\", serviceInstanceRelation.getDestServiceInstanceName());\n        Assert.assertEquals(\"127.0.0.1:8080\", serviceMeta.getName());\n        Assert.assertEquals(NodeType.Database, serviceMeta.getNodeType());\n        Assert.assertEquals(\"127.0.0.1:8080\", databaseAccess.getName());\n    }\n","date":"2020-06-30 00:07:53","endLine":420,"groupId":"2426","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testExitSpanWithoutAlias","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/b9/441891431ac84532a772d461466fb5005d7154.src","preCode":"    public void testExitSpanWithoutAlias() {\n        final MockReceiver mockReceiver = new MockReceiver();\n        MultiScopesAnalysisListener listener = new MultiScopesAnalysisListener(\n            mockReceiver,\n            CONFIG,\n            CACHE,\n            NAMING_CONTROL\n        );\n\n        final long startTime = System.currentTimeMillis();\n        SpanObject spanObject = SpanObject.newBuilder()\n                                          .setOperationName(\"/springMVC\")\n                                          .setStartTime(startTime)\n                                          .setEndTime(startTime + 1000L)\n                                          .setIsError(true)\n                                          .setSpanType(SpanType.Exit)\n                                          .setSpanLayer(SpanLayer.Database)\n                                          .setPeer(\"127.0.0.1:8080\")\n                                          .build();\n        final SegmentObject segment = SegmentObject.newBuilder()\n                                                   .setService(\"mock-service\")\n                                                   .setServiceInstance(\"mock-instance\")\n                                                   .addSpans(spanObject)\n                                                   .build();\n        listener.parseExit(spanObject, segment);\n        listener.build();\n\n        final List<Source> receivedSources = mockReceiver.getReceivedSources();\n        Assert.assertEquals(4, receivedSources.size());\n        final ServiceRelation serviceRelation = (ServiceRelation) receivedSources.get(0);\n        final ServiceInstanceRelation serviceInstanceRelation = (ServiceInstanceRelation) receivedSources.get(1);\n        final ServiceMeta serviceMeta = (ServiceMeta) receivedSources.get(2);\n        final DatabaseAccess databaseAccess = (DatabaseAccess) receivedSources.get(3);\n        Assert.assertEquals(\"mock-service\", serviceRelation.getSourceServiceName());\n        Assert.assertEquals(\"127.0.0.1:8080\", serviceRelation.getDestServiceName());\n        Assert.assertEquals(\"mock-instance\", serviceInstanceRelation.getSourceServiceInstanceName());\n        Assert.assertEquals(\"127.0.0.1:8080\", serviceInstanceRelation.getDestServiceInstanceName());\n        Assert.assertEquals(\"127.0.0.1:8080\", serviceMeta.getName());\n        Assert.assertEquals(NodeType.Database, serviceMeta.getNodeType());\n        Assert.assertEquals(\"127.0.0.1:8080\", databaseAccess.getName());\n    }\n","realPath":"oap-server/server-receiver-plugin/skywalking-trace-receiver-plugin/src/test/java/org/apache/skywalking/oap/server/receiver/trace/provider/parser/listener/MultiScopesAnalysisListenerTest.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":380,"status":"B"},{"authorDate":"2020-06-30 00:07:53","commitOrder":1,"curCode":"    public void testExitSpanWithAlias() {\n        final MockReceiver mockReceiver = new MockReceiver();\n        MultiScopesAnalysisListener listener = new MultiScopesAnalysisListener(\n            mockReceiver,\n            CONFIG,\n            CACHE2,\n            NAMING_CONTROL\n        );\n\n        final long startTime = System.currentTimeMillis();\n        SpanObject spanObject = SpanObject.newBuilder()\n                                          .setOperationName(\"/springMVC\")\n                                          .setStartTime(startTime)\n                                          .setEndTime(startTime + 1000L)\n                                          .setIsError(true)\n                                          .setSpanType(SpanType.Exit)\n                                          .setSpanLayer(SpanLayer.MQ)\n                                          .setPeer(\"127.0.0.1:8080\")\n                                          .build();\n        final SegmentObject segment = SegmentObject.newBuilder()\n                                                   .setService(\"mock-service\")\n                                                   .setServiceInstance(\"mock-instance\")\n                                                   .addSpans(spanObject)\n                                                   .build();\n        listener.parseExit(spanObject, segment);\n        listener.build();\n\n        final List<Source> receivedSources = mockReceiver.getReceivedSources();\n        Assert.assertEquals(2, receivedSources.size());\n        final ServiceRelation serviceRelation = (ServiceRelation) receivedSources.get(0);\n        final ServiceInstanceRelation serviceInstanceRelation = (ServiceInstanceRelation) receivedSources.get(1);\n        Assert.assertEquals(\"mock-service\", serviceRelation.getSourceServiceName());\n        Assert.assertEquals(\"target-service\", serviceRelation.getDestServiceName());\n        Assert.assertEquals(\"mock-instance\", serviceInstanceRelation.getSourceServiceInstanceName());\n        Assert.assertEquals(\"target-instance\", serviceInstanceRelation.getDestServiceInstanceName());\n        mockReceiver.clear();\n    }\n","date":"2020-06-30 00:07:53","endLine":462,"groupId":"2426","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testExitSpanWithAlias","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/b9/441891431ac84532a772d461466fb5005d7154.src","preCode":"    public void testExitSpanWithAlias() {\n        final MockReceiver mockReceiver = new MockReceiver();\n        MultiScopesAnalysisListener listener = new MultiScopesAnalysisListener(\n            mockReceiver,\n            CONFIG,\n            CACHE2,\n            NAMING_CONTROL\n        );\n\n        final long startTime = System.currentTimeMillis();\n        SpanObject spanObject = SpanObject.newBuilder()\n                                          .setOperationName(\"/springMVC\")\n                                          .setStartTime(startTime)\n                                          .setEndTime(startTime + 1000L)\n                                          .setIsError(true)\n                                          .setSpanType(SpanType.Exit)\n                                          .setSpanLayer(SpanLayer.MQ)\n                                          .setPeer(\"127.0.0.1:8080\")\n                                          .build();\n        final SegmentObject segment = SegmentObject.newBuilder()\n                                                   .setService(\"mock-service\")\n                                                   .setServiceInstance(\"mock-instance\")\n                                                   .addSpans(spanObject)\n                                                   .build();\n        listener.parseExit(spanObject, segment);\n        listener.build();\n\n        final List<Source> receivedSources = mockReceiver.getReceivedSources();\n        Assert.assertEquals(2, receivedSources.size());\n        final ServiceRelation serviceRelation = (ServiceRelation) receivedSources.get(0);\n        final ServiceInstanceRelation serviceInstanceRelation = (ServiceInstanceRelation) receivedSources.get(1);\n        Assert.assertEquals(\"mock-service\", serviceRelation.getSourceServiceName());\n        Assert.assertEquals(\"target-service\", serviceRelation.getDestServiceName());\n        Assert.assertEquals(\"mock-instance\", serviceInstanceRelation.getSourceServiceInstanceName());\n        Assert.assertEquals(\"target-instance\", serviceInstanceRelation.getDestServiceInstanceName());\n        mockReceiver.clear();\n    }\n","realPath":"oap-server/server-receiver-plugin/skywalking-trace-receiver-plugin/src/test/java/org/apache/skywalking/oap/server/receiver/trace/provider/parser/listener/MultiScopesAnalysisListenerTest.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":426,"status":"B"}],"commitId":"a93f1b3c3cd446fb1154c67a7cc9d276573795e9","commitMessage":"@@@Support `logic-endpoint` series tag(s). (#4985)\n\n* Support `logic-endpoint` series tag(s).\n\n* Enhance the plugin dev doc.\n\n* Update Java-Plugin-Development-Guide.md\n\nfix punctuation\n\nCo-authored-by: caoyixiong <32847163+IanCao@users.noreply.github.com>","date":"2020-06-30 00:07:53","modifiedFileCount":"3","status":"B","submitter":"?? Wu Sheng"},{"authorTime":"2021-06-19 20:20:37","codes":[{"authorDate":"2021-06-19 20:20:37","commitOrder":2,"curCode":"    public void testExitSpanWithoutAlias() {\n        final MockReceiver mockReceiver = new MockReceiver();\n        MultiScopesAnalysisListener listener = new MultiScopesAnalysisListener(\n            mockReceiver,\n            CONFIG,\n            CACHE,\n            NAMING_CONTROL\n        );\n\n        final long startTime = System.currentTimeMillis();\n        SpanObject spanObject = SpanObject.newBuilder()\n                                          .setOperationName(\"/springMVC\")\n                                          .setStartTime(startTime)\n                                          .setEndTime(startTime + 1000L)\n                                          .setIsError(true)\n                                          .setSpanType(SpanType.Exit)\n                                          .setSpanLayer(SpanLayer.Database)\n                                          .setPeer(\"127.0.0.1:8080\")\n                                          .build();\n        final SegmentObject segment = SegmentObject.newBuilder()\n                                                   .setService(\"mock-service\")\n                                                   .setServiceInstance(\"mock-instance\")\n                                                   .addSpans(spanObject)\n                                                   .build();\n        listener.parseExit(spanObject, segment);\n        listener.build();\n\n        final List<ISource> receivedSources = mockReceiver.getReceivedSources();\n        Assert.assertEquals(4, receivedSources.size());\n        final ServiceRelation serviceRelation = (ServiceRelation) receivedSources.get(0);\n        final ServiceInstanceRelation serviceInstanceRelation = (ServiceInstanceRelation) receivedSources.get(1);\n        final ServiceMeta serviceMeta = (ServiceMeta) receivedSources.get(2);\n        final DatabaseAccess databaseAccess = (DatabaseAccess) receivedSources.get(3);\n        Assert.assertEquals(\"mock-service\", serviceRelation.getSourceServiceName());\n        Assert.assertEquals(\"127.0.0.1:8080\", serviceRelation.getDestServiceName());\n        Assert.assertEquals(\"mock-instance\", serviceInstanceRelation.getSourceServiceInstanceName());\n        Assert.assertEquals(\"127.0.0.1:8080\", serviceInstanceRelation.getDestServiceInstanceName());\n        Assert.assertEquals(\"127.0.0.1:8080\", serviceMeta.getName());\n        Assert.assertEquals(NodeType.Database, serviceMeta.getNodeType());\n        Assert.assertEquals(\"127.0.0.1:8080\", databaseAccess.getName());\n    }\n","date":"2021-06-19 20:20:37","endLine":432,"groupId":"10898","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testExitSpanWithoutAlias","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/5d/37e709221302bd990d987e42cf6aa0b0e7b6c4.src","preCode":"    public void testExitSpanWithoutAlias() {\n        final MockReceiver mockReceiver = new MockReceiver();\n        MultiScopesAnalysisListener listener = new MultiScopesAnalysisListener(\n            mockReceiver,\n            CONFIG,\n            CACHE,\n            NAMING_CONTROL\n        );\n\n        final long startTime = System.currentTimeMillis();\n        SpanObject spanObject = SpanObject.newBuilder()\n                                          .setOperationName(\"/springMVC\")\n                                          .setStartTime(startTime)\n                                          .setEndTime(startTime + 1000L)\n                                          .setIsError(true)\n                                          .setSpanType(SpanType.Exit)\n                                          .setSpanLayer(SpanLayer.Database)\n                                          .setPeer(\"127.0.0.1:8080\")\n                                          .build();\n        final SegmentObject segment = SegmentObject.newBuilder()\n                                                   .setService(\"mock-service\")\n                                                   .setServiceInstance(\"mock-instance\")\n                                                   .addSpans(spanObject)\n                                                   .build();\n        listener.parseExit(spanObject, segment);\n        listener.build();\n\n        final List<Source> receivedSources = mockReceiver.getReceivedSources();\n        Assert.assertEquals(4, receivedSources.size());\n        final ServiceRelation serviceRelation = (ServiceRelation) receivedSources.get(0);\n        final ServiceInstanceRelation serviceInstanceRelation = (ServiceInstanceRelation) receivedSources.get(1);\n        final ServiceMeta serviceMeta = (ServiceMeta) receivedSources.get(2);\n        final DatabaseAccess databaseAccess = (DatabaseAccess) receivedSources.get(3);\n        Assert.assertEquals(\"mock-service\", serviceRelation.getSourceServiceName());\n        Assert.assertEquals(\"127.0.0.1:8080\", serviceRelation.getDestServiceName());\n        Assert.assertEquals(\"mock-instance\", serviceInstanceRelation.getSourceServiceInstanceName());\n        Assert.assertEquals(\"127.0.0.1:8080\", serviceInstanceRelation.getDestServiceInstanceName());\n        Assert.assertEquals(\"127.0.0.1:8080\", serviceMeta.getName());\n        Assert.assertEquals(NodeType.Database, serviceMeta.getNodeType());\n        Assert.assertEquals(\"127.0.0.1:8080\", databaseAccess.getName());\n    }\n","realPath":"oap-server/server-receiver-plugin/skywalking-trace-receiver-plugin/src/test/java/org/apache/skywalking/oap/server/receiver/trace/provider/parser/listener/MultiScopesAnalysisListenerTest.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":392,"status":"M"},{"authorDate":"2021-06-19 20:20:37","commitOrder":2,"curCode":"    public void testExitSpanWithAlias() {\n        final MockReceiver mockReceiver = new MockReceiver();\n        MultiScopesAnalysisListener listener = new MultiScopesAnalysisListener(\n            mockReceiver,\n            CONFIG,\n            CACHE2,\n            NAMING_CONTROL\n        );\n\n        final long startTime = System.currentTimeMillis();\n        SpanObject spanObject = SpanObject.newBuilder()\n                                          .setOperationName(\"/springMVC\")\n                                          .setStartTime(startTime)\n                                          .setEndTime(startTime + 1000L)\n                                          .setIsError(true)\n                                          .setSpanType(SpanType.Exit)\n                                          .setSpanLayer(SpanLayer.MQ)\n                                          .setPeer(\"127.0.0.1:8080\")\n                                          .build();\n        final SegmentObject segment = SegmentObject.newBuilder()\n                                                   .setService(\"mock-service\")\n                                                   .setServiceInstance(\"mock-instance\")\n                                                   .addSpans(spanObject)\n                                                   .build();\n        listener.parseExit(spanObject, segment);\n        listener.build();\n\n        final List<ISource> receivedSources = mockReceiver.getReceivedSources();\n        Assert.assertEquals(2, receivedSources.size());\n        final ServiceRelation serviceRelation = (ServiceRelation) receivedSources.get(0);\n        final ServiceInstanceRelation serviceInstanceRelation = (ServiceInstanceRelation) receivedSources.get(1);\n        Assert.assertEquals(\"mock-service\", serviceRelation.getSourceServiceName());\n        Assert.assertEquals(\"target-service\", serviceRelation.getDestServiceName());\n        Assert.assertEquals(\"mock-instance\", serviceInstanceRelation.getSourceServiceInstanceName());\n        Assert.assertEquals(\"target-instance\", serviceInstanceRelation.getDestServiceInstanceName());\n        mockReceiver.clear();\n    }\n","date":"2021-06-19 20:20:37","endLine":474,"groupId":"10898","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testExitSpanWithAlias","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/5d/37e709221302bd990d987e42cf6aa0b0e7b6c4.src","preCode":"    public void testExitSpanWithAlias() {\n        final MockReceiver mockReceiver = new MockReceiver();\n        MultiScopesAnalysisListener listener = new MultiScopesAnalysisListener(\n            mockReceiver,\n            CONFIG,\n            CACHE2,\n            NAMING_CONTROL\n        );\n\n        final long startTime = System.currentTimeMillis();\n        SpanObject spanObject = SpanObject.newBuilder()\n                                          .setOperationName(\"/springMVC\")\n                                          .setStartTime(startTime)\n                                          .setEndTime(startTime + 1000L)\n                                          .setIsError(true)\n                                          .setSpanType(SpanType.Exit)\n                                          .setSpanLayer(SpanLayer.MQ)\n                                          .setPeer(\"127.0.0.1:8080\")\n                                          .build();\n        final SegmentObject segment = SegmentObject.newBuilder()\n                                                   .setService(\"mock-service\")\n                                                   .setServiceInstance(\"mock-instance\")\n                                                   .addSpans(spanObject)\n                                                   .build();\n        listener.parseExit(spanObject, segment);\n        listener.build();\n\n        final List<Source> receivedSources = mockReceiver.getReceivedSources();\n        Assert.assertEquals(2, receivedSources.size());\n        final ServiceRelation serviceRelation = (ServiceRelation) receivedSources.get(0);\n        final ServiceInstanceRelation serviceInstanceRelation = (ServiceInstanceRelation) receivedSources.get(1);\n        Assert.assertEquals(\"mock-service\", serviceRelation.getSourceServiceName());\n        Assert.assertEquals(\"target-service\", serviceRelation.getDestServiceName());\n        Assert.assertEquals(\"mock-instance\", serviceInstanceRelation.getSourceServiceInstanceName());\n        Assert.assertEquals(\"target-instance\", serviceInstanceRelation.getDestServiceInstanceName());\n        mockReceiver.clear();\n    }\n","realPath":"oap-server/server-receiver-plugin/skywalking-trace-receiver-plugin/src/test/java/org/apache/skywalking/oap/server/receiver/trace/provider/parser/listener/MultiScopesAnalysisListenerTest.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":438,"status":"M"}],"commitId":"528ee6de4010df28d31443b2d02702649025095d","commitMessage":"@@@OAL supports generating metrics from events (#7134)\n\n* OAL supports generating metrics from events\n\n* Add new dashboard for event metrics\n\n* Add some docs for event metrics","date":"2021-06-19 20:20:37","modifiedFileCount":"16","status":"M","submitter":"kezhenxu94"}]
