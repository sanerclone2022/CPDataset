[{"authorTime":"2021-02-06 21:22:58","codes":[{"authorDate":"2021-02-06 21:22:58","commitOrder":2,"curCode":"    public TemplateChangeStatus addTemplate(final DashboardSetting setting) throws IOException {\n        try {\n            final UITemplate.Builder builder = new UITemplate.Builder();\n            final UITemplate uiTemplate = setting.toEntity();\n\n            final GetResponse response = getClient().get(UITemplate.INDEX_NAME, uiTemplate.id());\n            if (response.isExists()) {\n                return TemplateChangeStatus.builder().status(false).message(\"Template exists\").build();\n            }\n\n            XContentBuilder xContentBuilder = map2builder(builder.entity2Storage(uiTemplate));\n            getClient().forceInsert(UITemplate.INDEX_NAME, uiTemplate.id(), xContentBuilder);\n            return TemplateChangeStatus.builder().status(true).build();\n        } catch (IOException e) {\n            log.error(e.getMessage(), e);\n            return TemplateChangeStatus.builder().status(false).message(\"Can't add a new template\").build();\n        }\n    }\n","date":"2021-02-06 21:22:58","endLine":92,"groupId":"3806","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"addTemplate","params":"(finalDashboardSettingsetting)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/15/33cbf5c7403de459e0b77dcd0e5eec533ec2f5.src","preCode":"    public TemplateChangeStatus addTemplate(final DashboardSetting setting) throws IOException {\n        try {\n            final UITemplate.Builder builder = new UITemplate.Builder();\n            final UITemplate uiTemplate = setting.toEntity();\n\n            final GetResponse response = getClient().get(UITemplate.INDEX_NAME, uiTemplate.id());\n            if (response.isExists()) {\n                return TemplateChangeStatus.builder().status(false).message(\"Template exists\").build();\n            }\n\n            XContentBuilder xContentBuilder = map2builder(builder.entity2Storage(uiTemplate));\n            getClient().forceInsert(UITemplate.INDEX_NAME, uiTemplate.id(), xContentBuilder);\n            return TemplateChangeStatus.builder().status(true).build();\n        } catch (IOException e) {\n            log.error(e.getMessage(), e);\n            return TemplateChangeStatus.builder().status(false).message(\"Can't add a new template\").build();\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-elasticsearch-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/elasticsearch/query/UITemplateManagementEsDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":75,"status":"MB"},{"authorDate":"2021-02-06 21:22:58","commitOrder":2,"curCode":"    public TemplateChangeStatus changeTemplate(final DashboardSetting setting) throws IOException {\n        try {\n            final UITemplate.Builder builder = new UITemplate.Builder();\n            final UITemplate uiTemplate = setting.toEntity();\n\n            final GetResponse response = getClient().get(UITemplate.INDEX_NAME, uiTemplate.id());\n            if (!response.isExists()) {\n                return TemplateChangeStatus.builder().status(false).message(\"Can't find the template\").build();\n            }\n\n            XContentBuilder xContentBuilder = map2builder(builder.entity2Storage(uiTemplate));\n            getClient().forceUpdate(UITemplate.INDEX_NAME, uiTemplate.id(), xContentBuilder);\n            return TemplateChangeStatus.builder().status(true).build();\n        } catch (IOException e) {\n            log.error(e.getMessage(), e);\n            return TemplateChangeStatus.builder().status(false).message(\"Can't find the template\").build();\n        }\n    }\n","date":"2021-02-06 21:22:58","endLine":112,"groupId":"5972","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"changeTemplate","params":"(finalDashboardSettingsetting)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/15/33cbf5c7403de459e0b77dcd0e5eec533ec2f5.src","preCode":"    public TemplateChangeStatus changeTemplate(final DashboardSetting setting) throws IOException {\n        try {\n            final UITemplate.Builder builder = new UITemplate.Builder();\n            final UITemplate uiTemplate = setting.toEntity();\n\n            final GetResponse response = getClient().get(UITemplate.INDEX_NAME, uiTemplate.id());\n            if (!response.isExists()) {\n                return TemplateChangeStatus.builder().status(false).message(\"Can't find the template\").build();\n            }\n\n            XContentBuilder xContentBuilder = map2builder(builder.entity2Storage(uiTemplate));\n            getClient().forceUpdate(UITemplate.INDEX_NAME, uiTemplate.id(), xContentBuilder);\n            return TemplateChangeStatus.builder().status(true).build();\n        } catch (IOException e) {\n            log.error(e.getMessage(), e);\n            return TemplateChangeStatus.builder().status(false).message(\"Can't find the template\").build();\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-elasticsearch-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/elasticsearch/query/UITemplateManagementEsDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":95,"status":"MB"}],"commitId":"fc23dabf37a85cfc27482dbaf25b0109114f6ef7","commitMessage":"@@@Support multiple implementations of StorageBuilder in different storage implementations - stage 1. (#6334)\n\n","date":"2021-02-06 21:22:58","modifiedFileCount":"74","status":"M","submitter":"?? Wu Sheng"},{"authorTime":"2021-09-06 15:21:35","codes":[{"authorDate":"2021-09-06 15:21:35","commitOrder":3,"curCode":"    public TemplateChangeStatus addTemplate(final DashboardSetting setting) {\n        try {\n            final UITemplate.Builder builder = new UITemplate.Builder();\n            final UITemplate uiTemplate = setting.toEntity();\n\n            final boolean exist = getClient().existDoc(UITemplate.INDEX_NAME, uiTemplate.id());\n            if (exist) {\n                return TemplateChangeStatus.builder().status(false).message(\"Template exists\")\n                                           .build();\n            }\n\n            final Map<String, Object> xContentBuilder = builder.entity2Storage(uiTemplate);\n            getClient().forceInsert(UITemplate.INDEX_NAME, uiTemplate.id(), xContentBuilder);\n            return TemplateChangeStatus.builder().status(true).build();\n        } catch (Exception e) {\n            log.error(e.getMessage(), e);\n            return TemplateChangeStatus.builder().status(false).message(\"Can't add a new template\")\n                                       .build();\n        }\n    }\n","date":"2021-09-06 15:21:35","endLine":99,"groupId":"10844","id":3,"instanceNumber":1,"isCurCommit":1,"methodName":"addTemplate","params":"(finalDashboardSettingsetting)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/ac/48a263beae8a8fbc4fb313f7fdf9ecd047c5dc.src","preCode":"    public TemplateChangeStatus addTemplate(final DashboardSetting setting) throws IOException {\n        try {\n            final UITemplate.Builder builder = new UITemplate.Builder();\n            final UITemplate uiTemplate = setting.toEntity();\n\n            final GetResponse response = getClient().get(UITemplate.INDEX_NAME, uiTemplate.id());\n            if (response.isExists()) {\n                return TemplateChangeStatus.builder().status(false).message(\"Template exists\").build();\n            }\n\n            XContentBuilder xContentBuilder = map2builder(builder.entity2Storage(uiTemplate));\n            getClient().forceInsert(UITemplate.INDEX_NAME, uiTemplate.id(), xContentBuilder);\n            return TemplateChangeStatus.builder().status(true).build();\n        } catch (IOException e) {\n            log.error(e.getMessage(), e);\n            return TemplateChangeStatus.builder().status(false).message(\"Can't add a new template\").build();\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-elasticsearch-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/elasticsearch/query/UITemplateManagementEsDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":80,"status":"M"},{"authorDate":"2021-09-06 15:21:35","commitOrder":3,"curCode":"    public TemplateChangeStatus changeTemplate(final DashboardSetting setting) {\n        try {\n            final UITemplate.Builder builder = new UITemplate.Builder();\n            final UITemplate uiTemplate = setting.toEntity();\n\n            final boolean exist = getClient().existDoc(UITemplate.INDEX_NAME, uiTemplate.id());\n            if (!exist) {\n                return TemplateChangeStatus.builder().status(false)\n                                           .message(\"Can't find the template\").build();\n            }\n\n            final Map<String, Object> xContentBuilder = builder.entity2Storage(uiTemplate);\n            getClient().forceUpdate(UITemplate.INDEX_NAME, uiTemplate.id(), xContentBuilder);\n            return TemplateChangeStatus.builder().status(true).build();\n        } catch (Exception e) {\n            log.error(e.getMessage(), e);\n            return TemplateChangeStatus.builder().status(false).message(\"Can't find the template\")\n                                       .build();\n        }\n    }\n","date":"2021-09-06 15:21:35","endLine":121,"groupId":"10844","id":4,"instanceNumber":2,"isCurCommit":1,"methodName":"changeTemplate","params":"(finalDashboardSettingsetting)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/ac/48a263beae8a8fbc4fb313f7fdf9ecd047c5dc.src","preCode":"    public TemplateChangeStatus changeTemplate(final DashboardSetting setting) throws IOException {\n        try {\n            final UITemplate.Builder builder = new UITemplate.Builder();\n            final UITemplate uiTemplate = setting.toEntity();\n\n            final GetResponse response = getClient().get(UITemplate.INDEX_NAME, uiTemplate.id());\n            if (!response.isExists()) {\n                return TemplateChangeStatus.builder().status(false).message(\"Can't find the template\").build();\n            }\n\n            XContentBuilder xContentBuilder = map2builder(builder.entity2Storage(uiTemplate));\n            getClient().forceUpdate(UITemplate.INDEX_NAME, uiTemplate.id(), xContentBuilder);\n            return TemplateChangeStatus.builder().status(true).build();\n        } catch (IOException e) {\n            log.error(e.getMessage(), e);\n            return TemplateChangeStatus.builder().status(false).message(\"Can't find the template\").build();\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-elasticsearch-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/elasticsearch/query/UITemplateManagementEsDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":102,"status":"M"}],"commitId":"26b81a2e5991ecdd2bde0f7071264cb80bb235cf","commitMessage":"@@@Rebuilt ElasticSearch client on top of their REST API (#7634)\n\n","date":"2021-09-06 15:21:35","modifiedFileCount":"60","status":"M","submitter":"kezhenxu94"}]
