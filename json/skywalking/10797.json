[{"authorTime":"2018-10-28 10:31:58","codes":[{"authorDate":"2018-10-28 10:31:58","commitOrder":1,"curCode":"    public List<Service> getAllServices(long startTimestamp, long endTimestamp) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.MODEL_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=? limit 100\");\n        condition.add(BooleanUtils.FALSE);\n\n        Connection connection = null;\n        try {\n            connection = h2Client.getConnection();\n            ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]));\n            return buildServices(resultSet);\n        } catch (SQLException e) {\n            throw new IOException(e);\n        } finally {\n            h2Client.close(connection);\n        }\n    }\n","date":"2018-10-28 10:31:58","endLine":140,"groupId":"6128","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"getAllServices","params":"(longstartTimestamp@longendTimestamp)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/ed/344b0566b18fc649a3e23abe0238f4ac665bdf.src","preCode":"    public List<Service> getAllServices(long startTimestamp, long endTimestamp) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.MODEL_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=? limit 100\");\n        condition.add(BooleanUtils.FALSE);\n\n        Connection connection = null;\n        try {\n            connection = h2Client.getConnection();\n            ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]));\n            return buildServices(resultSet);\n        } catch (SQLException e) {\n            throw new IOException(e);\n        } finally {\n            h2Client.close(connection);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2MetadataQueryDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":122,"status":"B"},{"authorDate":"2018-10-28 10:31:58","commitOrder":1,"curCode":"    @Override public List<Service> searchServices(long startTimestamp, long endTimestamp,\n        String keyword) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.MODEL_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=?\");\n        condition.add(BooleanUtils.FALSE);\n        if (StringUtils.isNotEmpty(keyword)) {\n            sql.append(\" and \").append(ServiceInventory.NAME).append(\" like \\\"%\").append(keyword).append(\"%\\\"\");\n        }\n        sql.append(\" limit 100\");\n\n        Connection connection = null;\n        try {\n            connection = h2Client.getConnection();\n            ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]));\n            return buildServices(resultSet);\n        } catch (SQLException e) {\n            throw new IOException(e);\n        } finally {\n            h2Client.close(connection);\n        }\n    }\n","date":"2018-10-28 10:31:58","endLine":165,"groupId":"6129","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"searchServices","params":"(longstartTimestamp@longendTimestamp@Stringkeyword)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/ed/344b0566b18fc649a3e23abe0238f4ac665bdf.src","preCode":"    @Override public List<Service> searchServices(long startTimestamp, long endTimestamp,\n        String keyword) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.MODEL_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=?\");\n        condition.add(BooleanUtils.FALSE);\n        if (StringUtils.isNotEmpty(keyword)) {\n            sql.append(\" and \").append(ServiceInventory.NAME).append(\" like \\\"%\").append(keyword).append(\"%\\\"\");\n        }\n        sql.append(\" limit 100\");\n\n        Connection connection = null;\n        try {\n            connection = h2Client.getConnection();\n            ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]));\n            return buildServices(resultSet);\n        } catch (SQLException e) {\n            throw new IOException(e);\n        } finally {\n            h2Client.close(connection);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2MetadataQueryDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":142,"status":"B"}],"commitId":"a9489b706739d9ca994997ac071013c9e4afd0ce","commitMessage":"@@@H2 storage (#1712)\n\n* H2 storage code skeleton.\n\n* Add batch dao for H2.\n\n* Fix wrong refactor.\n\n* Add codes of other dao. No metric dao.  wait for @peng-yongsheng new PR.\n\n* Change license of distribution\n\n* Add topology query in H2.\n\n* Add more daos.\n\n* Add some daos.\n\n* Commit all H2 daos. Wait @peng-yongsheng to submit new IAggregationQueryDAO interface.\n\n* Fix some CIs\n\n* Fix wrong refactor.  which causes h2 plugin failure.\n\n* Fix all codes of H2 storage. :) and CI should pass. No test.\n\n* Fix CI and typo\n\n* Fix connection closed.\n\n* Fix register bug\n\n* no message\n\n* Fixed service inventory register bug.\n\n* Fix a compile issue.\n\n* Sync change\n\n* Reset es as default storage.\n\n* Fix rat\n\n* Fix H2 compile issue.\n\n* Fix bugs for H2 storage.\n\n* Fix bug in mesh.\n\n* 1. Fix Thermodynamic query bug\n2. Fix service inventory query bug\n3. Fix missing traceid in trace query bug\n\n* Fix query bug.\n\n* Submit reverse caused by prev PR.\n\n* Fix duplicate spans.\n\n* Use H2 as default storage implementor.\n\n* Fix bug in topology query.\n\n* Fix CI\n\n* Fix rat\n\n* Fix two query in H2 storage.\n\n* Fix H2 query\n\n* Make release running in H2 mode and develop mode running is ES mode in default\n","date":"2018-10-28 10:31:58","modifiedFileCount":"17","status":"B","submitter":"?? Wu Sheng"},{"authorTime":"2018-11-28 22:59:02","codes":[{"authorDate":"2018-11-28 22:59:02","commitOrder":2,"curCode":"    public List<Service> getAllServices(long startTimestamp, long endTimestamp) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.MODEL_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=? limit 100\");\n        condition.add(BooleanUtils.FALSE);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","date":"2018-11-28 22:59:02","endLine":127,"groupId":"961","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"getAllServices","params":"(longstartTimestamp@longendTimestamp)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/b6/c66815a7e67849bf91bd02b4ddeb948e9369e2.src","preCode":"    public List<Service> getAllServices(long startTimestamp, long endTimestamp) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.MODEL_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=? limit 100\");\n        condition.add(BooleanUtils.FALSE);\n\n        Connection connection = null;\n        try {\n            connection = h2Client.getConnection();\n            ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]));\n            return buildServices(resultSet);\n        } catch (SQLException e) {\n            throw new IOException(e);\n        } finally {\n            h2Client.close(connection);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2MetadataQueryDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":112,"status":"M"},{"authorDate":"2018-11-28 22:59:02","commitOrder":2,"curCode":"    @Override public List<Service> searchServices(long startTimestamp, long endTimestamp,\n        String keyword) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.MODEL_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=?\");\n        condition.add(BooleanUtils.FALSE);\n        if (StringUtils.isNotEmpty(keyword)) {\n            sql.append(\" and \").append(ServiceInventory.NAME).append(\" like \\\"%\").append(keyword).append(\"%\\\"\");\n        }\n        sql.append(\" limit 100\");\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","date":"2018-11-28 22:59:02","endLine":149,"groupId":"0","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"searchServices","params":"(longstartTimestamp@longendTimestamp@Stringkeyword)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/b6/c66815a7e67849bf91bd02b4ddeb948e9369e2.src","preCode":"    @Override public List<Service> searchServices(long startTimestamp, long endTimestamp,\n        String keyword) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.MODEL_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=?\");\n        condition.add(BooleanUtils.FALSE);\n        if (StringUtils.isNotEmpty(keyword)) {\n            sql.append(\" and \").append(ServiceInventory.NAME).append(\" like \\\"%\").append(keyword).append(\"%\\\"\");\n        }\n        sql.append(\" limit 100\");\n\n        Connection connection = null;\n        try {\n            connection = h2Client.getConnection();\n            ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]));\n            return buildServices(resultSet);\n        } catch (SQLException e) {\n            throw new IOException(e);\n        } finally {\n            h2Client.close(connection);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2MetadataQueryDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":129,"status":"M"}],"commitId":"215eab74288328e13f2c0fecf222168632685ff9","commitMessage":"@@@Mysql style storage implementation (#1964)\n\nAlso fixed several bugs in this merge.","date":"2018-11-28 22:59:02","modifiedFileCount":"33","status":"M","submitter":"?? Wu Sheng"},{"authorTime":"2018-12-13 00:14:41","codes":[{"authorDate":"2018-11-28 22:59:02","commitOrder":3,"curCode":"    public List<Service> getAllServices(long startTimestamp, long endTimestamp) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.MODEL_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=? limit 100\");\n        condition.add(BooleanUtils.FALSE);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","date":"2018-11-28 22:59:02","endLine":127,"groupId":"961","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"getAllServices","params":"(longstartTimestamp@longendTimestamp)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/b6/c66815a7e67849bf91bd02b4ddeb948e9369e2.src","preCode":"    public List<Service> getAllServices(long startTimestamp, long endTimestamp) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.MODEL_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=? limit 100\");\n        condition.add(BooleanUtils.FALSE);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2MetadataQueryDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":112,"status":"N"},{"authorDate":"2018-12-13 00:14:41","commitOrder":3,"curCode":"    @Override public List<Service> searchServices(long startTimestamp, long endTimestamp,\n        String keyword) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.MODEL_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=?\");\n        condition.add(BooleanUtils.FALSE);\n        if (!Strings.isNullOrEmpty(keyword)) {\n            sql.append(\" and \").append(ServiceInventory.NAME).append(\" like \\\"%\").append(keyword).append(\"%\\\"\");\n        }\n        sql.append(\" limit 100\");\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","date":"2018-12-13 00:14:41","endLine":138,"groupId":"4954","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"searchServices","params":"(longstartTimestamp@longendTimestamp@Stringkeyword)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/55/76609a7899c1392e592c5dc411ff82131b1afb.src","preCode":"    @Override public List<Service> searchServices(long startTimestamp, long endTimestamp,\n        String keyword) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.MODEL_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=?\");\n        condition.add(BooleanUtils.FALSE);\n        if (StringUtils.isNotEmpty(keyword)) {\n            sql.append(\" and \").append(ServiceInventory.NAME).append(\" like \\\"%\").append(keyword).append(\"%\\\"\");\n        }\n        sql.append(\" limit 100\");\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2MetadataQueryDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":118,"status":"M"}],"commitId":"dfe2b08599d37f4f6fb0fdd53763565c9918ca2c","commitMessage":"@@@[OAP Server][Cluster Plugin] Provide consul cluster plugin (#2036)\n\n* Provide consul cluster plugin.\n\n* Change log and application config file.\n\n* Add consul's config item into the docker's application.yml.\n\n* Fixed bug.\n\n* Add consul description into  readme.\n\n* Add okhttp component license.\n","date":"2018-12-13 00:14:41","modifiedFileCount":"25","status":"M","submitter":"??? pengys"},{"authorTime":"2019-01-27 08:27:34","codes":[{"authorDate":"2018-11-28 22:59:02","commitOrder":4,"curCode":"    public List<Service> getAllServices(long startTimestamp, long endTimestamp) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.MODEL_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=? limit 100\");\n        condition.add(BooleanUtils.FALSE);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","date":"2018-11-28 22:59:02","endLine":127,"groupId":"961","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"getAllServices","params":"(longstartTimestamp@longendTimestamp)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/b6/c66815a7e67849bf91bd02b4ddeb948e9369e2.src","preCode":"    public List<Service> getAllServices(long startTimestamp, long endTimestamp) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.MODEL_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=? limit 100\");\n        condition.add(BooleanUtils.FALSE);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2MetadataQueryDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":112,"status":"N"},{"authorDate":"2019-01-27 08:27:34","commitOrder":4,"curCode":"    public List<Service> searchServices(long startTimestamp, long endTimestamp,\n                                        String keyword) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.MODEL_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=?\");\n        condition.add(BooleanUtils.FALSE);\n        if (!Strings.isNullOrEmpty(keyword)) {\n            sql.append(\" and \").append(ServiceInventory.NAME).append(\" like \\\"%\").append(keyword).append(\"%\\\"\");\n        }\n        sql.append(\" limit 100\");\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","date":"2019-01-27 08:27:34","endLine":182,"groupId":"4954","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"searchServices","params":"(longstartTimestamp@longendTimestamp@Stringkeyword)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/12/aabeb4b9db0179574ac462110aaa4bf758d589.src","preCode":"    @Override public List<Service> searchServices(long startTimestamp, long endTimestamp,\n        String keyword) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.MODEL_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=?\");\n        condition.add(BooleanUtils.FALSE);\n        if (!Strings.isNullOrEmpty(keyword)) {\n            sql.append(\" and \").append(ServiceInventory.NAME).append(\" like \\\"%\").append(keyword).append(\"%\\\"\");\n        }\n        sql.append(\" limit 100\");\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2MetadataQueryDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":162,"status":"M"}],"commitId":"f7ca26729dbc2db3d9aa83df72d3ee9a74fc557c","commitMessage":"@@@Database metrics provided. (#2025)\n\n* Add Database source\n\n* Add DatabaseSource source and database_* script for oal\n\n* Enable Database_Indicator\n\n* Add file license\n\n* Rename DatabaseService to ClientDatabase. In the future.  we may have real database server monitoring.\n\n* Add query database from H2\n\n* refactor\n\n* update submodule\n\n* refactor\n\n* Fix style\n\n* Fix: unknown tag error\n\n* fix checkstyle\n","date":"2019-01-27 08:27:34","modifiedFileCount":"12","status":"M","submitter":"Lemon"},{"authorTime":"2019-04-17 19:25:46","codes":[{"authorDate":"2019-04-17 19:25:46","commitOrder":5,"curCode":"    public List<Service> getAllServices(long startTimestamp, long endTimestamp) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.MODEL_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=? limit \").append(metadataQueryMaxSize);\n        condition.add(BooleanUtils.FALSE);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","date":"2019-04-17 19:25:46","endLine":144,"groupId":"2745","id":9,"instanceNumber":1,"isCurCommit":0,"methodName":"getAllServices","params":"(longstartTimestamp@longendTimestamp)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/a9/35df261cd6b73140b31727b7f58fb79eed2cb0.src","preCode":"    public List<Service> getAllServices(long startTimestamp, long endTimestamp) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.MODEL_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=? limit 100\");\n        condition.add(BooleanUtils.FALSE);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2MetadataQueryDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":129,"status":"M"},{"authorDate":"2019-04-17 19:25:46","commitOrder":5,"curCode":"    public List<Service> searchServices(long startTimestamp, long endTimestamp,\n        String keyword) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.MODEL_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=?\");\n        condition.add(BooleanUtils.FALSE);\n        if (!Strings.isNullOrEmpty(keyword)) {\n            sql.append(\" and \").append(ServiceInventory.NAME).append(\" like \\\"%\").append(keyword).append(\"%\\\"\");\n        }\n        sql.append(\" limit \").append(metadataQueryMaxSize);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","date":"2019-04-17 19:25:46","endLine":200,"groupId":"2747","id":10,"instanceNumber":2,"isCurCommit":0,"methodName":"searchServices","params":"(longstartTimestamp@longendTimestamp@Stringkeyword)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/a9/35df261cd6b73140b31727b7f58fb79eed2cb0.src","preCode":"    public List<Service> searchServices(long startTimestamp, long endTimestamp,\n                                        String keyword) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.MODEL_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=?\");\n        condition.add(BooleanUtils.FALSE);\n        if (!Strings.isNullOrEmpty(keyword)) {\n            sql.append(\" and \").append(ServiceInventory.NAME).append(\" like \\\"%\").append(keyword).append(\"%\\\"\");\n        }\n        sql.append(\" limit 100\");\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2MetadataQueryDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":180,"status":"M"}],"commitId":"0b2e355b52cd5f3735d113720af73b3de244d2b8","commitMessage":"@@@extend Metadata limit (#2492)\n\n* fix default MetadataQuery Max size.\n\n* revert mysql\n","date":"2019-04-17 19:25:46","modifiedFileCount":"7","status":"M","submitter":"Jared Tan"},{"authorTime":"2019-05-15 22:42:38","codes":[{"authorDate":"2019-05-15 22:42:38","commitOrder":6,"curCode":"    public List<Service> getAllServices(long startTimestamp, long endTimestamp) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.INDEX_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=? limit \").append(metadataQueryMaxSize);\n        condition.add(BooleanUtils.FALSE);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","date":"2019-05-15 22:42:38","endLine":144,"groupId":"2745","id":11,"instanceNumber":1,"isCurCommit":0,"methodName":"getAllServices","params":"(longstartTimestamp@longendTimestamp)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/71/53c0762ed173a4fce559d09eef50a7ffeba435.src","preCode":"    public List<Service> getAllServices(long startTimestamp, long endTimestamp) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.MODEL_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=? limit \").append(metadataQueryMaxSize);\n        condition.add(BooleanUtils.FALSE);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2MetadataQueryDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":129,"status":"M"},{"authorDate":"2019-05-15 22:42:38","commitOrder":6,"curCode":"    public List<Service> searchServices(long startTimestamp, long endTimestamp,\n        String keyword) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.INDEX_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=?\");\n        condition.add(BooleanUtils.FALSE);\n        if (!Strings.isNullOrEmpty(keyword)) {\n            sql.append(\" and \").append(ServiceInventory.NAME).append(\" like \\\"%\").append(keyword).append(\"%\\\"\");\n        }\n        sql.append(\" limit \").append(metadataQueryMaxSize);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","date":"2019-05-15 22:42:38","endLine":200,"groupId":"2747","id":12,"instanceNumber":2,"isCurCommit":0,"methodName":"searchServices","params":"(longstartTimestamp@longendTimestamp@Stringkeyword)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/71/53c0762ed173a4fce559d09eef50a7ffeba435.src","preCode":"    public List<Service> searchServices(long startTimestamp, long endTimestamp,\n        String keyword) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.MODEL_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=?\");\n        condition.add(BooleanUtils.FALSE);\n        if (!Strings.isNullOrEmpty(keyword)) {\n            sql.append(\" and \").append(ServiceInventory.NAME).append(\" like \\\"%\").append(keyword).append(\"%\\\"\");\n        }\n        sql.append(\" limit \").append(metadataQueryMaxSize);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2MetadataQueryDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":180,"status":"M"}],"commitId":"63fb961c0d1de02f053045c3bf80361ebd7bd58d","commitMessage":"@@@New OAP annotations.  they are friendly for streaming loader. (#2670)\n\n* New stream annotation.\n- Inventory annotation example:\n@Stream(name = ServiceInventory.INDEX_NAME.  scopeId = DefaultScopeDefine.SERVICE_INVENTORY.  storage = @Storage(builder = ServiceInventory.Builder.class.  deleteHistory = false).  kind = StreamKind.Inventory)\n\n- Metrics annotation example:\n@Stream(name = ServiceRelationClientSideMetrics.INDEX_NAME.  scopeId = DefaultScopeDefine.SERVICE_RELATION.  storage = @Storage(builder = ServiceRelationClientSideMetrics.Builder.class).  kind = StreamKind.Metrics)\n\n- Record annotation example:\n@Stream(name = SegmentRecord.INDEX_NAME.  scopeId = DefaultScopeDefine.SEGMENT.  storage = @Storage(builder = SegmentRecord.Builder.class).  kind = StreamKind.Record)\n\n- TopN annotation example:\n@Stream(name = TopNDatabaseStatement.INDEX_NAME.  scopeId = DefaultScopeDefine.DATABASE_SLOW_STATEMENT.  storage = @Storage(builder = TopNDatabaseStatement.Builder.class).  kind = StreamKind.TopN)\n\n* no message\n\n* Stream annotation finish.\n\n* Make stream processors to be the singleton class.\n\n* Fixed the compile errors.\n\n* Modify the OAL module for this annotation refactor.\n\n* Add apache license header.\n\n* Duplicate import.\n\n* Fixed check style error.\n","date":"2019-05-15 22:42:38","modifiedFileCount":"55","status":"M","submitter":"??? pengys"},{"authorTime":"2020-01-01 18:01:41","codes":[{"authorDate":"2020-01-01 18:01:41","commitOrder":7,"curCode":"    public List<Service> getAllServices(long startTimestamp, long endTimestamp) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.INDEX_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=?\");\n        condition.add(BooleanUtils.FALSE);\n        sql.append(\" and \").append(ServiceInventory.NODE_TYPE).append(\"=?\");\n        condition.add(NodeType.Normal.value());\n        sql.append(\" limit \").append(metadataQueryMaxSize);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","date":"2020-01-01 18:01:41","endLine":148,"groupId":"6849","id":13,"instanceNumber":1,"isCurCommit":0,"methodName":"getAllServices","params":"(longstartTimestamp@longendTimestamp)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/73/9914281d61c017e5d541b4996b87797a2e7dc6.src","preCode":"    public List<Service> getAllServices(long startTimestamp, long endTimestamp) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.INDEX_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=? limit \").append(metadataQueryMaxSize);\n        condition.add(BooleanUtils.FALSE);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2MetadataQueryDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":130,"status":"M"},{"authorDate":"2020-01-01 18:01:41","commitOrder":7,"curCode":"    public List<Service> searchServices(long startTimestamp, long endTimestamp,\n        String keyword) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.INDEX_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=?\");\n        condition.add(BooleanUtils.FALSE);\n        sql.append(\" and \").append(ServiceInventory.NODE_TYPE).append(\"=?\");\n        condition.add(NodeType.Normal.value());\n        if (!Strings.isNullOrEmpty(keyword)) {\n            sql.append(\" and \").append(ServiceInventory.NAME).append(\" like \\\"%\").append(keyword).append(\"%\\\"\");\n        }\n        sql.append(\" limit \").append(metadataQueryMaxSize);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","date":"2020-01-01 18:01:41","endLine":227,"groupId":"5424","id":14,"instanceNumber":2,"isCurCommit":0,"methodName":"searchServices","params":"(longstartTimestamp@longendTimestamp@Stringkeyword)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/73/9914281d61c017e5d541b4996b87797a2e7dc6.src","preCode":"    public List<Service> searchServices(long startTimestamp, long endTimestamp,\n        String keyword) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.INDEX_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=?\");\n        condition.add(BooleanUtils.FALSE);\n        if (!Strings.isNullOrEmpty(keyword)) {\n            sql.append(\" and \").append(ServiceInventory.NAME).append(\" like \\\"%\").append(keyword).append(\"%\\\"\");\n        }\n        sql.append(\" limit \").append(metadataQueryMaxSize);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2MetadataQueryDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":205,"status":"M"}],"commitId":"6c20f4a41bf9c56f0e3916061c286c23bcccdc62","commitMessage":"@@@Add service type from register and support browser as service type (#4157)\n\n* Add service type from register and support browser as service type\n\n* Add service type at agent side.\n\n* Fix format.\n\n* Fix a test.\n\n* Fix formats.\n\nCo-authored-by: kezhenxu94 <kezhenxu94@163.com>\n","date":"2020-01-01 18:01:41","modifiedFileCount":"13","status":"M","submitter":"?? Wu Sheng"},{"authorTime":"2020-04-10 11:03:24","codes":[{"authorDate":"2020-04-10 11:03:24","commitOrder":8,"curCode":"    public List<Service> getAllServices(long startTimestamp, long endTimestamp) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceTraffic.INDEX_NAME).append(\" where \");\n        sql.append(ServiceTraffic.NODE_TYPE).append(\"=?\");\n        condition.add(NodeType.Normal.value());\n        sql.append(\" limit \").append(metadataQueryMaxSize);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(\n                connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","date":"2020-04-10 11:03:24","endLine":119,"groupId":"2047","id":15,"instanceNumber":1,"isCurCommit":0,"methodName":"getAllServices","params":"(longstartTimestamp@longendTimestamp)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/0b/e97799d8aeabf0057d92b3533748fd0679f441.src","preCode":"    public List<Service> getAllServices(long startTimestamp, long endTimestamp) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.INDEX_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=?\");\n        condition.add(BooleanUtils.FALSE);\n        sql.append(\" and \").append(ServiceInventory.NODE_TYPE).append(\"=?\");\n        condition.add(NodeType.Normal.value());\n        sql.append(\" limit \").append(metadataQueryMaxSize);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(\n                connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2MetadataQueryDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":103,"status":"M"},{"authorDate":"2020-04-10 11:03:24","commitOrder":8,"curCode":"    public List<Service> searchServices(long startTimestamp, long endTimestamp, String keyword) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceTraffic.INDEX_NAME).append(\" where \");\n        sql.append(ServiceTraffic.NODE_TYPE).append(\"=?\");\n        condition.add(NodeType.Normal.value());\n        if (!Strings.isNullOrEmpty(keyword)) {\n            sql.append(\" and \").append(ServiceTraffic.NAME).append(\" like \\\"%\").append(keyword).append(\"%\\\"\");\n        }\n        sql.append(\" limit \").append(metadataQueryMaxSize);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(\n                connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","date":"2020-04-10 11:03:24","endLine":185,"groupId":"5424","id":16,"instanceNumber":2,"isCurCommit":0,"methodName":"searchServices","params":"(longstartTimestamp@longendTimestamp@Stringkeyword)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/0b/e97799d8aeabf0057d92b3533748fd0679f441.src","preCode":"    public List<Service> searchServices(long startTimestamp, long endTimestamp, String keyword) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceInventory.INDEX_NAME).append(\" where \");\n        setTimeRangeCondition(sql, condition, startTimestamp, endTimestamp);\n        sql.append(\" and \").append(ServiceInventory.IS_ADDRESS).append(\"=?\");\n        condition.add(BooleanUtils.FALSE);\n        sql.append(\" and \").append(ServiceInventory.NODE_TYPE).append(\"=?\");\n        condition.add(NodeType.Normal.value());\n        if (!Strings.isNullOrEmpty(keyword)) {\n            sql.append(\" and \").append(ServiceInventory.NAME).append(\" like \\\"%\").append(keyword).append(\"%\\\"\");\n        }\n        sql.append(\" limit \").append(metadataQueryMaxSize);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(\n                connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2MetadataQueryDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":166,"status":"M"}],"commitId":"6fe2041b470113e626cb3f41e3789261d31f2548","commitMessage":"@@@Make 8.0.0 Core available. New protocol and register removed. (#4599)\n\nHere are the list of changes we made in this pull request. Top 3 are the principle changes.  others are following these principles.\n1. New agent and mesh report protocol. \n2. New agent header protocol. \n3. Service register.  instance register and network address register have been removed permanently.\n4. Service traffic.  instance traffic and network alias metrics are added to replace the service.  instance and network address inventory.\n5. Register process has been removed.\n6. Metrics stream process supports insert only mode.  especially for traffic entities.\n7. Metrics stream process supports no-downsampling mode for traffic entities and network alias.\n8. Remove all register mechanism and cache in the java agent.\n9. Remove MONTH step in GraphQL query.\n10. Update UI to remove MONTH step query.  the max query range is 60 days now.\n11. Simplify the TTL to metrics and record. And the unit has been formatted in Day unit. No specific TTL for ElasticSearch storage.\n12. Buffer mechanism of trace receiver and mesh receiver has been removed due to no register.\n13. New service id.  instance id and endpoint id rules.  including service relation.  instance relation and endpoint relation id rules.\n14. Java agent support `keep tracing` mode.  meaning.  agent generating tracing context even the backend is unconnected/unavailable.\n15. Plugin test tool up to date.  in order to support new protocol.\n16. Plugin tests expected data files updated.\n17. E2E tests updated.\n18. Telemetry of Grafana config has been merged into one.\n19. Documentation updates.\n20. [TBD] InfluxDB storage implementation is not available.  need @dmsolr to fix later.  in order to reduce the master change block by this PR.","date":"2020-04-10 11:03:24","modifiedFileCount":"342","status":"M","submitter":"?? Wu Sheng"},{"authorTime":"2020-06-26 10:08:10","codes":[{"authorDate":"2020-04-10 11:03:24","commitOrder":9,"curCode":"    public List<Service> getAllServices(long startTimestamp, long endTimestamp) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceTraffic.INDEX_NAME).append(\" where \");\n        sql.append(ServiceTraffic.NODE_TYPE).append(\"=?\");\n        condition.add(NodeType.Normal.value());\n        sql.append(\" limit \").append(metadataQueryMaxSize);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(\n                connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","date":"2020-04-10 11:03:24","endLine":119,"groupId":"2047","id":17,"instanceNumber":1,"isCurCommit":0,"methodName":"getAllServices","params":"(longstartTimestamp@longendTimestamp)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/0b/e97799d8aeabf0057d92b3533748fd0679f441.src","preCode":"    public List<Service> getAllServices(long startTimestamp, long endTimestamp) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceTraffic.INDEX_NAME).append(\" where \");\n        sql.append(ServiceTraffic.NODE_TYPE).append(\"=?\");\n        condition.add(NodeType.Normal.value());\n        sql.append(\" limit \").append(metadataQueryMaxSize);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(\n                connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2MetadataQueryDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":103,"status":"N"},{"authorDate":"2020-06-26 10:08:10","commitOrder":9,"curCode":"    public List<Service> searchServices(long startTimestamp, long endTimestamp, String keyword) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceTraffic.INDEX_NAME).append(\" where \");\n        sql.append(ServiceTraffic.NODE_TYPE).append(\"=?\");\n        condition.add(NodeType.Normal.value());\n        if (!Strings.isNullOrEmpty(keyword)) {\n            sql.append(\" and \").append(ServiceTraffic.NAME).append(\" like concat('%',?,'%')\");\n            condition.add(keyword);\n        }\n        sql.append(\" limit \").append(metadataQueryMaxSize);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(\n                connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","date":"2020-06-26 10:08:10","endLine":141,"groupId":"658","id":18,"instanceNumber":2,"isCurCommit":0,"methodName":"searchServices","params":"(longstartTimestamp@longendTimestamp@Stringkeyword)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/a2/2b14cd2e3ce41b5486f7170419727c2e807788.src","preCode":"    public List<Service> searchServices(long startTimestamp, long endTimestamp, String keyword) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceTraffic.INDEX_NAME).append(\" where \");\n        sql.append(ServiceTraffic.NODE_TYPE).append(\"=?\");\n        condition.add(NodeType.Normal.value());\n        if (!Strings.isNullOrEmpty(keyword)) {\n            sql.append(\" and \").append(ServiceTraffic.NAME).append(\" like \\\"%\").append(keyword).append(\"%\\\"\");\n        }\n        sql.append(\" limit \").append(metadataQueryMaxSize);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(\n                connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2MetadataQueryDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":121,"status":"M"}],"commitId":"fb7912c6bdda06a233f4b3e18e71a87d3e4a8951","commitMessage":"@@@fix fuzzy query sql injection (#4970)\n\n","date":"2020-06-26 10:08:10","modifiedFileCount":"4","status":"M","submitter":"yangy"},{"authorTime":"2020-11-17 22:45:32","codes":[{"authorDate":"2020-11-17 22:45:32","commitOrder":10,"curCode":"    public List<Service> getAllServices(final String group) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceTraffic.INDEX_NAME).append(\" where \");\n        sql.append(ServiceTraffic.NODE_TYPE).append(\"=?\");\n        condition.add(NodeType.Normal.value());\n        if (StringUtil.isNotEmpty(group)) {\n            sql.append(ServiceTraffic.GROUP).append(\"=?\");\n            condition.add(group);\n        }\n        sql.append(\" limit \").append(metadataQueryMaxSize);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(\n                connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","date":"2020-11-17 22:45:32","endLine":79,"groupId":"0","id":19,"instanceNumber":1,"isCurCommit":0,"methodName":"getAllServices","params":"(finalStringgroup)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/b7/c25d4613657c8d893255fe6d534d7932de58df.src","preCode":"    public List<Service> getAllServices(long startTimestamp, long endTimestamp) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceTraffic.INDEX_NAME).append(\" where \");\n        sql.append(ServiceTraffic.NODE_TYPE).append(\"=?\");\n        condition.add(NodeType.Normal.value());\n        sql.append(\" limit \").append(metadataQueryMaxSize);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(\n                connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2MetadataQueryDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":59,"status":"M"},{"authorDate":"2020-11-17 22:45:32","commitOrder":10,"curCode":"    public List<Service> searchServices(String keyword) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceTraffic.INDEX_NAME).append(\" where \");\n        sql.append(ServiceTraffic.NODE_TYPE).append(\"=?\");\n        condition.add(NodeType.Normal.value());\n        if (!Strings.isNullOrEmpty(keyword)) {\n            sql.append(\" and \").append(ServiceTraffic.NAME).append(\" like concat('%',?,'%')\");\n            condition.add(keyword);\n        }\n        sql.append(\" limit \").append(metadataQueryMaxSize);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(\n                connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","date":"2020-11-17 22:45:32","endLine":146,"groupId":"658","id":20,"instanceNumber":2,"isCurCommit":0,"methodName":"searchServices","params":"(Stringkeyword)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/b7/c25d4613657c8d893255fe6d534d7932de58df.src","preCode":"    public List<Service> searchServices(long startTimestamp, long endTimestamp, String keyword) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceTraffic.INDEX_NAME).append(\" where \");\n        sql.append(ServiceTraffic.NODE_TYPE).append(\"=?\");\n        condition.add(NodeType.Normal.value());\n        if (!Strings.isNullOrEmpty(keyword)) {\n            sql.append(\" and \").append(ServiceTraffic.NAME).append(\" like concat('%',?,'%')\");\n            condition.add(keyword);\n        }\n        sql.append(\" limit \").append(metadataQueryMaxSize);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(\n                connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2MetadataQueryDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":126,"status":"M"}],"commitId":"c9202af1ee4f48acaa20814788da8b224bfcfe0d","commitMessage":"@@@Support group in the service traffic and service list query. (#5851)\n\n* Support group in the service traffic and service list query.\n","date":"2020-11-17 22:45:32","modifiedFileCount":"11","status":"M","submitter":"?? Wu Sheng"},{"authorTime":"2020-11-17 22:45:32","codes":[{"authorDate":"2020-11-25 21:07:03","commitOrder":11,"curCode":"    public List<Service> getAllServices(final String group) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceTraffic.INDEX_NAME).append(\" where \");\n        sql.append(ServiceTraffic.NODE_TYPE).append(\"=?\");\n        condition.add(NodeType.Normal.value());\n        if (StringUtil.isNotEmpty(group)) {\n            sql.append(\" and \").append(ServiceTraffic.GROUP).append(\"=?\");\n            condition.add(group);\n        }\n        sql.append(\" limit \").append(metadataQueryMaxSize);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(\n                connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","date":"2020-11-25 21:07:03","endLine":79,"groupId":"10797","id":21,"instanceNumber":1,"isCurCommit":0,"methodName":"getAllServices","params":"(finalStringgroup)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/87/c2d91be5feb7ffd1f1a34b3f7e7dbb778edeed.src","preCode":"    public List<Service> getAllServices(final String group) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceTraffic.INDEX_NAME).append(\" where \");\n        sql.append(ServiceTraffic.NODE_TYPE).append(\"=?\");\n        condition.add(NodeType.Normal.value());\n        if (StringUtil.isNotEmpty(group)) {\n            sql.append(ServiceTraffic.GROUP).append(\"=?\");\n            condition.add(group);\n        }\n        sql.append(\" limit \").append(metadataQueryMaxSize);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(\n                connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2MetadataQueryDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":59,"status":"M"},{"authorDate":"2020-11-17 22:45:32","commitOrder":11,"curCode":"    public List<Service> searchServices(String keyword) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceTraffic.INDEX_NAME).append(\" where \");\n        sql.append(ServiceTraffic.NODE_TYPE).append(\"=?\");\n        condition.add(NodeType.Normal.value());\n        if (!Strings.isNullOrEmpty(keyword)) {\n            sql.append(\" and \").append(ServiceTraffic.NAME).append(\" like concat('%',?,'%')\");\n            condition.add(keyword);\n        }\n        sql.append(\" limit \").append(metadataQueryMaxSize);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(\n                connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","date":"2020-11-17 22:45:32","endLine":146,"groupId":"10797","id":22,"instanceNumber":2,"isCurCommit":0,"methodName":"searchServices","params":"(Stringkeyword)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/b7/c25d4613657c8d893255fe6d534d7932de58df.src","preCode":"    public List<Service> searchServices(String keyword) throws IOException {\n        StringBuilder sql = new StringBuilder();\n        List<Object> condition = new ArrayList<>(5);\n        sql.append(\"select * from \").append(ServiceTraffic.INDEX_NAME).append(\" where \");\n        sql.append(ServiceTraffic.NODE_TYPE).append(\"=?\");\n        condition.add(NodeType.Normal.value());\n        if (!Strings.isNullOrEmpty(keyword)) {\n            sql.append(\" and \").append(ServiceTraffic.NAME).append(\" like concat('%',?,'%')\");\n            condition.add(keyword);\n        }\n        sql.append(\" limit \").append(metadataQueryMaxSize);\n\n        try (Connection connection = h2Client.getConnection()) {\n            try (ResultSet resultSet = h2Client.executeQuery(\n                connection, sql.toString(), condition.toArray(new Object[0]))) {\n                return buildServices(resultSet);\n            }\n        } catch (SQLException e) {\n            throw new IOException(e);\n        }\n    }\n","realPath":"oap-server/server-storage-plugin/storage-jdbc-hikaricp-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/jdbc/h2/dao/H2MetadataQueryDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":126,"status":"N"}],"commitId":"b39c4306a82b1806dc5230176096ad7ddd8cf583","commitMessage":"@@@Observing Istio control plane  (#5835)\n\n* Add Istio control plane otel MAL expressions and UI template\n* Remove OpenCensus receiver.  add OpenTelemetry receiver\n* Transfer oc receiver to ot receiver\n* Create indices on boot\n* Document istio metrics and otel receiver\n* Update CHANGES.md\n* Fix potential NPE\n* Add group to meter and cleanup istio mixer\n* Update e2e case due to the change of meter metric name\n* Update prometheus fetcher config.  fix sql builder issue of h2\n* Disable istio and so11y metrics by default.\n* Fix micrometer testcase","date":"2020-11-25 21:07:03","modifiedFileCount":"19","status":"M","submitter":"Gao Hongtao"}]
