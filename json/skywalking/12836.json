[{"authorTime":"2020-04-21 15:39:18","codes":[{"authorDate":"2020-04-21 15:39:18","commitOrder":1,"curCode":"    public List<Call.CallDetail> loadServiceRelationsDetectedAtServerSide(long startTB,\n                                                                          long endTB,\n                                                                          List<String> serviceIds) throws IOException {\n        if (CollectionUtils.isEmpty(serviceIds)) {\n            throw new UnexpectedException(\"Service id is empty\");\n        }\n\n        SearchSourceBuilder sourceBuilder = SearchSourceBuilder.searchSource();\n        sourceBuilder.size(0);\n        setQueryCondition(sourceBuilder, startTB, endTB, serviceIds);\n\n        return buildServiceRelation(sourceBuilder, ServiceRelationServerSideMetrics.INDEX_NAME, DetectPoint.SERVER);\n    }\n","date":"2020-04-21 15:39:18","endLine":63,"groupId":"1727","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"loadServiceRelationsDetectedAtServerSide","params":"(longstartTB@longendTB@List<String>serviceIds)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/21/fd086a213566a802e8505da47e0b01f9276fdf.src","preCode":"    public List<Call.CallDetail> loadServiceRelationsDetectedAtServerSide(long startTB,\n                                                                          long endTB,\n                                                                          List<String> serviceIds) throws IOException {\n        if (CollectionUtils.isEmpty(serviceIds)) {\n            throw new UnexpectedException(\"Service id is empty\");\n        }\n\n        SearchSourceBuilder sourceBuilder = SearchSourceBuilder.searchSource();\n        sourceBuilder.size(0);\n        setQueryCondition(sourceBuilder, startTB, endTB, serviceIds);\n\n        return buildServiceRelation(sourceBuilder, ServiceRelationServerSideMetrics.INDEX_NAME, DetectPoint.SERVER);\n    }\n","realPath":"oap-server/server-storage-plugin/storage-elasticsearch-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/elasticsearch/query/TopologyQueryEsDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":51,"status":"B"},{"authorDate":"2020-04-21 15:39:18","commitOrder":1,"curCode":"    public List<Call.CallDetail> loadServiceRelationDetectedAtClientSide(long startTB,\n                                                                         long endTB,\n                                                                         List<String> serviceIds) throws IOException {\n        if (CollectionUtils.isEmpty(serviceIds)) {\n            throw new UnexpectedException(\"Service id is empty\");\n        }\n\n        SearchSourceBuilder sourceBuilder = SearchSourceBuilder.searchSource();\n        sourceBuilder.size(0);\n        setQueryCondition(sourceBuilder, startTB, endTB, serviceIds);\n\n        return buildServiceRelation(sourceBuilder, ServiceRelationClientSideMetrics.INDEX_NAME, DetectPoint.CLIENT);\n    }\n","date":"2020-04-21 15:39:18","endLine":78,"groupId":"1727","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"loadServiceRelationDetectedAtClientSide","params":"(longstartTB@longendTB@List<String>serviceIds)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/21/fd086a213566a802e8505da47e0b01f9276fdf.src","preCode":"    public List<Call.CallDetail> loadServiceRelationDetectedAtClientSide(long startTB,\n                                                                         long endTB,\n                                                                         List<String> serviceIds) throws IOException {\n        if (CollectionUtils.isEmpty(serviceIds)) {\n            throw new UnexpectedException(\"Service id is empty\");\n        }\n\n        SearchSourceBuilder sourceBuilder = SearchSourceBuilder.searchSource();\n        sourceBuilder.size(0);\n        setQueryCondition(sourceBuilder, startTB, endTB, serviceIds);\n\n        return buildServiceRelation(sourceBuilder, ServiceRelationClientSideMetrics.INDEX_NAME, DetectPoint.CLIENT);\n    }\n","realPath":"oap-server/server-storage-plugin/storage-elasticsearch-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/elasticsearch/query/TopologyQueryEsDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":66,"status":"B"}],"commitId":"418bdff277179b4660e578b1837f21fd3db514cb","commitMessage":"@@@New metrics query protocol v2 (#4679)\n\n1. Support the new query protocol.  and the v1 query protocol is still supported \n2. All `numOfxxx`/`GlobalBrief` is only a mock now.  no real number.\n3. typeOfMetrics service is a mock only too.  follow up PR will implement this.","date":"2020-04-21 15:39:18","modifiedFileCount":"123","status":"B","submitter":"?? Wu Sheng"},{"authorTime":"2021-09-06 15:21:35","codes":[{"authorDate":"2021-09-06 15:21:35","commitOrder":2,"curCode":"    public List<Call.CallDetail> loadServiceRelationsDetectedAtServerSide(\n        long startTB, long endTB, List<String> serviceIds) {\n        if (CollectionUtils.isEmpty(serviceIds)) {\n            throw new UnexpectedException(\"Service id is empty\");\n        }\n\n        final SearchBuilder sourceBuilder = Search.builder().size(0);\n        setQueryCondition(sourceBuilder, startTB, endTB, serviceIds);\n\n        return buildServiceRelation(\n            sourceBuilder, ServiceRelationServerSideMetrics.INDEX_NAME, DetectPoint.SERVER);\n    }\n","date":"2021-09-06 15:21:35","endLine":63,"groupId":"12836","id":3,"instanceNumber":1,"isCurCommit":1,"methodName":"loadServiceRelationsDetectedAtServerSide","params":"(longstartTB@longendTB@List<String>serviceIds)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/9b/8b31924d64d06c554ba22709e0266ebe6d4480.src","preCode":"    public List<Call.CallDetail> loadServiceRelationsDetectedAtServerSide(long startTB,\n                                                                          long endTB,\n                                                                          List<String> serviceIds) throws IOException {\n        if (CollectionUtils.isEmpty(serviceIds)) {\n            throw new UnexpectedException(\"Service id is empty\");\n        }\n\n        SearchSourceBuilder sourceBuilder = SearchSourceBuilder.searchSource();\n        sourceBuilder.size(0);\n        setQueryCondition(sourceBuilder, startTB, endTB, serviceIds);\n\n        return buildServiceRelation(sourceBuilder, ServiceRelationServerSideMetrics.INDEX_NAME, DetectPoint.SERVER);\n    }\n","realPath":"oap-server/server-storage-plugin/storage-elasticsearch-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/elasticsearch/query/TopologyQueryEsDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":52,"status":"M"},{"authorDate":"2021-09-06 15:21:35","commitOrder":2,"curCode":"    public List<Call.CallDetail> loadServiceRelationDetectedAtClientSide(long startTB,\n                                                                         long endTB,\n                                                                         List<String> serviceIds) {\n        if (CollectionUtils.isEmpty(serviceIds)) {\n            throw new UnexpectedException(\"Service id is empty\");\n        }\n\n        final SearchBuilder sourceBuilder = Search.builder().size(0);\n        setQueryCondition(sourceBuilder, startTB, endTB, serviceIds);\n\n        return buildServiceRelation(\n            sourceBuilder, ServiceRelationClientSideMetrics.INDEX_NAME, DetectPoint.CLIENT);\n    }\n","date":"2021-09-06 15:21:35","endLine":78,"groupId":"12836","id":4,"instanceNumber":2,"isCurCommit":1,"methodName":"loadServiceRelationDetectedAtClientSide","params":"(longstartTB@longendTB@List<String>serviceIds)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-skywalking-10-0.7/blobInfo/CC_OUT/blobs/9b/8b31924d64d06c554ba22709e0266ebe6d4480.src","preCode":"    public List<Call.CallDetail> loadServiceRelationDetectedAtClientSide(long startTB,\n                                                                         long endTB,\n                                                                         List<String> serviceIds) throws IOException {\n        if (CollectionUtils.isEmpty(serviceIds)) {\n            throw new UnexpectedException(\"Service id is empty\");\n        }\n\n        SearchSourceBuilder sourceBuilder = SearchSourceBuilder.searchSource();\n        sourceBuilder.size(0);\n        setQueryCondition(sourceBuilder, startTB, endTB, serviceIds);\n\n        return buildServiceRelation(sourceBuilder, ServiceRelationClientSideMetrics.INDEX_NAME, DetectPoint.CLIENT);\n    }\n","realPath":"oap-server/server-storage-plugin/storage-elasticsearch-plugin/src/main/java/org/apache/skywalking/oap/server/storage/plugin/elasticsearch/query/TopologyQueryEsDAO.java","repoName":"skywalking","snippetEndLine":0,"snippetStartLine":0,"startLine":66,"status":"M"}],"commitId":"26b81a2e5991ecdd2bde0f7071264cb80bb235cf","commitMessage":"@@@Rebuilt ElasticSearch client on top of their REST API (#7634)\n\n","date":"2021-09-06 15:21:35","modifiedFileCount":"60","status":"M","submitter":"kezhenxu94"}]
