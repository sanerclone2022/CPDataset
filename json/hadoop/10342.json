[{"authorTime":"2018-01-27 04:36:45","codes":[{"authorDate":"2018-01-27 04:36:45","commitOrder":1,"curCode":"  public void testKillMapTaskWhileFailFinishing() throws Exception {\n    MockEventHandler eventHandler = new MockEventHandler();\n    TaskAttemptImpl taImpl = createTaskAttemptImpl(eventHandler);\n\n    taImpl.handle(new TaskAttemptFailEvent(taImpl.getID()));\n\n    assertEquals(\"Task attempt is not in FAILED state\", taImpl.getState(),\n        TaskAttemptState.FAILED);\n    assertEquals(\"Task attempt's internal state is not \" +\n        \"FAIL_FINISHING_CONTAINER\", taImpl.getInternalState(),\n        TaskAttemptStateInternal.FAIL_FINISHING_CONTAINER);\n\n    \r\n    \r\n    taImpl.handle(new TaskAttemptEvent(taImpl.getID(),\n        TaskAttemptEventType.TA_KILL));\n    assertEquals(\"Task attempt is not in RUNNING state\", taImpl.getState(),\n        TaskAttemptState.FAILED);\n    assertEquals(\"Task attempt's internal state is not \" +\n        \"FAIL_FINISHING_CONTAINER\", taImpl.getInternalState(),\n        TaskAttemptStateInternal.FAIL_FINISHING_CONTAINER);\n\n    taImpl.handle(new TaskAttemptEvent(taImpl.getID(),\n        TaskAttemptEventType.TA_TIMED_OUT));\n    assertEquals(\"Task attempt's internal state is not FAIL_CONTAINER_CLEANUP\",\n        taImpl.getInternalState(),\n        TaskAttemptStateInternal.FAIL_CONTAINER_CLEANUP);\n\n    taImpl.handle(new TaskAttemptEvent(taImpl.getID(),\n        TaskAttemptEventType.TA_CONTAINER_CLEANED));\n    assertEquals(\"Task attempt's internal state is not FAIL_TASK_CLEANUP\",\n        taImpl.getInternalState(),\n        TaskAttemptStateInternal.FAIL_TASK_CLEANUP);\n\n    taImpl.handle(new TaskAttemptEvent(taImpl.getID(),\n        TaskAttemptEventType.TA_CLEANUP_DONE));\n\n    assertEquals(\"Task attempt is not in KILLED state\", taImpl.getState(),\n        TaskAttemptState.FAILED);\n\n    assertFalse(\"InternalError occurred\", eventHandler.internalError);\n  }\n","date":"2018-01-27 04:36:45","endLine":1398,"groupId":"32163","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testKillMapTaskWhileFailFinishing","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-hadoop-10-0.7/blobInfo/CC_OUT/blobs/43/571a9b824e21a78cc9dd0cdc7d9e09f085f2d7.src","preCode":"  public void testKillMapTaskWhileFailFinishing() throws Exception {\n    MockEventHandler eventHandler = new MockEventHandler();\n    TaskAttemptImpl taImpl = createTaskAttemptImpl(eventHandler);\n\n    taImpl.handle(new TaskAttemptFailEvent(taImpl.getID()));\n\n    assertEquals(\"Task attempt is not in FAILED state\", taImpl.getState(),\n        TaskAttemptState.FAILED);\n    assertEquals(\"Task attempt's internal state is not \" +\n        \"FAIL_FINISHING_CONTAINER\", taImpl.getInternalState(),\n        TaskAttemptStateInternal.FAIL_FINISHING_CONTAINER);\n\n    \r\n    \r\n    taImpl.handle(new TaskAttemptEvent(taImpl.getID(),\n        TaskAttemptEventType.TA_KILL));\n    assertEquals(\"Task attempt is not in RUNNING state\", taImpl.getState(),\n        TaskAttemptState.FAILED);\n    assertEquals(\"Task attempt's internal state is not \" +\n        \"FAIL_FINISHING_CONTAINER\", taImpl.getInternalState(),\n        TaskAttemptStateInternal.FAIL_FINISHING_CONTAINER);\n\n    taImpl.handle(new TaskAttemptEvent(taImpl.getID(),\n        TaskAttemptEventType.TA_TIMED_OUT));\n    assertEquals(\"Task attempt's internal state is not FAIL_CONTAINER_CLEANUP\",\n        taImpl.getInternalState(),\n        TaskAttemptStateInternal.FAIL_CONTAINER_CLEANUP);\n\n    taImpl.handle(new TaskAttemptEvent(taImpl.getID(),\n        TaskAttemptEventType.TA_CONTAINER_CLEANED));\n    assertEquals(\"Task attempt's internal state is not FAIL_TASK_CLEANUP\",\n        taImpl.getInternalState(),\n        TaskAttemptStateInternal.FAIL_TASK_CLEANUP);\n\n    taImpl.handle(new TaskAttemptEvent(taImpl.getID(),\n        TaskAttemptEventType.TA_CLEANUP_DONE));\n\n    assertEquals(\"Task attempt is not in KILLED state\", taImpl.getState(),\n        TaskAttemptState.FAILED);\n\n    assertFalse(\"InternalError occurred\", eventHandler.internalError);\n  }\n","realPath":"hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/job/impl/TestTaskAttempt.java","repoName":"hadoop","snippetEndLine":0,"snippetStartLine":0,"startLine":1357,"status":"B"},{"authorDate":"2018-01-27 04:36:45","commitOrder":1,"curCode":"  public void testTimeoutWhileFailFinishing() throws Exception {\n    MockEventHandler eventHandler = new MockEventHandler();\n    TaskAttemptImpl taImpl = createTaskAttemptImpl(eventHandler);\n\n    taImpl.handle(new TaskAttemptFailEvent(taImpl.getID()));\n\n    assertEquals(\"Task attempt is not in RUNNING state\", taImpl.getState(),\n        TaskAttemptState.FAILED);\n    assertEquals(\"Task attempt's internal state is not \" +\n        \"FAIL_FINISHING_CONTAINER\", taImpl.getInternalState(),\n        TaskAttemptStateInternal.FAIL_FINISHING_CONTAINER);\n\n    \r\n    \r\n    taImpl.handle(new TaskAttemptEvent(taImpl.getID(),\n        TaskAttemptEventType.TA_TIMED_OUT));\n    assertEquals(\"Task attempt's internal state is not FAIL_CONTAINER_CLEANUP\",\n        taImpl.getInternalState(),\n        TaskAttemptStateInternal.FAIL_CONTAINER_CLEANUP);\n\n    assertFalse(\"InternalError occurred\", eventHandler.internalError);\n  }\n","date":"2018-01-27 04:36:45","endLine":1504,"groupId":"32163","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testTimeoutWhileFailFinishing","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-hadoop-10-0.7/blobInfo/CC_OUT/blobs/43/571a9b824e21a78cc9dd0cdc7d9e09f085f2d7.src","preCode":"  public void testTimeoutWhileFailFinishing() throws Exception {\n    MockEventHandler eventHandler = new MockEventHandler();\n    TaskAttemptImpl taImpl = createTaskAttemptImpl(eventHandler);\n\n    taImpl.handle(new TaskAttemptFailEvent(taImpl.getID()));\n\n    assertEquals(\"Task attempt is not in RUNNING state\", taImpl.getState(),\n        TaskAttemptState.FAILED);\n    assertEquals(\"Task attempt's internal state is not \" +\n        \"FAIL_FINISHING_CONTAINER\", taImpl.getInternalState(),\n        TaskAttemptStateInternal.FAIL_FINISHING_CONTAINER);\n\n    \r\n    \r\n    taImpl.handle(new TaskAttemptEvent(taImpl.getID(),\n        TaskAttemptEventType.TA_TIMED_OUT));\n    assertEquals(\"Task attempt's internal state is not FAIL_CONTAINER_CLEANUP\",\n        taImpl.getInternalState(),\n        TaskAttemptStateInternal.FAIL_CONTAINER_CLEANUP);\n\n    assertFalse(\"InternalError occurred\", eventHandler.internalError);\n  }\n","realPath":"hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/job/impl/TestTaskAttempt.java","repoName":"hadoop","snippetEndLine":0,"snippetStartLine":0,"startLine":1483,"status":"B"}],"commitId":"a37e7f0ad8b68c7ed16c242bedf62f4cde48d6fd","commitMessage":"@@@MAPREDUCE-7022. Fast fail rogue jobs based on task scratch dir size. Contributed by Johan Gustavsson\n","date":"2018-01-27 04:36:45","modifiedFileCount":"19","status":"B","submitter":"Jason Lowe"},{"authorTime":"2019-08-12 19:54:13","codes":[{"authorDate":"2019-08-12 19:54:13","commitOrder":2,"curCode":"  public void testKillMapTaskWhileFailFinishing() throws Exception {\n    MockEventHandler eventHandler = new MockEventHandler();\n    TaskAttemptImpl taImpl = createTaskAttemptImpl(eventHandler);\n\n    taImpl.handle(new TaskAttemptFailEvent(taImpl.getID()));\n\n    assertThat(taImpl.getState())\n        .withFailMessage(\"Task attempt is not in FAILED state\")\n        .isEqualTo(TaskAttemptState.FAILED);\n    assertThat(taImpl.getInternalState())\n        .withFailMessage(\"Task attempt's internal state is not \" +\n            \"FAIL_FINISHING_CONTAINER\")\n        .isEqualTo(TaskAttemptStateInternal.FAIL_FINISHING_CONTAINER);\n\n    \r\n    \r\n    taImpl.handle(new TaskAttemptEvent(taImpl.getID(),\n        TaskAttemptEventType.TA_KILL));\n    assertThat(taImpl.getState())\n        .withFailMessage(\"Task attempt is not in FAILED state\")\n        .isEqualTo(TaskAttemptState.FAILED);\n    assertThat(taImpl.getInternalState())\n        .withFailMessage(\"Task attempt's internal state is not \" +\n            \"FAIL_FINISHING_CONTAINER\")\n        .isEqualTo(TaskAttemptStateInternal.FAIL_FINISHING_CONTAINER);\n\n    taImpl.handle(new TaskAttemptEvent(taImpl.getID(),\n        TaskAttemptEventType.TA_TIMED_OUT));\n    assertThat(taImpl.getInternalState())\n        .withFailMessage(\"Task attempt's internal state is not \" +\n            \"FAIL_CONTAINER_CLEANUP\")\n        .isEqualTo(TaskAttemptStateInternal.FAIL_CONTAINER_CLEANUP);\n\n    taImpl.handle(new TaskAttemptEvent(taImpl.getID(),\n        TaskAttemptEventType.TA_CONTAINER_CLEANED));\n    assertThat(taImpl.getInternalState())\n        .withFailMessage(\"Task attempt's internal state is not \" +\n            \"FAIL_TASK_CLEANUP\")\n        .isEqualTo(TaskAttemptStateInternal.FAIL_TASK_CLEANUP);\n\n    taImpl.handle(new TaskAttemptEvent(taImpl.getID(),\n        TaskAttemptEventType.TA_CLEANUP_DONE));\n\n    assertThat(taImpl.getState())\n        .withFailMessage(\"Task attempt is not in FAILED state\")\n        .isEqualTo(TaskAttemptState.FAILED);\n\n    assertFalse(\"InternalError occurred\", eventHandler.internalError);\n  }\n","date":"2019-08-12 19:54:28","endLine":1496,"groupId":"10342","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testKillMapTaskWhileFailFinishing","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-hadoop-10-0.7/blobInfo/CC_OUT/blobs/d0/9531c641c0ccbfce7d83a3d258ec03fe3c7e58.src","preCode":"  public void testKillMapTaskWhileFailFinishing() throws Exception {\n    MockEventHandler eventHandler = new MockEventHandler();\n    TaskAttemptImpl taImpl = createTaskAttemptImpl(eventHandler);\n\n    taImpl.handle(new TaskAttemptFailEvent(taImpl.getID()));\n\n    assertEquals(\"Task attempt is not in FAILED state\", taImpl.getState(),\n        TaskAttemptState.FAILED);\n    assertEquals(\"Task attempt's internal state is not \" +\n        \"FAIL_FINISHING_CONTAINER\", taImpl.getInternalState(),\n        TaskAttemptStateInternal.FAIL_FINISHING_CONTAINER);\n\n    \r\n    \r\n    taImpl.handle(new TaskAttemptEvent(taImpl.getID(),\n        TaskAttemptEventType.TA_KILL));\n    assertEquals(\"Task attempt is not in RUNNING state\", taImpl.getState(),\n        TaskAttemptState.FAILED);\n    assertEquals(\"Task attempt's internal state is not \" +\n        \"FAIL_FINISHING_CONTAINER\", taImpl.getInternalState(),\n        TaskAttemptStateInternal.FAIL_FINISHING_CONTAINER);\n\n    taImpl.handle(new TaskAttemptEvent(taImpl.getID(),\n        TaskAttemptEventType.TA_TIMED_OUT));\n    assertEquals(\"Task attempt's internal state is not FAIL_CONTAINER_CLEANUP\",\n        taImpl.getInternalState(),\n        TaskAttemptStateInternal.FAIL_CONTAINER_CLEANUP);\n\n    taImpl.handle(new TaskAttemptEvent(taImpl.getID(),\n        TaskAttemptEventType.TA_CONTAINER_CLEANED));\n    assertEquals(\"Task attempt's internal state is not FAIL_TASK_CLEANUP\",\n        taImpl.getInternalState(),\n        TaskAttemptStateInternal.FAIL_TASK_CLEANUP);\n\n    taImpl.handle(new TaskAttemptEvent(taImpl.getID(),\n        TaskAttemptEventType.TA_CLEANUP_DONE));\n\n    assertEquals(\"Task attempt is not in KILLED state\", taImpl.getState(),\n        TaskAttemptState.FAILED);\n\n    assertFalse(\"InternalError occurred\", eventHandler.internalError);\n  }\n","realPath":"hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/job/impl/TestTaskAttempt.java","repoName":"hadoop","snippetEndLine":0,"snippetStartLine":0,"startLine":1448,"status":"M"},{"authorDate":"2019-08-12 19:54:13","commitOrder":2,"curCode":"  public void testTimeoutWhileFailFinishing() throws Exception {\n    MockEventHandler eventHandler = new MockEventHandler();\n    TaskAttemptImpl taImpl = createTaskAttemptImpl(eventHandler);\n\n    taImpl.handle(new TaskAttemptFailEvent(taImpl.getID()));\n\n    assertThat(taImpl.getState())\n        .withFailMessage(\"Task attempt is not in FAILED state\")\n        .isEqualTo(TaskAttemptState.FAILED);\n    assertThat(taImpl.getInternalState())\n        .withFailMessage(\"Task attempt's internal state is not \" +\n            \"FAIL_FINISHING_CONTAINER\")\n        .isEqualTo(TaskAttemptStateInternal.FAIL_FINISHING_CONTAINER);\n\n    \r\n    \r\n    taImpl.handle(new TaskAttemptEvent(taImpl.getID(),\n        TaskAttemptEventType.TA_TIMED_OUT));\n    assertThat(taImpl.getInternalState())\n        .withFailMessage(\"Task attempt's internal state is not \" +\n            \"FAIL_CONTAINER_CLEANUP\")\n        .isEqualTo(TaskAttemptStateInternal.FAIL_CONTAINER_CLEANUP);\n\n    assertFalse(\"InternalError occurred\", eventHandler.internalError);\n  }\n","date":"2019-08-12 19:54:28","endLine":1617,"groupId":"10342","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testTimeoutWhileFailFinishing","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-hadoop-10-0.7/blobInfo/CC_OUT/blobs/d0/9531c641c0ccbfce7d83a3d258ec03fe3c7e58.src","preCode":"  public void testTimeoutWhileFailFinishing() throws Exception {\n    MockEventHandler eventHandler = new MockEventHandler();\n    TaskAttemptImpl taImpl = createTaskAttemptImpl(eventHandler);\n\n    taImpl.handle(new TaskAttemptFailEvent(taImpl.getID()));\n\n    assertEquals(\"Task attempt is not in RUNNING state\", taImpl.getState(),\n        TaskAttemptState.FAILED);\n    assertEquals(\"Task attempt's internal state is not \" +\n        \"FAIL_FINISHING_CONTAINER\", taImpl.getInternalState(),\n        TaskAttemptStateInternal.FAIL_FINISHING_CONTAINER);\n\n    \r\n    \r\n    taImpl.handle(new TaskAttemptEvent(taImpl.getID(),\n        TaskAttemptEventType.TA_TIMED_OUT));\n    assertEquals(\"Task attempt's internal state is not FAIL_CONTAINER_CLEANUP\",\n        taImpl.getInternalState(),\n        TaskAttemptStateInternal.FAIL_CONTAINER_CLEANUP);\n\n    assertFalse(\"InternalError occurred\", eventHandler.internalError);\n  }\n","realPath":"hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/test/java/org/apache/hadoop/mapreduce/v2/app/job/impl/TestTaskAttempt.java","repoName":"hadoop","snippetEndLine":0,"snippetStartLine":0,"startLine":1593,"status":"M"}],"commitId":"ac6c4f0b290477017798491a4bd77fa9f107871c","commitMessage":"@@@MAPREDUCE-7197. Fix order of actual and expected expression in assert statements. Contributed by Adam Antal\n","date":"2019-08-12 19:54:28","modifiedFileCount":"75","status":"M","submitter":"Szilard Nemeth"}]
