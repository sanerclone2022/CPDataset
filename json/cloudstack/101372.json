[{"authorTime":"2018-11-30 21:27:31","codes":[{"authorDate":"2018-11-30 21:27:31","commitOrder":1,"curCode":"    private void detachVolumesFromVm(List<VolumeVO> volumes) {\n\n        for (VolumeVO volume : volumes) {\n\n            Volume detachResult = _volumeService.detachVolumeViaDestroyVM(volume.getInstanceId(), volume.getId());\n\n            if (detachResult == null) {\n                s_logger.error(\"DestroyVM remove volume - failed to detach and delete volume \" + volume.getInstanceId() + \" from instance \" + volume.getId());\n            }\n        }\n    }\n","date":"2018-11-30 21:27:31","endLine":6589,"groupId":"10196","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"detachVolumesFromVm","params":"(List<VolumeVO>volumes)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cloudstack-10-0.7/blobInfo/CC_OUT/blobs/eb/de735ef7c02e3214a2fa041af98b1ec148ff4a.src","preCode":"    private void detachVolumesFromVm(List<VolumeVO> volumes) {\n\n        for (VolumeVO volume : volumes) {\n\n            Volume detachResult = _volumeService.detachVolumeViaDestroyVM(volume.getInstanceId(), volume.getId());\n\n            if (detachResult == null) {\n                s_logger.error(\"DestroyVM remove volume - failed to detach and delete volume \" + volume.getInstanceId() + \" from instance \" + volume.getId());\n            }\n        }\n    }\n","realPath":"server/src/main/java/com/cloud/vm/UserVmManagerImpl.java","repoName":"cloudstack","snippetEndLine":0,"snippetStartLine":0,"startLine":6579,"status":"B"},{"authorDate":"2018-11-30 21:27:31","commitOrder":1,"curCode":"    private void deleteVolumesFromVm(List<VolumeVO> volumes) {\n\n        for (VolumeVO volume : volumes) {\n\n            boolean deleteResult = _volumeService.deleteVolume(volume.getId(), CallContext.current().getCallingAccount());\n\n            if (!deleteResult) {\n                s_logger.error(\"DestroyVM remove volume - failed to delete volume \" + volume.getInstanceId() + \" from instance \" + volume.getId());\n            }\n        }\n    }\n","date":"2018-11-30 21:27:31","endLine":6601,"groupId":"10199","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"deleteVolumesFromVm","params":"(List<VolumeVO>volumes)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cloudstack-10-0.7/blobInfo/CC_OUT/blobs/eb/de735ef7c02e3214a2fa041af98b1ec148ff4a.src","preCode":"    private void deleteVolumesFromVm(List<VolumeVO> volumes) {\n\n        for (VolumeVO volume : volumes) {\n\n            boolean deleteResult = _volumeService.deleteVolume(volume.getId(), CallContext.current().getCallingAccount());\n\n            if (!deleteResult) {\n                s_logger.error(\"DestroyVM remove volume - failed to delete volume \" + volume.getInstanceId() + \" from instance \" + volume.getId());\n            }\n        }\n    }\n","realPath":"server/src/main/java/com/cloud/vm/UserVmManagerImpl.java","repoName":"cloudstack","snippetEndLine":0,"snippetStartLine":0,"startLine":6591,"status":"B"}],"commitId":"525ddfb7171ec44a1938324f3f62134f3cf13fdd","commitMessage":"@@@Destroyvm also removes volumes (#2793)\n\n* Allow user to detach and delete volumes when destroyinh VMs\n\n* Minor code refactoring\n","date":"2018-11-30 21:27:31","modifiedFileCount":"5","status":"B","submitter":"Henko"},{"authorTime":"2021-08-28 12:11:52","codes":[{"authorDate":"2018-11-30 21:27:31","commitOrder":2,"curCode":"    private void detachVolumesFromVm(List<VolumeVO> volumes) {\n\n        for (VolumeVO volume : volumes) {\n\n            Volume detachResult = _volumeService.detachVolumeViaDestroyVM(volume.getInstanceId(), volume.getId());\n\n            if (detachResult == null) {\n                s_logger.error(\"DestroyVM remove volume - failed to detach and delete volume \" + volume.getInstanceId() + \" from instance \" + volume.getId());\n            }\n        }\n    }\n","date":"2018-11-30 21:27:31","endLine":6589,"groupId":"101372","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"detachVolumesFromVm","params":"(List<VolumeVO>volumes)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cloudstack-10-0.7/blobInfo/CC_OUT/blobs/eb/de735ef7c02e3214a2fa041af98b1ec148ff4a.src","preCode":"    private void detachVolumesFromVm(List<VolumeVO> volumes) {\n\n        for (VolumeVO volume : volumes) {\n\n            Volume detachResult = _volumeService.detachVolumeViaDestroyVM(volume.getInstanceId(), volume.getId());\n\n            if (detachResult == null) {\n                s_logger.error(\"DestroyVM remove volume - failed to detach and delete volume \" + volume.getInstanceId() + \" from instance \" + volume.getId());\n            }\n        }\n    }\n","realPath":"server/src/main/java/com/cloud/vm/UserVmManagerImpl.java","repoName":"cloudstack","snippetEndLine":0,"snippetStartLine":0,"startLine":6579,"status":"N"},{"authorDate":"2021-08-28 12:11:52","commitOrder":2,"curCode":"    private void deleteVolumesFromVm(List<VolumeVO> volumes, boolean expunge) {\n\n        for (VolumeVO volume : volumes) {\n\n            Volume result = _volumeService.destroyVolume(volume.getId(), CallContext.current().getCallingAccount(), expunge, false);\n\n            if (result == null) {\n                s_logger.error(\"DestroyVM remove volume - failed to delete volume \" + volume.getInstanceId() + \" from instance \" + volume.getId());\n            }\n        }\n    }\n","date":"2021-08-28 12:11:52","endLine":7584,"groupId":"101372","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"deleteVolumesFromVm","params":"(List<VolumeVO>volumes@booleanexpunge)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cloudstack-10-0.7/blobInfo/CC_OUT/blobs/53/4aa1b33b5a9c1bebe818dca939150ba005a9a2.src","preCode":"    private void deleteVolumesFromVm(List<VolumeVO> volumes) {\n\n        for (VolumeVO volume : volumes) {\n\n            boolean deleteResult = _volumeService.deleteVolume(volume.getId(), CallContext.current().getCallingAccount());\n\n            if (!deleteResult) {\n                s_logger.error(\"DestroyVM remove volume - failed to delete volume \" + volume.getInstanceId() + \" from instance \" + volume.getId());\n            }\n        }\n    }\n","realPath":"server/src/main/java/com/cloud/vm/UserVmManagerImpl.java","repoName":"cloudstack","snippetEndLine":0,"snippetStartLine":0,"startLine":7574,"status":"M"}],"commitId":"8860fc8143af25f8f1f5dbe49eb90ccd750fd31a","commitMessage":"@@@Merge branch '4.15' into main\n","date":"2021-08-28 12:11:52","modifiedFileCount":"1","status":"M","submitter":"nicolas"}]
