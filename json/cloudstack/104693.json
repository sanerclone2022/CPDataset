[{"authorTime":"2018-01-20 05:49:27","codes":[{"authorDate":"2018-01-20 05:49:27","commitOrder":1,"curCode":"    private DownloadAnswer handleDownloadProgressCmd(SecondaryStorageResource resource, DownloadProgressCommand cmd) {\n        String jobId = cmd.getJobId();\n        DownloadAnswer answer;\n        DownloadJob dj = null;\n        if (jobId != null) {\n            dj = jobs.get(jobId);\n        }\n        if (dj == null) {\n            if (cmd.getRequest() == RequestType.GET_OR_RESTART) {\n                DownloadCommand dcmd = new DownloadCommand(cmd);\n                return handleDownloadCommand(resource, dcmd);\n            } else {\n                return new DownloadAnswer(\"Cannot find job\", com.cloud.storage.VMTemplateStorageResourceAssoc.Status.UNKNOWN);\n            }\n        }\n        TemplateDownloader td = dj.getTemplateDownloader();\n        switch (cmd.getRequest()) {\n        case GET_STATUS:\n            break;\n        case ABORT:\n            td.stopDownload();\n            sleep();\n            break;\n        case RESTART:\n            td.stopDownload();\n            sleep();\n            threadPool.execute(td);\n            break;\n        case PURGE:\n            td.stopDownload();\n            answer =\n                    new DownloadAnswer(jobId, getDownloadPct(jobId), getDownloadError(jobId), getDownloadStatus2(jobId), getDownloadLocalPath(jobId),\n                            getInstallPath(jobId), getDownloadTemplateSize(jobId), getDownloadTemplatePhysicalSize(jobId), getDownloadCheckSum(jobId));\n            jobs.remove(jobId);\n            return answer;\n        default:\n            break; \r\n        }\n        return new DownloadAnswer(jobId, getDownloadPct(jobId), getDownloadError(jobId), getDownloadStatus2(jobId), getDownloadLocalPath(jobId), getInstallPath(jobId),\n                getDownloadTemplateSize(jobId), getDownloadTemplatePhysicalSize(jobId), getDownloadCheckSum(jobId));\n    }\n","date":"2018-01-20 05:49:27","endLine":779,"groupId":"14996","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"handleDownloadProgressCmd","params":"(SecondaryStorageResourceresource@DownloadProgressCommandcmd)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cloudstack-10-0.7/blobInfo/CC_OUT/blobs/5f/a13a34cfc35830fdd76799838ab8af27b720d9.src","preCode":"    private DownloadAnswer handleDownloadProgressCmd(SecondaryStorageResource resource, DownloadProgressCommand cmd) {\n        String jobId = cmd.getJobId();\n        DownloadAnswer answer;\n        DownloadJob dj = null;\n        if (jobId != null) {\n            dj = jobs.get(jobId);\n        }\n        if (dj == null) {\n            if (cmd.getRequest() == RequestType.GET_OR_RESTART) {\n                DownloadCommand dcmd = new DownloadCommand(cmd);\n                return handleDownloadCommand(resource, dcmd);\n            } else {\n                return new DownloadAnswer(\"Cannot find job\", com.cloud.storage.VMTemplateStorageResourceAssoc.Status.UNKNOWN);\n            }\n        }\n        TemplateDownloader td = dj.getTemplateDownloader();\n        switch (cmd.getRequest()) {\n        case GET_STATUS:\n            break;\n        case ABORT:\n            td.stopDownload();\n            sleep();\n            break;\n        case RESTART:\n            td.stopDownload();\n            sleep();\n            threadPool.execute(td);\n            break;\n        case PURGE:\n            td.stopDownload();\n            answer =\n                    new DownloadAnswer(jobId, getDownloadPct(jobId), getDownloadError(jobId), getDownloadStatus2(jobId), getDownloadLocalPath(jobId),\n                            getInstallPath(jobId), getDownloadTemplateSize(jobId), getDownloadTemplatePhysicalSize(jobId), getDownloadCheckSum(jobId));\n            jobs.remove(jobId);\n            return answer;\n        default:\n            break; \r\n        }\n        return new DownloadAnswer(jobId, getDownloadPct(jobId), getDownloadError(jobId), getDownloadStatus2(jobId), getDownloadLocalPath(jobId), getInstallPath(jobId),\n                getDownloadTemplateSize(jobId), getDownloadTemplatePhysicalSize(jobId), getDownloadCheckSum(jobId));\n    }\n","realPath":"services/secondary-storage/server/src/main/java/org/apache/cloudstack/storage/template/DownloadManagerImpl.java","repoName":"cloudstack","snippetEndLine":0,"snippetStartLine":0,"startLine":739,"status":"B"},{"authorDate":"2018-01-20 05:49:27","commitOrder":1,"curCode":"    private UploadAnswer handleUploadProgressCmd(UploadProgressCommand cmd) {\n        String jobId = cmd.getJobId();\n        UploadAnswer answer;\n        UploadJob uj = null;\n        if (jobId != null)\n            uj = jobs.get(jobId);\n        if (uj == null) {\n            return new UploadAnswer(null, 0, \"Cannot find job\", com.cloud.storage.UploadVO.Status.UNKNOWN, \"\", \"\", 0);\n        }\n        TemplateUploader td = uj.getTemplateUploader();\n        switch (cmd.getRequest()) {\n        case GET_STATUS:\n            break;\n        case ABORT:\n            td.stopUpload();\n            sleep();\n            break;\n            \r\n\r\n\r\n\r\n\n        case PURGE:\n            td.stopUpload();\n            answer =\n                    new UploadAnswer(jobId, getUploadPct(jobId), getUploadError(jobId), getUploadStatus2(jobId), getUploadLocalPath(jobId), getInstallPath(jobId),\n                            getUploadTemplateSize(jobId));\n            jobs.remove(jobId);\n            return answer;\n        default:\n            break; \r\n        }\n        return new UploadAnswer(jobId, getUploadPct(jobId), getUploadError(jobId), getUploadStatus2(jobId), getUploadLocalPath(jobId), getInstallPath(jobId),\n                getUploadTemplateSize(jobId));\n    }\n","date":"2018-01-20 05:49:27","endLine":239,"groupId":"18342","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"handleUploadProgressCmd","params":"(UploadProgressCommandcmd)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cloudstack-10-0.7/blobInfo/CC_OUT/blobs/29/eb4b13e307d7f267358990ae9ff26520b91b74.src","preCode":"    private UploadAnswer handleUploadProgressCmd(UploadProgressCommand cmd) {\n        String jobId = cmd.getJobId();\n        UploadAnswer answer;\n        UploadJob uj = null;\n        if (jobId != null)\n            uj = jobs.get(jobId);\n        if (uj == null) {\n            return new UploadAnswer(null, 0, \"Cannot find job\", com.cloud.storage.UploadVO.Status.UNKNOWN, \"\", \"\", 0);\n        }\n        TemplateUploader td = uj.getTemplateUploader();\n        switch (cmd.getRequest()) {\n        case GET_STATUS:\n            break;\n        case ABORT:\n            td.stopUpload();\n            sleep();\n            break;\n            \r\n\r\n\r\n\r\n\n        case PURGE:\n            td.stopUpload();\n            answer =\n                    new UploadAnswer(jobId, getUploadPct(jobId), getUploadError(jobId), getUploadStatus2(jobId), getUploadLocalPath(jobId), getInstallPath(jobId),\n                            getUploadTemplateSize(jobId));\n            jobs.remove(jobId);\n            return answer;\n        default:\n            break; \r\n        }\n        return new UploadAnswer(jobId, getUploadPct(jobId), getUploadError(jobId), getUploadStatus2(jobId), getUploadLocalPath(jobId), getInstallPath(jobId),\n                getUploadTemplateSize(jobId));\n    }\n","realPath":"services/secondary-storage/server/src/main/java/org/apache/cloudstack/storage/template/UploadManagerImpl.java","repoName":"cloudstack","snippetEndLine":0,"snippetStartLine":0,"startLine":205,"status":"B"}],"commitId":"893a88d225276e45f12f9490e6af2c94a81c2965","commitMessage":"@@@CLOUDSTACK-10105: Use maven standard project structure in all projects (#2283)\n\nRemove maven standard module (which only a few were using) and get ride of maven customization for the projects structure.\n\n- moved all directories to src/main/java.  src/main/resources.  src/main/scripts.  src/test/java.  src/test/resources\n- grep scan to search for src/com and src/org left over\n- grep for <project>/scripts to fix pom.xml configuration\n- remove custom <build> configuration in pom.xml\n\nSigned-off-by: Marc-Aur?le Brothier <m@brothier.org>","date":"2018-01-20 05:49:27","modifiedFileCount":"1","status":"B","submitter":"Marc-Aur?le Brothier"},{"authorTime":"2018-01-20 05:49:27","codes":[{"authorDate":"2019-08-09 18:44:46","commitOrder":2,"curCode":"    private DownloadAnswer handleDownloadProgressCmd(SecondaryStorageResource resource, DownloadProgressCommand cmd) {\n        String jobId = cmd.getJobId();\n        DownloadAnswer answer;\n        DownloadJob dj = null;\n        if (jobId != null) {\n            dj = jobs.get(jobId);\n        }\n        if (dj == null) {\n            if (cmd.getRequest() == RequestType.GET_OR_RESTART) {\n                DownloadCommand dcmd = new DownloadCommand(cmd);\n                return handleDownloadCommand(resource, dcmd);\n            } else {\n                return new DownloadAnswer(\"Cannot find job\", com.cloud.storage.VMTemplateStorageResourceAssoc.Status.UNKNOWN);\n            }\n        }\n        TemplateDownloader td = dj.getTemplateDownloader();\n        switch (cmd.getRequest()) {\n        case GET_STATUS:\n            break;\n        case ABORT:\n            td.stopDownload();\n            sleep();\n            break;\n        case RESTART:\n            td.stopDownload();\n            sleep();\n            threadPool.execute(td);\n            break;\n        case PURGE:\n            td.stopDownload();\n            answer =\n                    new DownloadAnswer(jobId, getDownloadPct(jobId), getDownloadError(jobId), getDownloadStatus2(jobId), getDownloadLocalPath(jobId),\n                            getInstallPath(jobId), getDownloadTemplateSize(jobId), getDownloadTemplatePhysicalSize(jobId), getDownloadCheckSum(jobId));\n            if (CollectionUtils.isNotEmpty(dj.getOvfProperties())) {\n                answer.setOvfProperties(dj.getOvfProperties());\n            }\n            jobs.remove(jobId);\n            return answer;\n        default:\n            break; \r\n        }\n        return new DownloadAnswer(jobId, getDownloadPct(jobId), getDownloadError(jobId), getDownloadStatus2(jobId), getDownloadLocalPath(jobId), getInstallPath(jobId),\n                getDownloadTemplateSize(jobId), getDownloadTemplatePhysicalSize(jobId), getDownloadCheckSum(jobId));\n    }\n","date":"2019-08-09 18:44:46","endLine":798,"groupId":"14996","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"handleDownloadProgressCmd","params":"(SecondaryStorageResourceresource@DownloadProgressCommandcmd)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cloudstack-10-0.7/blobInfo/CC_OUT/blobs/bd/5c59131b6ac8fd0396fdf399298fed7711565b.src","preCode":"    private DownloadAnswer handleDownloadProgressCmd(SecondaryStorageResource resource, DownloadProgressCommand cmd) {\n        String jobId = cmd.getJobId();\n        DownloadAnswer answer;\n        DownloadJob dj = null;\n        if (jobId != null) {\n            dj = jobs.get(jobId);\n        }\n        if (dj == null) {\n            if (cmd.getRequest() == RequestType.GET_OR_RESTART) {\n                DownloadCommand dcmd = new DownloadCommand(cmd);\n                return handleDownloadCommand(resource, dcmd);\n            } else {\n                return new DownloadAnswer(\"Cannot find job\", com.cloud.storage.VMTemplateStorageResourceAssoc.Status.UNKNOWN);\n            }\n        }\n        TemplateDownloader td = dj.getTemplateDownloader();\n        switch (cmd.getRequest()) {\n        case GET_STATUS:\n            break;\n        case ABORT:\n            td.stopDownload();\n            sleep();\n            break;\n        case RESTART:\n            td.stopDownload();\n            sleep();\n            threadPool.execute(td);\n            break;\n        case PURGE:\n            td.stopDownload();\n            answer =\n                    new DownloadAnswer(jobId, getDownloadPct(jobId), getDownloadError(jobId), getDownloadStatus2(jobId), getDownloadLocalPath(jobId),\n                            getInstallPath(jobId), getDownloadTemplateSize(jobId), getDownloadTemplatePhysicalSize(jobId), getDownloadCheckSum(jobId));\n            jobs.remove(jobId);\n            return answer;\n        default:\n            break; \r\n        }\n        return new DownloadAnswer(jobId, getDownloadPct(jobId), getDownloadError(jobId), getDownloadStatus2(jobId), getDownloadLocalPath(jobId), getInstallPath(jobId),\n                getDownloadTemplateSize(jobId), getDownloadTemplatePhysicalSize(jobId), getDownloadCheckSum(jobId));\n    }\n","realPath":"services/secondary-storage/server/src/main/java/org/apache/cloudstack/storage/template/DownloadManagerImpl.java","repoName":"cloudstack","snippetEndLine":0,"snippetStartLine":0,"startLine":755,"status":"M"},{"authorDate":"2018-01-20 05:49:27","commitOrder":2,"curCode":"    private UploadAnswer handleUploadProgressCmd(UploadProgressCommand cmd) {\n        String jobId = cmd.getJobId();\n        UploadAnswer answer;\n        UploadJob uj = null;\n        if (jobId != null)\n            uj = jobs.get(jobId);\n        if (uj == null) {\n            return new UploadAnswer(null, 0, \"Cannot find job\", com.cloud.storage.UploadVO.Status.UNKNOWN, \"\", \"\", 0);\n        }\n        TemplateUploader td = uj.getTemplateUploader();\n        switch (cmd.getRequest()) {\n        case GET_STATUS:\n            break;\n        case ABORT:\n            td.stopUpload();\n            sleep();\n            break;\n            \r\n\r\n\r\n\r\n\n        case PURGE:\n            td.stopUpload();\n            answer =\n                    new UploadAnswer(jobId, getUploadPct(jobId), getUploadError(jobId), getUploadStatus2(jobId), getUploadLocalPath(jobId), getInstallPath(jobId),\n                            getUploadTemplateSize(jobId));\n            jobs.remove(jobId);\n            return answer;\n        default:\n            break; \r\n        }\n        return new UploadAnswer(jobId, getUploadPct(jobId), getUploadError(jobId), getUploadStatus2(jobId), getUploadLocalPath(jobId), getInstallPath(jobId),\n                getUploadTemplateSize(jobId));\n    }\n","date":"2018-01-20 05:49:27","endLine":239,"groupId":"18342","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"handleUploadProgressCmd","params":"(UploadProgressCommandcmd)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cloudstack-10-0.7/blobInfo/CC_OUT/blobs/29/eb4b13e307d7f267358990ae9ff26520b91b74.src","preCode":"    private UploadAnswer handleUploadProgressCmd(UploadProgressCommand cmd) {\n        String jobId = cmd.getJobId();\n        UploadAnswer answer;\n        UploadJob uj = null;\n        if (jobId != null)\n            uj = jobs.get(jobId);\n        if (uj == null) {\n            return new UploadAnswer(null, 0, \"Cannot find job\", com.cloud.storage.UploadVO.Status.UNKNOWN, \"\", \"\", 0);\n        }\n        TemplateUploader td = uj.getTemplateUploader();\n        switch (cmd.getRequest()) {\n        case GET_STATUS:\n            break;\n        case ABORT:\n            td.stopUpload();\n            sleep();\n            break;\n            \r\n\r\n\r\n\r\n\n        case PURGE:\n            td.stopUpload();\n            answer =\n                    new UploadAnswer(jobId, getUploadPct(jobId), getUploadError(jobId), getUploadStatus2(jobId), getUploadLocalPath(jobId), getInstallPath(jobId),\n                            getUploadTemplateSize(jobId));\n            jobs.remove(jobId);\n            return answer;\n        default:\n            break; \r\n        }\n        return new UploadAnswer(jobId, getUploadPct(jobId), getUploadError(jobId), getUploadStatus2(jobId), getUploadLocalPath(jobId), getInstallPath(jobId),\n                getUploadTemplateSize(jobId));\n    }\n","realPath":"services/secondary-storage/server/src/main/java/org/apache/cloudstack/storage/template/UploadManagerImpl.java","repoName":"cloudstack","snippetEndLine":0,"snippetStartLine":0,"startLine":205,"status":"N"}],"commitId":"3c2af55d81dbfaf17a3bf0b6247ecd830df12996","commitMessage":"@@@vmware: allow configuring appliances on the VM instance wizard when OVF properties are available (#3271)\n\nProblem: In Vmware.  appliances that have options that are required to be answered before deployments are configurable through vSphere vCenter user interface but it is not possible from the CloudStack user interface.\n\nRoot cause: CloudStack does not handle vApp configuration options during deployments if the appliance contains configurable options. These configurations are mandatory for VM deployment from the appliance on Vmware vSphere vCenter. As shown in the image below.  Vmware detects there are mandatory configurations that the administrator must set before deploy the VM from the appliance (in red on the image below):\n\nSolution:\nOn template registration.  after it is downloaded to secondary storage.  the OVF file is examined and OVF properties are extracted from the file when available.\nOVF properties extracted from templates after being downloaded to secondary storage are stored on the new table 'template_ovf_properties'.\nA new optional section is added to the VM deployment wizard in the UI:\nIf the selected template does not contain OVF properties.  then the optional section is not displayed on the wizard.\nIf the selected template contains OVF properties.  then the optional new section is displayed. Each OVF property is displayed and the user must complete every property before proceeding to the next section.\nIf any configuration property is empty.  then a dialog is displayed indicating that there are empty properties which must be set before proceeding\nimage\nThe specific OVF properties set on deployment are stored on the 'user_vm_details' table with the prefix: 'ovfproperties-'.\nThe VM is configured with the vApp configuration section containing the values that the user provided on the wizard.","date":"2019-08-09 18:44:46","modifiedFileCount":"26","status":"M","submitter":"Nicolas Vazquez"},{"authorTime":"2018-01-20 05:49:27","codes":[{"authorDate":"2020-10-26 21:24:14","commitOrder":3,"curCode":"    private DownloadAnswer handleDownloadProgressCmd(SecondaryStorageResource resource, DownloadProgressCommand cmd) {\n        String jobId = cmd.getJobId();\n        DownloadAnswer answer;\n        DownloadJob dj = null;\n        if (jobId != null) {\n            dj = jobs.get(jobId);\n        }\n        if (dj == null) {\n            if (cmd.getRequest() == RequestType.GET_OR_RESTART) {\n                DownloadCommand dcmd = new DownloadCommand(cmd);\n                return handleDownloadCommand(resource, dcmd);\n            } else {\n                return new DownloadAnswer(\"Cannot find job\", com.cloud.storage.VMTemplateStorageResourceAssoc.Status.UNKNOWN);\n            }\n        }\n        TemplateDownloader td = dj.getTemplateDownloader();\n        switch (cmd.getRequest()) {\n        case GET_STATUS:\n            break;\n        case ABORT:\n            td.stopDownload();\n            sleep();\n            break;\n        case RESTART:\n            td.stopDownload();\n            sleep();\n            threadPool.execute(td);\n            break;\n        case PURGE:\n            td.stopDownload();\n            answer =\n                    new DownloadAnswer(jobId, getDownloadPct(jobId), getDownloadError(jobId), getDownloadStatus2(jobId), getDownloadLocalPath(jobId),\n                            getInstallPath(jobId), getDownloadTemplateSize(jobId), getDownloadTemplatePhysicalSize(jobId), getDownloadCheckSum(jobId));\n            if (dj.getOvfInformationTO() != null) {\n                answer.setOvfInformationTO(dj.getOvfInformationTO());\n            }\n            jobs.remove(jobId);\n            return answer;\n        default:\n            break; \r\n        }\n        return new DownloadAnswer(jobId, getDownloadPct(jobId), getDownloadError(jobId), getDownloadStatus2(jobId), getDownloadLocalPath(jobId), getInstallPath(jobId),\n                getDownloadTemplateSize(jobId), getDownloadTemplatePhysicalSize(jobId), getDownloadCheckSum(jobId));\n    }\n","date":"2020-10-26 21:24:14","endLine":838,"groupId":"104693","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"handleDownloadProgressCmd","params":"(SecondaryStorageResourceresource@DownloadProgressCommandcmd)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cloudstack-10-0.7/blobInfo/CC_OUT/blobs/7c/e252a8ed7c3fb5cdcee1e19b6f2562021e952e.src","preCode":"    private DownloadAnswer handleDownloadProgressCmd(SecondaryStorageResource resource, DownloadProgressCommand cmd) {\n        String jobId = cmd.getJobId();\n        DownloadAnswer answer;\n        DownloadJob dj = null;\n        if (jobId != null) {\n            dj = jobs.get(jobId);\n        }\n        if (dj == null) {\n            if (cmd.getRequest() == RequestType.GET_OR_RESTART) {\n                DownloadCommand dcmd = new DownloadCommand(cmd);\n                return handleDownloadCommand(resource, dcmd);\n            } else {\n                return new DownloadAnswer(\"Cannot find job\", com.cloud.storage.VMTemplateStorageResourceAssoc.Status.UNKNOWN);\n            }\n        }\n        TemplateDownloader td = dj.getTemplateDownloader();\n        switch (cmd.getRequest()) {\n        case GET_STATUS:\n            break;\n        case ABORT:\n            td.stopDownload();\n            sleep();\n            break;\n        case RESTART:\n            td.stopDownload();\n            sleep();\n            threadPool.execute(td);\n            break;\n        case PURGE:\n            td.stopDownload();\n            answer =\n                    new DownloadAnswer(jobId, getDownloadPct(jobId), getDownloadError(jobId), getDownloadStatus2(jobId), getDownloadLocalPath(jobId),\n                            getInstallPath(jobId), getDownloadTemplateSize(jobId), getDownloadTemplatePhysicalSize(jobId), getDownloadCheckSum(jobId));\n            if (CollectionUtils.isNotEmpty(dj.getOvfProperties())) {\n                answer.setOvfProperties(dj.getOvfProperties());\n            }\n            jobs.remove(jobId);\n            return answer;\n        default:\n            break; \r\n        }\n        return new DownloadAnswer(jobId, getDownloadPct(jobId), getDownloadError(jobId), getDownloadStatus2(jobId), getDownloadLocalPath(jobId), getInstallPath(jobId),\n                getDownloadTemplateSize(jobId), getDownloadTemplatePhysicalSize(jobId), getDownloadCheckSum(jobId));\n    }\n","realPath":"services/secondary-storage/server/src/main/java/org/apache/cloudstack/storage/template/DownloadManagerImpl.java","repoName":"cloudstack","snippetEndLine":0,"snippetStartLine":0,"startLine":795,"status":"M"},{"authorDate":"2018-01-20 05:49:27","commitOrder":3,"curCode":"    private UploadAnswer handleUploadProgressCmd(UploadProgressCommand cmd) {\n        String jobId = cmd.getJobId();\n        UploadAnswer answer;\n        UploadJob uj = null;\n        if (jobId != null)\n            uj = jobs.get(jobId);\n        if (uj == null) {\n            return new UploadAnswer(null, 0, \"Cannot find job\", com.cloud.storage.UploadVO.Status.UNKNOWN, \"\", \"\", 0);\n        }\n        TemplateUploader td = uj.getTemplateUploader();\n        switch (cmd.getRequest()) {\n        case GET_STATUS:\n            break;\n        case ABORT:\n            td.stopUpload();\n            sleep();\n            break;\n            \r\n\r\n\r\n\r\n\n        case PURGE:\n            td.stopUpload();\n            answer =\n                    new UploadAnswer(jobId, getUploadPct(jobId), getUploadError(jobId), getUploadStatus2(jobId), getUploadLocalPath(jobId), getInstallPath(jobId),\n                            getUploadTemplateSize(jobId));\n            jobs.remove(jobId);\n            return answer;\n        default:\n            break; \r\n        }\n        return new UploadAnswer(jobId, getUploadPct(jobId), getUploadError(jobId), getUploadStatus2(jobId), getUploadLocalPath(jobId), getInstallPath(jobId),\n                getUploadTemplateSize(jobId));\n    }\n","date":"2018-01-20 05:49:27","endLine":239,"groupId":"104693","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"handleUploadProgressCmd","params":"(UploadProgressCommandcmd)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cloudstack-10-0.7/blobInfo/CC_OUT/blobs/29/eb4b13e307d7f267358990ae9ff26520b91b74.src","preCode":"    private UploadAnswer handleUploadProgressCmd(UploadProgressCommand cmd) {\n        String jobId = cmd.getJobId();\n        UploadAnswer answer;\n        UploadJob uj = null;\n        if (jobId != null)\n            uj = jobs.get(jobId);\n        if (uj == null) {\n            return new UploadAnswer(null, 0, \"Cannot find job\", com.cloud.storage.UploadVO.Status.UNKNOWN, \"\", \"\", 0);\n        }\n        TemplateUploader td = uj.getTemplateUploader();\n        switch (cmd.getRequest()) {\n        case GET_STATUS:\n            break;\n        case ABORT:\n            td.stopUpload();\n            sleep();\n            break;\n            \r\n\r\n\r\n\r\n\n        case PURGE:\n            td.stopUpload();\n            answer =\n                    new UploadAnswer(jobId, getUploadPct(jobId), getUploadError(jobId), getUploadStatus2(jobId), getUploadLocalPath(jobId), getInstallPath(jobId),\n                            getUploadTemplateSize(jobId));\n            jobs.remove(jobId);\n            return answer;\n        default:\n            break; \r\n        }\n        return new UploadAnswer(jobId, getUploadPct(jobId), getUploadError(jobId), getUploadStatus2(jobId), getUploadLocalPath(jobId), getInstallPath(jobId),\n                getUploadTemplateSize(jobId));\n    }\n","realPath":"services/secondary-storage/server/src/main/java/org/apache/cloudstack/storage/template/UploadManagerImpl.java","repoName":"cloudstack","snippetEndLine":0,"snippetStartLine":0,"startLine":205,"status":"N"}],"commitId":"1a75872cd484dd387552bae58996a56679fdb51e","commitMessage":"@@@Merge pull request #4307 from shapeblue/ovfprops-and-vsphere-adv-together\n\n[VMware] vSphere advanced capabilities and Full OVF properties support","date":"2020-10-26 21:24:14","modifiedFileCount":"173","status":"M","submitter":"Boris Stoyanov - a.k.a Bobby"}]
