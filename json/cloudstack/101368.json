[{"authorTime":"2018-01-20 05:49:27","codes":[{"authorDate":"2018-01-20 05:49:27","commitOrder":1,"curCode":"    private boolean checkIfAllVmsCreatedInStrictMode(Long accountId, List<VMInstanceVO> allVmsOnHost) {\n        boolean createdByImplicitStrict = true;\n        if (allVmsOnHost.isEmpty())\n            return false;\n        for (VMInstanceVO vm : allVmsOnHost) {\n            if (!isImplicitPlannerUsedByOffering(vm.getServiceOfferingId()) || vm.getAccountId() != accountId) {\n                s_logger.info(\"Host \" + vm.getHostId() + \" found to be running a vm created by a planner other\" + \" than implicit, or running vms of other account\");\n                createdByImplicitStrict = false;\n                break;\n            } else if (isServiceOfferingUsingPlannerInPreferredMode(vm.getServiceOfferingId()) || vm.getAccountId() != accountId) {\n                s_logger.info(\"Host \" + vm.getHostId() + \" found to be running a vm created by an implicit planner\" + \" in preferred mode, or running vms of other account\");\n                createdByImplicitStrict = false;\n                break;\n            }\n        }\n        return createdByImplicitStrict;\n    }\n","date":"2018-01-20 05:49:27","endLine":5334,"groupId":"17139","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"checkIfAllVmsCreatedInStrictMode","params":"(LongaccountId@List<VMInstanceVO>allVmsOnHost)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cloudstack-10-0.7/blobInfo/CC_OUT/blobs/da/b741c3c274ded6ea2d8ba461cb81d920542cb3.src","preCode":"    private boolean checkIfAllVmsCreatedInStrictMode(Long accountId, List<VMInstanceVO> allVmsOnHost) {\n        boolean createdByImplicitStrict = true;\n        if (allVmsOnHost.isEmpty())\n            return false;\n        for (VMInstanceVO vm : allVmsOnHost) {\n            if (!isImplicitPlannerUsedByOffering(vm.getServiceOfferingId()) || vm.getAccountId() != accountId) {\n                s_logger.info(\"Host \" + vm.getHostId() + \" found to be running a vm created by a planner other\" + \" than implicit, or running vms of other account\");\n                createdByImplicitStrict = false;\n                break;\n            } else if (isServiceOfferingUsingPlannerInPreferredMode(vm.getServiceOfferingId()) || vm.getAccountId() != accountId) {\n                s_logger.info(\"Host \" + vm.getHostId() + \" found to be running a vm created by an implicit planner\" + \" in preferred mode, or running vms of other account\");\n                createdByImplicitStrict = false;\n                break;\n            }\n        }\n        return createdByImplicitStrict;\n    }\n","realPath":"server/src/main/java/com/cloud/vm/UserVmManagerImpl.java","repoName":"cloudstack","snippetEndLine":0,"snippetStartLine":0,"startLine":5318,"status":"B"},{"authorDate":"2018-01-20 05:49:27","commitOrder":1,"curCode":"    private boolean checkIfAllVmsCreatedInStrictMode(Long accountId, List<VMInstanceVO> allVmsOnHost) {\n        boolean createdByImplicitStrict = true;\n        if (allVmsOnHost.isEmpty())\n            return false;\n        for (VMInstanceVO vm : allVmsOnHost) {\n            if (!isImplicitPlannerUsedByOffering(vm.getServiceOfferingId())) {\n                s_logger.info(\"Host \" + vm.getHostId() + \" found to be running a vm created by a planner other\" + \" than implicit.\");\n                createdByImplicitStrict = false;\n                break;\n            } else if (isServiceOfferingUsingPlannerInPreferredMode(vm.getServiceOfferingId())) {\n                s_logger.info(\"Host \" + vm.getHostId() + \" found to be running a vm created by an implicit planner\" + \" in preferred mode.\");\n                createdByImplicitStrict = false;\n                break;\n            }\n        }\n        return createdByImplicitStrict;\n    }\n","date":"2018-01-20 05:49:27","endLine":191,"groupId":"1428","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"checkIfAllVmsCreatedInStrictMode","params":"(LongaccountId@List<VMInstanceVO>allVmsOnHost)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cloudstack-10-0.7/blobInfo/CC_OUT/blobs/5b/ad9226eed13d37215d45d430bdf589deb10c79.src","preCode":"    private boolean checkIfAllVmsCreatedInStrictMode(Long accountId, List<VMInstanceVO> allVmsOnHost) {\n        boolean createdByImplicitStrict = true;\n        if (allVmsOnHost.isEmpty())\n            return false;\n        for (VMInstanceVO vm : allVmsOnHost) {\n            if (!isImplicitPlannerUsedByOffering(vm.getServiceOfferingId())) {\n                s_logger.info(\"Host \" + vm.getHostId() + \" found to be running a vm created by a planner other\" + \" than implicit.\");\n                createdByImplicitStrict = false;\n                break;\n            } else if (isServiceOfferingUsingPlannerInPreferredMode(vm.getServiceOfferingId())) {\n                s_logger.info(\"Host \" + vm.getHostId() + \" found to be running a vm created by an implicit planner\" + \" in preferred mode.\");\n                createdByImplicitStrict = false;\n                break;\n            }\n        }\n        return createdByImplicitStrict;\n    }\n","realPath":"plugins/deployment-planners/implicit-dedication/src/main/java/com/cloud/deploy/ImplicitDedicationPlanner.java","repoName":"cloudstack","snippetEndLine":0,"snippetStartLine":0,"startLine":175,"status":"B"}],"commitId":"893a88d225276e45f12f9490e6af2c94a81c2965","commitMessage":"@@@CLOUDSTACK-10105: Use maven standard project structure in all projects (#2283)\n\nRemove maven standard module (which only a few were using) and get ride of maven customization for the projects structure.\n\n- moved all directories to src/main/java.  src/main/resources.  src/main/scripts.  src/test/java.  src/test/resources\n- grep scan to search for src/com and src/org left over\n- grep for <project>/scripts to fix pom.xml configuration\n- remove custom <build> configuration in pom.xml\n\nSigned-off-by: Marc-Aur?le Brothier <m@brothier.org>","date":"2018-01-20 05:49:27","modifiedFileCount":"1","status":"B","submitter":"Marc-Aur?le Brothier"},{"authorTime":"2018-01-20 05:49:27","codes":[{"authorDate":"2018-04-12 15:48:59","commitOrder":2,"curCode":"    private boolean checkIfAllVmsCreatedInStrictMode(Long accountId, List<VMInstanceVO> allVmsOnHost) {\n        boolean createdByImplicitStrict = true;\n        if (allVmsOnHost.isEmpty()) {\n            return false;\n        }\n        for (VMInstanceVO vm : allVmsOnHost) {\n            if (!isImplicitPlannerUsedByOffering(vm.getServiceOfferingId()) || vm.getAccountId() != accountId) {\n                s_logger.info(\"Host \" + vm.getHostId() + \" found to be running a vm created by a planner other\" + \" than implicit, or running vms of other account\");\n                createdByImplicitStrict = false;\n                break;\n            } else if (isServiceOfferingUsingPlannerInPreferredMode(vm.getServiceOfferingId()) || vm.getAccountId() != accountId) {\n                s_logger.info(\"Host \" + vm.getHostId() + \" found to be running a vm created by an implicit planner\" + \" in preferred mode, or running vms of other account\");\n                createdByImplicitStrict = false;\n                break;\n            }\n        }\n        return createdByImplicitStrict;\n    }\n","date":"2018-04-12 15:48:59","endLine":5303,"groupId":"101368","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"checkIfAllVmsCreatedInStrictMode","params":"(LongaccountId@List<VMInstanceVO>allVmsOnHost)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cloudstack-10-0.7/blobInfo/CC_OUT/blobs/df/81dd3ff2bd18293da506fdeef1099bdaccb2b8.src","preCode":"    private boolean checkIfAllVmsCreatedInStrictMode(Long accountId, List<VMInstanceVO> allVmsOnHost) {\n        boolean createdByImplicitStrict = true;\n        if (allVmsOnHost.isEmpty())\n            return false;\n        for (VMInstanceVO vm : allVmsOnHost) {\n            if (!isImplicitPlannerUsedByOffering(vm.getServiceOfferingId()) || vm.getAccountId() != accountId) {\n                s_logger.info(\"Host \" + vm.getHostId() + \" found to be running a vm created by a planner other\" + \" than implicit, or running vms of other account\");\n                createdByImplicitStrict = false;\n                break;\n            } else if (isServiceOfferingUsingPlannerInPreferredMode(vm.getServiceOfferingId()) || vm.getAccountId() != accountId) {\n                s_logger.info(\"Host \" + vm.getHostId() + \" found to be running a vm created by an implicit planner\" + \" in preferred mode, or running vms of other account\");\n                createdByImplicitStrict = false;\n                break;\n            }\n        }\n        return createdByImplicitStrict;\n    }\n","realPath":"server/src/main/java/com/cloud/vm/UserVmManagerImpl.java","repoName":"cloudstack","snippetEndLine":0,"snippetStartLine":0,"startLine":5286,"status":"M"},{"authorDate":"2018-01-20 05:49:27","commitOrder":2,"curCode":"    private boolean checkIfAllVmsCreatedInStrictMode(Long accountId, List<VMInstanceVO> allVmsOnHost) {\n        boolean createdByImplicitStrict = true;\n        if (allVmsOnHost.isEmpty())\n            return false;\n        for (VMInstanceVO vm : allVmsOnHost) {\n            if (!isImplicitPlannerUsedByOffering(vm.getServiceOfferingId())) {\n                s_logger.info(\"Host \" + vm.getHostId() + \" found to be running a vm created by a planner other\" + \" than implicit.\");\n                createdByImplicitStrict = false;\n                break;\n            } else if (isServiceOfferingUsingPlannerInPreferredMode(vm.getServiceOfferingId())) {\n                s_logger.info(\"Host \" + vm.getHostId() + \" found to be running a vm created by an implicit planner\" + \" in preferred mode.\");\n                createdByImplicitStrict = false;\n                break;\n            }\n        }\n        return createdByImplicitStrict;\n    }\n","date":"2018-01-20 05:49:27","endLine":191,"groupId":"101368","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"checkIfAllVmsCreatedInStrictMode","params":"(LongaccountId@List<VMInstanceVO>allVmsOnHost)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cloudstack-10-0.7/blobInfo/CC_OUT/blobs/5b/ad9226eed13d37215d45d430bdf589deb10c79.src","preCode":"    private boolean checkIfAllVmsCreatedInStrictMode(Long accountId, List<VMInstanceVO> allVmsOnHost) {\n        boolean createdByImplicitStrict = true;\n        if (allVmsOnHost.isEmpty())\n            return false;\n        for (VMInstanceVO vm : allVmsOnHost) {\n            if (!isImplicitPlannerUsedByOffering(vm.getServiceOfferingId())) {\n                s_logger.info(\"Host \" + vm.getHostId() + \" found to be running a vm created by a planner other\" + \" than implicit.\");\n                createdByImplicitStrict = false;\n                break;\n            } else if (isServiceOfferingUsingPlannerInPreferredMode(vm.getServiceOfferingId())) {\n                s_logger.info(\"Host \" + vm.getHostId() + \" found to be running a vm created by an implicit planner\" + \" in preferred mode.\");\n                createdByImplicitStrict = false;\n                break;\n            }\n        }\n        return createdByImplicitStrict;\n    }\n","realPath":"plugins/deployment-planners/implicit-dedication/src/main/java/com/cloud/deploy/ImplicitDedicationPlanner.java","repoName":"cloudstack","snippetEndLine":0,"snippetStartLine":0,"startLine":175,"status":"N"}],"commitId":"91d98211496a482e6882acd6528f9b8dbeefe3bf","commitMessage":"@@@[CLOUDSTACK-10230] User should not be able to use removed ?Guest OS type? (#2404)\n\n* [CLOUDSTACK-10230] User is able to change to ?Guest OS type? that has been removed\n\nUsers are able to change the OS type of VMs to ?Guest OS type? that has been removed. This becomes a security issue when we try to force users to use HVM VMs (Meltdown/Spectre thing). A removed ?guest os type? should not be usable by any users in the cloud.","date":"2018-04-12 15:48:59","modifiedFileCount":"2","status":"M","submitter":"Rafael Weing?rtner"}]
