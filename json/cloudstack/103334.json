[{"authorTime":"2018-01-20 05:49:27","codes":[{"authorDate":"2018-01-20 05:49:27","commitOrder":1,"curCode":"    private boolean canBridgeFirewall(final String prvNic) {\n        final Script cmd = new Script(_securityGroupPath, _timeout, s_logger);\n        cmd.add(\"can_bridge_firewall\");\n        cmd.add(prvNic);\n        final String result = cmd.execute();\n        if (result != null) {\n            return false;\n        }\n        return true;\n    }\n","date":"2018-01-20 05:49:27","endLine":3396,"groupId":"18135","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"canBridgeFirewall","params":"(finalStringprvNic)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cloudstack-10-0.7/blobInfo/CC_OUT/blobs/9b/7fb2ea0139852633e459ee1d9cc6507a8d43c5.src","preCode":"    private boolean canBridgeFirewall(final String prvNic) {\n        final Script cmd = new Script(_securityGroupPath, _timeout, s_logger);\n        cmd.add(\"can_bridge_firewall\");\n        cmd.add(prvNic);\n        final String result = cmd.execute();\n        if (result != null) {\n            return false;\n        }\n        return true;\n    }\n","realPath":"plugins/hypervisors/kvm/src/main/java/com/cloud/hypervisor/kvm/resource/LibvirtComputingResource.java","repoName":"cloudstack","snippetEndLine":0,"snippetStartLine":0,"startLine":3387,"status":"B"},{"authorDate":"2018-01-20 05:49:27","commitOrder":1,"curCode":"    public boolean destroyNetworkRulesForVM(final Connect conn, final String vmName) {\n        if (!_canBridgeFirewall) {\n            return false;\n        }\n        String vif = null;\n        final List<InterfaceDef> intfs = getInterfaces(conn, vmName);\n        if (intfs.size() > 0) {\n            final InterfaceDef intf = intfs.get(0);\n            vif = intf.getDevName();\n        }\n        final Script cmd = new Script(_securityGroupPath, _timeout, s_logger);\n        cmd.add(\"destroy_network_rules_for_vm\");\n        cmd.add(\"--vmname\", vmName);\n        if (vif != null) {\n            cmd.add(\"--vif\", vif);\n        }\n        final String result = cmd.execute();\n        if (result != null) {\n            return false;\n        }\n        return true;\n    }\n","date":"2018-01-20 05:49:27","endLine":3419,"groupId":"16637","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"destroyNetworkRulesForVM","params":"(finalConnectconn@finalStringvmName)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cloudstack-10-0.7/blobInfo/CC_OUT/blobs/9b/7fb2ea0139852633e459ee1d9cc6507a8d43c5.src","preCode":"    public boolean destroyNetworkRulesForVM(final Connect conn, final String vmName) {\n        if (!_canBridgeFirewall) {\n            return false;\n        }\n        String vif = null;\n        final List<InterfaceDef> intfs = getInterfaces(conn, vmName);\n        if (intfs.size() > 0) {\n            final InterfaceDef intf = intfs.get(0);\n            vif = intf.getDevName();\n        }\n        final Script cmd = new Script(_securityGroupPath, _timeout, s_logger);\n        cmd.add(\"destroy_network_rules_for_vm\");\n        cmd.add(\"--vmname\", vmName);\n        if (vif != null) {\n            cmd.add(\"--vif\", vif);\n        }\n        final String result = cmd.execute();\n        if (result != null) {\n            return false;\n        }\n        return true;\n    }\n","realPath":"plugins/hypervisors/kvm/src/main/java/com/cloud/hypervisor/kvm/resource/LibvirtComputingResource.java","repoName":"cloudstack","snippetEndLine":0,"snippetStartLine":0,"startLine":3398,"status":"B"}],"commitId":"893a88d225276e45f12f9490e6af2c94a81c2965","commitMessage":"@@@CLOUDSTACK-10105: Use maven standard project structure in all projects (#2283)\n\nRemove maven standard module (which only a few were using) and get ride of maven customization for the projects structure.\n\n- moved all directories to src/main/java.  src/main/resources.  src/main/scripts.  src/test/java.  src/test/resources\n- grep scan to search for src/com and src/org left over\n- grep for <project>/scripts to fix pom.xml configuration\n- remove custom <build> configuration in pom.xml\n\nSigned-off-by: Marc-Aur?le Brothier <m@brothier.org>","date":"2018-01-20 05:49:27","modifiedFileCount":"1","status":"B","submitter":"Marc-Aur?le Brothier"},{"authorTime":"2018-01-20 05:49:27","codes":[{"authorDate":"2019-01-16 23:35:18","commitOrder":2,"curCode":"    private boolean canBridgeFirewall(final String prvNic) {\n        final Script cmd = new Script(_securityGroupPath, _timeout, s_logger);\n        cmd.add(\"can_bridge_firewall\");\n        cmd.add(\"--privnic\", prvNic);\n        final String result = cmd.execute();\n        if (result != null) {\n            return false;\n        }\n        return true;\n    }\n","date":"2019-01-16 23:35:18","endLine":3500,"groupId":"103334","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"canBridgeFirewall","params":"(finalStringprvNic)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cloudstack-10-0.7/blobInfo/CC_OUT/blobs/b2/1cd784cfd4f53bc5843959a704c388eb8c5eeb.src","preCode":"    private boolean canBridgeFirewall(final String prvNic) {\n        final Script cmd = new Script(_securityGroupPath, _timeout, s_logger);\n        cmd.add(\"can_bridge_firewall\");\n        cmd.add(prvNic);\n        final String result = cmd.execute();\n        if (result != null) {\n            return false;\n        }\n        return true;\n    }\n","realPath":"plugins/hypervisors/kvm/src/main/java/com/cloud/hypervisor/kvm/resource/LibvirtComputingResource.java","repoName":"cloudstack","snippetEndLine":0,"snippetStartLine":0,"startLine":3491,"status":"M"},{"authorDate":"2018-01-20 05:49:27","commitOrder":2,"curCode":"    public boolean destroyNetworkRulesForVM(final Connect conn, final String vmName) {\n        if (!_canBridgeFirewall) {\n            return false;\n        }\n        String vif = null;\n        final List<InterfaceDef> intfs = getInterfaces(conn, vmName);\n        if (intfs.size() > 0) {\n            final InterfaceDef intf = intfs.get(0);\n            vif = intf.getDevName();\n        }\n        final Script cmd = new Script(_securityGroupPath, _timeout, s_logger);\n        cmd.add(\"destroy_network_rules_for_vm\");\n        cmd.add(\"--vmname\", vmName);\n        if (vif != null) {\n            cmd.add(\"--vif\", vif);\n        }\n        final String result = cmd.execute();\n        if (result != null) {\n            return false;\n        }\n        return true;\n    }\n","date":"2018-01-20 05:49:27","endLine":3419,"groupId":"103334","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"destroyNetworkRulesForVM","params":"(finalConnectconn@finalStringvmName)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cloudstack-10-0.7/blobInfo/CC_OUT/blobs/9b/7fb2ea0139852633e459ee1d9cc6507a8d43c5.src","preCode":"    public boolean destroyNetworkRulesForVM(final Connect conn, final String vmName) {\n        if (!_canBridgeFirewall) {\n            return false;\n        }\n        String vif = null;\n        final List<InterfaceDef> intfs = getInterfaces(conn, vmName);\n        if (intfs.size() > 0) {\n            final InterfaceDef intf = intfs.get(0);\n            vif = intf.getDevName();\n        }\n        final Script cmd = new Script(_securityGroupPath, _timeout, s_logger);\n        cmd.add(\"destroy_network_rules_for_vm\");\n        cmd.add(\"--vmname\", vmName);\n        if (vif != null) {\n            cmd.add(\"--vif\", vif);\n        }\n        final String result = cmd.execute();\n        if (result != null) {\n            return false;\n        }\n        return true;\n    }\n","realPath":"plugins/hypervisors/kvm/src/main/java/com/cloud/hypervisor/kvm/resource/LibvirtComputingResource.java","repoName":"cloudstack","snippetEndLine":0,"snippetStartLine":0,"startLine":3398,"status":"N"}],"commitId":"ac73e7e671ba107830f96b9fb534eb716956e405","commitMessage":"@@@kvm: Security Group enhancements and refactor old code (#3113)\n\n* security group: Replace deprecated optparse by argparse\n\nStarting with Python 2.7 the library optparse has been replaced by\nargpase.\n\nThis commit replaces the use of optparse by argparse\n\nSigned-off-by: Wido den Hollander <wido@widodh.nl>\n\n* security group: Remove LXC support from security_group.py\n\nLXC does not work and has been partially removed from CloudStack already\n\nSigned-off-by: Wido den Hollander <wido@widodh.nl>\n\n* security group: Refactor libvirt code\n\nUse a single function which properly throws an Exception when the\nconnection to libvirt fails.\n\nAlso simplify some logic.  make it PEP-8 compatible and remove a unused\nfunction from the code.\n\nSigned-off-by: Wido den Hollander <wido@widodh.nl>\n\n* security group: Raise Exception on execute() failure\n\nIf the executed command exists with a non-zero exit status we should\nstill return the output to the command.  but also raise an Exception.\n\nSigned-off-by: Wido den Hollander <wido@widodh.nl>\n\n* security group: Use a function to determin the physical device of a bridge\n\nWe can not safely assume that the first device listed under a bridge is the\nphysical device.\n\nWith VXLAN isolation a vnet device can be attached to a bridge prior to the\nvxlanXXXX device being attached.\n\nWe need to filter out those devices and then fetch the physical device attached\nto the bridge.\n\nIn addition use the 'bridge' command instead of 'brctl'. 'bridge' is part of the\niproute2 utils just like 'ip' and should be considered as the new default.\n\nThis command is also available on EL6 and does not break any backwards compat.\n\nSigned-off-by: Wido den Hollander <wido@widodh.nl>\n\n* security group: --set is deprecated.  use --match-set\n\nThese messages are seen in the KVM Agent log:\n\n  --set option deprecated.  please use --match-set\n\nFunctionality does not change\n\nSigned-off-by: Wido den Hollander <wido@widodh.nl>\n\n* security group: PEP-8 and indentation fixes\n\nThere were a lot of styling problems in the code:\n\n- Missing whitespace or exess whitespace\n- CaMelCaSe function names and variables\n- 2-space indentation instead of 4 spaces\n\nThis commit addresses those issues.\n\nSigned-off-by: Wido den Hollander <wido@widodh.nl>\n","date":"2019-01-16 23:35:18","modifiedFileCount":"1","status":"M","submitter":"Wido den Hollander"}]
