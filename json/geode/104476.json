[{"authorTime":"2018-07-18 03:54:18","codes":[{"authorDate":"2018-07-18 03:54:18","commitOrder":1,"curCode":"  public void testIndexOnCommitForPut() throws Exception {\n    AttributesFactory af = new AttributesFactory();\n    af.setDataPolicy(DataPolicy.REPLICATE);\n    Region region = cache.createRegion(\"sample\", af.create());\n    qs.createIndex(\"foo\", IndexType.FUNCTIONAL, \"age\", \"/sample\");\n    Context ctx = cache.getJNDIContext();\n    UserTransaction utx = (UserTransaction) ctx.lookup(\"java:/UserTransaction\");\n    Integer x = new Integer(0);\n    utx.begin();\n    region.create(x, new Person(\"xyz\", 45));\n    utx.commit();\n    Query q = qs.newQuery(\"select * from /sample where age < 50\");\n    assertEquals(1, ((SelectResults) q.execute()).size());\n    Person dsample = (Person) CopyHelper.copy(region.get(x));\n    dsample.setAge(55);\n    utx.begin();\n    region.put(x, dsample);\n    utx.commit();\n    CacheUtils.log(((Person) region.get(x)));\n    assertEquals(0, ((SelectResults) q.execute()).size());\n  }\n","date":"2018-07-18 03:54:18","endLine":292,"groupId":"24621","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testIndexOnCommitForPut","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-geode-10-0.7/blobInfo/CC_OUT/blobs/1b/7337219d5466dfd090419fa3b4ed168868e112.src","preCode":"  public void testIndexOnCommitForPut() throws Exception {\n    AttributesFactory af = new AttributesFactory();\n    af.setDataPolicy(DataPolicy.REPLICATE);\n    Region region = cache.createRegion(\"sample\", af.create());\n    qs.createIndex(\"foo\", IndexType.FUNCTIONAL, \"age\", \"/sample\");\n    Context ctx = cache.getJNDIContext();\n    UserTransaction utx = (UserTransaction) ctx.lookup(\"java:/UserTransaction\");\n    Integer x = new Integer(0);\n    utx.begin();\n    region.create(x, new Person(\"xyz\", 45));\n    utx.commit();\n    Query q = qs.newQuery(\"select * from /sample where age < 50\");\n    assertEquals(1, ((SelectResults) q.execute()).size());\n    Person dsample = (Person) CopyHelper.copy(region.get(x));\n    dsample.setAge(55);\n    utx.begin();\n    region.put(x, dsample);\n    utx.commit();\n    CacheUtils.log(((Person) region.get(x)));\n    assertEquals(0, ((SelectResults) q.execute()).size());\n  }\n","realPath":"geode-core/src/integrationTest/java/org/apache/geode/cache/query/transaction/QueryAndJtaJUnitTest.java","repoName":"geode","snippetEndLine":0,"snippetStartLine":0,"startLine":272,"status":"B"},{"authorDate":"2018-07-18 03:54:18","commitOrder":1,"curCode":"  public void testFailedIndexUpdateOnJTACommitForPut() throws Exception {\n    Person.THROW_ON_INDEX = true;\n    AttributesFactory af = new AttributesFactory();\n    af.setDataPolicy(DataPolicy.REPLICATE);\n    Region region = cache.createRegion(\"sample\", af.create());\n    qs.createIndex(\"foo\", IndexType.FUNCTIONAL, \"index\", \"/sample\");\n    Context ctx = cache.getJNDIContext();\n    UserTransaction utx = (UserTransaction) ctx.lookup(\"java:/UserTransaction\");\n    Integer x = new Integer(0);\n    utx.begin();\n    region.create(x, new Person(\"xyz\", 45));\n    try {\n      utx.commit();\n      fail(\"Commit should have thrown an exception because the index update threw\");\n    } catch (Exception e) {\n      \r\n    }\n  }\n","date":"2018-07-18 03:54:18","endLine":419,"groupId":"24622","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testFailedIndexUpdateOnJTACommitForPut","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-geode-10-0.7/blobInfo/CC_OUT/blobs/1b/7337219d5466dfd090419fa3b4ed168868e112.src","preCode":"  public void testFailedIndexUpdateOnJTACommitForPut() throws Exception {\n    Person.THROW_ON_INDEX = true;\n    AttributesFactory af = new AttributesFactory();\n    af.setDataPolicy(DataPolicy.REPLICATE);\n    Region region = cache.createRegion(\"sample\", af.create());\n    qs.createIndex(\"foo\", IndexType.FUNCTIONAL, \"index\", \"/sample\");\n    Context ctx = cache.getJNDIContext();\n    UserTransaction utx = (UserTransaction) ctx.lookup(\"java:/UserTransaction\");\n    Integer x = new Integer(0);\n    utx.begin();\n    region.create(x, new Person(\"xyz\", 45));\n    try {\n      utx.commit();\n      fail(\"Commit should have thrown an exception because the index update threw\");\n    } catch (Exception e) {\n      \r\n    }\n  }\n","realPath":"geode-core/src/integrationTest/java/org/apache/geode/cache/query/transaction/QueryAndJtaJUnitTest.java","repoName":"geode","snippetEndLine":0,"snippetStartLine":0,"startLine":402,"status":"B"}],"commitId":"cb202f25b93e0a56f4776813da0bf6dcbba231cd","commitMessage":"@@@GEODE-5363: Moves all non-unit tests into specific isolated source sets. (#2126)\n\n* Creates integrationTest source set.\n* Creates distributedTest source set.\n* Creates acceptanceTest source set.\n* Creates uiTest source set.\n* Removes old categories.","date":"2018-07-18 03:54:18","modifiedFileCount":"697","status":"B","submitter":"Jacob Barrett"},{"authorTime":"2020-05-29 00:37:39","codes":[{"authorDate":"2020-05-29 00:37:39","commitOrder":2,"curCode":"  public void testIndexOnCommitForPut() throws Exception {\n    AttributesFactory af = new AttributesFactory();\n    af.setDataPolicy(DataPolicy.REPLICATE);\n    Region region = cache.createRegion(\"sample\", af.create());\n    qs.createIndex(\"foo\", IndexType.FUNCTIONAL, \"age\", SEPARATOR + \"sample\");\n    Context ctx = cache.getJNDIContext();\n    UserTransaction utx = (UserTransaction) ctx.lookup(\"java:/UserTransaction\");\n    Integer x = new Integer(0);\n    utx.begin();\n    region.create(x, new Person(\"xyz\", 45));\n    utx.commit();\n    Query q = qs.newQuery(\"select * from \" + SEPARATOR + \"sample where age < 50\");\n    assertEquals(1, ((SelectResults) q.execute()).size());\n    Person dsample = (Person) CopyHelper.copy(region.get(x));\n    dsample.setAge(55);\n    utx.begin();\n    region.put(x, dsample);\n    utx.commit();\n    CacheUtils.log(((Person) region.get(x)));\n    assertEquals(0, ((SelectResults) q.execute()).size());\n  }\n","date":"2020-05-29 00:37:39","endLine":297,"groupId":"104476","id":3,"instanceNumber":1,"isCurCommit":1,"methodName":"testIndexOnCommitForPut","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-geode-10-0.7/blobInfo/CC_OUT/blobs/92/2f26a70d01d9a17fc6049fe0f4779cf14bfc1c.src","preCode":"  public void testIndexOnCommitForPut() throws Exception {\n    AttributesFactory af = new AttributesFactory();\n    af.setDataPolicy(DataPolicy.REPLICATE);\n    Region region = cache.createRegion(\"sample\", af.create());\n    qs.createIndex(\"foo\", IndexType.FUNCTIONAL, \"age\", \"/sample\");\n    Context ctx = cache.getJNDIContext();\n    UserTransaction utx = (UserTransaction) ctx.lookup(\"java:/UserTransaction\");\n    Integer x = new Integer(0);\n    utx.begin();\n    region.create(x, new Person(\"xyz\", 45));\n    utx.commit();\n    Query q = qs.newQuery(\"select * from /sample where age < 50\");\n    assertEquals(1, ((SelectResults) q.execute()).size());\n    Person dsample = (Person) CopyHelper.copy(region.get(x));\n    dsample.setAge(55);\n    utx.begin();\n    region.put(x, dsample);\n    utx.commit();\n    CacheUtils.log(((Person) region.get(x)));\n    assertEquals(0, ((SelectResults) q.execute()).size());\n  }\n","realPath":"geode-core/src/integrationTest/java/org/apache/geode/cache/query/transaction/QueryAndJtaJUnitTest.java","repoName":"geode","snippetEndLine":0,"snippetStartLine":0,"startLine":277,"status":"M"},{"authorDate":"2020-05-29 00:37:39","commitOrder":2,"curCode":"  public void testFailedIndexUpdateOnJTACommitForPut() throws Exception {\n    Person.THROW_ON_INDEX = true;\n    AttributesFactory af = new AttributesFactory();\n    af.setDataPolicy(DataPolicy.REPLICATE);\n    Region region = cache.createRegion(\"sample\", af.create());\n    qs.createIndex(\"foo\", IndexType.FUNCTIONAL, \"index\", SEPARATOR + \"sample\");\n    Context ctx = cache.getJNDIContext();\n    UserTransaction utx = (UserTransaction) ctx.lookup(\"java:/UserTransaction\");\n    Integer x = new Integer(0);\n    utx.begin();\n    region.create(x, new Person(\"xyz\", 45));\n    try {\n      utx.commit();\n      fail(\"Commit should have thrown an exception because the index update threw\");\n    } catch (Exception e) {\n      \r\n    }\n  }\n","date":"2020-05-29 00:37:39","endLine":430,"groupId":"104476","id":4,"instanceNumber":2,"isCurCommit":1,"methodName":"testFailedIndexUpdateOnJTACommitForPut","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-geode-10-0.7/blobInfo/CC_OUT/blobs/92/2f26a70d01d9a17fc6049fe0f4779cf14bfc1c.src","preCode":"  public void testFailedIndexUpdateOnJTACommitForPut() throws Exception {\n    Person.THROW_ON_INDEX = true;\n    AttributesFactory af = new AttributesFactory();\n    af.setDataPolicy(DataPolicy.REPLICATE);\n    Region region = cache.createRegion(\"sample\", af.create());\n    qs.createIndex(\"foo\", IndexType.FUNCTIONAL, \"index\", \"/sample\");\n    Context ctx = cache.getJNDIContext();\n    UserTransaction utx = (UserTransaction) ctx.lookup(\"java:/UserTransaction\");\n    Integer x = new Integer(0);\n    utx.begin();\n    region.create(x, new Person(\"xyz\", 45));\n    try {\n      utx.commit();\n      fail(\"Commit should have thrown an exception because the index update threw\");\n    } catch (Exception e) {\n      \r\n    }\n  }\n","realPath":"geode-core/src/integrationTest/java/org/apache/geode/cache/query/transaction/QueryAndJtaJUnitTest.java","repoName":"geode","snippetEndLine":0,"snippetStartLine":0,"startLine":413,"status":"M"}],"commitId":"0fd56e418752c14ed8ebebe5a370164034aafc39","commitMessage":"@@@GEODE-7846: Replace all uses of hardcoded / with Region.SEPARATOR (#5157)\n\nAuthored-by: Donal Evans <doevans@pivotal.io>","date":"2020-05-29 00:37:39","modifiedFileCount":"489","status":"M","submitter":"Donal Evans"}]
