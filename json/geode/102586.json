[{"authorTime":"2018-05-22 23:46:15","codes":[{"authorDate":"2018-05-15 05:17:02","commitOrder":3,"curCode":"  public void testConfigureServerSSLSocketSetsSoTimeout() throws Exception {\n    final SocketCreator socketCreator = new SocketCreator(mock(SSLConfig.class));\n    final SSLSocket socket = mock(SSLSocket.class);\n    Certificate[] certs = new Certificate[] {mock(X509Certificate.class)};\n    SSLSession session = mock(SSLSession.class);\n    when(session.getPeerCertificates()).thenReturn(certs);\n    when(socket.getSession()).thenReturn(session);\n\n    final int timeout = 1938236;\n    socketCreator.handshakeIfSocketIsSSL(socket, timeout);\n\n    verify(socket).getSession();\n    verify(session).getPeerCertificates();\n    verify(socket).setSoTimeout(timeout);\n  }\n","date":"2018-05-15 05:17:02","endLine":66,"groupId":"8668","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testConfigureServerSSLSocketSetsSoTimeout","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-geode-10-0.7/blobInfo/CC_OUT/blobs/a0/480b9be2e0cc82a7f49fe24e5d29e329f95535.src","preCode":"  public void testConfigureServerSSLSocketSetsSoTimeout() throws Exception {\n    final SocketCreator socketCreator = new SocketCreator(mock(SSLConfig.class));\n    final SSLSocket socket = mock(SSLSocket.class);\n    Certificate[] certs = new Certificate[] {mock(X509Certificate.class)};\n    SSLSession session = mock(SSLSession.class);\n    when(session.getPeerCertificates()).thenReturn(certs);\n    when(socket.getSession()).thenReturn(session);\n\n    final int timeout = 1938236;\n    socketCreator.handshakeIfSocketIsSSL(socket, timeout);\n\n    verify(socket).getSession();\n    verify(session).getPeerCertificates();\n    verify(socket).setSoTimeout(timeout);\n  }\n","realPath":"geode-core/src/test/java/org/apache/geode/internal/net/SocketCreatorJUnitTest.java","repoName":"geode","snippetEndLine":0,"snippetStartLine":0,"startLine":52,"status":"NB"},{"authorDate":"2018-05-22 23:46:15","commitOrder":3,"curCode":"  public void testConfigureServerPlainSocketDoesntSetSoTimeout() throws Exception {\n    final SocketCreator socketCreator = new SocketCreator(mock(SSLConfig.class));\n    final Socket socket = mock(Socket.class);\n    final int timeout = 1938236;\n\n    socketCreator.handshakeIfSocketIsSSL(socket, timeout);\n    verify(socket, never()).setSoTimeout(timeout);\n  }\n","date":"2018-05-22 23:47:42","endLine":78,"groupId":"42585","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testConfigureServerPlainSocketDoesntSetSoTimeout","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-geode-10-0.7/blobInfo/CC_OUT/blobs/83/76d59206aa0c7645a9846395d0b8d3da84d497.src","preCode":"  public void testConfigureServerPlainSocketDoesntSetSoTimeout() throws Exception {\n    final SocketCreator socketCreator = new SocketCreator(mock(SSLConfig.class));\n    final Socket socket = mock(Socket.class);\n    final int timeout = 1938236;\n\n    socketCreator.handshakeIfSocketIsSSL(socket, timeout);\n    verify(socket, never()).setSoTimeout(timeout);\n  }\n","realPath":"geode-core/src/test/java/org/apache/geode/internal/net/SocketCreatorJUnitTest.java","repoName":"geode","snippetEndLine":0,"snippetStartLine":0,"startLine":71,"status":"B"}],"commitId":"d998510ae479f3d8a0a1950c8a6b363a480459c8","commitMessage":"@@@GEODE-3563 SSL socket handling problems in TCPConduit run\n\nGester suggested adding a unit test for non-ssl sockets to verify that\nthe timeout setting on the socket is not tampered with.\n","date":"2018-05-22 23:47:42","modifiedFileCount":"1","status":"M","submitter":"Bruce Schuchardt"},{"authorTime":"2018-05-22 23:46:15","codes":[{"authorDate":"2018-10-25 12:31:50","commitOrder":4,"curCode":"  public void testConfigureServerSSLSocketSetsSoTimeout() throws Exception {\n    final SocketCreator socketCreator = new SocketCreator(mock(SSLConfig.class));\n    final SSLSocket socket = mock(SSLSocket.class);\n\n    final int timeout = 1938236;\n    socketCreator.handshakeIfSocketIsSSL(socket, timeout);\n    verify(socket).setSoTimeout(timeout);\n  }\n","date":"2018-10-25 12:31:50","endLine":60,"groupId":"42585","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testConfigureServerSSLSocketSetsSoTimeout","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-geode-10-0.7/blobInfo/CC_OUT/blobs/47/6978980333ac7630943a2dc44f170b2d1db81c.src","preCode":"  public void testConfigureServerSSLSocketSetsSoTimeout() throws Exception {\n    final SocketCreator socketCreator = new SocketCreator(mock(SSLConfig.class));\n    final SSLSocket socket = mock(SSLSocket.class);\n    Certificate[] certs = new Certificate[] {mock(X509Certificate.class)};\n    SSLSession session = mock(SSLSession.class);\n    when(session.getPeerCertificates()).thenReturn(certs);\n    when(socket.getSession()).thenReturn(session);\n\n    final int timeout = 1938236;\n    socketCreator.handshakeIfSocketIsSSL(socket, timeout);\n\n    verify(socket).getSession();\n    verify(session).getPeerCertificates();\n    verify(socket).setSoTimeout(timeout);\n  }\n","realPath":"geode-core/src/test/java/org/apache/geode/internal/net/SocketCreatorJUnitTest.java","repoName":"geode","snippetEndLine":0,"snippetStartLine":0,"startLine":53,"status":"M"},{"authorDate":"2018-05-22 23:46:15","commitOrder":4,"curCode":"  public void testConfigureServerPlainSocketDoesntSetSoTimeout() throws Exception {\n    final SocketCreator socketCreator = new SocketCreator(mock(SSLConfig.class));\n    final Socket socket = mock(Socket.class);\n    final int timeout = 1938236;\n\n    socketCreator.handshakeIfSocketIsSSL(socket, timeout);\n    verify(socket, never()).setSoTimeout(timeout);\n  }\n","date":"2018-05-22 23:47:42","endLine":78,"groupId":"42585","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testConfigureServerPlainSocketDoesntSetSoTimeout","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-geode-10-0.7/blobInfo/CC_OUT/blobs/83/76d59206aa0c7645a9846395d0b8d3da84d497.src","preCode":"  public void testConfigureServerPlainSocketDoesntSetSoTimeout() throws Exception {\n    final SocketCreator socketCreator = new SocketCreator(mock(SSLConfig.class));\n    final Socket socket = mock(Socket.class);\n    final int timeout = 1938236;\n\n    socketCreator.handshakeIfSocketIsSSL(socket, timeout);\n    verify(socket, never()).setSoTimeout(timeout);\n  }\n","realPath":"geode-core/src/test/java/org/apache/geode/internal/net/SocketCreatorJUnitTest.java","repoName":"geode","snippetEndLine":0,"snippetStartLine":0,"startLine":71,"status":"N"}],"commitId":"cfdd0a601532333b8e38acbe15fd9cfed5a84b36","commitMessage":"@@@GEODE-5819: fix ssl test failures in jdk11 (#2702)\n\n* do not call getSession after startHandshake on a socket to make it TLS1.3 compliant\n* when using TLS1.3 protocol in the tests.  make sure to user a certificate that are TLS1.3 compliant.\n","date":"2018-10-25 12:31:50","modifiedFileCount":"4","status":"M","submitter":"jinmeiliao"},{"authorTime":"2020-03-03 05:09:07","codes":[{"authorDate":"2020-03-03 05:09:07","commitOrder":5,"curCode":"  public void testConfigureServerSSLSocketSetsSoTimeout() throws Exception {\n    final SocketCreator socketCreator = new SocketCreator(mock(SSLConfig.class));\n    final SSLSocket socket = mock(SSLSocket.class);\n\n    final int timeout = 1938236;\n    socketCreator.forCluster().handshakeIfSocketIsSSL(socket, timeout);\n    verify(socket).setSoTimeout(timeout);\n  }\n","date":"2020-03-03 05:09:07","endLine":60,"groupId":"22464","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"testConfigureServerSSLSocketSetsSoTimeout","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-geode-10-0.7/blobInfo/CC_OUT/blobs/9b/8b99ade3c1c25820764c11767026b9f491d41b.src","preCode":"  public void testConfigureServerSSLSocketSetsSoTimeout() throws Exception {\n    final SocketCreator socketCreator = new SocketCreator(mock(SSLConfig.class));\n    final SSLSocket socket = mock(SSLSocket.class);\n\n    final int timeout = 1938236;\n    socketCreator.handshakeIfSocketIsSSL(socket, timeout);\n    verify(socket).setSoTimeout(timeout);\n  }\n","realPath":"geode-core/src/test/java/org/apache/geode/internal/net/SocketCreatorJUnitTest.java","repoName":"geode","snippetEndLine":0,"snippetStartLine":0,"startLine":53,"status":"M"},{"authorDate":"2020-03-03 05:09:07","commitOrder":5,"curCode":"  public void testConfigureServerPlainSocketDoesntSetSoTimeout() throws Exception {\n    final SocketCreator socketCreator = new SocketCreator(mock(SSLConfig.class));\n    final Socket socket = mock(Socket.class);\n    final int timeout = 1938236;\n\n    socketCreator.forCluster().handshakeIfSocketIsSSL(socket, timeout);\n    verify(socket, never()).setSoTimeout(timeout);\n  }\n","date":"2020-03-03 05:09:07","endLine":70,"groupId":"22464","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"testConfigureServerPlainSocketDoesntSetSoTimeout","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-geode-10-0.7/blobInfo/CC_OUT/blobs/9b/8b99ade3c1c25820764c11767026b9f491d41b.src","preCode":"  public void testConfigureServerPlainSocketDoesntSetSoTimeout() throws Exception {\n    final SocketCreator socketCreator = new SocketCreator(mock(SSLConfig.class));\n    final Socket socket = mock(Socket.class);\n    final int timeout = 1938236;\n\n    socketCreator.handshakeIfSocketIsSSL(socket, timeout);\n    verify(socket, never()).setSoTimeout(timeout);\n  }\n","realPath":"geode-core/src/test/java/org/apache/geode/internal/net/SocketCreatorJUnitTest.java","repoName":"geode","snippetEndLine":0,"snippetStartLine":0,"startLine":63,"status":"M"}],"commitId":"0af626462642c6352840cd6e81a5265c74045c7f","commitMessage":"@@@GEODE-7808: standardize on use of HostAndPort to form client-side connections (#4743)\n\n* Squashed merge of feature/GEODE-7808\n\nremoved HostAddress\nrenamed LocatorAddress to HostAndPort\nmodified TcpClient methods to take a HostAndPort argument instead of\nInetAddress\nmodified SocketCreator to take a HostAndPort argument instead of\nInetAddress\n\n* GEODE-7808 - standardize on use of HostAndPort for connection formation\n\nThis continues a previous PR that passed and was approved for merge.\nThis commit raises up several methods from SocketCreator into the\nTcpSocketCreator interface.  This is an intermediate commit.  A\nsubsequent commit will refactor TcpSocketCreator to separate the client\nand server methods for creating server-sockets and client connections to\nserver-sockets.\n\n* refactored socket-creators to separate concerns\n\nServerSocketCreator holds methods for non-client comms\nClientSocketCreator holds methods that clients should use for comms\nAdvancedSocketCreator holds methods for people who need to get around\nthe limitations of the other two interfaces\n\n* adding missing interface\n\n* move code out of inner-classes into first-class classes\n\n* renaming interfaces and methods to be less confusing\n","date":"2020-03-03 05:09:07","modifiedFileCount":"78","status":"M","submitter":"Bruce Schuchardt"},{"authorTime":"2020-03-04 03:17:00","codes":[{"authorDate":"2020-03-04 03:17:00","commitOrder":6,"curCode":"  public void testConfigureServerSSLSocketSetsSoTimeout() throws Exception {\n    final SocketCreator socketCreator = new SocketCreator(mock(SSLConfig.class));\n    final SSLSocket socket = mock(SSLSocket.class);\n\n    final int timeout = 1938236;\n    socketCreator.handshakeIfSocketIsSSL(socket, timeout);\n    verify(socket).setSoTimeout(timeout);\n  }\n","date":"2020-03-04 03:17:00","endLine":60,"groupId":"42585","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"testConfigureServerSSLSocketSetsSoTimeout","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-geode-10-0.7/blobInfo/CC_OUT/blobs/d3/7e043c46ab9f96d596c19440fca0fa7542004c.src","preCode":"  public void testConfigureServerSSLSocketSetsSoTimeout() throws Exception {\n    final SocketCreator socketCreator = new SocketCreator(mock(SSLConfig.class));\n    final SSLSocket socket = mock(SSLSocket.class);\n\n    final int timeout = 1938236;\n    socketCreator.forCluster().handshakeIfSocketIsSSL(socket, timeout);\n    verify(socket).setSoTimeout(timeout);\n  }\n","realPath":"geode-core/src/test/java/org/apache/geode/internal/net/SocketCreatorJUnitTest.java","repoName":"geode","snippetEndLine":0,"snippetStartLine":0,"startLine":53,"status":"M"},{"authorDate":"2020-03-04 03:17:00","commitOrder":6,"curCode":"  public void testConfigureServerPlainSocketDoesntSetSoTimeout() throws Exception {\n    final SocketCreator socketCreator = new SocketCreator(mock(SSLConfig.class));\n    final Socket socket = mock(Socket.class);\n    final int timeout = 1938236;\n\n    socketCreator.handshakeIfSocketIsSSL(socket, timeout);\n    verify(socket, never()).setSoTimeout(timeout);\n  }\n","date":"2020-03-04 03:17:00","endLine":70,"groupId":"42585","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"testConfigureServerPlainSocketDoesntSetSoTimeout","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-geode-10-0.7/blobInfo/CC_OUT/blobs/d3/7e043c46ab9f96d596c19440fca0fa7542004c.src","preCode":"  public void testConfigureServerPlainSocketDoesntSetSoTimeout() throws Exception {\n    final SocketCreator socketCreator = new SocketCreator(mock(SSLConfig.class));\n    final Socket socket = mock(Socket.class);\n    final int timeout = 1938236;\n\n    socketCreator.forCluster().handshakeIfSocketIsSSL(socket, timeout);\n    verify(socket, never()).setSoTimeout(timeout);\n  }\n","realPath":"geode-core/src/test/java/org/apache/geode/internal/net/SocketCreatorJUnitTest.java","repoName":"geode","snippetEndLine":0,"snippetStartLine":0,"startLine":63,"status":"M"}],"commitId":"4b06a7ae04e3eb3e32d8a6a96c7eb5e5d3269df0","commitMessage":"@@@Revert \"GEODE-7808: standardize on use of HostAndPort to form client-side connections (#4743)\" (#4761)\n\nThis reverts commit 0af626462642c6352840cd6e81a5265c74045c7f.\nThat commit seems to have caused a severe performance drop in several\nBenchmark tests:\n\norg.apache.geode.benchmark.tests.PartitionedGetBenchmark\n              average ops/second  Baseline:    981794.46  Test:     41239.82  Difference:  -95.8%\norg.apache.geode.benchmark.tests.ReplicatedGetBenchmark\n              average ops/second  Baseline:    972769.18  Test:     41299.96  Difference:  -95.8%\norg.apache.geode.benchmark.tests.PartitionedNonIndexedQueryBenchmark\n              average ops/second  Baseline:        90.05  Test:        70.52  Difference:  -21.7%","date":"2020-03-04 03:17:00","modifiedFileCount":"78","status":"M","submitter":"Bruce Schuchardt"},{"authorTime":"2020-03-05 05:06:54","codes":[{"authorDate":"2020-03-05 05:06:54","commitOrder":7,"curCode":"  public void testConfigureServerSSLSocketSetsSoTimeout() throws Exception {\n    final SocketCreator socketCreator = new SocketCreator(mock(SSLConfig.class));\n    final SSLSocket socket = mock(SSLSocket.class);\n\n    final int timeout = 1938236;\n    socketCreator.forCluster().handshakeIfSocketIsSSL(socket, timeout);\n    verify(socket).setSoTimeout(timeout);\n  }\n","date":"2020-03-05 05:06:54","endLine":60,"groupId":"102586","id":9,"instanceNumber":1,"isCurCommit":0,"methodName":"testConfigureServerSSLSocketSetsSoTimeout","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-geode-10-0.7/blobInfo/CC_OUT/blobs/9b/8b99ade3c1c25820764c11767026b9f491d41b.src","preCode":"  public void testConfigureServerSSLSocketSetsSoTimeout() throws Exception {\n    final SocketCreator socketCreator = new SocketCreator(mock(SSLConfig.class));\n    final SSLSocket socket = mock(SSLSocket.class);\n\n    final int timeout = 1938236;\n    socketCreator.handshakeIfSocketIsSSL(socket, timeout);\n    verify(socket).setSoTimeout(timeout);\n  }\n","realPath":"geode-core/src/test/java/org/apache/geode/internal/net/SocketCreatorJUnitTest.java","repoName":"geode","snippetEndLine":0,"snippetStartLine":0,"startLine":53,"status":"M"},{"authorDate":"2020-03-05 05:06:54","commitOrder":7,"curCode":"  public void testConfigureServerPlainSocketDoesntSetSoTimeout() throws Exception {\n    final SocketCreator socketCreator = new SocketCreator(mock(SSLConfig.class));\n    final Socket socket = mock(Socket.class);\n    final int timeout = 1938236;\n\n    socketCreator.forCluster().handshakeIfSocketIsSSL(socket, timeout);\n    verify(socket, never()).setSoTimeout(timeout);\n  }\n","date":"2020-03-05 05:06:54","endLine":70,"groupId":"102586","id":10,"instanceNumber":2,"isCurCommit":0,"methodName":"testConfigureServerPlainSocketDoesntSetSoTimeout","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-geode-10-0.7/blobInfo/CC_OUT/blobs/9b/8b99ade3c1c25820764c11767026b9f491d41b.src","preCode":"  public void testConfigureServerPlainSocketDoesntSetSoTimeout() throws Exception {\n    final SocketCreator socketCreator = new SocketCreator(mock(SSLConfig.class));\n    final Socket socket = mock(Socket.class);\n    final int timeout = 1938236;\n\n    socketCreator.handshakeIfSocketIsSSL(socket, timeout);\n    verify(socket, never()).setSoTimeout(timeout);\n  }\n","realPath":"geode-core/src/test/java/org/apache/geode/internal/net/SocketCreatorJUnitTest.java","repoName":"geode","snippetEndLine":0,"snippetStartLine":0,"startLine":63,"status":"M"}],"commitId":"5c2b959e98a6330ecaeddb4d26e11ea29f7a2d7f","commitMessage":"@@@GEODE-7808: standardize on use of HostAndPort for creating connections (#4765)\n\n* Squashed merge of feature/GEODE-7808\n\nremoved HostAddress\nrenamed LocatorAddress to HostAndPort\nmodified TcpClient methods to take a HostAndPort argument instead of\nInetAddress\nmodified SocketCreator to take a HostAndPort argument instead of\nInetAddress\n\n* GEODE-7808 - standardize on use of HostAndPort for connection formation\n\nThis continues a previous PR that passed and was approved for merge.\nThis commit raises up several methods from SocketCreator into the\nTcpSocketCreator interface.  This is an intermediate commit.  A\nsubsequent commit will refactor TcpSocketCreator to separate the client\nand server methods for creating server-sockets and client connections to\nserver-sockets.\n\n* refactored socket-creators to separate concerns\n\nServerSocketCreator holds methods for non-client comms\nClientSocketCreator holds methods that clients should use for comms\nAdvancedSocketCreator holds methods for people who need to get around\nthe limitations of the other two interfaces\n\n* adding missing interface\n\n* move code out of inner-classes into first-class classes\n\n* renaming interfaces and methods to be less confusing\n\n* reinstate SocketCreator ip to hostname cache for performance\n\n* changes from review comments\n","date":"2020-03-05 05:06:54","modifiedFileCount":"80","status":"M","submitter":"Bruce Schuchardt"}]
