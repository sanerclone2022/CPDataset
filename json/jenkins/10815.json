[{"authorTime":"2016-11-06 18:25:58","codes":[{"authorDate":"2016-11-06 18:25:58","commitOrder":1,"curCode":"    public void getLogReturnsAnRightOrder() throws Exception {\n        Job j = Mockito.mock(Job.class);\n        File tempBuildDir = tmp.newFolder();\n        Mockito.when(j.getBuildDir()).thenReturn(tempBuildDir);\n        Run<? extends Job<?, ?>, ? extends Run<?, ?>> r = new Run(j, 0) {};\n        File f = r.getLogFile();\n        f.getParentFile().mkdirs();\n        PrintWriter w = new PrintWriter(f, \"utf-8\");\n        for (int i = 0; i < 20; i++) {\n            w.println(\"dummy\" + i);\n        }\n\n        w.close();\n        List<String> logLines = r.getLog(10);\n        assertFalse(logLines.isEmpty());\n\n        for (int i = 1; i < 10; i++) {\n            assertEquals(\"dummy\" + (10+i), logLines.get(i));\n        }\n        assertEquals(\"[...truncated 68 B...]\", logLines.get(0));\n    }\n","date":"2016-11-06 18:25:58","endLine":193,"groupId":"1109","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"getLogReturnsAnRightOrder","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-jenkins-10-0.7/blobInfo/CC_OUT/blobs/58/ce9a5b6ebbf20dbe3692048cca3906afdae807.src","preCode":"    public void getLogReturnsAnRightOrder() throws Exception {\n        Job j = Mockito.mock(Job.class);\n        File tempBuildDir = tmp.newFolder();\n        Mockito.when(j.getBuildDir()).thenReturn(tempBuildDir);\n        Run<? extends Job<?, ?>, ? extends Run<?, ?>> r = new Run(j, 0) {};\n        File f = r.getLogFile();\n        f.getParentFile().mkdirs();\n        PrintWriter w = new PrintWriter(f, \"utf-8\");\n        for (int i = 0; i < 20; i++) {\n            w.println(\"dummy\" + i);\n        }\n\n        w.close();\n        List<String> logLines = r.getLog(10);\n        assertFalse(logLines.isEmpty());\n\n        for (int i = 1; i < 10; i++) {\n            assertEquals(\"dummy\" + (10+i), logLines.get(i));\n        }\n        assertEquals(\"[...truncated 68 B...]\", logLines.get(0));\n    }\n","realPath":"core/src/test/java/hudson/model/RunTest.java","repoName":"jenkins","snippetEndLine":0,"snippetStartLine":0,"startLine":173,"status":"B"},{"authorDate":"2016-11-06 18:25:58","commitOrder":1,"curCode":"    public void getLogReturnsAllLines() throws Exception {\n        Job j = Mockito.mock(Job.class);\n        File tempBuildDir = tmp.newFolder();\n        Mockito.when(j.getBuildDir()).thenReturn(tempBuildDir);\n        Run<? extends Job<?, ?>, ? extends Run<?, ?>> r = new Run(j, 0) {};\n        File f = r.getLogFile();\n        f.getParentFile().mkdirs();\n        PrintWriter w = new PrintWriter(f, \"utf-8\");\n        w.print(\"a1\\nb2\\n\\nc3\");\n        w.close();\n        List<String> logLines = r.getLog(10);\n        assertFalse(logLines.isEmpty());\n\n        assertEquals(\"a1\", logLines.get(0));\n        assertEquals(\"b2\", logLines.get(1));\n        assertEquals(\"\", logLines.get(2));\n        assertEquals(\"c3\", logLines.get(3));\n    }\n","date":"2016-11-06 18:25:58","endLine":213,"groupId":"1109","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"getLogReturnsAllLines","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-jenkins-10-0.7/blobInfo/CC_OUT/blobs/58/ce9a5b6ebbf20dbe3692048cca3906afdae807.src","preCode":"    public void getLogReturnsAllLines() throws Exception {\n        Job j = Mockito.mock(Job.class);\n        File tempBuildDir = tmp.newFolder();\n        Mockito.when(j.getBuildDir()).thenReturn(tempBuildDir);\n        Run<? extends Job<?, ?>, ? extends Run<?, ?>> r = new Run(j, 0) {};\n        File f = r.getLogFile();\n        f.getParentFile().mkdirs();\n        PrintWriter w = new PrintWriter(f, \"utf-8\");\n        w.print(\"a1\\nb2\\n\\nc3\");\n        w.close();\n        List<String> logLines = r.getLog(10);\n        assertFalse(logLines.isEmpty());\n\n        assertEquals(\"a1\", logLines.get(0));\n        assertEquals(\"b2\", logLines.get(1));\n        assertEquals(\"\", logLines.get(2));\n        assertEquals(\"c3\", logLines.get(3));\n    }\n","realPath":"core/src/test/java/hudson/model/RunTest.java","repoName":"jenkins","snippetEndLine":0,"snippetStartLine":0,"startLine":196,"status":"B"}],"commitId":"2e8c3bec8ea150621ba0d01c8d44dc2b00b550bf","commitMessage":"@@@[FIXED JENKINS-39535] - Optimize get log method (#2607)\n\n* Add some tests to  current behaviour of getLog method\n\n* getLog(maxLines) reads only last maxLines lines now\n\nIt should speed up and reduce memory consumption for some plugins (i.e.\nEmail-ext Plugin).\nAlso now this method could be used to get last lines of build output in efficient manner.\n\n* Fix issues from code review\n","date":"2016-11-06 18:25:58","modifiedFileCount":"2","status":"B","submitter":"Akbashev Alexander"},{"authorTime":"2016-11-06 18:25:58","codes":[{"authorDate":"2017-01-09 22:51:36","commitOrder":2,"curCode":"    public void getLogReturnsAnRightOrder() throws Exception {\n        Job j = Mockito.mock(Job.class);\n        File tempBuildDir = tmp.newFolder();\n        Mockito.when(j.getBuildDir()).thenReturn(tempBuildDir);\n        Run<? extends Job<?, ?>, ? extends Run<?, ?>> r = new Run(j, 0) {};\n        File f = r.getLogFile();\n        f.getParentFile().mkdirs();\n        PrintWriter w = new PrintWriter(f, \"utf-8\");\n        for (int i = 0; i < 20; i++) {\n            w.println(\"dummy\" + i);\n        }\n\n        w.close();\n        List<String> logLines = r.getLog(10);\n        assertFalse(logLines.isEmpty());\n\n        for (int i = 1; i < 10; i++) {\n            assertEquals(\"dummy\" + (10+i), logLines.get(i));\n        }\n        int truncatedCount = 10* (\"dummyN\".length() + System.getProperty(\"line.separator\").length()) - 2;\n        assertEquals(\"[...truncated \"+truncatedCount+\" B...]\", logLines.get(0));\n    }\n","date":"2017-01-09 22:51:36","endLine":194,"groupId":"10815","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"getLogReturnsAnRightOrder","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-jenkins-10-0.7/blobInfo/CC_OUT/blobs/eb/27dc69c2c550046c66572ff4db6cf213a2d2bf.src","preCode":"    public void getLogReturnsAnRightOrder() throws Exception {\n        Job j = Mockito.mock(Job.class);\n        File tempBuildDir = tmp.newFolder();\n        Mockito.when(j.getBuildDir()).thenReturn(tempBuildDir);\n        Run<? extends Job<?, ?>, ? extends Run<?, ?>> r = new Run(j, 0) {};\n        File f = r.getLogFile();\n        f.getParentFile().mkdirs();\n        PrintWriter w = new PrintWriter(f, \"utf-8\");\n        for (int i = 0; i < 20; i++) {\n            w.println(\"dummy\" + i);\n        }\n\n        w.close();\n        List<String> logLines = r.getLog(10);\n        assertFalse(logLines.isEmpty());\n\n        for (int i = 1; i < 10; i++) {\n            assertEquals(\"dummy\" + (10+i), logLines.get(i));\n        }\n        assertEquals(\"[...truncated 68 B...]\", logLines.get(0));\n    }\n","realPath":"core/src/test/java/hudson/model/RunTest.java","repoName":"jenkins","snippetEndLine":0,"snippetStartLine":0,"startLine":173,"status":"M"},{"authorDate":"2016-11-06 18:25:58","commitOrder":2,"curCode":"    public void getLogReturnsAllLines() throws Exception {\n        Job j = Mockito.mock(Job.class);\n        File tempBuildDir = tmp.newFolder();\n        Mockito.when(j.getBuildDir()).thenReturn(tempBuildDir);\n        Run<? extends Job<?, ?>, ? extends Run<?, ?>> r = new Run(j, 0) {};\n        File f = r.getLogFile();\n        f.getParentFile().mkdirs();\n        PrintWriter w = new PrintWriter(f, \"utf-8\");\n        w.print(\"a1\\nb2\\n\\nc3\");\n        w.close();\n        List<String> logLines = r.getLog(10);\n        assertFalse(logLines.isEmpty());\n\n        assertEquals(\"a1\", logLines.get(0));\n        assertEquals(\"b2\", logLines.get(1));\n        assertEquals(\"\", logLines.get(2));\n        assertEquals(\"c3\", logLines.get(3));\n    }\n","date":"2016-11-06 18:25:58","endLine":213,"groupId":"10815","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"getLogReturnsAllLines","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-jenkins-10-0.7/blobInfo/CC_OUT/blobs/58/ce9a5b6ebbf20dbe3692048cca3906afdae807.src","preCode":"    public void getLogReturnsAllLines() throws Exception {\n        Job j = Mockito.mock(Job.class);\n        File tempBuildDir = tmp.newFolder();\n        Mockito.when(j.getBuildDir()).thenReturn(tempBuildDir);\n        Run<? extends Job<?, ?>, ? extends Run<?, ?>> r = new Run(j, 0) {};\n        File f = r.getLogFile();\n        f.getParentFile().mkdirs();\n        PrintWriter w = new PrintWriter(f, \"utf-8\");\n        w.print(\"a1\\nb2\\n\\nc3\");\n        w.close();\n        List<String> logLines = r.getLog(10);\n        assertFalse(logLines.isEmpty());\n\n        assertEquals(\"a1\", logLines.get(0));\n        assertEquals(\"b2\", logLines.get(1));\n        assertEquals(\"\", logLines.get(2));\n        assertEquals(\"c3\", logLines.get(3));\n    }\n","realPath":"core/src/test/java/hudson/model/RunTest.java","repoName":"jenkins","snippetEndLine":0,"snippetStartLine":0,"startLine":196,"status":"N"}],"commitId":"d1779cd96cb60bd5d372386523e0aeb1c4818a8a","commitMessage":"@@@Merge branch 'master' into security-master\n","date":"2017-01-09 22:51:36","modifiedFileCount":"9","status":"M","submitter":"Jesse Glick"}]
