[{"authorTime":"2014-07-11 06:24:34","codes":[{"authorDate":"2014-05-02 23:59:51","commitOrder":2,"curCode":"    @Test public void dropLinksAfterGC() throws Exception {\n        FreeStyleProject p = r.createFreeStyleProject();\n        FreeStyleBuild b1 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b2 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b3 = r.buildAndAssertSuccess(p);\n        assertEquals(b2, b1.getNextBuild());\n        assertEquals(b3, b2.getNextBuild());\n        assertEquals(null, b3.getNextBuild());\n        assertEquals(null, b1.getPreviousBuild());\n        assertEquals(b1, b2.getPreviousBuild());\n        assertEquals(b2, b3.getPreviousBuild());\n        assertEquals(1, BRHF.drop(b1));\n        b2.delete();\n        FreeStyleBuild b1a = b2.getPreviousBuild();\n        assertNotSame(b1, b1a);\n        assertEquals(1, b1a.getNumber());\n        assertEquals(b3, b1a.getNextBuild());\n    }\n","date":"2014-05-02 23:59:51","endLine":61,"groupId":"7259","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"dropLinksAfterGC","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-jenkins-10-0.7/blobInfo/CC_OUT/blobs/6f/63a5449bad1e1c8bf97afd655be8accba4d22c.src","preCode":"    @Test public void dropLinksAfterGC() throws Exception {\n        FreeStyleProject p = r.createFreeStyleProject();\n        FreeStyleBuild b1 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b2 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b3 = r.buildAndAssertSuccess(p);\n        assertEquals(b2, b1.getNextBuild());\n        assertEquals(b3, b2.getNextBuild());\n        assertEquals(null, b3.getNextBuild());\n        assertEquals(null, b1.getPreviousBuild());\n        assertEquals(b1, b2.getPreviousBuild());\n        assertEquals(b2, b3.getPreviousBuild());\n        assertEquals(1, BRHF.drop(b1));\n        b2.delete();\n        FreeStyleBuild b1a = b2.getPreviousBuild();\n        assertNotSame(b1, b1a);\n        assertEquals(1, b1a.getNumber());\n        assertEquals(b3, b1a.getNextBuild());\n    }\n","realPath":"test/src/test/java/jenkins/model/lazy/LazyBuildMixInTest.java","repoName":"jenkins","snippetEndLine":0,"snippetStartLine":0,"startLine":44,"status":"NB"},{"authorDate":"2014-07-11 06:24:34","commitOrder":2,"curCode":"    @Test public void dropLinksAfterGC2() throws Exception {\n        FreeStyleProject p = r.createFreeStyleProject();\n        FreeStyleBuild b1 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b2 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b3 = r.buildAndAssertSuccess(p);\n        assertEquals(b2, b1.getNextBuild());\n        assertEquals(b3, b2.getNextBuild());\n        assertEquals(null, b3.getNextBuild());\n        assertEquals(null, b1.getPreviousBuild());\n        assertEquals(b1, b2.getPreviousBuild());\n        assertEquals(b2, b3.getPreviousBuild());\n        b2.delete();\n        assertEquals(1, BRHF.drop(b1));\n        FreeStyleBuild b1a = b2.getPreviousBuild();\n        assertNotSame(b1, b1a);\n        assertEquals(1, b1a.getNumber());\n        assertEquals(b3, b1a.getNextBuild());\n    }\n","date":"2014-07-11 06:24:34","endLine":83,"groupId":"5916","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"dropLinksAfterGC2","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-jenkins-10-0.7/blobInfo/CC_OUT/blobs/d1/8a565e23dd44fd3e1235f930560d0822f28f41.src","preCode":"    @Test public void dropLinksAfterGC2() throws Exception {\n        FreeStyleProject p = r.createFreeStyleProject();\n        FreeStyleBuild b1 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b2 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b3 = r.buildAndAssertSuccess(p);\n        assertEquals(b2, b1.getNextBuild());\n        assertEquals(b3, b2.getNextBuild());\n        assertEquals(null, b3.getNextBuild());\n        assertEquals(null, b1.getPreviousBuild());\n        assertEquals(b1, b2.getPreviousBuild());\n        assertEquals(b2, b3.getPreviousBuild());\n        b2.delete();\n        assertEquals(1, BRHF.drop(b1));\n        FreeStyleBuild b1a = b2.getPreviousBuild();\n        assertNotSame(b1, b1a);\n        assertEquals(1, b1a.getNumber());\n        assertEquals(b3, b1a.getNextBuild());\n    }\n","realPath":"test/src/test/java/jenkins/model/lazy/LazyBuildMixInTest.java","repoName":"jenkins","snippetEndLine":0,"snippetStartLine":0,"startLine":66,"status":"B"}],"commitId":"53e95ee517259e1e10d7209bcbaa4314397c1f40","commitMessage":"@@@[JENKINS-22395]\n\nI'm not sure if I understand how the original fix in PR #1190 (f1430a2) addresses the problem.\n\nMy understanding is of the problem is as follows:\n\n  - someone deletes 'b2' but holds on to its reference (could be different threads)\n  - someone calls b2.getPreviousBuild()\n    - if b2.previousBuildR is null.  then this triggers the loading of b1.  and\n      that process sets up a bi-di link via b1<->b2 via b1.nextBuildR <-> b2.previousBuildR\n    - this makes b1.getNextBuild() incorrectly return b2\n\nPresumably f1430a2 addresses this somehow.  but I think I can induce this situation in other ways. \nwhich is what dropLinksAfterGC2() does.\n\nIn this test. \n\ninitial state:\n\n   b1 <-> b2 <-> b3\n\n   we load everyone and connect them all up\n\nafter deleting b2:\n\n   b1 <--------> b3\n    ^            ^\n    +---- b2 ----+\n\n  b1 and b3 points each other.  and b2 still refers to each side\n\nafter dropping b1:\n\n          b2 --> b3\n\nnow.  here.  when I do b2.getPreviousBuild().  it loads b1a and it sets b1a.nextBuildR to b2.\n\n    b1a <-> b2 --> b3\n\nSo I claim this is a proof that the fix is incomplete.  even for the problem JENKINS-22395 has discovered.\n\nI don't think that the problem is for the dropLinks call to fail to patch up references.\nThe problem is that b2.getPreviousBuild() forcing b1 to point to b2.  because if b2 is deleted and assumed to be\ninvalid.  then no matter what bX this method will find you never want bX.nextBuildR to point to b2.\n","date":"2014-07-11 06:24:34","modifiedFileCount":"1","status":"M","submitter":"Kohsuke Kawaguchi"},{"authorTime":"2014-07-11 07:03:18","codes":[{"authorDate":"2014-07-11 07:03:18","commitOrder":3,"curCode":"    @Test public void dropLinksAfterGC() throws Exception {\n        RunListener.all().clear();  \r\n\n        FreeStyleProject p = r.createFreeStyleProject();\n        FreeStyleBuild b1 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b2 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b3 = r.buildAndAssertSuccess(p);\n        assertEquals(b2, b1.getNextBuild());\n        assertEquals(b3, b2.getNextBuild());\n        assertEquals(null, b3.getNextBuild());\n        assertEquals(null, b1.getPreviousBuild());\n        assertEquals(b1, b2.getPreviousBuild());\n        assertEquals(b2, b3.getPreviousBuild());\n        assertEquals(1, BRHF.drop(b1));\n        b2.delete();\n        FreeStyleBuild b1a = b2.getPreviousBuild();\n        assertNotSame(b1, b1a);\n        assertEquals(1, b1a.getNumber());\n        assertEquals(b3, b1a.getNextBuild());\n    }\n","date":"2014-07-11 07:05:23","endLine":67,"groupId":"7259","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"dropLinksAfterGC","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-jenkins-10-0.7/blobInfo/CC_OUT/blobs/36/b3890ee517bd403b759f9876dac0d31596d809.src","preCode":"    @Test public void dropLinksAfterGC() throws Exception {\n        FreeStyleProject p = r.createFreeStyleProject();\n        FreeStyleBuild b1 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b2 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b3 = r.buildAndAssertSuccess(p);\n        assertEquals(b2, b1.getNextBuild());\n        assertEquals(b3, b2.getNextBuild());\n        assertEquals(null, b3.getNextBuild());\n        assertEquals(null, b1.getPreviousBuild());\n        assertEquals(b1, b2.getPreviousBuild());\n        assertEquals(b2, b3.getPreviousBuild());\n        assertEquals(1, BRHF.drop(b1));\n        b2.delete();\n        FreeStyleBuild b1a = b2.getPreviousBuild();\n        assertNotSame(b1, b1a);\n        assertEquals(1, b1a.getNumber());\n        assertEquals(b3, b1a.getNextBuild());\n    }\n","realPath":"test/src/test/java/jenkins/model/lazy/LazyBuildMixInTest.java","repoName":"jenkins","snippetEndLine":0,"snippetStartLine":0,"startLine":48,"status":"M"},{"authorDate":"2014-07-11 07:03:18","commitOrder":3,"curCode":"    @Test public void dropLinksAfterGC2() throws Exception {\n        RunListener.all().clear();  \r\n\n        FreeStyleProject p = r.createFreeStyleProject();\n        FreeStyleBuild b1 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b2 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b3 = r.buildAndAssertSuccess(p);\n        assertEquals(b2, b1.getNextBuild());\n        assertEquals(b3, b2.getNextBuild());\n        assertEquals(null, b3.getNextBuild());\n        assertEquals(null, b1.getPreviousBuild());\n        assertEquals(b1, b2.getPreviousBuild());\n        assertEquals(b2, b3.getPreviousBuild());\n        b2.delete();\n        assertEquals(1, BRHF.drop(b1));\n        FreeStyleBuild b1a = b2.getPreviousBuild();\n        assertNotSame(b1, b1a);\n        assertEquals(1, b1a.getNumber());\n        assertEquals(b3, b1a.getNextBuild());\n    }\n","date":"2014-07-11 07:05:23","endLine":89,"groupId":"5916","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"dropLinksAfterGC2","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-jenkins-10-0.7/blobInfo/CC_OUT/blobs/36/b3890ee517bd403b759f9876dac0d31596d809.src","preCode":"    @Test public void dropLinksAfterGC2() throws Exception {\n        FreeStyleProject p = r.createFreeStyleProject();\n        FreeStyleBuild b1 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b2 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b3 = r.buildAndAssertSuccess(p);\n        assertEquals(b2, b1.getNextBuild());\n        assertEquals(b3, b2.getNextBuild());\n        assertEquals(null, b3.getNextBuild());\n        assertEquals(null, b1.getPreviousBuild());\n        assertEquals(b1, b2.getPreviousBuild());\n        assertEquals(b2, b3.getPreviousBuild());\n        b2.delete();\n        assertEquals(1, BRHF.drop(b1));\n        FreeStyleBuild b1a = b2.getPreviousBuild();\n        assertNotSame(b1, b1a);\n        assertEquals(1, b1a.getNumber());\n        assertEquals(b3, b1a.getNextBuild());\n    }\n","realPath":"test/src/test/java/jenkins/model/lazy/LazyBuildMixInTest.java","repoName":"jenkins","snippetEndLine":0,"snippetStartLine":0,"startLine":70,"status":"M"}],"commitId":"7b1b50c85a6a4bdb75f1ae5b40885afa45f96b82","commitMessage":"@@@[JENKINS-22395] correcting the control test\n\nAs I step-executed the code.  I discovered b2.getPreviousBuild() was getting invoked\nbetween BRHF.drop(b1) and b2.dropLinks() call.  in PeepholePermalink.RunListenerImpl.onDeleted()\nbecause Run.delete() calls RunListener.fireDeleted(this).\n\nThus in effect the sequence of the call order was as follows:\n\n        assertEquals(1.  BRHF.drop(b1));\n        b2.getPreviousBuild(); // happens indirectly in PeepholePermalink\n        b2.delete();\n        FreeStyleBuild b1a = b2.getPreviousBuild();\n\nThis defeats the purpose of the fix.  because in this call sequence.  by b2.dropLinks()\nas implemented before f1430a2 will correctly fix up b1a.nextBuildR to b3.\n\nFor the test to work as intended.  it is important that b2.previousBuildR.get()==null\nduring dropLinks(). That is what causes b2.getPreviousBuild() in the next line to go\nload b1a.  and sets up b1a.nextBuildR to b2.  and trigger the assertion error.\n\nAdded a code to remove all RunListeners. With this change.  the test now fails without\nthe fix in f1430a2.\n","date":"2014-07-11 07:05:23","modifiedFileCount":"1","status":"M","submitter":"Kohsuke Kawaguchi"},{"authorTime":"2014-07-11 22:55:51","codes":[{"authorDate":"2014-07-11 22:55:51","commitOrder":4,"curCode":"    @Test public void dropLinksAfterGC() throws Exception {\n        RunListener.all().clear();  \r\n\n        FreeStyleProject p = r.createFreeStyleProject();\n        FreeStyleBuild b1 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b2 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b3 = r.buildAndAssertSuccess(p);\n        assertEquals(b2, b1.getNextBuild());\n        assertEquals(b3, b2.getNextBuild());\n        assertEquals(null, b3.getNextBuild());\n        assertEquals(null, b1.getPreviousBuild());\n        assertEquals(b1, b2.getPreviousBuild());\n        assertEquals(b2, b3.getPreviousBuild());\n        b1.getRunMixIn().createReference().clear();\n        b2.delete();\n        FreeStyleBuild b1a = b2.getPreviousBuild();\n        assertNotSame(b1, b1a);\n        assertEquals(1, b1a.getNumber());\n        assertEquals(b3, b1a.getNextBuild());\n    }\n","date":"2014-07-11 22:56:00","endLine":62,"groupId":"3675","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"dropLinksAfterGC","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-jenkins-10-0.7/blobInfo/CC_OUT/blobs/ce/6dee7b36992d67aa4f3b19573dab9667eff490.src","preCode":"    @Test public void dropLinksAfterGC() throws Exception {\n        RunListener.all().clear();  \r\n\n        FreeStyleProject p = r.createFreeStyleProject();\n        FreeStyleBuild b1 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b2 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b3 = r.buildAndAssertSuccess(p);\n        assertEquals(b2, b1.getNextBuild());\n        assertEquals(b3, b2.getNextBuild());\n        assertEquals(null, b3.getNextBuild());\n        assertEquals(null, b1.getPreviousBuild());\n        assertEquals(b1, b2.getPreviousBuild());\n        assertEquals(b2, b3.getPreviousBuild());\n        assertEquals(1, BRHF.drop(b1));\n        b2.delete();\n        FreeStyleBuild b1a = b2.getPreviousBuild();\n        assertNotSame(b1, b1a);\n        assertEquals(1, b1a.getNumber());\n        assertEquals(b3, b1a.getNextBuild());\n    }\n","realPath":"test/src/test/java/jenkins/model/lazy/LazyBuildMixInTest.java","repoName":"jenkins","snippetEndLine":0,"snippetStartLine":0,"startLine":43,"status":"M"},{"authorDate":"2014-07-11 22:55:51","commitOrder":4,"curCode":"    @Test public void dropLinksAfterGC2() throws Exception {\n        RunListener.all().clear();  \r\n\n        FreeStyleProject p = r.createFreeStyleProject();\n        FreeStyleBuild b1 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b2 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b3 = r.buildAndAssertSuccess(p);\n        assertEquals(b2, b1.getNextBuild());\n        assertEquals(b3, b2.getNextBuild());\n        assertEquals(null, b3.getNextBuild());\n        assertEquals(null, b1.getPreviousBuild());\n        assertEquals(b1, b2.getPreviousBuild());\n        assertEquals(b2, b3.getPreviousBuild());\n        b2.delete();\n        b1.getRunMixIn().createReference().clear();\n        FreeStyleBuild b1a = b2.getPreviousBuild();\n        assertNotSame(b1, b1a);\n        assertEquals(1, b1a.getNumber());\n        assertEquals(b3, b1a.getNextBuild());\n    }\n","date":"2014-07-11 22:56:00","endLine":84,"groupId":"5916","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"dropLinksAfterGC2","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-jenkins-10-0.7/blobInfo/CC_OUT/blobs/ce/6dee7b36992d67aa4f3b19573dab9667eff490.src","preCode":"    @Test public void dropLinksAfterGC2() throws Exception {\n        RunListener.all().clear();  \r\n\n        FreeStyleProject p = r.createFreeStyleProject();\n        FreeStyleBuild b1 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b2 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b3 = r.buildAndAssertSuccess(p);\n        assertEquals(b2, b1.getNextBuild());\n        assertEquals(b3, b2.getNextBuild());\n        assertEquals(null, b3.getNextBuild());\n        assertEquals(null, b1.getPreviousBuild());\n        assertEquals(b1, b2.getPreviousBuild());\n        assertEquals(b2, b3.getPreviousBuild());\n        b2.delete();\n        assertEquals(1, BRHF.drop(b1));\n        FreeStyleBuild b1a = b2.getPreviousBuild();\n        assertNotSame(b1, b1a);\n        assertEquals(1, b1a.getNumber());\n        assertEquals(b3, b1a.getNextBuild());\n    }\n","realPath":"test/src/test/java/jenkins/model/lazy/LazyBuildMixInTest.java","repoName":"jenkins","snippetEndLine":0,"snippetStartLine":0,"startLine":65,"status":"M"}],"commitId":"b7ec8578f938864af9c8dbfb73a54d67f972d694","commitMessage":"@@@[JENKINS-22395] Taking advantage of BuildReference.clear (just introduced in b6226ad) to simplify test by not requiring a custom build reference holder just to simulate GC.\nConfirmed that dropLinksAfterGC and dropLinksAfterGC2 both fail in the expected way (b1a.nextBuild == b2) after commenting out the call to createReference().clear() in dropLinks.\n(Also that they fail as expected in assertNotSame if the reference is not cleared at all.)\n","date":"2014-07-11 22:56:00","modifiedFileCount":"1","status":"M","submitter":"Jesse Glick"},{"authorTime":"2020-01-20 21:55:10","codes":[{"authorDate":"2020-01-20 21:55:10","commitOrder":5,"curCode":"    @Test public void dropLinksAfterGC() throws Exception {\n        RunListener.all().clear();  \r\n\n        FreeStyleProject p = r.createFreeStyleProject();\n        FreeStyleBuild b1 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b2 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b3 = r.buildAndAssertSuccess(p);\n        assertEquals(b2, b1.getNextBuild());\n        assertEquals(b3, b2.getNextBuild());\n        assertNull(b3.getNextBuild());\n        assertNull(b1.getPreviousBuild());\n        assertEquals(b1, b2.getPreviousBuild());\n        assertEquals(b2, b3.getPreviousBuild());\n        b1.getRunMixIn().createReference().clear();\n        b2.delete();\n        FreeStyleBuild b1a = b2.getPreviousBuild();\n        assertNotSame(b1, b1a);\n        assertEquals(1, b1a.getNumber());\n        assertEquals(b3, b1a.getNextBuild());\n    }\n","date":"2020-01-20 21:55:10","endLine":61,"groupId":"10689","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"dropLinksAfterGC","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-jenkins-10-0.7/blobInfo/CC_OUT/blobs/e5/7b52d5e215115c8f59accd6bac2b0764533c0c.src","preCode":"    @Test public void dropLinksAfterGC() throws Exception {\n        RunListener.all().clear();  \r\n\n        FreeStyleProject p = r.createFreeStyleProject();\n        FreeStyleBuild b1 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b2 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b3 = r.buildAndAssertSuccess(p);\n        assertEquals(b2, b1.getNextBuild());\n        assertEquals(b3, b2.getNextBuild());\n        assertEquals(null, b3.getNextBuild());\n        assertEquals(null, b1.getPreviousBuild());\n        assertEquals(b1, b2.getPreviousBuild());\n        assertEquals(b2, b3.getPreviousBuild());\n        b1.getRunMixIn().createReference().clear();\n        b2.delete();\n        FreeStyleBuild b1a = b2.getPreviousBuild();\n        assertNotSame(b1, b1a);\n        assertEquals(1, b1a.getNumber());\n        assertEquals(b3, b1a.getNextBuild());\n    }\n","realPath":"test/src/test/java/jenkins/model/lazy/LazyBuildMixInTest.java","repoName":"jenkins","snippetEndLine":0,"snippetStartLine":0,"startLine":42,"status":"M"},{"authorDate":"2020-01-20 21:55:10","commitOrder":5,"curCode":"    @Test public void dropLinksAfterGC2() throws Exception {\n        RunListener.all().clear();  \r\n\n        FreeStyleProject p = r.createFreeStyleProject();\n        FreeStyleBuild b1 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b2 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b3 = r.buildAndAssertSuccess(p);\n        assertEquals(b2, b1.getNextBuild());\n        assertEquals(b3, b2.getNextBuild());\n        assertNull(b3.getNextBuild());\n        assertNull(b1.getPreviousBuild());\n        assertEquals(b1, b2.getPreviousBuild());\n        assertEquals(b2, b3.getPreviousBuild());\n        b2.delete();\n        b1.getRunMixIn().createReference().clear();\n        FreeStyleBuild b1a = b2.getPreviousBuild();\n        assertNotSame(b1, b1a);\n        assertEquals(1, b1a.getNumber());\n        assertEquals(b3, b1a.getNextBuild());\n    }\n","date":"2020-01-20 21:55:10","endLine":83,"groupId":"10689","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"dropLinksAfterGC2","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-jenkins-10-0.7/blobInfo/CC_OUT/blobs/e5/7b52d5e215115c8f59accd6bac2b0764533c0c.src","preCode":"    @Test public void dropLinksAfterGC2() throws Exception {\n        RunListener.all().clear();  \r\n\n        FreeStyleProject p = r.createFreeStyleProject();\n        FreeStyleBuild b1 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b2 = r.buildAndAssertSuccess(p);\n        FreeStyleBuild b3 = r.buildAndAssertSuccess(p);\n        assertEquals(b2, b1.getNextBuild());\n        assertEquals(b3, b2.getNextBuild());\n        assertEquals(null, b3.getNextBuild());\n        assertEquals(null, b1.getPreviousBuild());\n        assertEquals(b1, b2.getPreviousBuild());\n        assertEquals(b2, b3.getPreviousBuild());\n        b2.delete();\n        b1.getRunMixIn().createReference().clear();\n        FreeStyleBuild b1a = b2.getPreviousBuild();\n        assertNotSame(b1, b1a);\n        assertEquals(1, b1a.getNumber());\n        assertEquals(b3, b1a.getNextBuild());\n    }\n","realPath":"test/src/test/java/jenkins/model/lazy/LazyBuildMixInTest.java","repoName":"jenkins","snippetEndLine":0,"snippetStartLine":0,"startLine":64,"status":"M"}],"commitId":"574ec6e5bdf2e4ac9394e290fefff5ac1c9a5c96","commitMessage":"@@@Merge branch 'master' into security-master\n","date":"2020-01-20 21:55:10","modifiedFileCount":"193","status":"M","submitter":"Wadeck Follonier"}]
