[{"authorTime":"2020-06-30 21:54:47","codes":[{"authorDate":"2020-06-30 21:54:47","commitOrder":1,"curCode":"    public void testBlockingFacetBlocksDeletion() throws IOException {\n        createFolderStructure();\n        TestTaskListener testTaskListener = new TestTaskListener();\n        Fingerprint fp = new TestFingerprint(false);\n        fp.facets.setOwner(Saveable.NOOP);\n        TestFingperprintFacet facet = new TestFingperprintFacet(fp, System.currentTimeMillis(), true);\n        fp.facets.add(facet);\n        FingerprintCleanupThread cleanupThread = new TestFingerprintCleanupThread(fp);\n        cleanupThread.execute(testTaskListener);\n        String logOutput = testTaskListener.outputStream.toString();\n        assertThat(logOutput, containsString(\"blocked deletion of\"));\n    }\n","date":"2020-06-30 21:54:47","endLine":118,"groupId":"9177","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testBlockingFacetBlocksDeletion","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-jenkins-10-0.7/blobInfo/CC_OUT/blobs/fc/e710dbd84e017cd2fb068a92a5f7321523d42d.src","preCode":"    public void testBlockingFacetBlocksDeletion() throws IOException {\n        createFolderStructure();\n        TestTaskListener testTaskListener = new TestTaskListener();\n        Fingerprint fp = new TestFingerprint(false);\n        fp.facets.setOwner(Saveable.NOOP);\n        TestFingperprintFacet facet = new TestFingperprintFacet(fp, System.currentTimeMillis(), true);\n        fp.facets.add(facet);\n        FingerprintCleanupThread cleanupThread = new TestFingerprintCleanupThread(fp);\n        cleanupThread.execute(testTaskListener);\n        String logOutput = testTaskListener.outputStream.toString();\n        assertThat(logOutput, containsString(\"blocked deletion of\"));\n    }\n","realPath":"test/src/test/java/hudson/model/FingerprintCleanupThreadTest.java","repoName":"jenkins","snippetEndLine":0,"snippetStartLine":0,"startLine":107,"status":"B"},{"authorDate":"2020-06-30 21:54:47","commitOrder":1,"curCode":"    public void testUnblockedFacetsDontBlockDeletion() throws IOException {\n        createFolderStructure();\n        TestTaskListener testTaskListener = new TestTaskListener();\n        Fingerprint fp = new TestFingerprint(false);\n        fp.facets.setOwner(Saveable.NOOP);\n        TestFingperprintFacet facet = new TestFingperprintFacet(fp, System.currentTimeMillis(), false);\n        fp.facets.add(facet);\n        FingerprintCleanupThread cleanupThread = new TestFingerprintCleanupThread(fp);\n        cleanupThread.execute(testTaskListener);\n        assertThat(fpFile.toFile(), is(not(aReadableFile())));\n    }\n","date":"2020-06-30 21:54:47","endLine":131,"groupId":"419","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testUnblockedFacetsDontBlockDeletion","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-jenkins-10-0.7/blobInfo/CC_OUT/blobs/fc/e710dbd84e017cd2fb068a92a5f7321523d42d.src","preCode":"    public void testUnblockedFacetsDontBlockDeletion() throws IOException {\n        createFolderStructure();\n        TestTaskListener testTaskListener = new TestTaskListener();\n        Fingerprint fp = new TestFingerprint(false);\n        fp.facets.setOwner(Saveable.NOOP);\n        TestFingperprintFacet facet = new TestFingperprintFacet(fp, System.currentTimeMillis(), false);\n        fp.facets.add(facet);\n        FingerprintCleanupThread cleanupThread = new TestFingerprintCleanupThread(fp);\n        cleanupThread.execute(testTaskListener);\n        assertThat(fpFile.toFile(), is(not(aReadableFile())));\n    }\n","realPath":"test/src/test/java/hudson/model/FingerprintCleanupThreadTest.java","repoName":"jenkins","snippetEndLine":0,"snippetStartLine":0,"startLine":121,"status":"B"}],"commitId":"75391b3ad789c8bb8a488b5e677a2dd3d1741d16","commitMessage":"@@@Merge commit 'a1097dfec620bb309d6df4122f96aa22a5288563' of https://github.com/jenkinsci/jenkins\n","date":"2020-06-30 21:54:47","modifiedFileCount":"290","status":"B","submitter":"Wadeck Follonier"},{"authorTime":"2020-07-21 12:20:47","codes":[{"authorDate":"2020-07-21 12:20:47","commitOrder":2,"curCode":"    public void testBlockingFacetBlocksDeletion() throws IOException {\n        createFolderStructure();\n        TestTaskListener testTaskListener = new TestTaskListener();\n        Fingerprint fp = new TestFingerprint(false);\n        fp.facets.setOwner(Saveable.NOOP);\n        TestFingperprintFacet facet = new TestFingperprintFacet(fp, System.currentTimeMillis(), true);\n        fp.facets.add(facet);\n        configureLocalTestStorage(fp);\n        FingerprintCleanupThread cleanupThread = new FingerprintCleanupThread();\n        cleanupThread.execute(testTaskListener);\n        String logOutput = testTaskListener.outputStream.toString();\n        assertThat(logOutput, containsString(\"blocked deletion of\"));\n    }\n","date":"2020-07-21 12:20:47","endLine":121,"groupId":"10486","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testBlockingFacetBlocksDeletion","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-jenkins-10-0.7/blobInfo/CC_OUT/blobs/40/8d50906850ecb8ea85f09c1322eb0da47c9ce4.src","preCode":"    public void testBlockingFacetBlocksDeletion() throws IOException {\n        createFolderStructure();\n        TestTaskListener testTaskListener = new TestTaskListener();\n        Fingerprint fp = new TestFingerprint(false);\n        fp.facets.setOwner(Saveable.NOOP);\n        TestFingperprintFacet facet = new TestFingperprintFacet(fp, System.currentTimeMillis(), true);\n        fp.facets.add(facet);\n        FingerprintCleanupThread cleanupThread = new TestFingerprintCleanupThread(fp);\n        cleanupThread.execute(testTaskListener);\n        String logOutput = testTaskListener.outputStream.toString();\n        assertThat(logOutput, containsString(\"blocked deletion of\"));\n    }\n","realPath":"test/src/test/java/hudson/model/FingerprintCleanupThreadTest.java","repoName":"jenkins","snippetEndLine":0,"snippetStartLine":0,"startLine":109,"status":"M"},{"authorDate":"2020-07-21 12:20:47","commitOrder":2,"curCode":"    public void testUnblockedFacetsDontBlockDeletion() throws IOException {\n        createFolderStructure();\n        TestTaskListener testTaskListener = new TestTaskListener();\n        Fingerprint fp = new TestFingerprint(false);\n        fp.facets.setOwner(Saveable.NOOP);\n        TestFingperprintFacet facet = new TestFingperprintFacet(fp, System.currentTimeMillis(), false);\n        fp.facets.add(facet);\n        configureLocalTestStorage(fp);\n        FingerprintCleanupThread cleanupThread = new FingerprintCleanupThread();\n        cleanupThread.execute(testTaskListener);\n        assertThat(fpFile.toFile(), is(not(aReadableFile())));\n    }\n","date":"2020-07-21 12:20:47","endLine":135,"groupId":"10486","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testUnblockedFacetsDontBlockDeletion","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-jenkins-10-0.7/blobInfo/CC_OUT/blobs/40/8d50906850ecb8ea85f09c1322eb0da47c9ce4.src","preCode":"    public void testUnblockedFacetsDontBlockDeletion() throws IOException {\n        createFolderStructure();\n        TestTaskListener testTaskListener = new TestTaskListener();\n        Fingerprint fp = new TestFingerprint(false);\n        fp.facets.setOwner(Saveable.NOOP);\n        TestFingperprintFacet facet = new TestFingperprintFacet(fp, System.currentTimeMillis(), false);\n        fp.facets.add(facet);\n        FingerprintCleanupThread cleanupThread = new TestFingerprintCleanupThread(fp);\n        cleanupThread.execute(testTaskListener);\n        assertThat(fpFile.toFile(), is(not(aReadableFile())));\n    }\n","realPath":"test/src/test/java/hudson/model/FingerprintCleanupThreadTest.java","repoName":"jenkins","snippetEndLine":0,"snippetStartLine":0,"startLine":124,"status":"M"}],"commitId":"be28d586b5db3cd3a5b7bbbfa265e73e86b6446b","commitMessage":"@@@[JENKINS-62755] Introduce Fingerprint Cleanup in External Storage API (#4817)\n\n* Create new FingerprintCleanupThread\n\n* Moved test to jenkins\n\n* Add license\n\n* Fix license\n\n* Fix some tests\n\n* Fix all tests\n\n* Remove redundant imports\n\n* Add documentation; add test\n\n* Fix errors in fingerprintertest\n\n* Remove default fingerprint cleanup implementation\n\n* Remove override from execute\n\n* Undo author deletion\n\n* Remove redundant import\n\n* Move fingerprint cleanup to storage\n\n* Fix spacing\n\n* Add new line\n\n* Minor fixes\n\n* Fix tests\n\n* Add documentation\n\n* Introduce fingerprint cleanup toggle\n\n* Link cleanup config to thread\n\n* Add file system cleanup\n\n* Add test\n\n* Introduce external fingerprint storage cleanup tests\n\n* Remove redundant statements\n\n* Fix test\n\n* Improve docstring\n\n* Introduce shouldNotCleanFingerprintsWhenDisabled test\n\n* Fix default cleanup value\n\n* Minor fixes\n\n* Enabled->Disabled\n\n* Fix tests\n\n* get -> is","date":"2020-07-21 12:20:47","modifiedFileCount":"5","status":"M","submitter":"stellargo"}]
