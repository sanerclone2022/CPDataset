[{"authorTime":"2016-04-29 19:51:52","codes":[{"authorDate":"2016-04-29 19:51:52","commitOrder":1,"curCode":"    public void fullNameCollisionPassword() throws Exception {\n        HudsonPrivateSecurityRealm securityRealm = new HudsonPrivateSecurityRealm(false, false, null);\n        j.jenkins.setSecurityRealm(securityRealm);\n        \n        User u1 = securityRealm.createAccount(\"user1\", \"password1\");\n        u1.setFullName(\"User One\");\n        u1.save();\n\n        User u2 = securityRealm.createAccount(\"user2\", \"password2\");\n        u2.setFullName(\"User Two\");\n        u2.save();\n\n        WebClient wc1 = j.createWebClient();\n        wc1.login(\"user1\", \"password1\");\n\n        WebClient wc2 = j.createWebClient();\n        wc2.login(\"user2\", \"password2\");\n\n        \n        \r\n        XmlPage w1 = (XmlPage) wc1.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w1, hasXPath(\"//name\", is(\"user1\")));\n        \n        XmlPage w2 = (XmlPage) wc2.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w2, hasXPath(\"//name\", is(\"user2\")));\n\n        u1.setFullName(\"user2\");\n        u1.save();\n        \n        \r\n        wc1 = j.createWebClient();\n        wc1.login(\"user1\", \"password1\");\n\n        wc2 = j.createWebClient();\n        \r\n        wc2.login(\"user2\", \"password2\");\n\n        \r\n        w1 = (XmlPage) wc1.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w1, hasXPath(\"//name\", is(\"user1\")));\n        \n        w2 = (XmlPage) wc2.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w2, hasXPath(\"//name\", is(\"user2\")));\n    }\n","date":"2016-04-29 19:51:52","endLine":122,"groupId":"912","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"fullNameCollisionPassword","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-jenkins-10-0.7/blobInfo/CC_OUT/blobs/25/8a47c4748dff2b8b41ec3de216042ddf683232.src","preCode":"    public void fullNameCollisionPassword() throws Exception {\n        HudsonPrivateSecurityRealm securityRealm = new HudsonPrivateSecurityRealm(false, false, null);\n        j.jenkins.setSecurityRealm(securityRealm);\n        \n        User u1 = securityRealm.createAccount(\"user1\", \"password1\");\n        u1.setFullName(\"User One\");\n        u1.save();\n\n        User u2 = securityRealm.createAccount(\"user2\", \"password2\");\n        u2.setFullName(\"User Two\");\n        u2.save();\n\n        WebClient wc1 = j.createWebClient();\n        wc1.login(\"user1\", \"password1\");\n\n        WebClient wc2 = j.createWebClient();\n        wc2.login(\"user2\", \"password2\");\n\n        \n        \r\n        XmlPage w1 = (XmlPage) wc1.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w1, hasXPath(\"//name\", is(\"user1\")));\n        \n        XmlPage w2 = (XmlPage) wc2.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w2, hasXPath(\"//name\", is(\"user2\")));\n\n        u1.setFullName(\"user2\");\n        u1.save();\n        \n        \r\n        wc1 = j.createWebClient();\n        wc1.login(\"user1\", \"password1\");\n\n        wc2 = j.createWebClient();\n        \r\n        wc2.login(\"user2\", \"password2\");\n\n        \r\n        w1 = (XmlPage) wc1.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w1, hasXPath(\"//name\", is(\"user1\")));\n        \n        w2 = (XmlPage) wc2.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w2, hasXPath(\"//name\", is(\"user2\")));\n    }\n","realPath":"test/src/test/java/hudson/security/HudsonPrivateSecurityRealmTest.java","repoName":"jenkins","snippetEndLine":0,"snippetStartLine":0,"startLine":79,"status":"B"},{"authorDate":"2016-04-29 19:51:52","commitOrder":1,"curCode":"    public void fullNameCollisionToken() throws Exception {\n        HudsonPrivateSecurityRealm securityRealm = new HudsonPrivateSecurityRealm(false, false, null);\n        j.jenkins.setSecurityRealm(securityRealm);\n        \n        User u1 = securityRealm.createAccount(\"user1\", \"password1\");\n        u1.setFullName(\"User One\");\n        u1.save();\n        String u1Token = u1.getProperty(ApiTokenProperty.class).getApiToken();\n\n        User u2 = securityRealm.createAccount(\"user2\", \"password2\");\n        u2.setFullName(\"User Two\");\n        u2.save();\n        String u2Token = u2.getProperty(ApiTokenProperty.class).getApiToken();\n\n        WebClient wc1 = j.createWebClient();\n        wc1.addRequestHeader(\"Authorization\", basicHeader(\"user1\", u1Token));\n        \r\n\n        WebClient wc2 = j.createWebClient();\n        wc2.addRequestHeader(\"Authorization\", basicHeader(\"user2\", u2Token));\n        \r\n        \n        \r\n        XmlPage w1 = (XmlPage) wc1.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w1, hasXPath(\"//name\", is(\"user1\")));\n        \n        XmlPage w2 = (XmlPage) wc2.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w2, hasXPath(\"//name\", is(\"user2\")));\n\n\n        u1.setFullName(\"user2\");\n        u1.save();\n        \r\n        w1 = (XmlPage) wc1.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w1, hasXPath(\"//name\", is(\"user1\")));\n        \n        w2 = (XmlPage) wc2.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w2, hasXPath(\"//name\", is(\"user2\")));\n    }\n","date":"2016-04-29 19:51:52","endLine":164,"groupId":"5022","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"fullNameCollisionToken","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-jenkins-10-0.7/blobInfo/CC_OUT/blobs/25/8a47c4748dff2b8b41ec3de216042ddf683232.src","preCode":"    public void fullNameCollisionToken() throws Exception {\n        HudsonPrivateSecurityRealm securityRealm = new HudsonPrivateSecurityRealm(false, false, null);\n        j.jenkins.setSecurityRealm(securityRealm);\n        \n        User u1 = securityRealm.createAccount(\"user1\", \"password1\");\n        u1.setFullName(\"User One\");\n        u1.save();\n        String u1Token = u1.getProperty(ApiTokenProperty.class).getApiToken();\n\n        User u2 = securityRealm.createAccount(\"user2\", \"password2\");\n        u2.setFullName(\"User Two\");\n        u2.save();\n        String u2Token = u2.getProperty(ApiTokenProperty.class).getApiToken();\n\n        WebClient wc1 = j.createWebClient();\n        wc1.addRequestHeader(\"Authorization\", basicHeader(\"user1\", u1Token));\n        \r\n\n        WebClient wc2 = j.createWebClient();\n        wc2.addRequestHeader(\"Authorization\", basicHeader(\"user2\", u2Token));\n        \r\n        \n        \r\n        XmlPage w1 = (XmlPage) wc1.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w1, hasXPath(\"//name\", is(\"user1\")));\n        \n        XmlPage w2 = (XmlPage) wc2.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w2, hasXPath(\"//name\", is(\"user2\")));\n\n\n        u1.setFullName(\"user2\");\n        u1.save();\n        \r\n        w1 = (XmlPage) wc1.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w1, hasXPath(\"//name\", is(\"user1\")));\n        \n        w2 = (XmlPage) wc2.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w2, hasXPath(\"//name\", is(\"user2\")));\n    }\n","realPath":"test/src/test/java/hudson/security/HudsonPrivateSecurityRealmTest.java","repoName":"jenkins","snippetEndLine":0,"snippetStartLine":0,"startLine":126,"status":"B"}],"commitId":"3ec94b8a4fdb1829a53879fe7a6a8d202a00687b","commitMessage":"@@@Merge branch 'security-stable-1.651' into security-master\n","date":"2016-04-29 19:51:52","modifiedFileCount":"10","status":"B","submitter":"Jesse Glick"},{"authorTime":"2018-06-24 05:20:44","codes":[{"authorDate":"2016-04-29 19:51:52","commitOrder":2,"curCode":"    public void fullNameCollisionPassword() throws Exception {\n        HudsonPrivateSecurityRealm securityRealm = new HudsonPrivateSecurityRealm(false, false, null);\n        j.jenkins.setSecurityRealm(securityRealm);\n        \n        User u1 = securityRealm.createAccount(\"user1\", \"password1\");\n        u1.setFullName(\"User One\");\n        u1.save();\n\n        User u2 = securityRealm.createAccount(\"user2\", \"password2\");\n        u2.setFullName(\"User Two\");\n        u2.save();\n\n        WebClient wc1 = j.createWebClient();\n        wc1.login(\"user1\", \"password1\");\n\n        WebClient wc2 = j.createWebClient();\n        wc2.login(\"user2\", \"password2\");\n\n        \n        \r\n        XmlPage w1 = (XmlPage) wc1.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w1, hasXPath(\"//name\", is(\"user1\")));\n        \n        XmlPage w2 = (XmlPage) wc2.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w2, hasXPath(\"//name\", is(\"user2\")));\n\n        u1.setFullName(\"user2\");\n        u1.save();\n        \n        \r\n        wc1 = j.createWebClient();\n        wc1.login(\"user1\", \"password1\");\n\n        wc2 = j.createWebClient();\n        \r\n        wc2.login(\"user2\", \"password2\");\n\n        \r\n        w1 = (XmlPage) wc1.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w1, hasXPath(\"//name\", is(\"user1\")));\n        \n        w2 = (XmlPage) wc2.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w2, hasXPath(\"//name\", is(\"user2\")));\n    }\n","date":"2016-04-29 19:51:52","endLine":122,"groupId":"10380","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"fullNameCollisionPassword","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-jenkins-10-0.7/blobInfo/CC_OUT/blobs/25/8a47c4748dff2b8b41ec3de216042ddf683232.src","preCode":"    public void fullNameCollisionPassword() throws Exception {\n        HudsonPrivateSecurityRealm securityRealm = new HudsonPrivateSecurityRealm(false, false, null);\n        j.jenkins.setSecurityRealm(securityRealm);\n        \n        User u1 = securityRealm.createAccount(\"user1\", \"password1\");\n        u1.setFullName(\"User One\");\n        u1.save();\n\n        User u2 = securityRealm.createAccount(\"user2\", \"password2\");\n        u2.setFullName(\"User Two\");\n        u2.save();\n\n        WebClient wc1 = j.createWebClient();\n        wc1.login(\"user1\", \"password1\");\n\n        WebClient wc2 = j.createWebClient();\n        wc2.login(\"user2\", \"password2\");\n\n        \n        \r\n        XmlPage w1 = (XmlPage) wc1.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w1, hasXPath(\"//name\", is(\"user1\")));\n        \n        XmlPage w2 = (XmlPage) wc2.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w2, hasXPath(\"//name\", is(\"user2\")));\n\n        u1.setFullName(\"user2\");\n        u1.save();\n        \n        \r\n        wc1 = j.createWebClient();\n        wc1.login(\"user1\", \"password1\");\n\n        wc2 = j.createWebClient();\n        \r\n        wc2.login(\"user2\", \"password2\");\n\n        \r\n        w1 = (XmlPage) wc1.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w1, hasXPath(\"//name\", is(\"user1\")));\n        \n        w2 = (XmlPage) wc2.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w2, hasXPath(\"//name\", is(\"user2\")));\n    }\n","realPath":"test/src/test/java/hudson/security/HudsonPrivateSecurityRealmTest.java","repoName":"jenkins","snippetEndLine":0,"snippetStartLine":0,"startLine":79,"status":"N"},{"authorDate":"2018-06-24 05:20:44","commitOrder":2,"curCode":"    public void fullNameCollisionToken() throws Exception {\n        ApiTokenTestHelper.enableLegacyBehavior();\n        \n        HudsonPrivateSecurityRealm securityRealm = new HudsonPrivateSecurityRealm(false, false, null);\n        j.jenkins.setSecurityRealm(securityRealm);\n        \n        User u1 = securityRealm.createAccount(\"user1\", \"password1\");\n        u1.setFullName(\"User One\");\n        u1.save();\n        String u1Token = u1.getProperty(ApiTokenProperty.class).getApiToken();\n\n        User u2 = securityRealm.createAccount(\"user2\", \"password2\");\n        u2.setFullName(\"User Two\");\n        u2.save();\n        String u2Token = u2.getProperty(ApiTokenProperty.class).getApiToken();\n\n        WebClient wc1 = j.createWebClient();\n        wc1.addRequestHeader(\"Authorization\", basicHeader(\"user1\", u1Token));\n        \r\n\n        WebClient wc2 = j.createWebClient();\n        wc2.addRequestHeader(\"Authorization\", basicHeader(\"user2\", u2Token));\n        \r\n        \n        \r\n        XmlPage w1 = (XmlPage) wc1.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w1, hasXPath(\"//name\", is(\"user1\")));\n        \n        XmlPage w2 = (XmlPage) wc2.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w2, hasXPath(\"//name\", is(\"user2\")));\n\n\n        u1.setFullName(\"user2\");\n        u1.save();\n        \r\n        w1 = (XmlPage) wc1.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w1, hasXPath(\"//name\", is(\"user1\")));\n        \n        w2 = (XmlPage) wc2.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w2, hasXPath(\"//name\", is(\"user2\")));\n    }\n","date":"2018-06-24 05:20:44","endLine":224,"groupId":"10380","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"fullNameCollisionToken","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-jenkins-10-0.7/blobInfo/CC_OUT/blobs/0f/e5731211ec1896cfaa3723338a39c2bec42809.src","preCode":"    public void fullNameCollisionToken() throws Exception {\n        HudsonPrivateSecurityRealm securityRealm = new HudsonPrivateSecurityRealm(false, false, null);\n        j.jenkins.setSecurityRealm(securityRealm);\n        \n        User u1 = securityRealm.createAccount(\"user1\", \"password1\");\n        u1.setFullName(\"User One\");\n        u1.save();\n        String u1Token = u1.getProperty(ApiTokenProperty.class).getApiToken();\n\n        User u2 = securityRealm.createAccount(\"user2\", \"password2\");\n        u2.setFullName(\"User Two\");\n        u2.save();\n        String u2Token = u2.getProperty(ApiTokenProperty.class).getApiToken();\n\n        WebClient wc1 = j.createWebClient();\n        wc1.addRequestHeader(\"Authorization\", basicHeader(\"user1\", u1Token));\n        \r\n\n        WebClient wc2 = j.createWebClient();\n        wc2.addRequestHeader(\"Authorization\", basicHeader(\"user2\", u2Token));\n        \r\n        \n        \r\n        XmlPage w1 = (XmlPage) wc1.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w1, hasXPath(\"//name\", is(\"user1\")));\n        \n        XmlPage w2 = (XmlPage) wc2.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w2, hasXPath(\"//name\", is(\"user2\")));\n\n\n        u1.setFullName(\"user2\");\n        u1.save();\n        \r\n        w1 = (XmlPage) wc1.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w1, hasXPath(\"//name\", is(\"user1\")));\n        \n        w2 = (XmlPage) wc2.goTo(\"whoAmI/api/xml\", \"application/xml\");\n        assertThat(w2, hasXPath(\"//name\", is(\"user2\")));\n    }\n","realPath":"test/src/test/java/hudson/security/HudsonPrivateSecurityRealmTest.java","repoName":"jenkins","snippetEndLine":0,"snippetStartLine":0,"startLine":184,"status":"M"}],"commitId":"fd1ec1d125b28f0c069e050ac1abd1a20e09feef","commitMessage":"@@@Merge pull request #3271 from Wadeck/JENKINS-32442-32776_HASHED_TOKEN\n\n[JENKINS-32442][JENKINS-32776] New API Token system","date":"2018-06-24 05:20:44","modifiedFileCount":"19","status":"M","submitter":"Daniel Beck"}]
