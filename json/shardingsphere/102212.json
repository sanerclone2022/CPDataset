[{"authorTime":"2021-08-02 17:49:58","codes":[{"authorDate":"2021-08-02 17:49:58","commitOrder":2,"curCode":"    public void assertExecuteLatency() {\n        when(run.getName()).thenReturn(CommandExecutorTaskAdvice.COMMAND_EXECUTOR_RUN);\n        MockAdviceTargetObject targetObject = new MockAdviceTargetObject();\n        commandExecutorTaskAdvice.beforeMethod(targetObject, run, new Object[]{}, new MethodInvocationResult());\n        try {\n            Thread.sleep(500);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        commandExecutorTaskAdvice.afterMethod(targetObject, run, new Object[]{}, new MethodInvocationResult());\n        FixtureWrapper requestWrapper = (FixtureWrapper) MetricsPool.get(MetricIds.PROXY_EXECUTE_LATENCY_MILLIS).get();\n        assertNotNull(requestWrapper);\n        assertThat(requestWrapper.getFixtureValue(), org.hamcrest.Matchers.greaterThan(0d));\n    }\n","date":"2021-08-02 17:49:58","endLine":61,"groupId":"2672","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"assertExecuteLatency","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-shardingsphere-10-0.7/blobInfo/CC_OUT/blobs/90/f877bc2fe2eca8af7f740e04f3bacda72c49ec.src","preCode":"    public void assertExecuteLatency() {\n        when(run.getName()).thenReturn(CommandExecutorTaskAdvice.COMMAND_EXECUTOR_RUN);\n        MockAdviceTargetObject targetObject = new MockAdviceTargetObject();\n        commandExecutorTaskAdvice.beforeMethod(targetObject, run, new Object[]{}, new MethodInvocationResult());\n        try {\n            Thread.sleep(500);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        commandExecutorTaskAdvice.afterMethod(targetObject, run, new Object[]{}, new MethodInvocationResult());\n        FixtureWrapper requestWrapper = (FixtureWrapper) MetricsPool.get(MetricIds.PROXY_EXECUTE_LATENCY_MILLIS).get();\n        assertNotNull(requestWrapper);\n        assertThat(requestWrapper.getFixtureValue(), org.hamcrest.Matchers.greaterThan(0d));\n    }\n","realPath":"shardingsphere-agent/shardingsphere-agent-plugins/shardingsphere-agent-plugin-metrics/shardingsphere-agent-metrics-api/src/test/java/org/apache/shardingsphere/agent/metrics/api/advice/CommandExecutorTaskAdviceTest.java","repoName":"shardingsphere","snippetEndLine":0,"snippetStartLine":0,"startLine":48,"status":"MB"},{"authorDate":"2021-08-02 17:49:58","commitOrder":2,"curCode":"    public void assertExecutorErrorTotal() {\n        when(processException.getName()).thenReturn(CommandExecutorTaskAdvice.COMMAND_EXECUTOR_EXCEPTION);\n        MockAdviceTargetObject targetObject = new MockAdviceTargetObject();\n        commandExecutorTaskAdvice.afterMethod(targetObject, processException, new Object[]{}, new MethodInvocationResult());\n        FixtureWrapper requestWrapper = (FixtureWrapper) MetricsPool.get(MetricIds.PROXY_EXECUTE_ERROR).get();\n        assertNotNull(requestWrapper);\n        assertThat(requestWrapper.getFixtureValue(), org.hamcrest.Matchers.greaterThan(0d));\n    }\n","date":"2021-08-02 17:49:58","endLine":72,"groupId":"7102","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"assertExecutorErrorTotal","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-shardingsphere-10-0.7/blobInfo/CC_OUT/blobs/90/f877bc2fe2eca8af7f740e04f3bacda72c49ec.src","preCode":"    public void assertExecutorErrorTotal() {\n        when(processException.getName()).thenReturn(CommandExecutorTaskAdvice.COMMAND_EXECUTOR_EXCEPTION);\n        MockAdviceTargetObject targetObject = new MockAdviceTargetObject();\n        commandExecutorTaskAdvice.afterMethod(targetObject, processException, new Object[]{}, new MethodInvocationResult());\n        FixtureWrapper requestWrapper = (FixtureWrapper) MetricsPool.get(MetricIds.PROXY_EXECUTE_ERROR).get();\n        assertNotNull(requestWrapper);\n        assertThat(requestWrapper.getFixtureValue(), org.hamcrest.Matchers.greaterThan(0d));\n    }\n","realPath":"shardingsphere-agent/shardingsphere-agent-plugins/shardingsphere-agent-plugin-metrics/shardingsphere-agent-metrics-api/src/test/java/org/apache/shardingsphere/agent/metrics/api/advice/CommandExecutorTaskAdviceTest.java","repoName":"shardingsphere","snippetEndLine":0,"snippetStartLine":0,"startLine":65,"status":"MB"}],"commitId":"fcad18cd188a1a15d723a1a9de774445f0cf5b31","commitMessage":"@@@Refactor the metrics module in agent plugin and add transfer bytes metrics (#11585)\n\n* Refactor the metrics module in agent plugin and add request/response metrics\n\n* Change some parameters settings and fix some code style\n\n* Add some test cases.\n\n* Change ProxyInfoCollectorTest test cases.","date":"2021-08-02 17:49:58","modifiedFileCount":"16","status":"M","submitter":"Dachuan J"},{"authorTime":"2021-08-30 16:04:42","codes":[{"authorDate":"2021-08-30 16:04:42","commitOrder":3,"curCode":"    public void assertExecuteLatency() {\n        when(run.getName()).thenReturn(CommandExecutorTaskAdvice.COMMAND_EXECUTOR_RUN);\n        MockAdviceTargetObject targetObject = new MockAdviceTargetObject();\n        commandExecutorTaskAdvice.beforeMethod(targetObject, run, new Object[]{}, new MethodInvocationResult());\n        try {\n            Thread.sleep(500);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        commandExecutorTaskAdvice.afterMethod(targetObject, run, new Object[]{}, new MethodInvocationResult());\n        FixtureWrapper requestWrapper = (FixtureWrapper) MetricsPool.get(MetricIds.PROXY_EXECUTE_LATENCY_MILLIS).get();\n        assertTrue(MetricsPool.get(MetricIds.PROXY_EXECUTE_LATENCY_MILLIS).isPresent());\n        assertThat(requestWrapper.getFixtureValue(), Matchers.greaterThan(0.0));\n    }\n","date":"2021-08-30 16:04:42","endLine":61,"groupId":"102212","id":3,"instanceNumber":1,"isCurCommit":1,"methodName":"assertExecuteLatency","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-shardingsphere-10-0.7/blobInfo/CC_OUT/blobs/1c/236ec051e262346acfe61c2be9b635957cc149.src","preCode":"    public void assertExecuteLatency() {\n        when(run.getName()).thenReturn(CommandExecutorTaskAdvice.COMMAND_EXECUTOR_RUN);\n        MockAdviceTargetObject targetObject = new MockAdviceTargetObject();\n        commandExecutorTaskAdvice.beforeMethod(targetObject, run, new Object[]{}, new MethodInvocationResult());\n        try {\n            Thread.sleep(500);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        commandExecutorTaskAdvice.afterMethod(targetObject, run, new Object[]{}, new MethodInvocationResult());\n        FixtureWrapper requestWrapper = (FixtureWrapper) MetricsPool.get(MetricIds.PROXY_EXECUTE_LATENCY_MILLIS).get();\n        assertNotNull(requestWrapper);\n        assertThat(requestWrapper.getFixtureValue(), org.hamcrest.Matchers.greaterThan(0d));\n    }\n","realPath":"shardingsphere-agent/shardingsphere-agent-plugins/shardingsphere-agent-plugin-metrics/shardingsphere-agent-metrics-api/src/test/java/org/apache/shardingsphere/agent/metrics/api/advice/CommandExecutorTaskAdviceTest.java","repoName":"shardingsphere","snippetEndLine":0,"snippetStartLine":0,"startLine":48,"status":"M"},{"authorDate":"2021-08-30 16:04:42","commitOrder":3,"curCode":"    public void assertExecutorErrorTotal() {\n        when(processException.getName()).thenReturn(CommandExecutorTaskAdvice.COMMAND_EXECUTOR_EXCEPTION);\n        MockAdviceTargetObject targetObject = new MockAdviceTargetObject();\n        commandExecutorTaskAdvice.afterMethod(targetObject, processException, new Object[]{}, new MethodInvocationResult());\n        FixtureWrapper requestWrapper = (FixtureWrapper) MetricsPool.get(MetricIds.PROXY_EXECUTE_ERROR).get();\n        assertTrue(MetricsPool.get(MetricIds.PROXY_EXECUTE_ERROR).isPresent());\n        assertThat(requestWrapper.getFixtureValue(), Matchers.greaterThan(0.0));\n    }\n","date":"2021-08-30 16:04:42","endLine":71,"groupId":"102212","id":4,"instanceNumber":2,"isCurCommit":1,"methodName":"assertExecutorErrorTotal","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-shardingsphere-10-0.7/blobInfo/CC_OUT/blobs/1c/236ec051e262346acfe61c2be9b635957cc149.src","preCode":"    public void assertExecutorErrorTotal() {\n        when(processException.getName()).thenReturn(CommandExecutorTaskAdvice.COMMAND_EXECUTOR_EXCEPTION);\n        MockAdviceTargetObject targetObject = new MockAdviceTargetObject();\n        commandExecutorTaskAdvice.afterMethod(targetObject, processException, new Object[]{}, new MethodInvocationResult());\n        FixtureWrapper requestWrapper = (FixtureWrapper) MetricsPool.get(MetricIds.PROXY_EXECUTE_ERROR).get();\n        assertNotNull(requestWrapper);\n        assertThat(requestWrapper.getFixtureValue(), org.hamcrest.Matchers.greaterThan(0d));\n    }\n","realPath":"shardingsphere-agent/shardingsphere-agent-plugins/shardingsphere-agent-plugin-metrics/shardingsphere-agent-metrics-api/src/test/java/org/apache/shardingsphere/agent/metrics/api/advice/CommandExecutorTaskAdviceTest.java","repoName":"shardingsphere","snippetEndLine":0,"snippetStartLine":0,"startLine":64,"status":"M"}],"commitId":"b8e5e2769539a3a1cfd5714a4a5ece3da7f868fb","commitMessage":"@@@Fix test cases (#12100)\n\n","date":"2021-08-30 16:04:42","modifiedFileCount":"4","status":"M","submitter":"Dachuan J"}]
