[{"authorTime":"2020-05-16 22:30:29","codes":[{"authorDate":"2020-05-16 22:30:29","commitOrder":1,"curCode":"    public void assertGetConnectionSizeLessThanCache() throws SQLException {\n        backendConnection.getStateHandler().setStatus(ConnectionStatus.TRANSACTION);\n        MockConnectionUtil.setCachedConnections(backendConnection, \"ds1\", 10);\n        List<Connection> actualConnections = backendConnection.getConnections(\"ds1\", 2, ConnectionMode.MEMORY_STRICTLY);\n        assertThat(actualConnections.size(), is(2));\n        assertThat(backendConnection.getConnectionSize(), is(10));\n        assertThat(backendConnection.getStateHandler().getStatus(), is(ConnectionStatus.TRANSACTION));\n    }\n","date":"2020-05-16 22:30:29","endLine":89,"groupId":"14350","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"assertGetConnectionSizeLessThanCache","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-shardingsphere-10-0.7/blobInfo/CC_OUT/blobs/7b/0fd9ac415331cdf97c23ca2079a131b68a617f.src","preCode":"    public void assertGetConnectionSizeLessThanCache() throws SQLException {\n        backendConnection.getStateHandler().setStatus(ConnectionStatus.TRANSACTION);\n        MockConnectionUtil.setCachedConnections(backendConnection, \"ds1\", 10);\n        List<Connection> actualConnections = backendConnection.getConnections(\"ds1\", 2, ConnectionMode.MEMORY_STRICTLY);\n        assertThat(actualConnections.size(), is(2));\n        assertThat(backendConnection.getConnectionSize(), is(10));\n        assertThat(backendConnection.getStateHandler().getStatus(), is(ConnectionStatus.TRANSACTION));\n    }\n","realPath":"shardingsphere-proxy/shardingsphere-proxy-backend/src/test/java/org/apache/shardingsphere/proxy/backend/communication/jdbc/connection/BackendConnectionTest.java","repoName":"shardingsphere","snippetEndLine":0,"snippetStartLine":0,"startLine":82,"status":"B"},{"authorDate":"2020-05-16 22:30:29","commitOrder":1,"curCode":"    public void assertGetConnectionSizeGreaterThanCache() throws SQLException {\n        backendConnection.getStateHandler().setStatus(ConnectionStatus.TRANSACTION);\n        MockConnectionUtil.setCachedConnections(backendConnection, \"ds1\", 10);\n        when(backendDataSource.getConnections(anyString(), eq(2), any(), eq(TransactionType.LOCAL))).thenReturn(MockConnectionUtil.mockNewConnections(2));\n        List<Connection> actualConnections = backendConnection.getConnections(\"ds1\", 12, ConnectionMode.MEMORY_STRICTLY);\n        assertThat(actualConnections.size(), is(12));\n        assertThat(backendConnection.getConnectionSize(), is(12));\n        assertThat(backendConnection.getStateHandler().getStatus(), is(ConnectionStatus.TRANSACTION));\n    }\n","date":"2020-05-16 22:30:29","endLine":100,"groupId":"14350","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"assertGetConnectionSizeGreaterThanCache","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-shardingsphere-10-0.7/blobInfo/CC_OUT/blobs/7b/0fd9ac415331cdf97c23ca2079a131b68a617f.src","preCode":"    public void assertGetConnectionSizeGreaterThanCache() throws SQLException {\n        backendConnection.getStateHandler().setStatus(ConnectionStatus.TRANSACTION);\n        MockConnectionUtil.setCachedConnections(backendConnection, \"ds1\", 10);\n        when(backendDataSource.getConnections(anyString(), eq(2), any(), eq(TransactionType.LOCAL))).thenReturn(MockConnectionUtil.mockNewConnections(2));\n        List<Connection> actualConnections = backendConnection.getConnections(\"ds1\", 12, ConnectionMode.MEMORY_STRICTLY);\n        assertThat(actualConnections.size(), is(12));\n        assertThat(backendConnection.getConnectionSize(), is(12));\n        assertThat(backendConnection.getStateHandler().getStatus(), is(ConnectionStatus.TRANSACTION));\n    }\n","realPath":"shardingsphere-proxy/shardingsphere-proxy-backend/src/test/java/org/apache/shardingsphere/proxy/backend/communication/jdbc/connection/BackendConnectionTest.java","repoName":"shardingsphere","snippetEndLine":0,"snippetStartLine":0,"startLine":92,"status":"B"}],"commitId":"767d4b3cce5ab916121c9c2eadbf851ee1cee725","commitMessage":"@@@Rename sharding-proxy to shardingsphere-proxy (#5645)\n\n* Rename sharding-proxy to shardingsphere-proxy\n\n* rename org.apache.shardingsphere.shardingproxy to org.apache.shardingsphere.proxy","date":"2020-05-16 22:30:29","modifiedFileCount":"0","status":"B","submitter":"Liang Zhang"},{"authorTime":"2020-05-26 11:12:43","codes":[{"authorDate":"2020-05-16 22:30:29","commitOrder":2,"curCode":"    public void assertGetConnectionSizeLessThanCache() throws SQLException {\n        backendConnection.getStateHandler().setStatus(ConnectionStatus.TRANSACTION);\n        MockConnectionUtil.setCachedConnections(backendConnection, \"ds1\", 10);\n        List<Connection> actualConnections = backendConnection.getConnections(\"ds1\", 2, ConnectionMode.MEMORY_STRICTLY);\n        assertThat(actualConnections.size(), is(2));\n        assertThat(backendConnection.getConnectionSize(), is(10));\n        assertThat(backendConnection.getStateHandler().getStatus(), is(ConnectionStatus.TRANSACTION));\n    }\n","date":"2020-05-16 22:30:29","endLine":89,"groupId":"14350","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"assertGetConnectionSizeLessThanCache","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-shardingsphere-10-0.7/blobInfo/CC_OUT/blobs/7b/0fd9ac415331cdf97c23ca2079a131b68a617f.src","preCode":"    public void assertGetConnectionSizeLessThanCache() throws SQLException {\n        backendConnection.getStateHandler().setStatus(ConnectionStatus.TRANSACTION);\n        MockConnectionUtil.setCachedConnections(backendConnection, \"ds1\", 10);\n        List<Connection> actualConnections = backendConnection.getConnections(\"ds1\", 2, ConnectionMode.MEMORY_STRICTLY);\n        assertThat(actualConnections.size(), is(2));\n        assertThat(backendConnection.getConnectionSize(), is(10));\n        assertThat(backendConnection.getStateHandler().getStatus(), is(ConnectionStatus.TRANSACTION));\n    }\n","realPath":"shardingsphere-proxy/shardingsphere-proxy-backend/src/test/java/org/apache/shardingsphere/proxy/backend/communication/jdbc/connection/BackendConnectionTest.java","repoName":"shardingsphere","snippetEndLine":0,"snippetStartLine":0,"startLine":82,"status":"N"},{"authorDate":"2020-05-26 11:12:43","commitOrder":2,"curCode":"    public void assertGetConnectionSizeGreaterThanCache() throws SQLException {\n        backendConnection.getStateHandler().setStatus(ConnectionStatus.TRANSACTION);\n        MockConnectionUtil.setCachedConnections(backendConnection, \"ds1\", 10);\n        when(backendDataSource.getConnections(anyString(), anyString(), eq(2), any())).thenReturn(MockConnectionUtil.mockNewConnections(2));\n        List<Connection> actualConnections = backendConnection.getConnections(\"ds1\", 12, ConnectionMode.MEMORY_STRICTLY);\n        assertThat(actualConnections.size(), is(12));\n        assertThat(backendConnection.getConnectionSize(), is(12));\n        assertThat(backendConnection.getStateHandler().getStatus(), is(ConnectionStatus.TRANSACTION));\n    }\n","date":"2020-05-26 11:12:43","endLine":134,"groupId":"14350","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"assertGetConnectionSizeGreaterThanCache","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-shardingsphere-10-0.7/blobInfo/CC_OUT/blobs/a0/85b7bbfcd3dcea09fcf7f4248871357ed15afa.src","preCode":"    public void assertGetConnectionSizeGreaterThanCache() throws SQLException {\n        backendConnection.getStateHandler().setStatus(ConnectionStatus.TRANSACTION);\n        MockConnectionUtil.setCachedConnections(backendConnection, \"ds1\", 10);\n        when(backendDataSource.getConnections(anyString(), eq(2), any(), eq(TransactionType.LOCAL))).thenReturn(MockConnectionUtil.mockNewConnections(2));\n        List<Connection> actualConnections = backendConnection.getConnections(\"ds1\", 12, ConnectionMode.MEMORY_STRICTLY);\n        assertThat(actualConnections.size(), is(12));\n        assertThat(backendConnection.getConnectionSize(), is(12));\n        assertThat(backendConnection.getStateHandler().getStatus(), is(ConnectionStatus.TRANSACTION));\n    }\n","realPath":"shardingsphere-proxy/shardingsphere-proxy-backend/src/test/java/org/apache/shardingsphere/proxy/backend/communication/jdbc/connection/BackendConnectionTest.java","repoName":"shardingsphere","snippetEndLine":0,"snippetStartLine":0,"startLine":126,"status":"M"}],"commitId":"db5d59bce89d528fb68cf28c6c71d4c202d19b63","commitMessage":"@@@Replace ShardingSphereSchema (#5784)\n\n* Replace ShardingSphereSchema\n\n* delete import\n\n* fix\n\n* conflict\n\n* conflicts\n\n* conflicts","date":"2020-05-26 11:12:43","modifiedFileCount":"28","status":"M","submitter":"Juan Pan(Trista)"},{"authorTime":"2020-09-10 20:14:30","codes":[{"authorDate":"2020-09-10 20:14:30","commitOrder":3,"curCode":"    public void assertGetConnectionSizeLessThanCache() throws SQLException {\n        backendConnection.getStatusHandler().switchInTransactionStatus();\n        MockConnectionUtil.setCachedConnections(backendConnection, \"ds1\", 10);\n        List<Connection> actualConnections = backendConnection.getConnections(\"ds1\", 2, ConnectionMode.MEMORY_STRICTLY);\n        assertThat(actualConnections.size(), is(2));\n        assertThat(backendConnection.getConnectionSize(), is(10));\n        assertTrue(backendConnection.getStatusHandler().isInTransaction());\n    }\n","date":"2020-09-10 20:14:30","endLine":147,"groupId":"14350","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"assertGetConnectionSizeLessThanCache","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-shardingsphere-10-0.7/blobInfo/CC_OUT/blobs/96/22a5657c606017c1049223b3e9623e43f3ef42.src","preCode":"    public void assertGetConnectionSizeLessThanCache() throws SQLException {\n        backendConnection.getStateHandler().setStatus(ConnectionStatus.TRANSACTION);\n        MockConnectionUtil.setCachedConnections(backendConnection, \"ds1\", 10);\n        List<Connection> actualConnections = backendConnection.getConnections(\"ds1\", 2, ConnectionMode.MEMORY_STRICTLY);\n        assertThat(actualConnections.size(), is(2));\n        assertThat(backendConnection.getConnectionSize(), is(10));\n        assertThat(backendConnection.getStateHandler().getStatus(), is(ConnectionStatus.TRANSACTION));\n    }\n","realPath":"shardingsphere-proxy/shardingsphere-proxy-backend/src/test/java/org/apache/shardingsphere/proxy/backend/communication/jdbc/connection/BackendConnectionTest.java","repoName":"shardingsphere","snippetEndLine":0,"snippetStartLine":0,"startLine":140,"status":"M"},{"authorDate":"2020-09-10 20:14:30","commitOrder":3,"curCode":"    public void assertGetConnectionSizeGreaterThanCache() throws SQLException {\n        backendConnection.getStatusHandler().switchInTransactionStatus();\n        MockConnectionUtil.setCachedConnections(backendConnection, \"ds1\", 10);\n        when(backendDataSource.getConnections(anyString(), anyString(), eq(2), any())).thenReturn(MockConnectionUtil.mockNewConnections(2));\n        List<Connection> actualConnections = backendConnection.getConnections(\"ds1\", 12, ConnectionMode.MEMORY_STRICTLY);\n        assertThat(actualConnections.size(), is(12));\n        assertThat(backendConnection.getConnectionSize(), is(12));\n        assertTrue(backendConnection.getStatusHandler().isInTransaction());\n    }\n","date":"2020-09-10 20:14:30","endLine":158,"groupId":"14350","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"assertGetConnectionSizeGreaterThanCache","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-shardingsphere-10-0.7/blobInfo/CC_OUT/blobs/96/22a5657c606017c1049223b3e9623e43f3ef42.src","preCode":"    public void assertGetConnectionSizeGreaterThanCache() throws SQLException {\n        backendConnection.getStateHandler().setStatus(ConnectionStatus.TRANSACTION);\n        MockConnectionUtil.setCachedConnections(backendConnection, \"ds1\", 10);\n        when(backendDataSource.getConnections(anyString(), anyString(), eq(2), any())).thenReturn(MockConnectionUtil.mockNewConnections(2));\n        List<Connection> actualConnections = backendConnection.getConnections(\"ds1\", 12, ConnectionMode.MEMORY_STRICTLY);\n        assertThat(actualConnections.size(), is(12));\n        assertThat(backendConnection.getConnectionSize(), is(12));\n        assertThat(backendConnection.getStateHandler().getStatus(), is(ConnectionStatus.TRANSACTION));\n    }\n","realPath":"shardingsphere-proxy/shardingsphere-proxy-backend/src/test/java/org/apache/shardingsphere/proxy/backend/communication/jdbc/connection/BackendConnectionTest.java","repoName":"shardingsphere","snippetEndLine":0,"snippetStartLine":0,"startLine":150,"status":"M"}],"commitId":"b083cfc30b117ba5b02ae6973edc9da4dbb40c9f","commitMessage":"@@@Refactor ConnectionStatusHandler (#7392)\n\n* Rename ConnectionStateHandler to ConnectionStatusHandler\n\n* Rename ConnectionStatusHandler.changeRunningStatusIfNecessary\n\n* Remove ConnectionStatusHandler.getStatus\n\n* Rename statusHandler\n\n* Rename resourceLock.doAwait()\n\n* Refactor BackendConnection\n\n* Merge ConnectionStatus.INIT and TERMINATED to READY","date":"2020-09-10 20:14:30","modifiedFileCount":"14","status":"M","submitter":"Liang Zhang"},{"authorTime":"2020-09-12 23:51:54","codes":[{"authorDate":"2020-09-12 23:51:54","commitOrder":4,"curCode":"    public void assertGetConnectionSizeLessThanCache() throws SQLException {\n        backendConnection.getStatusManager().switchToInTransaction();\n        MockConnectionUtil.setCachedConnections(backendConnection, \"ds1\", 10);\n        List<Connection> actualConnections = backendConnection.getConnections(\"ds1\", 2, ConnectionMode.MEMORY_STRICTLY);\n        assertThat(actualConnections.size(), is(2));\n        assertThat(backendConnection.getConnectionSize(), is(10));\n        assertTrue(backendConnection.getStatusManager().isInTransaction());\n    }\n","date":"2020-09-12 23:51:54","endLine":147,"groupId":"14350","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"assertGetConnectionSizeLessThanCache","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-shardingsphere-10-0.7/blobInfo/CC_OUT/blobs/40/89253431744011ce22982755c7df0f07cc38f9.src","preCode":"    public void assertGetConnectionSizeLessThanCache() throws SQLException {\n        backendConnection.getStatusHandler().switchInTransactionStatus();\n        MockConnectionUtil.setCachedConnections(backendConnection, \"ds1\", 10);\n        List<Connection> actualConnections = backendConnection.getConnections(\"ds1\", 2, ConnectionMode.MEMORY_STRICTLY);\n        assertThat(actualConnections.size(), is(2));\n        assertThat(backendConnection.getConnectionSize(), is(10));\n        assertTrue(backendConnection.getStatusHandler().isInTransaction());\n    }\n","realPath":"shardingsphere-proxy/shardingsphere-proxy-backend/src/test/java/org/apache/shardingsphere/proxy/backend/communication/jdbc/connection/BackendConnectionTest.java","repoName":"shardingsphere","snippetEndLine":0,"snippetStartLine":0,"startLine":140,"status":"M"},{"authorDate":"2020-09-12 23:51:54","commitOrder":4,"curCode":"    public void assertGetConnectionSizeGreaterThanCache() throws SQLException {\n        backendConnection.getStatusManager().switchToInTransaction();\n        MockConnectionUtil.setCachedConnections(backendConnection, \"ds1\", 10);\n        when(backendDataSource.getConnections(anyString(), anyString(), eq(2), any())).thenReturn(MockConnectionUtil.mockNewConnections(2));\n        List<Connection> actualConnections = backendConnection.getConnections(\"ds1\", 12, ConnectionMode.MEMORY_STRICTLY);\n        assertThat(actualConnections.size(), is(12));\n        assertThat(backendConnection.getConnectionSize(), is(12));\n        assertTrue(backendConnection.getStatusManager().isInTransaction());\n    }\n","date":"2020-09-12 23:51:54","endLine":158,"groupId":"14350","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"assertGetConnectionSizeGreaterThanCache","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-shardingsphere-10-0.7/blobInfo/CC_OUT/blobs/40/89253431744011ce22982755c7df0f07cc38f9.src","preCode":"    public void assertGetConnectionSizeGreaterThanCache() throws SQLException {\n        backendConnection.getStatusHandler().switchInTransactionStatus();\n        MockConnectionUtil.setCachedConnections(backendConnection, \"ds1\", 10);\n        when(backendDataSource.getConnections(anyString(), anyString(), eq(2), any())).thenReturn(MockConnectionUtil.mockNewConnections(2));\n        List<Connection> actualConnections = backendConnection.getConnections(\"ds1\", 12, ConnectionMode.MEMORY_STRICTLY);\n        assertThat(actualConnections.size(), is(12));\n        assertThat(backendConnection.getConnectionSize(), is(12));\n        assertTrue(backendConnection.getStatusHandler().isInTransaction());\n    }\n","realPath":"shardingsphere-proxy/shardingsphere-proxy-backend/src/test/java/org/apache/shardingsphere/proxy/backend/communication/jdbc/connection/BackendConnectionTest.java","repoName":"shardingsphere","snippetEndLine":0,"snippetStartLine":0,"startLine":150,"status":"M"}],"commitId":"7f7ff1c458bdebfb3211e3222bd11ee7b332a87d","commitMessage":"@@@Rename to ConnectionStatusManager (#7424)\n\n* Refactor ConnectionStatusHandler\n\n* Rename ConnectionStatusManager\n\n* Move ConnectionStatus to status package","date":"2020-09-12 23:51:54","modifiedFileCount":"10","status":"M","submitter":"Liang Zhang"},{"authorTime":"2020-09-14 00:25:33","codes":[{"authorDate":"2020-09-14 00:25:33","commitOrder":5,"curCode":"    public void assertGetConnectionSizeLessThanCache() throws SQLException {\n        backendConnection.getTransactionStatus().setInTransaction(true);\n        MockConnectionUtil.setCachedConnections(backendConnection, \"ds1\", 10);\n        List<Connection> actualConnections = backendConnection.getConnections(\"ds1\", 2, ConnectionMode.MEMORY_STRICTLY);\n        assertThat(actualConnections.size(), is(2));\n        assertThat(backendConnection.getConnectionSize(), is(10));\n        assertTrue(backendConnection.getTransactionStatus().isInTransaction());\n    }\n","date":"2020-09-14 00:25:33","endLine":148,"groupId":"10919","id":9,"instanceNumber":1,"isCurCommit":0,"methodName":"assertGetConnectionSizeLessThanCache","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-shardingsphere-10-0.7/blobInfo/CC_OUT/blobs/38/c34f194bca65fee01519099b51fd76cecf0ca6.src","preCode":"    public void assertGetConnectionSizeLessThanCache() throws SQLException {\n        backendConnection.getStatusManager().switchToInTransaction();\n        MockConnectionUtil.setCachedConnections(backendConnection, \"ds1\", 10);\n        List<Connection> actualConnections = backendConnection.getConnections(\"ds1\", 2, ConnectionMode.MEMORY_STRICTLY);\n        assertThat(actualConnections.size(), is(2));\n        assertThat(backendConnection.getConnectionSize(), is(10));\n        assertTrue(backendConnection.getStatusManager().isInTransaction());\n    }\n","realPath":"shardingsphere-proxy/shardingsphere-proxy-backend/src/test/java/org/apache/shardingsphere/proxy/backend/communication/jdbc/connection/BackendConnectionTest.java","repoName":"shardingsphere","snippetEndLine":0,"snippetStartLine":0,"startLine":141,"status":"M"},{"authorDate":"2020-09-14 00:25:33","commitOrder":5,"curCode":"    public void assertGetConnectionSizeGreaterThanCache() throws SQLException {\n        backendConnection.getTransactionStatus().setInTransaction(true);\n        MockConnectionUtil.setCachedConnections(backendConnection, \"ds1\", 10);\n        when(backendDataSource.getConnections(anyString(), anyString(), eq(2), any())).thenReturn(MockConnectionUtil.mockNewConnections(2));\n        List<Connection> actualConnections = backendConnection.getConnections(\"ds1\", 12, ConnectionMode.MEMORY_STRICTLY);\n        assertThat(actualConnections.size(), is(12));\n        assertThat(backendConnection.getConnectionSize(), is(12));\n        assertTrue(backendConnection.getTransactionStatus().isInTransaction());\n    }\n","date":"2020-09-14 00:25:33","endLine":159,"groupId":"10919","id":10,"instanceNumber":2,"isCurCommit":0,"methodName":"assertGetConnectionSizeGreaterThanCache","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-shardingsphere-10-0.7/blobInfo/CC_OUT/blobs/38/c34f194bca65fee01519099b51fd76cecf0ca6.src","preCode":"    public void assertGetConnectionSizeGreaterThanCache() throws SQLException {\n        backendConnection.getStatusManager().switchToInTransaction();\n        MockConnectionUtil.setCachedConnections(backendConnection, \"ds1\", 10);\n        when(backendDataSource.getConnections(anyString(), anyString(), eq(2), any())).thenReturn(MockConnectionUtil.mockNewConnections(2));\n        List<Connection> actualConnections = backendConnection.getConnections(\"ds1\", 12, ConnectionMode.MEMORY_STRICTLY);\n        assertThat(actualConnections.size(), is(12));\n        assertThat(backendConnection.getConnectionSize(), is(12));\n        assertTrue(backendConnection.getStatusManager().isInTransaction());\n    }\n","realPath":"shardingsphere-proxy/shardingsphere-proxy-backend/src/test/java/org/apache/shardingsphere/proxy/backend/communication/jdbc/connection/BackendConnectionTest.java","repoName":"shardingsphere","snippetEndLine":0,"snippetStartLine":0,"startLine":151,"status":"M"}],"commitId":"739d78bb9a32d2696e1c22cfb1b9eddffb406ee7","commitMessage":"@@@Use TransactionStatus to decouple transaction and ConnectionStatus (#7428)\n\n* Add transaction package\n\n* Use TransactionStatus to decouple transaction and ConnectionStatus","date":"2020-09-14 00:25:33","modifiedFileCount":"11","status":"M","submitter":"Liang Zhang"}]
