[{"authorTime":"2019-08-26 18:16:33","codes":[{"authorDate":"2019-08-26 18:16:33","commitOrder":3,"curCode":"    public void channelOpen(ChannelHandlerContext ctx, ChannelStateEvent e) throws Exception {\n        \r\n        if (childGroups != null) {\n            childGroups.add(ctx.getChannel());\n        }\n\n        final byte[] seed = org.apache.commons.lang3.RandomUtils.nextBytes(8);\n        byte[] body = Packet.newBuilder()\n            .setType(CanalPacket.PacketType.HANDSHAKE)\n            .setVersion(NettyUtils.VERSION)\n            .setBody(Handshake.newBuilder().setSeeds(ByteString.copyFrom(seed)).build().toByteString())\n            .build()\n            .toByteArray();\n\n        NettyUtils.write(ctx.getChannel(), body, new ChannelFutureListener() {\n\n            public void operationComplete(ChannelFuture future) throws Exception {\n                ctx.getPipeline().get(HandshakeInitializationHandler.class.getName());\n                ClientAuthenticationHandler handler = (ClientAuthenticationHandler) ctx.getPipeline()\n                    .get(ClientAuthenticationHandler.class.getName());\n                handler.setSeed(seed);\n            }\n\n        });\n        logger.info(\"send handshake initialization packet to : {}\", ctx.getChannel());\n    }\n","date":"2019-08-26 18:16:33","endLine":60,"groupId":"1579","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"channelOpen","params":"(ChannelHandlerContextctx@ChannelStateEvente)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-canal-10-0.7/blobInfo/CC_OUT/blobs/8e/ae3f929dcd1eb88ded985c5402655adee7ba18.src","preCode":"    public void channelOpen(ChannelHandlerContext ctx, ChannelStateEvent e) throws Exception {\n        \r\n        if (childGroups != null) {\n            childGroups.add(ctx.getChannel());\n        }\n\n        final byte[] seed = org.apache.commons.lang3.RandomUtils.nextBytes(8);\n        byte[] body = Packet.newBuilder()\n            .setType(CanalPacket.PacketType.HANDSHAKE)\n            .setVersion(NettyUtils.VERSION)\n            .setBody(Handshake.newBuilder().setSeeds(ByteString.copyFrom(seed)).build().toByteString())\n            .build()\n            .toByteArray();\n\n        NettyUtils.write(ctx.getChannel(), body, new ChannelFutureListener() {\n\n            public void operationComplete(ChannelFuture future) throws Exception {\n                ctx.getPipeline().get(HandshakeInitializationHandler.class.getName());\n                ClientAuthenticationHandler handler = (ClientAuthenticationHandler) ctx.getPipeline()\n                    .get(ClientAuthenticationHandler.class.getName());\n                handler.setSeed(seed);\n            }\n\n        });\n        logger.info(\"send handshake initialization packet to : {}\", ctx.getChannel());\n    }\n","realPath":"server/src/main/java/com/alibaba/otter/canal/server/netty/handler/HandshakeInitializationHandler.java","repoName":"canal","snippetEndLine":0,"snippetStartLine":0,"startLine":35,"status":"MB"},{"authorDate":"2019-08-26 18:16:33","commitOrder":3,"curCode":"    public void channelOpen(ChannelHandlerContext ctx, ChannelStateEvent e) throws Exception {\n        \r\n        if (childGroups != null) {\n            childGroups.add(ctx.getChannel());\n        }\n\n        final byte[] seed = org.apache.commons.lang3.RandomUtils.nextBytes(8);\n        byte[] body = Packet.newBuilder()\n            .setType(AdminPacket.PacketType.HANDSHAKE)\n            .setVersion(AdminNettyUtils.VERSION)\n            .setBody(Handshake.newBuilder().setSeeds(ByteString.copyFrom(seed)).build().toByteString())\n            .build()\n            .toByteArray();\n\n        AdminNettyUtils.write(ctx.getChannel(), body, new ChannelFutureListener() {\n\n            public void operationComplete(ChannelFuture future) throws Exception {\n                logger.info(\"remove unused channel handlers after authentication is done successfully.\");\n                ctx.getPipeline().get(HandshakeInitializationHandler.class.getName());\n                ClientAuthenticationHandler handler = (ClientAuthenticationHandler) ctx.getPipeline()\n                    .get(ClientAuthenticationHandler.class.getName());\n                handler.setSeed(seed);\n            }\n\n        });\n        logger.info(\"send handshake initialization packet to : {}\", ctx.getChannel());\n    }\n","date":"2019-08-26 18:16:33","endLine":61,"groupId":"1579","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"channelOpen","params":"(ChannelHandlerContextctx@ChannelStateEvente)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-canal-10-0.7/blobInfo/CC_OUT/blobs/b1/00c0c393f344bcc7a35d7f25708c7c84bd8587.src","preCode":"    public void channelOpen(ChannelHandlerContext ctx, ChannelStateEvent e) throws Exception {\n        \r\n        if (childGroups != null) {\n            childGroups.add(ctx.getChannel());\n        }\n\n        final byte[] seed = org.apache.commons.lang3.RandomUtils.nextBytes(8);\n        byte[] body = Packet.newBuilder()\n            .setType(AdminPacket.PacketType.HANDSHAKE)\n            .setVersion(AdminNettyUtils.VERSION)\n            .setBody(Handshake.newBuilder().setSeeds(ByteString.copyFrom(seed)).build().toByteString())\n            .build()\n            .toByteArray();\n\n        AdminNettyUtils.write(ctx.getChannel(), body, new ChannelFutureListener() {\n\n            public void operationComplete(ChannelFuture future) throws Exception {\n                logger.info(\"remove unused channel handlers after authentication is done successfully.\");\n                ctx.getPipeline().get(HandshakeInitializationHandler.class.getName());\n                ClientAuthenticationHandler handler = (ClientAuthenticationHandler) ctx.getPipeline()\n                    .get(ClientAuthenticationHandler.class.getName());\n                handler.setSeed(seed);\n            }\n\n        });\n        logger.info(\"send handshake initialization packet to : {}\", ctx.getChannel());\n    }\n","realPath":"server/src/main/java/com/alibaba/otter/canal/admin/handler/HandshakeInitializationHandler.java","repoName":"canal","snippetEndLine":0,"snippetStartLine":0,"startLine":35,"status":"B"}],"commitId":"3d4dbc9a8c53de730e5b0433c39ea1d69e2dd480","commitMessage":"@@@fixed issue #2099 .  support user/passwd acl and canal admin operator\n","date":"2019-08-26 18:16:33","modifiedFileCount":"24","status":"M","submitter":"agapple"},{"authorTime":"2020-09-17 10:48:15","codes":[{"authorDate":"2020-09-17 10:48:15","commitOrder":4,"curCode":"    public void channelOpen(ChannelHandlerContext ctx, ChannelStateEvent e) throws Exception {\n        \r\n        if (childGroups != null) {\n            childGroups.add(ctx.getChannel());\n        }\n\n        final byte[] seed = org.apache.commons.lang3.RandomUtils.nextBytes(8);\n        byte[] body = Packet.newBuilder()\n            .setType(CanalPacket.PacketType.HANDSHAKE)\n            .setVersion(NettyUtils.VERSION)\n            .setBody(Handshake.newBuilder().setSeeds(ByteString.copyFrom(seed)).build().toByteString())\n            .build()\n            .toByteArray();\n\n        NettyUtils.write(ctx.getChannel(), body, future -> {\n            ctx.getPipeline().get(HandshakeInitializationHandler.class.getName());\n            ClientAuthenticationHandler handler = (ClientAuthenticationHandler) ctx.getPipeline()\n                .get(ClientAuthenticationHandler.class.getName());\n            handler.setSeed(seed);\n        });\n        logger.info(\"send handshake initialization packet to : {}\", ctx.getChannel());\n    }\n","date":"2020-09-17 17:46:20","endLine":56,"groupId":"1039","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"channelOpen","params":"(ChannelHandlerContextctx@ChannelStateEvente)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-canal-10-0.7/blobInfo/CC_OUT/blobs/78/7789d6e625d9eb3aca704367cafad510ea60ae.src","preCode":"    public void channelOpen(ChannelHandlerContext ctx, ChannelStateEvent e) throws Exception {\n        \r\n        if (childGroups != null) {\n            childGroups.add(ctx.getChannel());\n        }\n\n        final byte[] seed = org.apache.commons.lang3.RandomUtils.nextBytes(8);\n        byte[] body = Packet.newBuilder()\n            .setType(CanalPacket.PacketType.HANDSHAKE)\n            .setVersion(NettyUtils.VERSION)\n            .setBody(Handshake.newBuilder().setSeeds(ByteString.copyFrom(seed)).build().toByteString())\n            .build()\n            .toByteArray();\n\n        NettyUtils.write(ctx.getChannel(), body, new ChannelFutureListener() {\n\n            public void operationComplete(ChannelFuture future) throws Exception {\n                ctx.getPipeline().get(HandshakeInitializationHandler.class.getName());\n                ClientAuthenticationHandler handler = (ClientAuthenticationHandler) ctx.getPipeline()\n                    .get(ClientAuthenticationHandler.class.getName());\n                handler.setSeed(seed);\n            }\n\n        });\n        logger.info(\"send handshake initialization packet to : {}\", ctx.getChannel());\n    }\n","realPath":"server/src/main/java/com/alibaba/otter/canal/server/netty/handler/HandshakeInitializationHandler.java","repoName":"canal","snippetEndLine":0,"snippetStartLine":0,"startLine":35,"status":"M"},{"authorDate":"2020-09-17 10:48:15","commitOrder":4,"curCode":"    public void channelOpen(ChannelHandlerContext ctx, ChannelStateEvent e) throws Exception {\n        \r\n        if (childGroups != null) {\n            childGroups.add(ctx.getChannel());\n        }\n\n        final byte[] seed = org.apache.commons.lang3.RandomUtils.nextBytes(8);\n        byte[] body = Packet.newBuilder()\n            .setType(AdminPacket.PacketType.HANDSHAKE)\n            .setVersion(AdminNettyUtils.VERSION)\n            .setBody(Handshake.newBuilder().setSeeds(ByteString.copyFrom(seed)).build().toByteString())\n            .build()\n            .toByteArray();\n\n        AdminNettyUtils.write(ctx.getChannel(), body, future -> {\n            logger.info(\"remove unused channel handlers after authentication is done successfully.\");\n            ctx.getPipeline().get(HandshakeInitializationHandler.class.getName());\n            ClientAuthenticationHandler handler = (ClientAuthenticationHandler) ctx.getPipeline()\n                .get(ClientAuthenticationHandler.class.getName());\n            handler.setSeed(seed);\n        });\n        logger.info(\"send handshake initialization packet to : {}\", ctx.getChannel());\n    }\n","date":"2020-09-17 17:46:20","endLine":57,"groupId":"1039","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"channelOpen","params":"(ChannelHandlerContextctx@ChannelStateEvente)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-canal-10-0.7/blobInfo/CC_OUT/blobs/54/1b212f49ef9a595c5a0986b4407be82b030de5.src","preCode":"    public void channelOpen(ChannelHandlerContext ctx, ChannelStateEvent e) throws Exception {\n        \r\n        if (childGroups != null) {\n            childGroups.add(ctx.getChannel());\n        }\n\n        final byte[] seed = org.apache.commons.lang3.RandomUtils.nextBytes(8);\n        byte[] body = Packet.newBuilder()\n            .setType(AdminPacket.PacketType.HANDSHAKE)\n            .setVersion(AdminNettyUtils.VERSION)\n            .setBody(Handshake.newBuilder().setSeeds(ByteString.copyFrom(seed)).build().toByteString())\n            .build()\n            .toByteArray();\n\n        AdminNettyUtils.write(ctx.getChannel(), body, new ChannelFutureListener() {\n\n            public void operationComplete(ChannelFuture future) throws Exception {\n                logger.info(\"remove unused channel handlers after authentication is done successfully.\");\n                ctx.getPipeline().get(HandshakeInitializationHandler.class.getName());\n                ClientAuthenticationHandler handler = (ClientAuthenticationHandler) ctx.getPipeline()\n                    .get(ClientAuthenticationHandler.class.getName());\n                handler.setSeed(seed);\n            }\n\n        });\n        logger.info(\"send handshake initialization packet to : {}\", ctx.getChannel());\n    }\n","realPath":"server/src/main/java/com/alibaba/otter/canal/admin/handler/HandshakeInitializationHandler.java","repoName":"canal","snippetEndLine":0,"snippetStartLine":0,"startLine":35,"status":"M"}],"commitId":"e7658879bce801da20c3ebd571ceb0a9fff8f6c8","commitMessage":"@@@= cold cleanup\n\n  * using lambda if possible (we are already building in Java8)\n  * using diamond when new generic instance\n  * remove used improt\n","date":"2020-09-17 17:46:20","modifiedFileCount":"133","status":"M","submitter":"zavakid"}]
