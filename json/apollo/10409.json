[{"authorTime":"2016-05-19 17:58:23","codes":[{"authorDate":"2020-01-05 17:23:02","commitOrder":2,"curCode":"  protected ContextHandler mockServerHandler(final int statusCode, final String response) {\n    ContextHandler context = new ContextHandler(\"/\");\n    context.setHandler(new AbstractHandler() {\n\n      @Override\n      public void handle(String target, Request baseRequest, HttpServletRequest request,\n          HttpServletResponse response) throws IOException, ServletException {\n\n        response.setContentType(\"text/plain;charset=UTF-8\");\n        response.setStatus(statusCode);\n        response.getWriter().println(response);\n        baseRequest.setHandled(true);\n      }\n    });\n    return context;\n  }\n","date":"2020-01-05 17:23:02","endLine":74,"groupId":"1668","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"mockServerHandler","params":"(finalintstatusCode@finalStringresponse)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/49/b400573d49c1f46d01f30033c18769d0f78999.src","preCode":"  protected ContextHandler mockServerHandler(final int statusCode, final String response) {\n    ContextHandler context = new ContextHandler(\"/\");\n    context.setHandler(new AbstractHandler() {\n\n      @Override\n      public void handle(String target, Request baseRequest, HttpServletRequest request,\n          HttpServletResponse response) throws IOException, ServletException {\n\n        response.setContentType(\"text/plain;charset=UTF-8\");\n        response.setStatus(statusCode);\n        response.getWriter().println(response);\n        baseRequest.setHandled(true);\n      }\n    });\n    return context;\n  }\n","realPath":"apollo-portal/src/test/java/com/ctrip/framework/apollo/portal/environment/BaseIntegrationTest.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":59,"status":"B"},{"authorDate":"2016-05-19 17:58:23","commitOrder":2,"curCode":"  protected ContextHandler mockMetaServerHandler(final boolean failedAtFirstTime) {\n    final ServiceDTO someServiceDTO = new ServiceDTO();\n    someServiceDTO.setAppName(someAppName);\n    someServiceDTO.setInstanceId(someInstanceId);\n    someServiceDTO.setHomepageUrl(configServiceURL);\n    final AtomicInteger counter = new AtomicInteger(0);\n\n    ContextHandler context = new ContextHandler(\"/services/config\");\n    context.setHandler(new AbstractHandler() {\n      @Override\n      public void handle(String target, Request baseRequest, HttpServletRequest request,\n                         HttpServletResponse response) throws IOException, ServletException {\n        if (failedAtFirstTime && counter.incrementAndGet() == 1) {\n          response.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);\n          baseRequest.setHandled(true);\n          return;\n        }\n        response.setContentType(\"application/json;charset=UTF-8\");\n        response.setStatus(HttpServletResponse.SC_OK);\n\n        response.getWriter().println(gson.toJson(Lists.newArrayList(someServiceDTO)));\n\n        baseRequest.setHandled(true);\n      }\n    });\n\n    return context;\n  }\n","date":"2016-05-19 17:58:23","endLine":129,"groupId":"1636","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"mockMetaServerHandler","params":"(finalbooleanfailedAtFirstTime)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/81/4e0c0000d37e8b8702ed225886952919a8e56f.src","preCode":"  protected ContextHandler mockMetaServerHandler(final boolean failedAtFirstTime) {\n    final ServiceDTO someServiceDTO = new ServiceDTO();\n    someServiceDTO.setAppName(someAppName);\n    someServiceDTO.setInstanceId(someInstanceId);\n    someServiceDTO.setHomepageUrl(configServiceURL);\n    final AtomicInteger counter = new AtomicInteger(0);\n\n    ContextHandler context = new ContextHandler(\"/services/config\");\n    context.setHandler(new AbstractHandler() {\n      @Override\n      public void handle(String target, Request baseRequest, HttpServletRequest request,\n                         HttpServletResponse response) throws IOException, ServletException {\n        if (failedAtFirstTime && counter.incrementAndGet() == 1) {\n          response.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);\n          baseRequest.setHandled(true);\n          return;\n        }\n        response.setContentType(\"application/json;charset=UTF-8\");\n        response.setStatus(HttpServletResponse.SC_OK);\n\n        response.getWriter().println(gson.toJson(Lists.newArrayList(someServiceDTO)));\n\n        baseRequest.setHandled(true);\n      }\n    });\n\n    return context;\n  }\n","realPath":"apollo-client/src/test/java/com/ctrip/framework/apollo/BaseIntegrationTest.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":102,"status":"NB"}],"commitId":"42edb9da963df986538edcda4ff58d474fb3abed","commitMessage":"@@@Dynamic environment for apollo-portal (#2867)\n\n\n","date":"2020-01-05 17:23:02","modifiedFileCount":"63","status":"M","submitter":"Anilople"},{"authorTime":"2016-05-19 17:58:23","codes":[{"authorDate":"2020-03-14 21:50:23","commitOrder":3,"curCode":"  ContextHandler mockServerHandler(final int statusCode, final String response) {\n    ContextHandler context = new ContextHandler(\"/\");\n    context.setHandler(new AbstractHandler() {\n\n      @Override\n      public void handle(String target, Request baseRequest, HttpServletRequest request,\n          HttpServletResponse response) throws IOException, ServletException {\n\n        response.setContentType(\"text/plain;charset=UTF-8\");\n        response.setStatus(statusCode);\n        response.getWriter().println(response);\n        baseRequest.setHandled(true);\n      }\n    });\n    return context;\n  }\n","date":"2020-03-14 22:11:32","endLine":57,"groupId":"10409","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"mockServerHandler","params":"(finalintstatusCode@finalStringresponse)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/03/7b7536a16ddb8812651a74b446be0c250d6ae5.src","preCode":"  protected ContextHandler mockServerHandler(final int statusCode, final String response) {\n    ContextHandler context = new ContextHandler(\"/\");\n    context.setHandler(new AbstractHandler() {\n\n      @Override\n      public void handle(String target, Request baseRequest, HttpServletRequest request,\n          HttpServletResponse response) throws IOException, ServletException {\n\n        response.setContentType(\"text/plain;charset=UTF-8\");\n        response.setStatus(statusCode);\n        response.getWriter().println(response);\n        baseRequest.setHandled(true);\n      }\n    });\n    return context;\n  }\n","realPath":"apollo-portal/src/test/java/com/ctrip/framework/apollo/portal/environment/BaseIntegrationTest.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":42,"status":"M"},{"authorDate":"2016-05-19 17:58:23","commitOrder":3,"curCode":"  protected ContextHandler mockMetaServerHandler(final boolean failedAtFirstTime) {\n    final ServiceDTO someServiceDTO = new ServiceDTO();\n    someServiceDTO.setAppName(someAppName);\n    someServiceDTO.setInstanceId(someInstanceId);\n    someServiceDTO.setHomepageUrl(configServiceURL);\n    final AtomicInteger counter = new AtomicInteger(0);\n\n    ContextHandler context = new ContextHandler(\"/services/config\");\n    context.setHandler(new AbstractHandler() {\n      @Override\n      public void handle(String target, Request baseRequest, HttpServletRequest request,\n                         HttpServletResponse response) throws IOException, ServletException {\n        if (failedAtFirstTime && counter.incrementAndGet() == 1) {\n          response.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);\n          baseRequest.setHandled(true);\n          return;\n        }\n        response.setContentType(\"application/json;charset=UTF-8\");\n        response.setStatus(HttpServletResponse.SC_OK);\n\n        response.getWriter().println(gson.toJson(Lists.newArrayList(someServiceDTO)));\n\n        baseRequest.setHandled(true);\n      }\n    });\n\n    return context;\n  }\n","date":"2016-05-19 17:58:23","endLine":129,"groupId":"10409","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"mockMetaServerHandler","params":"(finalbooleanfailedAtFirstTime)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/81/4e0c0000d37e8b8702ed225886952919a8e56f.src","preCode":"  protected ContextHandler mockMetaServerHandler(final boolean failedAtFirstTime) {\n    final ServiceDTO someServiceDTO = new ServiceDTO();\n    someServiceDTO.setAppName(someAppName);\n    someServiceDTO.setInstanceId(someInstanceId);\n    someServiceDTO.setHomepageUrl(configServiceURL);\n    final AtomicInteger counter = new AtomicInteger(0);\n\n    ContextHandler context = new ContextHandler(\"/services/config\");\n    context.setHandler(new AbstractHandler() {\n      @Override\n      public void handle(String target, Request baseRequest, HttpServletRequest request,\n                         HttpServletResponse response) throws IOException, ServletException {\n        if (failedAtFirstTime && counter.incrementAndGet() == 1) {\n          response.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);\n          baseRequest.setHandled(true);\n          return;\n        }\n        response.setContentType(\"application/json;charset=UTF-8\");\n        response.setStatus(HttpServletResponse.SC_OK);\n\n        response.getWriter().println(gson.toJson(Lists.newArrayList(someServiceDTO)));\n\n        baseRequest.setHandled(true);\n      }\n    });\n\n    return context;\n  }\n","realPath":"apollo-client/src/test/java/com/ctrip/framework/apollo/BaseIntegrationTest.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":102,"status":"N"}],"commitId":"7ca4247fa95b5f502683a15953cd7f51c2b13e0f","commitMessage":"@@@refactor portal meta server address logic a little bit\n","date":"2020-03-14 22:11:32","modifiedFileCount":"8","status":"M","submitter":"Jason Song"}]
