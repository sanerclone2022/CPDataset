[{"authorTime":"2017-08-27 23:57:50","codes":[{"authorDate":"2019-12-30 15:20:26","commitOrder":4,"curCode":"  private void scanNewAndUpdatedAccessKeys() {\n    Transaction transaction = Tracer.newTransaction(\"Apollo.AccessKeyServiceWithCache\",\n        \"scanNewAndUpdatedAccessKeys\");\n    try {\n      loadNewAndUpdatedAccessKeys();\n      transaction.setStatus(Transaction.SUCCESS);\n    } catch (Throwable ex) {\n      transaction.setStatus(ex);\n      logger.error(\"Load new/updated app access keys failed\", ex);\n    } finally {\n      transaction.complete();\n    }\n  }\n","date":"2020-01-01 20:05:48","endLine":108,"groupId":"894","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"scanNewAndUpdatedAccessKeys","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/09/0f714594758536ab30578d24da5da871960c3f.src","preCode":"  private void scanNewAndUpdatedAccessKeys() {\n    Transaction transaction = Tracer.newTransaction(\"Apollo.AccessKeyServiceWithCache\",\n        \"scanNewAndUpdatedAccessKeys\");\n    try {\n      loadNewAndUpdatedAccessKeys();\n      transaction.setStatus(Transaction.SUCCESS);\n    } catch (Throwable ex) {\n      transaction.setStatus(ex);\n      logger.error(\"Load new/updated app access keys failed\", ex);\n    } finally {\n      transaction.complete();\n    }\n  }\n","realPath":"apollo-configservice/src/main/java/com/ctrip/framework/apollo/configservice/service/AccessKeyServiceWithCache.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":96,"status":"B"},{"authorDate":"2017-08-27 23:57:50","commitOrder":4,"curCode":"  public void afterPropertiesSet() throws Exception {\n    databaseScanInterval = bizConfig.releaseMessageScanIntervalInMilli();\n    maxIdScanned = loadLargestMessageId();\n    executorService.scheduleWithFixedDelay((Runnable) () -> {\n      Transaction transaction = Tracer.newTransaction(\"Apollo.ReleaseMessageScanner\", \"scanMessage\");\n      try {\n        scanMessages();\n        transaction.setStatus(Transaction.SUCCESS);\n      } catch (Throwable ex) {\n        transaction.setStatus(ex);\n        logger.error(\"Scan and send message failed\", ex);\n      } finally {\n        transaction.complete();\n      }\n    }, databaseScanInterval, databaseScanInterval, TimeUnit.MILLISECONDS);\n\n  }\n","date":"2017-08-27 23:57:50","endLine":59,"groupId":"894","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"afterPropertiesSet","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/9a/10d98f6b5c2456c1bffe2eb236e2b98a8e7119.src","preCode":"  public void afterPropertiesSet() throws Exception {\n    databaseScanInterval = bizConfig.releaseMessageScanIntervalInMilli();\n    maxIdScanned = loadLargestMessageId();\n    executorService.scheduleWithFixedDelay((Runnable) () -> {\n      Transaction transaction = Tracer.newTransaction(\"Apollo.ReleaseMessageScanner\", \"scanMessage\");\n      try {\n        scanMessages();\n        transaction.setStatus(Transaction.SUCCESS);\n      } catch (Throwable ex) {\n        transaction.setStatus(ex);\n        logger.error(\"Scan and send message failed\", ex);\n      } finally {\n        transaction.complete();\n      }\n    }, databaseScanInterval, databaseScanInterval, TimeUnit.MILLISECONDS);\n\n  }\n","realPath":"apollo-biz/src/main/java/com/ctrip/framework/apollo/biz/message/ReleaseMessageScanner.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":43,"status":"NB"}],"commitId":"32aac0bd066a0f9a38253646ad2a195ca7d2ff35","commitMessage":"@@@Add apollo-client Authentication function\n\n\n","date":"2020-01-01 20:05:48","modifiedFileCount":"16","status":"M","submitter":"nisiyong"},{"authorTime":"2020-09-11 20:01:31","codes":[{"authorDate":"2019-12-30 15:20:26","commitOrder":5,"curCode":"  private void scanNewAndUpdatedAccessKeys() {\n    Transaction transaction = Tracer.newTransaction(\"Apollo.AccessKeyServiceWithCache\",\n        \"scanNewAndUpdatedAccessKeys\");\n    try {\n      loadNewAndUpdatedAccessKeys();\n      transaction.setStatus(Transaction.SUCCESS);\n    } catch (Throwable ex) {\n      transaction.setStatus(ex);\n      logger.error(\"Load new/updated app access keys failed\", ex);\n    } finally {\n      transaction.complete();\n    }\n  }\n","date":"2020-01-01 20:05:48","endLine":108,"groupId":"894","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"scanNewAndUpdatedAccessKeys","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/09/0f714594758536ab30578d24da5da871960c3f.src","preCode":"  private void scanNewAndUpdatedAccessKeys() {\n    Transaction transaction = Tracer.newTransaction(\"Apollo.AccessKeyServiceWithCache\",\n        \"scanNewAndUpdatedAccessKeys\");\n    try {\n      loadNewAndUpdatedAccessKeys();\n      transaction.setStatus(Transaction.SUCCESS);\n    } catch (Throwable ex) {\n      transaction.setStatus(ex);\n      logger.error(\"Load new/updated app access keys failed\", ex);\n    } finally {\n      transaction.complete();\n    }\n  }\n","realPath":"apollo-configservice/src/main/java/com/ctrip/framework/apollo/configservice/service/AccessKeyServiceWithCache.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":96,"status":"N"},{"authorDate":"2020-09-11 20:01:31","commitOrder":5,"curCode":"  public void afterPropertiesSet() throws Exception {\n    databaseScanInterval = bizConfig.releaseMessageScanIntervalInMilli();\n    maxIdScanned = loadLargestMessageId();\n    executorService.scheduleWithFixedDelay(() -> {\n      Transaction transaction = Tracer.newTransaction(\"Apollo.ReleaseMessageScanner\", \"scanMessage\");\n      try {\n        scanMessages();\n        transaction.setStatus(Transaction.SUCCESS);\n      } catch (Throwable ex) {\n        transaction.setStatus(ex);\n        logger.error(\"Scan and send message failed\", ex);\n      } finally {\n        transaction.complete();\n      }\n    }, databaseScanInterval, databaseScanInterval, TimeUnit.MILLISECONDS);\n\n  }\n","date":"2020-09-11 20:01:31","endLine":59,"groupId":"894","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"afterPropertiesSet","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/5a/f42e8c01823fa1e4baddf820352b81c9044be9.src","preCode":"  public void afterPropertiesSet() throws Exception {\n    databaseScanInterval = bizConfig.releaseMessageScanIntervalInMilli();\n    maxIdScanned = loadLargestMessageId();\n    executorService.scheduleWithFixedDelay((Runnable) () -> {\n      Transaction transaction = Tracer.newTransaction(\"Apollo.ReleaseMessageScanner\", \"scanMessage\");\n      try {\n        scanMessages();\n        transaction.setStatus(Transaction.SUCCESS);\n      } catch (Throwable ex) {\n        transaction.setStatus(ex);\n        logger.error(\"Scan and send message failed\", ex);\n      } finally {\n        transaction.complete();\n      }\n    }, databaseScanInterval, databaseScanInterval, TimeUnit.MILLISECONDS);\n\n  }\n","realPath":"apollo-biz/src/main/java/com/ctrip/framework/apollo/biz/message/ReleaseMessageScanner.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":43,"status":"M"}],"commitId":"e321a8e7f315b2be45d38923e9bec3e3145332fe","commitMessage":"@@@Simplify code (#3290)\n\n","date":"2020-09-11 20:01:31","modifiedFileCount":"87","status":"M","submitter":"waters"},{"authorTime":"2021-07-11 16:30:45","codes":[{"authorDate":"2019-12-30 15:20:26","commitOrder":6,"curCode":"  private void scanNewAndUpdatedAccessKeys() {\n    Transaction transaction = Tracer.newTransaction(\"Apollo.AccessKeyServiceWithCache\",\n        \"scanNewAndUpdatedAccessKeys\");\n    try {\n      loadNewAndUpdatedAccessKeys();\n      transaction.setStatus(Transaction.SUCCESS);\n    } catch (Throwable ex) {\n      transaction.setStatus(ex);\n      logger.error(\"Load new/updated app access keys failed\", ex);\n    } finally {\n      transaction.complete();\n    }\n  }\n","date":"2020-01-01 20:05:48","endLine":108,"groupId":"10589","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"scanNewAndUpdatedAccessKeys","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/09/0f714594758536ab30578d24da5da871960c3f.src","preCode":"  private void scanNewAndUpdatedAccessKeys() {\n    Transaction transaction = Tracer.newTransaction(\"Apollo.AccessKeyServiceWithCache\",\n        \"scanNewAndUpdatedAccessKeys\");\n    try {\n      loadNewAndUpdatedAccessKeys();\n      transaction.setStatus(Transaction.SUCCESS);\n    } catch (Throwable ex) {\n      transaction.setStatus(ex);\n      logger.error(\"Load new/updated app access keys failed\", ex);\n    } finally {\n      transaction.complete();\n    }\n  }\n","realPath":"apollo-configservice/src/main/java/com/ctrip/framework/apollo/configservice/service/AccessKeyServiceWithCache.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":96,"status":"N"},{"authorDate":"2021-07-11 16:30:45","commitOrder":6,"curCode":"  public void afterPropertiesSet() throws Exception {\n    databaseScanInterval = bizConfig.releaseMessageScanIntervalInMilli();\n    maxIdScanned = loadLargestMessageId();\n    executorService.scheduleWithFixedDelay(() -> {\n      Transaction transaction = Tracer.newTransaction(\"Apollo.ReleaseMessageScanner\", \"scanMessage\");\n      try {\n        scanMissingMessages();\n        scanMessages();\n        transaction.setStatus(Transaction.SUCCESS);\n      } catch (Throwable ex) {\n        transaction.setStatus(ex);\n        logger.error(\"Scan and send message failed\", ex);\n      } finally {\n        transaction.complete();\n      }\n    }, databaseScanInterval, databaseScanInterval, TimeUnit.MILLISECONDS);\n\n  }\n","date":"2021-07-22 08:09:31","endLine":84,"groupId":"10589","id":6,"instanceNumber":2,"isCurCommit":1,"methodName":"afterPropertiesSet","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/ca/8890c62c8ece913d9ec7a564d27db76fcbe6dc.src","preCode":"  public void afterPropertiesSet() throws Exception {\n    databaseScanInterval = bizConfig.releaseMessageScanIntervalInMilli();\n    maxIdScanned = loadLargestMessageId();\n    executorService.scheduleWithFixedDelay(() -> {\n      Transaction transaction = Tracer.newTransaction(\"Apollo.ReleaseMessageScanner\", \"scanMessage\");\n      try {\n        scanMessages();\n        transaction.setStatus(Transaction.SUCCESS);\n      } catch (Throwable ex) {\n        transaction.setStatus(ex);\n        logger.error(\"Scan and send message failed\", ex);\n      } finally {\n        transaction.complete();\n      }\n    }, databaseScanInterval, databaseScanInterval, TimeUnit.MILLISECONDS);\n\n  }\n","realPath":"apollo-biz/src/main/java/com/ctrip/framework/apollo/biz/message/ReleaseMessageScanner.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":67,"status":"M"}],"commitId":"f9c69dbb181e9cb6c5cb0ee08ae915a52430c23a","commitMessage":"@@@fix the issue that release messages might be missed in certain scenarios\n","date":"2021-07-22 08:09:31","modifiedFileCount":"2","status":"M","submitter":"Jason Song"}]
