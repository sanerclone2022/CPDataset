[{"authorTime":"2017-02-15 15:37:40","codes":[{"authorDate":"2017-02-15 15:37:40","commitOrder":1,"curCode":"  public void testApolloConfigChangeListener() throws Exception {\n    Config applicationConfig = mock(Config.class);\n    Config fxApolloConfig = mock(Config.class);\n\n    mockConfig(ConfigConsts.NAMESPACE_APPLICATION, applicationConfig);\n    mockConfig(FX_APOLLO_NAMESPACE, fxApolloConfig);\n\n    final List<ConfigChangeListener> applicationListeners = Lists.newArrayList();\n    final List<ConfigChangeListener> fxApolloListeners = Lists.newArrayList();\n\n    doAnswer(new Answer() {\n      @Override\n      public Object answer(InvocationOnMock invocation) throws Throwable {\n        applicationListeners.add(invocation.getArgumentAt(0, ConfigChangeListener.class));\n\n        return Void.class;\n      }\n    }).when(applicationConfig).addChangeListener(any(ConfigChangeListener.class));\n\n    doAnswer(new Answer() {\n      @Override\n      public Object answer(InvocationOnMock invocation) throws Throwable {\n        fxApolloListeners.add(invocation.getArgumentAt(0, ConfigChangeListener.class));\n\n        return Void.class;\n      }\n    }).when(fxApolloConfig).addChangeListener(any(ConfigChangeListener.class));\n\n    ConfigChangeEvent someEvent = mock(ConfigChangeEvent.class);\n    ConfigChangeEvent anotherEvent = mock(ConfigChangeEvent.class);\n\n    TestApolloConfigChangeListenerBean1 bean = getBean(TestApolloConfigChangeListenerBean1.class, AppConfig3.class);\n\n    assertEquals(3, applicationListeners.size());\n    assertEquals(1, fxApolloListeners.size());\n\n    for (ConfigChangeListener listener : applicationListeners) {\n      listener.onChange(someEvent);\n    }\n\n    assertEquals(someEvent, bean.getChangeEvent1());\n    assertEquals(someEvent, bean.getChangeEvent2());\n    assertEquals(someEvent, bean.getChangeEvent3());\n\n    for (ConfigChangeListener listener : fxApolloListeners) {\n      listener.onChange(anotherEvent);\n    }\n\n    assertEquals(someEvent, bean.getChangeEvent1());\n    assertEquals(someEvent, bean.getChangeEvent2());\n    assertEquals(anotherEvent, bean.getChangeEvent3());\n  }\n","date":"2017-02-15 15:37:40","endLine":110,"groupId":"1736","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testApolloConfigChangeListener","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/55/eb10fe2f35296bbfe089925e3cf578b74bc66d.src","preCode":"  public void testApolloConfigChangeListener() throws Exception {\n    Config applicationConfig = mock(Config.class);\n    Config fxApolloConfig = mock(Config.class);\n\n    mockConfig(ConfigConsts.NAMESPACE_APPLICATION, applicationConfig);\n    mockConfig(FX_APOLLO_NAMESPACE, fxApolloConfig);\n\n    final List<ConfigChangeListener> applicationListeners = Lists.newArrayList();\n    final List<ConfigChangeListener> fxApolloListeners = Lists.newArrayList();\n\n    doAnswer(new Answer() {\n      @Override\n      public Object answer(InvocationOnMock invocation) throws Throwable {\n        applicationListeners.add(invocation.getArgumentAt(0, ConfigChangeListener.class));\n\n        return Void.class;\n      }\n    }).when(applicationConfig).addChangeListener(any(ConfigChangeListener.class));\n\n    doAnswer(new Answer() {\n      @Override\n      public Object answer(InvocationOnMock invocation) throws Throwable {\n        fxApolloListeners.add(invocation.getArgumentAt(0, ConfigChangeListener.class));\n\n        return Void.class;\n      }\n    }).when(fxApolloConfig).addChangeListener(any(ConfigChangeListener.class));\n\n    ConfigChangeEvent someEvent = mock(ConfigChangeEvent.class);\n    ConfigChangeEvent anotherEvent = mock(ConfigChangeEvent.class);\n\n    TestApolloConfigChangeListenerBean1 bean = getBean(TestApolloConfigChangeListenerBean1.class, AppConfig3.class);\n\n    assertEquals(3, applicationListeners.size());\n    assertEquals(1, fxApolloListeners.size());\n\n    for (ConfigChangeListener listener : applicationListeners) {\n      listener.onChange(someEvent);\n    }\n\n    assertEquals(someEvent, bean.getChangeEvent1());\n    assertEquals(someEvent, bean.getChangeEvent2());\n    assertEquals(someEvent, bean.getChangeEvent3());\n\n    for (ConfigChangeListener listener : fxApolloListeners) {\n      listener.onChange(anotherEvent);\n    }\n\n    assertEquals(someEvent, bean.getChangeEvent1());\n    assertEquals(someEvent, bean.getChangeEvent2());\n    assertEquals(anotherEvent, bean.getChangeEvent3());\n  }\n","realPath":"apollo-client/src/test/java/com/ctrip/framework/apollo/spring/JavaConfigAnnotationTest.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":59,"status":"B"},{"authorDate":"2017-02-15 15:37:40","commitOrder":1,"curCode":"  public void testApolloConfigChangeListener() throws Exception {\n    Config applicationConfig = mock(Config.class);\n    Config fxApolloConfig = mock(Config.class);\n\n    mockConfig(ConfigConsts.NAMESPACE_APPLICATION, applicationConfig);\n    mockConfig(FX_APOLLO_NAMESPACE, fxApolloConfig);\n\n    final List<ConfigChangeListener> applicationListeners = Lists.newArrayList();\n    final List<ConfigChangeListener> fxApolloListeners = Lists.newArrayList();\n\n    doAnswer(new Answer() {\n      @Override\n      public Object answer(InvocationOnMock invocation) throws Throwable {\n        applicationListeners.add(invocation.getArgumentAt(0, ConfigChangeListener.class));\n\n        return Void.class;\n      }\n    }).when(applicationConfig).addChangeListener(any(ConfigChangeListener.class));\n\n    doAnswer(new Answer() {\n      @Override\n      public Object answer(InvocationOnMock invocation) throws Throwable {\n        fxApolloListeners.add(invocation.getArgumentAt(0, ConfigChangeListener.class));\n\n        return Void.class;\n      }\n    }).when(fxApolloConfig).addChangeListener(any(ConfigChangeListener.class));\n\n    ConfigChangeEvent someEvent = mock(ConfigChangeEvent.class);\n    ConfigChangeEvent anotherEvent = mock(ConfigChangeEvent.class);\n\n    TestApolloConfigChangeListenerBean1 bean = getBean(\"spring/XmlConfigAnnotationTest3.xml\",\n        TestApolloConfigChangeListenerBean1.class);\n\n    assertEquals(3, applicationListeners.size());\n    assertEquals(1, fxApolloListeners.size());\n\n    for (ConfigChangeListener listener : applicationListeners) {\n      listener.onChange(someEvent);\n    }\n\n    assertEquals(someEvent, bean.getChangeEvent1());\n    assertEquals(someEvent, bean.getChangeEvent2());\n    assertEquals(someEvent, bean.getChangeEvent3());\n\n    for (ConfigChangeListener listener : fxApolloListeners) {\n      listener.onChange(anotherEvent);\n    }\n\n    assertEquals(someEvent, bean.getChangeEvent1());\n    assertEquals(someEvent, bean.getChangeEvent2());\n    assertEquals(anotherEvent, bean.getChangeEvent3());\n  }\n","date":"2017-02-15 15:37:40","endLine":108,"groupId":"1662","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testApolloConfigChangeListener","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/fa/0fc604c0970934ef2df133f0754784a352bcf0.src","preCode":"  public void testApolloConfigChangeListener() throws Exception {\n    Config applicationConfig = mock(Config.class);\n    Config fxApolloConfig = mock(Config.class);\n\n    mockConfig(ConfigConsts.NAMESPACE_APPLICATION, applicationConfig);\n    mockConfig(FX_APOLLO_NAMESPACE, fxApolloConfig);\n\n    final List<ConfigChangeListener> applicationListeners = Lists.newArrayList();\n    final List<ConfigChangeListener> fxApolloListeners = Lists.newArrayList();\n\n    doAnswer(new Answer() {\n      @Override\n      public Object answer(InvocationOnMock invocation) throws Throwable {\n        applicationListeners.add(invocation.getArgumentAt(0, ConfigChangeListener.class));\n\n        return Void.class;\n      }\n    }).when(applicationConfig).addChangeListener(any(ConfigChangeListener.class));\n\n    doAnswer(new Answer() {\n      @Override\n      public Object answer(InvocationOnMock invocation) throws Throwable {\n        fxApolloListeners.add(invocation.getArgumentAt(0, ConfigChangeListener.class));\n\n        return Void.class;\n      }\n    }).when(fxApolloConfig).addChangeListener(any(ConfigChangeListener.class));\n\n    ConfigChangeEvent someEvent = mock(ConfigChangeEvent.class);\n    ConfigChangeEvent anotherEvent = mock(ConfigChangeEvent.class);\n\n    TestApolloConfigChangeListenerBean1 bean = getBean(\"spring/XmlConfigAnnotationTest3.xml\",\n        TestApolloConfigChangeListenerBean1.class);\n\n    assertEquals(3, applicationListeners.size());\n    assertEquals(1, fxApolloListeners.size());\n\n    for (ConfigChangeListener listener : applicationListeners) {\n      listener.onChange(someEvent);\n    }\n\n    assertEquals(someEvent, bean.getChangeEvent1());\n    assertEquals(someEvent, bean.getChangeEvent2());\n    assertEquals(someEvent, bean.getChangeEvent3());\n\n    for (ConfigChangeListener listener : fxApolloListeners) {\n      listener.onChange(anotherEvent);\n    }\n\n    assertEquals(someEvent, bean.getChangeEvent1());\n    assertEquals(someEvent, bean.getChangeEvent2());\n    assertEquals(anotherEvent, bean.getChangeEvent3());\n  }\n","realPath":"apollo-client/src/test/java/com/ctrip/framework/apollo/spring/XMLConfigAnnotationTest.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":56,"status":"B"}],"commitId":"2e125a6b3c41e01a0618c35b5689493ffad621f8","commitMessage":"@@@Merge pull request #543 from nobodyiam/client-spring-integration\n\nClient spring integration","date":"2017-02-15 15:37:40","modifiedFileCount":"3","status":"B","submitter":"??"},{"authorTime":"2018-02-24 19:06:36","codes":[{"authorDate":"2018-02-24 19:06:36","commitOrder":2,"curCode":"  public void testApolloConfigChangeListener() throws Exception {\n    Config applicationConfig = mock(Config.class);\n    Config fxApolloConfig = mock(Config.class);\n\n    mockConfig(ConfigConsts.NAMESPACE_APPLICATION, applicationConfig);\n    mockConfig(FX_APOLLO_NAMESPACE, fxApolloConfig);\n\n    final List<ConfigChangeListener> applicationListeners = Lists.newArrayList();\n    final List<ConfigChangeListener> fxApolloListeners = Lists.newArrayList();\n\n    doAnswer(new Answer() {\n      @Override\n      public Object answer(InvocationOnMock invocation) throws Throwable {\n        applicationListeners.add(invocation.getArgumentAt(0, ConfigChangeListener.class));\n\n        return Void.class;\n      }\n    }).when(applicationConfig).addChangeListener(any(ConfigChangeListener.class));\n\n    doAnswer(new Answer() {\n      @Override\n      public Object answer(InvocationOnMock invocation) throws Throwable {\n        fxApolloListeners.add(invocation.getArgumentAt(0, ConfigChangeListener.class));\n\n        return Void.class;\n      }\n    }).when(fxApolloConfig).addChangeListener(any(ConfigChangeListener.class));\n\n    ConfigChangeEvent someEvent = mock(ConfigChangeEvent.class);\n    ConfigChangeEvent anotherEvent = mock(ConfigChangeEvent.class);\n\n    TestApolloConfigChangeListenerBean1 bean = getBean(TestApolloConfigChangeListenerBean1.class, AppConfig3.class);\n\n    \r\n    assertEquals(4, applicationListeners.size());\n    assertEquals(1, fxApolloListeners.size());\n\n    for (ConfigChangeListener listener : applicationListeners) {\n      listener.onChange(someEvent);\n    }\n\n    assertEquals(someEvent, bean.getChangeEvent1());\n    assertEquals(someEvent, bean.getChangeEvent2());\n    assertEquals(someEvent, bean.getChangeEvent3());\n\n    for (ConfigChangeListener listener : fxApolloListeners) {\n      listener.onChange(anotherEvent);\n    }\n\n    assertEquals(someEvent, bean.getChangeEvent1());\n    assertEquals(someEvent, bean.getChangeEvent2());\n    assertEquals(anotherEvent, bean.getChangeEvent3());\n  }\n","date":"2018-02-24 19:06:36","endLine":110,"groupId":"1736","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testApolloConfigChangeListener","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/5f/05a2663a7e7d7a6551dd5b11549ffd053cd604.src","preCode":"  public void testApolloConfigChangeListener() throws Exception {\n    Config applicationConfig = mock(Config.class);\n    Config fxApolloConfig = mock(Config.class);\n\n    mockConfig(ConfigConsts.NAMESPACE_APPLICATION, applicationConfig);\n    mockConfig(FX_APOLLO_NAMESPACE, fxApolloConfig);\n\n    final List<ConfigChangeListener> applicationListeners = Lists.newArrayList();\n    final List<ConfigChangeListener> fxApolloListeners = Lists.newArrayList();\n\n    doAnswer(new Answer() {\n      @Override\n      public Object answer(InvocationOnMock invocation) throws Throwable {\n        applicationListeners.add(invocation.getArgumentAt(0, ConfigChangeListener.class));\n\n        return Void.class;\n      }\n    }).when(applicationConfig).addChangeListener(any(ConfigChangeListener.class));\n\n    doAnswer(new Answer() {\n      @Override\n      public Object answer(InvocationOnMock invocation) throws Throwable {\n        fxApolloListeners.add(invocation.getArgumentAt(0, ConfigChangeListener.class));\n\n        return Void.class;\n      }\n    }).when(fxApolloConfig).addChangeListener(any(ConfigChangeListener.class));\n\n    ConfigChangeEvent someEvent = mock(ConfigChangeEvent.class);\n    ConfigChangeEvent anotherEvent = mock(ConfigChangeEvent.class);\n\n    TestApolloConfigChangeListenerBean1 bean = getBean(TestApolloConfigChangeListenerBean1.class, AppConfig3.class);\n\n    assertEquals(3, applicationListeners.size());\n    assertEquals(1, fxApolloListeners.size());\n\n    for (ConfigChangeListener listener : applicationListeners) {\n      listener.onChange(someEvent);\n    }\n\n    assertEquals(someEvent, bean.getChangeEvent1());\n    assertEquals(someEvent, bean.getChangeEvent2());\n    assertEquals(someEvent, bean.getChangeEvent3());\n\n    for (ConfigChangeListener listener : fxApolloListeners) {\n      listener.onChange(anotherEvent);\n    }\n\n    assertEquals(someEvent, bean.getChangeEvent1());\n    assertEquals(someEvent, bean.getChangeEvent2());\n    assertEquals(anotherEvent, bean.getChangeEvent3());\n  }\n","realPath":"apollo-client/src/test/java/com/ctrip/framework/apollo/spring/JavaConfigAnnotationTest.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":58,"status":"M"},{"authorDate":"2018-02-24 19:06:36","commitOrder":2,"curCode":"  public void testApolloConfigChangeListener() throws Exception {\n    Config applicationConfig = mock(Config.class);\n    Config fxApolloConfig = mock(Config.class);\n\n    mockConfig(ConfigConsts.NAMESPACE_APPLICATION, applicationConfig);\n    mockConfig(FX_APOLLO_NAMESPACE, fxApolloConfig);\n\n    final List<ConfigChangeListener> applicationListeners = Lists.newArrayList();\n    final List<ConfigChangeListener> fxApolloListeners = Lists.newArrayList();\n\n    doAnswer(new Answer() {\n      @Override\n      public Object answer(InvocationOnMock invocation) throws Throwable {\n        applicationListeners.add(invocation.getArgumentAt(0, ConfigChangeListener.class));\n\n        return Void.class;\n      }\n    }).when(applicationConfig).addChangeListener(any(ConfigChangeListener.class));\n\n    doAnswer(new Answer() {\n      @Override\n      public Object answer(InvocationOnMock invocation) throws Throwable {\n        fxApolloListeners.add(invocation.getArgumentAt(0, ConfigChangeListener.class));\n\n        return Void.class;\n      }\n    }).when(fxApolloConfig).addChangeListener(any(ConfigChangeListener.class));\n\n    ConfigChangeEvent someEvent = mock(ConfigChangeEvent.class);\n    ConfigChangeEvent anotherEvent = mock(ConfigChangeEvent.class);\n\n    TestApolloConfigChangeListenerBean1 bean = getBean(\"spring/XmlConfigAnnotationTest3.xml\",\n        TestApolloConfigChangeListenerBean1.class);\n\n    \r\n    assertEquals(4, applicationListeners.size());\n    assertEquals(1, fxApolloListeners.size());\n\n    for (ConfigChangeListener listener : applicationListeners) {\n      listener.onChange(someEvent);\n    }\n\n    assertEquals(someEvent, bean.getChangeEvent1());\n    assertEquals(someEvent, bean.getChangeEvent2());\n    assertEquals(someEvent, bean.getChangeEvent3());\n\n    for (ConfigChangeListener listener : fxApolloListeners) {\n      listener.onChange(anotherEvent);\n    }\n\n    assertEquals(someEvent, bean.getChangeEvent1());\n    assertEquals(someEvent, bean.getChangeEvent2());\n    assertEquals(anotherEvent, bean.getChangeEvent3());\n  }\n","date":"2018-02-24 19:06:36","endLine":108,"groupId":"1662","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testApolloConfigChangeListener","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/a5/8c0a8de35615d9d8712c34eeb07465424bfa77.src","preCode":"  public void testApolloConfigChangeListener() throws Exception {\n    Config applicationConfig = mock(Config.class);\n    Config fxApolloConfig = mock(Config.class);\n\n    mockConfig(ConfigConsts.NAMESPACE_APPLICATION, applicationConfig);\n    mockConfig(FX_APOLLO_NAMESPACE, fxApolloConfig);\n\n    final List<ConfigChangeListener> applicationListeners = Lists.newArrayList();\n    final List<ConfigChangeListener> fxApolloListeners = Lists.newArrayList();\n\n    doAnswer(new Answer() {\n      @Override\n      public Object answer(InvocationOnMock invocation) throws Throwable {\n        applicationListeners.add(invocation.getArgumentAt(0, ConfigChangeListener.class));\n\n        return Void.class;\n      }\n    }).when(applicationConfig).addChangeListener(any(ConfigChangeListener.class));\n\n    doAnswer(new Answer() {\n      @Override\n      public Object answer(InvocationOnMock invocation) throws Throwable {\n        fxApolloListeners.add(invocation.getArgumentAt(0, ConfigChangeListener.class));\n\n        return Void.class;\n      }\n    }).when(fxApolloConfig).addChangeListener(any(ConfigChangeListener.class));\n\n    ConfigChangeEvent someEvent = mock(ConfigChangeEvent.class);\n    ConfigChangeEvent anotherEvent = mock(ConfigChangeEvent.class);\n\n    TestApolloConfigChangeListenerBean1 bean = getBean(\"spring/XmlConfigAnnotationTest3.xml\",\n        TestApolloConfigChangeListenerBean1.class);\n\n    assertEquals(3, applicationListeners.size());\n    assertEquals(1, fxApolloListeners.size());\n\n    for (ConfigChangeListener listener : applicationListeners) {\n      listener.onChange(someEvent);\n    }\n\n    assertEquals(someEvent, bean.getChangeEvent1());\n    assertEquals(someEvent, bean.getChangeEvent2());\n    assertEquals(someEvent, bean.getChangeEvent3());\n\n    for (ConfigChangeListener listener : fxApolloListeners) {\n      listener.onChange(anotherEvent);\n    }\n\n    assertEquals(someEvent, bean.getChangeEvent1());\n    assertEquals(someEvent, bean.getChangeEvent2());\n    assertEquals(anotherEvent, bean.getChangeEvent3());\n  }\n","realPath":"apollo-client/src/test/java/com/ctrip/framework/apollo/spring/XMLConfigAnnotationTest.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":55,"status":"M"}],"commitId":"5823daa67b7c84d650023cff3464eae40c53d13c","commitMessage":"@@@Merge pull request #972 from nobodyiam/auto-update-value-merge\n\nAuto Updating Spring Placeholder Values","date":"2018-02-24 19:06:36","modifiedFileCount":"22","status":"M","submitter":"??"},{"authorTime":"2018-02-24 19:06:36","codes":[{"authorDate":"2020-11-22 19:31:51","commitOrder":3,"curCode":"  public void testApolloConfigChangeListener() throws Exception {\n    Config applicationConfig = mock(Config.class);\n    Config fxApolloConfig = mock(Config.class);\n\n    mockConfig(ConfigConsts.NAMESPACE_APPLICATION, applicationConfig);\n    mockConfig(FX_APOLLO_NAMESPACE, fxApolloConfig);\n\n    final List<ConfigChangeListener> applicationListeners = Lists.newArrayList();\n    final List<ConfigChangeListener> fxApolloListeners = Lists.newArrayList();\n\n    doAnswer(new Answer<Object>() {\n      @Override\n      public Object answer(InvocationOnMock invocation) throws Throwable {\n        applicationListeners.add(invocation.getArgumentAt(0, ConfigChangeListener.class));\n\n        return Void.class;\n      }\n    }).when(applicationConfig).addChangeListener(any(ConfigChangeListener.class));\n\n    doAnswer(new Answer<Object>() {\n      @Override\n      public Object answer(InvocationOnMock invocation) throws Throwable {\n        fxApolloListeners.add(invocation.getArgumentAt(0, ConfigChangeListener.class));\n\n        return Void.class;\n      }\n    }).when(fxApolloConfig).addChangeListener(any(ConfigChangeListener.class));\n\n    ConfigChangeEvent someEvent = mock(ConfigChangeEvent.class);\n    ConfigChangeEvent anotherEvent = mock(ConfigChangeEvent.class);\n\n    TestApolloConfigChangeListenerBean1 bean = getBean(TestApolloConfigChangeListenerBean1.class, AppConfig3.class);\n\n    \r\n    assertEquals(4, applicationListeners.size());\n    assertEquals(1, fxApolloListeners.size());\n\n    for (ConfigChangeListener listener : applicationListeners) {\n      listener.onChange(someEvent);\n    }\n\n    assertEquals(someEvent, bean.getChangeEvent1());\n    assertEquals(someEvent, bean.getChangeEvent2());\n    assertEquals(someEvent, bean.getChangeEvent3());\n\n    for (ConfigChangeListener listener : fxApolloListeners) {\n      listener.onChange(anotherEvent);\n    }\n\n    assertEquals(someEvent, bean.getChangeEvent1());\n    assertEquals(someEvent, bean.getChangeEvent2());\n    assertEquals(anotherEvent, bean.getChangeEvent3());\n  }\n","date":"2020-11-22 19:31:51","endLine":229,"groupId":"10364","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"testApolloConfigChangeListener","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/d8/3e2cb12fe8e82495f964c2a24519e40894affb.src","preCode":"  public void testApolloConfigChangeListener() throws Exception {\n    Config applicationConfig = mock(Config.class);\n    Config fxApolloConfig = mock(Config.class);\n\n    mockConfig(ConfigConsts.NAMESPACE_APPLICATION, applicationConfig);\n    mockConfig(FX_APOLLO_NAMESPACE, fxApolloConfig);\n\n    final List<ConfigChangeListener> applicationListeners = Lists.newArrayList();\n    final List<ConfigChangeListener> fxApolloListeners = Lists.newArrayList();\n\n    doAnswer(new Answer() {\n      @Override\n      public Object answer(InvocationOnMock invocation) throws Throwable {\n        applicationListeners.add(invocation.getArgumentAt(0, ConfigChangeListener.class));\n\n        return Void.class;\n      }\n    }).when(applicationConfig).addChangeListener(any(ConfigChangeListener.class));\n\n    doAnswer(new Answer() {\n      @Override\n      public Object answer(InvocationOnMock invocation) throws Throwable {\n        fxApolloListeners.add(invocation.getArgumentAt(0, ConfigChangeListener.class));\n\n        return Void.class;\n      }\n    }).when(fxApolloConfig).addChangeListener(any(ConfigChangeListener.class));\n\n    ConfigChangeEvent someEvent = mock(ConfigChangeEvent.class);\n    ConfigChangeEvent anotherEvent = mock(ConfigChangeEvent.class);\n\n    TestApolloConfigChangeListenerBean1 bean = getBean(TestApolloConfigChangeListenerBean1.class, AppConfig3.class);\n\n    \r\n    assertEquals(4, applicationListeners.size());\n    assertEquals(1, fxApolloListeners.size());\n\n    for (ConfigChangeListener listener : applicationListeners) {\n      listener.onChange(someEvent);\n    }\n\n    assertEquals(someEvent, bean.getChangeEvent1());\n    assertEquals(someEvent, bean.getChangeEvent2());\n    assertEquals(someEvent, bean.getChangeEvent3());\n\n    for (ConfigChangeListener listener : fxApolloListeners) {\n      listener.onChange(anotherEvent);\n    }\n\n    assertEquals(someEvent, bean.getChangeEvent1());\n    assertEquals(someEvent, bean.getChangeEvent2());\n    assertEquals(anotherEvent, bean.getChangeEvent3());\n  }\n","realPath":"apollo-client/src/test/java/com/ctrip/framework/apollo/spring/JavaConfigAnnotationTest.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":177,"status":"M"},{"authorDate":"2018-02-24 19:06:36","commitOrder":3,"curCode":"  public void testApolloConfigChangeListener() throws Exception {\n    Config applicationConfig = mock(Config.class);\n    Config fxApolloConfig = mock(Config.class);\n\n    mockConfig(ConfigConsts.NAMESPACE_APPLICATION, applicationConfig);\n    mockConfig(FX_APOLLO_NAMESPACE, fxApolloConfig);\n\n    final List<ConfigChangeListener> applicationListeners = Lists.newArrayList();\n    final List<ConfigChangeListener> fxApolloListeners = Lists.newArrayList();\n\n    doAnswer(new Answer() {\n      @Override\n      public Object answer(InvocationOnMock invocation) throws Throwable {\n        applicationListeners.add(invocation.getArgumentAt(0, ConfigChangeListener.class));\n\n        return Void.class;\n      }\n    }).when(applicationConfig).addChangeListener(any(ConfigChangeListener.class));\n\n    doAnswer(new Answer() {\n      @Override\n      public Object answer(InvocationOnMock invocation) throws Throwable {\n        fxApolloListeners.add(invocation.getArgumentAt(0, ConfigChangeListener.class));\n\n        return Void.class;\n      }\n    }).when(fxApolloConfig).addChangeListener(any(ConfigChangeListener.class));\n\n    ConfigChangeEvent someEvent = mock(ConfigChangeEvent.class);\n    ConfigChangeEvent anotherEvent = mock(ConfigChangeEvent.class);\n\n    TestApolloConfigChangeListenerBean1 bean = getBean(\"spring/XmlConfigAnnotationTest3.xml\",\n        TestApolloConfigChangeListenerBean1.class);\n\n    \r\n    assertEquals(4, applicationListeners.size());\n    assertEquals(1, fxApolloListeners.size());\n\n    for (ConfigChangeListener listener : applicationListeners) {\n      listener.onChange(someEvent);\n    }\n\n    assertEquals(someEvent, bean.getChangeEvent1());\n    assertEquals(someEvent, bean.getChangeEvent2());\n    assertEquals(someEvent, bean.getChangeEvent3());\n\n    for (ConfigChangeListener listener : fxApolloListeners) {\n      listener.onChange(anotherEvent);\n    }\n\n    assertEquals(someEvent, bean.getChangeEvent1());\n    assertEquals(someEvent, bean.getChangeEvent2());\n    assertEquals(anotherEvent, bean.getChangeEvent3());\n  }\n","date":"2018-02-24 19:06:36","endLine":108,"groupId":"10364","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"testApolloConfigChangeListener","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/a5/8c0a8de35615d9d8712c34eeb07465424bfa77.src","preCode":"  public void testApolloConfigChangeListener() throws Exception {\n    Config applicationConfig = mock(Config.class);\n    Config fxApolloConfig = mock(Config.class);\n\n    mockConfig(ConfigConsts.NAMESPACE_APPLICATION, applicationConfig);\n    mockConfig(FX_APOLLO_NAMESPACE, fxApolloConfig);\n\n    final List<ConfigChangeListener> applicationListeners = Lists.newArrayList();\n    final List<ConfigChangeListener> fxApolloListeners = Lists.newArrayList();\n\n    doAnswer(new Answer() {\n      @Override\n      public Object answer(InvocationOnMock invocation) throws Throwable {\n        applicationListeners.add(invocation.getArgumentAt(0, ConfigChangeListener.class));\n\n        return Void.class;\n      }\n    }).when(applicationConfig).addChangeListener(any(ConfigChangeListener.class));\n\n    doAnswer(new Answer() {\n      @Override\n      public Object answer(InvocationOnMock invocation) throws Throwable {\n        fxApolloListeners.add(invocation.getArgumentAt(0, ConfigChangeListener.class));\n\n        return Void.class;\n      }\n    }).when(fxApolloConfig).addChangeListener(any(ConfigChangeListener.class));\n\n    ConfigChangeEvent someEvent = mock(ConfigChangeEvent.class);\n    ConfigChangeEvent anotherEvent = mock(ConfigChangeEvent.class);\n\n    TestApolloConfigChangeListenerBean1 bean = getBean(\"spring/XmlConfigAnnotationTest3.xml\",\n        TestApolloConfigChangeListenerBean1.class);\n\n    \r\n    assertEquals(4, applicationListeners.size());\n    assertEquals(1, fxApolloListeners.size());\n\n    for (ConfigChangeListener listener : applicationListeners) {\n      listener.onChange(someEvent);\n    }\n\n    assertEquals(someEvent, bean.getChangeEvent1());\n    assertEquals(someEvent, bean.getChangeEvent2());\n    assertEquals(someEvent, bean.getChangeEvent3());\n\n    for (ConfigChangeListener listener : fxApolloListeners) {\n      listener.onChange(anotherEvent);\n    }\n\n    assertEquals(someEvent, bean.getChangeEvent1());\n    assertEquals(someEvent, bean.getChangeEvent2());\n    assertEquals(anotherEvent, bean.getChangeEvent3());\n  }\n","realPath":"apollo-client/src/test/java/com/ctrip/framework/apollo/spring/XMLConfigAnnotationTest.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":55,"status":"N"}],"commitId":"6ce0932082f89fa94637917f147682254b32db82","commitMessage":"@@@support configuring namespaces as placeholders\n\n","date":"2020-11-22 19:31:51","modifiedFileCount":"12","status":"M","submitter":"wxq"}]
