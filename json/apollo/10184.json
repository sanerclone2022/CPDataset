[{"authorTime":"2019-07-13 22:00:06","codes":[{"authorDate":"2019-07-13 22:00:06","commitOrder":1,"curCode":"  public ResponseEntity<Void> deleteCreateApplicationRoleFromUser(@PathVariable(\"userId\") String userId) {\n    checkUserExists(userId);\n    Set<String> userIds = new HashSet<>();\n    userIds.add(userId);\n    rolePermissionService.removeRoleFromUsers(SystemRoleManagerService.CREATE_APPLICATION_ROLE_NAME,\n            userIds, userInfoHolder.getUser().getUserId());\n    return ResponseEntity.ok().build();\n  }\n","date":"2019-07-13 22:00:06","endLine":302,"groupId":"763","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"deleteCreateApplicationRoleFromUser","params":"(@PathVariable(\"userId\")StringuserId)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/d1/dd0d8a1280892de71f826b0d8aa1617e2395c2.src","preCode":"  public ResponseEntity<Void> deleteCreateApplicationRoleFromUser(@PathVariable(\"userId\") String userId) {\n    checkUserExists(userId);\n    Set<String> userIds = new HashSet<>();\n    userIds.add(userId);\n    rolePermissionService.removeRoleFromUsers(SystemRoleManagerService.CREATE_APPLICATION_ROLE_NAME,\n            userIds, userInfoHolder.getUser().getUserId());\n    return ResponseEntity.ok().build();\n  }\n","realPath":"apollo-portal/src/main/java/com/ctrip/framework/apollo/portal/controller/PermissionController.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":295,"status":"B"},{"authorDate":"2019-07-13 22:00:06","commitOrder":1,"curCode":"  public ResponseEntity<Void> forbidManageAppMaster(@PathVariable String appId, @PathVariable String  userId) {\n    checkUserExists(userId);\n    roleInitializationService.initManageAppMasterRole(appId, userInfoHolder.getUser().getUserId());\n    Set<String> userIds = new HashSet<>();\n    userIds.add(userId);\n    rolePermissionService.removeRoleFromUsers(RoleUtils.buildManageAppMasterRoleName(PermissionType.MANAGE_APP_MASTER, appId),\n            userIds, userInfoHolder.getUser().getUserId());\n    return ResponseEntity.ok().build();\n  }\n","date":"2019-07-13 22:00:06","endLine":340,"groupId":"472","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"forbidManageAppMaster","params":"(@PathVariableStringappId@@PathVariableStringuserId)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/d1/dd0d8a1280892de71f826b0d8aa1617e2395c2.src","preCode":"  public ResponseEntity<Void> forbidManageAppMaster(@PathVariable String appId, @PathVariable String  userId) {\n    checkUserExists(userId);\n    roleInitializationService.initManageAppMasterRole(appId, userInfoHolder.getUser().getUserId());\n    Set<String> userIds = new HashSet<>();\n    userIds.add(userId);\n    rolePermissionService.removeRoleFromUsers(RoleUtils.buildManageAppMasterRoleName(PermissionType.MANAGE_APP_MASTER, appId),\n            userIds, userInfoHolder.getUser().getUserId());\n    return ResponseEntity.ok().build();\n  }\n","realPath":"apollo-portal/src/main/java/com/ctrip/framework/apollo/portal/controller/PermissionController.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":332,"status":"B"}],"commitId":"fef47d8594947885c2e0bf39fbc54ed82c935b86","commitMessage":"@@@Add Create Application and Manage Application Master roles (#2309)\n\nAdd system property role.create-application.enabled to control whether anyone can create application or not.\n\nAdd system property role.manage-app-master.enabled to control whether any app master can add/delete other app master","date":"2019-07-13 22:00:06","modifiedFileCount":"10","status":"B","submitter":"wk"},{"authorTime":"2019-10-01 16:30:14","codes":[{"authorDate":"2019-07-13 22:00:06","commitOrder":2,"curCode":"  public ResponseEntity<Void> deleteCreateApplicationRoleFromUser(@PathVariable(\"userId\") String userId) {\n    checkUserExists(userId);\n    Set<String> userIds = new HashSet<>();\n    userIds.add(userId);\n    rolePermissionService.removeRoleFromUsers(SystemRoleManagerService.CREATE_APPLICATION_ROLE_NAME,\n            userIds, userInfoHolder.getUser().getUserId());\n    return ResponseEntity.ok().build();\n  }\n","date":"2019-07-13 22:00:06","endLine":302,"groupId":"10184","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"deleteCreateApplicationRoleFromUser","params":"(@PathVariable(\"userId\")StringuserId)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/d1/dd0d8a1280892de71f826b0d8aa1617e2395c2.src","preCode":"  public ResponseEntity<Void> deleteCreateApplicationRoleFromUser(@PathVariable(\"userId\") String userId) {\n    checkUserExists(userId);\n    Set<String> userIds = new HashSet<>();\n    userIds.add(userId);\n    rolePermissionService.removeRoleFromUsers(SystemRoleManagerService.CREATE_APPLICATION_ROLE_NAME,\n            userIds, userInfoHolder.getUser().getUserId());\n    return ResponseEntity.ok().build();\n  }\n","realPath":"apollo-portal/src/main/java/com/ctrip/framework/apollo/portal/controller/PermissionController.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":295,"status":"N"},{"authorDate":"2019-10-01 16:30:14","commitOrder":2,"curCode":"  public ResponseEntity<Void> forbidManageAppMaster(@PathVariable String appId, @PathVariable String  userId) {\n    checkUserExists(userId);\n    roleInitializationService.initManageAppMasterRole(appId, userInfoHolder.getUser().getUserId());\n    Set<String> userIds = new HashSet<>();\n    userIds.add(userId);\n    rolePermissionService.removeRoleFromUsers(RoleUtils.buildAppRoleName(appId, PermissionType.MANAGE_APP_MASTER),\n            userIds, userInfoHolder.getUser().getUserId());\n    return ResponseEntity.ok().build();\n  }\n","date":"2019-10-01 16:30:14","endLine":340,"groupId":"10184","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"forbidManageAppMaster","params":"(@PathVariableStringappId@@PathVariableStringuserId)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/3b/601fc4f395b7d7104c79bae707dd1f62859acc.src","preCode":"  public ResponseEntity<Void> forbidManageAppMaster(@PathVariable String appId, @PathVariable String  userId) {\n    checkUserExists(userId);\n    roleInitializationService.initManageAppMasterRole(appId, userInfoHolder.getUser().getUserId());\n    Set<String> userIds = new HashSet<>();\n    userIds.add(userId);\n    rolePermissionService.removeRoleFromUsers(RoleUtils.buildManageAppMasterRoleName(PermissionType.MANAGE_APP_MASTER, appId),\n            userIds, userInfoHolder.getUser().getUserId());\n    return ResponseEntity.ok().build();\n  }\n","realPath":"apollo-portal/src/main/java/com/ctrip/framework/apollo/portal/controller/PermissionController.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":332,"status":"M"}],"commitId":"0fcce2003e429e0ba4433afc97a6bfc0e53553a9","commitMessage":"@@@fix the issue that project owner cannot manage application master even if role.manage-app-master.enabled is turned off (#2627)\n\n","date":"2019-10-01 16:30:14","modifiedFileCount":"3","status":"M","submitter":"Jason Song"}]
