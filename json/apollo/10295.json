[{"authorTime":"2016-07-07 18:11:03","codes":[{"authorDate":"2016-07-07 18:11:03","commitOrder":1,"curCode":"  public void testOnRepositoryChange() throws Exception {\n    Properties someProperties = new Properties();\n    String someKey = \"someKey\";\n    String someValue = \"someValue\";\n    String anotherValue = \"anotherValue\";\n    someProperties.setProperty(someKey, someValue);\n\n    when(configRepository.getConfig()).thenReturn(someProperties);\n\n    PropertiesConfigFile configFile = new PropertiesConfigFile(someNamespace, configRepository);\n\n    assertTrue(configFile.getContent().contains(String.format(\"%s=%s\", someKey, someValue)));\n\n    Properties anotherProperties = new Properties();\n    anotherProperties.setProperty(someKey, anotherValue);\n\n    configFile.onRepositoryChange(someNamespace, anotherProperties);\n\n    assertFalse(configFile.getContent().contains(String.format(\"%s=%s\", someKey, someValue)));\n    assertTrue(configFile.getContent().contains(String.format(\"%s=%s\", someKey, anotherValue)));\n  }\n","date":"2016-07-07 18:11:03","endLine":91,"groupId":"1100","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testOnRepositoryChange","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/5e/3e5dd0bee407b5568bba9d874801cc7c77c756.src","preCode":"  public void testOnRepositoryChange() throws Exception {\n    Properties someProperties = new Properties();\n    String someKey = \"someKey\";\n    String someValue = \"someValue\";\n    String anotherValue = \"anotherValue\";\n    someProperties.setProperty(someKey, someValue);\n\n    when(configRepository.getConfig()).thenReturn(someProperties);\n\n    PropertiesConfigFile configFile = new PropertiesConfigFile(someNamespace, configRepository);\n\n    assertTrue(configFile.getContent().contains(String.format(\"%s=%s\", someKey, someValue)));\n\n    Properties anotherProperties = new Properties();\n    anotherProperties.setProperty(someKey, anotherValue);\n\n    configFile.onRepositoryChange(someNamespace, anotherProperties);\n\n    assertFalse(configFile.getContent().contains(String.format(\"%s=%s\", someKey, someValue)));\n    assertTrue(configFile.getContent().contains(String.format(\"%s=%s\", someKey, anotherValue)));\n  }\n","realPath":"apollo-client/src/test/java/com/ctrip/framework/apollo/internals/PropertiesConfigFileTest.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":71,"status":"B"},{"authorDate":"2016-07-07 18:11:03","commitOrder":1,"curCode":"  public void testOnRepositoryChange() throws Exception {\n    Properties someProperties = new Properties();\n    String key = ConfigConsts.CONFIG_FILE_CONTENT_KEY;\n    String someValue = \"someValue\";\n    String anotherValue = \"anotherValue\";\n    someProperties.setProperty(key, someValue);\n\n    when(configRepository.getConfig()).thenReturn(someProperties);\n\n    XmlConfigFile configFile = new XmlConfigFile(someNamespace, configRepository);\n\n    assertEquals(someValue, configFile.getContent());\n\n    Properties anotherProperties = new Properties();\n    anotherProperties.setProperty(key, anotherValue);\n\n    configFile.onRepositoryChange(someNamespace, anotherProperties);\n\n    assertEquals(anotherValue, configFile.getContent());\n  }\n","date":"2016-07-07 18:11:03","endLine":88,"groupId":"1824","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testOnRepositoryChange","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/cb/b062e35ab3baa6f24bb6dc4800922e276b84b9.src","preCode":"  public void testOnRepositoryChange() throws Exception {\n    Properties someProperties = new Properties();\n    String key = ConfigConsts.CONFIG_FILE_CONTENT_KEY;\n    String someValue = \"someValue\";\n    String anotherValue = \"anotherValue\";\n    someProperties.setProperty(key, someValue);\n\n    when(configRepository.getConfig()).thenReturn(someProperties);\n\n    XmlConfigFile configFile = new XmlConfigFile(someNamespace, configRepository);\n\n    assertEquals(someValue, configFile.getContent());\n\n    Properties anotherProperties = new Properties();\n    anotherProperties.setProperty(key, anotherValue);\n\n    configFile.onRepositoryChange(someNamespace, anotherProperties);\n\n    assertEquals(anotherValue, configFile.getContent());\n  }\n","realPath":"apollo-client/src/test/java/com/ctrip/framework/apollo/internals/XmlConfigFileTest.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":69,"status":"B"}],"commitId":"5f13408211cf91a8cca334a98e4b7151622bc5c1","commitMessage":"@@@Merge pull request #310 from lepdou/namespace-as-file-format-2\n\nnamespace as file","date":"2016-07-07 18:11:03","modifiedFileCount":"65","status":"B","submitter":"Jason Song"},{"authorTime":"2017-04-30 16:52:24","codes":[{"authorDate":"2017-04-30 16:52:24","commitOrder":2,"curCode":"  public void testOnRepositoryChange() throws Exception {\n    Properties someProperties = new Properties();\n    String someKey = \"someKey\";\n    String someValue = \"someValue\";\n    String anotherValue = \"anotherValue\";\n    someProperties.setProperty(someKey, someValue);\n\n    when(configRepository.getConfig()).thenReturn(someProperties);\n\n    PropertiesConfigFile configFile = new PropertiesConfigFile(someNamespace, configRepository);\n\n    assertTrue(configFile.getContent().contains(String.format(\"%s=%s\", someKey, someValue)));\n\n    Properties anotherProperties = new Properties();\n    anotherProperties.setProperty(someKey, anotherValue);\n\n    final SettableFuture<ConfigFileChangeEvent> configFileChangeFuture = SettableFuture.create();\n    ConfigFileChangeListener someListener = new ConfigFileChangeListener() {\n      @Override\n      public void onChange(ConfigFileChangeEvent changeEvent) {\n        configFileChangeFuture.set(changeEvent);\n      }\n    };\n\n    configFile.addChangeListener(someListener);\n\n    configFile.onRepositoryChange(someNamespace, anotherProperties);\n\n    ConfigFileChangeEvent changeEvent = configFileChangeFuture.get(500, TimeUnit.MILLISECONDS);\n\n    assertFalse(configFile.getContent().contains(String.format(\"%s=%s\", someKey, someValue)));\n    assertTrue(configFile.getContent().contains(String.format(\"%s=%s\", someKey, anotherValue)));\n\n    assertEquals(someNamespace, changeEvent.getNamespace());\n    assertTrue(changeEvent.getOldValue().contains(String.format(\"%s=%s\", someKey, someValue)));\n    assertTrue(changeEvent.getNewValue().contains(String.format(\"%s=%s\", someKey, anotherValue)));\n    assertEquals(PropertyChangeType.MODIFIED, changeEvent.getChangeType());\n  }\n","date":"2017-04-30 16:52:24","endLine":114,"groupId":"10295","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testOnRepositoryChange","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/1a/221ed9ef67337bb57261d6b94c3cf809d2ca2e.src","preCode":"  public void testOnRepositoryChange() throws Exception {\n    Properties someProperties = new Properties();\n    String someKey = \"someKey\";\n    String someValue = \"someValue\";\n    String anotherValue = \"anotherValue\";\n    someProperties.setProperty(someKey, someValue);\n\n    when(configRepository.getConfig()).thenReturn(someProperties);\n\n    PropertiesConfigFile configFile = new PropertiesConfigFile(someNamespace, configRepository);\n\n    assertTrue(configFile.getContent().contains(String.format(\"%s=%s\", someKey, someValue)));\n\n    Properties anotherProperties = new Properties();\n    anotherProperties.setProperty(someKey, anotherValue);\n\n    configFile.onRepositoryChange(someNamespace, anotherProperties);\n\n    assertFalse(configFile.getContent().contains(String.format(\"%s=%s\", someKey, someValue)));\n    assertTrue(configFile.getContent().contains(String.format(\"%s=%s\", someKey, anotherValue)));\n  }\n","realPath":"apollo-client/src/test/java/com/ctrip/framework/apollo/internals/PropertiesConfigFileTest.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":77,"status":"M"},{"authorDate":"2017-04-30 16:52:24","commitOrder":2,"curCode":"  public void testOnRepositoryChange() throws Exception {\n    Properties someProperties = new Properties();\n    String key = ConfigConsts.CONFIG_FILE_CONTENT_KEY;\n    String someValue = \"someValue\";\n    String anotherValue = \"anotherValue\";\n    someProperties.setProperty(key, someValue);\n\n    when(configRepository.getConfig()).thenReturn(someProperties);\n\n    XmlConfigFile configFile = new XmlConfigFile(someNamespace, configRepository);\n\n    assertEquals(someValue, configFile.getContent());\n\n    Properties anotherProperties = new Properties();\n    anotherProperties.setProperty(key, anotherValue);\n\n    final SettableFuture<ConfigFileChangeEvent> configFileChangeFuture = SettableFuture.create();\n    ConfigFileChangeListener someListener = new ConfigFileChangeListener() {\n      @Override\n      public void onChange(ConfigFileChangeEvent changeEvent) {\n        configFileChangeFuture.set(changeEvent);\n      }\n    };\n\n    configFile.addChangeListener(someListener);\n\n    configFile.onRepositoryChange(someNamespace, anotherProperties);\n\n    ConfigFileChangeEvent changeEvent = configFileChangeFuture.get(500, TimeUnit.MILLISECONDS);\n\n    assertEquals(anotherValue, configFile.getContent());\n    assertEquals(someNamespace, changeEvent.getNamespace());\n    assertEquals(someValue, changeEvent.getOldValue());\n    assertEquals(anotherValue, changeEvent.getNewValue());\n    assertEquals(PropertyChangeType.MODIFIED, changeEvent.getChangeType());\n  }\n","date":"2017-04-30 16:52:24","endLine":112,"groupId":"10295","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testOnRepositoryChange","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/13/552029ec8010be8bb09958e906db3b78ba37d1.src","preCode":"  public void testOnRepositoryChange() throws Exception {\n    Properties someProperties = new Properties();\n    String key = ConfigConsts.CONFIG_FILE_CONTENT_KEY;\n    String someValue = \"someValue\";\n    String anotherValue = \"anotherValue\";\n    someProperties.setProperty(key, someValue);\n\n    when(configRepository.getConfig()).thenReturn(someProperties);\n\n    XmlConfigFile configFile = new XmlConfigFile(someNamespace, configRepository);\n\n    assertEquals(someValue, configFile.getContent());\n\n    Properties anotherProperties = new Properties();\n    anotherProperties.setProperty(key, anotherValue);\n\n    configFile.onRepositoryChange(someNamespace, anotherProperties);\n\n    assertEquals(anotherValue, configFile.getContent());\n  }\n","realPath":"apollo-client/src/test/java/com/ctrip/framework/apollo/internals/XmlConfigFileTest.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":77,"status":"M"}],"commitId":"b9fca2d9fff4a6a1ecbab7efa96d8fe4fc805c56","commitMessage":"@@@Merge pull request #606 from nobodyiam/configfile-change-listener\n\nadd config file change listener","date":"2017-04-30 16:52:24","modifiedFileCount":"9","status":"M","submitter":"??"}]
