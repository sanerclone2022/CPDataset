[{"authorTime":"2016-08-15 14:43:02","codes":[{"authorDate":"2018-07-24 02:11:59","commitOrder":5,"curCode":"  public ResponseEntity<Void> removeNamespaceEnvRoleFromUser(@PathVariable String appId, @PathVariable String env, @PathVariable String namespaceName,\n                                                             @PathVariable String roleType, @RequestParam String user) {\n    RequestPrecondition.checkArgumentsNotEmpty(user);\n\n    if (!RoleType.isValidRoleType(roleType)) {\n      throw new BadRequestException(\"role type is illegal\");\n    }\n    \r\n    if (null == EnvUtils.transformEnv(env)) {\n      throw new BadRequestException(\"env is illegal\");\n    }\n    rolePermissionService.removeRoleFromUsers(RoleUtils.buildNamespaceRoleName(appId, namespaceName, roleType, env),\n        Sets.newHashSet(user), userInfoHolder.getUser().getUserId());\n    return ResponseEntity.ok().build();\n  }\n","date":"2018-07-24 02:11:59","endLine":161,"groupId":"761","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"removeNamespaceEnvRoleFromUser","params":"(@PathVariableStringappId@@PathVariableStringenv@@PathVariableStringnamespaceName@@PathVariableStringroleType@@RequestParamStringuser)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/73/ddce86285ab191b215ab939f98b6cf2019d1c8.src","preCode":"  public ResponseEntity<Void> removeNamespaceEnvRoleFromUser(@PathVariable String appId, @PathVariable String env, @PathVariable String namespaceName,\n                                                             @PathVariable String roleType, @RequestParam String user) {\n    RequestPrecondition.checkArgumentsNotEmpty(user);\n\n    if (!RoleType.isValidRoleType(roleType)) {\n      throw new BadRequestException(\"role type is illegal\");\n    }\n    \r\n    if (null == EnvUtils.transformEnv(env)) {\n      throw new BadRequestException(\"env is illegal\");\n    }\n    rolePermissionService.removeRoleFromUsers(RoleUtils.buildNamespaceRoleName(appId, namespaceName, roleType, env),\n        Sets.newHashSet(user), userInfoHolder.getUser().getUserId());\n    return ResponseEntity.ok().build();\n  }\n","realPath":"apollo-portal/src/main/java/com/ctrip/framework/apollo/portal/controller/PermissionController.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":147,"status":"B"},{"authorDate":"2016-08-15 14:43:02","commitOrder":5,"curCode":"  public ResponseEntity<Void> assignAppRoleToUser(@PathVariable String appId, @PathVariable String roleType,\n                                                  @RequestBody String user) {\n    checkUserExists(user);\n    RequestPrecondition.checkArgumentsNotEmpty(user);\n\n    if (!RoleType.isValidRoleType(roleType)) {\n      throw new BadRequestException(\"role type is illegal\");\n    }\n    Set<String> assignedUsers = rolePermissionService.assignRoleToUsers(RoleUtils.buildAppRoleName(appId, roleType),\n        Sets.newHashSet(user), userInfoHolder.getUser().getUserId());\n    if (CollectionUtils.isEmpty(assignedUsers)) {\n      throw new BadRequestException(user + \"���������������������������\");\n    }\n\n    return ResponseEntity.ok().build();\n  }\n","date":"2016-08-15 14:43:02","endLine":152,"groupId":"1057","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"assignAppRoleToUser","params":"(@PathVariableStringappId@@PathVariableStringroleType@@RequestBodyStringuser)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/47/cadb4e3ac382abe5c96f87e508b966fecdc11b.src","preCode":"  public ResponseEntity<Void> assignAppRoleToUser(@PathVariable String appId, @PathVariable String roleType,\n                                                  @RequestBody String user) {\n    checkUserExists(user);\n    RequestPrecondition.checkArgumentsNotEmpty(user);\n\n    if (!RoleType.isValidRoleType(roleType)) {\n      throw new BadRequestException(\"role type is illegal\");\n    }\n    Set<String> assignedUsers = rolePermissionService.assignRoleToUsers(RoleUtils.buildAppRoleName(appId, roleType),\n        Sets.newHashSet(user), userInfoHolder.getUser().getUserId());\n    if (CollectionUtils.isEmpty(assignedUsers)) {\n      throw new BadRequestException(user + \"���������������������������\");\n    }\n\n    return ResponseEntity.ok().build();\n  }\n","realPath":"apollo-portal/src/main/java/com/ctrip/framework/apollo/portal/controller/PermissionController.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":137,"status":"NB"}],"commitId":"0bc91cc11464b1a27ef5dd227615995cb8db00a1","commitMessage":"@@@Merge pull request #1282 from nobodyiam/branch_env_permission\n\nSupport role permissions per environment","date":"2018-07-24 02:11:59","modifiedFileCount":"19","status":"M","submitter":"Jason Song"},{"authorTime":"2016-08-15 14:43:02","codes":[{"authorDate":"2018-08-07 21:27:48","commitOrder":6,"curCode":"  public ResponseEntity<Void> removeNamespaceEnvRoleFromUser(@PathVariable String appId, @PathVariable String env, @PathVariable String namespaceName,\n                                                             @PathVariable String roleType, @RequestParam String user) {\n    RequestPrecondition.checkArgumentsNotEmpty(user);\n\n    if (!RoleType.isValidRoleType(roleType)) {\n      throw new BadRequestException(\"role type is illegal\");\n    }\n    \r\n    if (Env.UNKNOWN == EnvUtils.transformEnv(env)) {\n      throw new BadRequestException(\"env is illegal\");\n    }\n    rolePermissionService.removeRoleFromUsers(RoleUtils.buildNamespaceRoleName(appId, namespaceName, roleType, env),\n        Sets.newHashSet(user), userInfoHolder.getUser().getUserId());\n    return ResponseEntity.ok().build();\n  }\n","date":"2018-08-07 21:27:48","endLine":161,"groupId":"761","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"removeNamespaceEnvRoleFromUser","params":"(@PathVariableStringappId@@PathVariableStringenv@@PathVariableStringnamespaceName@@PathVariableStringroleType@@RequestParamStringuser)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/6c/29b417a8c27da2a89dc3166e164e0437da61d8.src","preCode":"  public ResponseEntity<Void> removeNamespaceEnvRoleFromUser(@PathVariable String appId, @PathVariable String env, @PathVariable String namespaceName,\n                                                             @PathVariable String roleType, @RequestParam String user) {\n    RequestPrecondition.checkArgumentsNotEmpty(user);\n\n    if (!RoleType.isValidRoleType(roleType)) {\n      throw new BadRequestException(\"role type is illegal\");\n    }\n    \r\n    if (null == EnvUtils.transformEnv(env)) {\n      throw new BadRequestException(\"env is illegal\");\n    }\n    rolePermissionService.removeRoleFromUsers(RoleUtils.buildNamespaceRoleName(appId, namespaceName, roleType, env),\n        Sets.newHashSet(user), userInfoHolder.getUser().getUserId());\n    return ResponseEntity.ok().build();\n  }\n","realPath":"apollo-portal/src/main/java/com/ctrip/framework/apollo/portal/controller/PermissionController.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":147,"status":"M"},{"authorDate":"2016-08-15 14:43:02","commitOrder":6,"curCode":"  public ResponseEntity<Void> assignAppRoleToUser(@PathVariable String appId, @PathVariable String roleType,\n                                                  @RequestBody String user) {\n    checkUserExists(user);\n    RequestPrecondition.checkArgumentsNotEmpty(user);\n\n    if (!RoleType.isValidRoleType(roleType)) {\n      throw new BadRequestException(\"role type is illegal\");\n    }\n    Set<String> assignedUsers = rolePermissionService.assignRoleToUsers(RoleUtils.buildAppRoleName(appId, roleType),\n        Sets.newHashSet(user), userInfoHolder.getUser().getUserId());\n    if (CollectionUtils.isEmpty(assignedUsers)) {\n      throw new BadRequestException(user + \"���������������������������\");\n    }\n\n    return ResponseEntity.ok().build();\n  }\n","date":"2016-08-15 14:43:02","endLine":152,"groupId":"1057","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"assignAppRoleToUser","params":"(@PathVariableStringappId@@PathVariableStringroleType@@RequestBodyStringuser)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/47/cadb4e3ac382abe5c96f87e508b966fecdc11b.src","preCode":"  public ResponseEntity<Void> assignAppRoleToUser(@PathVariable String appId, @PathVariable String roleType,\n                                                  @RequestBody String user) {\n    checkUserExists(user);\n    RequestPrecondition.checkArgumentsNotEmpty(user);\n\n    if (!RoleType.isValidRoleType(roleType)) {\n      throw new BadRequestException(\"role type is illegal\");\n    }\n    Set<String> assignedUsers = rolePermissionService.assignRoleToUsers(RoleUtils.buildAppRoleName(appId, roleType),\n        Sets.newHashSet(user), userInfoHolder.getUser().getUserId());\n    if (CollectionUtils.isEmpty(assignedUsers)) {\n      throw new BadRequestException(user + \"���������������������������\");\n    }\n\n    return ResponseEntity.ok().build();\n  }\n","realPath":"apollo-portal/src/main/java/com/ctrip/framework/apollo/portal/controller/PermissionController.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":137,"status":"N"}],"commitId":"8e6ed96853b491eb8767c2aecc31e0bfc3c0838d","commitMessage":"@@@Merge pull request #1340 from ctripcorp/1.x\n\nmerge 1.x to master","date":"2018-08-07 21:27:48","modifiedFileCount":"22","status":"M","submitter":"Jason Song"},{"authorTime":"2019-10-08 17:42:09","codes":[{"authorDate":"2018-08-07 21:27:48","commitOrder":7,"curCode":"  public ResponseEntity<Void> removeNamespaceEnvRoleFromUser(@PathVariable String appId, @PathVariable String env, @PathVariable String namespaceName,\n                                                             @PathVariable String roleType, @RequestParam String user) {\n    RequestPrecondition.checkArgumentsNotEmpty(user);\n\n    if (!RoleType.isValidRoleType(roleType)) {\n      throw new BadRequestException(\"role type is illegal\");\n    }\n    \r\n    if (Env.UNKNOWN == EnvUtils.transformEnv(env)) {\n      throw new BadRequestException(\"env is illegal\");\n    }\n    rolePermissionService.removeRoleFromUsers(RoleUtils.buildNamespaceRoleName(appId, namespaceName, roleType, env),\n        Sets.newHashSet(user), userInfoHolder.getUser().getUserId());\n    return ResponseEntity.ok().build();\n  }\n","date":"2018-08-07 21:27:48","endLine":161,"groupId":"761","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"removeNamespaceEnvRoleFromUser","params":"(@PathVariableStringappId@@PathVariableStringenv@@PathVariableStringnamespaceName@@PathVariableStringroleType@@RequestParamStringuser)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/6c/29b417a8c27da2a89dc3166e164e0437da61d8.src","preCode":"  public ResponseEntity<Void> removeNamespaceEnvRoleFromUser(@PathVariable String appId, @PathVariable String env, @PathVariable String namespaceName,\n                                                             @PathVariable String roleType, @RequestParam String user) {\n    RequestPrecondition.checkArgumentsNotEmpty(user);\n\n    if (!RoleType.isValidRoleType(roleType)) {\n      throw new BadRequestException(\"role type is illegal\");\n    }\n    \r\n    if (Env.UNKNOWN == EnvUtils.transformEnv(env)) {\n      throw new BadRequestException(\"env is illegal\");\n    }\n    rolePermissionService.removeRoleFromUsers(RoleUtils.buildNamespaceRoleName(appId, namespaceName, roleType, env),\n        Sets.newHashSet(user), userInfoHolder.getUser().getUserId());\n    return ResponseEntity.ok().build();\n  }\n","realPath":"apollo-portal/src/main/java/com/ctrip/framework/apollo/portal/controller/PermissionController.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":147,"status":"N"},{"authorDate":"2019-10-08 17:42:09","commitOrder":7,"curCode":"  public ResponseEntity<Void> assignAppRoleToUser(@PathVariable String appId, @PathVariable String roleType,\n                                                  @RequestBody String user) {\n    checkUserExists(user);\n    RequestPrecondition.checkArgumentsNotEmpty(user);\n\n    if (!RoleType.isValidRoleType(roleType)) {\n      throw new BadRequestException(\"role type is illegal\");\n    }\n    Set<String> assignedUsers = rolePermissionService.assignRoleToUsers(RoleUtils.buildAppRoleName(appId, roleType),\n        Sets.newHashSet(user), userInfoHolder.getUser().getUserId());\n    if (CollectionUtils.isEmpty(assignedUsers)) {\n      throw new BadRequestException(user + \" already authorized\");\n    }\n\n    return ResponseEntity.ok().build();\n  }\n","date":"2019-10-08 17:42:09","endLine":260,"groupId":"1057","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"assignAppRoleToUser","params":"(@PathVariableStringappId@@PathVariableStringroleType@@RequestBodyStringuser)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/2e/7e2366a1af29bb03f6181c9552b4e52594274e.src","preCode":"  public ResponseEntity<Void> assignAppRoleToUser(@PathVariable String appId, @PathVariable String roleType,\n                                                  @RequestBody String user) {\n    checkUserExists(user);\n    RequestPrecondition.checkArgumentsNotEmpty(user);\n\n    if (!RoleType.isValidRoleType(roleType)) {\n      throw new BadRequestException(\"role type is illegal\");\n    }\n    Set<String> assignedUsers = rolePermissionService.assignRoleToUsers(RoleUtils.buildAppRoleName(appId, roleType),\n        Sets.newHashSet(user), userInfoHolder.getUser().getUserId());\n    if (CollectionUtils.isEmpty(assignedUsers)) {\n      throw new BadRequestException(user + \"���������������������������\");\n    }\n\n    return ResponseEntity.ok().build();\n  }\n","realPath":"apollo-portal/src/main/java/com/ctrip/framework/apollo/portal/controller/PermissionController.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":245,"status":"M"}],"commitId":"437026f38f62baa569895f0c4c88a0b25c121dd4","commitMessage":"@@@add i18n support and English translations (#2641)\n\n* init i18n support\n\n* polish translations and fix some bugs introduced\n","date":"2019-10-08 17:42:09","modifiedFileCount":"13","status":"M","submitter":"Jason Song"},{"authorTime":"2019-10-09 08:39:02","codes":[{"authorDate":"2018-08-07 21:27:48","commitOrder":8,"curCode":"  public ResponseEntity<Void> removeNamespaceEnvRoleFromUser(@PathVariable String appId, @PathVariable String env, @PathVariable String namespaceName,\n                                                             @PathVariable String roleType, @RequestParam String user) {\n    RequestPrecondition.checkArgumentsNotEmpty(user);\n\n    if (!RoleType.isValidRoleType(roleType)) {\n      throw new BadRequestException(\"role type is illegal\");\n    }\n    \r\n    if (Env.UNKNOWN == EnvUtils.transformEnv(env)) {\n      throw new BadRequestException(\"env is illegal\");\n    }\n    rolePermissionService.removeRoleFromUsers(RoleUtils.buildNamespaceRoleName(appId, namespaceName, roleType, env),\n        Sets.newHashSet(user), userInfoHolder.getUser().getUserId());\n    return ResponseEntity.ok().build();\n  }\n","date":"2018-08-07 21:27:48","endLine":161,"groupId":"761","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"removeNamespaceEnvRoleFromUser","params":"(@PathVariableStringappId@@PathVariableStringenv@@PathVariableStringnamespaceName@@PathVariableStringroleType@@RequestParamStringuser)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/6c/29b417a8c27da2a89dc3166e164e0437da61d8.src","preCode":"  public ResponseEntity<Void> removeNamespaceEnvRoleFromUser(@PathVariable String appId, @PathVariable String env, @PathVariable String namespaceName,\n                                                             @PathVariable String roleType, @RequestParam String user) {\n    RequestPrecondition.checkArgumentsNotEmpty(user);\n\n    if (!RoleType.isValidRoleType(roleType)) {\n      throw new BadRequestException(\"role type is illegal\");\n    }\n    \r\n    if (Env.UNKNOWN == EnvUtils.transformEnv(env)) {\n      throw new BadRequestException(\"env is illegal\");\n    }\n    rolePermissionService.removeRoleFromUsers(RoleUtils.buildNamespaceRoleName(appId, namespaceName, roleType, env),\n        Sets.newHashSet(user), userInfoHolder.getUser().getUserId());\n    return ResponseEntity.ok().build();\n  }\n","realPath":"apollo-portal/src/main/java/com/ctrip/framework/apollo/portal/controller/PermissionController.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":147,"status":"N"},{"authorDate":"2019-10-09 08:39:02","commitOrder":8,"curCode":"  public ResponseEntity<Void> assignAppRoleToUser(@PathVariable String appId, @PathVariable String roleType,\n                                                  @RequestBody String user) {\n    checkUserExists(user);\n    RequestPrecondition.checkArgumentsNotEmpty(user);\n\n    if (!RoleType.isValidRoleType(roleType)) {\n      throw new BadRequestException(\"role type is illegal\");\n    }\n    Set<String> assignedUsers = rolePermissionService.assignRoleToUsers(RoleUtils.buildAppRoleName(appId, roleType),\n        Sets.newHashSet(user), userInfoHolder.getUser().getUserId());\n    if (CollectionUtils.isEmpty(assignedUsers)) {\n      throw new BadRequestException(user + \"���������������������������\");\n    }\n\n    return ResponseEntity.ok().build();\n  }\n","date":"2019-10-09 09:02:26","endLine":260,"groupId":"1057","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"assignAppRoleToUser","params":"(@PathVariableStringappId@@PathVariableStringroleType@@RequestBodyStringuser)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/3b/601fc4f395b7d7104c79bae707dd1f62859acc.src","preCode":"  public ResponseEntity<Void> assignAppRoleToUser(@PathVariable String appId, @PathVariable String roleType,\n                                                  @RequestBody String user) {\n    checkUserExists(user);\n    RequestPrecondition.checkArgumentsNotEmpty(user);\n\n    if (!RoleType.isValidRoleType(roleType)) {\n      throw new BadRequestException(\"role type is illegal\");\n    }\n    Set<String> assignedUsers = rolePermissionService.assignRoleToUsers(RoleUtils.buildAppRoleName(appId, roleType),\n        Sets.newHashSet(user), userInfoHolder.getUser().getUserId());\n    if (CollectionUtils.isEmpty(assignedUsers)) {\n      throw new BadRequestException(user + \" already authorized\");\n    }\n\n    return ResponseEntity.ok().build();\n  }\n","realPath":"apollo-portal/src/main/java/com/ctrip/framework/apollo/portal/controller/PermissionController.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":245,"status":"M"}],"commitId":"5cfdd0d14abb60af9df63bb3b8442d6bd0155854","commitMessage":"@@@Revert \"add i18n support and English translations (#2641)\"\n\nThis reverts commit 437026f38f62baa569895f0c4c88a0b25c121dd4.\n","date":"2019-10-09 09:02:26","modifiedFileCount":"13","status":"M","submitter":"nobodyiam"},{"authorTime":"2019-10-04 21:57:26","codes":[{"authorDate":"2018-08-07 21:27:48","commitOrder":9,"curCode":"  public ResponseEntity<Void> removeNamespaceEnvRoleFromUser(@PathVariable String appId, @PathVariable String env, @PathVariable String namespaceName,\n                                                             @PathVariable String roleType, @RequestParam String user) {\n    RequestPrecondition.checkArgumentsNotEmpty(user);\n\n    if (!RoleType.isValidRoleType(roleType)) {\n      throw new BadRequestException(\"role type is illegal\");\n    }\n    \r\n    if (Env.UNKNOWN == EnvUtils.transformEnv(env)) {\n      throw new BadRequestException(\"env is illegal\");\n    }\n    rolePermissionService.removeRoleFromUsers(RoleUtils.buildNamespaceRoleName(appId, namespaceName, roleType, env),\n        Sets.newHashSet(user), userInfoHolder.getUser().getUserId());\n    return ResponseEntity.ok().build();\n  }\n","date":"2018-08-07 21:27:48","endLine":161,"groupId":"761","id":9,"instanceNumber":1,"isCurCommit":0,"methodName":"removeNamespaceEnvRoleFromUser","params":"(@PathVariableStringappId@@PathVariableStringenv@@PathVariableStringnamespaceName@@PathVariableStringroleType@@RequestParamStringuser)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/6c/29b417a8c27da2a89dc3166e164e0437da61d8.src","preCode":"  public ResponseEntity<Void> removeNamespaceEnvRoleFromUser(@PathVariable String appId, @PathVariable String env, @PathVariable String namespaceName,\n                                                             @PathVariable String roleType, @RequestParam String user) {\n    RequestPrecondition.checkArgumentsNotEmpty(user);\n\n    if (!RoleType.isValidRoleType(roleType)) {\n      throw new BadRequestException(\"role type is illegal\");\n    }\n    \r\n    if (Env.UNKNOWN == EnvUtils.transformEnv(env)) {\n      throw new BadRequestException(\"env is illegal\");\n    }\n    rolePermissionService.removeRoleFromUsers(RoleUtils.buildNamespaceRoleName(appId, namespaceName, roleType, env),\n        Sets.newHashSet(user), userInfoHolder.getUser().getUserId());\n    return ResponseEntity.ok().build();\n  }\n","realPath":"apollo-portal/src/main/java/com/ctrip/framework/apollo/portal/controller/PermissionController.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":147,"status":"N"},{"authorDate":"2019-10-04 21:57:26","commitOrder":9,"curCode":"  public ResponseEntity<Void> assignAppRoleToUser(@PathVariable String appId, @PathVariable String roleType,\n                                                  @RequestBody String user) {\n    checkUserExists(user);\n    RequestPrecondition.checkArgumentsNotEmpty(user);\n\n    if (!RoleType.isValidRoleType(roleType)) {\n      throw new BadRequestException(\"role type is illegal\");\n    }\n    Set<String> assignedUsers = rolePermissionService.assignRoleToUsers(RoleUtils.buildAppRoleName(appId, roleType),\n        Sets.newHashSet(user), userInfoHolder.getUser().getUserId());\n    if (CollectionUtils.isEmpty(assignedUsers)) {\n      throw new BadRequestException(user + \" already authorized\");\n    }\n\n    return ResponseEntity.ok().build();\n  }\n","date":"2019-10-09 09:02:26","endLine":260,"groupId":"1057","id":10,"instanceNumber":2,"isCurCommit":0,"methodName":"assignAppRoleToUser","params":"(@PathVariableStringappId@@PathVariableStringroleType@@RequestBodyStringuser)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/2e/7e2366a1af29bb03f6181c9552b4e52594274e.src","preCode":"  public ResponseEntity<Void> assignAppRoleToUser(@PathVariable String appId, @PathVariable String roleType,\n                                                  @RequestBody String user) {\n    checkUserExists(user);\n    RequestPrecondition.checkArgumentsNotEmpty(user);\n\n    if (!RoleType.isValidRoleType(roleType)) {\n      throw new BadRequestException(\"role type is illegal\");\n    }\n    Set<String> assignedUsers = rolePermissionService.assignRoleToUsers(RoleUtils.buildAppRoleName(appId, roleType),\n        Sets.newHashSet(user), userInfoHolder.getUser().getUserId());\n    if (CollectionUtils.isEmpty(assignedUsers)) {\n      throw new BadRequestException(user + \"���������������������������\");\n    }\n\n    return ResponseEntity.ok().build();\n  }\n","realPath":"apollo-portal/src/main/java/com/ctrip/framework/apollo/portal/controller/PermissionController.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":245,"status":"M"}],"commitId":"59d92f6b620abe2288735905ad23e091dd373236","commitMessage":"@@@polish translations and fix some bugs introduced\n","date":"2019-10-09 09:02:26","modifiedFileCount":"12","status":"M","submitter":"Jason Song"},{"authorTime":"2019-10-04 21:57:26","codes":[{"authorDate":"2020-01-05 17:23:02","commitOrder":10,"curCode":"  public ResponseEntity<Void> removeNamespaceEnvRoleFromUser(@PathVariable String appId, @PathVariable String env, @PathVariable String namespaceName,\n                                                             @PathVariable String roleType, @RequestParam String user) {\n    RequestPrecondition.checkArgumentsNotEmpty(user);\n\n    if (!RoleType.isValidRoleType(roleType)) {\n      throw new BadRequestException(\"role type is illegal\");\n    }\n    \r\n    if (Env.UNKNOWN == Env.transformEnv(env)) {\n      throw new BadRequestException(\"env is illegal\");\n    }\n    rolePermissionService.removeRoleFromUsers(RoleUtils.buildNamespaceRoleName(appId, namespaceName, roleType, env),\n        Sets.newHashSet(user), userInfoHolder.getUser().getUserId());\n    return ResponseEntity.ok().build();\n  }\n","date":"2020-01-05 17:23:02","endLine":174,"groupId":"10175","id":11,"instanceNumber":1,"isCurCommit":0,"methodName":"removeNamespaceEnvRoleFromUser","params":"(@PathVariableStringappId@@PathVariableStringenv@@PathVariableStringnamespaceName@@PathVariableStringroleType@@RequestParamStringuser)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/c6/a3cbacc8eb60091b7fb58267fbfcb2e68027e7.src","preCode":"  public ResponseEntity<Void> removeNamespaceEnvRoleFromUser(@PathVariable String appId, @PathVariable String env, @PathVariable String namespaceName,\n                                                             @PathVariable String roleType, @RequestParam String user) {\n    RequestPrecondition.checkArgumentsNotEmpty(user);\n\n    if (!RoleType.isValidRoleType(roleType)) {\n      throw new BadRequestException(\"role type is illegal\");\n    }\n    \r\n    if (Env.UNKNOWN == EnvUtils.transformEnv(env)) {\n      throw new BadRequestException(\"env is illegal\");\n    }\n    rolePermissionService.removeRoleFromUsers(RoleUtils.buildNamespaceRoleName(appId, namespaceName, roleType, env),\n        Sets.newHashSet(user), userInfoHolder.getUser().getUserId());\n    return ResponseEntity.ok().build();\n  }\n","realPath":"apollo-portal/src/main/java/com/ctrip/framework/apollo/portal/controller/PermissionController.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":160,"status":"M"},{"authorDate":"2019-10-04 21:57:26","commitOrder":10,"curCode":"  public ResponseEntity<Void> assignAppRoleToUser(@PathVariable String appId, @PathVariable String roleType,\n                                                  @RequestBody String user) {\n    checkUserExists(user);\n    RequestPrecondition.checkArgumentsNotEmpty(user);\n\n    if (!RoleType.isValidRoleType(roleType)) {\n      throw new BadRequestException(\"role type is illegal\");\n    }\n    Set<String> assignedUsers = rolePermissionService.assignRoleToUsers(RoleUtils.buildAppRoleName(appId, roleType),\n        Sets.newHashSet(user), userInfoHolder.getUser().getUserId());\n    if (CollectionUtils.isEmpty(assignedUsers)) {\n      throw new BadRequestException(user + \" already authorized\");\n    }\n\n    return ResponseEntity.ok().build();\n  }\n","date":"2019-10-09 09:02:26","endLine":260,"groupId":"10175","id":12,"instanceNumber":2,"isCurCommit":0,"methodName":"assignAppRoleToUser","params":"(@PathVariableStringappId@@PathVariableStringroleType@@RequestBodyStringuser)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-apollo-10-0.7/blobInfo/CC_OUT/blobs/2e/7e2366a1af29bb03f6181c9552b4e52594274e.src","preCode":"  public ResponseEntity<Void> assignAppRoleToUser(@PathVariable String appId, @PathVariable String roleType,\n                                                  @RequestBody String user) {\n    checkUserExists(user);\n    RequestPrecondition.checkArgumentsNotEmpty(user);\n\n    if (!RoleType.isValidRoleType(roleType)) {\n      throw new BadRequestException(\"role type is illegal\");\n    }\n    Set<String> assignedUsers = rolePermissionService.assignRoleToUsers(RoleUtils.buildAppRoleName(appId, roleType),\n        Sets.newHashSet(user), userInfoHolder.getUser().getUserId());\n    if (CollectionUtils.isEmpty(assignedUsers)) {\n      throw new BadRequestException(user + \" already authorized\");\n    }\n\n    return ResponseEntity.ok().build();\n  }\n","realPath":"apollo-portal/src/main/java/com/ctrip/framework/apollo/portal/controller/PermissionController.java","repoName":"apollo","snippetEndLine":0,"snippetStartLine":0,"startLine":245,"status":"N"}],"commitId":"42edb9da963df986538edcda4ff58d474fb3abed","commitMessage":"@@@Dynamic environment for apollo-portal (#2867)\n\n\n","date":"2020-01-05 17:23:02","modifiedFileCount":"63","status":"M","submitter":"Anilople"}]
