[{"authorTime":"2019-12-12 00:37:59","codes":[{"authorDate":"2020-03-06 16:56:22","commitOrder":20,"curCode":"\tpublic JobExecutionResult execute(StreamGraph streamGraph) throws Exception {\n\t\tJobClient jobClient = executeAsync(streamGraph);\n\n\t\tJobExecutionResult jobExecutionResult;\n\t\tif (getConfiguration().getBoolean(DeploymentOptions.ATTACHED)) {\n\t\t\tCompletableFuture<JobExecutionResult> jobExecutionResultFuture =\n\t\t\t\t\tjobClient.getJobExecutionResult(getUserClassloader());\n\n\t\t\tif (getConfiguration().getBoolean(DeploymentOptions.SHUTDOWN_IF_ATTACHED)) {\n\t\t\t\tThread shutdownHook = ShutdownHookUtil.addShutdownHook(\n\t\t\t\t\t\t() -> {\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tjobClient.cancel().get(1, TimeUnit.SECONDS);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tStreamContextEnvironment.class.getSimpleName(),\n\t\t\t\t\t\tLOG);\n\t\t\t\tjobExecutionResultFuture.whenComplete((ignored, throwable) ->\n\t\t\t\t\t\tShutdownHookUtil.removeShutdownHook(\n\t\t\t\t\t\t\tshutdownHook, StreamContextEnvironment.class.getSimpleName(), LOG));\n\t\t\t}\n\n\t\t\tjobExecutionResult = jobExecutionResultFuture.get();\n\t\t\tSystem.out.println(jobExecutionResult);\n\t\t} else {\n\t\t\tjobExecutionResult = new DetachedJobExecutionResult(jobClient.getJobID());\n\t\t}\n\n\t\treturn jobExecutionResult;\n\t}\n","date":"2020-03-12 22:31:20","endLine":86,"groupId":"9851","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"execute","params":"(StreamGraphstreamGraph)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/17/78202cd90da2d22a59752895e3a4aac0e0a2f8.src","preCode":"\tpublic JobExecutionResult execute(StreamGraph streamGraph) throws Exception {\n\t\tJobClient jobClient = executeAsync(streamGraph);\n\n\t\tJobExecutionResult jobExecutionResult;\n\t\tif (getConfiguration().getBoolean(DeploymentOptions.ATTACHED)) {\n\t\t\tCompletableFuture<JobExecutionResult> jobExecutionResultFuture =\n\t\t\t\t\tjobClient.getJobExecutionResult(getUserClassloader());\n\n\t\t\tif (getConfiguration().getBoolean(DeploymentOptions.SHUTDOWN_IF_ATTACHED)) {\n\t\t\t\tThread shutdownHook = ShutdownHookUtil.addShutdownHook(\n\t\t\t\t\t\t() -> {\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tjobClient.cancel().get(1, TimeUnit.SECONDS);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tStreamContextEnvironment.class.getSimpleName(),\n\t\t\t\t\t\tLOG);\n\t\t\t\tjobExecutionResultFuture.whenComplete((ignored, throwable) ->\n\t\t\t\t\t\tShutdownHookUtil.removeShutdownHook(\n\t\t\t\t\t\t\tshutdownHook, StreamContextEnvironment.class.getSimpleName(), LOG));\n\t\t\t}\n\n\t\t\tjobExecutionResult = jobExecutionResultFuture.get();\n\t\t\tSystem.out.println(jobExecutionResult);\n\t\t} else {\n\t\t\tjobExecutionResult = new DetachedJobExecutionResult(jobClient.getJobID());\n\t\t}\n\n\t\treturn jobExecutionResult;\n\t}\n","realPath":"flink-clients/src/main/java/org/apache/flink/client/program/StreamContextEnvironment.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":57,"status":"B"},{"authorDate":"2019-12-12 00:37:59","commitOrder":20,"curCode":"\tpublic JobExecutionResult execute(String jobName) throws Exception {\n\t\tJobClient jobClient = executeAsync(jobName);\n\n\t\tJobExecutionResult jobExecutionResult;\n\t\tif (getConfiguration().getBoolean(DeploymentOptions.ATTACHED)) {\n\t\t\tCompletableFuture<JobExecutionResult> jobExecutionResultFuture =\n\t\t\t\t\tjobClient.getJobExecutionResult(getUserCodeClassLoader());\n\n\t\t\tif (getConfiguration().getBoolean(DeploymentOptions.SHUTDOWN_IF_ATTACHED)) {\n\t\t\t\tThread shutdownHook = ShutdownHookUtil.addShutdownHook(\n\t\t\t\t\t\t() -> {\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tjobClient.cancel().get(1, TimeUnit.SECONDS);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tContextEnvironment.class.getSimpleName(),\n\t\t\t\t\t\tLOG);\n\t\t\t\tjobExecutionResultFuture.whenComplete((ignored, throwable) ->\n\t\t\t\t\t\tShutdownHookUtil.removeShutdownHook(shutdownHook, ContextEnvironment.class.getSimpleName(), LOG));\n\t\t\t}\n\n\t\t\tjobExecutionResult = jobExecutionResultFuture.get();\n\t\t\tSystem.out.println(jobExecutionResult);\n\t\t} else {\n\t\t\tjobExecutionResult = new DetachedJobExecutionResult(jobClient.getJobID());\n\t\t}\n\n\t\treturn jobExecutionResult;\n\t}\n","date":"2019-12-17 18:34:31","endLine":86,"groupId":"9851","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"execute","params":"(StringjobName)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/4c/816d9351aa69fecad12af5f3a83666ee4072ae.src","preCode":"\tpublic JobExecutionResult execute(String jobName) throws Exception {\n\t\tJobClient jobClient = executeAsync(jobName);\n\n\t\tJobExecutionResult jobExecutionResult;\n\t\tif (getConfiguration().getBoolean(DeploymentOptions.ATTACHED)) {\n\t\t\tCompletableFuture<JobExecutionResult> jobExecutionResultFuture =\n\t\t\t\t\tjobClient.getJobExecutionResult(getUserCodeClassLoader());\n\n\t\t\tif (getConfiguration().getBoolean(DeploymentOptions.SHUTDOWN_IF_ATTACHED)) {\n\t\t\t\tThread shutdownHook = ShutdownHookUtil.addShutdownHook(\n\t\t\t\t\t\t() -> {\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tjobClient.cancel().get(1, TimeUnit.SECONDS);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tContextEnvironment.class.getSimpleName(),\n\t\t\t\t\t\tLOG);\n\t\t\t\tjobExecutionResultFuture.whenComplete((ignored, throwable) ->\n\t\t\t\t\t\tShutdownHookUtil.removeShutdownHook(shutdownHook, ContextEnvironment.class.getSimpleName(), LOG));\n\t\t\t}\n\n\t\t\tjobExecutionResult = jobExecutionResultFuture.get();\n\t\t\tSystem.out.println(jobExecutionResult);\n\t\t} else {\n\t\t\tjobExecutionResult = new DetachedJobExecutionResult(jobClient.getJobID());\n\t\t}\n\n\t\treturn jobExecutionResult;\n\t}\n","realPath":"flink-clients/src/main/java/org/apache/flink/client/program/ContextEnvironment.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":58,"status":"NB"}],"commitId":"0523ef6451a93da450c6bdf5dd4757c3702f3962","commitMessage":"@@@[FLINK-15090][api] Reverse the dependency from flink-streaming-java to flink-clients\n\nThis closes #10526 .\n","date":"2020-03-12 22:31:20","modifiedFileCount":"9","status":"M","submitter":"tison"},{"authorTime":"2020-05-26 16:44:13","codes":[{"authorDate":"2020-05-26 16:44:13","commitOrder":21,"curCode":"\tpublic JobExecutionResult execute(StreamGraph streamGraph) throws Exception {\n\t\tfinal JobClient jobClient = executeAsync(streamGraph);\n\t\tfinal List<JobListener> jobListeners = getJobListeners();\n\n\t\ttry {\n\t\t\tfinal JobExecutionResult  jobExecutionResult = getJobExecutionResult(jobClient);\n\t\t\tjobListeners.forEach(jobListener ->\n\t\t\t\t\tjobListener.onJobExecuted(jobExecutionResult, null));\n\t\t\treturn jobExecutionResult;\n\t\t} catch (Throwable t) {\n\t\t\tjobListeners.forEach(jobListener ->\n\t\t\t\t\tjobListener.onJobExecuted(null, ExceptionUtils.stripExecutionException(t)));\n\t\t\tExceptionUtils.rethrowException(t);\n\n\t\t\t\r\n\t\t\treturn null;\n\t\t}\n\t}\n","date":"2020-05-29 03:39:00","endLine":92,"groupId":"101838","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"execute","params":"(StreamGraphstreamGraph)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/ec/81d8369fb911772a483af9782b2d54c1a23ff2.src","preCode":"\tpublic JobExecutionResult execute(StreamGraph streamGraph) throws Exception {\n\t\tJobClient jobClient = executeAsync(streamGraph);\n\n\t\tJobExecutionResult jobExecutionResult;\n\t\tif (getConfiguration().getBoolean(DeploymentOptions.ATTACHED)) {\n\t\t\tCompletableFuture<JobExecutionResult> jobExecutionResultFuture =\n\t\t\t\t\tjobClient.getJobExecutionResult(getUserClassloader());\n\n\t\t\tif (getConfiguration().getBoolean(DeploymentOptions.SHUTDOWN_IF_ATTACHED)) {\n\t\t\t\tThread shutdownHook = ShutdownHookUtil.addShutdownHook(\n\t\t\t\t\t\t() -> {\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tjobClient.cancel().get(1, TimeUnit.SECONDS);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tStreamContextEnvironment.class.getSimpleName(),\n\t\t\t\t\t\tLOG);\n\t\t\t\tjobExecutionResultFuture.whenComplete((ignored, throwable) ->\n\t\t\t\t\t\tShutdownHookUtil.removeShutdownHook(\n\t\t\t\t\t\t\tshutdownHook, StreamContextEnvironment.class.getSimpleName(), LOG));\n\t\t\t}\n\n\t\t\tjobExecutionResult = jobExecutionResultFuture.get();\n\t\t\tSystem.out.println(jobExecutionResult);\n\t\t} else {\n\t\t\tjobExecutionResult = new DetachedJobExecutionResult(jobClient.getJobID());\n\t\t}\n\n\t\treturn jobExecutionResult;\n\t}\n","realPath":"flink-clients/src/main/java/org/apache/flink/client/program/StreamContextEnvironment.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":75,"status":"M"},{"authorDate":"2020-05-26 16:44:13","commitOrder":21,"curCode":"\tpublic JobExecutionResult execute(String jobName) throws Exception {\n\t\tfinal JobClient jobClient = executeAsync(jobName);\n\t\tfinal List<JobListener> jobListeners = getJobListeners();\n\n\t\ttry {\n\t\t\tfinal JobExecutionResult  jobExecutionResult = getJobExecutionResult(jobClient);\n\t\t\tjobListeners.forEach(jobListener ->\n\t\t\t\t\tjobListener.onJobExecuted(jobExecutionResult, null));\n\t\t\treturn jobExecutionResult;\n\t\t} catch (Throwable t) {\n\t\t\tjobListeners.forEach(jobListener ->\n\t\t\t\t\tjobListener.onJobExecuted(null, ExceptionUtils.stripExecutionException(t)));\n\t\t\tExceptionUtils.rethrowException(t);\n\n\t\t\t\r\n\t\t\treturn null;\n\t\t}\n\t}\n","date":"2020-05-29 03:39:00","endLine":88,"groupId":"101838","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"execute","params":"(StringjobName)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/f7/e515ba12302cbe35faa3a91dc7f1bfb003ae46.src","preCode":"\tpublic JobExecutionResult execute(String jobName) throws Exception {\n\t\tJobClient jobClient = executeAsync(jobName);\n\n\t\tJobExecutionResult jobExecutionResult;\n\t\tif (getConfiguration().getBoolean(DeploymentOptions.ATTACHED)) {\n\t\t\tCompletableFuture<JobExecutionResult> jobExecutionResultFuture =\n\t\t\t\t\tjobClient.getJobExecutionResult(getUserCodeClassLoader());\n\n\t\t\tif (getConfiguration().getBoolean(DeploymentOptions.SHUTDOWN_IF_ATTACHED)) {\n\t\t\t\tThread shutdownHook = ShutdownHookUtil.addShutdownHook(\n\t\t\t\t\t\t() -> {\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tjobClient.cancel().get(1, TimeUnit.SECONDS);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tContextEnvironment.class.getSimpleName(),\n\t\t\t\t\t\tLOG);\n\t\t\t\tjobExecutionResultFuture.whenComplete((ignored, throwable) ->\n\t\t\t\t\t\tShutdownHookUtil.removeShutdownHook(shutdownHook, ContextEnvironment.class.getSimpleName(), LOG));\n\t\t\t}\n\n\t\t\tjobExecutionResult = jobExecutionResultFuture.get();\n\t\t\tSystem.out.println(jobExecutionResult);\n\t\t} else {\n\t\t\tjobExecutionResult = new DetachedJobExecutionResult(jobClient.getJobID());\n\t\t}\n\n\t\treturn jobExecutionResult;\n\t}\n","realPath":"flink-clients/src/main/java/org/apache/flink/client/program/ContextEnvironment.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":71,"status":"M"}],"commitId":"7dcfd90dd42648133bb7c1216740f47fffe89c13","commitMessage":"@@@[FLINK-17744] Make (Stream)ContextEnvironment#execute call JobListener#onJobExecuted\n\nThis closes #12339.\n","date":"2020-05-29 03:39:00","modifiedFileCount":"3","status":"M","submitter":"Echo Lee"}]
