[{"authorTime":"2021-06-08 11:57:52","codes":[{"authorDate":"2021-06-08 11:57:52","commitOrder":1,"curCode":"    public void testCurrentOffsetTracking() {\n        MetricListener metricListener = new MetricListener();\n\n        final KafkaSourceReaderMetrics kafkaSourceReaderMetrics =\n                new KafkaSourceReaderMetrics(metricListener.getMetricGroup());\n\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_1);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_1);\n\n        kafkaSourceReaderMetrics.recordCurrentOffset(FOO_0, 15213L);\n        kafkaSourceReaderMetrics.recordCurrentOffset(FOO_1, 18213L);\n        kafkaSourceReaderMetrics.recordCurrentOffset(BAR_0, 18613L);\n        kafkaSourceReaderMetrics.recordCurrentOffset(BAR_1, 15513L);\n\n        assertCurrentOffset(FOO_0, 15213L, metricListener);\n        assertCurrentOffset(FOO_1, 18213L, metricListener);\n        assertCurrentOffset(BAR_0, 18613L, metricListener);\n        assertCurrentOffset(BAR_1, 15513L, metricListener);\n    }\n","date":"2021-07-05 16:38:54","endLine":61,"groupId":"43412","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testCurrentOffsetTracking","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/b1/6a835d3ebc5b71ccb05ceea36617390bc0b225.src","preCode":"    public void testCurrentOffsetTracking() {\n        MetricListener metricListener = new MetricListener();\n\n        final KafkaSourceReaderMetrics kafkaSourceReaderMetrics =\n                new KafkaSourceReaderMetrics(metricListener.getMetricGroup());\n\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_1);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_1);\n\n        kafkaSourceReaderMetrics.recordCurrentOffset(FOO_0, 15213L);\n        kafkaSourceReaderMetrics.recordCurrentOffset(FOO_1, 18213L);\n        kafkaSourceReaderMetrics.recordCurrentOffset(BAR_0, 18613L);\n        kafkaSourceReaderMetrics.recordCurrentOffset(BAR_1, 15513L);\n\n        assertCurrentOffset(FOO_0, 15213L, metricListener);\n        assertCurrentOffset(FOO_1, 18213L, metricListener);\n        assertCurrentOffset(BAR_0, 18613L, metricListener);\n        assertCurrentOffset(BAR_1, 15513L, metricListener);\n    }\n","realPath":"flink-connectors/flink-connector-kafka/src/test/java/org/apache/flink/connector/kafka/source/metrics/KafkaSourceReaderMetricsTest.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":41,"status":"B"},{"authorDate":"2021-06-08 11:57:52","commitOrder":1,"curCode":"    public void testCommitOffsetTracking() {\n        MetricListener metricListener = new MetricListener();\n\n        final KafkaSourceReaderMetrics kafkaSourceReaderMetrics =\n                new KafkaSourceReaderMetrics(metricListener.getMetricGroup());\n\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_1);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_1);\n\n        kafkaSourceReaderMetrics.recordCommittedOffset(FOO_0, 15213L);\n        kafkaSourceReaderMetrics.recordCommittedOffset(FOO_1, 18213L);\n        kafkaSourceReaderMetrics.recordCommittedOffset(BAR_0, 18613L);\n        kafkaSourceReaderMetrics.recordCommittedOffset(BAR_1, 15513L);\n\n        assertCommittedOffset(FOO_0, 15213L, metricListener);\n        assertCommittedOffset(FOO_1, 18213L, metricListener);\n        assertCommittedOffset(BAR_0, 18613L, metricListener);\n        assertCommittedOffset(BAR_1, 15513L, metricListener);\n\n        assertEquals(\n                4L,\n                metricListener\n                        .getCounter(\n                                KafkaSourceReaderMetrics.KAFKA_SOURCE_READER_METRIC_GROUP,\n                                KafkaSourceReaderMetrics.COMMITS_SUCCEEDED_METRIC_COUNTER)\n                        .getCount());\n    }\n","date":"2021-07-05 16:38:54","endLine":92,"groupId":"43412","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testCommitOffsetTracking","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/b1/6a835d3ebc5b71ccb05ceea36617390bc0b225.src","preCode":"    public void testCommitOffsetTracking() {\n        MetricListener metricListener = new MetricListener();\n\n        final KafkaSourceReaderMetrics kafkaSourceReaderMetrics =\n                new KafkaSourceReaderMetrics(metricListener.getMetricGroup());\n\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_1);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_1);\n\n        kafkaSourceReaderMetrics.recordCommittedOffset(FOO_0, 15213L);\n        kafkaSourceReaderMetrics.recordCommittedOffset(FOO_1, 18213L);\n        kafkaSourceReaderMetrics.recordCommittedOffset(BAR_0, 18613L);\n        kafkaSourceReaderMetrics.recordCommittedOffset(BAR_1, 15513L);\n\n        assertCommittedOffset(FOO_0, 15213L, metricListener);\n        assertCommittedOffset(FOO_1, 18213L, metricListener);\n        assertCommittedOffset(BAR_0, 18613L, metricListener);\n        assertCommittedOffset(BAR_1, 15513L, metricListener);\n\n        assertEquals(\n                4L,\n                metricListener\n                        .getCounter(\n                                KafkaSourceReaderMetrics.KAFKA_SOURCE_READER_METRIC_GROUP,\n                                KafkaSourceReaderMetrics.COMMITS_SUCCEEDED_METRIC_COUNTER)\n                        .getCount());\n    }\n","realPath":"flink-connectors/flink-connector-kafka/src/test/java/org/apache/flink/connector/kafka/source/metrics/KafkaSourceReaderMetricsTest.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":64,"status":"B"}],"commitId":"b094a932845db5539fc07b032d49d0bcefd15df2","commitMessage":"@@@[FLINK-22766][connector/kafka] Report offsets and Kafka consumer metrics in Flink metric group\n","date":"2021-07-05 16:38:54","modifiedFileCount":"7","status":"B","submitter":"Qingsheng Ren"},{"authorTime":"2021-08-14 19:03:24","codes":[{"authorDate":"2021-06-08 11:57:52","commitOrder":2,"curCode":"    public void testCurrentOffsetTracking() {\n        MetricListener metricListener = new MetricListener();\n\n        final KafkaSourceReaderMetrics kafkaSourceReaderMetrics =\n                new KafkaSourceReaderMetrics(metricListener.getMetricGroup());\n\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_1);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_1);\n\n        kafkaSourceReaderMetrics.recordCurrentOffset(FOO_0, 15213L);\n        kafkaSourceReaderMetrics.recordCurrentOffset(FOO_1, 18213L);\n        kafkaSourceReaderMetrics.recordCurrentOffset(BAR_0, 18613L);\n        kafkaSourceReaderMetrics.recordCurrentOffset(BAR_1, 15513L);\n\n        assertCurrentOffset(FOO_0, 15213L, metricListener);\n        assertCurrentOffset(FOO_1, 18213L, metricListener);\n        assertCurrentOffset(BAR_0, 18613L, metricListener);\n        assertCurrentOffset(BAR_1, 15513L, metricListener);\n    }\n","date":"2021-07-05 16:38:54","endLine":61,"groupId":"43412","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testCurrentOffsetTracking","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/b1/6a835d3ebc5b71ccb05ceea36617390bc0b225.src","preCode":"    public void testCurrentOffsetTracking() {\n        MetricListener metricListener = new MetricListener();\n\n        final KafkaSourceReaderMetrics kafkaSourceReaderMetrics =\n                new KafkaSourceReaderMetrics(metricListener.getMetricGroup());\n\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_1);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_1);\n\n        kafkaSourceReaderMetrics.recordCurrentOffset(FOO_0, 15213L);\n        kafkaSourceReaderMetrics.recordCurrentOffset(FOO_1, 18213L);\n        kafkaSourceReaderMetrics.recordCurrentOffset(BAR_0, 18613L);\n        kafkaSourceReaderMetrics.recordCurrentOffset(BAR_1, 15513L);\n\n        assertCurrentOffset(FOO_0, 15213L, metricListener);\n        assertCurrentOffset(FOO_1, 18213L, metricListener);\n        assertCurrentOffset(BAR_0, 18613L, metricListener);\n        assertCurrentOffset(BAR_1, 15513L, metricListener);\n    }\n","realPath":"flink-connectors/flink-connector-kafka/src/test/java/org/apache/flink/connector/kafka/source/metrics/KafkaSourceReaderMetricsTest.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":41,"status":"N"},{"authorDate":"2021-08-14 19:03:24","commitOrder":2,"curCode":"    public void testCommitOffsetTracking() {\n        MetricListener metricListener = new MetricListener();\n\n        final KafkaSourceReaderMetrics kafkaSourceReaderMetrics =\n                new KafkaSourceReaderMetrics(metricListener.getMetricGroup());\n\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_1);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_1);\n\n        kafkaSourceReaderMetrics.recordCommittedOffset(FOO_0, 15213L);\n        kafkaSourceReaderMetrics.recordCommittedOffset(FOO_1, 18213L);\n        kafkaSourceReaderMetrics.recordCommittedOffset(BAR_0, 18613L);\n        kafkaSourceReaderMetrics.recordCommittedOffset(BAR_1, 15513L);\n\n        assertCommittedOffset(FOO_0, 15213L, metricListener);\n        assertCommittedOffset(FOO_1, 18213L, metricListener);\n        assertCommittedOffset(BAR_0, 18613L, metricListener);\n        assertCommittedOffset(BAR_1, 15513L, metricListener);\n\n        assertEquals(\n                0L,\n                metricListener\n                        .getCounter(\n                                KafkaSourceReaderMetrics.KAFKA_SOURCE_READER_METRIC_GROUP,\n                                KafkaSourceReaderMetrics.COMMITS_SUCCEEDED_METRIC_COUNTER)\n                        .getCount());\n\n        kafkaSourceReaderMetrics.recordSucceededCommit();\n\n        assertEquals(\n                1L,\n                metricListener\n                        .getCounter(\n                                KafkaSourceReaderMetrics.KAFKA_SOURCE_READER_METRIC_GROUP,\n                                KafkaSourceReaderMetrics.COMMITS_SUCCEEDED_METRIC_COUNTER)\n                        .getCount());\n    }\n","date":"2021-08-18 15:38:56","endLine":102,"groupId":"43412","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testCommitOffsetTracking","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/c7/df9b6ef3593fd43249f2525ef1b5e708bc44f5.src","preCode":"    public void testCommitOffsetTracking() {\n        MetricListener metricListener = new MetricListener();\n\n        final KafkaSourceReaderMetrics kafkaSourceReaderMetrics =\n                new KafkaSourceReaderMetrics(metricListener.getMetricGroup());\n\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_1);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_1);\n\n        kafkaSourceReaderMetrics.recordCommittedOffset(FOO_0, 15213L);\n        kafkaSourceReaderMetrics.recordCommittedOffset(FOO_1, 18213L);\n        kafkaSourceReaderMetrics.recordCommittedOffset(BAR_0, 18613L);\n        kafkaSourceReaderMetrics.recordCommittedOffset(BAR_1, 15513L);\n\n        assertCommittedOffset(FOO_0, 15213L, metricListener);\n        assertCommittedOffset(FOO_1, 18213L, metricListener);\n        assertCommittedOffset(BAR_0, 18613L, metricListener);\n        assertCommittedOffset(BAR_1, 15513L, metricListener);\n\n        assertEquals(\n                4L,\n                metricListener\n                        .getCounter(\n                                KafkaSourceReaderMetrics.KAFKA_SOURCE_READER_METRIC_GROUP,\n                                KafkaSourceReaderMetrics.COMMITS_SUCCEEDED_METRIC_COUNTER)\n                        .getCount());\n    }\n","realPath":"flink-connectors/flink-connector-kafka/src/test/java/org/apache/flink/connector/kafka/source/metrics/KafkaSourceReaderMetricsTest.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":64,"status":"M"}],"commitId":"62931a1665e6a6976d088ed49375f9fdf00229d9","commitMessage":"@@@[FLINK-23686][connector/kafka] Increase counter \"commitsSucceeded\" per commit instead of per partition\n","date":"2021-08-18 15:38:56","modifiedFileCount":"4","status":"M","submitter":"Qingsheng Ren"},{"authorTime":"2021-08-19 23:16:56","codes":[{"authorDate":"2021-06-08 11:57:52","commitOrder":3,"curCode":"    public void testCurrentOffsetTracking() {\n        MetricListener metricListener = new MetricListener();\n\n        final KafkaSourceReaderMetrics kafkaSourceReaderMetrics =\n                new KafkaSourceReaderMetrics(metricListener.getMetricGroup());\n\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_1);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_1);\n\n        kafkaSourceReaderMetrics.recordCurrentOffset(FOO_0, 15213L);\n        kafkaSourceReaderMetrics.recordCurrentOffset(FOO_1, 18213L);\n        kafkaSourceReaderMetrics.recordCurrentOffset(BAR_0, 18613L);\n        kafkaSourceReaderMetrics.recordCurrentOffset(BAR_1, 15513L);\n\n        assertCurrentOffset(FOO_0, 15213L, metricListener);\n        assertCurrentOffset(FOO_1, 18213L, metricListener);\n        assertCurrentOffset(BAR_0, 18613L, metricListener);\n        assertCurrentOffset(BAR_1, 15513L, metricListener);\n    }\n","date":"2021-07-05 16:38:54","endLine":61,"groupId":"43412","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"testCurrentOffsetTracking","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/b1/6a835d3ebc5b71ccb05ceea36617390bc0b225.src","preCode":"    public void testCurrentOffsetTracking() {\n        MetricListener metricListener = new MetricListener();\n\n        final KafkaSourceReaderMetrics kafkaSourceReaderMetrics =\n                new KafkaSourceReaderMetrics(metricListener.getMetricGroup());\n\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_1);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_1);\n\n        kafkaSourceReaderMetrics.recordCurrentOffset(FOO_0, 15213L);\n        kafkaSourceReaderMetrics.recordCurrentOffset(FOO_1, 18213L);\n        kafkaSourceReaderMetrics.recordCurrentOffset(BAR_0, 18613L);\n        kafkaSourceReaderMetrics.recordCurrentOffset(BAR_1, 15513L);\n\n        assertCurrentOffset(FOO_0, 15213L, metricListener);\n        assertCurrentOffset(FOO_1, 18213L, metricListener);\n        assertCurrentOffset(BAR_0, 18613L, metricListener);\n        assertCurrentOffset(BAR_1, 15513L, metricListener);\n    }\n","realPath":"flink-connectors/flink-connector-kafka/src/test/java/org/apache/flink/connector/kafka/source/metrics/KafkaSourceReaderMetricsTest.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":41,"status":"N"},{"authorDate":"2021-08-19 23:16:56","commitOrder":3,"curCode":"    public void testCommitOffsetTracking() {\n        MetricListener metricListener = new MetricListener();\n\n        final KafkaSourceReaderMetrics kafkaSourceReaderMetrics =\n                new KafkaSourceReaderMetrics(metricListener.getMetricGroup());\n\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_1);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_1);\n\n        kafkaSourceReaderMetrics.recordCommittedOffset(FOO_0, 15213L);\n        kafkaSourceReaderMetrics.recordCommittedOffset(FOO_1, 18213L);\n        kafkaSourceReaderMetrics.recordCommittedOffset(BAR_0, 18613L);\n        kafkaSourceReaderMetrics.recordCommittedOffset(BAR_1, 15513L);\n\n        assertCommittedOffset(FOO_0, 15213L, metricListener);\n        assertCommittedOffset(FOO_1, 18213L, metricListener);\n        assertCommittedOffset(BAR_0, 18613L, metricListener);\n        assertCommittedOffset(BAR_1, 15513L, metricListener);\n\n        final Optional<Counter> commitsSucceededCounter =\n                metricListener.getCounter(\n                        KafkaSourceReaderMetrics.KAFKA_SOURCE_READER_METRIC_GROUP,\n                        KafkaSourceReaderMetrics.COMMITS_SUCCEEDED_METRIC_COUNTER);\n        assertTrue(commitsSucceededCounter.isPresent());\n        assertEquals(0L, commitsSucceededCounter.get().getCount());\n\n        kafkaSourceReaderMetrics.recordSucceededCommit();\n\n        assertEquals(1L, commitsSucceededCounter.get().getCount());\n    }\n","date":"2021-08-21 03:47:07","endLine":99,"groupId":"43412","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"testCommitOffsetTracking","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/e4/3a3e9a5ce19b99517f91044cba7b25126ab84e.src","preCode":"    public void testCommitOffsetTracking() {\n        MetricListener metricListener = new MetricListener();\n\n        final KafkaSourceReaderMetrics kafkaSourceReaderMetrics =\n                new KafkaSourceReaderMetrics(metricListener.getMetricGroup());\n\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_1);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_1);\n\n        kafkaSourceReaderMetrics.recordCommittedOffset(FOO_0, 15213L);\n        kafkaSourceReaderMetrics.recordCommittedOffset(FOO_1, 18213L);\n        kafkaSourceReaderMetrics.recordCommittedOffset(BAR_0, 18613L);\n        kafkaSourceReaderMetrics.recordCommittedOffset(BAR_1, 15513L);\n\n        assertCommittedOffset(FOO_0, 15213L, metricListener);\n        assertCommittedOffset(FOO_1, 18213L, metricListener);\n        assertCommittedOffset(BAR_0, 18613L, metricListener);\n        assertCommittedOffset(BAR_1, 15513L, metricListener);\n\n        assertEquals(\n                0L,\n                metricListener\n                        .getCounter(\n                                KafkaSourceReaderMetrics.KAFKA_SOURCE_READER_METRIC_GROUP,\n                                KafkaSourceReaderMetrics.COMMITS_SUCCEEDED_METRIC_COUNTER)\n                        .getCount());\n\n        kafkaSourceReaderMetrics.recordSucceededCommit();\n\n        assertEquals(\n                1L,\n                metricListener\n                        .getCounter(\n                                KafkaSourceReaderMetrics.KAFKA_SOURCE_READER_METRIC_GROUP,\n                                KafkaSourceReaderMetrics.COMMITS_SUCCEEDED_METRIC_COUNTER)\n                        .getCount());\n    }\n","realPath":"flink-connectors/flink-connector-kafka/src/test/java/org/apache/flink/connector/kafka/source/metrics/KafkaSourceReaderMetricsTest.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":68,"status":"M"}],"commitId":"32477e72d8dea47b36ae1244f5b09c78f5826314","commitMessage":"@@@[hotfix][testutil] Return Optional in MetricListener getters\n","date":"2021-08-21 03:47:07","modifiedFileCount":"5","status":"M","submitter":"Qingsheng Ren"},{"authorTime":"2021-08-19 00:31:18","codes":[{"authorDate":"2021-08-19 00:31:18","commitOrder":4,"curCode":"    public void testCurrentOffsetTracking() {\n        MetricListener metricListener = new MetricListener();\n\n        final KafkaSourceReaderMetrics kafkaSourceReaderMetrics =\n                new KafkaSourceReaderMetrics(\n                        InternalSourceReaderMetricGroup.mock(metricListener.getMetricGroup()));\n\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_1);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_1);\n\n        kafkaSourceReaderMetrics.recordCurrentOffset(FOO_0, 15213L);\n        kafkaSourceReaderMetrics.recordCurrentOffset(FOO_1, 18213L);\n        kafkaSourceReaderMetrics.recordCurrentOffset(BAR_0, 18613L);\n        kafkaSourceReaderMetrics.recordCurrentOffset(BAR_1, 15513L);\n\n        assertCurrentOffset(FOO_0, 15213L, metricListener);\n        assertCurrentOffset(FOO_1, 18213L, metricListener);\n        assertCurrentOffset(BAR_0, 18613L, metricListener);\n        assertCurrentOffset(BAR_1, 15513L, metricListener);\n    }\n","date":"2021-08-21 03:47:07","endLine":67,"groupId":"10314","id":7,"instanceNumber":1,"isCurCommit":1,"methodName":"testCurrentOffsetTracking","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/0a/1faa5f3be4df79e370ba9dbeea037bdb2db944.src","preCode":"    public void testCurrentOffsetTracking() {\n        MetricListener metricListener = new MetricListener();\n\n        final KafkaSourceReaderMetrics kafkaSourceReaderMetrics =\n                new KafkaSourceReaderMetrics(metricListener.getMetricGroup());\n\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_1);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_1);\n\n        kafkaSourceReaderMetrics.recordCurrentOffset(FOO_0, 15213L);\n        kafkaSourceReaderMetrics.recordCurrentOffset(FOO_1, 18213L);\n        kafkaSourceReaderMetrics.recordCurrentOffset(BAR_0, 18613L);\n        kafkaSourceReaderMetrics.recordCurrentOffset(BAR_1, 15513L);\n\n        assertCurrentOffset(FOO_0, 15213L, metricListener);\n        assertCurrentOffset(FOO_1, 18213L, metricListener);\n        assertCurrentOffset(BAR_0, 18613L, metricListener);\n        assertCurrentOffset(BAR_1, 15513L, metricListener);\n    }\n","realPath":"flink-connectors/flink-connector-kafka/src/test/java/org/apache/flink/connector/kafka/source/metrics/KafkaSourceReaderMetricsTest.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":46,"status":"M"},{"authorDate":"2021-08-19 00:31:18","commitOrder":4,"curCode":"    public void testCommitOffsetTracking() {\n        MetricListener metricListener = new MetricListener();\n\n        final KafkaSourceReaderMetrics kafkaSourceReaderMetrics =\n                new KafkaSourceReaderMetrics(\n                        InternalSourceReaderMetricGroup.mock(metricListener.getMetricGroup()));\n\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_1);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_1);\n\n        kafkaSourceReaderMetrics.recordCommittedOffset(FOO_0, 15213L);\n        kafkaSourceReaderMetrics.recordCommittedOffset(FOO_1, 18213L);\n        kafkaSourceReaderMetrics.recordCommittedOffset(BAR_0, 18613L);\n        kafkaSourceReaderMetrics.recordCommittedOffset(BAR_1, 15513L);\n\n        assertCommittedOffset(FOO_0, 15213L, metricListener);\n        assertCommittedOffset(FOO_1, 18213L, metricListener);\n        assertCommittedOffset(BAR_0, 18613L, metricListener);\n        assertCommittedOffset(BAR_1, 15513L, metricListener);\n\n        final Optional<Counter> commitsSucceededCounter =\n                metricListener.getCounter(\n                        KafkaSourceReaderMetrics.KAFKA_SOURCE_READER_METRIC_GROUP,\n                        KafkaSourceReaderMetrics.COMMITS_SUCCEEDED_METRIC_COUNTER);\n        assertTrue(commitsSucceededCounter.isPresent());\n        assertEquals(0L, commitsSucceededCounter.get().getCount());\n\n        kafkaSourceReaderMetrics.recordSucceededCommit();\n\n        assertEquals(1L, commitsSucceededCounter.get().getCount());\n    }\n","date":"2021-08-21 03:47:07","endLine":102,"groupId":"10314","id":8,"instanceNumber":2,"isCurCommit":1,"methodName":"testCommitOffsetTracking","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/0a/1faa5f3be4df79e370ba9dbeea037bdb2db944.src","preCode":"    public void testCommitOffsetTracking() {\n        MetricListener metricListener = new MetricListener();\n\n        final KafkaSourceReaderMetrics kafkaSourceReaderMetrics =\n                new KafkaSourceReaderMetrics(metricListener.getMetricGroup());\n\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(FOO_1);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_0);\n        kafkaSourceReaderMetrics.registerTopicPartition(BAR_1);\n\n        kafkaSourceReaderMetrics.recordCommittedOffset(FOO_0, 15213L);\n        kafkaSourceReaderMetrics.recordCommittedOffset(FOO_1, 18213L);\n        kafkaSourceReaderMetrics.recordCommittedOffset(BAR_0, 18613L);\n        kafkaSourceReaderMetrics.recordCommittedOffset(BAR_1, 15513L);\n\n        assertCommittedOffset(FOO_0, 15213L, metricListener);\n        assertCommittedOffset(FOO_1, 18213L, metricListener);\n        assertCommittedOffset(BAR_0, 18613L, metricListener);\n        assertCommittedOffset(BAR_1, 15513L, metricListener);\n\n        final Optional<Counter> commitsSucceededCounter =\n                metricListener.getCounter(\n                        KafkaSourceReaderMetrics.KAFKA_SOURCE_READER_METRIC_GROUP,\n                        KafkaSourceReaderMetrics.COMMITS_SUCCEEDED_METRIC_COUNTER);\n        assertTrue(commitsSucceededCounter.isPresent());\n        assertEquals(0L, commitsSucceededCounter.get().getCount());\n\n        kafkaSourceReaderMetrics.recordSucceededCommit();\n\n        assertEquals(1L, commitsSucceededCounter.get().getCount());\n    }\n","realPath":"flink-connectors/flink-connector-kafka/src/test/java/org/apache/flink/connector/kafka/source/metrics/KafkaSourceReaderMetricsTest.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":70,"status":"M"}],"commitId":"a40594f2d441af426e174fbf60825e0d50f9b2a0","commitMessage":"@@@[FLINK-23773][connector/kafka] Report numBytesIn and pendingRecords in KafkaSource\n","date":"2021-08-21 03:47:07","modifiedFileCount":"5","status":"M","submitter":"Qingsheng Ren"}]
