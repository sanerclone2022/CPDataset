[{"authorTime":"2019-11-04 23:52:42","codes":[{"authorDate":"2019-11-04 23:52:42","commitOrder":1,"curCode":"\tpublic void testSlotSharingOnAllVerticesInSameSlotSharingGroupByDefaultEnabled() {\n\t\tfinal StreamGraph streamGraph = createStreamGraphForSlotSharingTest();\n\t\t\r\n\t\tstreamGraph.getStreamNodes().stream()\n\t\t\t.filter(n -> \"map1\".equals(n.getOperatorName()))\n\t\t\t.findFirst()\n\t\t\t.get()\n\t\t\t.setSlotSharingGroup(\"testSlotSharingGroup\");\n\t\tstreamGraph.getExecutionConfig().enableAllVerticesInSameSlotSharingGroupByDefault();\n\t\tfinal JobGraph jobGraph = StreamingJobGraphGenerator.createJobGraph(streamGraph);\n\n\t\tfinal List<JobVertex> verticesSorted = jobGraph.getVerticesSortedTopologicallyFromSources();\n\t\tassertEquals(4, verticesSorted.size());\n\n\t\tfinal JobVertex source1Vertex = verticesSorted.get(0);\n\t\tfinal JobVertex source2Vertex = verticesSorted.get(1);\n\t\tfinal JobVertex map1Vertex = verticesSorted.get(2);\n\t\tfinal JobVertex map2Vertex = verticesSorted.get(3);\n\n\t\t\r\n\t\t\r\n\t\tassertSameSlotSharingGroup(source1Vertex, source2Vertex, map2Vertex);\n\t\tassertDistinctSharingGroups(source1Vertex, map1Vertex);\n\t}\n","date":"2019-11-05 18:23:54","endLine":684,"groupId":"39032","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testSlotSharingOnAllVerticesInSameSlotSharingGroupByDefaultEnabled","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/fc/21a03f13fc6a790bf46a9a0eead12df46bfa89.src","preCode":"\tpublic void testSlotSharingOnAllVerticesInSameSlotSharingGroupByDefaultEnabled() {\n\t\tfinal StreamGraph streamGraph = createStreamGraphForSlotSharingTest();\n\t\t\r\n\t\tstreamGraph.getStreamNodes().stream()\n\t\t\t.filter(n -> \"map1\".equals(n.getOperatorName()))\n\t\t\t.findFirst()\n\t\t\t.get()\n\t\t\t.setSlotSharingGroup(\"testSlotSharingGroup\");\n\t\tstreamGraph.getExecutionConfig().enableAllVerticesInSameSlotSharingGroupByDefault();\n\t\tfinal JobGraph jobGraph = StreamingJobGraphGenerator.createJobGraph(streamGraph);\n\n\t\tfinal List<JobVertex> verticesSorted = jobGraph.getVerticesSortedTopologicallyFromSources();\n\t\tassertEquals(4, verticesSorted.size());\n\n\t\tfinal JobVertex source1Vertex = verticesSorted.get(0);\n\t\tfinal JobVertex source2Vertex = verticesSorted.get(1);\n\t\tfinal JobVertex map1Vertex = verticesSorted.get(2);\n\t\tfinal JobVertex map2Vertex = verticesSorted.get(3);\n\n\t\t\r\n\t\t\r\n\t\tassertSameSlotSharingGroup(source1Vertex, source2Vertex, map2Vertex);\n\t\tassertDistinctSharingGroups(source1Vertex, map1Vertex);\n\t}\n","realPath":"flink-streaming-java/src/test/java/org/apache/flink/streaming/api/graph/StreamingJobGraphGeneratorTest.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":661,"status":"B"},{"authorDate":"2019-11-04 23:52:42","commitOrder":1,"curCode":"\tpublic void testSlotSharingOnAllVerticesInSameSlotSharingGroupByDefaultDisabled() {\n\t\tfinal StreamGraph streamGraph = createStreamGraphForSlotSharingTest();\n\t\tstreamGraph.getExecutionConfig().disableAllVerticesInSameSlotSharingGroupByDefault();\n\t\tfinal JobGraph jobGraph = StreamingJobGraphGenerator.createJobGraph(streamGraph);\n\n\t\tfinal List<JobVertex> verticesSorted = jobGraph.getVerticesSortedTopologicallyFromSources();\n\t\tassertEquals(4, verticesSorted.size());\n\n\t\tfinal JobVertex source1Vertex = verticesSorted.get(0);\n\t\tfinal JobVertex source2Vertex = verticesSorted.get(1);\n\t\tfinal JobVertex map1Vertex = verticesSorted.get(2);\n\t\tfinal JobVertex map2Vertex = verticesSorted.get(3);\n\n\t\t\r\n\t\tassertSameSlotSharingGroup(source1Vertex, map1Vertex);\n\n\t\t\r\n\t\tassertDistinctSharingGroups(source1Vertex, source2Vertex, map2Vertex);\n\t}\n","date":"2019-11-05 18:23:54","endLine":705,"groupId":"39032","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testSlotSharingOnAllVerticesInSameSlotSharingGroupByDefaultDisabled","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/fc/21a03f13fc6a790bf46a9a0eead12df46bfa89.src","preCode":"\tpublic void testSlotSharingOnAllVerticesInSameSlotSharingGroupByDefaultDisabled() {\n\t\tfinal StreamGraph streamGraph = createStreamGraphForSlotSharingTest();\n\t\tstreamGraph.getExecutionConfig().disableAllVerticesInSameSlotSharingGroupByDefault();\n\t\tfinal JobGraph jobGraph = StreamingJobGraphGenerator.createJobGraph(streamGraph);\n\n\t\tfinal List<JobVertex> verticesSorted = jobGraph.getVerticesSortedTopologicallyFromSources();\n\t\tassertEquals(4, verticesSorted.size());\n\n\t\tfinal JobVertex source1Vertex = verticesSorted.get(0);\n\t\tfinal JobVertex source2Vertex = verticesSorted.get(1);\n\t\tfinal JobVertex map1Vertex = verticesSorted.get(2);\n\t\tfinal JobVertex map2Vertex = verticesSorted.get(3);\n\n\t\t\r\n\t\tassertSameSlotSharingGroup(source1Vertex, map1Vertex);\n\n\t\t\r\n\t\tassertDistinctSharingGroups(source1Vertex, source2Vertex, map2Vertex);\n\t}\n","realPath":"flink-streaming-java/src/test/java/org/apache/flink/streaming/api/graph/StreamingJobGraphGeneratorTest.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":687,"status":"B"}],"commitId":"299625a9763141ea8c4283559a793050a115aafd","commitMessage":"@@@[FLINK-14060] Set vertex slot sharing based on logical pipelined regions\n\nThis closes #10007.\n","date":"2019-11-05 18:23:54","modifiedFileCount":"2","status":"B","submitter":"Zhu Zhu"},{"authorTime":"2019-11-06 10:12:28","codes":[{"authorDate":"2019-11-06 10:12:28","commitOrder":2,"curCode":"\tpublic void testSlotSharingOnAllVerticesInSameSlotSharingGroupByDefaultEnabled() {\n\t\tfinal StreamGraph streamGraph = createStreamGraphForSlotSharingTest();\n\t\t\r\n\t\tstreamGraph.getStreamNodes().stream()\n\t\t\t.filter(n -> \"map1\".equals(n.getOperatorName()))\n\t\t\t.findFirst()\n\t\t\t.get()\n\t\t\t.setSlotSharingGroup(\"testSlotSharingGroup\");\n\t\tstreamGraph.setAllVerticesInSameSlotSharingGroupByDefault(true);\n\t\tfinal JobGraph jobGraph = StreamingJobGraphGenerator.createJobGraph(streamGraph);\n\n\t\tfinal List<JobVertex> verticesSorted = jobGraph.getVerticesSortedTopologicallyFromSources();\n\t\tassertEquals(4, verticesSorted.size());\n\n\t\tfinal JobVertex source1Vertex = verticesSorted.get(0);\n\t\tfinal JobVertex source2Vertex = verticesSorted.get(1);\n\t\tfinal JobVertex map1Vertex = verticesSorted.get(2);\n\t\tfinal JobVertex map2Vertex = verticesSorted.get(3);\n\n\t\t\r\n\t\t\r\n\t\tassertSameSlotSharingGroup(source1Vertex, source2Vertex, map2Vertex);\n\t\tassertDistinctSharingGroups(source1Vertex, map1Vertex);\n\t}\n","date":"2019-11-09 00:15:36","endLine":684,"groupId":"39032","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testSlotSharingOnAllVerticesInSameSlotSharingGroupByDefaultEnabled","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/64/a2e1d599d0f1a9facf5b87d9ab255fa794bda5.src","preCode":"\tpublic void testSlotSharingOnAllVerticesInSameSlotSharingGroupByDefaultEnabled() {\n\t\tfinal StreamGraph streamGraph = createStreamGraphForSlotSharingTest();\n\t\t\r\n\t\tstreamGraph.getStreamNodes().stream()\n\t\t\t.filter(n -> \"map1\".equals(n.getOperatorName()))\n\t\t\t.findFirst()\n\t\t\t.get()\n\t\t\t.setSlotSharingGroup(\"testSlotSharingGroup\");\n\t\tstreamGraph.getExecutionConfig().enableAllVerticesInSameSlotSharingGroupByDefault();\n\t\tfinal JobGraph jobGraph = StreamingJobGraphGenerator.createJobGraph(streamGraph);\n\n\t\tfinal List<JobVertex> verticesSorted = jobGraph.getVerticesSortedTopologicallyFromSources();\n\t\tassertEquals(4, verticesSorted.size());\n\n\t\tfinal JobVertex source1Vertex = verticesSorted.get(0);\n\t\tfinal JobVertex source2Vertex = verticesSorted.get(1);\n\t\tfinal JobVertex map1Vertex = verticesSorted.get(2);\n\t\tfinal JobVertex map2Vertex = verticesSorted.get(3);\n\n\t\t\r\n\t\t\r\n\t\tassertSameSlotSharingGroup(source1Vertex, source2Vertex, map2Vertex);\n\t\tassertDistinctSharingGroups(source1Vertex, map1Vertex);\n\t}\n","realPath":"flink-streaming-java/src/test/java/org/apache/flink/streaming/api/graph/StreamingJobGraphGeneratorTest.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":661,"status":"M"},{"authorDate":"2019-11-06 10:12:28","commitOrder":2,"curCode":"\tpublic void testSlotSharingOnAllVerticesInSameSlotSharingGroupByDefaultDisabled() {\n\t\tfinal StreamGraph streamGraph = createStreamGraphForSlotSharingTest();\n\t\tstreamGraph.setAllVerticesInSameSlotSharingGroupByDefault(false);\n\t\tfinal JobGraph jobGraph = StreamingJobGraphGenerator.createJobGraph(streamGraph);\n\n\t\tfinal List<JobVertex> verticesSorted = jobGraph.getVerticesSortedTopologicallyFromSources();\n\t\tassertEquals(4, verticesSorted.size());\n\n\t\tfinal JobVertex source1Vertex = verticesSorted.get(0);\n\t\tfinal JobVertex source2Vertex = verticesSorted.get(1);\n\t\tfinal JobVertex map1Vertex = verticesSorted.get(2);\n\t\tfinal JobVertex map2Vertex = verticesSorted.get(3);\n\n\t\t\r\n\t\tassertSameSlotSharingGroup(source1Vertex, map1Vertex);\n\n\t\t\r\n\t\tassertDistinctSharingGroups(source1Vertex, source2Vertex, map2Vertex);\n\t}\n","date":"2019-11-09 00:15:36","endLine":705,"groupId":"39032","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testSlotSharingOnAllVerticesInSameSlotSharingGroupByDefaultDisabled","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/64/a2e1d599d0f1a9facf5b87d9ab255fa794bda5.src","preCode":"\tpublic void testSlotSharingOnAllVerticesInSameSlotSharingGroupByDefaultDisabled() {\n\t\tfinal StreamGraph streamGraph = createStreamGraphForSlotSharingTest();\n\t\tstreamGraph.getExecutionConfig().disableAllVerticesInSameSlotSharingGroupByDefault();\n\t\tfinal JobGraph jobGraph = StreamingJobGraphGenerator.createJobGraph(streamGraph);\n\n\t\tfinal List<JobVertex> verticesSorted = jobGraph.getVerticesSortedTopologicallyFromSources();\n\t\tassertEquals(4, verticesSorted.size());\n\n\t\tfinal JobVertex source1Vertex = verticesSorted.get(0);\n\t\tfinal JobVertex source2Vertex = verticesSorted.get(1);\n\t\tfinal JobVertex map1Vertex = verticesSorted.get(2);\n\t\tfinal JobVertex map2Vertex = verticesSorted.get(3);\n\n\t\t\r\n\t\tassertSameSlotSharingGroup(source1Vertex, map1Vertex);\n\n\t\t\r\n\t\tassertDistinctSharingGroups(source1Vertex, source2Vertex, map2Vertex);\n\t}\n","realPath":"flink-streaming-java/src/test/java/org/apache/flink/streaming/api/graph/StreamingJobGraphGeneratorTest.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":687,"status":"M"}],"commitId":"2125ea2178863cf5e2faed929b95faadcae10a8d","commitMessage":"@@@[FLINK-14611][runtime] Move allVerticesInSameSlotSharingGroupByDefault setting from ExecutionConfig to StreamGraph\n","date":"2019-11-09 00:15:36","modifiedFileCount":"6","status":"M","submitter":"Zhu Zhu"},{"authorTime":"2020-02-22 22:23:38","codes":[{"authorDate":"2020-02-22 22:23:38","commitOrder":3,"curCode":"\tpublic void testSlotSharingOnAllVerticesInSameSlotSharingGroupByDefaultEnabled() {\n\t\tfinal StreamGraph streamGraph = createStreamGraphForSlotSharingTest();\n\t\t\r\n\t\tstreamGraph.getStreamNodes().stream()\n\t\t\t.filter(n -> \"map1\".equals(n.getOperatorName()))\n\t\t\t.findFirst()\n\t\t\t.get()\n\t\t\t.setSlotSharingGroup(\"testSlotSharingGroup\");\n\t\tstreamGraph.setAllVerticesInSameSlotSharingGroupByDefault(true);\n\t\tfinal JobGraph jobGraph = StreamingJobGraphGenerator.createJobGraph(streamGraph);\n\n\t\tfinal List<JobVertex> verticesSorted = jobGraph.getVerticesSortedTopologicallyFromSources();\n\t\tassertEquals(4, verticesSorted.size());\n\n\t\tfinal List<JobVertex> verticesMatched = getExpectedVerticesList(verticesSorted);\n\t\tfinal JobVertex source1Vertex = verticesMatched.get(0);\n\t\tfinal JobVertex source2Vertex = verticesMatched.get(1);\n\t\tfinal JobVertex map1Vertex = verticesMatched.get(2);\n\t\tfinal JobVertex map2Vertex = verticesMatched.get(3);\n\n\t\t\r\n\t\t\r\n\t\tassertSameSlotSharingGroup(source1Vertex, source2Vertex, map2Vertex);\n\t\tassertDistinctSharingGroups(source1Vertex, map1Vertex);\n\t}\n","date":"2020-02-27 15:22:03","endLine":799,"groupId":"103011","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"testSlotSharingOnAllVerticesInSameSlotSharingGroupByDefaultEnabled","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/e9/42aebce7edbbbf8f348d41e612276e95f2f787.src","preCode":"\tpublic void testSlotSharingOnAllVerticesInSameSlotSharingGroupByDefaultEnabled() {\n\t\tfinal StreamGraph streamGraph = createStreamGraphForSlotSharingTest();\n\t\t\r\n\t\tstreamGraph.getStreamNodes().stream()\n\t\t\t.filter(n -> \"map1\".equals(n.getOperatorName()))\n\t\t\t.findFirst()\n\t\t\t.get()\n\t\t\t.setSlotSharingGroup(\"testSlotSharingGroup\");\n\t\tstreamGraph.setAllVerticesInSameSlotSharingGroupByDefault(true);\n\t\tfinal JobGraph jobGraph = StreamingJobGraphGenerator.createJobGraph(streamGraph);\n\n\t\tfinal List<JobVertex> verticesSorted = jobGraph.getVerticesSortedTopologicallyFromSources();\n\t\tassertEquals(4, verticesSorted.size());\n\n\t\tfinal JobVertex source1Vertex = verticesSorted.get(0);\n\t\tfinal JobVertex source2Vertex = verticesSorted.get(1);\n\t\tfinal JobVertex map1Vertex = verticesSorted.get(2);\n\t\tfinal JobVertex map2Vertex = verticesSorted.get(3);\n\n\t\t\r\n\t\t\r\n\t\tassertSameSlotSharingGroup(source1Vertex, source2Vertex, map2Vertex);\n\t\tassertDistinctSharingGroups(source1Vertex, map1Vertex);\n\t}\n","realPath":"flink-streaming-java/src/test/java/org/apache/flink/streaming/api/graph/StreamingJobGraphGeneratorTest.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":775,"status":"M"},{"authorDate":"2020-02-22 22:23:38","commitOrder":3,"curCode":"\tpublic void testSlotSharingOnAllVerticesInSameSlotSharingGroupByDefaultDisabled() {\n\t\tfinal StreamGraph streamGraph = createStreamGraphForSlotSharingTest();\n\t\tstreamGraph.setAllVerticesInSameSlotSharingGroupByDefault(false);\n\t\tfinal JobGraph jobGraph = StreamingJobGraphGenerator.createJobGraph(streamGraph);\n\n\t\tfinal List<JobVertex> verticesSorted = jobGraph.getVerticesSortedTopologicallyFromSources();\n\t\tassertEquals(4, verticesSorted.size());\n\n\t\tfinal List<JobVertex> verticesMatched = getExpectedVerticesList(verticesSorted);\n\t\tfinal JobVertex source1Vertex = verticesMatched.get(0);\n\t\tfinal JobVertex source2Vertex = verticesMatched.get(1);\n\t\tfinal JobVertex map1Vertex = verticesMatched.get(2);\n\t\tfinal JobVertex map2Vertex = verticesMatched.get(3);\n\n\t\t\r\n\t\tassertSameSlotSharingGroup(source1Vertex, map1Vertex);\n\n\t\t\r\n\t\tassertDistinctSharingGroups(source1Vertex, source2Vertex, map2Vertex);\n\t}\n","date":"2020-02-27 15:22:03","endLine":821,"groupId":"103011","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"testSlotSharingOnAllVerticesInSameSlotSharingGroupByDefaultDisabled","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/e9/42aebce7edbbbf8f348d41e612276e95f2f787.src","preCode":"\tpublic void testSlotSharingOnAllVerticesInSameSlotSharingGroupByDefaultDisabled() {\n\t\tfinal StreamGraph streamGraph = createStreamGraphForSlotSharingTest();\n\t\tstreamGraph.setAllVerticesInSameSlotSharingGroupByDefault(false);\n\t\tfinal JobGraph jobGraph = StreamingJobGraphGenerator.createJobGraph(streamGraph);\n\n\t\tfinal List<JobVertex> verticesSorted = jobGraph.getVerticesSortedTopologicallyFromSources();\n\t\tassertEquals(4, verticesSorted.size());\n\n\t\tfinal JobVertex source1Vertex = verticesSorted.get(0);\n\t\tfinal JobVertex source2Vertex = verticesSorted.get(1);\n\t\tfinal JobVertex map1Vertex = verticesSorted.get(2);\n\t\tfinal JobVertex map2Vertex = verticesSorted.get(3);\n\n\t\t\r\n\t\tassertSameSlotSharingGroup(source1Vertex, map1Vertex);\n\n\t\t\r\n\t\tassertDistinctSharingGroups(source1Vertex, source2Vertex, map2Vertex);\n\t}\n","realPath":"flink-streaming-java/src/test/java/org/apache/flink/streaming/api/graph/StreamingJobGraphGeneratorTest.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":802,"status":"M"}],"commitId":"39e75eb2f1be9f6ce872e558bb8cf234897dfbfc","commitMessage":"@@@[FLINK-16234][tests] Fix unstable cases in StreamingJobGraphGeneratorTest\n\nThis closes #11187.\n","date":"2020-02-27 15:22:03","modifiedFileCount":"1","status":"M","submitter":"cpugputpu"}]
