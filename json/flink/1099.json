[{"authorTime":"2018-08-06 17:21:58","codes":[{"authorDate":"2019-11-07 00:12:44","commitOrder":2,"curCode":"\tpublic boolean hasNext() {\n\t\ttry {\n\t\t\twhile (nextKey == null && iterator.isValid()) {\n\n\t\t\t\tfinal byte[] keyBytes = iterator.key();\n\t\t\t\tfinal K currentKey = deserializeKey(keyBytes, byteArrayDataInputView);\n\t\t\t\tfinal N currentNamespace = RocksDBKeySerializationUtils.readNamespace(\n\t\t\t\t\tnamespaceSerializer,\n\t\t\t\t\tbyteArrayDataInputView,\n\t\t\t\t\tambiguousKeyPossible\n\t\t\t\t);\n\t\t\t\tnextKey = Tuple2.of(currentKey, currentNamespace);\n\t\t\t\titerator.next();\n\t\t\t}\n\t\t} catch (Exception e) {\n\t\t\tthrow new FlinkRuntimeException(\"Failed to access state [\" + state + \"]\", e);\n\t\t}\n\t\treturn nextKey != null;\n\t}\n","date":"2020-09-15 04:37:02","endLine":79,"groupId":"723","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"hasNext","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/2c/a9486fb3970ba03d3d8ca9d6b33514fad2b278.src","preCode":"\tpublic boolean hasNext() {\n\t\ttry {\n\t\t\twhile (nextKey == null && iterator.isValid()) {\n\n\t\t\t\tfinal byte[] keyBytes = iterator.key();\n\t\t\t\tfinal K currentKey = deserializeKey(keyBytes, byteArrayDataInputView);\n\t\t\t\tfinal N currentNamespace = RocksDBKeySerializationUtils.readNamespace(\n\t\t\t\t\tnamespaceSerializer,\n\t\t\t\t\tbyteArrayDataInputView,\n\t\t\t\t\tambiguousKeyPossible\n\t\t\t\t);\n\t\t\t\tnextKey = Tuple2.of(currentKey, currentNamespace);\n\t\t\t\titerator.next();\n\t\t\t}\n\t\t} catch (Exception e) {\n\t\t\tthrow new FlinkRuntimeException(\"Failed to access state [\" + state + \"]\", e);\n\t\t}\n\t\treturn nextKey != null;\n\t}\n","realPath":"flink-state-backends/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/iterator/RocksStateKeysAndNamespaceIterator.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":61,"status":"B"},{"authorDate":"2018-08-06 17:21:58","commitOrder":2,"curCode":"\tpublic boolean hasNext() {\n\t\ttry {\n\t\t\twhile (nextKey == null && iterator.isValid()) {\n\n\t\t\t\tfinal byte[] keyBytes = iterator.key();\n\t\t\t\tfinal K currentKey = deserializeKey(keyBytes, byteArrayDataInputView);\n\t\t\t\tfinal int namespaceByteStartPos = byteArrayDataInputView.getPosition();\n\n\t\t\t\tif (isMatchingNameSpace(keyBytes, namespaceByteStartPos) && !Objects.equals(previousKey, currentKey)) {\n\t\t\t\t\tpreviousKey = currentKey;\n\t\t\t\t\tnextKey = currentKey;\n\t\t\t\t}\n\t\t\t\titerator.next();\n\t\t\t}\n\t\t} catch (Exception e) {\n\t\t\tthrow new FlinkRuntimeException(\"Failed to access state [\" + state + \"]\", e);\n\t\t}\n\t\treturn nextKey != null;\n\t}\n","date":"2018-08-11 02:07:21","endLine":97,"groupId":"29070","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"hasNext","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/0f/a93dc8a1fb75c2a8b9774ef24413898f8f6e32.src","preCode":"\tpublic boolean hasNext() {\n\t\ttry {\n\t\t\twhile (nextKey == null && iterator.isValid()) {\n\n\t\t\t\tfinal byte[] keyBytes = iterator.key();\n\t\t\t\tfinal K currentKey = deserializeKey(keyBytes, byteArrayDataInputView);\n\t\t\t\tfinal int namespaceByteStartPos = byteArrayDataInputView.getPosition();\n\n\t\t\t\tif (isMatchingNameSpace(keyBytes, namespaceByteStartPos) && !Objects.equals(previousKey, currentKey)) {\n\t\t\t\t\tpreviousKey = currentKey;\n\t\t\t\t\tnextKey = currentKey;\n\t\t\t\t}\n\t\t\t\titerator.next();\n\t\t\t}\n\t\t} catch (Exception e) {\n\t\t\tthrow new FlinkRuntimeException(\"Failed to access state [\" + state + \"]\", e);\n\t\t}\n\t\treturn nextKey != null;\n\t}\n","realPath":"flink-state-backends/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/iterator/RocksStateKeysIterator.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":79,"status":"NB"}],"commitId":"cd81e9bbbd7456e6aedbff31054700cc4da70fa3","commitMessage":"@@@[FLINK-18978][state-backends] Support full table scan of key and namespace from statebackend\n\nThis closes #13179\n","date":"2020-09-15 04:37:02","modifiedFileCount":"8","status":"M","submitter":"Seth Wiesman"},{"authorTime":"2018-08-06 17:21:58","codes":[{"authorDate":"2021-01-28 21:41:53","commitOrder":3,"curCode":"    public boolean hasNext() {\n        try {\n            while (nextKey == null && iterator.isValid()) {\n\n                final byte[] keyBytes = iterator.key();\n                final K currentKey = deserializeKey(keyBytes, byteArrayDataInputView);\n                final N currentNamespace =\n                        CompositeKeySerializationUtils.readNamespace(\n                                namespaceSerializer, byteArrayDataInputView, ambiguousKeyPossible);\n                nextKey = Tuple2.of(currentKey, currentNamespace);\n                iterator.next();\n            }\n        } catch (Exception e) {\n            throw new FlinkRuntimeException(\"Failed to access state [\" + state + \"]\", e);\n        }\n        return nextKey != null;\n    }\n","date":"2021-02-06 01:38:46","endLine":76,"groupId":"1099","id":3,"instanceNumber":1,"isCurCommit":1,"methodName":"hasNext","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/38/6c33b54111fd5b291cfd2f2a5ecc64855ce361.src","preCode":"    public boolean hasNext() {\n        try {\n            while (nextKey == null && iterator.isValid()) {\n\n                final byte[] keyBytes = iterator.key();\n                final K currentKey = deserializeKey(keyBytes, byteArrayDataInputView);\n                final N currentNamespace =\n                        RocksDBKeySerializationUtils.readNamespace(\n                                namespaceSerializer, byteArrayDataInputView, ambiguousKeyPossible);\n                nextKey = Tuple2.of(currentKey, currentNamespace);\n                iterator.next();\n            }\n        } catch (Exception e) {\n            throw new FlinkRuntimeException(\"Failed to access state [\" + state + \"]\", e);\n        }\n        return nextKey != null;\n    }\n","realPath":"flink-state-backends/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/iterator/RocksStateKeysAndNamespaceIterator.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":60,"status":"M"},{"authorDate":"2018-08-06 17:21:58","commitOrder":3,"curCode":"\tpublic boolean hasNext() {\n\t\ttry {\n\t\t\twhile (nextKey == null && iterator.isValid()) {\n\n\t\t\t\tfinal byte[] keyBytes = iterator.key();\n\t\t\t\tfinal K currentKey = deserializeKey(keyBytes, byteArrayDataInputView);\n\t\t\t\tfinal int namespaceByteStartPos = byteArrayDataInputView.getPosition();\n\n\t\t\t\tif (isMatchingNameSpace(keyBytes, namespaceByteStartPos) && !Objects.equals(previousKey, currentKey)) {\n\t\t\t\t\tpreviousKey = currentKey;\n\t\t\t\t\tnextKey = currentKey;\n\t\t\t\t}\n\t\t\t\titerator.next();\n\t\t\t}\n\t\t} catch (Exception e) {\n\t\t\tthrow new FlinkRuntimeException(\"Failed to access state [\" + state + \"]\", e);\n\t\t}\n\t\treturn nextKey != null;\n\t}\n","date":"2018-08-11 02:07:21","endLine":97,"groupId":"1099","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"hasNext","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/0f/a93dc8a1fb75c2a8b9774ef24413898f8f6e32.src","preCode":"\tpublic boolean hasNext() {\n\t\ttry {\n\t\t\twhile (nextKey == null && iterator.isValid()) {\n\n\t\t\t\tfinal byte[] keyBytes = iterator.key();\n\t\t\t\tfinal K currentKey = deserializeKey(keyBytes, byteArrayDataInputView);\n\t\t\t\tfinal int namespaceByteStartPos = byteArrayDataInputView.getPosition();\n\n\t\t\t\tif (isMatchingNameSpace(keyBytes, namespaceByteStartPos) && !Objects.equals(previousKey, currentKey)) {\n\t\t\t\t\tpreviousKey = currentKey;\n\t\t\t\t\tnextKey = currentKey;\n\t\t\t\t}\n\t\t\t\titerator.next();\n\t\t\t}\n\t\t} catch (Exception e) {\n\t\t\tthrow new FlinkRuntimeException(\"Failed to access state [\" + state + \"]\", e);\n\t\t}\n\t\treturn nextKey != null;\n\t}\n","realPath":"flink-state-backends/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/iterator/RocksStateKeysIterator.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":79,"status":"N"}],"commitId":"a3436cb67866fddec45c9ac1bd760c24732ca32b","commitMessage":"@@@[refactor] Move RocksDBCompositeKeyBuilder to a common package\n","date":"2021-02-06 01:38:46","modifiedFileCount":"13","status":"M","submitter":"Dawid Wysakowicz"}]
