[{"authorTime":"2021-06-26 15:42:11","codes":[{"authorDate":"2021-06-26 15:42:11","commitOrder":1,"curCode":"    public void testTriggerCheckpointsWithEndOfPartition() throws Exception {\n        BufferOrEvent[] sequence = {\n            createBarrier(1, 0), createBarrier(1, 1), createEndOfPartition(2)\n        };\n\n        ValidatingCheckpointHandler validator = new ValidatingCheckpointHandler(-1L);\n        inputGate = createCheckpointedInputGate(3, sequence, validator);\n        inputGate.getCheckpointBarrierHandler().setEnableCheckpointAfterTasksFinished(true);\n\n        for (BufferOrEvent bufferOrEvent : sequence) {\n            check(bufferOrEvent, inputGate.pollNext().get(), PAGE_SIZE);\n        }\n\n        assertThat(validator.triggeredCheckpoints, contains(1L));\n        assertEquals(0, validator.getAbortedCheckpointCounter());\n        assertThat(inputGate.getCheckpointBarrierHandler().isCheckpointPending(), equalTo(false));\n    }\n","date":"2021-07-03 00:00:46","endLine":1055,"groupId":"8224","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testTriggerCheckpointsWithEndOfPartition","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/72/f2ed2b6a99239d6ca2ebe7ab0b9e940ecb0228.src","preCode":"    public void testTriggerCheckpointsWithEndOfPartition() throws Exception {\n        BufferOrEvent[] sequence = {\n            createBarrier(1, 0), createBarrier(1, 1), createEndOfPartition(2)\n        };\n\n        ValidatingCheckpointHandler validator = new ValidatingCheckpointHandler(-1L);\n        inputGate = createCheckpointedInputGate(3, sequence, validator);\n        inputGate.getCheckpointBarrierHandler().setEnableCheckpointAfterTasksFinished(true);\n\n        for (BufferOrEvent bufferOrEvent : sequence) {\n            check(bufferOrEvent, inputGate.pollNext().get(), PAGE_SIZE);\n        }\n\n        assertThat(validator.triggeredCheckpoints, contains(1L));\n        assertEquals(0, validator.getAbortedCheckpointCounter());\n        assertThat(inputGate.getCheckpointBarrierHandler().isCheckpointPending(), equalTo(false));\n    }\n","realPath":"flink-streaming-java/src/test/java/org/apache/flink/streaming/runtime/io/checkpointing/AlignedCheckpointsTest.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":1039,"status":"B"},{"authorDate":"2021-06-26 15:42:11","commitOrder":1,"curCode":"    public void testTriggerCheckpointsAfterReceivedEndOfPartition() throws Exception {\n        BufferOrEvent[] sequence = {\n             createEndOfPartition(2),\n             createBarrier(6, 0),\n             createBarrier(6, 1),\n             createEndOfPartition(1),\n             createBarrier(7, 0)\n        };\n\n        ValidatingCheckpointHandler validator = new ValidatingCheckpointHandler(-1L);\n        inputGate = createCheckpointedInputGate(3, sequence, validator);\n        inputGate.getCheckpointBarrierHandler().setEnableCheckpointAfterTasksFinished(true);\n\n        for (BufferOrEvent bufferOrEvent : sequence) {\n            check(bufferOrEvent, inputGate.pollNext().get(), PAGE_SIZE);\n        }\n\n        assertThat(validator.triggeredCheckpoints, contains(6L, 7L));\n        assertEquals(0, validator.getAbortedCheckpointCounter());\n        assertThat(inputGate.getCheckpointBarrierHandler().isCheckpointPending(), equalTo(false));\n    }\n","date":"2021-07-03 00:00:46","endLine":1105,"groupId":"8231","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testTriggerCheckpointsAfterReceivedEndOfPartition","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/72/f2ed2b6a99239d6ca2ebe7ab0b9e940ecb0228.src","preCode":"    public void testTriggerCheckpointsAfterReceivedEndOfPartition() throws Exception {\n        BufferOrEvent[] sequence = {\n             createEndOfPartition(2),\n             createBarrier(6, 0),\n             createBarrier(6, 1),\n             createEndOfPartition(1),\n             createBarrier(7, 0)\n        };\n\n        ValidatingCheckpointHandler validator = new ValidatingCheckpointHandler(-1L);\n        inputGate = createCheckpointedInputGate(3, sequence, validator);\n        inputGate.getCheckpointBarrierHandler().setEnableCheckpointAfterTasksFinished(true);\n\n        for (BufferOrEvent bufferOrEvent : sequence) {\n            check(bufferOrEvent, inputGate.pollNext().get(), PAGE_SIZE);\n        }\n\n        assertThat(validator.triggeredCheckpoints, contains(6L, 7L));\n        assertEquals(0, validator.getAbortedCheckpointCounter());\n        assertThat(inputGate.getCheckpointBarrierHandler().isCheckpointPending(), equalTo(false));\n    }\n","realPath":"flink-streaming-java/src/test/java/org/apache/flink/streaming/runtime/io/checkpointing/AlignedCheckpointsTest.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":1085,"status":"B"}],"commitId":"6f21603cc2386ba08cbf6f7e33634d96f8bc4815","commitMessage":"@@@[FLINK-21086][runtime][checkpoint] Make CheckpointBarrierHandler supports alignment with finished channels\n","date":"2021-07-03 00:00:46","modifiedFileCount":"23","status":"B","submitter":"Yun Gao"},{"authorTime":"2021-07-15 19:40:11","codes":[{"authorDate":"2021-07-15 19:40:11","commitOrder":2,"curCode":"    public void testTriggerCheckpointsWithEndOfPartition() throws Exception {\n        BufferOrEvent[] sequence = {\n            createBarrier(1, 0), createBarrier(1, 1), createEndOfPartition(2)\n        };\n\n        ValidatingCheckpointHandler validator = new ValidatingCheckpointHandler(-1L);\n        inputGate = createCheckpointedInputGate(3, sequence, validator);\n\n        for (BufferOrEvent bufferOrEvent : sequence) {\n            check(bufferOrEvent, inputGate.pollNext().get(), PAGE_SIZE);\n        }\n\n        assertThat(validator.triggeredCheckpoints, contains(1L));\n        assertEquals(0, validator.getAbortedCheckpointCounter());\n        assertThat(inputGate.getCheckpointBarrierHandler().isCheckpointPending(), equalTo(false));\n    }\n","date":"2021-07-28 18:47:48","endLine":1071,"groupId":"102939","id":3,"instanceNumber":1,"isCurCommit":1,"methodName":"testTriggerCheckpointsWithEndOfPartition","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/1b/6af2d63b76ba60086647712a6919691fac4b0f.src","preCode":"    public void testTriggerCheckpointsWithEndOfPartition() throws Exception {\n        BufferOrEvent[] sequence = {\n            createBarrier(1, 0), createBarrier(1, 1), createEndOfPartition(2)\n        };\n\n        ValidatingCheckpointHandler validator = new ValidatingCheckpointHandler(-1L);\n        inputGate = createCheckpointedInputGate(3, sequence, validator);\n        inputGate.getCheckpointBarrierHandler().setEnableCheckpointAfterTasksFinished(true);\n\n        for (BufferOrEvent bufferOrEvent : sequence) {\n            check(bufferOrEvent, inputGate.pollNext().get(), PAGE_SIZE);\n        }\n\n        assertThat(validator.triggeredCheckpoints, contains(1L));\n        assertEquals(0, validator.getAbortedCheckpointCounter());\n        assertThat(inputGate.getCheckpointBarrierHandler().isCheckpointPending(), equalTo(false));\n    }\n","realPath":"flink-streaming-java/src/test/java/org/apache/flink/streaming/runtime/io/checkpointing/AlignedCheckpointsTest.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":1056,"status":"M"},{"authorDate":"2021-07-15 19:40:11","commitOrder":2,"curCode":"    public void testTriggerCheckpointsAfterReceivedEndOfPartition() throws Exception {\n        BufferOrEvent[] sequence = {\n             createEndOfPartition(2),\n             createBarrier(6, 0),\n             createBarrier(6, 1),\n             createEndOfPartition(1),\n             createBarrier(7, 0)\n        };\n\n        ValidatingCheckpointHandler validator = new ValidatingCheckpointHandler(-1L);\n        inputGate = createCheckpointedInputGate(3, sequence, validator);\n\n        for (BufferOrEvent bufferOrEvent : sequence) {\n            check(bufferOrEvent, inputGate.pollNext().get(), PAGE_SIZE);\n        }\n\n        assertThat(validator.triggeredCheckpoints, contains(6L, 7L));\n        assertEquals(0, validator.getAbortedCheckpointCounter());\n        assertThat(inputGate.getCheckpointBarrierHandler().isCheckpointPending(), equalTo(false));\n    }\n","date":"2021-07-28 18:47:48","endLine":1119,"groupId":"102939","id":4,"instanceNumber":2,"isCurCommit":1,"methodName":"testTriggerCheckpointsAfterReceivedEndOfPartition","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/1b/6af2d63b76ba60086647712a6919691fac4b0f.src","preCode":"    public void testTriggerCheckpointsAfterReceivedEndOfPartition() throws Exception {\n        BufferOrEvent[] sequence = {\n             createEndOfPartition(2),\n             createBarrier(6, 0),\n             createBarrier(6, 1),\n             createEndOfPartition(1),\n             createBarrier(7, 0)\n        };\n\n        ValidatingCheckpointHandler validator = new ValidatingCheckpointHandler(-1L);\n        inputGate = createCheckpointedInputGate(3, sequence, validator);\n        inputGate.getCheckpointBarrierHandler().setEnableCheckpointAfterTasksFinished(true);\n\n        for (BufferOrEvent bufferOrEvent : sequence) {\n            check(bufferOrEvent, inputGate.pollNext().get(), PAGE_SIZE);\n        }\n\n        assertThat(validator.triggeredCheckpoints, contains(6L, 7L));\n        assertEquals(0, validator.getAbortedCheckpointCounter());\n        assertThat(inputGate.getCheckpointBarrierHandler().isCheckpointPending(), equalTo(false));\n    }\n","realPath":"flink-streaming-java/src/test/java/org/apache/flink/streaming/runtime/io/checkpointing/AlignedCheckpointsTest.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":1100,"status":"M"}],"commitId":"7c902745fff13e70908d32084d2888a69e13fc8b","commitMessage":"@@@[FLINK-23460] Use a global feature flag in the CheckpointBarrierHandler\n","date":"2021-07-28 18:47:48","modifiedFileCount":"21","status":"M","submitter":"Dawid Wysakowicz"}]
