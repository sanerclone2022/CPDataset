[{"authorTime":"2018-03-02 22:11:36","codes":[{"authorDate":"2019-03-13 22:49:01","commitOrder":7,"curCode":"\tpublic String stopWithSavepoint(\n\t\t\tfinal JobID jobId,\n\t\t\tfinal boolean advanceToEndOfTime,\n\t\t\t@Nullable final String savepointDirectory) throws Exception {\n\n\t\tfinal StopWithSavepointTriggerHeaders stopWithSavepointTriggerHeaders = StopWithSavepointTriggerHeaders.getInstance();\n\n\t\tfinal SavepointTriggerMessageParameters stopWithSavepointTriggerMessageParameters =\n\t\t\t\tstopWithSavepointTriggerHeaders.getUnresolvedMessageParameters();\n\t\tstopWithSavepointTriggerMessageParameters.jobID.resolve(jobId);\n\n\t\tfinal CompletableFuture<TriggerResponse> responseFuture = sendRequest(\n\t\t\t\tstopWithSavepointTriggerHeaders,\n\t\t\t\tstopWithSavepointTriggerMessageParameters,\n\t\t\t\tnew StopWithSavepointRequestBody(savepointDirectory, advanceToEndOfTime));\n\n\t\treturn responseFuture.thenCompose(savepointTriggerResponseBody -> {\n\t\t\tfinal TriggerId savepointTriggerId = savepointTriggerResponseBody.getTriggerId();\n\t\t\treturn pollSavepointAsync(jobId, savepointTriggerId);\n\t\t}).thenApply(savepointInfo -> {\n\t\t\tif (savepointInfo.getFailureCause() != null) {\n\t\t\t\tthrow new CompletionException(savepointInfo.getFailureCause());\n\t\t\t}\n\t\t\treturn savepointInfo.getLocation();\n\t\t}).get();\n\t}\n","date":"2019-04-17 20:37:50","endLine":427,"groupId":"19889","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"stopWithSavepoint","params":"(finalJobIDjobId@finalbooleanadvanceToEndOfTime@@NullablefinalStringsavepointDirectory)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/91/a722eea8c7c75cadc9b53b8c225ffb7296b623.src","preCode":"\tpublic String stopWithSavepoint(\n\t\t\tfinal JobID jobId,\n\t\t\tfinal boolean advanceToEndOfTime,\n\t\t\t@Nullable final String savepointDirectory) throws Exception {\n\n\t\tfinal StopWithSavepointTriggerHeaders stopWithSavepointTriggerHeaders = StopWithSavepointTriggerHeaders.getInstance();\n\n\t\tfinal SavepointTriggerMessageParameters stopWithSavepointTriggerMessageParameters =\n\t\t\t\tstopWithSavepointTriggerHeaders.getUnresolvedMessageParameters();\n\t\tstopWithSavepointTriggerMessageParameters.jobID.resolve(jobId);\n\n\t\tfinal CompletableFuture<TriggerResponse> responseFuture = sendRequest(\n\t\t\t\tstopWithSavepointTriggerHeaders,\n\t\t\t\tstopWithSavepointTriggerMessageParameters,\n\t\t\t\tnew StopWithSavepointRequestBody(savepointDirectory, advanceToEndOfTime));\n\n\t\treturn responseFuture.thenCompose(savepointTriggerResponseBody -> {\n\t\t\tfinal TriggerId savepointTriggerId = savepointTriggerResponseBody.getTriggerId();\n\t\t\treturn pollSavepointAsync(jobId, savepointTriggerId);\n\t\t}).thenApply(savepointInfo -> {\n\t\t\tif (savepointInfo.getFailureCause() != null) {\n\t\t\t\tthrow new CompletionException(savepointInfo.getFailureCause());\n\t\t\t}\n\t\t\treturn savepointInfo.getLocation();\n\t\t}).get();\n\t}\n","realPath":"flink-clients/src/main/java/org/apache/flink/client/program/rest/RestClusterClient.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":402,"status":"B"},{"authorDate":"2018-03-02 22:11:36","commitOrder":7,"curCode":"\tprivate CompletableFuture<String> triggerSavepoint(\n\t\t\tfinal JobID jobId,\n\t\t\tfinal @Nullable String savepointDirectory,\n\t\t\tfinal boolean cancelJob) {\n\t\tfinal SavepointTriggerHeaders savepointTriggerHeaders = SavepointTriggerHeaders.getInstance();\n\t\tfinal SavepointTriggerMessageParameters savepointTriggerMessageParameters =\n\t\t\tsavepointTriggerHeaders.getUnresolvedMessageParameters();\n\t\tsavepointTriggerMessageParameters.jobID.resolve(jobId);\n\n\t\tfinal CompletableFuture<TriggerResponse> responseFuture = sendRequest(\n\t\t\tsavepointTriggerHeaders,\n\t\t\tsavepointTriggerMessageParameters,\n\t\t\tnew SavepointTriggerRequestBody(savepointDirectory, cancelJob));\n\n\t\treturn responseFuture.thenCompose(savepointTriggerResponseBody -> {\n\t\t\tfinal TriggerId savepointTriggerId = savepointTriggerResponseBody.getTriggerId();\n\t\t\treturn pollSavepointAsync(jobId, savepointTriggerId);\n\t\t}).thenApply(savepointInfo -> {\n\t\t\tif (savepointInfo.getFailureCause() != null) {\n\t\t\t\tthrow new CompletionException(savepointInfo.getFailureCause());\n\t\t\t}\n\t\t\treturn savepointInfo.getLocation();\n\t\t});\n\t}\n","date":"2018-03-03 07:23:12","endLine":390,"groupId":"31056","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"triggerSavepoint","params":"(finalJobIDjobId@final@NullableStringsavepointDirectory@finalbooleancancelJob)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/56/0a10e955072f6b12bc4eb2c77f16c57af4d51b.src","preCode":"\tprivate CompletableFuture<String> triggerSavepoint(\n\t\t\tfinal JobID jobId,\n\t\t\tfinal @Nullable String savepointDirectory,\n\t\t\tfinal boolean cancelJob) {\n\t\tfinal SavepointTriggerHeaders savepointTriggerHeaders = SavepointTriggerHeaders.getInstance();\n\t\tfinal SavepointTriggerMessageParameters savepointTriggerMessageParameters =\n\t\t\tsavepointTriggerHeaders.getUnresolvedMessageParameters();\n\t\tsavepointTriggerMessageParameters.jobID.resolve(jobId);\n\n\t\tfinal CompletableFuture<TriggerResponse> responseFuture = sendRequest(\n\t\t\tsavepointTriggerHeaders,\n\t\t\tsavepointTriggerMessageParameters,\n\t\t\tnew SavepointTriggerRequestBody(savepointDirectory, cancelJob));\n\n\t\treturn responseFuture.thenCompose(savepointTriggerResponseBody -> {\n\t\t\tfinal TriggerId savepointTriggerId = savepointTriggerResponseBody.getTriggerId();\n\t\t\treturn pollSavepointAsync(jobId, savepointTriggerId);\n\t\t}).thenApply(savepointInfo -> {\n\t\t\tif (savepointInfo.getFailureCause() != null) {\n\t\t\t\tthrow new CompletionException(savepointInfo.getFailureCause());\n\t\t\t}\n\t\t\treturn savepointInfo.getLocation();\n\t\t});\n\t}\n","realPath":"flink-clients/src/main/java/org/apache/flink/client/program/rest/RestClusterClient.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":367,"status":"NB"}],"commitId":"c28c6e818c9447b689bb89fe65180bbd0b4c0c8f","commitMessage":"@@@[FLINK-11670][FLINK-11671][rest][cli] Expose Suspend/Drain via REST and CLI.\n","date":"2019-04-17 20:37:50","modifiedFileCount":"14","status":"M","submitter":"Kostas Kloudas"},{"authorTime":"2018-03-02 22:11:36","codes":[{"authorDate":"2019-11-08 10:23:59","commitOrder":8,"curCode":"\tpublic CompletableFuture<String> stopWithSavepoint(\n\t\t\tfinal JobID jobId,\n\t\t\tfinal boolean advanceToEndOfTime,\n\t\t\t@Nullable final String savepointDirectory) {\n\n\t\tfinal StopWithSavepointTriggerHeaders stopWithSavepointTriggerHeaders = StopWithSavepointTriggerHeaders.getInstance();\n\n\t\tfinal SavepointTriggerMessageParameters stopWithSavepointTriggerMessageParameters =\n\t\t\t\tstopWithSavepointTriggerHeaders.getUnresolvedMessageParameters();\n\t\tstopWithSavepointTriggerMessageParameters.jobID.resolve(jobId);\n\n\t\tfinal CompletableFuture<TriggerResponse> responseFuture = sendRequest(\n\t\t\t\tstopWithSavepointTriggerHeaders,\n\t\t\t\tstopWithSavepointTriggerMessageParameters,\n\t\t\t\tnew StopWithSavepointRequestBody(savepointDirectory, advanceToEndOfTime));\n\n\t\treturn responseFuture.thenCompose(savepointTriggerResponseBody -> {\n\t\t\tfinal TriggerId savepointTriggerId = savepointTriggerResponseBody.getTriggerId();\n\t\t\treturn pollSavepointAsync(jobId, savepointTriggerId);\n\t\t}).thenApply(savepointInfo -> {\n\t\t\tif (savepointInfo.getFailureCause() != null) {\n\t\t\t\tthrow new CompletionException(savepointInfo.getFailureCause());\n\t\t\t}\n\t\t\treturn savepointInfo.getLocation();\n\t\t});\n\t}\n","date":"2019-11-08 10:23:59","endLine":371,"groupId":"101840","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"stopWithSavepoint","params":"(finalJobIDjobId@finalbooleanadvanceToEndOfTime@@NullablefinalStringsavepointDirectory)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/c6/e195415df45c2d39d5dd5f469ac60d0884672b.src","preCode":"\tpublic String stopWithSavepoint(\n\t\t\tfinal JobID jobId,\n\t\t\tfinal boolean advanceToEndOfTime,\n\t\t\t@Nullable final String savepointDirectory) throws Exception {\n\n\t\tfinal StopWithSavepointTriggerHeaders stopWithSavepointTriggerHeaders = StopWithSavepointTriggerHeaders.getInstance();\n\n\t\tfinal SavepointTriggerMessageParameters stopWithSavepointTriggerMessageParameters =\n\t\t\t\tstopWithSavepointTriggerHeaders.getUnresolvedMessageParameters();\n\t\tstopWithSavepointTriggerMessageParameters.jobID.resolve(jobId);\n\n\t\tfinal CompletableFuture<TriggerResponse> responseFuture = sendRequest(\n\t\t\t\tstopWithSavepointTriggerHeaders,\n\t\t\t\tstopWithSavepointTriggerMessageParameters,\n\t\t\t\tnew StopWithSavepointRequestBody(savepointDirectory, advanceToEndOfTime));\n\n\t\treturn responseFuture.thenCompose(savepointTriggerResponseBody -> {\n\t\t\tfinal TriggerId savepointTriggerId = savepointTriggerResponseBody.getTriggerId();\n\t\t\treturn pollSavepointAsync(jobId, savepointTriggerId);\n\t\t}).thenApply(savepointInfo -> {\n\t\t\tif (savepointInfo.getFailureCause() != null) {\n\t\t\t\tthrow new CompletionException(savepointInfo.getFailureCause());\n\t\t\t}\n\t\t\treturn savepointInfo.getLocation();\n\t\t}).get();\n\t}\n","realPath":"flink-clients/src/main/java/org/apache/flink/client/program/rest/RestClusterClient.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":346,"status":"M"},{"authorDate":"2018-03-02 22:11:36","commitOrder":8,"curCode":"\tprivate CompletableFuture<String> triggerSavepoint(\n\t\t\tfinal JobID jobId,\n\t\t\tfinal @Nullable String savepointDirectory,\n\t\t\tfinal boolean cancelJob) {\n\t\tfinal SavepointTriggerHeaders savepointTriggerHeaders = SavepointTriggerHeaders.getInstance();\n\t\tfinal SavepointTriggerMessageParameters savepointTriggerMessageParameters =\n\t\t\tsavepointTriggerHeaders.getUnresolvedMessageParameters();\n\t\tsavepointTriggerMessageParameters.jobID.resolve(jobId);\n\n\t\tfinal CompletableFuture<TriggerResponse> responseFuture = sendRequest(\n\t\t\tsavepointTriggerHeaders,\n\t\t\tsavepointTriggerMessageParameters,\n\t\t\tnew SavepointTriggerRequestBody(savepointDirectory, cancelJob));\n\n\t\treturn responseFuture.thenCompose(savepointTriggerResponseBody -> {\n\t\t\tfinal TriggerId savepointTriggerId = savepointTriggerResponseBody.getTriggerId();\n\t\t\treturn pollSavepointAsync(jobId, savepointTriggerId);\n\t\t}).thenApply(savepointInfo -> {\n\t\t\tif (savepointInfo.getFailureCause() != null) {\n\t\t\t\tthrow new CompletionException(savepointInfo.getFailureCause());\n\t\t\t}\n\t\t\treturn savepointInfo.getLocation();\n\t\t});\n\t}\n","date":"2018-03-03 07:23:12","endLine":390,"groupId":"101840","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"triggerSavepoint","params":"(finalJobIDjobId@final@NullableStringsavepointDirectory@finalbooleancancelJob)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/56/0a10e955072f6b12bc4eb2c77f16c57af4d51b.src","preCode":"\tprivate CompletableFuture<String> triggerSavepoint(\n\t\t\tfinal JobID jobId,\n\t\t\tfinal @Nullable String savepointDirectory,\n\t\t\tfinal boolean cancelJob) {\n\t\tfinal SavepointTriggerHeaders savepointTriggerHeaders = SavepointTriggerHeaders.getInstance();\n\t\tfinal SavepointTriggerMessageParameters savepointTriggerMessageParameters =\n\t\t\tsavepointTriggerHeaders.getUnresolvedMessageParameters();\n\t\tsavepointTriggerMessageParameters.jobID.resolve(jobId);\n\n\t\tfinal CompletableFuture<TriggerResponse> responseFuture = sendRequest(\n\t\t\tsavepointTriggerHeaders,\n\t\t\tsavepointTriggerMessageParameters,\n\t\t\tnew SavepointTriggerRequestBody(savepointDirectory, cancelJob));\n\n\t\treturn responseFuture.thenCompose(savepointTriggerResponseBody -> {\n\t\t\tfinal TriggerId savepointTriggerId = savepointTriggerResponseBody.getTriggerId();\n\t\t\treturn pollSavepointAsync(jobId, savepointTriggerId);\n\t\t}).thenApply(savepointInfo -> {\n\t\t\tif (savepointInfo.getFailureCause() != null) {\n\t\t\t\tthrow new CompletionException(savepointInfo.getFailureCause());\n\t\t\t}\n\t\t\treturn savepointInfo.getLocation();\n\t\t});\n\t}\n","realPath":"flink-clients/src/main/java/org/apache/flink/client/program/rest/RestClusterClient.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":367,"status":"N"}],"commitId":"d938c19480c220344827271ff8da729cd91735b3","commitMessage":"@@@[FLINK-14593][client] Port ClusterClient to asynchronous interface version\n\nThis closes #10069 .\n","date":"2019-11-08 10:23:59","modifiedFileCount":"27","status":"M","submitter":"tison"}]
