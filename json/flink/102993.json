[{"authorTime":"2015-12-02 00:31:32","codes":[{"authorDate":"2015-12-02 00:31:32","commitOrder":1,"curCode":"\tpublic void testNodeHashIdenticalNodes() throws Exception {\n\t\tStreamExecutionEnvironment env = StreamExecutionEnvironment.createLocalEnvironment();\n\t\tenv.setParallelism(4);\n\t\tenv.disableOperatorChaining();\n\n\t\tDataStream<String> src = env.addSource(new NoOpSourceFunction());\n\n\t\tsrc.map(new NoOpMapFunction()).addSink(new NoOpSinkFunction());\n\n\t\tsrc.map(new NoOpMapFunction()).addSink(new NoOpSinkFunction());\n\n\t\tJobGraph jobGraph = env.getStreamGraph().getJobGraph();\n\t\tSet<JobVertexID> vertexIds = new HashSet<>();\n\t\tfor (JobVertex vertex : jobGraph.getVertices()) {\n\t\t\tassertTrue(vertexIds.add(vertex.getID()));\n\t\t}\n\t}\n","date":"2016-01-11 23:30:42","endLine":320,"groupId":"33562","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testNodeHashIdenticalNodes","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/98/750d098f67c84bb1cde91f5a2fd44270bf3c98.src","preCode":"\tpublic void testNodeHashIdenticalNodes() throws Exception {\n\t\tStreamExecutionEnvironment env = StreamExecutionEnvironment.createLocalEnvironment();\n\t\tenv.setParallelism(4);\n\t\tenv.disableOperatorChaining();\n\n\t\tDataStream<String> src = env.addSource(new NoOpSourceFunction());\n\n\t\tsrc.map(new NoOpMapFunction()).addSink(new NoOpSinkFunction());\n\n\t\tsrc.map(new NoOpMapFunction()).addSink(new NoOpSinkFunction());\n\n\t\tJobGraph jobGraph = env.getStreamGraph().getJobGraph();\n\t\tSet<JobVertexID> vertexIds = new HashSet<>();\n\t\tfor (JobVertex vertex : jobGraph.getVertices()) {\n\t\t\tassertTrue(vertexIds.add(vertex.getID()));\n\t\t}\n\t}\n","realPath":"flink-streaming-java/src/test/java/org/apache/flink/streaming/graph/StreamingJobGraphGeneratorNodeHashTest.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":304,"status":"B"},{"authorDate":"2015-12-02 00:31:32","commitOrder":1,"curCode":"\tpublic void testManualHashAssignment() throws Exception {\n\t\tStreamExecutionEnvironment env = StreamExecutionEnvironment.createLocalEnvironment();\n\t\tenv.setParallelism(4);\n\t\tenv.disableOperatorChaining();\n\n\t\tDataStream<String> src = env.addSource(new NoOpSourceFunction())\n\t\t\t\t.name(\"source\").uid(\"source\");\n\n\t\tsrc.map(new NoOpMapFunction())\n\t\t\t\t.addSink(new NoOpSinkFunction())\n\t\t\t\t.name(\"sink0\").uid(\"sink0\");\n\n\t\tsrc.map(new NoOpMapFunction())\n\t\t\t\t.addSink(new NoOpSinkFunction())\n\t\t\t\t.name(\"sink1\").uid(\"sink1\");\n\n\t\tJobGraph jobGraph = env.getStreamGraph().getJobGraph();\n\t\tSet<JobVertexID> ids = new HashSet<>();\n\t\tfor (JobVertex vertex : jobGraph.getVertices()) {\n\t\t\tassertTrue(ids.add(vertex.getID()));\n\t\t}\n\n\t\t\r\n\t\tenv = StreamExecutionEnvironment.createLocalEnvironment();\n\t\tenv.setParallelism(4);\n\t\tenv.disableOperatorChaining();\n\n\t\tsrc = env.addSource(new NoOpSourceFunction())\n\t\t\t\t\r\n\t\t\t\t.map(new NoOpMapFunction())\n\t\t\t\t.name(\"source\").uid(\"source\");\n\n\t\tsrc.map(new NoOpMapFunction())\n\t\t\t\t.keyBy(new NoOpKeySelector())\n\t\t\t\t.reduce(new NoOpReduceFunction())\n\t\t\t\t.addSink(new NoOpSinkFunction())\n\t\t\t\t.name(\"sink0\").uid(\"sink0\");\n\n\t\tsrc.map(new NoOpMapFunction())\n\t\t\t\t.keyBy(new NoOpKeySelector())\n\t\t\t\t.reduce(new NoOpReduceFunction())\n\t\t\t\t.addSink(new NoOpSinkFunction())\n\t\t\t\t.name(\"sink1\").uid(\"sink1\");\n\n\t\tJobGraph newJobGraph = env.getStreamGraph().getJobGraph();\n\t\tassertNotEquals(jobGraph.getJobID(), newJobGraph.getJobID());\n\n\t\tfor (JobVertex vertex : newJobGraph.getVertices()) {\n\t\t\t\r\n\t\t\tif (vertex.getName().endsWith(\"source\")\n\t\t\t\t\t|| vertex.getName().endsWith(\"sink0\")\n\t\t\t\t\t|| vertex.getName().endsWith(\"sink1\")) {\n\n\t\t\t\tassertTrue(ids.contains(vertex.getID()));\n\t\t\t}\n\t\t}\n\t}\n","date":"2016-01-11 23:30:42","endLine":398,"groupId":"33564","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testManualHashAssignment","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/98/750d098f67c84bb1cde91f5a2fd44270bf3c98.src","preCode":"\tpublic void testManualHashAssignment() throws Exception {\n\t\tStreamExecutionEnvironment env = StreamExecutionEnvironment.createLocalEnvironment();\n\t\tenv.setParallelism(4);\n\t\tenv.disableOperatorChaining();\n\n\t\tDataStream<String> src = env.addSource(new NoOpSourceFunction())\n\t\t\t\t.name(\"source\").uid(\"source\");\n\n\t\tsrc.map(new NoOpMapFunction())\n\t\t\t\t.addSink(new NoOpSinkFunction())\n\t\t\t\t.name(\"sink0\").uid(\"sink0\");\n\n\t\tsrc.map(new NoOpMapFunction())\n\t\t\t\t.addSink(new NoOpSinkFunction())\n\t\t\t\t.name(\"sink1\").uid(\"sink1\");\n\n\t\tJobGraph jobGraph = env.getStreamGraph().getJobGraph();\n\t\tSet<JobVertexID> ids = new HashSet<>();\n\t\tfor (JobVertex vertex : jobGraph.getVertices()) {\n\t\t\tassertTrue(ids.add(vertex.getID()));\n\t\t}\n\n\t\t\r\n\t\tenv = StreamExecutionEnvironment.createLocalEnvironment();\n\t\tenv.setParallelism(4);\n\t\tenv.disableOperatorChaining();\n\n\t\tsrc = env.addSource(new NoOpSourceFunction())\n\t\t\t\t\r\n\t\t\t\t.map(new NoOpMapFunction())\n\t\t\t\t.name(\"source\").uid(\"source\");\n\n\t\tsrc.map(new NoOpMapFunction())\n\t\t\t\t.keyBy(new NoOpKeySelector())\n\t\t\t\t.reduce(new NoOpReduceFunction())\n\t\t\t\t.addSink(new NoOpSinkFunction())\n\t\t\t\t.name(\"sink0\").uid(\"sink0\");\n\n\t\tsrc.map(new NoOpMapFunction())\n\t\t\t\t.keyBy(new NoOpKeySelector())\n\t\t\t\t.reduce(new NoOpReduceFunction())\n\t\t\t\t.addSink(new NoOpSinkFunction())\n\t\t\t\t.name(\"sink1\").uid(\"sink1\");\n\n\t\tJobGraph newJobGraph = env.getStreamGraph().getJobGraph();\n\t\tassertNotEquals(jobGraph.getJobID(), newJobGraph.getJobID());\n\n\t\tfor (JobVertex vertex : newJobGraph.getVertices()) {\n\t\t\t\r\n\t\t\tif (vertex.getName().endsWith(\"source\")\n\t\t\t\t\t|| vertex.getName().endsWith(\"sink0\")\n\t\t\t\t\t|| vertex.getName().endsWith(\"sink1\")) {\n\n\t\t\t\tassertTrue(ids.contains(vertex.getID()));\n\t\t\t}\n\t\t}\n\t}\n","realPath":"flink-streaming-java/src/test/java/org/apache/flink/streaming/graph/StreamingJobGraphGeneratorNodeHashTest.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":342,"status":"B"}],"commitId":"ad7b21b8de28133d43076c889f7afae5c27cba29","commitMessage":"@@@[FLINK-2976] [streaming-java.  streaming-scala] Set JobVertexID based on stream node hash\n\n[comments] Remove unused argument to method\n\n[comments] Add more comments to stream node hashing\n\nAdd name to hash in order to detect swapped nodes when they have names\n\nImprove error message on non-unique user-specified IDs\n\n[comments] Add comment to stream node hashing\n","date":"2016-01-11 23:30:42","modifiedFileCount":"9","status":"B","submitter":"Ufuk Celebi"},{"authorTime":"2019-07-30 17:35:06","codes":[{"authorDate":"2019-07-30 17:35:06","commitOrder":2,"curCode":"\tpublic void testNodeHashIdenticalNodes() throws Exception {\n\t\tStreamExecutionEnvironment env = StreamExecutionEnvironment.createLocalEnvironment();\n\t\tenv.setParallelism(4);\n\t\tenv.disableOperatorChaining();\n\n\t\tDataStream<String> src = env.addSource(new NoOpSourceFunction());\n\n\t\tsrc.map(new NoOpMapFunction()).addSink(new DiscardingSink<>());\n\n\t\tsrc.map(new NoOpMapFunction()).addSink(new DiscardingSink<>());\n\n\t\tJobGraph jobGraph = env.getStreamGraph().getJobGraph();\n\t\tSet<JobVertexID> vertexIds = new HashSet<>();\n\t\tfor (JobVertex vertex : jobGraph.getVertices()) {\n\t\t\tassertTrue(vertexIds.add(vertex.getID()));\n\t\t}\n\t}\n","date":"2019-08-01 18:12:28","endLine":277,"groupId":"102993","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testNodeHashIdenticalNodes","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/92/a67c9bab82c09e433bedfd51c341d16b7ce4b6.src","preCode":"\tpublic void testNodeHashIdenticalNodes() throws Exception {\n\t\tStreamExecutionEnvironment env = StreamExecutionEnvironment.createLocalEnvironment();\n\t\tenv.setParallelism(4);\n\t\tenv.disableOperatorChaining();\n\n\t\tDataStream<String> src = env.addSource(new NoOpSourceFunction());\n\n\t\tsrc.map(new NoOpMapFunction()).addSink(new NoOpSinkFunction());\n\n\t\tsrc.map(new NoOpMapFunction()).addSink(new NoOpSinkFunction());\n\n\t\tJobGraph jobGraph = env.getStreamGraph().getJobGraph();\n\t\tSet<JobVertexID> vertexIds = new HashSet<>();\n\t\tfor (JobVertex vertex : jobGraph.getVertices()) {\n\t\t\tassertTrue(vertexIds.add(vertex.getID()));\n\t\t}\n\t}\n","realPath":"flink-streaming-java/src/test/java/org/apache/flink/streaming/graph/StreamingJobGraphGeneratorNodeHashTest.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":261,"status":"M"},{"authorDate":"2019-07-30 17:35:06","commitOrder":2,"curCode":"\tpublic void testManualHashAssignment() throws Exception {\n\t\tStreamExecutionEnvironment env = StreamExecutionEnvironment.createLocalEnvironment();\n\t\tenv.setParallelism(4);\n\t\tenv.disableOperatorChaining();\n\n\t\tDataStream<String> src = env.addSource(new NoOpSourceFunction())\n\t\t\t\t.name(\"source\").uid(\"source\");\n\n\t\tsrc.map(new NoOpMapFunction())\n\t\t\t\t.addSink(new DiscardingSink<>())\n\t\t\t\t.name(\"sink0\").uid(\"sink0\");\n\n\t\tsrc.map(new NoOpMapFunction())\n\t\t\t\t.addSink(new DiscardingSink<>())\n\t\t\t\t.name(\"sink1\").uid(\"sink1\");\n\n\t\tJobGraph jobGraph = env.getStreamGraph().getJobGraph();\n\t\tSet<JobVertexID> ids = new HashSet<>();\n\t\tfor (JobVertex vertex : jobGraph.getVertices()) {\n\t\t\tassertTrue(ids.add(vertex.getID()));\n\t\t}\n\n\t\t\r\n\t\tenv = StreamExecutionEnvironment.createLocalEnvironment();\n\t\tenv.setParallelism(4);\n\t\tenv.disableOperatorChaining();\n\n\t\tsrc = env.addSource(new NoOpSourceFunction())\n\t\t\t\t\r\n\t\t\t\t.map(new NoOpMapFunction())\n\t\t\t\t.name(\"source\").uid(\"source\");\n\n\t\tsrc.map(new NoOpMapFunction())\n\t\t\t\t.keyBy(new NoOpKeySelector())\n\t\t\t\t.reduce(new NoOpReduceFunction())\n\t\t\t\t.addSink(new DiscardingSink<>())\n\t\t\t\t.name(\"sink0\").uid(\"sink0\");\n\n\t\tsrc.map(new NoOpMapFunction())\n\t\t\t\t.keyBy(new NoOpKeySelector())\n\t\t\t\t.reduce(new NoOpReduceFunction())\n\t\t\t\t.addSink(new DiscardingSink<>())\n\t\t\t\t.name(\"sink1\").uid(\"sink1\");\n\n\t\tJobGraph newJobGraph = env.getStreamGraph().getJobGraph();\n\t\tassertNotEquals(jobGraph.getJobID(), newJobGraph.getJobID());\n\n\t\tfor (JobVertex vertex : newJobGraph.getVertices()) {\n\t\t\t\r\n\t\t\tif (vertex.getName().endsWith(\"source\")\n\t\t\t\t\t|| vertex.getName().endsWith(\"sink0\")\n\t\t\t\t\t|| vertex.getName().endsWith(\"sink1\")) {\n\n\t\t\t\tassertTrue(ids.contains(vertex.getID()));\n\t\t\t}\n\t\t}\n\t}\n","date":"2019-08-01 18:12:28","endLine":375,"groupId":"102993","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testManualHashAssignment","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/92/a67c9bab82c09e433bedfd51c341d16b7ce4b6.src","preCode":"\tpublic void testManualHashAssignment() throws Exception {\n\t\tStreamExecutionEnvironment env = StreamExecutionEnvironment.createLocalEnvironment();\n\t\tenv.setParallelism(4);\n\t\tenv.disableOperatorChaining();\n\n\t\tDataStream<String> src = env.addSource(new NoOpSourceFunction())\n\t\t\t\t.name(\"source\").uid(\"source\");\n\n\t\tsrc.map(new NoOpMapFunction())\n\t\t\t\t.addSink(new NoOpSinkFunction())\n\t\t\t\t.name(\"sink0\").uid(\"sink0\");\n\n\t\tsrc.map(new NoOpMapFunction())\n\t\t\t\t.addSink(new NoOpSinkFunction())\n\t\t\t\t.name(\"sink1\").uid(\"sink1\");\n\n\t\tJobGraph jobGraph = env.getStreamGraph().getJobGraph();\n\t\tSet<JobVertexID> ids = new HashSet<>();\n\t\tfor (JobVertex vertex : jobGraph.getVertices()) {\n\t\t\tassertTrue(ids.add(vertex.getID()));\n\t\t}\n\n\t\t\r\n\t\tenv = StreamExecutionEnvironment.createLocalEnvironment();\n\t\tenv.setParallelism(4);\n\t\tenv.disableOperatorChaining();\n\n\t\tsrc = env.addSource(new NoOpSourceFunction())\n\t\t\t\t\r\n\t\t\t\t.map(new NoOpMapFunction())\n\t\t\t\t.name(\"source\").uid(\"source\");\n\n\t\tsrc.map(new NoOpMapFunction())\n\t\t\t\t.keyBy(new NoOpKeySelector())\n\t\t\t\t.reduce(new NoOpReduceFunction())\n\t\t\t\t.addSink(new NoOpSinkFunction())\n\t\t\t\t.name(\"sink0\").uid(\"sink0\");\n\n\t\tsrc.map(new NoOpMapFunction())\n\t\t\t\t.keyBy(new NoOpKeySelector())\n\t\t\t\t.reduce(new NoOpReduceFunction())\n\t\t\t\t.addSink(new NoOpSinkFunction())\n\t\t\t\t.name(\"sink1\").uid(\"sink1\");\n\n\t\tJobGraph newJobGraph = env.getStreamGraph().getJobGraph();\n\t\tassertNotEquals(jobGraph.getJobID(), newJobGraph.getJobID());\n\n\t\tfor (JobVertex vertex : newJobGraph.getVertices()) {\n\t\t\t\r\n\t\t\tif (vertex.getName().endsWith(\"source\")\n\t\t\t\t\t|| vertex.getName().endsWith(\"sink0\")\n\t\t\t\t\t|| vertex.getName().endsWith(\"sink1\")) {\n\n\t\t\t\tassertTrue(ids.contains(vertex.getID()));\n\t\t\t}\n\t\t}\n\t}\n","realPath":"flink-streaming-java/src/test/java/org/apache/flink/streaming/graph/StreamingJobGraphGeneratorNodeHashTest.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":319,"status":"M"}],"commitId":"bd4328dbcea908191b669e53b57b790a4e627ecd","commitMessage":"@@@[FLINK-13376][datastream] Unify all no operation sinks with DiscardingSink\n","date":"2019-08-01 18:12:28","modifiedFileCount":"6","status":"M","submitter":"ifndef-SleePy"}]
