[{"authorTime":"2018-06-26 17:46:06","codes":[{"authorDate":"2020-07-30 21:09:26","commitOrder":2,"curCode":"\tprivate static int convertToTime(Object object) {\n\t\tfinal int millis;\n\t\tif (object instanceof Integer) {\n\t\t\tmillis = (Integer) object;\n\t\t} else {\n\t\t\t\r\n\t\t\tfinal org.joda.time.LocalTime value = (org.joda.time.LocalTime) object;\n\t\t\tmillis = value.get(DateTimeFieldType.millisOfDay());\n\t\t}\n\t\treturn millis;\n\t}\n","date":"2020-07-30 21:09:26","endLine":234,"groupId":"21456","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"convertToTime","params":"(Objectobject)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/57/f7629155537c016d8fa7451d1f87c009c51526.src","preCode":"\tprivate static int convertToTime(Object object) {\n\t\tfinal int millis;\n\t\tif (object instanceof Integer) {\n\t\t\tmillis = (Integer) object;\n\t\t} else {\n\t\t\t\r\n\t\t\tfinal org.joda.time.LocalTime value = (org.joda.time.LocalTime) object;\n\t\t\tmillis = value.get(DateTimeFieldType.millisOfDay());\n\t\t}\n\t\treturn millis;\n\t}\n","realPath":"flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/AvroToRowDataConverters.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":224,"status":"B"},{"authorDate":"2018-06-26 17:46:06","commitOrder":2,"curCode":"\tprivate Time convertToTime(Object object) {\n\t\tfinal long millis;\n\t\tif (object instanceof Integer) {\n\t\t\tmillis = (Integer) object;\n\t\t} else {\n\t\t\t\r\n\t\t\tfinal LocalTime value = (LocalTime) object;\n\t\t\tmillis = (long) value.get(DateTimeFieldType.millisOfDay());\n\t\t}\n\t\treturn new Time(millis - LOCAL_TZ.getOffset(millis));\n\t}\n","date":"2018-07-03 21:40:44","endLine":304,"groupId":"656","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"convertToTime","params":"(Objectobject)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/c3/6a4be13b54efc229d47ca3c9b467b6446c57d9.src","preCode":"\tprivate Time convertToTime(Object object) {\n\t\tfinal long millis;\n\t\tif (object instanceof Integer) {\n\t\t\tmillis = (Integer) object;\n\t\t} else {\n\t\t\t\r\n\t\t\tfinal LocalTime value = (LocalTime) object;\n\t\t\tmillis = (long) value.get(DateTimeFieldType.millisOfDay());\n\t\t}\n\t\treturn new Time(millis - LOCAL_TZ.getOffset(millis));\n\t}\n","realPath":"flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/AvroRowDeserializationSchema.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":294,"status":"NB"}],"commitId":"1c09c23810cf844001dd70d3b78a7a60b49611c7","commitMessage":"@@@[FLINK-16048][avro] Support read/write confluent schema registry avro data from Kafka\n\n","date":"2020-07-30 21:09:26","modifiedFileCount":"11","status":"M","submitter":"Danny Chan"},{"authorTime":"2020-09-10 16:23:29","codes":[{"authorDate":"2020-09-10 16:23:29","commitOrder":3,"curCode":"\tprivate static int convertToTime(Object object) {\n\t\tfinal int millis;\n\t\tif (object instanceof Integer) {\n\t\t\tmillis = (Integer) object;\n\t\t} else {\n\t\t\tJodaConverter jodaConverter = JodaConverter.getConverter();\n\t\t\tif (jodaConverter != null) {\n\t\t\t\tmillis = jodaConverter.convertTime(object);\n\t\t\t} else {\n\t\t\t\tthrow new IllegalArgumentException(\"Unexpected object type for TIME logical type. Received: \" + object);\n\t\t\t}\n\t\t}\n\t\treturn millis;\n\t}\n","date":"2020-09-15 03:46:09","endLine":238,"groupId":"8788","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"convertToTime","params":"(Objectobject)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/b3/40cba73ddb3960ab2b8ac78004436145c385c9.src","preCode":"\tprivate static int convertToTime(Object object) {\n\t\tfinal int millis;\n\t\tif (object instanceof Integer) {\n\t\t\tmillis = (Integer) object;\n\t\t} else {\n\t\t\t\r\n\t\t\tfinal org.joda.time.LocalTime value = (org.joda.time.LocalTime) object;\n\t\t\tmillis = value.get(DateTimeFieldType.millisOfDay());\n\t\t}\n\t\treturn millis;\n\t}\n","realPath":"flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/AvroToRowDataConverters.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":225,"status":"M"},{"authorDate":"2020-09-10 16:23:29","commitOrder":3,"curCode":"\tprivate Time convertToTime(Object object) {\n\t\tfinal long millis;\n\t\tif (object instanceof Integer) {\n\t\t\tmillis = (Integer) object;\n\t\t} else if (jodaConverter != null) {\n\t\t\tmillis = jodaConverter.convertTime(object);\n\t\t} else {\n\t\t\tthrow new IllegalArgumentException(\"Unexpected object type for DATE logical type. Received: \" + object);\n\t\t}\n\t\treturn new Time(millis - LOCAL_TZ.getOffset(millis));\n\t}\n","date":"2020-09-15 03:46:09","endLine":338,"groupId":"15740","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"convertToTime","params":"(Objectobject)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/fb/7a74e4c45360ccd65b2536099a19ca583310b2.src","preCode":"\tprivate Time convertToTime(Object object) {\n\t\tfinal long millis;\n\t\tif (object instanceof Integer) {\n\t\t\tmillis = (Integer) object;\n\t\t} else {\n\t\t\t\r\n\t\t\tfinal LocalTime value = (LocalTime) object;\n\t\t\tmillis = (long) value.get(DateTimeFieldType.millisOfDay());\n\t\t}\n\t\treturn new Time(millis - LOCAL_TZ.getOffset(millis));\n\t}\n","realPath":"flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/AvroRowDeserializationSchema.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":328,"status":"M"}],"commitId":"09616cba088da907f6d279f959ea8d42e0434e9b","commitMessage":"@@@[hotfix] Extract joda conversions to a separate class\n","date":"2020-09-15 03:46:09","modifiedFileCount":"2","status":"M","submitter":"Dawid Wysakowicz"},{"authorTime":"2020-09-12 00:13:53","codes":[{"authorDate":"2020-09-10 16:23:29","commitOrder":4,"curCode":"\tprivate static int convertToTime(Object object) {\n\t\tfinal int millis;\n\t\tif (object instanceof Integer) {\n\t\t\tmillis = (Integer) object;\n\t\t} else {\n\t\t\tJodaConverter jodaConverter = JodaConverter.getConverter();\n\t\t\tif (jodaConverter != null) {\n\t\t\t\tmillis = jodaConverter.convertTime(object);\n\t\t\t} else {\n\t\t\t\tthrow new IllegalArgumentException(\"Unexpected object type for TIME logical type. Received: \" + object);\n\t\t\t}\n\t\t}\n\t\treturn millis;\n\t}\n","date":"2020-09-15 03:46:09","endLine":238,"groupId":"8788","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"convertToTime","params":"(Objectobject)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/b3/40cba73ddb3960ab2b8ac78004436145c385c9.src","preCode":"\tprivate static int convertToTime(Object object) {\n\t\tfinal int millis;\n\t\tif (object instanceof Integer) {\n\t\t\tmillis = (Integer) object;\n\t\t} else {\n\t\t\tJodaConverter jodaConverter = JodaConverter.getConverter();\n\t\t\tif (jodaConverter != null) {\n\t\t\t\tmillis = jodaConverter.convertTime(object);\n\t\t\t} else {\n\t\t\t\tthrow new IllegalArgumentException(\"Unexpected object type for TIME logical type. Received: \" + object);\n\t\t\t}\n\t\t}\n\t\treturn millis;\n\t}\n","realPath":"flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/AvroToRowDataConverters.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":225,"status":"N"},{"authorDate":"2020-09-12 00:13:53","commitOrder":4,"curCode":"\tprivate Time convertToTime(Object object) {\n\t\tfinal long millis;\n\t\tif (object instanceof Integer) {\n\t\t\tmillis = (Integer) object;\n\t\t} else if (object instanceof Long) {\n\t\t\tmillis = (Long) object / 1000L;\n\t\t} else if (jodaConverter != null) {\n\t\t\tmillis = jodaConverter.convertTime(object);\n\t\t} else {\n\t\t\tthrow new IllegalArgumentException(\"Unexpected object type for DATE logical type. Received: \" + object);\n\t\t}\n\t\treturn new Time(millis - LOCAL_TZ.getOffset(millis));\n\t}\n","date":"2020-09-15 03:46:09","endLine":343,"groupId":"15740","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"convertToTime","params":"(Objectobject)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/54/53f67368b92fc0223568433d02672ec44c800d.src","preCode":"\tprivate Time convertToTime(Object object) {\n\t\tfinal long millis;\n\t\tif (object instanceof Integer) {\n\t\t\tmillis = (Integer) object;\n\t\t} else if (jodaConverter != null) {\n\t\t\tmillis = jodaConverter.convertTime(object);\n\t\t} else {\n\t\t\tthrow new IllegalArgumentException(\"Unexpected object type for DATE logical type. Received: \" + object);\n\t\t}\n\t\treturn new Time(millis - LOCAL_TZ.getOffset(millis));\n\t}\n","realPath":"flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/AvroRowDeserializationSchema.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":331,"status":"M"}],"commitId":"6ac804852237aa36a0477757a3cdacd9b69e7dc5","commitMessage":"@@@[hotfix] Fix time-micros and timestamp-micros handling\n","date":"2020-09-15 03:46:09","modifiedFileCount":"11","status":"M","submitter":"Dawid Wysakowicz"},{"authorTime":"2020-09-10 16:28:25","codes":[{"authorDate":"2020-09-10 16:28:25","commitOrder":5,"curCode":"\tprivate static int convertToTime(Object object) {\n\t\tfinal int millis;\n\t\tif (object instanceof Integer) {\n\t\t\tmillis = (Integer) object;\n\t\t} else if (object instanceof LocalTime) {\n\t\t\tmillis = ((LocalTime) object).get(ChronoField.MILLI_OF_DAY);\n\t\t} else {\n\t\t\tJodaConverter jodaConverter = JodaConverter.getConverter();\n\t\t\tif (jodaConverter != null) {\n\t\t\t\tmillis = jodaConverter.convertTime(object);\n\t\t\t} else {\n\t\t\t\tthrow new IllegalArgumentException(\"Unexpected object type for TIME logical type. Received: \" + object);\n\t\t\t}\n\t\t}\n\t\treturn millis;\n\t}\n","date":"2020-09-15 03:46:09","endLine":243,"groupId":"101961","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"convertToTime","params":"(Objectobject)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/34/6ccf67760d1180540a8790f67470e3052a911b.src","preCode":"\tprivate static int convertToTime(Object object) {\n\t\tfinal int millis;\n\t\tif (object instanceof Integer) {\n\t\t\tmillis = (Integer) object;\n\t\t} else {\n\t\t\tJodaConverter jodaConverter = JodaConverter.getConverter();\n\t\t\tif (jodaConverter != null) {\n\t\t\t\tmillis = jodaConverter.convertTime(object);\n\t\t\t} else {\n\t\t\t\tthrow new IllegalArgumentException(\"Unexpected object type for TIME logical type. Received: \" + object);\n\t\t\t}\n\t\t}\n\t\treturn millis;\n\t}\n","realPath":"flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/AvroToRowDataConverters.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":228,"status":"M"},{"authorDate":"2020-09-10 16:28:25","commitOrder":5,"curCode":"\tprivate Time convertToTime(Object object) {\n\t\tfinal long millis;\n\t\tif (object instanceof Integer) {\n\t\t\tmillis = (Integer) object;\n\t\t} else if (object instanceof Long) {\n\t\t\tmillis = (Long) object / 1000L;\n\t\t} else if (object instanceof LocalTime) {\n\t\t\tmillis = ((LocalTime) object).get(ChronoField.MILLI_OF_DAY);\n\t\t} else if (jodaConverter != null) {\n\t\t\tmillis = jodaConverter.convertTime(object);\n\t\t} else {\n\t\t\tthrow new IllegalArgumentException(\"Unexpected object type for DATE logical type. Received: \" + object);\n\t\t}\n\t\treturn new Time(millis - LOCAL_TZ.getOffset(millis));\n\t}\n","date":"2020-09-15 03:46:09","endLine":352,"groupId":"101961","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"convertToTime","params":"(Objectobject)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/65/d9ede9f72296829c8c5fac497a9f9df0098fd1.src","preCode":"\tprivate Time convertToTime(Object object) {\n\t\tfinal long millis;\n\t\tif (object instanceof Integer) {\n\t\t\tmillis = (Integer) object;\n\t\t} else if (object instanceof Long) {\n\t\t\tmillis = (Long) object / 1000L;\n\t\t} else if (jodaConverter != null) {\n\t\t\tmillis = jodaConverter.convertTime(object);\n\t\t} else {\n\t\t\tthrow new IllegalArgumentException(\"Unexpected object type for DATE logical type. Received: \" + object);\n\t\t}\n\t\treturn new Time(millis - LOCAL_TZ.getOffset(millis));\n\t}\n","realPath":"flink-formats/flink-avro/src/main/java/org/apache/flink/formats/avro/AvroRowDeserializationSchema.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":338,"status":"M"}],"commitId":"115f85220abb89f3b9d179e0ea2e3b6a3be4c7af","commitMessage":"@@@[FLINK-18192] Upgrade avro to 1.10\n\nThis commit upgrades the default version of avro that flink-avro will use. It should be possible to downgrade the avro version in a user job as the binary format is compatible and we do not expose any dependencies on avro in the API.\n\nAdditionally this commit fixes handling of logical types: time-micros and timestamp-micros as well as interpretation of timestamp-millis in the AvroRowDataDeserializationSchema.\n","date":"2020-09-15 03:46:09","modifiedFileCount":"18","status":"M","submitter":"Dawid Wysakowicz"}]
