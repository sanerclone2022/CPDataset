[{"authorTime":"2017-08-09 17:53:03","codes":[{"authorDate":"2017-07-06 00:00:30","commitOrder":4,"curCode":"\tpublic void perJobYarnCluster() {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(JobClient.class, Level.INFO);\n\t\tFile exampleJarLocation = new File(\"target/programs/BatchWordCount.jar\");\n\t\tAssert.assertNotNull(\"Could not find wordcount jar\", exampleJarLocation);\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(), \"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768\",\n\t\t\t\t\"-ytm\", \"1024\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\"Job execution complete\",\n\t\t\t\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","date":"2017-07-07 22:08:52","endLine":132,"groupId":"39387","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"perJobYarnCluster","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/7d/6c5d6729a8a5a5064b3365144458521cc272ec.src","preCode":"\tpublic void perJobYarnCluster() {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(JobClient.class, Level.INFO);\n\t\tFile exampleJarLocation = new File(\"target/programs/BatchWordCount.jar\");\n\t\tAssert.assertNotNull(\"Could not find wordcount jar\", exampleJarLocation);\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(), \"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768\",\n\t\t\t\t\"-ytm\", \"1024\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\"Job execution complete\",\n\t\t\t\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":115,"status":"NB"},{"authorDate":"2017-08-09 17:53:03","commitOrder":4,"curCode":"\tpublic void perJobYarnClusterOffHeap() {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(JobClient.class, Level.INFO);\n\t\tFile exampleJarLocation = new File(\"target/programs/BatchWordCount.jar\");\n\t\tAssert.assertNotNull(\"Could not find wordcount jar\", exampleJarLocation);\n\n\t\t\r\n\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\r\n\t\tfinal long networkBuffersMB = TaskManagerServices\n\t\t\t.calculateNetworkBufferMemory(\n\t\t\t\t(taskManagerMemoryMB -\n\t\t\t\t\tResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\t\tnew Configuration()) >> 20;\n\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\r\n\t\t\t- networkBuffersMB \r\n\t\t\t- 100; \r\n\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(), \"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768\",\n\t\t\t\t\"-ytm\", String.valueOf(taskManagerMemoryMB),\n\t\t\t\t\"-yD\", \"taskmanager.memory.off-heap=true\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory,\n\t\t\t\t\"-yD\", \"taskmanager.memory.preallocate=true\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Job execution complete\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","date":"2017-11-01 20:11:18","endLine":184,"groupId":"39385","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"perJobYarnClusterOffHeap","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/03/c61e8ed6cea5dd1f7cfa13ddc3a39d206b8533.src","preCode":"\tpublic void perJobYarnClusterOffHeap() {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(JobClient.class, Level.INFO);\n\t\tFile exampleJarLocation = new File(\"target/programs/BatchWordCount.jar\");\n\t\tAssert.assertNotNull(\"Could not find wordcount jar\", exampleJarLocation);\n\n\t\t\r\n\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\r\n\t\tfinal long networkBuffersMB = TaskManagerServices\n\t\t\t.calculateNetworkBufferMemory(\n\t\t\t\t(taskManagerMemoryMB -\n\t\t\t\t\tResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\t\tnew Configuration()) >> 20;\n\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\r\n\t\t\t- networkBuffersMB \r\n\t\t\t- 100; \r\n\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(), \"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768\",\n\t\t\t\t\"-ytm\", String.valueOf(taskManagerMemoryMB),\n\t\t\t\t\"-yD\", \"taskmanager.memory.off-heap=true\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory,\n\t\t\t\t\"-yD\", \"taskmanager.memory.preallocate=true\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Job execution complete\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":148,"status":"B"}],"commitId":"0df8e0797459ef9e8dfa177920def08bc2f11d65","commitMessage":"@@@[FLINK-7400][cluster] fix cut-off memory not used for off-heap reserve as intended\n\n+ fix description of `containerized.heap-cutoff-ratio`\n\n[FLINK-7400][yarn] add an integration test for yarn container memory restrictions using off-heap memory\n\n[FLINK-7400] address PR comments\n\nThis closes #4506.\n","date":"2017-11-01 20:11:18","modifiedFileCount":"2","status":"M","submitter":"Nico Kruber"},{"authorTime":"2018-01-12 06:25:58","codes":[{"authorDate":"2018-01-12 06:25:58","commitOrder":5,"curCode":"\tpublic void perJobYarnCluster() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(JobClient.class, Level.INFO);\n\t\tFile exampleJarLocation = new File(\"target/programs/BatchWordCount.jar\");\n\t\tAssert.assertNotNull(\"Could not find wordcount jar\", exampleJarLocation);\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(), \"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768\",\n\t\t\t\t\"-ytm\", \"1024\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Job execution complete\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","date":"2018-01-12 23:14:03","endLine":139,"groupId":"39387","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"perJobYarnCluster","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/c8/06c5e82b0cbc7b44d7f5cc9748c48518879231.src","preCode":"\tpublic void perJobYarnCluster() {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(JobClient.class, Level.INFO);\n\t\tFile exampleJarLocation = new File(\"target/programs/BatchWordCount.jar\");\n\t\tAssert.assertNotNull(\"Could not find wordcount jar\", exampleJarLocation);\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(), \"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768\",\n\t\t\t\t\"-ytm\", \"1024\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Job execution complete\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":121,"status":"M"},{"authorDate":"2018-01-12 06:25:58","commitOrder":5,"curCode":"\tpublic void perJobYarnClusterOffHeap() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(JobClient.class, Level.INFO);\n\t\tFile exampleJarLocation = new File(\"target/programs/BatchWordCount.jar\");\n\t\tAssert.assertNotNull(\"Could not find wordcount jar\", exampleJarLocation);\n\n\t\t\r\n\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\r\n\t\tfinal long networkBuffersMB = TaskManagerServices\n\t\t\t.calculateNetworkBufferMemory(\n\t\t\t\t(taskManagerMemoryMB -\n\t\t\t\t\tResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\t\tnew Configuration()) >> 20;\n\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\r\n\t\t\t- networkBuffersMB \r\n\t\t\t- 100; \r\n\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(), \"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768\",\n\t\t\t\t\"-ytm\", String.valueOf(taskManagerMemoryMB),\n\t\t\t\t\"-yD\", \"taskmanager.memory.off-heap=true\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory,\n\t\t\t\t\"-yD\", \"taskmanager.memory.preallocate=true\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Job execution complete\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","date":"2018-01-12 23:14:03","endLine":186,"groupId":"39385","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"perJobYarnClusterOffHeap","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/c8/06c5e82b0cbc7b44d7f5cc9748c48518879231.src","preCode":"\tpublic void perJobYarnClusterOffHeap() {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(JobClient.class, Level.INFO);\n\t\tFile exampleJarLocation = new File(\"target/programs/BatchWordCount.jar\");\n\t\tAssert.assertNotNull(\"Could not find wordcount jar\", exampleJarLocation);\n\n\t\t\r\n\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\r\n\t\tfinal long networkBuffersMB = TaskManagerServices\n\t\t\t.calculateNetworkBufferMemory(\n\t\t\t\t(taskManagerMemoryMB -\n\t\t\t\t\tResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\t\tnew Configuration()) >> 20;\n\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\r\n\t\t\t- networkBuffersMB \r\n\t\t\t- 100; \r\n\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(), \"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768\",\n\t\t\t\t\"-ytm\", String.valueOf(taskManagerMemoryMB),\n\t\t\t\t\"-yD\", \"taskmanager.memory.off-heap=true\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory,\n\t\t\t\t\"-yD\", \"taskmanager.memory.preallocate=true\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Job execution complete\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":150,"status":"M"}],"commitId":"402499f06a4b590ac47df64ecc01055c06b0399b","commitMessage":"@@@[FLINK-8349] [flip6] Remove Yarn specific commands from YarnClusterDescriptor\n\nRemove Yarn specific commands from YarnClusterDescriptor. This is a preparational\nstep to make the FlinkYarnSessionCli work with the Flip-6 RestClusterClient.\n\nThis closes #5229.\n","date":"2018-01-12 23:14:03","modifiedFileCount":"15","status":"M","submitter":"Till Rohrmann"},{"authorTime":"2018-01-30 16:22:03","codes":[{"authorDate":"2018-01-30 16:22:03","commitOrder":6,"curCode":"\tpublic void perJobYarnCluster() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(JobClient.class, Level.INFO);\n\t\tFile exampleJarLocation = new File(\"target/programs/BatchWordCount.jar\");\n\t\tAssert.assertNotNull(\"Could not find wordcount jar\", exampleJarLocation);\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(), \"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768\",\n\t\t\t\t\"-ytm\", \"1024\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Program execution finished\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","date":"2018-02-18 17:12:54","endLine":141,"groupId":"39387","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"perJobYarnCluster","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/3a/674ad082989580e5364724135d49d7eafb1624.src","preCode":"\tpublic void perJobYarnCluster() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(JobClient.class, Level.INFO);\n\t\tFile exampleJarLocation = new File(\"target/programs/BatchWordCount.jar\");\n\t\tAssert.assertNotNull(\"Could not find wordcount jar\", exampleJarLocation);\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(), \"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768\",\n\t\t\t\t\"-ytm\", \"1024\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Job execution complete\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":123,"status":"M"},{"authorDate":"2018-01-30 16:22:03","commitOrder":6,"curCode":"\tpublic void perJobYarnClusterOffHeap() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(JobClient.class, Level.INFO);\n\t\tFile exampleJarLocation = new File(\"target/programs/BatchWordCount.jar\");\n\t\tAssert.assertNotNull(\"Could not find wordcount jar\", exampleJarLocation);\n\n\t\t\r\n\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\r\n\t\tfinal long networkBuffersMB = TaskManagerServices\n\t\t\t.calculateNetworkBufferMemory(\n\t\t\t\t(taskManagerMemoryMB -\n\t\t\t\t\tResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\t\tnew Configuration()) >> 20;\n\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\r\n\t\t\t- networkBuffersMB \r\n\t\t\t- 100; \r\n\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(), \"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768\",\n\t\t\t\t\"-ytm\", String.valueOf(taskManagerMemoryMB),\n\t\t\t\t\"-yD\", \"taskmanager.memory.off-heap=true\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory,\n\t\t\t\t\"-yD\", \"taskmanager.memory.preallocate=true\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Program execution finished\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","date":"2018-02-18 17:12:54","endLine":188,"groupId":"39385","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"perJobYarnClusterOffHeap","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/3a/674ad082989580e5364724135d49d7eafb1624.src","preCode":"\tpublic void perJobYarnClusterOffHeap() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(JobClient.class, Level.INFO);\n\t\tFile exampleJarLocation = new File(\"target/programs/BatchWordCount.jar\");\n\t\tAssert.assertNotNull(\"Could not find wordcount jar\", exampleJarLocation);\n\n\t\t\r\n\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\r\n\t\tfinal long networkBuffersMB = TaskManagerServices\n\t\t\t.calculateNetworkBufferMemory(\n\t\t\t\t(taskManagerMemoryMB -\n\t\t\t\t\tResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\t\tnew Configuration()) >> 20;\n\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\r\n\t\t\t- networkBuffersMB \r\n\t\t\t- 100; \r\n\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(), \"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768\",\n\t\t\t\t\"-ytm\", String.valueOf(taskManagerMemoryMB),\n\t\t\t\t\"-yD\", \"taskmanager.memory.off-heap=true\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory,\n\t\t\t\t\"-yD\", \"taskmanager.memory.preallocate=true\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Job execution complete\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":152,"status":"M"}],"commitId":"ab8316f31a4de0648ab3ffa9f19fcd419aaa3bb9","commitMessage":"@@@[FLINK-8614] [flip6] Activate Flip-6 mode per default\n\nThis commit enables the Flip-6 mode per default. Additionally.  it disables\nsome of the Yarn tests which no longer apply to Flip-6 (tests which wait for\na number of started TM container without a job submission).\n\nThis closes #5437.\n","date":"2018-02-18 17:12:54","modifiedFileCount":"20","status":"M","submitter":"Till Rohrmann"},{"authorTime":"2018-04-03 20:13:41","codes":[{"authorDate":"2018-04-03 20:13:41","commitOrder":7,"curCode":"\tpublic void perJobYarnCluster() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(JobClient.class, Level.INFO);\n\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(), \"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768\",\n\t\t\t\t\"-ytm\", \"1024\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Program execution finished\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","date":"2018-04-13 01:40:15","endLine":141,"groupId":"39387","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"perJobYarnCluster","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/ac/8eaa05e994cc7434ac792d73aa911a13a995ff.src","preCode":"\tpublic void perJobYarnCluster() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(JobClient.class, Level.INFO);\n\t\tFile exampleJarLocation = new File(\"target/programs/BatchWordCount.jar\");\n\t\tAssert.assertNotNull(\"Could not find wordcount jar\", exampleJarLocation);\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(), \"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768\",\n\t\t\t\t\"-ytm\", \"1024\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Program execution finished\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":124,"status":"M"},{"authorDate":"2018-04-03 20:13:41","commitOrder":7,"curCode":"\tpublic void perJobYarnClusterOffHeap() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(JobClient.class, Level.INFO);\n\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\n\t\t\r\n\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\r\n\t\tfinal long networkBuffersMB = TaskManagerServices\n\t\t\t.calculateNetworkBufferMemory(\n\t\t\t\t(taskManagerMemoryMB -\n\t\t\t\t\tResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\t\tnew Configuration()) >> 20;\n\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\r\n\t\t\t- networkBuffersMB \r\n\t\t\t- 100; \r\n\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(), \"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768\",\n\t\t\t\t\"-ytm\", String.valueOf(taskManagerMemoryMB),\n\t\t\t\t\"-yD\", \"taskmanager.memory.off-heap=true\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory,\n\t\t\t\t\"-yD\", \"taskmanager.memory.preallocate=true\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Program execution finished\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","date":"2018-04-13 01:40:15","endLine":187,"groupId":"39385","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"perJobYarnClusterOffHeap","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/ac/8eaa05e994cc7434ac792d73aa911a13a995ff.src","preCode":"\tpublic void perJobYarnClusterOffHeap() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(JobClient.class, Level.INFO);\n\t\tFile exampleJarLocation = new File(\"target/programs/BatchWordCount.jar\");\n\t\tAssert.assertNotNull(\"Could not find wordcount jar\", exampleJarLocation);\n\n\t\t\r\n\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\r\n\t\tfinal long networkBuffersMB = TaskManagerServices\n\t\t\t.calculateNetworkBufferMemory(\n\t\t\t\t(taskManagerMemoryMB -\n\t\t\t\t\tResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\t\tnew Configuration()) >> 20;\n\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\r\n\t\t\t- networkBuffersMB \r\n\t\t\t- 100; \r\n\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(), \"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768\",\n\t\t\t\t\"-ytm\", String.valueOf(taskManagerMemoryMB),\n\t\t\t\t\"-yD\", \"taskmanager.memory.off-heap=true\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory,\n\t\t\t\t\"-yD\", \"taskmanager.memory.preallocate=true\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Program execution finished\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":152,"status":"M"}],"commitId":"ca5573b21867930709f094306733bf854d82fda7","commitMessage":"@@@[hotfix][tests] fix ineffective file existence check and remove duplicate code\n","date":"2018-04-13 01:40:15","modifiedFileCount":"2","status":"M","submitter":"Nico Kruber"},{"authorTime":"2018-02-10 14:52:13","codes":[{"authorDate":"2018-02-10 14:52:13","commitOrder":8,"curCode":"\tpublic void perJobYarnCluster() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(JobClient.class, Level.INFO);\n\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(), \"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\"-ytm\", \"1024m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Program execution finished\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","date":"2018-07-05 21:54:54","endLine":141,"groupId":"39387","id":9,"instanceNumber":1,"isCurCommit":0,"methodName":"perJobYarnCluster","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/10/09fbbf529174f0e8026c3bd3bfb40647d76970.src","preCode":"\tpublic void perJobYarnCluster() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(JobClient.class, Level.INFO);\n\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(), \"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768\",\n\t\t\t\t\"-ytm\", \"1024\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Program execution finished\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":124,"status":"M"},{"authorDate":"2018-02-10 14:52:13","commitOrder":8,"curCode":"\tpublic void perJobYarnClusterOffHeap() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(JobClient.class, Level.INFO);\n\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\n\t\t\r\n\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\r\n\t\tfinal long networkBuffersMB = TaskManagerServices\n\t\t\t.calculateNetworkBufferMemory(\n\t\t\t\t(taskManagerMemoryMB -\n\t\t\t\t\tResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\t\tnew Configuration()) >> 20;\n\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\r\n\t\t\t- networkBuffersMB \r\n\t\t\t- 100; \r\n\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(), \"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\"-ytm\", taskManagerMemoryMB + \"m\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.off-heap=true\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory + \"m\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.preallocate=true\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Program execution finished\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","date":"2018-07-05 21:54:54","endLine":187,"groupId":"39385","id":10,"instanceNumber":2,"isCurCommit":0,"methodName":"perJobYarnClusterOffHeap","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/10/09fbbf529174f0e8026c3bd3bfb40647d76970.src","preCode":"\tpublic void perJobYarnClusterOffHeap() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(JobClient.class, Level.INFO);\n\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\n\t\t\r\n\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\r\n\t\tfinal long networkBuffersMB = TaskManagerServices\n\t\t\t.calculateNetworkBufferMemory(\n\t\t\t\t(taskManagerMemoryMB -\n\t\t\t\t\tResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\t\tnew Configuration()) >> 20;\n\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\r\n\t\t\t- networkBuffersMB \r\n\t\t\t- 100; \r\n\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(), \"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768\",\n\t\t\t\t\"-ytm\", String.valueOf(taskManagerMemoryMB),\n\t\t\t\t\"-yD\", \"taskmanager.memory.off-heap=true\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory,\n\t\t\t\t\"-yD\", \"taskmanager.memory.preallocate=true\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Program execution finished\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":152,"status":"M"}],"commitId":"d02167dc5eb6a6d8520955499e84dd4d06f06f6e","commitMessage":"@@@[FLINK-6469][core] Configure Memory Sizes with units\n\nThis closes #5448\n","date":"2018-07-05 21:54:54","modifiedFileCount":"59","status":"M","submitter":"yanghua"},{"authorTime":"2019-01-24 19:05:29","codes":[{"authorDate":"2019-01-24 19:05:29","commitOrder":9,"curCode":"\tpublic void perJobYarnCluster() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(JobClient.class, Level.INFO);\n\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\"-ytm\", \"1024m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Program execution finished\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","date":"2019-01-29 22:44:56","endLine":186,"groupId":"39387","id":11,"instanceNumber":1,"isCurCommit":0,"methodName":"perJobYarnCluster","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/e2/75408c0fb429d1e2076612a27ce566ebfa1264.src","preCode":"\tpublic void perJobYarnCluster() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(JobClient.class, Level.INFO);\n\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(), \"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\"-ytm\", \"1024m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Program execution finished\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":167,"status":"M"},{"authorDate":"2019-01-24 19:05:29","commitOrder":9,"curCode":"\tpublic void perJobYarnClusterOffHeap() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(JobClient.class, Level.INFO);\n\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\n\t\t\r\n\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\r\n\t\tfinal long networkBuffersMB = TaskManagerServices\n\t\t\t.calculateNetworkBufferMemory(\n\t\t\t\t(taskManagerMemoryMB -\n\t\t\t\t\tResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\t\tnew Configuration()) >> 20;\n\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\r\n\t\t\t- networkBuffersMB \r\n\t\t\t- 100; \r\n\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\"-ytm\", taskManagerMemoryMB + \"m\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.off-heap=true\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory + \"m\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.preallocate=true\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Program execution finished\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","date":"2019-01-29 22:44:56","endLine":234,"groupId":"45020","id":12,"instanceNumber":2,"isCurCommit":0,"methodName":"perJobYarnClusterOffHeap","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/e2/75408c0fb429d1e2076612a27ce566ebfa1264.src","preCode":"\tpublic void perJobYarnClusterOffHeap() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(JobClient.class, Level.INFO);\n\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\n\t\t\r\n\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\r\n\t\tfinal long networkBuffersMB = TaskManagerServices\n\t\t\t.calculateNetworkBufferMemory(\n\t\t\t\t(taskManagerMemoryMB -\n\t\t\t\t\tResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\t\tnew Configuration()) >> 20;\n\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\r\n\t\t\t- networkBuffersMB \r\n\t\t\t- 100; \r\n\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(), \"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\"-ytm\", taskManagerMemoryMB + \"m\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.off-heap=true\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory + \"m\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.preallocate=true\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Program execution finished\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":197,"status":"M"}],"commitId":"0d7af4eeb44fbc988e24a7fbe7e4059e165d5098","commitMessage":"@@@[FLINK-11270][build] Do not include hadoop in flink-dist by default\n","date":"2019-01-29 22:44:56","modifiedFileCount":"6","status":"M","submitter":"zentol"},{"authorTime":"2019-02-18 21:28:58","codes":[{"authorDate":"2019-02-18 21:28:58","commitOrder":10,"curCode":"\tpublic void perJobYarnCluster() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\"-ytm\", \"1024m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Program execution finished\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","date":"2019-02-20 00:37:44","endLine":187,"groupId":"39387","id":13,"instanceNumber":1,"isCurCommit":0,"methodName":"perJobYarnCluster","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/d6/abc5aa5c2a39ee72c9c3af233f5ea2adaa4ce0.src","preCode":"\tpublic void perJobYarnCluster() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(JobClient.class, Level.INFO);\n\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\"-ytm\", \"1024m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Program execution finished\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":168,"status":"M"},{"authorDate":"2019-02-18 21:28:58","commitOrder":10,"curCode":"\tpublic void perJobYarnClusterOffHeap() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\n\t\t\r\n\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\r\n\t\tfinal long networkBuffersMB = TaskManagerServices\n\t\t\t.calculateNetworkBufferMemory(\n\t\t\t\t(taskManagerMemoryMB -\n\t\t\t\t\tResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\t\tnew Configuration()) >> 20;\n\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\r\n\t\t\t- networkBuffersMB \r\n\t\t\t- 100; \r\n\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\"-ytm\", taskManagerMemoryMB + \"m\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.off-heap=true\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory + \"m\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.preallocate=true\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Program execution finished\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","date":"2019-02-20 00:37:44","endLine":235,"groupId":"45020","id":14,"instanceNumber":2,"isCurCommit":0,"methodName":"perJobYarnClusterOffHeap","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/d6/abc5aa5c2a39ee72c9c3af233f5ea2adaa4ce0.src","preCode":"\tpublic void perJobYarnClusterOffHeap() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(JobClient.class, Level.INFO);\n\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\n\t\t\r\n\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\r\n\t\tfinal long networkBuffersMB = TaskManagerServices\n\t\t\t.calculateNetworkBufferMemory(\n\t\t\t\t(taskManagerMemoryMB -\n\t\t\t\t\tResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\t\tnew Configuration()) >> 20;\n\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\r\n\t\t\t- networkBuffersMB \r\n\t\t\t- 100; \r\n\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\"-ytm\", taskManagerMemoryMB + \"m\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.off-heap=true\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory + \"m\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.preallocate=true\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Program execution finished\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":198,"status":"M"}],"commitId":"d30957a419ab276f2c5937d8ab2d8887b176704c","commitMessage":"@@@[FLINK-11652] Remove legacy JobClient\n\nThis closes #7743.\n","date":"2019-02-20 00:37:44","modifiedFileCount":"2","status":"M","submitter":"tison"},{"authorTime":"2019-04-12 16:30:51","codes":[{"authorDate":"2019-02-18 21:28:58","commitOrder":11,"curCode":"\tpublic void perJobYarnCluster() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\"-ytm\", \"1024m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Program execution finished\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","date":"2019-02-20 00:37:44","endLine":187,"groupId":"39387","id":15,"instanceNumber":1,"isCurCommit":0,"methodName":"perJobYarnCluster","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/d6/abc5aa5c2a39ee72c9c3af233f5ea2adaa4ce0.src","preCode":"\tpublic void perJobYarnCluster() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\"-ytm\", \"1024m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Program execution finished\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":168,"status":"N"},{"authorDate":"2019-04-12 16:30:51","commitOrder":11,"curCode":"\tpublic void perJobYarnClusterOffHeap() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\n\t\t\r\n\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\r\n\t\tfinal long networkBuffersMB = NetworkEnvironmentConfiguration.calculateNetworkBufferMemory(\n\t\t\t(taskManagerMemoryMB - ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\tnew Configuration()) >> 20;\n\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\r\n\t\t\t- networkBuffersMB \r\n\t\t\t- 100; \r\n\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\"-ytm\", taskManagerMemoryMB + \"m\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.off-heap=true\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory + \"m\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.preallocate=true\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Program execution finished\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","date":"2019-04-12 16:30:51","endLine":233,"groupId":"45020","id":16,"instanceNumber":2,"isCurCommit":0,"methodName":"perJobYarnClusterOffHeap","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/8c/3c092d9a82e4d1c07a222a005a0c10ceea96ac.src","preCode":"\tpublic void perJobYarnClusterOffHeap() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\n\t\t\r\n\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\r\n\t\tfinal long networkBuffersMB = TaskManagerServices\n\t\t\t.calculateNetworkBufferMemory(\n\t\t\t\t(taskManagerMemoryMB -\n\t\t\t\t\tResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\t\tnew Configuration()) >> 20;\n\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\r\n\t\t\t- networkBuffersMB \r\n\t\t\t- 100; \r\n\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\"-ytm\", taskManagerMemoryMB + \"m\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.off-heap=true\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory + \"m\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.preallocate=true\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Program execution finished\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":198,"status":"M"}],"commitId":"352a995e2aca8651046afb0767cb0d361f2571ca","commitMessage":"@@@[FLINK-12067][network] Refactor the constructor of NetworkEnvironment (#8090)\n\n[FLINK-12067][network] Refactor the constructor of NetworkEnvironment\n\nThe constructor of NetworkEnvironment was refactored to only contain NetworkEnvironmentConfiguration. The other related components such as TaskEventDispatcher.  ResultPartitionManager.  NetworkBufferPool are created internally.\n\nWe also refactor the process of generating NetworkEnvironmentConfiguration in TaskManagerServiceConfiguration to add numNetworkBuffers instead of previous networkBufFraction.  networkBufMin.  networkBufMax. This way seems more easy and direct to construct NetworkBufferPool later. isCreditBased field is also maintained in this component for considering the setting usage in tests.\n\nFurther we introduce the NetworkEnvironmentConfigurationBuilder for creating NetworkEnvironmentConfiguration easily especially for tests.\n\n\n","date":"2019-04-12 16:30:51","modifiedFileCount":"22","status":"M","submitter":"zhijiang"},{"authorTime":"2019-05-24 16:45:59","codes":[{"authorDate":"2019-05-24 16:45:59","commitOrder":12,"curCode":"\tpublic void perJobYarnCluster() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", \"1024m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","date":"2019-06-06 16:08:28","endLine":189,"groupId":"39387","id":17,"instanceNumber":1,"isCurCommit":0,"methodName":"perJobYarnCluster","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/14/0b8c8fe65adab142cc2425da485583297601be.src","preCode":"\tpublic void perJobYarnCluster() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\"-ytm\", \"1024m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Program execution finished\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":168,"status":"M"},{"authorDate":"2019-05-24 16:45:59","commitOrder":12,"curCode":"\tpublic void perJobYarnClusterOffHeap() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\n\t\t\t\r\n\t\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\t\r\n\t\t\tfinal long networkBuffersMB = NetworkEnvironmentConfiguration.calculateNetworkBufferMemory(\n\t\t\t\t(taskManagerMemoryMB - ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\t\tnew Configuration()) >> 20;\n\t\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\t\r\n\t\t\t\t- networkBuffersMB \r\n\t\t\t\t- 100; \r\n\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", taskManagerMemoryMB + \"m\",\n\t\t\t\t\t\"-yD\", \"taskmanager.memory.off-heap=true\",\n\t\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory + \"m\",\n\t\t\t\t\t\"-yD\", \"taskmanager.memory.preallocate=true\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","date":"2019-06-06 16:08:28","endLine":237,"groupId":"45020","id":18,"instanceNumber":2,"isCurCommit":0,"methodName":"perJobYarnClusterOffHeap","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/14/0b8c8fe65adab142cc2425da485583297601be.src","preCode":"\tpublic void perJobYarnClusterOffHeap() throws IOException {\n\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\n\t\t\r\n\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\r\n\t\tfinal long networkBuffersMB = NetworkEnvironmentConfiguration.calculateNetworkBufferMemory(\n\t\t\t(taskManagerMemoryMB - ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\tnew Configuration()) >> 20;\n\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\r\n\t\t\t- networkBuffersMB \r\n\t\t\t- 100; \r\n\n\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\"-ytm\", taskManagerMemoryMB + \"m\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.off-heap=true\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory + \"m\",\n\t\t\t\t\"-yD\", \"taskmanager.memory.preallocate=true\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\n\t\t\t\"Program execution finished\",\n\t\t\t\n\t\t\t\r\n\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":200,"status":"M"}],"commitId":"350846507450ba7afa0159a2c574bd2f44bacaac","commitMessage":"@@@[FLINK-12614][yarn] Refactor test to not do assertions in @After methods\n","date":"2019-06-06 16:08:28","modifiedFileCount":"7","status":"M","submitter":"Chesnay Schepler"},{"authorTime":"2019-05-30 21:16:16","codes":[{"authorDate":"2019-05-24 16:45:59","commitOrder":13,"curCode":"\tpublic void perJobYarnCluster() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", \"1024m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","date":"2019-06-06 16:08:28","endLine":189,"groupId":"39387","id":19,"instanceNumber":1,"isCurCommit":0,"methodName":"perJobYarnCluster","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/14/0b8c8fe65adab142cc2425da485583297601be.src","preCode":"\tpublic void perJobYarnCluster() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", \"1024m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":168,"status":"N"},{"authorDate":"2019-05-30 21:16:16","commitOrder":13,"curCode":"\tpublic void perJobYarnClusterOffHeap() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\n\t\t\t\r\n\t\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\t\r\n\t\t\tfinal long networkBuffersMB = NettyShuffleEnvironmentConfiguration.calculateNetworkBufferMemory(\n\t\t\t\t(taskManagerMemoryMB - ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\t\tnew Configuration()) >> 20;\n\t\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\t\r\n\t\t\t\t- networkBuffersMB \r\n\t\t\t\t- 100; \r\n\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", taskManagerMemoryMB + \"m\",\n\t\t\t\t\t\"-yD\", \"taskmanager.memory.off-heap=true\",\n\t\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory + \"m\",\n\t\t\t\t\t\"-yD\", \"taskmanager.memory.preallocate=true\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","date":"2019-06-11 18:03:41","endLine":237,"groupId":"45020","id":20,"instanceNumber":2,"isCurCommit":0,"methodName":"perJobYarnClusterOffHeap","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/0c/93748829a0dbb6dcb26272c0104fcd10df720c.src","preCode":"\tpublic void perJobYarnClusterOffHeap() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\n\t\t\t\r\n\t\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\t\r\n\t\t\tfinal long networkBuffersMB = NetworkEnvironmentConfiguration.calculateNetworkBufferMemory(\n\t\t\t\t(taskManagerMemoryMB - ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\t\tnew Configuration()) >> 20;\n\t\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\t\r\n\t\t\t\t- networkBuffersMB \r\n\t\t\t\t- 100; \r\n\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", taskManagerMemoryMB + \"m\",\n\t\t\t\t\t\"-yD\", \"taskmanager.memory.off-heap=true\",\n\t\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory + \"m\",\n\t\t\t\t\t\"-yD\", \"taskmanager.memory.preallocate=true\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":200,"status":"M"}],"commitId":"c104dafd26f32d939461cb880ddfc881a8d14d5f","commitMessage":"@@@[FLINK-11392][network] Rename NetworkEnviroment to NettyShuffleEnviroment\n\nThis closes #8608.\n","date":"2019-06-11 18:03:41","modifiedFileCount":"45","status":"M","submitter":"Andrey Zagrebin"},{"authorTime":"2019-09-11 10:56:22","codes":[{"authorDate":"2019-09-11 10:56:22","commitOrder":14,"curCode":"\tpublic void perJobYarnCluster() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", \"1024m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","date":"2019-09-16 17:57:20","endLine":187,"groupId":"32191","id":21,"instanceNumber":1,"isCurCommit":0,"methodName":"perJobYarnCluster","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/1c/f46c6eb684d1bc4df81468b873d3036d62a8d6.src","preCode":"\tpublic void perJobYarnCluster() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", \"1024m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":167,"status":"M"},{"authorDate":"2019-09-11 10:56:22","commitOrder":14,"curCode":"\tpublic void perJobYarnClusterOffHeap() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\n\t\t\t\r\n\t\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\t\r\n\t\t\tfinal long networkBuffersMB = NettyShuffleEnvironmentConfiguration.calculateNetworkBufferMemory(\n\t\t\t\t(taskManagerMemoryMB - ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\t\tnew Configuration()) >> 20;\n\t\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\t\r\n\t\t\t\t- networkBuffersMB \r\n\t\t\t\t- 100; \r\n\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", taskManagerMemoryMB + \"m\",\n\t\t\t\t\t\"-yD\", \"taskmanager.memory.off-heap=true\",\n\t\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory + \"m\",\n\t\t\t\t\t\"-yD\", \"taskmanager.memory.preallocate=true\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","date":"2019-09-16 17:57:20","endLine":234,"groupId":"16742","id":22,"instanceNumber":2,"isCurCommit":0,"methodName":"perJobYarnClusterOffHeap","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/1c/f46c6eb684d1bc4df81468b873d3036d62a8d6.src","preCode":"\tpublic void perJobYarnClusterOffHeap() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\n\t\t\t\r\n\t\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\t\r\n\t\t\tfinal long networkBuffersMB = NettyShuffleEnvironmentConfiguration.calculateNetworkBufferMemory(\n\t\t\t\t(taskManagerMemoryMB - ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\t\tnew Configuration()) >> 20;\n\t\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\t\r\n\t\t\t\t- networkBuffersMB \r\n\t\t\t\t- 100; \r\n\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-yn\", \"1\",\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", taskManagerMemoryMB + \"m\",\n\t\t\t\t\t\"-yD\", \"taskmanager.memory.off-heap=true\",\n\t\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory + \"m\",\n\t\t\t\t\t\"-yD\", \"taskmanager.memory.preallocate=true\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":198,"status":"M"}],"commitId":"ece1b7ace20baf1ad526449e0f2df4ca95382ba9","commitMessage":"@@@[FLINK-12362] Remove legacy container number config option for Flink on yarn\n\nThis closes #9678.\n","date":"2019-09-16 17:57:20","modifiedFileCount":"6","status":"M","submitter":"yanghua"},{"authorTime":"2019-09-10 23:23:50","codes":[{"authorDate":"2019-09-11 10:56:22","commitOrder":15,"curCode":"\tpublic void perJobYarnCluster() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", \"1024m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","date":"2019-09-16 17:57:20","endLine":187,"groupId":"32191","id":23,"instanceNumber":1,"isCurCommit":0,"methodName":"perJobYarnCluster","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/1c/f46c6eb684d1bc4df81468b873d3036d62a8d6.src","preCode":"\tpublic void perJobYarnCluster() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", \"1024m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":167,"status":"N"},{"authorDate":"2019-09-10 23:23:50","commitOrder":15,"curCode":"\tpublic void perJobYarnClusterOffHeap() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\n\t\t\t\r\n\t\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\t\r\n\t\t\tfinal long networkBuffersMB = NettyShuffleEnvironmentConfiguration.calculateNetworkBufferMemory(\n\t\t\t\t(taskManagerMemoryMB - ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\t\tnew Configuration()) >> 20;\n\t\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\t\r\n\t\t\t\t- networkBuffersMB \r\n\t\t\t\t- 100; \r\n\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", taskManagerMemoryMB + \"m\",\n\t\t\t\t\t\"-yD\", \"taskmanager.memory.off-heap=true\",\n\t\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory + \"m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","date":"2019-10-22 20:01:15","endLine":233,"groupId":"16742","id":24,"instanceNumber":2,"isCurCommit":0,"methodName":"perJobYarnClusterOffHeap","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/50/d1515189967af13f80793bdbe18ebb2d9ed60a.src","preCode":"\tpublic void perJobYarnClusterOffHeap() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\n\t\t\t\r\n\t\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\t\r\n\t\t\tfinal long networkBuffersMB = NettyShuffleEnvironmentConfiguration.calculateNetworkBufferMemory(\n\t\t\t\t(taskManagerMemoryMB - ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\t\tnew Configuration()) >> 20;\n\t\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\t\r\n\t\t\t\t- networkBuffersMB \r\n\t\t\t\t- 100; \r\n\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", taskManagerMemoryMB + \"m\",\n\t\t\t\t\t\"-yD\", \"taskmanager.memory.off-heap=true\",\n\t\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory + \"m\",\n\t\t\t\t\t\"-yD\", \"taskmanager.memory.preallocate=true\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":198,"status":"M"}],"commitId":"597c9691c96b899a0effa00c95b5bd82a2666c05","commitMessage":"@@@[hotfix] Remove and deprecate memory preallocation in MemoryManager\n","date":"2019-10-22 20:01:15","modifiedFileCount":"12","status":"M","submitter":"Andrey Zagrebin"},{"authorTime":"2019-11-28 09:33:42","codes":[{"authorDate":"2019-09-11 10:56:22","commitOrder":16,"curCode":"\tpublic void perJobYarnCluster() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", \"1024m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","date":"2019-09-16 17:57:20","endLine":187,"groupId":"32191","id":25,"instanceNumber":1,"isCurCommit":0,"methodName":"perJobYarnCluster","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/1c/f46c6eb684d1bc4df81468b873d3036d62a8d6.src","preCode":"\tpublic void perJobYarnCluster() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", \"1024m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":167,"status":"N"},{"authorDate":"2019-11-28 09:33:42","commitOrder":16,"curCode":"\tpublic void perJobYarnClusterOffHeap() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\n\t\t\t\r\n\t\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\t\r\n\t\t\tfinal long networkBuffersMB = NettyShuffleEnvironmentConfiguration.calculateNetworkBufferMemory(\n\t\t\t\t(taskManagerMemoryMB - ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\t\tnew Configuration()) >> 20;\n\t\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\t\r\n\t\t\t\t- networkBuffersMB \r\n\t\t\t\t- 100; \r\n\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", taskManagerMemoryMB + \"m\",\n\t\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory + \"m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","date":"2019-12-03 23:29:30","endLine":232,"groupId":"16742","id":26,"instanceNumber":2,"isCurCommit":0,"methodName":"perJobYarnClusterOffHeap","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/e2/12d07853e40c63d08dc224335a206cefe9736c.src","preCode":"\tpublic void perJobYarnClusterOffHeap() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\n\t\t\t\r\n\t\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\t\r\n\t\t\tfinal long networkBuffersMB = NettyShuffleEnvironmentConfiguration.calculateNetworkBufferMemory(\n\t\t\t\t(taskManagerMemoryMB - ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\t\tnew Configuration()) >> 20;\n\t\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\t\r\n\t\t\t\t- networkBuffersMB \r\n\t\t\t\t- 100; \r\n\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", taskManagerMemoryMB + \"m\",\n\t\t\t\t\t\"-yD\", \"taskmanager.memory.off-heap=true\",\n\t\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory + \"m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":198,"status":"M"}],"commitId":"4b8ed643a4d85c9440a8adbc0798b8a4bbd9520b","commitMessage":"@@@[hotfix][core][config] Change default value of TaskManagerOptions#MEMORY_OFF_HEAP from false to true.\n","date":"2019-12-03 23:29:30","modifiedFileCount":"4","status":"M","submitter":"Xintong Song"},{"authorTime":"2019-11-14 10:45:37","codes":[{"authorDate":"2019-09-11 10:56:22","commitOrder":17,"curCode":"\tpublic void perJobYarnCluster() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", \"1024m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","date":"2019-09-16 17:57:20","endLine":187,"groupId":"32191","id":27,"instanceNumber":1,"isCurCommit":0,"methodName":"perJobYarnCluster","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/1c/f46c6eb684d1bc4df81468b873d3036d62a8d6.src","preCode":"\tpublic void perJobYarnCluster() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", \"1024m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":167,"status":"N"},{"authorDate":"2019-11-14 10:45:37","commitOrder":17,"curCode":"\tpublic void perJobYarnClusterOffHeap() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\n\t\t\t\r\n\t\t\tfinal long taskManagerMemoryMB = 1024;\n\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", taskManagerMemoryMB + \"m\",\n\t\t\t\t\texampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","date":"2019-12-03 23:29:31","endLine":222,"groupId":"45840","id":28,"instanceNumber":2,"isCurCommit":0,"methodName":"perJobYarnClusterOffHeap","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/40/a0e5d27eb61b7df4ae97109daab1d9aa8787c5.src","preCode":"\tpublic void perJobYarnClusterOffHeap() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\n\t\t\t\r\n\t\t\tfinal long taskManagerMemoryMB = 1024;\n\t\t\t\r\n\t\t\tfinal long networkBuffersMB = NettyShuffleEnvironmentConfiguration.calculateNetworkBufferMemory(\n\t\t\t\t(taskManagerMemoryMB - ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()) << 20,\n\t\t\t\tnew Configuration()) >> 20;\n\t\t\tfinal long offHeapMemory = taskManagerMemoryMB\n\t\t\t\t- ResourceManagerOptions.CONTAINERIZED_HEAP_CUTOFF_MIN.defaultValue()\n\t\t\t\t\r\n\t\t\t\t- networkBuffersMB \r\n\t\t\t\t- 100; \r\n\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", taskManagerMemoryMB + \"m\",\n\t\t\t\t\t\"-yD\", \"taskmanager.memory.size=\" + offHeapMemory + \"m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":197,"status":"M"}],"commitId":"d24c324bce123a9f0d91d09375ad80b04449df7f","commitMessage":"@@@[FLINK-13986][core][runtime] Remove java codes for legacy memory calculations.\n","date":"2019-12-03 23:29:31","modifiedFileCount":"6","status":"M","submitter":"Xintong Song"},{"authorTime":"2020-01-24 20:49:28","codes":[{"authorDate":"2020-01-24 20:49:28","commitOrder":18,"curCode":"\tpublic void perJobYarnCluster() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", \"1024m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND,\n\t\t\t\t0,\n\t\t\t\tcliTestLoggerResource::getMessages);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","date":"2020-02-21 21:48:16","endLine":195,"groupId":"32191","id":29,"instanceNumber":1,"isCurCommit":0,"methodName":"perJobYarnCluster","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/cd/310b20e89fd36dea8fd36bcf020fe410eef550.src","preCode":"\tpublic void perJobYarnCluster() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", \"1024m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":174,"status":"M"},{"authorDate":"2020-01-24 20:49:28","commitOrder":18,"curCode":"\tpublic void perJobYarnClusterOffHeap() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\n\t\t\t\r\n\t\t\tfinal long taskManagerMemoryMB = 1024;\n\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", taskManagerMemoryMB + \"m\",\n\t\t\t\t\texampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND,\n\t\t\t\t0,\n\t\t\t\tcliTestLoggerResource::getMessages);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","date":"2020-02-21 21:48:16","endLine":232,"groupId":"45840","id":30,"instanceNumber":2,"isCurCommit":0,"methodName":"perJobYarnClusterOffHeap","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/cd/310b20e89fd36dea8fd36bcf020fe410eef550.src","preCode":"\tpublic void perJobYarnClusterOffHeap() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\taddTestAppender(CliFrontend.class, Level.INFO);\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\n\t\t\t\r\n\t\t\tfinal long taskManagerMemoryMB = 1024;\n\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", taskManagerMemoryMB + \"m\",\n\t\t\t\t\texampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND, 0, true);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":206,"status":"M"}],"commitId":"e396e7c9907be91c80ca26a6465e2bf6ec06d281","commitMessage":"@@@[FLINK-15672][build] Migrate to log4j2\n","date":"2020-02-21 21:48:16","modifiedFileCount":"13","status":"M","submitter":"Chesnay Schepler"},{"authorTime":"2020-05-04 16:15:41","codes":[{"authorDate":"2020-05-04 16:15:41","commitOrder":19,"curCode":"\tpublic void perJobYarnCluster() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", \"1024m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND,\n\t\t\t\t0,\n\t\t\t\tcliTestLoggerResource::getMessages);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","date":"2020-05-13 22:27:18","endLine":191,"groupId":"101688","id":31,"instanceNumber":1,"isCurCommit":0,"methodName":"perJobYarnCluster","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/49/0c858fdf11074d8f93a4d6cf3ab8ecf1c004c0.src","preCode":"\tpublic void perJobYarnCluster() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", \"1024m\", exampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND,\n\t\t\t\t0,\n\t\t\t\tcliTestLoggerResource::getMessages);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":171,"status":"M"},{"authorDate":"2020-05-04 16:15:41","commitOrder":19,"curCode":"\tpublic void perJobYarnClusterOffHeap() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\n\t\t\t\r\n\t\t\tfinal long taskManagerMemoryMB = 1024;\n\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", taskManagerMemoryMB + \"m\",\n\t\t\t\t\texampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND,\n\t\t\t\t0,\n\t\t\t\tcliTestLoggerResource::getMessages);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","date":"2020-05-13 22:27:18","endLine":227,"groupId":"101688","id":32,"instanceNumber":2,"isCurCommit":0,"methodName":"perJobYarnClusterOffHeap","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/49/0c858fdf11074d8f93a4d6cf3ab8ecf1c004c0.src","preCode":"\tpublic void perJobYarnClusterOffHeap() throws Exception {\n\t\trunTest(() -> {\n\t\t\tLOG.info(\"Starting perJobYarnCluster()\");\n\t\t\tFile exampleJarLocation = getTestJarPath(\"BatchWordCount.jar\");\n\n\t\t\t\r\n\t\t\tfinal long taskManagerMemoryMB = 1024;\n\n\t\t\trunWithArgs(new String[]{\"run\", \"-m\", \"yarn-cluster\",\n\t\t\t\t\t\"-yj\", flinkUberjar.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkLibFolder.getAbsolutePath(),\n\t\t\t\t\t\"-yt\", flinkShadedHadoopDir.getAbsolutePath(),\n\t\t\t\t\t\"-ys\", \"2\", \r\n\t\t\t\t\t\"-yjm\", \"768m\",\n\t\t\t\t\t\"-ytm\", taskManagerMemoryMB + \"m\",\n\t\t\t\t\texampleJarLocation.getAbsolutePath()},\n\t\t\t\t\n\t\t\t\t\"Program execution finished\",\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tnew String[]{\"DataSink \\\\(.*\\\\) \\\\(1/1\\\\) switched to FINISHED\"},\n\t\t\t\tRunTypes.CLI_FRONTEND,\n\t\t\t\t0,\n\t\t\t\tcliTestLoggerResource::getMessages);\n\t\t\tLOG.info(\"Finished perJobYarnCluster()\");\n\t\t});\n\t}\n","realPath":"flink-yarn-tests/src/test/java/org/apache/flink/yarn/YARNSessionCapacitySchedulerITCase.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":202,"status":"M"}],"commitId":"082061da5ec52c7d4257adc272869c1ecb7fa222","commitMessage":"@@@[FLINK-11086][yarn] Use YARN_APPLICATION_CLASSPATH instead of flink-shaded-hadoop fat jar in tests\n","date":"2020-05-13 22:27:18","modifiedFileCount":"8","status":"M","submitter":"Robert Metzger"}]
