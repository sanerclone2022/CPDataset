[{"authorTime":"2021-05-01 02:20:41","codes":[{"authorDate":"2020-10-02 05:25:29","commitOrder":2,"curCode":"  public void testRegisterGauge() {\n    when(config.isMetricsOn()).thenReturn(true);\n    when(config.getMetricsReporterType()).thenReturn(MetricsReporterType.PROMETHEUS);\n    when(config.getPrometheusPort()).thenReturn(9090);\n    assertDoesNotThrow(() -> {\n      new HoodieMetrics(config, \"raw_table\");\n    });\n  }\n","date":"2020-10-02 05:25:29","endLine":42,"groupId":"1884","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testRegisterGauge","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-hudi-10-0.7/blobInfo/CC_OUT/blobs/6b/bd49d485bf34412995130a1ee950c2c8d3f8ca.src","preCode":"  public void testRegisterGauge() {\n    when(config.isMetricsOn()).thenReturn(true);\n    when(config.getMetricsReporterType()).thenReturn(MetricsReporterType.PROMETHEUS);\n    when(config.getPrometheusPort()).thenReturn(9090);\n    assertDoesNotThrow(() -> {\n      new HoodieMetrics(config, \"raw_table\");\n    });\n  }\n","realPath":"hudi-client/hudi-client-common/src/test/java/org/apache/hudi/metrics/prometheus/TestPrometheusReporter.java","repoName":"hudi","snippetEndLine":0,"snippetStartLine":0,"startLine":35,"status":"NB"},{"authorDate":"2021-05-01 02:20:41","commitOrder":2,"curCode":"  public void testRegisterGauge() {\n    when(config.isMetricsOn()).thenReturn(true);\n    when(config.getMetricsReporterType()).thenReturn(MetricsReporterType.PROMETHEUS_PUSHGATEWAY);\n    when(config.getPushGatewayHost()).thenReturn(\"localhost\");\n    when(config.getPushGatewayPort()).thenReturn(9091);\n    when(config.getPushGatewayReportPeriodSeconds()).thenReturn(30);\n    when(config.getPushGatewayDeleteOnShutdown()).thenReturn(true);\n    when(config.getPushGatewayJobName()).thenReturn(\"foo\");\n    when(config.getPushGatewayRandomJobNameSuffix()).thenReturn(false);\n\n    assertDoesNotThrow(() -> {\n      new HoodieMetrics(config, \"raw_table\");\n    });\n\n    registerGauge(\"pushGateWayReporter_metric\", 123L);\n    assertEquals(\"123\", Metrics.getInstance().getRegistry().getGauges()\n        .get(\"pushGateWayReporter_metric\").getValue().toString());\n  }\n","date":"2021-05-01 02:20:41","endLine":66,"groupId":"4077","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testRegisterGauge","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-hudi-10-0.7/blobInfo/CC_OUT/blobs/eb/4d09c2be88e4363905e98a8914c9cffb6fdb60.src","preCode":"  public void testRegisterGauge() {\n    when(config.isMetricsOn()).thenReturn(true);\n    when(config.getMetricsReporterType()).thenReturn(MetricsReporterType.PROMETHEUS_PUSHGATEWAY);\n    when(config.getPushGatewayHost()).thenReturn(\"localhost\");\n    when(config.getPushGatewayPort()).thenReturn(9091);\n    when(config.getPushGatewayReportPeriodSeconds()).thenReturn(30);\n    when(config.getPushGatewayDeleteOnShutdown()).thenReturn(true);\n    when(config.getPushGatewayJobName()).thenReturn(\"foo\");\n    when(config.getPushGatewayRandomJobNameSuffix()).thenReturn(false);\n\n    assertDoesNotThrow(() -> {\n      new HoodieMetrics(config, \"raw_table\");\n    });\n\n    registerGauge(\"pushGateWayReporter_metric\", 123L);\n    assertEquals(\"123\", Metrics.getInstance().getRegistry().getGauges()\n        .get(\"pushGateWayReporter_metric\").getValue().toString());\n  }\n","realPath":"hudi-client/hudi-client-common/src/test/java/org/apache/hudi/metrics/prometheus/TestPushGateWayReporter.java","repoName":"hudi","snippetEndLine":0,"snippetStartLine":0,"startLine":49,"status":"MB"}],"commitId":"3418a92de8a45986e55a29a9498791222f6a6fa6","commitMessage":"@@@[HUDI-1620] Fix Metrics UT (#2894)\n\nMake sure shutdown Metrics between unit test cases to ensure isolation","date":"2021-05-01 02:20:41","modifiedFileCount":"6","status":"M","submitter":"Raymond Xu"},{"authorTime":"2021-07-23 19:57:35","codes":[{"authorDate":"2021-07-23 19:57:35","commitOrder":3,"curCode":"  public void testRegisterGauge() {\n    when(config.isMetricsOn()).thenReturn(true);\n    when(config.getTableName()).thenReturn(\"foo\");\n    when(config.getMetricsReporterType()).thenReturn(MetricsReporterType.PROMETHEUS);\n    when(config.getPrometheusPort()).thenReturn(9090);\n    assertDoesNotThrow(() -> {\n      new HoodieMetrics(config);\n    });\n  }\n","date":"2021-07-23 19:57:35","endLine":55,"groupId":"10818","id":3,"instanceNumber":1,"isCurCommit":1,"methodName":"testRegisterGauge","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-hudi-10-0.7/blobInfo/CC_OUT/blobs/79/b12716530d9c65a639279f047adb0319fa9ec9.src","preCode":"  public void testRegisterGauge() {\n    when(config.isMetricsOn()).thenReturn(true);\n    when(config.getMetricsReporterType()).thenReturn(MetricsReporterType.PROMETHEUS);\n    when(config.getPrometheusPort()).thenReturn(9090);\n    assertDoesNotThrow(() -> {\n      new HoodieMetrics(config, \"raw_table\");\n    });\n  }\n","realPath":"hudi-client/hudi-client-common/src/test/java/org/apache/hudi/metrics/prometheus/TestPrometheusReporter.java","repoName":"hudi","snippetEndLine":0,"snippetStartLine":0,"startLine":47,"status":"M"},{"authorDate":"2021-07-23 19:57:35","commitOrder":3,"curCode":"  public void testRegisterGauge() {\n    when(config.isMetricsOn()).thenReturn(true);\n    when(config.getTableName()).thenReturn(\"foo\");\n    when(config.getMetricsReporterType()).thenReturn(MetricsReporterType.PROMETHEUS_PUSHGATEWAY);\n    when(config.getPushGatewayHost()).thenReturn(\"localhost\");\n    when(config.getPushGatewayPort()).thenReturn(9091);\n    when(config.getPushGatewayReportPeriodSeconds()).thenReturn(30);\n    when(config.getPushGatewayDeleteOnShutdown()).thenReturn(true);\n    when(config.getPushGatewayJobName()).thenReturn(\"foo\");\n    when(config.getPushGatewayRandomJobNameSuffix()).thenReturn(false);\n\n    assertDoesNotThrow(() -> {\n      new HoodieMetrics(config);\n    });\n\n    registerGauge(\"pushGateWayReporter_metric\", 123L);\n    assertEquals(\"123\", Metrics.getInstance().getRegistry().getGauges()\n        .get(\"pushGateWayReporter_metric\").getValue().toString());\n  }\n","date":"2021-07-23 19:57:35","endLine":67,"groupId":"10818","id":4,"instanceNumber":2,"isCurCommit":1,"methodName":"testRegisterGauge","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-hudi-10-0.7/blobInfo/CC_OUT/blobs/dc/bf72c39db6e69209e3921839ceb8b45dc54091.src","preCode":"  public void testRegisterGauge() {\n    when(config.isMetricsOn()).thenReturn(true);\n    when(config.getMetricsReporterType()).thenReturn(MetricsReporterType.PROMETHEUS_PUSHGATEWAY);\n    when(config.getPushGatewayHost()).thenReturn(\"localhost\");\n    when(config.getPushGatewayPort()).thenReturn(9091);\n    when(config.getPushGatewayReportPeriodSeconds()).thenReturn(30);\n    when(config.getPushGatewayDeleteOnShutdown()).thenReturn(true);\n    when(config.getPushGatewayJobName()).thenReturn(\"foo\");\n    when(config.getPushGatewayRandomJobNameSuffix()).thenReturn(false);\n\n    assertDoesNotThrow(() -> {\n      new HoodieMetrics(config, \"raw_table\");\n    });\n\n    registerGauge(\"pushGateWayReporter_metric\", 123L);\n    assertEquals(\"123\", Metrics.getInstance().getRegistry().getGauges()\n        .get(\"pushGateWayReporter_metric\").getValue().toString());\n  }\n","realPath":"hudi-client/hudi-client-common/src/test/java/org/apache/hudi/metrics/prometheus/TestPushGateWayReporter.java","repoName":"hudi","snippetEndLine":0,"snippetStartLine":0,"startLine":49,"status":"M"}],"commitId":"71e14cf866d2ddeee7238a3f15b59912c2537943","commitMessage":"@@@[HUDI-2213] Remove unnecessary parameter for HoodieMetrics constructor and fix NPE in UT (#3333)\n\n","date":"2021-07-23 19:57:35","modifiedFileCount":"9","status":"M","submitter":"Xuedong Luan"}]
