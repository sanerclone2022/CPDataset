[{"authorTime":"2020-05-21 00:04:43","codes":[{"authorDate":"2020-05-21 00:04:43","commitOrder":3,"curCode":"  public void testDefaultValue() {\n    GenericRecord rec = new GenericData.Record(new Schema.Parser().parse(EVOLVED_SCHEMA));\n    rec.put(\"_row_key\", \"key1\");\n    rec.put(\"non_pii_col\", \"val1\");\n    rec.put(\"pii_col\", \"val2\");\n    rec.put(\"timestamp\", 3.5);\n    Schema schemaWithMetadata = HoodieAvroUtils.addMetadataFields(new Schema.Parser().parse(EVOLVED_SCHEMA));\n    GenericRecord rec1 = HoodieAvroUtils.rewriteRecord(rec, schemaWithMetadata);\n    assertEquals(rec1.get(\"new_col1\"), \"dummy_val\");\n    assertNull(rec1.get(\"new_col2\"));\n    assertNull(rec1.get(HoodieRecord.RECORD_KEY_METADATA_FIELD));\n  }\n","date":"2020-05-21 00:04:43","endLine":116,"groupId":"3201","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testDefaultValue","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-hudi-10-0.7/blobInfo/CC_OUT/blobs/7d/5cf0408b1ee8e63261ecc3d52a6b0db3772f45.src","preCode":"  public void testDefaultValue() {\n    GenericRecord rec = new GenericData.Record(new Schema.Parser().parse(EVOLVED_SCHEMA));\n    rec.put(\"_row_key\", \"key1\");\n    rec.put(\"non_pii_col\", \"val1\");\n    rec.put(\"pii_col\", \"val2\");\n    rec.put(\"timestamp\", 3.5);\n    Schema schemaWithMetadata = HoodieAvroUtils.addMetadataFields(new Schema.Parser().parse(EVOLVED_SCHEMA));\n    GenericRecord rec1 = HoodieAvroUtils.rewriteRecord(rec, schemaWithMetadata);\n    assertEquals(rec1.get(\"new_col1\"), \"dummy_val\");\n    assertNull(rec1.get(\"new_col2\"));\n    assertNull(rec1.get(HoodieRecord.RECORD_KEY_METADATA_FIELD));\n  }\n","realPath":"hudi-common/src/test/java/org/apache/hudi/avro/TestHoodieAvroUtils.java","repoName":"hudi","snippetEndLine":0,"snippetStartLine":0,"startLine":105,"status":"MB"},{"authorDate":"2020-05-21 00:04:43","commitOrder":3,"curCode":"  public void testNonNullableFieldWithDefault() {\n    GenericRecord rec = new GenericData.Record(new Schema.Parser().parse(EXAMPLE_SCHEMA));\n    rec.put(\"_row_key\", \"key1\");\n    rec.put(\"non_pii_col\", \"val1\");\n    rec.put(\"pii_col\", \"val2\");\n    rec.put(\"timestamp\", 3.5);\n    GenericRecord rec1 = HoodieAvroUtils.rewriteRecord(rec, new Schema.Parser().parse(SCHEMA_WITH_NON_NULLABLE_FIELD_WITH_DEFAULT));\n    assertEquals(rec1.get(\"non_nullable_field_with_default\"), \"dummy\");\n  }\n","date":"2020-05-21 00:04:43","endLine":162,"groupId":"3201","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testNonNullableFieldWithDefault","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-hudi-10-0.7/blobInfo/CC_OUT/blobs/7d/5cf0408b1ee8e63261ecc3d52a6b0db3772f45.src","preCode":"  public void testNonNullableFieldWithDefault() {\n    GenericRecord rec = new GenericData.Record(new Schema.Parser().parse(EXAMPLE_SCHEMA));\n    rec.put(\"_row_key\", \"key1\");\n    rec.put(\"non_pii_col\", \"val1\");\n    rec.put(\"pii_col\", \"val2\");\n    rec.put(\"timestamp\", 3.5);\n    GenericRecord rec1 = HoodieAvroUtils.rewriteRecord(rec, new Schema.Parser().parse(SCHEMA_WITH_NON_NULLABLE_FIELD_WITH_DEFAULT));\n    assertEquals(rec1.get(\"non_nullable_field_with_default\"), \"dummy\");\n  }\n","realPath":"hudi-common/src/test/java/org/apache/hudi/avro/TestHoodieAvroUtils.java","repoName":"hudi","snippetEndLine":0,"snippetStartLine":0,"startLine":154,"status":"B"}],"commitId":"6a0aa9a645d11ed7b50e18aa0563dafcd9d145f7","commitMessage":"@@@[HUDI-803] Replaced used of NullNode with JsonProperties.NULL_VALUE in HoodieAvroUtils (#1538)\n\n- added more test cases in TestHoodieAvroUtils.class\n\nCo-authored-by: Vinoth Chandar <vinoth@apache.org>","date":"2020-05-21 00:04:43","modifiedFileCount":"2","status":"M","submitter":"Pratyaksh Sharma"},{"authorTime":"2020-05-21 00:04:43","codes":[{"authorDate":"2021-09-10 22:03:35","commitOrder":4,"curCode":"  public void testDefaultValue() {\n    GenericRecord rec = new GenericData.Record(new Schema.Parser().parse(EVOLVED_SCHEMA));\n    rec.put(\"_row_key\", \"key1\");\n    rec.put(\"non_pii_col\", \"val1\");\n    rec.put(\"pii_col\", \"val2\");\n    rec.put(\"timestamp\", 3.5);\n    Schema schemaWithMetadata = HoodieAvroUtils.addMetadataFields(new Schema.Parser().parse(EVOLVED_SCHEMA));\n    GenericRecord rec1 = HoodieAvroUtils.rewriteRecord(rec, schemaWithMetadata);\n    assertEquals(rec1.get(\"new_col_not_nullable_default_dummy_val\"), \"dummy_val\");\n    assertNull(rec1.get(\"new_col_nullable_wo_default\"));\n    assertNull(rec1.get(\"new_col_nullable_default_null\"));\n    assertEquals(rec1.get(\"new_col_nullable_default_dummy_val\"), \"dummy_val\");\n    assertNull(rec1.get(HoodieRecord.RECORD_KEY_METADATA_FIELD));\n  }\n","date":"2021-09-10 22:03:35","endLine":121,"groupId":"10878","id":3,"instanceNumber":1,"isCurCommit":1,"methodName":"testDefaultValue","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-hudi-10-0.7/blobInfo/CC_OUT/blobs/6f/5fe92158d72ace520bab49d946dc4834937fe9.src","preCode":"  public void testDefaultValue() {\n    GenericRecord rec = new GenericData.Record(new Schema.Parser().parse(EVOLVED_SCHEMA));\n    rec.put(\"_row_key\", \"key1\");\n    rec.put(\"non_pii_col\", \"val1\");\n    rec.put(\"pii_col\", \"val2\");\n    rec.put(\"timestamp\", 3.5);\n    Schema schemaWithMetadata = HoodieAvroUtils.addMetadataFields(new Schema.Parser().parse(EVOLVED_SCHEMA));\n    GenericRecord rec1 = HoodieAvroUtils.rewriteRecord(rec, schemaWithMetadata);\n    assertEquals(rec1.get(\"new_col1\"), \"dummy_val\");\n    assertNull(rec1.get(\"new_col2\"));\n    assertNull(rec1.get(HoodieRecord.RECORD_KEY_METADATA_FIELD));\n  }\n","realPath":"hudi-common/src/test/java/org/apache/hudi/avro/TestHoodieAvroUtils.java","repoName":"hudi","snippetEndLine":0,"snippetStartLine":0,"startLine":108,"status":"M"},{"authorDate":"2020-05-21 00:04:43","commitOrder":4,"curCode":"  public void testNonNullableFieldWithDefault() {\n    GenericRecord rec = new GenericData.Record(new Schema.Parser().parse(EXAMPLE_SCHEMA));\n    rec.put(\"_row_key\", \"key1\");\n    rec.put(\"non_pii_col\", \"val1\");\n    rec.put(\"pii_col\", \"val2\");\n    rec.put(\"timestamp\", 3.5);\n    GenericRecord rec1 = HoodieAvroUtils.rewriteRecord(rec, new Schema.Parser().parse(SCHEMA_WITH_NON_NULLABLE_FIELD_WITH_DEFAULT));\n    assertEquals(rec1.get(\"non_nullable_field_with_default\"), \"dummy\");\n  }\n","date":"2020-05-21 00:04:43","endLine":162,"groupId":"10878","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testNonNullableFieldWithDefault","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-hudi-10-0.7/blobInfo/CC_OUT/blobs/7d/5cf0408b1ee8e63261ecc3d52a6b0db3772f45.src","preCode":"  public void testNonNullableFieldWithDefault() {\n    GenericRecord rec = new GenericData.Record(new Schema.Parser().parse(EXAMPLE_SCHEMA));\n    rec.put(\"_row_key\", \"key1\");\n    rec.put(\"non_pii_col\", \"val1\");\n    rec.put(\"pii_col\", \"val2\");\n    rec.put(\"timestamp\", 3.5);\n    GenericRecord rec1 = HoodieAvroUtils.rewriteRecord(rec, new Schema.Parser().parse(SCHEMA_WITH_NON_NULLABLE_FIELD_WITH_DEFAULT));\n    assertEquals(rec1.get(\"non_nullable_field_with_default\"), \"dummy\");\n  }\n","realPath":"hudi-common/src/test/java/org/apache/hudi/avro/TestHoodieAvroUtils.java","repoName":"hudi","snippetEndLine":0,"snippetStartLine":0,"startLine":154,"status":"N"}],"commitId":"bd1d2d4952e2664e2049e79ac571578cddca4500","commitMessage":"@@@[MINOR] Add avro schema evolution test with (non)nullable column and with(out) default value (#3639)\n\n","date":"2021-09-10 22:03:35","modifiedFileCount":"1","status":"M","submitter":"Sagar Sumit"}]
