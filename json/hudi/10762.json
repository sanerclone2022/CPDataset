[{"authorTime":"2019-08-12 08:48:17","codes":[{"authorDate":"2021-06-16 06:21:43","commitOrder":2,"curCode":"  public void writeAvro(String recordKey, IndexedRecord object) throws IOException {\n    for (int col = 0; col < batch.numCols; col++) {\n      ColumnVector colVector = batch.cols[col];\n      final String thisField = fieldNames.get(col);\n      final TypeDescription type = fieldTypes.get(col);\n\n      Object fieldValue = ((GenericRecord) object).get(thisField);\n      Schema.Field avroField = avroSchema.getField(thisField);\n      AvroOrcUtils.addToVector(type, colVector, avroField.schema(), fieldValue, batch.size);\n    }\n\n    batch.size++;\n\n    \r\n    \r\n    if (batch.size == batch.getMaxSize()) {\n      writer.addRowBatch(batch);\n      batch.reset();\n      batch.size = 0;\n    }\n\n    if (orcConfig.useBloomFilter()) {\n      orcConfig.getBloomFilter().add(recordKey);\n      if (minRecordKey != null) {\n        minRecordKey = minRecordKey.compareTo(recordKey) <= 0 ? minRecordKey : recordKey;\n      } else {\n        minRecordKey = recordKey;\n      }\n\n      if (maxRecordKey != null) {\n        maxRecordKey = maxRecordKey.compareTo(recordKey) >= 0 ? maxRecordKey : recordKey;\n      } else {\n        maxRecordKey = recordKey;\n      }\n    }\n  }\n","date":"2021-06-16 06:21:43","endLine":143,"groupId":"5124","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"writeAvro","params":"(StringrecordKey@IndexedRecordobject)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-hudi-10-0.7/blobInfo/CC_OUT/blobs/f0/768429d602bf53e74f8189879f22a50416fc00.src","preCode":"  public void writeAvro(String recordKey, IndexedRecord object) throws IOException {\n    for (int col = 0; col < batch.numCols; col++) {\n      ColumnVector colVector = batch.cols[col];\n      final String thisField = fieldNames.get(col);\n      final TypeDescription type = fieldTypes.get(col);\n\n      Object fieldValue = ((GenericRecord) object).get(thisField);\n      Schema.Field avroField = avroSchema.getField(thisField);\n      AvroOrcUtils.addToVector(type, colVector, avroField.schema(), fieldValue, batch.size);\n    }\n\n    batch.size++;\n\n    \r\n    \r\n    if (batch.size == batch.getMaxSize()) {\n      writer.addRowBatch(batch);\n      batch.reset();\n      batch.size = 0;\n    }\n\n    if (orcConfig.useBloomFilter()) {\n      orcConfig.getBloomFilter().add(recordKey);\n      if (minRecordKey != null) {\n        minRecordKey = minRecordKey.compareTo(recordKey) <= 0 ? minRecordKey : recordKey;\n      } else {\n        minRecordKey = recordKey;\n      }\n\n      if (maxRecordKey != null) {\n        maxRecordKey = maxRecordKey.compareTo(recordKey) >= 0 ? maxRecordKey : recordKey;\n      } else {\n        maxRecordKey = recordKey;\n      }\n    }\n  }\n","realPath":"hudi-client/hudi-client-common/src/main/java/org/apache/hudi/io/storage/HoodieOrcWriter.java","repoName":"hudi","snippetEndLine":0,"snippetStartLine":0,"startLine":108,"status":"B"},{"authorDate":"2019-08-12 08:48:17","commitOrder":2,"curCode":"  public void add(String recordKey) {\n    this.bloomFilter.add(recordKey);\n    if (minRecordKey != null) {\n      minRecordKey = minRecordKey.compareTo(recordKey) <= 0 ? minRecordKey : recordKey;\n    } else {\n      minRecordKey = recordKey;\n    }\n\n    if (maxRecordKey != null) {\n      maxRecordKey = maxRecordKey.compareTo(recordKey) >= 0 ? maxRecordKey : recordKey;\n    } else {\n      maxRecordKey = recordKey;\n    }\n  }\n","date":"2019-08-12 08:48:17","endLine":76,"groupId":"5124","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"add","params":"(StringrecordKey)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-hudi-10-0.7/blobInfo/CC_OUT/blobs/8a/016478181cdd76fe289c90f9e016c2c6686a1e.src","preCode":"  public void add(String recordKey) {\n    this.bloomFilter.add(recordKey);\n    if (minRecordKey != null) {\n      minRecordKey = minRecordKey.compareTo(recordKey) <= 0 ? minRecordKey : recordKey;\n    } else {\n      minRecordKey = recordKey;\n    }\n\n    if (maxRecordKey != null) {\n      maxRecordKey = maxRecordKey.compareTo(recordKey) >= 0 ? maxRecordKey : recordKey;\n    } else {\n      maxRecordKey = recordKey;\n    }\n  }\n","realPath":"hudi-common/src/main/java/org/apache/hudi/avro/HoodieAvroWriteSupport.java","repoName":"hudi","snippetEndLine":0,"snippetStartLine":0,"startLine":63,"status":"NB"}],"commitId":"b8fe5b91d599418cd908d833fd63edc7f362c548","commitMessage":"@@@[HUDI-764] [HUDI-765] ORC reader writer Implementation (#2999)\n\n\nCo-authored-by: Qingyun (Teresa) Kang <kteresa@uber.com>","date":"2021-06-16 06:21:43","modifiedFileCount":"14","status":"M","submitter":"Jintao Guan"},{"authorTime":"2021-07-27 05:21:04","codes":[{"authorDate":"2021-06-16 06:21:43","commitOrder":3,"curCode":"  public void writeAvro(String recordKey, IndexedRecord object) throws IOException {\n    for (int col = 0; col < batch.numCols; col++) {\n      ColumnVector colVector = batch.cols[col];\n      final String thisField = fieldNames.get(col);\n      final TypeDescription type = fieldTypes.get(col);\n\n      Object fieldValue = ((GenericRecord) object).get(thisField);\n      Schema.Field avroField = avroSchema.getField(thisField);\n      AvroOrcUtils.addToVector(type, colVector, avroField.schema(), fieldValue, batch.size);\n    }\n\n    batch.size++;\n\n    \r\n    \r\n    if (batch.size == batch.getMaxSize()) {\n      writer.addRowBatch(batch);\n      batch.reset();\n      batch.size = 0;\n    }\n\n    if (orcConfig.useBloomFilter()) {\n      orcConfig.getBloomFilter().add(recordKey);\n      if (minRecordKey != null) {\n        minRecordKey = minRecordKey.compareTo(recordKey) <= 0 ? minRecordKey : recordKey;\n      } else {\n        minRecordKey = recordKey;\n      }\n\n      if (maxRecordKey != null) {\n        maxRecordKey = maxRecordKey.compareTo(recordKey) >= 0 ? maxRecordKey : recordKey;\n      } else {\n        maxRecordKey = recordKey;\n      }\n    }\n  }\n","date":"2021-06-16 06:21:43","endLine":143,"groupId":"10762","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"writeAvro","params":"(StringrecordKey@IndexedRecordobject)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-hudi-10-0.7/blobInfo/CC_OUT/blobs/f0/768429d602bf53e74f8189879f22a50416fc00.src","preCode":"  public void writeAvro(String recordKey, IndexedRecord object) throws IOException {\n    for (int col = 0; col < batch.numCols; col++) {\n      ColumnVector colVector = batch.cols[col];\n      final String thisField = fieldNames.get(col);\n      final TypeDescription type = fieldTypes.get(col);\n\n      Object fieldValue = ((GenericRecord) object).get(thisField);\n      Schema.Field avroField = avroSchema.getField(thisField);\n      AvroOrcUtils.addToVector(type, colVector, avroField.schema(), fieldValue, batch.size);\n    }\n\n    batch.size++;\n\n    \r\n    \r\n    if (batch.size == batch.getMaxSize()) {\n      writer.addRowBatch(batch);\n      batch.reset();\n      batch.size = 0;\n    }\n\n    if (orcConfig.useBloomFilter()) {\n      orcConfig.getBloomFilter().add(recordKey);\n      if (minRecordKey != null) {\n        minRecordKey = minRecordKey.compareTo(recordKey) <= 0 ? minRecordKey : recordKey;\n      } else {\n        minRecordKey = recordKey;\n      }\n\n      if (maxRecordKey != null) {\n        maxRecordKey = maxRecordKey.compareTo(recordKey) >= 0 ? maxRecordKey : recordKey;\n      } else {\n        maxRecordKey = recordKey;\n      }\n    }\n  }\n","realPath":"hudi-client/hudi-client-common/src/main/java/org/apache/hudi/io/storage/HoodieOrcWriter.java","repoName":"hudi","snippetEndLine":0,"snippetStartLine":0,"startLine":108,"status":"N"},{"authorDate":"2021-07-27 05:21:04","commitOrder":3,"curCode":"  public void add(String recordKey) {\n    if (bloomFilterOpt.isPresent()) {\n      this.bloomFilterOpt.get().add(recordKey);\n      if (minRecordKey != null) {\n        minRecordKey = minRecordKey.compareTo(recordKey) <= 0 ? minRecordKey : recordKey;\n      } else {\n        minRecordKey = recordKey;\n      }\n\n      if (maxRecordKey != null) {\n        maxRecordKey = maxRecordKey.compareTo(recordKey) >= 0 ? maxRecordKey : recordKey;\n      } else {\n        maxRecordKey = recordKey;\n      }\n    }\n  }\n","date":"2021-07-27 05:21:04","endLine":84,"groupId":"10762","id":4,"instanceNumber":2,"isCurCommit":1,"methodName":"add","params":"(StringrecordKey)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-hudi-10-0.7/blobInfo/CC_OUT/blobs/9a/6f26ac93957a3b8439df4599fdfdb940341d51.src","preCode":"  public void add(String recordKey) {\n    this.bloomFilter.add(recordKey);\n    if (minRecordKey != null) {\n      minRecordKey = minRecordKey.compareTo(recordKey) <= 0 ? minRecordKey : recordKey;\n    } else {\n      minRecordKey = recordKey;\n    }\n\n    if (maxRecordKey != null) {\n      maxRecordKey = maxRecordKey.compareTo(recordKey) >= 0 ? maxRecordKey : recordKey;\n    } else {\n      maxRecordKey = recordKey;\n    }\n  }\n","realPath":"hudi-common/src/main/java/org/apache/hudi/avro/HoodieAvroWriteSupport.java","repoName":"hudi","snippetEndLine":0,"snippetStartLine":0,"startLine":69,"status":"M"}],"commitId":"61148c1c43c9ff5ba04b6c174e9e2a006db9e7b3","commitMessage":"@@@[HUDI-2176.  2178.  2179] Adding virtual key support to COW table (#3306)\n\n","date":"2021-07-27 05:21:04","modifiedFileCount":"42","status":"M","submitter":"Sivabalan Narayanan"}]
