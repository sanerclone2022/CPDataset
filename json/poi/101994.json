[{"authorTime":"2021-04-08 05:40:33","codes":[{"authorDate":"2021-04-08 05:40:33","commitOrder":1,"curCode":"    void testWriteNewStream() throws Exception {\n        POIFSFileSystem fs = new POIFSFileSystem(_inst.openResourceAsStream(\"BlockSize512.zvi\"));\n\n        \r\n        assertEquals(POIFSConstants.FAT_SECTOR_BLOCK, fs.getNextBlock(99));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(100));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(101));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(102));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(103));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(104));\n\n\n        \r\n        byte[] data = new byte[512];\n        for (int i = 0; i < data.length; i++) {\n            data[i] = (byte) (i % 256);\n        }\n\n        POIFSStream stream = new POIFSStream(fs);\n        stream.updateContents(data);\n\n        \r\n        assertEquals(POIFSConstants.FAT_SECTOR_BLOCK, fs.getNextBlock(99));\n        assertEquals(POIFSConstants.END_OF_CHAIN, fs.getNextBlock(100));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(101));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(102));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(103));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(104));\n\n        \r\n        Iterator<ByteBuffer> it = stream.getBlockIterator();\n        int count = 0;\n        while (it.hasNext()) {\n            ByteBuffer b = it.next();\n            data = new byte[512];\n            b.get(data);\n            for (int i = 0; i < data.length; i++) {\n                byte exp = (byte) (i % 256);\n                assertEquals(exp, data[i]);\n            }\n            count++;\n        }\n        assertEquals(1, count);\n\n\n        \r\n        data = new byte[512 * 3];\n        for (int i = 0; i < data.length; i++) {\n            data[i] = (byte) (i % 256);\n        }\n\n        stream = new POIFSStream(fs);\n        stream.updateContents(data);\n\n        \r\n        assertEquals(POIFSConstants.FAT_SECTOR_BLOCK, fs.getNextBlock(99));\n        assertEquals(POIFSConstants.END_OF_CHAIN, fs.getNextBlock(100));\n        assertEquals(102, fs.getNextBlock(101));\n        assertEquals(103, fs.getNextBlock(102));\n        assertEquals(POIFSConstants.END_OF_CHAIN, fs.getNextBlock(103));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(104));\n\n        \r\n        it = stream.getBlockIterator();\n        count = 0;\n        while (it.hasNext()) {\n            ByteBuffer b = it.next();\n            data = new byte[512];\n            b.get(data);\n            for (int i = 0; i < data.length; i++) {\n                byte exp = (byte) (i % 256);\n                assertEquals(exp, data[i]);\n            }\n            count++;\n        }\n        assertEquals(3, count);\n\n        \r\n        stream.free();\n        assertEquals(POIFSConstants.FAT_SECTOR_BLOCK, fs.getNextBlock(99));\n        assertEquals(POIFSConstants.END_OF_CHAIN, fs.getNextBlock(100));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(101));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(102));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(103));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(104));\n\n        fs.close();\n    }\n","date":"2021-04-08 05:40:33","endLine":544,"groupId":"13672","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testWriteNewStream","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-poi-10-0.7/blobInfo/CC_OUT/blobs/2a/2a8122d18a15c23423f3af10ee11c719792def.src","preCode":"    void testWriteNewStream() throws Exception {\n        POIFSFileSystem fs = new POIFSFileSystem(_inst.openResourceAsStream(\"BlockSize512.zvi\"));\n\n        \r\n        assertEquals(POIFSConstants.FAT_SECTOR_BLOCK, fs.getNextBlock(99));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(100));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(101));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(102));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(103));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(104));\n\n\n        \r\n        byte[] data = new byte[512];\n        for (int i = 0; i < data.length; i++) {\n            data[i] = (byte) (i % 256);\n        }\n\n        POIFSStream stream = new POIFSStream(fs);\n        stream.updateContents(data);\n\n        \r\n        assertEquals(POIFSConstants.FAT_SECTOR_BLOCK, fs.getNextBlock(99));\n        assertEquals(POIFSConstants.END_OF_CHAIN, fs.getNextBlock(100));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(101));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(102));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(103));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(104));\n\n        \r\n        Iterator<ByteBuffer> it = stream.getBlockIterator();\n        int count = 0;\n        while (it.hasNext()) {\n            ByteBuffer b = it.next();\n            data = new byte[512];\n            b.get(data);\n            for (int i = 0; i < data.length; i++) {\n                byte exp = (byte) (i % 256);\n                assertEquals(exp, data[i]);\n            }\n            count++;\n        }\n        assertEquals(1, count);\n\n\n        \r\n        data = new byte[512 * 3];\n        for (int i = 0; i < data.length; i++) {\n            data[i] = (byte) (i % 256);\n        }\n\n        stream = new POIFSStream(fs);\n        stream.updateContents(data);\n\n        \r\n        assertEquals(POIFSConstants.FAT_SECTOR_BLOCK, fs.getNextBlock(99));\n        assertEquals(POIFSConstants.END_OF_CHAIN, fs.getNextBlock(100));\n        assertEquals(102, fs.getNextBlock(101));\n        assertEquals(103, fs.getNextBlock(102));\n        assertEquals(POIFSConstants.END_OF_CHAIN, fs.getNextBlock(103));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(104));\n\n        \r\n        it = stream.getBlockIterator();\n        count = 0;\n        while (it.hasNext()) {\n            ByteBuffer b = it.next();\n            data = new byte[512];\n            b.get(data);\n            for (int i = 0; i < data.length; i++) {\n                byte exp = (byte) (i % 256);\n                assertEquals(exp, data[i]);\n            }\n            count++;\n        }\n        assertEquals(3, count);\n\n        \r\n        stream.free();\n        assertEquals(POIFSConstants.FAT_SECTOR_BLOCK, fs.getNextBlock(99));\n        assertEquals(POIFSConstants.END_OF_CHAIN, fs.getNextBlock(100));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(101));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(102));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(103));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(104));\n\n        fs.close();\n    }\n","realPath":"poi/src/test/java/org/apache/poi/poifs/filesystem/TestPOIFSStream.java","repoName":"poi","snippetEndLine":0,"snippetStartLine":0,"startLine":457,"status":"B"},{"authorDate":"2021-04-08 05:40:33","commitOrder":1,"curCode":"    void testWriteNewStreamExtraFATs() throws Exception {\n        POIFSFileSystem fs = new POIFSFileSystem(_inst.openResourceAsStream(\"BlockSize512.zvi\"));\n\n        \r\n        assertEquals(POIFSConstants.FAT_SECTOR_BLOCK, fs.getNextBlock(99));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(100));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(127));\n        for (int i = 100; i < 127; i++) {\n            fs.setNextBlock(i, POIFSConstants.END_OF_CHAIN);\n        }\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(127));\n        assertTrue(fs.getBATBlockAndIndex(0).getBlock().hasFreeSectors());\n\n\n        \r\n        byte[] data = new byte[512 * 3];\n        for (int i = 0; i < data.length; i++) {\n            data[i] = (byte) (i % 256);\n        }\n        POIFSStream stream = new POIFSStream(fs);\n        stream.updateContents(data);\n\n        \r\n        assertFalse(fs.getBATBlockAndIndex(0).getBlock().hasFreeSectors());\n        assertTrue(fs.getBATBlockAndIndex(128).getBlock().hasFreeSectors());\n\n        \r\n        assertEquals(POIFSConstants.END_OF_CHAIN, fs.getNextBlock(126));\n        assertEquals(129, fs.getNextBlock(127));\n        assertEquals(POIFSConstants.FAT_SECTOR_BLOCK, fs.getNextBlock(128));\n        assertEquals(130, fs.getNextBlock(129));\n        assertEquals(POIFSConstants.END_OF_CHAIN, fs.getNextBlock(130));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(131));\n\n        fs.close();\n    }\n","date":"2021-04-08 05:40:33","endLine":587,"groupId":"11240","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testWriteNewStreamExtraFATs","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-poi-10-0.7/blobInfo/CC_OUT/blobs/2a/2a8122d18a15c23423f3af10ee11c719792def.src","preCode":"    void testWriteNewStreamExtraFATs() throws Exception {\n        POIFSFileSystem fs = new POIFSFileSystem(_inst.openResourceAsStream(\"BlockSize512.zvi\"));\n\n        \r\n        assertEquals(POIFSConstants.FAT_SECTOR_BLOCK, fs.getNextBlock(99));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(100));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(127));\n        for (int i = 100; i < 127; i++) {\n            fs.setNextBlock(i, POIFSConstants.END_OF_CHAIN);\n        }\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(127));\n        assertTrue(fs.getBATBlockAndIndex(0).getBlock().hasFreeSectors());\n\n\n        \r\n        byte[] data = new byte[512 * 3];\n        for (int i = 0; i < data.length; i++) {\n            data[i] = (byte) (i % 256);\n        }\n        POIFSStream stream = new POIFSStream(fs);\n        stream.updateContents(data);\n\n        \r\n        assertFalse(fs.getBATBlockAndIndex(0).getBlock().hasFreeSectors());\n        assertTrue(fs.getBATBlockAndIndex(128).getBlock().hasFreeSectors());\n\n        \r\n        assertEquals(POIFSConstants.END_OF_CHAIN, fs.getNextBlock(126));\n        assertEquals(129, fs.getNextBlock(127));\n        assertEquals(POIFSConstants.FAT_SECTOR_BLOCK, fs.getNextBlock(128));\n        assertEquals(130, fs.getNextBlock(129));\n        assertEquals(POIFSConstants.END_OF_CHAIN, fs.getNextBlock(130));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(131));\n\n        fs.close();\n    }\n","realPath":"poi/src/test/java/org/apache/poi/poifs/filesystem/TestPOIFSStream.java","repoName":"poi","snippetEndLine":0,"snippetStartLine":0,"startLine":552,"status":"B"}],"commitId":"b6aee1ef6d3e92a28ffd4b5c03e677b63b43747f","commitMessage":"@@@65206 - Migrate ant / maven to gradle build\ncompile / jar / test of mrJars\ndon't include ants build.xml anymore\nrename directories to match project and maven artifact names\nrefactor artifacts - so each project has one artifact\nreplace static references in hssf/dev tests with junit5 constructs.  which had problems in parallel tests\nincrease gradle heap to 4gb because of OOM - maybe less would also work\n\ngit-svn-id: https://svn.apache.org/repos/asf/poi/trunk@1888488 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2021-04-08 05:40:33","modifiedFileCount":"0","status":"B","submitter":"Andreas Beeker"},{"authorTime":"2021-05-14 08:37:50","codes":[{"authorDate":"2021-05-14 08:37:50","commitOrder":2,"curCode":"    void testWriteNewStream() throws Exception {\n        try (POIFSFileSystem fs = new POIFSFileSystem(_inst.openResourceAsStream(\"BlockSize512.zvi\"))) {\n\n            \r\n            assertEquals(POIFSConstants.FAT_SECTOR_BLOCK, fs.getNextBlock(99));\n            assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(100));\n            assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(101));\n            assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(102));\n            assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(103));\n            assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(104));\n\n\n            \r\n            byte[] data = new byte[512];\n            for (int i = 0; i < data.length; i++) {\n                data[i] = (byte) (i % 256);\n            }\n\n            POIFSStream stream = new POIFSStream(fs);\n            stream.updateContents(data);\n\n            \r\n            assertEquals(POIFSConstants.FAT_SECTOR_BLOCK, fs.getNextBlock(99));\n            assertEquals(POIFSConstants.END_OF_CHAIN, fs.getNextBlock(100));\n            assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(101));\n            assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(102));\n            assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(103));\n            assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(104));\n\n            \r\n            Iterator<ByteBuffer> it = stream.getBlockIterator();\n            int count = 0;\n            while (it.hasNext()) {\n                ByteBuffer b = it.next();\n                data = new byte[512];\n                b.get(data);\n                for (int i = 0; i < data.length; i++) {\n                    byte exp = (byte) (i % 256);\n                    assertEquals(exp, data[i]);\n                }\n                count++;\n            }\n            assertEquals(1, count);\n\n\n            \r\n            data = new byte[512 * 3];\n            for (int i = 0; i < data.length; i++) {\n                data[i] = (byte) (i % 256);\n            }\n\n            stream = new POIFSStream(fs);\n            stream.updateContents(data);\n\n            \r\n            assertEquals(POIFSConstants.FAT_SECTOR_BLOCK, fs.getNextBlock(99));\n            assertEquals(POIFSConstants.END_OF_CHAIN, fs.getNextBlock(100));\n            assertEquals(102, fs.getNextBlock(101));\n            assertEquals(103, fs.getNextBlock(102));\n            assertEquals(POIFSConstants.END_OF_CHAIN, fs.getNextBlock(103));\n            assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(104));\n\n            \r\n            it = stream.getBlockIterator();\n            count = 0;\n            while (it.hasNext()) {\n                ByteBuffer b = it.next();\n                data = new byte[512];\n                b.get(data);\n                for (int i = 0; i < data.length; i++) {\n                    byte exp = (byte) (i % 256);\n                    assertEquals(exp, data[i]);\n                }\n                count++;\n            }\n            assertEquals(3, count);\n\n            \r\n            stream.free();\n            assertEquals(POIFSConstants.FAT_SECTOR_BLOCK, fs.getNextBlock(99));\n            assertEquals(POIFSConstants.END_OF_CHAIN, fs.getNextBlock(100));\n            assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(101));\n            assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(102));\n            assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(103));\n            assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(104));\n        }\n    }\n","date":"2021-05-14 08:37:50","endLine":545,"groupId":"101994","id":3,"instanceNumber":1,"isCurCommit":1,"methodName":"testWriteNewStream","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-poi-10-0.7/blobInfo/CC_OUT/blobs/43/0cd8e5d2048f4ede7699ed07de7ef76c4ac1ee.src","preCode":"    void testWriteNewStream() throws Exception {\n        POIFSFileSystem fs = new POIFSFileSystem(_inst.openResourceAsStream(\"BlockSize512.zvi\"));\n\n        \r\n        assertEquals(POIFSConstants.FAT_SECTOR_BLOCK, fs.getNextBlock(99));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(100));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(101));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(102));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(103));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(104));\n\n\n        \r\n        byte[] data = new byte[512];\n        for (int i = 0; i < data.length; i++) {\n            data[i] = (byte) (i % 256);\n        }\n\n        POIFSStream stream = new POIFSStream(fs);\n        stream.updateContents(data);\n\n        \r\n        assertEquals(POIFSConstants.FAT_SECTOR_BLOCK, fs.getNextBlock(99));\n        assertEquals(POIFSConstants.END_OF_CHAIN, fs.getNextBlock(100));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(101));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(102));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(103));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(104));\n\n        \r\n        Iterator<ByteBuffer> it = stream.getBlockIterator();\n        int count = 0;\n        while (it.hasNext()) {\n            ByteBuffer b = it.next();\n            data = new byte[512];\n            b.get(data);\n            for (int i = 0; i < data.length; i++) {\n                byte exp = (byte) (i % 256);\n                assertEquals(exp, data[i]);\n            }\n            count++;\n        }\n        assertEquals(1, count);\n\n\n        \r\n        data = new byte[512 * 3];\n        for (int i = 0; i < data.length; i++) {\n            data[i] = (byte) (i % 256);\n        }\n\n        stream = new POIFSStream(fs);\n        stream.updateContents(data);\n\n        \r\n        assertEquals(POIFSConstants.FAT_SECTOR_BLOCK, fs.getNextBlock(99));\n        assertEquals(POIFSConstants.END_OF_CHAIN, fs.getNextBlock(100));\n        assertEquals(102, fs.getNextBlock(101));\n        assertEquals(103, fs.getNextBlock(102));\n        assertEquals(POIFSConstants.END_OF_CHAIN, fs.getNextBlock(103));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(104));\n\n        \r\n        it = stream.getBlockIterator();\n        count = 0;\n        while (it.hasNext()) {\n            ByteBuffer b = it.next();\n            data = new byte[512];\n            b.get(data);\n            for (int i = 0; i < data.length; i++) {\n                byte exp = (byte) (i % 256);\n                assertEquals(exp, data[i]);\n            }\n            count++;\n        }\n        assertEquals(3, count);\n\n        \r\n        stream.free();\n        assertEquals(POIFSConstants.FAT_SECTOR_BLOCK, fs.getNextBlock(99));\n        assertEquals(POIFSConstants.END_OF_CHAIN, fs.getNextBlock(100));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(101));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(102));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(103));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(104));\n\n        fs.close();\n    }\n","realPath":"poi/src/test/java/org/apache/poi/poifs/filesystem/TestPOIFSStream.java","repoName":"poi","snippetEndLine":0,"snippetStartLine":0,"startLine":459,"status":"M"},{"authorDate":"2021-05-14 08:37:50","commitOrder":2,"curCode":"    void testWriteNewStreamExtraFATs() throws Exception {\n        try (POIFSFileSystem fs = new POIFSFileSystem(_inst.openResourceAsStream(\"BlockSize512.zvi\"))) {\n\n            \r\n            assertEquals(POIFSConstants.FAT_SECTOR_BLOCK, fs.getNextBlock(99));\n            assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(100));\n            assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(127));\n            for (int i = 100; i < 127; i++) {\n                fs.setNextBlock(i, POIFSConstants.END_OF_CHAIN);\n            }\n            assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(127));\n            assertTrue(fs.getBATBlockAndIndex(0).getBlock().hasFreeSectors());\n\n\n            \r\n            byte[] data = new byte[512 * 3];\n            for (int i = 0; i < data.length; i++) {\n                data[i] = (byte) (i % 256);\n            }\n            POIFSStream stream = new POIFSStream(fs);\n            stream.updateContents(data);\n\n            \r\n            assertFalse(fs.getBATBlockAndIndex(0).getBlock().hasFreeSectors());\n            assertTrue(fs.getBATBlockAndIndex(128).getBlock().hasFreeSectors());\n\n            \r\n            assertEquals(POIFSConstants.END_OF_CHAIN, fs.getNextBlock(126));\n            assertEquals(129, fs.getNextBlock(127));\n            assertEquals(POIFSConstants.FAT_SECTOR_BLOCK, fs.getNextBlock(128));\n            assertEquals(130, fs.getNextBlock(129));\n            assertEquals(POIFSConstants.END_OF_CHAIN, fs.getNextBlock(130));\n            assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(131));\n        }\n    }\n","date":"2021-05-14 08:37:50","endLine":587,"groupId":"101994","id":4,"instanceNumber":2,"isCurCommit":1,"methodName":"testWriteNewStreamExtraFATs","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-poi-10-0.7/blobInfo/CC_OUT/blobs/43/0cd8e5d2048f4ede7699ed07de7ef76c4ac1ee.src","preCode":"    void testWriteNewStreamExtraFATs() throws Exception {\n        POIFSFileSystem fs = new POIFSFileSystem(_inst.openResourceAsStream(\"BlockSize512.zvi\"));\n\n        \r\n        assertEquals(POIFSConstants.FAT_SECTOR_BLOCK, fs.getNextBlock(99));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(100));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(127));\n        for (int i = 100; i < 127; i++) {\n            fs.setNextBlock(i, POIFSConstants.END_OF_CHAIN);\n        }\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(127));\n        assertTrue(fs.getBATBlockAndIndex(0).getBlock().hasFreeSectors());\n\n\n        \r\n        byte[] data = new byte[512 * 3];\n        for (int i = 0; i < data.length; i++) {\n            data[i] = (byte) (i % 256);\n        }\n        POIFSStream stream = new POIFSStream(fs);\n        stream.updateContents(data);\n\n        \r\n        assertFalse(fs.getBATBlockAndIndex(0).getBlock().hasFreeSectors());\n        assertTrue(fs.getBATBlockAndIndex(128).getBlock().hasFreeSectors());\n\n        \r\n        assertEquals(POIFSConstants.END_OF_CHAIN, fs.getNextBlock(126));\n        assertEquals(129, fs.getNextBlock(127));\n        assertEquals(POIFSConstants.FAT_SECTOR_BLOCK, fs.getNextBlock(128));\n        assertEquals(130, fs.getNextBlock(129));\n        assertEquals(POIFSConstants.END_OF_CHAIN, fs.getNextBlock(130));\n        assertEquals(POIFSConstants.UNUSED_BLOCK, fs.getNextBlock(131));\n\n        fs.close();\n    }\n","realPath":"poi/src/test/java/org/apache/poi/poifs/filesystem/TestPOIFSStream.java","repoName":"poi","snippetEndLine":0,"snippetStartLine":0,"startLine":553,"status":"M"}],"commitId":"0614835c55f44ab6f3e9b0850ca51e0e53a65a49","commitMessage":"@@@#65304 - Add commons-io as a dependency\n\ngit-svn-id: https://svn.apache.org/repos/asf/poi/trunk@1889871 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2021-05-14 08:37:50","modifiedFileCount":"277","status":"M","submitter":"Andreas Beeker"}]
