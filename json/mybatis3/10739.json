[{"authorTime":"2011-11-25 13:53:27","codes":[{"authorDate":"2011-11-25 13:53:27","commitOrder":1,"curCode":"  public void shouldInsertNewAuthorWithBeforeAutoKey() throws Exception {\n    DataSource ds = createBlogDataSource();\n    Connection connection = ds.getConnection();\n    Executor executor = createExecutor(new JdbcTransaction(connection));\n    try {\n      Author author = new Author(-1, \"someone\", \"******\", \"someone@apache.org\", null, Section.NEWS);\n      MappedStatement insertStatement = ExecutorTestHelper.prepareInsertAuthorMappedStatementWithBeforeAutoKey(config);\n      MappedStatement selectStatement = ExecutorTestHelper.prepareSelectOneAuthorMappedStatement(config);\n      int rows = executor.update(insertStatement, author);\n      assertTrue(rows > 0 || rows == BatchExecutor.BATCH_UPDATE_RETURN_VALUE);\n      if (rows == BatchExecutor.BATCH_UPDATE_RETURN_VALUE) {\n        executor.flushStatements();\n      }\n      assertEquals(123456, author.getId());\n      if (author.getId() != BatchExecutor.BATCH_UPDATE_RETURN_VALUE) {\n        List<Author> authors = executor.query(selectStatement, author.getId(), RowBounds.DEFAULT, Executor.NO_RESULT_HANDLER);\n        executor.rollback(true);\n        assertEquals(1, authors.size());\n        assertEquals(author.toString(), authors.get(0).toString());\n        assertTrue(author.getId() >= 10000);\n      }\n    } finally {\n      executor.rollback(true);\n      executor.close(false);\n    }\n  }\n","date":"2011-11-25 13:53:27","endLine":61,"groupId":"1156","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"shouldInsertNewAuthorWithBeforeAutoKey","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-mybatis3-10-0.7/blobInfo/CC_OUT/blobs/63/63e2e00399b44f5e2e2432dbd786aba6e9ddc3.src","preCode":"  public void shouldInsertNewAuthorWithBeforeAutoKey() throws Exception {\n    DataSource ds = createBlogDataSource();\n    Connection connection = ds.getConnection();\n    Executor executor = createExecutor(new JdbcTransaction(connection));\n    try {\n      Author author = new Author(-1, \"someone\", \"******\", \"someone@apache.org\", null, Section.NEWS);\n      MappedStatement insertStatement = ExecutorTestHelper.prepareInsertAuthorMappedStatementWithBeforeAutoKey(config);\n      MappedStatement selectStatement = ExecutorTestHelper.prepareSelectOneAuthorMappedStatement(config);\n      int rows = executor.update(insertStatement, author);\n      assertTrue(rows > 0 || rows == BatchExecutor.BATCH_UPDATE_RETURN_VALUE);\n      if (rows == BatchExecutor.BATCH_UPDATE_RETURN_VALUE) {\n        executor.flushStatements();\n      }\n      assertEquals(123456, author.getId());\n      if (author.getId() != BatchExecutor.BATCH_UPDATE_RETURN_VALUE) {\n        List<Author> authors = executor.query(selectStatement, author.getId(), RowBounds.DEFAULT, Executor.NO_RESULT_HANDLER);\n        executor.rollback(true);\n        assertEquals(1, authors.size());\n        assertEquals(author.toString(), authors.get(0).toString());\n        assertTrue(author.getId() >= 10000);\n      }\n    } finally {\n      executor.rollback(true);\n      executor.close(false);\n    }\n  }\n","realPath":"src/test/java/org/apache/ibatis/executor/BaseExecutorTest.java","repoName":"mybatis3","snippetEndLine":0,"snippetStartLine":0,"startLine":36,"status":"B"},{"authorDate":"2011-11-25 13:53:27","commitOrder":1,"curCode":"  public void shouldInsertNewAuthorWithAutoKey() throws Exception {\n    DataSource ds = createBlogDataSource();\n    Connection connection = ds.getConnection();\n    Executor executor = createExecutor(new JdbcTransaction(connection));\n    try {\n      Author author = new Author(-1, \"someone\", \"******\", \"someone@apache.org\", null, Section.NEWS);\n      MappedStatement insertStatement = ExecutorTestHelper.prepareInsertAuthorMappedStatementWithAutoKey(config);\n      MappedStatement selectStatement = ExecutorTestHelper.prepareSelectOneAuthorMappedStatement(config);\n      int rows = executor.update(insertStatement, author);\n      assertTrue(rows > 0 || rows == BatchExecutor.BATCH_UPDATE_RETURN_VALUE);\n      if (rows == BatchExecutor.BATCH_UPDATE_RETURN_VALUE) {\n        executor.flushStatements();\n      }\n      assertTrue(-1 != author.getId());\n      if (author.getId() != BatchExecutor.BATCH_UPDATE_RETURN_VALUE) {\n        List<Author> authors = executor.query(selectStatement, author.getId(), RowBounds.DEFAULT, Executor.NO_RESULT_HANDLER);\n        executor.rollback(true);\n        assertEquals(1, authors.size());\n        assertEquals(author.toString(), authors.get(0).toString());\n        assertTrue(author.getId() >= 10000);\n      }\n    } finally {\n      executor.rollback(true);\n      executor.close(false);\n    }\n  }\n","date":"2011-11-25 13:53:27","endLine":134,"groupId":"1156","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"shouldInsertNewAuthorWithAutoKey","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-mybatis3-10-0.7/blobInfo/CC_OUT/blobs/63/63e2e00399b44f5e2e2432dbd786aba6e9ddc3.src","preCode":"  public void shouldInsertNewAuthorWithAutoKey() throws Exception {\n    DataSource ds = createBlogDataSource();\n    Connection connection = ds.getConnection();\n    Executor executor = createExecutor(new JdbcTransaction(connection));\n    try {\n      Author author = new Author(-1, \"someone\", \"******\", \"someone@apache.org\", null, Section.NEWS);\n      MappedStatement insertStatement = ExecutorTestHelper.prepareInsertAuthorMappedStatementWithAutoKey(config);\n      MappedStatement selectStatement = ExecutorTestHelper.prepareSelectOneAuthorMappedStatement(config);\n      int rows = executor.update(insertStatement, author);\n      assertTrue(rows > 0 || rows == BatchExecutor.BATCH_UPDATE_RETURN_VALUE);\n      if (rows == BatchExecutor.BATCH_UPDATE_RETURN_VALUE) {\n        executor.flushStatements();\n      }\n      assertTrue(-1 != author.getId());\n      if (author.getId() != BatchExecutor.BATCH_UPDATE_RETURN_VALUE) {\n        List<Author> authors = executor.query(selectStatement, author.getId(), RowBounds.DEFAULT, Executor.NO_RESULT_HANDLER);\n        executor.rollback(true);\n        assertEquals(1, authors.size());\n        assertEquals(author.toString(), authors.get(0).toString());\n        assertTrue(author.getId() >= 10000);\n      }\n    } finally {\n      executor.rollback(true);\n      executor.close(false);\n    }\n  }\n","realPath":"src/test/java/org/apache/ibatis/executor/BaseExecutorTest.java","repoName":"mybatis3","snippetEndLine":0,"snippetStartLine":0,"startLine":109,"status":"B"}],"commitId":"29ce8784eb0b9537bd0cfa476cd1826c8e9b910a","commitMessage":"@@@http://code.google.com/p/mybatis/issues/detail?id=382  (feature). Moves connection retrieval to Transaction. Transaction delays connection retrieval till getConnection() is called.\nUpdated also Spring so MyBatis lazy loads get connections from Spring TX Manager\n\n","date":"2011-11-25 13:53:27","modifiedFileCount":"20","status":"B","submitter":"Eduardo Macarron"},{"authorTime":"2014-03-03 01:03:15","codes":[{"authorDate":"2014-03-03 01:03:15","commitOrder":2,"curCode":"  public void shouldInsertNewAuthorWithBeforeAutoKey() throws Exception {\n    \n    Executor executor = createExecutor(new JdbcTransaction(ds, null, false));\n    try {\n      Author author = new Author(-1, \"someone\", \"******\", \"someone@apache.org\", null, Section.NEWS);\n      MappedStatement insertStatement = ExecutorTestHelper.prepareInsertAuthorMappedStatementWithBeforeAutoKey(config);\n      MappedStatement selectStatement = ExecutorTestHelper.prepareSelectOneAuthorMappedStatement(config);\n      int rows = executor.update(insertStatement, author);\n      assertTrue(rows > 0 || rows == BatchExecutor.BATCH_UPDATE_RETURN_VALUE);\n      if (rows == BatchExecutor.BATCH_UPDATE_RETURN_VALUE) {\n        executor.flushStatements();\n      }\n      assertEquals(123456, author.getId());\n      if (author.getId() != BatchExecutor.BATCH_UPDATE_RETURN_VALUE) {\n        List<Author> authors = executor.query(selectStatement, author.getId(), RowBounds.DEFAULT, Executor.NO_RESULT_HANDLER);\n        executor.rollback(true);\n        assertEquals(1, authors.size());\n        assertEquals(author.toString(), authors.get(0).toString());\n        assertTrue(author.getId() >= 10000);\n      }\n    } finally {\n      executor.rollback(true);\n      executor.close(false);\n    }\n  }\n","date":"2014-03-03 01:03:15","endLine":86,"groupId":"1156","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"shouldInsertNewAuthorWithBeforeAutoKey","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-mybatis3-10-0.7/blobInfo/CC_OUT/blobs/db/e98cc172941afb6d87887362a9aa816ff27181.src","preCode":"  public void shouldInsertNewAuthorWithBeforeAutoKey() throws Exception {\n    DataSource ds = createBlogDataSource();\n    Connection connection = ds.getConnection();\n    Executor executor = createExecutor(new JdbcTransaction(connection));\n    try {\n      Author author = new Author(-1, \"someone\", \"******\", \"someone@apache.org\", null, Section.NEWS);\n      MappedStatement insertStatement = ExecutorTestHelper.prepareInsertAuthorMappedStatementWithBeforeAutoKey(config);\n      MappedStatement selectStatement = ExecutorTestHelper.prepareSelectOneAuthorMappedStatement(config);\n      int rows = executor.update(insertStatement, author);\n      assertTrue(rows > 0 || rows == BatchExecutor.BATCH_UPDATE_RETURN_VALUE);\n      if (rows == BatchExecutor.BATCH_UPDATE_RETURN_VALUE) {\n        executor.flushStatements();\n      }\n      assertEquals(123456, author.getId());\n      if (author.getId() != BatchExecutor.BATCH_UPDATE_RETURN_VALUE) {\n        List<Author> authors = executor.query(selectStatement, author.getId(), RowBounds.DEFAULT, Executor.NO_RESULT_HANDLER);\n        executor.rollback(true);\n        assertEquals(1, authors.size());\n        assertEquals(author.toString(), authors.get(0).toString());\n        assertTrue(author.getId() >= 10000);\n      }\n    } finally {\n      executor.rollback(true);\n      executor.close(false);\n    }\n  }\n","realPath":"src/test/java/org/apache/ibatis/executor/BaseExecutorTest.java","repoName":"mybatis3","snippetEndLine":0,"snippetStartLine":0,"startLine":62,"status":"M"},{"authorDate":"2014-03-03 01:03:15","commitOrder":2,"curCode":"  public void shouldInsertNewAuthorWithAutoKey() throws Exception {\n    \n    Executor executor = createExecutor(new JdbcTransaction(ds, null, false));\n    try {\n      Author author = new Author(-1, \"someone\", \"******\", \"someone@apache.org\", null, Section.NEWS);\n      MappedStatement insertStatement = ExecutorTestHelper.prepareInsertAuthorMappedStatementWithAutoKey(config);\n      MappedStatement selectStatement = ExecutorTestHelper.prepareSelectOneAuthorMappedStatement(config);\n      int rows = executor.update(insertStatement, author);\n      assertTrue(rows > 0 || rows == BatchExecutor.BATCH_UPDATE_RETURN_VALUE);\n      if (rows == BatchExecutor.BATCH_UPDATE_RETURN_VALUE) {\n        executor.flushStatements();\n      }\n      assertTrue(-1 != author.getId());\n      if (author.getId() != BatchExecutor.BATCH_UPDATE_RETURN_VALUE) {\n        List<Author> authors = executor.query(selectStatement, author.getId(), RowBounds.DEFAULT, Executor.NO_RESULT_HANDLER);\n        executor.rollback(true);\n        assertEquals(1, authors.size());\n        assertEquals(author.toString(), authors.get(0).toString());\n        assertTrue(author.getId() >= 10000);\n      }\n    } finally {\n      executor.rollback(true);\n      executor.close(false);\n    }\n  }\n","date":"2014-03-03 01:03:15","endLine":156,"groupId":"1156","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"shouldInsertNewAuthorWithAutoKey","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-mybatis3-10-0.7/blobInfo/CC_OUT/blobs/db/e98cc172941afb6d87887362a9aa816ff27181.src","preCode":"  public void shouldInsertNewAuthorWithAutoKey() throws Exception {\n    DataSource ds = createBlogDataSource();\n    Connection connection = ds.getConnection();\n    Executor executor = createExecutor(new JdbcTransaction(connection));\n    try {\n      Author author = new Author(-1, \"someone\", \"******\", \"someone@apache.org\", null, Section.NEWS);\n      MappedStatement insertStatement = ExecutorTestHelper.prepareInsertAuthorMappedStatementWithAutoKey(config);\n      MappedStatement selectStatement = ExecutorTestHelper.prepareSelectOneAuthorMappedStatement(config);\n      int rows = executor.update(insertStatement, author);\n      assertTrue(rows > 0 || rows == BatchExecutor.BATCH_UPDATE_RETURN_VALUE);\n      if (rows == BatchExecutor.BATCH_UPDATE_RETURN_VALUE) {\n        executor.flushStatements();\n      }\n      assertTrue(-1 != author.getId());\n      if (author.getId() != BatchExecutor.BATCH_UPDATE_RETURN_VALUE) {\n        List<Author> authors = executor.query(selectStatement, author.getId(), RowBounds.DEFAULT, Executor.NO_RESULT_HANDLER);\n        executor.rollback(true);\n        assertEquals(1, authors.size());\n        assertEquals(author.toString(), authors.get(0).toString());\n        assertTrue(author.getId() >= 10000);\n      }\n    } finally {\n      executor.rollback(true);\n      executor.close(false);\n    }\n  }\n","realPath":"src/test/java/org/apache/ibatis/executor/BaseExecutorTest.java","repoName":"mybatis3","snippetEndLine":0,"snippetStartLine":0,"startLine":132,"status":"M"}],"commitId":"4db88a95e8d673f6f500a2c8936245cf084a2c3a","commitMessage":"@@@Speeding up tests","date":"2014-03-03 01:03:15","modifiedFileCount":"1","status":"M","submitter":"Eduardo Macarron"},{"authorTime":"2019-01-23 20:49:49","codes":[{"authorDate":"2019-01-23 20:49:49","commitOrder":3,"curCode":"  void shouldInsertNewAuthorWithBeforeAutoKey() throws Exception {\n\n    Executor executor = createExecutor(new JdbcTransaction(ds, null, false));\n    try {\n      Author author = new Author(-1, \"someone\", \"******\", \"someone@apache.org\", null, Section.NEWS);\n      MappedStatement insertStatement = ExecutorTestHelper.prepareInsertAuthorMappedStatementWithBeforeAutoKey(config);\n      MappedStatement selectStatement = ExecutorTestHelper.prepareSelectOneAuthorMappedStatement(config);\n      int rows = executor.update(insertStatement, author);\n      assertTrue(rows > 0 || rows == BatchExecutor.BATCH_UPDATE_RETURN_VALUE);\n      if (rows == BatchExecutor.BATCH_UPDATE_RETURN_VALUE) {\n        executor.flushStatements();\n      }\n      assertEquals(123456, author.getId());\n      if (author.getId() != BatchExecutor.BATCH_UPDATE_RETURN_VALUE) {\n        List<Author> authors = executor.query(selectStatement, author.getId(), RowBounds.DEFAULT, Executor.NO_RESULT_HANDLER);\n        executor.rollback(true);\n        assertEquals(1, authors.size());\n        assertEquals(author.toString(), authors.get(0).toString());\n        assertTrue(author.getId() >= 10000);\n      }\n    } finally {\n      executor.rollback(true);\n      executor.close(false);\n    }\n  }\n","date":"2019-01-23 20:49:49","endLine":88,"groupId":"10739","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"shouldInsertNewAuthorWithBeforeAutoKey","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-mybatis3-10-0.7/blobInfo/CC_OUT/blobs/0a/d4226963d47c942c402ee08a0e8b871a60697d.src","preCode":"  public void shouldInsertNewAuthorWithBeforeAutoKey() throws Exception {\n\n    Executor executor = createExecutor(new JdbcTransaction(ds, null, false));\n    try {\n      Author author = new Author(-1, \"someone\", \"******\", \"someone@apache.org\", null, Section.NEWS);\n      MappedStatement insertStatement = ExecutorTestHelper.prepareInsertAuthorMappedStatementWithBeforeAutoKey(config);\n      MappedStatement selectStatement = ExecutorTestHelper.prepareSelectOneAuthorMappedStatement(config);\n      int rows = executor.update(insertStatement, author);\n      assertTrue(rows > 0 || rows == BatchExecutor.BATCH_UPDATE_RETURN_VALUE);\n      if (rows == BatchExecutor.BATCH_UPDATE_RETURN_VALUE) {\n        executor.flushStatements();\n      }\n      assertEquals(123456, author.getId());\n      if (author.getId() != BatchExecutor.BATCH_UPDATE_RETURN_VALUE) {\n        List<Author> authors = executor.query(selectStatement, author.getId(), RowBounds.DEFAULT, Executor.NO_RESULT_HANDLER);\n        executor.rollback(true);\n        assertEquals(1, authors.size());\n        assertEquals(author.toString(), authors.get(0).toString());\n        assertTrue(author.getId() >= 10000);\n      }\n    } finally {\n      executor.rollback(true);\n      executor.close(false);\n    }\n  }\n","realPath":"src/test/java/org/apache/ibatis/executor/BaseExecutorTest.java","repoName":"mybatis3","snippetEndLine":0,"snippetStartLine":0,"startLine":64,"status":"M"},{"authorDate":"2019-01-23 20:49:49","commitOrder":3,"curCode":"  void shouldInsertNewAuthorWithAutoKey() throws Exception {\n\n    Executor executor = createExecutor(new JdbcTransaction(ds, null, false));\n    try {\n      Author author = new Author(-1, \"someone\", \"******\", \"someone@apache.org\", null, Section.NEWS);\n      MappedStatement insertStatement = ExecutorTestHelper.prepareInsertAuthorMappedStatementWithAutoKey(config);\n      MappedStatement selectStatement = ExecutorTestHelper.prepareSelectOneAuthorMappedStatement(config);\n      int rows = executor.update(insertStatement, author);\n      assertTrue(rows > 0 || rows == BatchExecutor.BATCH_UPDATE_RETURN_VALUE);\n      if (rows == BatchExecutor.BATCH_UPDATE_RETURN_VALUE) {\n        executor.flushStatements();\n      }\n      assertTrue(-1 != author.getId());\n      if (author.getId() != BatchExecutor.BATCH_UPDATE_RETURN_VALUE) {\n        List<Author> authors = executor.query(selectStatement, author.getId(), RowBounds.DEFAULT, Executor.NO_RESULT_HANDLER);\n        executor.rollback(true);\n        assertEquals(1, authors.size());\n        assertEquals(author.toString(), authors.get(0).toString());\n        assertTrue(author.getId() >= 10000);\n      }\n    } finally {\n      executor.rollback(true);\n      executor.close(false);\n    }\n  }\n","date":"2019-01-23 20:49:49","endLine":158,"groupId":"10739","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"shouldInsertNewAuthorWithAutoKey","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-mybatis3-10-0.7/blobInfo/CC_OUT/blobs/0a/d4226963d47c942c402ee08a0e8b871a60697d.src","preCode":"  public void shouldInsertNewAuthorWithAutoKey() throws Exception {\n\n    Executor executor = createExecutor(new JdbcTransaction(ds, null, false));\n    try {\n      Author author = new Author(-1, \"someone\", \"******\", \"someone@apache.org\", null, Section.NEWS);\n      MappedStatement insertStatement = ExecutorTestHelper.prepareInsertAuthorMappedStatementWithAutoKey(config);\n      MappedStatement selectStatement = ExecutorTestHelper.prepareSelectOneAuthorMappedStatement(config);\n      int rows = executor.update(insertStatement, author);\n      assertTrue(rows > 0 || rows == BatchExecutor.BATCH_UPDATE_RETURN_VALUE);\n      if (rows == BatchExecutor.BATCH_UPDATE_RETURN_VALUE) {\n        executor.flushStatements();\n      }\n      assertTrue(-1 != author.getId());\n      if (author.getId() != BatchExecutor.BATCH_UPDATE_RETURN_VALUE) {\n        List<Author> authors = executor.query(selectStatement, author.getId(), RowBounds.DEFAULT, Executor.NO_RESULT_HANDLER);\n        executor.rollback(true);\n        assertEquals(1, authors.size());\n        assertEquals(author.toString(), authors.get(0).toString());\n        assertTrue(author.getId() >= 10000);\n      }\n    } finally {\n      executor.rollback(true);\n      executor.close(false);\n    }\n  }\n","realPath":"src/test/java/org/apache/ibatis/executor/BaseExecutorTest.java","repoName":"mybatis3","snippetEndLine":0,"snippetStartLine":0,"startLine":134,"status":"M"}],"commitId":"674b9c0e82a181d21ed0240291e79f73f36e2e53","commitMessage":"@@@Merge pull request #1460 from kazuki43zoo/polishing-tests\n\nPolishing tests","date":"2019-01-23 20:49:49","modifiedFileCount":"291","status":"M","submitter":"Kazuki Shimizu"}]
