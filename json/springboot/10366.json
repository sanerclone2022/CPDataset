[{"authorTime":"2018-10-16 16:27:58","codes":[{"authorDate":"2018-10-16 16:27:58","commitOrder":1,"curCode":"\tpublic void couchbaseClusterIsUp() {\n\t\tCluster cluster = mock(Cluster.class);\n\t\tCouchbaseReactiveHealthIndicator healthIndicator = new CouchbaseReactiveHealthIndicator(\n\t\t\t\tcluster);\n\t\tList<EndpointHealth> endpoints = Arrays.asList(new EndpointHealth(\n\t\t\t\tServiceType.BINARY, LifecycleState.CONNECTED, new InetSocketAddress(0),\n\t\t\t\tnew InetSocketAddress(0), 1234, \"endpoint-1\"));\n\t\tDiagnosticsReport diagnostics = new DiagnosticsReport(endpoints, \"test-sdk\",\n\t\t\t\t\"test-id\", null);\n\t\tgiven(cluster.diagnostics()).willReturn(diagnostics);\n\t\tHealth health = healthIndicator.health().block();\n\t\tassertThat(health.getStatus()).isEqualTo(Status.UP);\n\t\tassertThat(health.getDetails()).containsEntry(\"sdk\", \"test-sdk\");\n\t\tassertThat(health.getDetails()).containsKey(\"endpoints\");\n\t\tassertThat((List<Map<String, Object>>) health.getDetails().get(\"endpoints\"))\n\t\t\t\t.hasSize(1);\n\t\tverify(cluster).diagnostics();\n\t}\n","date":"2018-10-16 16:28:42","endLine":62,"groupId":"15893","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"couchbaseClusterIsUp","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/64/aa9513d795b9939f817a2bd6b188c18cd43dc0.src","preCode":"\tpublic void couchbaseClusterIsUp() {\n\t\tCluster cluster = mock(Cluster.class);\n\t\tCouchbaseReactiveHealthIndicator healthIndicator = new CouchbaseReactiveHealthIndicator(\n\t\t\t\tcluster);\n\t\tList<EndpointHealth> endpoints = Arrays.asList(new EndpointHealth(\n\t\t\t\tServiceType.BINARY, LifecycleState.CONNECTED, new InetSocketAddress(0),\n\t\t\t\tnew InetSocketAddress(0), 1234, \"endpoint-1\"));\n\t\tDiagnosticsReport diagnostics = new DiagnosticsReport(endpoints, \"test-sdk\",\n\t\t\t\t\"test-id\", null);\n\t\tgiven(cluster.diagnostics()).willReturn(diagnostics);\n\t\tHealth health = healthIndicator.health().block();\n\t\tassertThat(health.getStatus()).isEqualTo(Status.UP);\n\t\tassertThat(health.getDetails()).containsEntry(\"sdk\", \"test-sdk\");\n\t\tassertThat(health.getDetails()).containsKey(\"endpoints\");\n\t\tassertThat((List<Map<String, Object>>) health.getDetails().get(\"endpoints\"))\n\t\t\t\t.hasSize(1);\n\t\tverify(cluster).diagnostics();\n\t}\n","realPath":"spring-boot-project/spring-boot-actuator/src/test/java/org/springframework/boot/actuate/couchbase/CouchbaseReactiveHealthIndicatorTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":45,"status":"B"},{"authorDate":"2018-10-16 16:27:58","commitOrder":1,"curCode":"\tpublic void couchbaseClusterIsDown() {\n\t\tCluster cluster = mock(Cluster.class);\n\t\tCouchbaseReactiveHealthIndicator healthIndicator = new CouchbaseReactiveHealthIndicator(\n\t\t\t\tcluster);\n\t\tList<EndpointHealth> endpoints = Arrays.asList(\n\t\t\t\tnew EndpointHealth(ServiceType.BINARY, LifecycleState.CONNECTED,\n\t\t\t\t\t\tnew InetSocketAddress(0), new InetSocketAddress(0), 1234,\n\t\t\t\t\t\t\"endpoint-1\"),\n\t\t\t\tnew EndpointHealth(ServiceType.BINARY, LifecycleState.CONNECTING,\n\t\t\t\t\t\tnew InetSocketAddress(0), new InetSocketAddress(0), 1234,\n\t\t\t\t\t\t\"endpoint-2\"));\n\t\tDiagnosticsReport diagnostics = new DiagnosticsReport(endpoints, \"test-sdk\",\n\t\t\t\t\"test-id\", null);\n\t\tgiven(cluster.diagnostics()).willReturn(diagnostics);\n\t\tHealth health = healthIndicator.health().block();\n\t\tassertThat(health.getStatus()).isEqualTo(Status.DOWN);\n\t\tassertThat(health.getDetails()).containsEntry(\"sdk\", \"test-sdk\");\n\t\tassertThat(health.getDetails()).containsKey(\"endpoints\");\n\t\tassertThat((List<Map<String, Object>>) health.getDetails().get(\"endpoints\"))\n\t\t\t\t.hasSize(2);\n\t\tverify(cluster).diagnostics();\n\t}\n","date":"2018-10-16 16:28:42","endLine":87,"groupId":"1459","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"couchbaseClusterIsDown","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/64/aa9513d795b9939f817a2bd6b188c18cd43dc0.src","preCode":"\tpublic void couchbaseClusterIsDown() {\n\t\tCluster cluster = mock(Cluster.class);\n\t\tCouchbaseReactiveHealthIndicator healthIndicator = new CouchbaseReactiveHealthIndicator(\n\t\t\t\tcluster);\n\t\tList<EndpointHealth> endpoints = Arrays.asList(\n\t\t\t\tnew EndpointHealth(ServiceType.BINARY, LifecycleState.CONNECTED,\n\t\t\t\t\t\tnew InetSocketAddress(0), new InetSocketAddress(0), 1234,\n\t\t\t\t\t\t\"endpoint-1\"),\n\t\t\t\tnew EndpointHealth(ServiceType.BINARY, LifecycleState.CONNECTING,\n\t\t\t\t\t\tnew InetSocketAddress(0), new InetSocketAddress(0), 1234,\n\t\t\t\t\t\t\"endpoint-2\"));\n\t\tDiagnosticsReport diagnostics = new DiagnosticsReport(endpoints, \"test-sdk\",\n\t\t\t\t\"test-id\", null);\n\t\tgiven(cluster.diagnostics()).willReturn(diagnostics);\n\t\tHealth health = healthIndicator.health().block();\n\t\tassertThat(health.getStatus()).isEqualTo(Status.DOWN);\n\t\tassertThat(health.getDetails()).containsEntry(\"sdk\", \"test-sdk\");\n\t\tassertThat(health.getDetails()).containsKey(\"endpoints\");\n\t\tassertThat((List<Map<String, Object>>) health.getDetails().get(\"endpoints\"))\n\t\t\t\t.hasSize(2);\n\t\tverify(cluster).diagnostics();\n\t}\n","realPath":"spring-boot-project/spring-boot-actuator/src/test/java/org/springframework/boot/actuate/couchbase/CouchbaseReactiveHealthIndicatorTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":66,"status":"B"}],"commitId":"d49cc20e79b64ce8109948324308d58418bed6e8","commitMessage":"@@@Rework CouchbaseReactiveHealthIndicator to use DiagnosticsReport\n\nCloses gh-14799\n","date":"2018-10-16 16:28:42","modifiedFileCount":"3","status":"B","submitter":"Andy Wilkinson"},{"authorTime":"2018-12-20 23:30:51","codes":[{"authorDate":"2018-12-20 23:30:51","commitOrder":2,"curCode":"\tpublic void couchbaseClusterIsUp() {\n\t\tCluster cluster = mock(Cluster.class);\n\t\tCouchbaseReactiveHealthIndicator healthIndicator = new CouchbaseReactiveHealthIndicator(\n\t\t\t\tcluster);\n\t\tList<EndpointHealth> endpoints = Arrays.asList(new EndpointHealth(\n\t\t\t\tServiceType.BINARY, LifecycleState.CONNECTED, new InetSocketAddress(0),\n\t\t\t\tnew InetSocketAddress(0), 1234, \"endpoint-1\"));\n\t\tDiagnosticsReport diagnostics = new DiagnosticsReport(endpoints, \"test-sdk\",\n\t\t\t\t\"test-id\", null);\n\t\tgiven(cluster.diagnostics()).willReturn(diagnostics);\n\t\tHealth health = healthIndicator.health().block(Duration.ofSeconds(30));\n\t\tassertThat(health.getStatus()).isEqualTo(Status.UP);\n\t\tassertThat(health.getDetails()).containsEntry(\"sdk\", \"test-sdk\");\n\t\tassertThat(health.getDetails()).containsKey(\"endpoints\");\n\t\tassertThat((List<Map<String, Object>>) health.getDetails().get(\"endpoints\"))\n\t\t\t\t.hasSize(1);\n\t\tverify(cluster).diagnostics();\n\t}\n","date":"2018-12-20 23:30:51","endLine":63,"groupId":"15893","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"couchbaseClusterIsUp","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/ca/16eb345059069b097b34c38bbe118927e820b2.src","preCode":"\tpublic void couchbaseClusterIsUp() {\n\t\tCluster cluster = mock(Cluster.class);\n\t\tCouchbaseReactiveHealthIndicator healthIndicator = new CouchbaseReactiveHealthIndicator(\n\t\t\t\tcluster);\n\t\tList<EndpointHealth> endpoints = Arrays.asList(new EndpointHealth(\n\t\t\t\tServiceType.BINARY, LifecycleState.CONNECTED, new InetSocketAddress(0),\n\t\t\t\tnew InetSocketAddress(0), 1234, \"endpoint-1\"));\n\t\tDiagnosticsReport diagnostics = new DiagnosticsReport(endpoints, \"test-sdk\",\n\t\t\t\t\"test-id\", null);\n\t\tgiven(cluster.diagnostics()).willReturn(diagnostics);\n\t\tHealth health = healthIndicator.health().block();\n\t\tassertThat(health.getStatus()).isEqualTo(Status.UP);\n\t\tassertThat(health.getDetails()).containsEntry(\"sdk\", \"test-sdk\");\n\t\tassertThat(health.getDetails()).containsKey(\"endpoints\");\n\t\tassertThat((List<Map<String, Object>>) health.getDetails().get(\"endpoints\"))\n\t\t\t\t.hasSize(1);\n\t\tverify(cluster).diagnostics();\n\t}\n","realPath":"spring-boot-project/spring-boot-actuator/src/test/java/org/springframework/boot/actuate/couchbase/CouchbaseReactiveHealthIndicatorTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":46,"status":"M"},{"authorDate":"2018-12-20 23:30:51","commitOrder":2,"curCode":"\tpublic void couchbaseClusterIsDown() {\n\t\tCluster cluster = mock(Cluster.class);\n\t\tCouchbaseReactiveHealthIndicator healthIndicator = new CouchbaseReactiveHealthIndicator(\n\t\t\t\tcluster);\n\t\tList<EndpointHealth> endpoints = Arrays.asList(\n\t\t\t\tnew EndpointHealth(ServiceType.BINARY, LifecycleState.CONNECTED,\n\t\t\t\t\t\tnew InetSocketAddress(0), new InetSocketAddress(0), 1234,\n\t\t\t\t\t\t\"endpoint-1\"),\n\t\t\t\tnew EndpointHealth(ServiceType.BINARY, LifecycleState.CONNECTING,\n\t\t\t\t\t\tnew InetSocketAddress(0), new InetSocketAddress(0), 1234,\n\t\t\t\t\t\t\"endpoint-2\"));\n\t\tDiagnosticsReport diagnostics = new DiagnosticsReport(endpoints, \"test-sdk\",\n\t\t\t\t\"test-id\", null);\n\t\tgiven(cluster.diagnostics()).willReturn(diagnostics);\n\t\tHealth health = healthIndicator.health().block(Duration.ofSeconds(30));\n\t\tassertThat(health.getStatus()).isEqualTo(Status.DOWN);\n\t\tassertThat(health.getDetails()).containsEntry(\"sdk\", \"test-sdk\");\n\t\tassertThat(health.getDetails()).containsKey(\"endpoints\");\n\t\tassertThat((List<Map<String, Object>>) health.getDetails().get(\"endpoints\"))\n\t\t\t\t.hasSize(2);\n\t\tverify(cluster).diagnostics();\n\t}\n","date":"2018-12-20 23:30:51","endLine":88,"groupId":"12262","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"couchbaseClusterIsDown","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/ca/16eb345059069b097b34c38bbe118927e820b2.src","preCode":"\tpublic void couchbaseClusterIsDown() {\n\t\tCluster cluster = mock(Cluster.class);\n\t\tCouchbaseReactiveHealthIndicator healthIndicator = new CouchbaseReactiveHealthIndicator(\n\t\t\t\tcluster);\n\t\tList<EndpointHealth> endpoints = Arrays.asList(\n\t\t\t\tnew EndpointHealth(ServiceType.BINARY, LifecycleState.CONNECTED,\n\t\t\t\t\t\tnew InetSocketAddress(0), new InetSocketAddress(0), 1234,\n\t\t\t\t\t\t\"endpoint-1\"),\n\t\t\t\tnew EndpointHealth(ServiceType.BINARY, LifecycleState.CONNECTING,\n\t\t\t\t\t\tnew InetSocketAddress(0), new InetSocketAddress(0), 1234,\n\t\t\t\t\t\t\"endpoint-2\"));\n\t\tDiagnosticsReport diagnostics = new DiagnosticsReport(endpoints, \"test-sdk\",\n\t\t\t\t\"test-id\", null);\n\t\tgiven(cluster.diagnostics()).willReturn(diagnostics);\n\t\tHealth health = healthIndicator.health().block();\n\t\tassertThat(health.getStatus()).isEqualTo(Status.DOWN);\n\t\tassertThat(health.getDetails()).containsEntry(\"sdk\", \"test-sdk\");\n\t\tassertThat(health.getDetails()).containsKey(\"endpoints\");\n\t\tassertThat((List<Map<String, Object>>) health.getDetails().get(\"endpoints\"))\n\t\t\t\t.hasSize(2);\n\t\tverify(cluster).diagnostics();\n\t}\n","realPath":"spring-boot-project/spring-boot-actuator/src/test/java/org/springframework/boot/actuate/couchbase/CouchbaseReactiveHealthIndicatorTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":67,"status":"M"}],"commitId":"9d2d6d5812d34b0bc04da3a124b9c5c0da511c04","commitMessage":"@@@Merge branch '2.1.x'\n","date":"2018-12-20 23:30:51","modifiedFileCount":"22","status":"M","submitter":"Andy Wilkinson"},{"authorTime":"2019-05-24 18:24:29","codes":[{"authorDate":"2019-05-24 18:24:29","commitOrder":3,"curCode":"\tvoid couchbaseClusterIsUp() {\n\t\tCluster cluster = mock(Cluster.class);\n\t\tCouchbaseReactiveHealthIndicator healthIndicator = new CouchbaseReactiveHealthIndicator(cluster);\n\t\tList<EndpointHealth> endpoints = Arrays.asList(new EndpointHealth(ServiceType.BINARY, LifecycleState.CONNECTED,\n\t\t\t\tnew InetSocketAddress(0), new InetSocketAddress(0), 1234, \"endpoint-1\"));\n\t\tDiagnosticsReport diagnostics = new DiagnosticsReport(endpoints, \"test-sdk\", \"test-id\", null);\n\t\tgiven(cluster.diagnostics()).willReturn(diagnostics);\n\t\tHealth health = healthIndicator.health().block(Duration.ofSeconds(30));\n\t\tassertThat(health.getStatus()).isEqualTo(Status.UP);\n\t\tassertThat(health.getDetails()).containsEntry(\"sdk\", \"test-sdk\");\n\t\tassertThat(health.getDetails()).containsKey(\"endpoints\");\n\t\tassertThat((List<Map<String, Object>>) health.getDetails().get(\"endpoints\")).hasSize(1);\n\t\tverify(cluster).diagnostics();\n\t}\n","date":"2019-06-07 19:25:54","endLine":59,"groupId":"15893","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"couchbaseClusterIsUp","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/fe/3923120bdc1e8b9bd091a8d10540f67da220fb.src","preCode":"\tpublic void couchbaseClusterIsUp() {\n\t\tCluster cluster = mock(Cluster.class);\n\t\tCouchbaseReactiveHealthIndicator healthIndicator = new CouchbaseReactiveHealthIndicator(cluster);\n\t\tList<EndpointHealth> endpoints = Arrays.asList(new EndpointHealth(ServiceType.BINARY, LifecycleState.CONNECTED,\n\t\t\t\tnew InetSocketAddress(0), new InetSocketAddress(0), 1234, \"endpoint-1\"));\n\t\tDiagnosticsReport diagnostics = new DiagnosticsReport(endpoints, \"test-sdk\", \"test-id\", null);\n\t\tgiven(cluster.diagnostics()).willReturn(diagnostics);\n\t\tHealth health = healthIndicator.health().block(Duration.ofSeconds(30));\n\t\tassertThat(health.getStatus()).isEqualTo(Status.UP);\n\t\tassertThat(health.getDetails()).containsEntry(\"sdk\", \"test-sdk\");\n\t\tassertThat(health.getDetails()).containsKey(\"endpoints\");\n\t\tassertThat((List<Map<String, Object>>) health.getDetails().get(\"endpoints\")).hasSize(1);\n\t\tverify(cluster).diagnostics();\n\t}\n","realPath":"spring-boot-project/spring-boot-actuator/src/test/java/org/springframework/boot/actuate/couchbase/CouchbaseReactiveHealthIndicatorTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":46,"status":"M"},{"authorDate":"2019-05-24 18:24:29","commitOrder":3,"curCode":"\tvoid couchbaseClusterIsDown() {\n\t\tCluster cluster = mock(Cluster.class);\n\t\tCouchbaseReactiveHealthIndicator healthIndicator = new CouchbaseReactiveHealthIndicator(cluster);\n\t\tList<EndpointHealth> endpoints = Arrays.asList(\n\t\t\t\tnew EndpointHealth(ServiceType.BINARY, LifecycleState.CONNECTED, new InetSocketAddress(0),\n\t\t\t\t\t\tnew InetSocketAddress(0), 1234, \"endpoint-1\"),\n\t\t\t\tnew EndpointHealth(ServiceType.BINARY, LifecycleState.CONNECTING, new InetSocketAddress(0),\n\t\t\t\t\t\tnew InetSocketAddress(0), 1234, \"endpoint-2\"));\n\t\tDiagnosticsReport diagnostics = new DiagnosticsReport(endpoints, \"test-sdk\", \"test-id\", null);\n\t\tgiven(cluster.diagnostics()).willReturn(diagnostics);\n\t\tHealth health = healthIndicator.health().block(Duration.ofSeconds(30));\n\t\tassertThat(health.getStatus()).isEqualTo(Status.DOWN);\n\t\tassertThat(health.getDetails()).containsEntry(\"sdk\", \"test-sdk\");\n\t\tassertThat(health.getDetails()).containsKey(\"endpoints\");\n\t\tassertThat((List<Map<String, Object>>) health.getDetails().get(\"endpoints\")).hasSize(2);\n\t\tverify(cluster).diagnostics();\n\t}\n","date":"2019-06-07 19:25:54","endLine":79,"groupId":"12262","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"couchbaseClusterIsDown","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/fe/3923120bdc1e8b9bd091a8d10540f67da220fb.src","preCode":"\tpublic void couchbaseClusterIsDown() {\n\t\tCluster cluster = mock(Cluster.class);\n\t\tCouchbaseReactiveHealthIndicator healthIndicator = new CouchbaseReactiveHealthIndicator(cluster);\n\t\tList<EndpointHealth> endpoints = Arrays.asList(\n\t\t\t\tnew EndpointHealth(ServiceType.BINARY, LifecycleState.CONNECTED, new InetSocketAddress(0),\n\t\t\t\t\t\tnew InetSocketAddress(0), 1234, \"endpoint-1\"),\n\t\t\t\tnew EndpointHealth(ServiceType.BINARY, LifecycleState.CONNECTING, new InetSocketAddress(0),\n\t\t\t\t\t\tnew InetSocketAddress(0), 1234, \"endpoint-2\"));\n\t\tDiagnosticsReport diagnostics = new DiagnosticsReport(endpoints, \"test-sdk\", \"test-id\", null);\n\t\tgiven(cluster.diagnostics()).willReturn(diagnostics);\n\t\tHealth health = healthIndicator.health().block(Duration.ofSeconds(30));\n\t\tassertThat(health.getStatus()).isEqualTo(Status.DOWN);\n\t\tassertThat(health.getDetails()).containsEntry(\"sdk\", \"test-sdk\");\n\t\tassertThat(health.getDetails()).containsKey(\"endpoints\");\n\t\tassertThat((List<Map<String, Object>>) health.getDetails().get(\"endpoints\")).hasSize(2);\n\t\tverify(cluster).diagnostics();\n\t}\n","realPath":"spring-boot-project/spring-boot-actuator/src/test/java/org/springframework/boot/actuate/couchbase/CouchbaseReactiveHealthIndicatorTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":63,"status":"M"}],"commitId":"b18fffaf14f9ce3e5651f44745019890e8a899c2","commitMessage":"@@@Move tests to JUnit 5 wherever possible\n","date":"2019-06-07 19:25:54","modifiedFileCount":"1282","status":"M","submitter":"Andy Wilkinson"},{"authorTime":"2020-03-17 21:58:22","codes":[{"authorDate":"2020-03-17 21:58:22","commitOrder":4,"curCode":"\tvoid couchbaseClusterIsUp() {\n\t\tCluster cluster = mock(Cluster.class);\n\t\tCouchbaseReactiveHealthIndicator healthIndicator = new CouchbaseReactiveHealthIndicator(cluster);\n\t\tMap<ServiceType, List<EndpointDiagnostics>> endpoints = Collections.singletonMap(ServiceType.KV,\n\t\t\t\tCollections.singletonList(new EndpointDiagnostics(ServiceType.KV, EndpointState.CONNECTED, \"127.0.0.1\",\n\t\t\t\t\t\t\"127.0.0.1\", Optional.empty(), Optional.of(1234L), Optional.of(\"endpoint-1\"))));\n\t\tDiagnosticsResult diagnostics = new DiagnosticsResult(endpoints, \"test-sdk\", \"test-id\");\n\t\tgiven(cluster.diagnostics()).willReturn(diagnostics);\n\t\tHealth health = healthIndicator.health().block(Duration.ofSeconds(30));\n\t\tassertThat(health.getStatus()).isEqualTo(Status.UP);\n\t\tassertThat(health.getDetails()).containsEntry(\"sdk\", \"test-sdk\");\n\t\tassertThat(health.getDetails()).containsKey(\"endpoints\");\n\t\tassertThat((List<Map<String, Object>>) health.getDetails().get(\"endpoints\")).hasSize(1);\n\t\tverify(cluster).diagnostics();\n\t}\n","date":"2020-03-18 00:00:09","endLine":61,"groupId":"10366","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"couchbaseClusterIsUp","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/30/ace183764e52366805f6607f4c91f150b40243.src","preCode":"\tvoid couchbaseClusterIsUp() {\n\t\tCluster cluster = mock(Cluster.class);\n\t\tCouchbaseReactiveHealthIndicator healthIndicator = new CouchbaseReactiveHealthIndicator(cluster);\n\t\tList<EndpointHealth> endpoints = Arrays.asList(new EndpointHealth(ServiceType.BINARY, LifecycleState.CONNECTED,\n\t\t\t\tnew InetSocketAddress(0), new InetSocketAddress(0), 1234, \"endpoint-1\"));\n\t\tDiagnosticsReport diagnostics = new DiagnosticsReport(endpoints, \"test-sdk\", \"test-id\", null);\n\t\tgiven(cluster.diagnostics()).willReturn(diagnostics);\n\t\tHealth health = healthIndicator.health().block(Duration.ofSeconds(30));\n\t\tassertThat(health.getStatus()).isEqualTo(Status.UP);\n\t\tassertThat(health.getDetails()).containsEntry(\"sdk\", \"test-sdk\");\n\t\tassertThat(health.getDetails()).containsKey(\"endpoints\");\n\t\tassertThat((List<Map<String, Object>>) health.getDetails().get(\"endpoints\")).hasSize(1);\n\t\tverify(cluster).diagnostics();\n\t}\n","realPath":"spring-boot-project/spring-boot-actuator/src/test/java/org/springframework/boot/actuate/couchbase/CouchbaseReactiveHealthIndicatorTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":47,"status":"M"},{"authorDate":"2020-03-17 21:58:22","commitOrder":4,"curCode":"\tvoid couchbaseClusterIsDown() {\n\t\tCluster cluster = mock(Cluster.class);\n\t\tCouchbaseReactiveHealthIndicator healthIndicator = new CouchbaseReactiveHealthIndicator(cluster);\n\t\tMap<ServiceType, List<EndpointDiagnostics>> endpoints = Collections.singletonMap(ServiceType.KV,\n\t\t\t\tArrays.asList(\n\t\t\t\t\t\tnew EndpointDiagnostics(ServiceType.KV, EndpointState.CONNECTED, \"127.0.0.1\", \"127.0.0.1\",\n\t\t\t\t\t\t\t\tOptional.empty(), Optional.of(1234L), Optional.of(\"endpoint-1\")),\n\t\t\t\t\t\tnew EndpointDiagnostics(ServiceType.KV, EndpointState.CONNECTING, \"127.0.0.1\", \"127.0.0.1\",\n\t\t\t\t\t\t\t\tOptional.empty(), Optional.of(1234L), Optional.of(\"endpoint-2\"))));\n\t\tDiagnosticsResult diagnostics = new DiagnosticsResult(endpoints, \"test-sdk\", \"test-id\");\n\t\tgiven(cluster.diagnostics()).willReturn(diagnostics);\n\t\tHealth health = healthIndicator.health().block(Duration.ofSeconds(30));\n\t\tassertThat(health.getStatus()).isEqualTo(Status.DOWN);\n\t\tassertThat(health.getDetails()).containsEntry(\"sdk\", \"test-sdk\");\n\t\tassertThat(health.getDetails()).containsKey(\"endpoints\");\n\t\tassertThat((List<Map<String, Object>>) health.getDetails().get(\"endpoints\")).hasSize(2);\n\t\tverify(cluster).diagnostics();\n\t}\n","date":"2020-03-18 00:00:09","endLine":82,"groupId":"10366","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"couchbaseClusterIsDown","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/30/ace183764e52366805f6607f4c91f150b40243.src","preCode":"\tvoid couchbaseClusterIsDown() {\n\t\tCluster cluster = mock(Cluster.class);\n\t\tCouchbaseReactiveHealthIndicator healthIndicator = new CouchbaseReactiveHealthIndicator(cluster);\n\t\tList<EndpointHealth> endpoints = Arrays.asList(\n\t\t\t\tnew EndpointHealth(ServiceType.BINARY, LifecycleState.CONNECTED, new InetSocketAddress(0),\n\t\t\t\t\t\tnew InetSocketAddress(0), 1234, \"endpoint-1\"),\n\t\t\t\tnew EndpointHealth(ServiceType.BINARY, LifecycleState.CONNECTING, new InetSocketAddress(0),\n\t\t\t\t\t\tnew InetSocketAddress(0), 1234, \"endpoint-2\"));\n\t\tDiagnosticsReport diagnostics = new DiagnosticsReport(endpoints, \"test-sdk\", \"test-id\", null);\n\t\tgiven(cluster.diagnostics()).willReturn(diagnostics);\n\t\tHealth health = healthIndicator.health().block(Duration.ofSeconds(30));\n\t\tassertThat(health.getStatus()).isEqualTo(Status.DOWN);\n\t\tassertThat(health.getDetails()).containsEntry(\"sdk\", \"test-sdk\");\n\t\tassertThat(health.getDetails()).containsKey(\"endpoints\");\n\t\tassertThat((List<Map<String, Object>>) health.getDetails().get(\"endpoints\")).hasSize(2);\n\t\tverify(cluster).diagnostics();\n\t}\n","realPath":"spring-boot-project/spring-boot-actuator/src/test/java/org/springframework/boot/actuate/couchbase/CouchbaseReactiveHealthIndicatorTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":65,"status":"M"}],"commitId":"abe43b2e83713591bc23821add3763cc2c41e3bd","commitMessage":"@@@Upgrade to Couchbase SDK v3\n\nThis commit upgrades to the Couchbase SDK v3 which brings the following\nbreaking changes:\n\n* Bootstrap hosts have been replaced by a connection string and the\nauthentication is now mandatory.\n* A `Bucket` is no longer auto-configured. The\n`spring.couchbase.bucket.*` properties have been removed\n* `ClusterInfo` no longer exists and has been replaced by a dedicated\nAPI on `Cluster`.\n* `CouchbaseEnvironment` no longer exist in favour of\n`ClusterEnvironment`.  the customizer has been renamed accordingly.\n* The bootstrap-related properties have been removed. Users requiring\ncustom ports should supply the seed nodes and initialize a Cluster\nthemselves.\n* The endpoints-related configuration has been consolidated in a\nsingle IO configuration.\n\nThe Spring Data Couchbase provides an integration with the new SDK. This\nleads to the following changes:\n\n* A convenient `CouchbaseClientFactory` is auto-configured.\n* Repositories are configured against a bucket and a scope. Those can\nbe set via configuration in `spring.data.couchbase.*`.\n* The default consistency property has been removed in favour of a more\nflexible annotation on the repository query methods instead. You can now\nspecify different query consistency on a per method basis.\n* The `CacheManager` implementation is provided.  as do other stores for\nconsistency so a dependency on `couchbase-spring-cache` is no longer\nrequired.\n\nSee gh-19893\n\nCo-authored-by: Michael Nitschinger <michael@nitschinger.at>\n","date":"2020-03-18 00:00:09","modifiedFileCount":"27","status":"M","submitter":"Stephane Nicoll"}]
