[{"authorTime":"2019-11-07 17:33:11","codes":[{"authorDate":"2019-11-07 17:33:11","commitOrder":2,"curCode":"\tprivate AnnotatedBeanDefinition createBeanDefinition(Class<?> servletClass) throws IOException {\n\t\tAnnotatedBeanDefinition definition = mock(AnnotatedBeanDefinition.class);\n\t\tgiven(definition.getBeanClassName()).willReturn(servletClass.getName());\n\t\tgiven(definition.getMetadata()).willReturn(\n\t\t\t\tnew SimpleMetadataReaderFactory().getMetadataReader(servletClass.getName()).getAnnotationMetadata());\n\t\treturn definition;\n\t}\n","date":"2019-11-07 17:33:11","endLine":118,"groupId":"1230","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"createBeanDefinition","params":"(Class<?>servletClass)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/10/a1a1e99ffc3eb8daaf41b999231ddb58c36a27.src","preCode":"\tprivate AnnotatedBeanDefinition createBeanDefinition(Class<?> servletClass) throws IOException {\n\t\tAnnotatedBeanDefinition definition = mock(AnnotatedBeanDefinition.class);\n\t\tgiven(definition.getBeanClassName()).willReturn(servletClass.getName());\n\t\tgiven(definition.getMetadata()).willReturn(\n\t\t\t\tnew SimpleMetadataReaderFactory().getMetadataReader(servletClass.getName()).getAnnotationMetadata());\n\t\treturn definition;\n\t}\n","realPath":"spring-boot-project/spring-boot/src/test/java/org/springframework/boot/web/servlet/WebServletHandlerTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":112,"status":"B"},{"authorDate":"2019-11-07 17:33:11","commitOrder":2,"curCode":"\tvoid listener() throws IOException {\n\t\tAnnotatedBeanDefinition definition = mock(AnnotatedBeanDefinition.class);\n\t\tgiven(definition.getBeanClassName()).willReturn(TestListener.class.getName());\n\t\tgiven(definition.getMetadata()).willReturn(new SimpleMetadataReaderFactory()\n\t\t\t\t.getMetadataReader(TestListener.class.getName()).getAnnotationMetadata());\n\t\tthis.handler.handle(definition, this.registry);\n\t\tthis.registry.getBeanDefinition(TestListener.class.getName());\n\t}\n","date":"2019-11-07 17:33:11","endLine":53,"groupId":"1230","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"listener","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/3f/a5b1e5158cb32d43d26fc4c4cf1e4101243b41.src","preCode":"\tvoid listener() throws IOException {\n\t\tAnnotatedBeanDefinition definition = mock(AnnotatedBeanDefinition.class);\n\t\tgiven(definition.getBeanClassName()).willReturn(TestListener.class.getName());\n\t\tgiven(definition.getMetadata()).willReturn(new SimpleMetadataReaderFactory()\n\t\t\t\t.getMetadataReader(TestListener.class.getName()).getAnnotationMetadata());\n\t\tthis.handler.handle(definition, this.registry);\n\t\tthis.registry.getBeanDefinition(TestListener.class.getName());\n\t}\n","realPath":"spring-boot-project/spring-boot/src/test/java/org/springframework/boot/web/servlet/WebListenerHandlerTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":46,"status":"MB"}],"commitId":"dd4377e69c2c4b4ae277590fc43424af9524cf8d","commitMessage":"@@@Merge branch '2.1.x'\n\nCloses gh-18912\n","date":"2019-11-07 17:33:11","modifiedFileCount":"9","status":"M","submitter":"Andy Wilkinson"},{"authorTime":"2020-07-31 18:31:50","codes":[{"authorDate":"2019-11-07 17:33:11","commitOrder":3,"curCode":"\tprivate AnnotatedBeanDefinition createBeanDefinition(Class<?> servletClass) throws IOException {\n\t\tAnnotatedBeanDefinition definition = mock(AnnotatedBeanDefinition.class);\n\t\tgiven(definition.getBeanClassName()).willReturn(servletClass.getName());\n\t\tgiven(definition.getMetadata()).willReturn(\n\t\t\t\tnew SimpleMetadataReaderFactory().getMetadataReader(servletClass.getName()).getAnnotationMetadata());\n\t\treturn definition;\n\t}\n","date":"2019-11-07 17:33:11","endLine":118,"groupId":"102028","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"createBeanDefinition","params":"(Class<?>servletClass)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/10/a1a1e99ffc3eb8daaf41b999231ddb58c36a27.src","preCode":"\tprivate AnnotatedBeanDefinition createBeanDefinition(Class<?> servletClass) throws IOException {\n\t\tAnnotatedBeanDefinition definition = mock(AnnotatedBeanDefinition.class);\n\t\tgiven(definition.getBeanClassName()).willReturn(servletClass.getName());\n\t\tgiven(definition.getMetadata()).willReturn(\n\t\t\t\tnew SimpleMetadataReaderFactory().getMetadataReader(servletClass.getName()).getAnnotationMetadata());\n\t\treturn definition;\n\t}\n","realPath":"spring-boot-project/spring-boot/src/test/java/org/springframework/boot/web/servlet/WebServletHandlerTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":112,"status":"N"},{"authorDate":"2020-07-31 18:31:50","commitOrder":3,"curCode":"\tvoid listener() throws IOException {\n\t\tAnnotatedBeanDefinition definition = mock(AnnotatedBeanDefinition.class);\n\t\tgiven(definition.getBeanClassName()).willReturn(TestListener.class.getName());\n\t\tgiven(definition.getMetadata()).willReturn(new SimpleMetadataReaderFactory()\n\t\t\t\t.getMetadataReader(TestListener.class.getName()).getAnnotationMetadata());\n\t\tthis.handler.handle(definition, this.registry);\n\t\tthis.registry.getBeanDefinition(TestListener.class.getName() + \"Registrar\");\n\t}\n","date":"2020-10-27 04:26:52","endLine":53,"groupId":"102028","id":4,"instanceNumber":2,"isCurCommit":1,"methodName":"listener","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/f7/87927469a02780f98a73a68468962d20bf2476.src","preCode":"\tvoid listener() throws IOException {\n\t\tAnnotatedBeanDefinition definition = mock(AnnotatedBeanDefinition.class);\n\t\tgiven(definition.getBeanClassName()).willReturn(TestListener.class.getName());\n\t\tgiven(definition.getMetadata()).willReturn(new SimpleMetadataReaderFactory()\n\t\t\t\t.getMetadataReader(TestListener.class.getName()).getAnnotationMetadata());\n\t\tthis.handler.handle(definition, this.registry);\n\t\tthis.registry.getBeanDefinition(TestListener.class.getName());\n\t}\n","realPath":"spring-boot-project/spring-boot/src/test/java/org/springframework/boot/web/servlet/WebListenerHandlerTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":46,"status":"M"}],"commitId":"fafc0a91e3943fdea386a3af92deb00d3150aeba","commitMessage":"@@@Register @WebListeners in a way that allows them to register components\n\nPreviously.  @WebListeners were discovered via custom component scanning\nand then registered programmatically via the ServletContext. The servlet\nspec requires any ServletContextListener registered in this manner to be\nprohibited from programatically configuring servlets.  filters.  and\nlisteners. This left us not strictly complying with the servlet spec\nas a ServletContextListener registered via a @WebListener annotation\nshould be able to programatically configure other components.\n\nThis commit updates WebListenerHandler to register each @WebListener\ncomponent directly with Jetty.  Tomcat.  or Undertow rather than via the\nServletContext API. This ensure that any @WebListener-annoated\nServletContextListener registered via servlet component scanning is\nable to programatically register servlets.  filters.  and listeners.\n\nThere is a small chance that this will be a breaking change for some\nusers:\n\n1. The ServletListenerRegistrationBeans that were previously defined\n   for each @WebListener will now be\n   WebListenerHandler.WebListenerRegistrars\n2. Each @WebListener-annotated class will now be instantiated by\n   Jetty.  Tomcat.  or Undertow. Jetty and Tomcat both require the class\n   to be public and have a public default constructor. Previously. \n   a package-private class or default constructor could be used as the\n   instantiation was performed by Spring Framework. Undertow is not\n   affected as it can instantiate a package-private type.\n\nFixes gh-18303\n","date":"2020-10-27 04:26:52","modifiedFileCount":"12","status":"M","submitter":"Andy Wilkinson"}]
