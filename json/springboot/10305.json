[{"authorTime":"2019-09-26 04:45:25","codes":[{"authorDate":"2019-09-26 04:45:25","commitOrder":1,"curCode":"\tvoid getHealthWhenAlwaysShowIsFalseAndGroupIsFalseCannotAccessComponent() {\n\t\tthis.primaryGroup.setShowComponents(false);\n\t\tC contributor = createContributor(this.up);\n\t\tC compositeContributor = createCompositeContributor(Collections.singletonMap(\"spring\", contributor));\n\t\tthis.registry.registerContributor(\"test\", compositeContributor);\n\t\tHealthEndpointSupport<C, T> endpoint = create(this.registry, this.groups);\n\t\tHealthResult<T> rootResult = endpoint.getHealth(ApiVersion.V3, SecurityContext.NONE, false);\n\t\tassertThat(((CompositeHealth) getHealth(rootResult)).getComponents()).isNullOrEmpty();\n\t\tHealthResult<T> componentResult = endpoint.getHealth(ApiVersion.V3, SecurityContext.NONE, false, \"test\");\n\t\tassertThat(componentResult).isNull();\n\t}\n","date":"2019-09-27 07:17:28","endLine":129,"groupId":"3766","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"getHealthWhenAlwaysShowIsFalseAndGroupIsFalseCannotAccessComponent","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/60/e1421b3828d94583a41b79819d34403121f4a3.src","preCode":"\tvoid getHealthWhenAlwaysShowIsFalseAndGroupIsFalseCannotAccessComponent() {\n\t\tthis.primaryGroup.setShowComponents(false);\n\t\tC contributor = createContributor(this.up);\n\t\tC compositeContributor = createCompositeContributor(Collections.singletonMap(\"spring\", contributor));\n\t\tthis.registry.registerContributor(\"test\", compositeContributor);\n\t\tHealthEndpointSupport<C, T> endpoint = create(this.registry, this.groups);\n\t\tHealthResult<T> rootResult = endpoint.getHealth(ApiVersion.V3, SecurityContext.NONE, false);\n\t\tassertThat(((CompositeHealth) getHealth(rootResult)).getComponents()).isNullOrEmpty();\n\t\tHealthResult<T> componentResult = endpoint.getHealth(ApiVersion.V3, SecurityContext.NONE, false, \"test\");\n\t\tassertThat(componentResult).isNull();\n\t}\n","realPath":"spring-boot-project/spring-boot-actuator/src/test/java/org/springframework/boot/actuate/health/HealthEndpointSupportTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":119,"status":"B"},{"authorDate":"2019-09-26 04:45:25","commitOrder":1,"curCode":"\tvoid getHealthWhenAlwaysShowIsTrueShowsComponents() {\n\t\tthis.primaryGroup.setShowComponents(true);\n\t\tC contributor = createContributor(this.up);\n\t\tC compositeContributor = createCompositeContributor(Collections.singletonMap(\"spring\", contributor));\n\t\tthis.registry.registerContributor(\"test\", compositeContributor);\n\t\tHealthEndpointSupport<C, T> endpoint = create(this.registry, this.groups);\n\t\tHealthResult<T> rootResult = endpoint.getHealth(ApiVersion.V3, SecurityContext.NONE, false);\n\t\tassertThat(((CompositeHealth) getHealth(rootResult)).getComponents()).containsKey(\"test\");\n\t\tHealthResult<T> componentResult = endpoint.getHealth(ApiVersion.V3, SecurityContext.NONE, false, \"test\");\n\t\tassertThat(((CompositeHealth) getHealth(componentResult)).getComponents()).containsKey(\"spring\");\n\t}\n","date":"2019-09-27 07:17:28","endLine":142,"groupId":"3766","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"getHealthWhenAlwaysShowIsTrueShowsComponents","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/60/e1421b3828d94583a41b79819d34403121f4a3.src","preCode":"\tvoid getHealthWhenAlwaysShowIsTrueShowsComponents() {\n\t\tthis.primaryGroup.setShowComponents(true);\n\t\tC contributor = createContributor(this.up);\n\t\tC compositeContributor = createCompositeContributor(Collections.singletonMap(\"spring\", contributor));\n\t\tthis.registry.registerContributor(\"test\", compositeContributor);\n\t\tHealthEndpointSupport<C, T> endpoint = create(this.registry, this.groups);\n\t\tHealthResult<T> rootResult = endpoint.getHealth(ApiVersion.V3, SecurityContext.NONE, false);\n\t\tassertThat(((CompositeHealth) getHealth(rootResult)).getComponents()).containsKey(\"test\");\n\t\tHealthResult<T> componentResult = endpoint.getHealth(ApiVersion.V3, SecurityContext.NONE, false, \"test\");\n\t\tassertThat(((CompositeHealth) getHealth(componentResult)).getComponents()).containsKey(\"spring\");\n\t}\n","realPath":"spring-boot-project/spring-boot-actuator/src/test/java/org/springframework/boot/actuate/health/HealthEndpointSupportTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":132,"status":"B"}],"commitId":"a94ab673a3230e89403c1046837359c300f8717c","commitMessage":"@@@Add health endpoint 'show-components' support\n\nAdd a `show-components` property under `management.endpoint.health` and\n`management.endpoint.health.group.<name>` that can be used to change\nwhen components are displayed.\n\nPrior to this commit it was only possible to set `show-details` which\noffered an \"all or nothing\" approach to the resulting JSON. The new\nswitch allows component information to be displayed whilst still hiding\npotentially sensitive details returned from the actual `HealthIndicator`.\n\nCloses gh-15076\n","date":"2019-09-27 07:17:28","modifiedFileCount":"13","status":"B","submitter":"Phillip Webb"},{"authorTime":"2021-07-14 06:13:04","codes":[{"authorDate":"2021-07-14 06:13:04","commitOrder":2,"curCode":"\tvoid getHealthWhenAlwaysShowIsFalseAndGroupIsFalseCannotAccessComponent() {\n\t\tthis.primaryGroup.setShowComponents(false);\n\t\tC contributor = createContributor(this.up);\n\t\tC compositeContributor = createCompositeContributor(Collections.singletonMap(\"spring\", contributor));\n\t\tthis.registry.registerContributor(\"test\", compositeContributor);\n\t\tHealthEndpointSupport<C, T> endpoint = create(this.registry, this.groups);\n\t\tHealthResult<T> rootResult = endpoint.getHealth(ApiVersion.V3, null, SecurityContext.NONE, false);\n\t\tassertThat(((CompositeHealth) getHealth(rootResult)).getComponents()).isNullOrEmpty();\n\t\tHealthResult<T> componentResult = endpoint.getHealth(ApiVersion.V3, null, SecurityContext.NONE, false, \"test\");\n\t\tassertThat(componentResult).isNull();\n\t}\n","date":"2021-08-12 10:25:25","endLine":124,"groupId":"10305","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"getHealthWhenAlwaysShowIsFalseAndGroupIsFalseCannotAccessComponent","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/40/a7d5dd9863f5f16b013f0fa7cf9411892125fb.src","preCode":"\tvoid getHealthWhenAlwaysShowIsFalseAndGroupIsFalseCannotAccessComponent() {\n\t\tthis.primaryGroup.setShowComponents(false);\n\t\tC contributor = createContributor(this.up);\n\t\tC compositeContributor = createCompositeContributor(Collections.singletonMap(\"spring\", contributor));\n\t\tthis.registry.registerContributor(\"test\", compositeContributor);\n\t\tHealthEndpointSupport<C, T> endpoint = create(this.registry, this.groups);\n\t\tHealthResult<T> rootResult = endpoint.getHealth(ApiVersion.V3, SecurityContext.NONE, false);\n\t\tassertThat(((CompositeHealth) getHealth(rootResult)).getComponents()).isNullOrEmpty();\n\t\tHealthResult<T> componentResult = endpoint.getHealth(ApiVersion.V3, SecurityContext.NONE, false, \"test\");\n\t\tassertThat(componentResult).isNull();\n\t}\n","realPath":"spring-boot-project/spring-boot-actuator/src/test/java/org/springframework/boot/actuate/health/HealthEndpointSupportTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":114,"status":"M"},{"authorDate":"2021-07-14 06:13:04","commitOrder":2,"curCode":"\tvoid getHealthWhenAlwaysShowIsTrueShowsComponents() {\n\t\tthis.primaryGroup.setShowComponents(true);\n\t\tC contributor = createContributor(this.up);\n\t\tC compositeContributor = createCompositeContributor(Collections.singletonMap(\"spring\", contributor));\n\t\tthis.registry.registerContributor(\"test\", compositeContributor);\n\t\tHealthEndpointSupport<C, T> endpoint = create(this.registry, this.groups);\n\t\tHealthResult<T> rootResult = endpoint.getHealth(ApiVersion.V3, null, SecurityContext.NONE, false);\n\t\tassertThat(((CompositeHealth) getHealth(rootResult)).getComponents()).containsKey(\"test\");\n\t\tHealthResult<T> componentResult = endpoint.getHealth(ApiVersion.V3, null, SecurityContext.NONE, false, \"test\");\n\t\tassertThat(((CompositeHealth) getHealth(componentResult)).getComponents()).containsKey(\"spring\");\n\t}\n","date":"2021-08-12 10:25:25","endLine":137,"groupId":"10305","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"getHealthWhenAlwaysShowIsTrueShowsComponents","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/40/a7d5dd9863f5f16b013f0fa7cf9411892125fb.src","preCode":"\tvoid getHealthWhenAlwaysShowIsTrueShowsComponents() {\n\t\tthis.primaryGroup.setShowComponents(true);\n\t\tC contributor = createContributor(this.up);\n\t\tC compositeContributor = createCompositeContributor(Collections.singletonMap(\"spring\", contributor));\n\t\tthis.registry.registerContributor(\"test\", compositeContributor);\n\t\tHealthEndpointSupport<C, T> endpoint = create(this.registry, this.groups);\n\t\tHealthResult<T> rootResult = endpoint.getHealth(ApiVersion.V3, SecurityContext.NONE, false);\n\t\tassertThat(((CompositeHealth) getHealth(rootResult)).getComponents()).containsKey(\"test\");\n\t\tHealthResult<T> componentResult = endpoint.getHealth(ApiVersion.V3, SecurityContext.NONE, false, \"test\");\n\t\tassertThat(((CompositeHealth) getHealth(componentResult)).getComponents()).containsKey(\"spring\");\n\t}\n","realPath":"spring-boot-project/spring-boot-actuator/src/test/java/org/springframework/boot/actuate/health/HealthEndpointSupportTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":127,"status":"M"}],"commitId":"49c86e6e1bef32e21bd2979aabddfcbacbe8ee89","commitMessage":"@@@Allow health groups to be configured at an additional path\n\nCloses gh-25471\n\nCo-authored-by: Phillip Webb <pwebb@vmware.com>\n","date":"2021-08-12 10:25:25","modifiedFileCount":"35","status":"M","submitter":"Madhura Bhave"}]
