[{"authorTime":"2021-07-13 21:01:23","codes":[{"authorDate":"2021-07-13 21:01:23","commitOrder":1,"curCode":"\tvoid allowsCustomJettyConnectionMetricsBinderToBeUsed() {\n\t\tnew WebApplicationContextRunner(AnnotationConfigServletWebServerApplicationContext::new)\n\t\t\t\t.withConfiguration(AutoConfigurations.of(JettyMetricsAutoConfiguration.class,\n\t\t\t\t\t\tServletWebServerFactoryAutoConfiguration.class))\n\t\t\t\t.withUserConfiguration(ServletWebServerConfiguration.class, CustomJettyConnectionMetricsBinder.class,\n\t\t\t\t\t\tMeterRegistryConfiguration.class)\n\t\t\t\t.run((context) -> {\n\t\t\t\t\tcontext.publishEvent(new ApplicationStartedEvent(new SpringApplication(), null,\n\t\t\t\t\t\t\tcontext.getSourceApplicationContext()));\n\t\t\t\t\tassertThat(context).hasSingleBean(JettyConnectionMetricsBinder.class)\n\t\t\t\t\t\t\t.hasBean(\"customJettyConnectionMetricsBinder\");\n\t\t\t\t\tSimpleMeterRegistry registry = context.getBean(SimpleMeterRegistry.class);\n\t\t\t\t\tassertThat(registry.find(\"jetty.connections.messages.in\").tag(\"custom-tag-name\", \"custom-tag-value\")\n\t\t\t\t\t\t\t.meter()).isNotNull();\n\t\t\t\t});\n\t}\n","date":"2021-07-13 21:01:23","endLine":135,"groupId":"6194","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"allowsCustomJettyConnectionMetricsBinderToBeUsed","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/6a/f671e9506f358a4561c9e5ddbee8bbf18a0e7d.src","preCode":"\tvoid allowsCustomJettyConnectionMetricsBinderToBeUsed() {\n\t\tnew WebApplicationContextRunner(AnnotationConfigServletWebServerApplicationContext::new)\n\t\t\t\t.withConfiguration(AutoConfigurations.of(JettyMetricsAutoConfiguration.class,\n\t\t\t\t\t\tServletWebServerFactoryAutoConfiguration.class))\n\t\t\t\t.withUserConfiguration(ServletWebServerConfiguration.class, CustomJettyConnectionMetricsBinder.class,\n\t\t\t\t\t\tMeterRegistryConfiguration.class)\n\t\t\t\t.run((context) -> {\n\t\t\t\t\tcontext.publishEvent(new ApplicationStartedEvent(new SpringApplication(), null,\n\t\t\t\t\t\t\tcontext.getSourceApplicationContext()));\n\t\t\t\t\tassertThat(context).hasSingleBean(JettyConnectionMetricsBinder.class)\n\t\t\t\t\t\t\t.hasBean(\"customJettyConnectionMetricsBinder\");\n\t\t\t\t\tSimpleMeterRegistry registry = context.getBean(SimpleMeterRegistry.class);\n\t\t\t\t\tassertThat(registry.find(\"jetty.connections.messages.in\").tag(\"custom-tag-name\", \"custom-tag-value\")\n\t\t\t\t\t\t\t.meter()).isNotNull();\n\t\t\t\t});\n\t}\n","realPath":"spring-boot-project/spring-boot-actuator-autoconfigure/src/test/java/org/springframework/boot/actuate/autoconfigure/metrics/web/jetty/JettyMetricsAutoConfigurationTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":120,"status":"B"},{"authorDate":"2021-07-13 21:01:23","commitOrder":1,"curCode":"\tvoid allowsCustomJettySslHandshakeMetricsBinderToBeUsed() {\n\t\tnew WebApplicationContextRunner(AnnotationConfigServletWebServerApplicationContext::new)\n\t\t\t\t.withConfiguration(AutoConfigurations.of(JettyMetricsAutoConfiguration.class,\n\t\t\t\t\t\tServletWebServerFactoryAutoConfiguration.class))\n\t\t\t\t.withUserConfiguration(ServletWebServerConfiguration.class, CustomJettySslHandshakeMetricsBinder.class,\n\t\t\t\t\t\tMeterRegistryConfiguration.class)\n\t\t\t\t.withPropertyValues(\"server.ssl.enabled: true\", \"server.ssl.key-store: src/test/resources/test.jks\",\n\t\t\t\t\t\t\"server.ssl.key-store-password: secret\", \"server.ssl.key-password: password\")\n\t\t\t\t.run((context) -> {\n\t\t\t\t\tcontext.publishEvent(new ApplicationStartedEvent(new SpringApplication(), null,\n\t\t\t\t\t\t\tcontext.getSourceApplicationContext()));\n\t\t\t\t\tassertThat(context).hasSingleBean(JettySslHandshakeMetricsBinder.class)\n\t\t\t\t\t\t\t.hasBean(\"customJettySslHandshakeMetricsBinder\");\n\t\t\t\t\tSimpleMeterRegistry registry = context.getBean(SimpleMeterRegistry.class);\n\t\t\t\t\tassertThat(registry.find(\"jetty.ssl.handshakes\").tag(\"custom-tag-name\", \"custom-tag-value\").meter())\n\t\t\t\t\t\t\t.isNotNull();\n\t\t\t\t});\n\n\t\tnew WebApplicationContextRunner().withConfiguration(AutoConfigurations.of(JettyMetricsAutoConfiguration.class))\n\t\t\t\t.withUserConfiguration(CustomJettySslHandshakeMetricsBinder.class, MeterRegistryConfiguration.class)\n\t\t\t\t.withPropertyValues(\"server.ssl.enabled: true\", \"server.ssl.key-store: src/test/resources/test.jks\",\n\t\t\t\t\t\t\"server.ssl.key-store-password: secret\", \"server.ssl.key-password: password\")\n\t\t\t\t.run((context) -> assertThat(context).hasSingleBean(JettySslHandshakeMetricsBinder.class)\n\t\t\t\t\t\t.hasBean(\"customJettySslHandshakeMetricsBinder\"));\n\t}\n","date":"2021-07-13 21:01:23","endLine":195,"groupId":"6196","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"allowsCustomJettySslHandshakeMetricsBinderToBeUsed","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/6a/f671e9506f358a4561c9e5ddbee8bbf18a0e7d.src","preCode":"\tvoid allowsCustomJettySslHandshakeMetricsBinderToBeUsed() {\n\t\tnew WebApplicationContextRunner(AnnotationConfigServletWebServerApplicationContext::new)\n\t\t\t\t.withConfiguration(AutoConfigurations.of(JettyMetricsAutoConfiguration.class,\n\t\t\t\t\t\tServletWebServerFactoryAutoConfiguration.class))\n\t\t\t\t.withUserConfiguration(ServletWebServerConfiguration.class, CustomJettySslHandshakeMetricsBinder.class,\n\t\t\t\t\t\tMeterRegistryConfiguration.class)\n\t\t\t\t.withPropertyValues(\"server.ssl.enabled: true\", \"server.ssl.key-store: src/test/resources/test.jks\",\n\t\t\t\t\t\t\"server.ssl.key-store-password: secret\", \"server.ssl.key-password: password\")\n\t\t\t\t.run((context) -> {\n\t\t\t\t\tcontext.publishEvent(new ApplicationStartedEvent(new SpringApplication(), null,\n\t\t\t\t\t\t\tcontext.getSourceApplicationContext()));\n\t\t\t\t\tassertThat(context).hasSingleBean(JettySslHandshakeMetricsBinder.class)\n\t\t\t\t\t\t\t.hasBean(\"customJettySslHandshakeMetricsBinder\");\n\t\t\t\t\tSimpleMeterRegistry registry = context.getBean(SimpleMeterRegistry.class);\n\t\t\t\t\tassertThat(registry.find(\"jetty.ssl.handshakes\").tag(\"custom-tag-name\", \"custom-tag-value\").meter())\n\t\t\t\t\t\t\t.isNotNull();\n\t\t\t\t});\n\n\t\tnew WebApplicationContextRunner().withConfiguration(AutoConfigurations.of(JettyMetricsAutoConfiguration.class))\n\t\t\t\t.withUserConfiguration(CustomJettySslHandshakeMetricsBinder.class, MeterRegistryConfiguration.class)\n\t\t\t\t.withPropertyValues(\"server.ssl.enabled: true\", \"server.ssl.key-store: src/test/resources/test.jks\",\n\t\t\t\t\t\t\"server.ssl.key-store-password: secret\", \"server.ssl.key-password: password\")\n\t\t\t\t.run((context) -> assertThat(context).hasSingleBean(JettySslHandshakeMetricsBinder.class)\n\t\t\t\t\t\t.hasBean(\"customJettySslHandshakeMetricsBinder\"));\n\t}\n","realPath":"spring-boot-project/spring-boot-actuator-autoconfigure/src/test/java/org/springframework/boot/actuate/autoconfigure/metrics/web/jetty/JettyMetricsAutoConfigurationTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":171,"status":"B"}],"commitId":"4f3fdaed812550107359400525077a77ca787d67","commitMessage":"@@@Merge pull request #26418 from bono007\n\n* gh-26418:\n  Polish \"Auto-configure Jetty connection and SSL metrics\"\n  Auto-configure Jetty connection and SSL metrics\n\nCloses gh-26418\n","date":"2021-07-13 21:01:23","modifiedFileCount":"3","status":"B","submitter":"Andy Wilkinson"},{"authorTime":"2021-09-16 20:08:56","codes":[{"authorDate":"2021-09-16 20:08:56","commitOrder":2,"curCode":"\tvoid allowsCustomJettyConnectionMetricsBinderToBeUsed() {\n\t\tnew WebApplicationContextRunner(AnnotationConfigServletWebServerApplicationContext::new)\n\t\t\t\t.withConfiguration(AutoConfigurations.of(JettyMetricsAutoConfiguration.class,\n\t\t\t\t\t\tServletWebServerFactoryAutoConfiguration.class))\n\t\t\t\t.withUserConfiguration(ServletWebServerConfiguration.class, CustomJettyConnectionMetricsBinder.class,\n\t\t\t\t\t\tMeterRegistryConfiguration.class)\n\t\t\t\t.run((context) -> {\n\t\t\t\t\tcontext.publishEvent(createApplicationStartedEvent(context.getSourceApplicationContext()));\n\t\t\t\t\tassertThat(context).hasSingleBean(JettyConnectionMetricsBinder.class)\n\t\t\t\t\t\t\t.hasBean(\"customJettyConnectionMetricsBinder\");\n\t\t\t\t\tSimpleMeterRegistry registry = context.getBean(SimpleMeterRegistry.class);\n\t\t\t\t\tassertThat(registry.find(\"jetty.connections.messages.in\").tag(\"custom-tag-name\", \"custom-tag-value\")\n\t\t\t\t\t\t\t.meter()).isNotNull();\n\t\t\t\t});\n\t}\n","date":"2021-09-16 20:08:57","endLine":131,"groupId":"10957","id":3,"instanceNumber":1,"isCurCommit":1,"methodName":"allowsCustomJettyConnectionMetricsBinderToBeUsed","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/8d/377317b2c317aa0294487ef1be5376aeeea819.src","preCode":"\tvoid allowsCustomJettyConnectionMetricsBinderToBeUsed() {\n\t\tnew WebApplicationContextRunner(AnnotationConfigServletWebServerApplicationContext::new)\n\t\t\t\t.withConfiguration(AutoConfigurations.of(JettyMetricsAutoConfiguration.class,\n\t\t\t\t\t\tServletWebServerFactoryAutoConfiguration.class))\n\t\t\t\t.withUserConfiguration(ServletWebServerConfiguration.class, CustomJettyConnectionMetricsBinder.class,\n\t\t\t\t\t\tMeterRegistryConfiguration.class)\n\t\t\t\t.run((context) -> {\n\t\t\t\t\tcontext.publishEvent(new ApplicationStartedEvent(new SpringApplication(), null,\n\t\t\t\t\t\t\tcontext.getSourceApplicationContext()));\n\t\t\t\t\tassertThat(context).hasSingleBean(JettyConnectionMetricsBinder.class)\n\t\t\t\t\t\t\t.hasBean(\"customJettyConnectionMetricsBinder\");\n\t\t\t\t\tSimpleMeterRegistry registry = context.getBean(SimpleMeterRegistry.class);\n\t\t\t\t\tassertThat(registry.find(\"jetty.connections.messages.in\").tag(\"custom-tag-name\", \"custom-tag-value\")\n\t\t\t\t\t\t\t.meter()).isNotNull();\n\t\t\t\t});\n\t}\n","realPath":"spring-boot-project/spring-boot-actuator-autoconfigure/src/test/java/org/springframework/boot/actuate/autoconfigure/metrics/web/jetty/JettyMetricsAutoConfigurationTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":117,"status":"M"},{"authorDate":"2021-09-16 20:08:56","commitOrder":2,"curCode":"\tvoid allowsCustomJettySslHandshakeMetricsBinderToBeUsed() {\n\t\tnew WebApplicationContextRunner(AnnotationConfigServletWebServerApplicationContext::new)\n\t\t\t\t.withConfiguration(AutoConfigurations.of(JettyMetricsAutoConfiguration.class,\n\t\t\t\t\t\tServletWebServerFactoryAutoConfiguration.class))\n\t\t\t\t.withUserConfiguration(ServletWebServerConfiguration.class, CustomJettySslHandshakeMetricsBinder.class,\n\t\t\t\t\t\tMeterRegistryConfiguration.class)\n\t\t\t\t.withPropertyValues(\"server.ssl.enabled: true\", \"server.ssl.key-store: src/test/resources/test.jks\",\n\t\t\t\t\t\t\"server.ssl.key-store-password: secret\", \"server.ssl.key-password: password\")\n\t\t\t\t.run((context) -> {\n\t\t\t\t\tcontext.publishEvent(createApplicationStartedEvent(context.getSourceApplicationContext()));\n\t\t\t\t\tassertThat(context).hasSingleBean(JettySslHandshakeMetricsBinder.class)\n\t\t\t\t\t\t\t.hasBean(\"customJettySslHandshakeMetricsBinder\");\n\t\t\t\t\tSimpleMeterRegistry registry = context.getBean(SimpleMeterRegistry.class);\n\t\t\t\t\tassertThat(registry.find(\"jetty.ssl.handshakes\").tag(\"custom-tag-name\", \"custom-tag-value\").meter())\n\t\t\t\t\t\t\t.isNotNull();\n\t\t\t\t});\n\n\t\tnew WebApplicationContextRunner().withConfiguration(AutoConfigurations.of(JettyMetricsAutoConfiguration.class))\n\t\t\t\t.withUserConfiguration(CustomJettySslHandshakeMetricsBinder.class, MeterRegistryConfiguration.class)\n\t\t\t\t.withPropertyValues(\"server.ssl.enabled: true\", \"server.ssl.key-store: src/test/resources/test.jks\",\n\t\t\t\t\t\t\"server.ssl.key-store-password: secret\", \"server.ssl.key-password: password\")\n\t\t\t\t.run((context) -> assertThat(context).hasSingleBean(JettySslHandshakeMetricsBinder.class)\n\t\t\t\t\t\t.hasBean(\"customJettySslHandshakeMetricsBinder\"));\n\t}\n","date":"2021-09-16 20:08:57","endLine":188,"groupId":"10957","id":4,"instanceNumber":2,"isCurCommit":1,"methodName":"allowsCustomJettySslHandshakeMetricsBinderToBeUsed","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/8d/377317b2c317aa0294487ef1be5376aeeea819.src","preCode":"\tvoid allowsCustomJettySslHandshakeMetricsBinderToBeUsed() {\n\t\tnew WebApplicationContextRunner(AnnotationConfigServletWebServerApplicationContext::new)\n\t\t\t\t.withConfiguration(AutoConfigurations.of(JettyMetricsAutoConfiguration.class,\n\t\t\t\t\t\tServletWebServerFactoryAutoConfiguration.class))\n\t\t\t\t.withUserConfiguration(ServletWebServerConfiguration.class, CustomJettySslHandshakeMetricsBinder.class,\n\t\t\t\t\t\tMeterRegistryConfiguration.class)\n\t\t\t\t.withPropertyValues(\"server.ssl.enabled: true\", \"server.ssl.key-store: src/test/resources/test.jks\",\n\t\t\t\t\t\t\"server.ssl.key-store-password: secret\", \"server.ssl.key-password: password\")\n\t\t\t\t.run((context) -> {\n\t\t\t\t\tcontext.publishEvent(new ApplicationStartedEvent(new SpringApplication(), null,\n\t\t\t\t\t\t\tcontext.getSourceApplicationContext()));\n\t\t\t\t\tassertThat(context).hasSingleBean(JettySslHandshakeMetricsBinder.class)\n\t\t\t\t\t\t\t.hasBean(\"customJettySslHandshakeMetricsBinder\");\n\t\t\t\t\tSimpleMeterRegistry registry = context.getBean(SimpleMeterRegistry.class);\n\t\t\t\t\tassertThat(registry.find(\"jetty.ssl.handshakes\").tag(\"custom-tag-name\", \"custom-tag-value\").meter())\n\t\t\t\t\t\t\t.isNotNull();\n\t\t\t\t});\n\n\t\tnew WebApplicationContextRunner().withConfiguration(AutoConfigurations.of(JettyMetricsAutoConfiguration.class))\n\t\t\t\t.withUserConfiguration(CustomJettySslHandshakeMetricsBinder.class, MeterRegistryConfiguration.class)\n\t\t\t\t.withPropertyValues(\"server.ssl.enabled: true\", \"server.ssl.key-store: src/test/resources/test.jks\",\n\t\t\t\t\t\t\"server.ssl.key-store-password: secret\", \"server.ssl.key-password: password\")\n\t\t\t\t.run((context) -> assertThat(context).hasSingleBean(JettySslHandshakeMetricsBinder.class)\n\t\t\t\t\t\t.hasBean(\"customJettySslHandshakeMetricsBinder\"));\n\t}\n","realPath":"spring-boot-project/spring-boot-actuator-autoconfigure/src/test/java/org/springframework/boot/actuate/autoconfigure/metrics/web/jetty/JettyMetricsAutoConfigurationTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":165,"status":"M"}],"commitId":"ce95e093087d591626762089095705826b5adab8","commitMessage":"@@@Merge pull request #27878 from bono007\n\n* pr/27878:\n  Polish \"Add startup time metrics\"\n  Add startup time metrics\n\nCloses gh-27878\n","date":"2021-09-16 20:08:57","modifiedFileCount":"15","status":"M","submitter":"Stephane Nicoll"}]
