[{"authorTime":"2018-10-05 20:25:43","codes":[{"authorDate":"2018-10-05 20:25:43","commitOrder":1,"curCode":"    public void testMultiWithContainerSimple()\n            throws KeeperException, InterruptedException {\n        Op createContainer = Op.create(\"/foo\", new byte[0],\n                ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.CONTAINER);\n        zk.multi(Collections.singletonList(createContainer));\n\n        DataTree dataTree = serverFactory.getZooKeeperServer().getZKDatabase().getDataTree();\n        Assert.assertEquals(dataTree.getContainers().size(), 1);\n    }\n","date":"2018-10-05 20:25:43","endLine":103,"groupId":"2290","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testMultiWithContainerSimple","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-zookeeper-10-0.7/blobInfo/CC_OUT/blobs/48/89684f79c1e780a4fb623ee7fdf181d9f37be6.src","preCode":"    public void testMultiWithContainerSimple()\n            throws KeeperException, InterruptedException {\n        Op createContainer = Op.create(\"/foo\", new byte[0],\n                ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.CONTAINER);\n        zk.multi(Collections.singletonList(createContainer));\n\n        DataTree dataTree = serverFactory.getZooKeeperServer().getZKDatabase().getDataTree();\n        Assert.assertEquals(dataTree.getContainers().size(), 1);\n    }\n","realPath":"zookeeper-server/src/test/java/org/apache/zookeeper/server/CreateContainerTest.java","repoName":"zookeeper","snippetEndLine":0,"snippetStartLine":0,"startLine":95,"status":"B"},{"authorDate":"2018-10-05 20:25:43","commitOrder":1,"curCode":"    public void testMultiWithContainer()\n            throws KeeperException, InterruptedException {\n        Op createContainer = Op.create(\"/foo\", new byte[0],\n                ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.CONTAINER);\n        Op createChild = Op.create(\"/foo/bar\", new byte[0],\n                ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.PERSISTENT);\n        zk.multi(Arrays.asList(createContainer, createChild));\n\n        DataTree dataTree = serverFactory.getZooKeeperServer().getZKDatabase().getDataTree();\n        Assert.assertEquals(dataTree.getContainers().size(), 1);\n\n        zk.delete(\"/foo/bar\", -1);  \r\n\n        ContainerManager containerManager = new ContainerManager(serverFactory.getZooKeeperServer()\n                .getZKDatabase(), serverFactory.getZooKeeperServer().firstProcessor, 1, 100);\n        containerManager.checkContainers();\n\n        Thread.sleep(1000);\n\n        Assert.assertNull(\"Container should have been deleted\", zk.exists(\"/foo\", false));\n\n        createContainer = Op.create(\"/foo\", new byte[0],\n                ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.CONTAINER);\n        createChild = Op.create(\"/foo/bar\", new byte[0],\n                ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.PERSISTENT);\n        Op deleteChild = Op.delete(\"/foo/bar\", -1);\n        zk.multi(Arrays.asList(createContainer, createChild, deleteChild));\n\n        containerManager.checkContainers();\n\n        Thread.sleep(1000);\n\n        Assert.assertNull(\"Container should have been deleted\", zk.exists(\"/foo\", false));\n    }\n","date":"2018-10-05 20:25:43","endLine":139,"groupId":"4300","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testMultiWithContainer","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-zookeeper-10-0.7/blobInfo/CC_OUT/blobs/48/89684f79c1e780a4fb623ee7fdf181d9f37be6.src","preCode":"    public void testMultiWithContainer()\n            throws KeeperException, InterruptedException {\n        Op createContainer = Op.create(\"/foo\", new byte[0],\n                ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.CONTAINER);\n        Op createChild = Op.create(\"/foo/bar\", new byte[0],\n                ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.PERSISTENT);\n        zk.multi(Arrays.asList(createContainer, createChild));\n\n        DataTree dataTree = serverFactory.getZooKeeperServer().getZKDatabase().getDataTree();\n        Assert.assertEquals(dataTree.getContainers().size(), 1);\n\n        zk.delete(\"/foo/bar\", -1);  \r\n\n        ContainerManager containerManager = new ContainerManager(serverFactory.getZooKeeperServer()\n                .getZKDatabase(), serverFactory.getZooKeeperServer().firstProcessor, 1, 100);\n        containerManager.checkContainers();\n\n        Thread.sleep(1000);\n\n        Assert.assertNull(\"Container should have been deleted\", zk.exists(\"/foo\", false));\n\n        createContainer = Op.create(\"/foo\", new byte[0],\n                ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.CONTAINER);\n        createChild = Op.create(\"/foo/bar\", new byte[0],\n                ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.PERSISTENT);\n        Op deleteChild = Op.delete(\"/foo/bar\", -1);\n        zk.multi(Arrays.asList(createContainer, createChild, deleteChild));\n\n        containerManager.checkContainers();\n\n        Thread.sleep(1000);\n\n        Assert.assertNull(\"Container should have been deleted\", zk.exists(\"/foo\", false));\n    }\n","realPath":"zookeeper-server/src/test/java/org/apache/zookeeper/server/CreateContainerTest.java","repoName":"zookeeper","snippetEndLine":0,"snippetStartLine":0,"startLine":106,"status":"B"}],"commitId":"faa7cec71fddfb959a7d67923acffdb67d93c953","commitMessage":"@@@ZOOKEEPER-3032: MAVEN MIGRATION - move java server.  client\n\nAuthor: Norbert Kalmar <nkalmar@yahoo.com>\n\nReviewers: hanm@apache.org.  andor@apache.org\n\nCloses #633 from nkalmar/ZOOKEEPER-3032 and squashes the following commits:\n\n3f9a0eca [Norbert Kalmar] ZOOKEEPER-3032 fix flaky QuorumPeerMainTest.testLeaderElectionWithDisloyalVoter_stillHasMajority\n27295ed6 [Norbert Kalmar] ZOOKEEPER-3032 - MAVEN MIGRATION - move java server.  client\n","date":"2018-10-05 20:25:43","modifiedFileCount":"0","status":"B","submitter":"Norbert Kalmar"},{"authorTime":"2019-08-17 23:13:15","codes":[{"authorDate":"2019-08-17 23:13:15","commitOrder":2,"curCode":"    public void testMultiWithContainerSimple() throws KeeperException, InterruptedException {\n        Op createContainer = Op.create(\"/foo\", new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.CONTAINER);\n        zk.multi(Collections.singletonList(createContainer));\n\n        DataTree dataTree = serverFactory.getZooKeeperServer().getZKDatabase().getDataTree();\n        assertEquals(dataTree.getContainers().size(), 1);\n    }\n","date":"2019-08-17 23:13:15","endLine":110,"groupId":"2290","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testMultiWithContainerSimple","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-zookeeper-10-0.7/blobInfo/CC_OUT/blobs/83/c7f0b3db91920a0673549f8d24efc7c936a438.src","preCode":"    public void testMultiWithContainerSimple()\n            throws KeeperException, InterruptedException {\n        Op createContainer = Op.create(\"/foo\", new byte[0],\n                ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.CONTAINER);\n        zk.multi(Collections.singletonList(createContainer));\n\n        DataTree dataTree = serverFactory.getZooKeeperServer().getZKDatabase().getDataTree();\n        Assert.assertEquals(dataTree.getContainers().size(), 1);\n    }\n","realPath":"zookeeper-server/src/test/java/org/apache/zookeeper/server/CreateContainerTest.java","repoName":"zookeeper","snippetEndLine":0,"snippetStartLine":0,"startLine":104,"status":"M"},{"authorDate":"2019-08-17 23:13:15","commitOrder":2,"curCode":"    public void testMultiWithContainer() throws KeeperException, InterruptedException {\n        Op createContainer = Op.create(\"/foo\", new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.CONTAINER);\n        Op createChild = Op.create(\"/foo/bar\", new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.PERSISTENT);\n        zk.multi(Arrays.asList(createContainer, createChild));\n\n        DataTree dataTree = serverFactory.getZooKeeperServer().getZKDatabase().getDataTree();\n        assertEquals(dataTree.getContainers().size(), 1);\n\n        zk.delete(\"/foo/bar\", -1);  \r\n\n        ContainerManager containerManager = new ContainerManager(serverFactory.getZooKeeperServer().getZKDatabase(), serverFactory.getZooKeeperServer().firstProcessor, 1, 100);\n        containerManager.checkContainers();\n\n        Thread.sleep(1000);\n\n        assertNull(\"Container should have been deleted\", zk.exists(\"/foo\", false));\n\n        createContainer = Op.create(\"/foo\", new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.CONTAINER);\n        createChild = Op.create(\"/foo/bar\", new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.PERSISTENT);\n        Op deleteChild = Op.delete(\"/foo/bar\", -1);\n        zk.multi(Arrays.asList(createContainer, createChild, deleteChild));\n\n        containerManager.checkContainers();\n\n        Thread.sleep(1000);\n\n        assertNull(\"Container should have been deleted\", zk.exists(\"/foo\", false));\n    }\n","date":"2019-08-17 23:13:15","endLine":140,"groupId":"2290","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testMultiWithContainer","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-zookeeper-10-0.7/blobInfo/CC_OUT/blobs/83/c7f0b3db91920a0673549f8d24efc7c936a438.src","preCode":"    public void testMultiWithContainer()\n            throws KeeperException, InterruptedException {\n        Op createContainer = Op.create(\"/foo\", new byte[0],\n                ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.CONTAINER);\n        Op createChild = Op.create(\"/foo/bar\", new byte[0],\n                ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.PERSISTENT);\n        zk.multi(Arrays.asList(createContainer, createChild));\n\n        DataTree dataTree = serverFactory.getZooKeeperServer().getZKDatabase().getDataTree();\n        Assert.assertEquals(dataTree.getContainers().size(), 1);\n\n        zk.delete(\"/foo/bar\", -1);  \r\n\n        ContainerManager containerManager = new ContainerManager(serverFactory.getZooKeeperServer()\n                .getZKDatabase(), serverFactory.getZooKeeperServer().firstProcessor, 1, 100);\n        containerManager.checkContainers();\n\n        Thread.sleep(1000);\n\n        Assert.assertNull(\"Container should have been deleted\", zk.exists(\"/foo\", false));\n\n        createContainer = Op.create(\"/foo\", new byte[0],\n                ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.CONTAINER);\n        createChild = Op.create(\"/foo/bar\", new byte[0],\n                ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.PERSISTENT);\n        Op deleteChild = Op.delete(\"/foo/bar\", -1);\n        zk.multi(Arrays.asList(createContainer, createChild, deleteChild));\n\n        containerManager.checkContainers();\n\n        Thread.sleep(1000);\n\n        Assert.assertNull(\"Container should have been deleted\", zk.exists(\"/foo\", false));\n    }\n","realPath":"zookeeper-server/src/test/java/org/apache/zookeeper/server/CreateContainerTest.java","repoName":"zookeeper","snippetEndLine":0,"snippetStartLine":0,"startLine":113,"status":"M"}],"commitId":"fe940cdd8fb23ba09684cefb73233d570f4a20fa","commitMessage":"@@@ZOOKEEPER-3475: Enable Checkstyle configuration on zookeeper-server\n\n- [x] org/apache/zookeeper\n- [x] org/apache/zookeeper/admin\n- [x] org/apache/zookeeper/cli\n- [x] org/apache/zookeeper/client\n- [x] org/apache/zookeeper/common\n- [x] org/apache/zookeeper/jmx\n- [x] org/apache/zookeeper/metrics\n- [x] org/apache/zookeeper/metrics/impl\n- [x] org/apache/zookeeper/server\n- [x] org/apache/zookeeper/server/admin\n- [x] org/apache/zookeeper/server/auth\n- [x] org/apache/zookeeper/server/command\n- [x] org/apache/zookeeper/server/metric\n- [x] org/apache/zookeeper/server/persistence\n- [x] org/apache/zookeeper/server/quorum\n- [x] org/apache/zookeeper/server/quorum/auth\n- [x] org/apache/zookeeper/server/quorum/flexible\n- [x] org/apache/zookeeper/server/util\n- [x] org/apache/zookeeper/server/watch\n- [x] org/apache/zookeeper/test\n- [x] org/apache/zookeeper/util\n- [x] org/apache/zookeeper/version/util\n\nAuthor: tison <wander4096@gmail.com>\n\nReviewers: Brian Nixon <nixon@fb.com>.  Enrico Olivelli <eolivelli@gmail.com>.  Michael Han <hanm@apache.org>\n\nCloses #1049 from TisonKun/ZOOKEEPER-3475\n","date":"2019-08-17 23:13:15","modifiedFileCount":"631","status":"M","submitter":"tison"},{"authorTime":"2019-11-25 22:37:51","codes":[{"authorDate":"2019-08-17 23:13:15","commitOrder":3,"curCode":"    public void testMultiWithContainerSimple() throws KeeperException, InterruptedException {\n        Op createContainer = Op.create(\"/foo\", new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.CONTAINER);\n        zk.multi(Collections.singletonList(createContainer));\n\n        DataTree dataTree = serverFactory.getZooKeeperServer().getZKDatabase().getDataTree();\n        assertEquals(dataTree.getContainers().size(), 1);\n    }\n","date":"2019-08-17 23:13:15","endLine":110,"groupId":"2290","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"testMultiWithContainerSimple","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-zookeeper-10-0.7/blobInfo/CC_OUT/blobs/83/c7f0b3db91920a0673549f8d24efc7c936a438.src","preCode":"    public void testMultiWithContainerSimple() throws KeeperException, InterruptedException {\n        Op createContainer = Op.create(\"/foo\", new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.CONTAINER);\n        zk.multi(Collections.singletonList(createContainer));\n\n        DataTree dataTree = serverFactory.getZooKeeperServer().getZKDatabase().getDataTree();\n        assertEquals(dataTree.getContainers().size(), 1);\n    }\n","realPath":"zookeeper-server/src/test/java/org/apache/zookeeper/server/CreateContainerTest.java","repoName":"zookeeper","snippetEndLine":0,"snippetStartLine":0,"startLine":104,"status":"N"},{"authorDate":"2019-11-25 22:37:51","commitOrder":3,"curCode":"    public void testMultiWithContainer() throws KeeperException, InterruptedException {\n        Op createContainer = Op.create(\"/foo\", new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.CONTAINER);\n        Op createChild = Op.create(\"/foo/bar\", new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.PERSISTENT);\n        zk.multi(Arrays.asList(createContainer, createChild));\n\n        DataTree dataTree = serverFactory.getZooKeeperServer().getZKDatabase().getDataTree();\n        assertEquals(dataTree.getContainers().size(), 1);\n\n        zk.delete(\"/foo/bar\", -1);  \r\n\n        ContainerManager containerManager = new ContainerManager(serverFactory.getZooKeeperServer().getZKDatabase(), serverFactory.getZooKeeperServer().firstProcessor, 1, 100);\n        containerManager.checkContainers();\n\n        assertTrue(completedContainerDeletions.tryAcquire(1, TimeUnit.SECONDS));\n        assertNull(\"Container should have been deleted\", zk.exists(\"/foo\", false));\n\n        createContainer = Op.create(\"/foo\", new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.CONTAINER);\n        createChild = Op.create(\"/foo/bar\", new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.PERSISTENT);\n        Op deleteChild = Op.delete(\"/foo/bar\", -1);\n        zk.multi(Arrays.asList(createContainer, createChild, deleteChild));\n\n        containerManager.checkContainers();\n\n        assertTrue(completedContainerDeletions.tryAcquire(1, TimeUnit.SECONDS));\n        assertNull(\"Container should have been deleted\", zk.exists(\"/foo\", false));\n    }\n","date":"2019-11-25 22:37:51","endLine":153,"groupId":"2290","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"testMultiWithContainer","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-zookeeper-10-0.7/blobInfo/CC_OUT/blobs/03/f9bcce210679412d40f55b12494b8d6b1150fa.src","preCode":"    public void testMultiWithContainer() throws KeeperException, InterruptedException {\n        Op createContainer = Op.create(\"/foo\", new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.CONTAINER);\n        Op createChild = Op.create(\"/foo/bar\", new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.PERSISTENT);\n        zk.multi(Arrays.asList(createContainer, createChild));\n\n        DataTree dataTree = serverFactory.getZooKeeperServer().getZKDatabase().getDataTree();\n        assertEquals(dataTree.getContainers().size(), 1);\n\n        zk.delete(\"/foo/bar\", -1);  \r\n\n        ContainerManager containerManager = new ContainerManager(serverFactory.getZooKeeperServer().getZKDatabase(), serverFactory.getZooKeeperServer().firstProcessor, 1, 100);\n        containerManager.checkContainers();\n\n        Thread.sleep(1000);\n\n        assertNull(\"Container should have been deleted\", zk.exists(\"/foo\", false));\n\n        createContainer = Op.create(\"/foo\", new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.CONTAINER);\n        createChild = Op.create(\"/foo/bar\", new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.PERSISTENT);\n        Op deleteChild = Op.delete(\"/foo/bar\", -1);\n        zk.multi(Arrays.asList(createContainer, createChild, deleteChild));\n\n        containerManager.checkContainers();\n\n        Thread.sleep(1000);\n\n        assertNull(\"Container should have been deleted\", zk.exists(\"/foo\", false));\n    }\n","realPath":"zookeeper-server/src/test/java/org/apache/zookeeper/server/CreateContainerTest.java","repoName":"zookeeper","snippetEndLine":0,"snippetStartLine":0,"startLine":128,"status":"M"}],"commitId":"4132b64b36ea43909888fdaf34268a243f2c7420","commitMessage":"@@@ZOOKEEPER-3546 - Allow optional deletion of never used Container Nodes\n\nEdge cases can cause Container Nodes to never be deleted. i.e. if the container node is created and then the client that create the node crashes the container will not get deleted unless another client creates a node inside of it. This is because the initial implementation does not delete container nodes with a cversion of 0. This PR adds a new system property.  \"znode.container.maxNeverUsedIntervalMs\".  that can be set to delete containers with a cversion of 0 that have been retained for a period of time. This is a backward compatible change as the default value for this is Long.MAX_VALUE - i.e. never.\n\nAuthor: randgalt <jordan@jordanzimmerman.com>\n\nReviewers: Enrico Olivelli <eolivelli@apache.org>.  Fangmin Lyu <fangmin@apache.org>\n\nCloses #1138 from Randgalt/ZOOKEEPER-3546-allow-delete-of-never-used-containers\n","date":"2019-11-25 22:37:51","modifiedFileCount":"4","status":"M","submitter":"randgalt"},{"authorTime":"2020-08-04 21:01:52","codes":[{"authorDate":"2019-08-17 23:13:15","commitOrder":4,"curCode":"    public void testMultiWithContainerSimple() throws KeeperException, InterruptedException {\n        Op createContainer = Op.create(\"/foo\", new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.CONTAINER);\n        zk.multi(Collections.singletonList(createContainer));\n\n        DataTree dataTree = serverFactory.getZooKeeperServer().getZKDatabase().getDataTree();\n        assertEquals(dataTree.getContainers().size(), 1);\n    }\n","date":"2019-08-17 23:13:15","endLine":110,"groupId":"1039","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"testMultiWithContainerSimple","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-zookeeper-10-0.7/blobInfo/CC_OUT/blobs/83/c7f0b3db91920a0673549f8d24efc7c936a438.src","preCode":"    public void testMultiWithContainerSimple() throws KeeperException, InterruptedException {\n        Op createContainer = Op.create(\"/foo\", new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.CONTAINER);\n        zk.multi(Collections.singletonList(createContainer));\n\n        DataTree dataTree = serverFactory.getZooKeeperServer().getZKDatabase().getDataTree();\n        assertEquals(dataTree.getContainers().size(), 1);\n    }\n","realPath":"zookeeper-server/src/test/java/org/apache/zookeeper/server/CreateContainerTest.java","repoName":"zookeeper","snippetEndLine":0,"snippetStartLine":0,"startLine":104,"status":"N"},{"authorDate":"2020-08-04 21:01:52","commitOrder":4,"curCode":"    public void testMultiWithContainer() throws KeeperException, InterruptedException {\n        Op createContainer = Op.create(\"/foo\", new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.CONTAINER);\n        Op createChild = Op.create(\"/foo/bar\", new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.PERSISTENT);\n        zk.multi(Arrays.asList(createContainer, createChild));\n\n        DataTree dataTree = serverFactory.getZooKeeperServer().getZKDatabase().getDataTree();\n        assertEquals(dataTree.getContainers().size(), 1);\n\n        zk.delete(\"/foo/bar\", -1);  \r\n\n        ContainerManager containerManager = new ContainerManager(serverFactory.getZooKeeperServer().getZKDatabase(), serverFactory.getZooKeeperServer().firstProcessor, 1, 100);\n        containerManager.checkContainers();\n\n        assertTrue(completedContainerDeletions.tryAcquire(1, TimeUnit.SECONDS));\n        assertNull(zk.exists(\"/foo\", false), \"Container should have been deleted\");\n\n        createContainer = Op.create(\"/foo\", new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.CONTAINER);\n        createChild = Op.create(\"/foo/bar\", new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.PERSISTENT);\n        Op deleteChild = Op.delete(\"/foo/bar\", -1);\n        zk.multi(Arrays.asList(createContainer, createChild, deleteChild));\n\n        containerManager.checkContainers();\n\n        assertTrue(completedContainerDeletions.tryAcquire(1, TimeUnit.SECONDS));\n        assertNull(zk.exists(\"/foo\", false), \"Container should have been deleted\");\n    }\n","date":"2020-08-04 21:01:52","endLine":164,"groupId":"1039","id":8,"instanceNumber":2,"isCurCommit":1,"methodName":"testMultiWithContainer","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-zookeeper-10-0.7/blobInfo/CC_OUT/blobs/67/22473f2a579ff8db91bc1cee84ff9028d690c9.src","preCode":"    public void testMultiWithContainer() throws KeeperException, InterruptedException {\n        Op createContainer = Op.create(\"/foo\", new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.CONTAINER);\n        Op createChild = Op.create(\"/foo/bar\", new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.PERSISTENT);\n        zk.multi(Arrays.asList(createContainer, createChild));\n\n        DataTree dataTree = serverFactory.getZooKeeperServer().getZKDatabase().getDataTree();\n        assertEquals(dataTree.getContainers().size(), 1);\n\n        zk.delete(\"/foo/bar\", -1);  \r\n\n        ContainerManager containerManager = new ContainerManager(serverFactory.getZooKeeperServer().getZKDatabase(), serverFactory.getZooKeeperServer().firstProcessor, 1, 100);\n        containerManager.checkContainers();\n\n        assertTrue(completedContainerDeletions.tryAcquire(1, TimeUnit.SECONDS));\n        assertNull(\"Container should have been deleted\", zk.exists(\"/foo\", false));\n\n        createContainer = Op.create(\"/foo\", new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.CONTAINER);\n        createChild = Op.create(\"/foo/bar\", new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE, CreateMode.PERSISTENT);\n        Op deleteChild = Op.delete(\"/foo/bar\", -1);\n        zk.multi(Arrays.asList(createContainer, createChild, deleteChild));\n\n        containerManager.checkContainers();\n\n        assertTrue(completedContainerDeletions.tryAcquire(1, TimeUnit.SECONDS));\n        assertNull(\"Container should have been deleted\", zk.exists(\"/foo\", false));\n    }\n","realPath":"zookeeper-server/src/test/java/org/apache/zookeeper/server/CreateContainerTest.java","repoName":"zookeeper","snippetEndLine":0,"snippetStartLine":0,"startLine":139,"status":"M"}],"commitId":"c42c8c94085ed1d94a22158fbdfe2945118a82bc","commitMessage":"@@@ZOOKEEPER-3872: Upgrade jUnit in ZooKeeper-server\n\nSub-task of ZOOKEEPER-3732.  updating jUnit to 5.6.2 in zookeeper-server sub-component.\n\nChange-Id: I1fc2a7f860eae0f1d285cb278f6eca7a3b947695\n\nAuthor: Tamas Penzes <tamaas@cloudera.com>\n\nReviewers: Mate Szalay-Beko <symat@apache.org>.  Norbert Kalmar <nkalmar@apache.org>\n\nCloses #1417 from tamaashu/ZOOKEEPER-3872\n","date":"2020-08-04 21:01:52","modifiedFileCount":"303","status":"M","submitter":"Tamas Penzes"}]
