[{"authorTime":"2011-04-01 08:34:45","codes":[{"authorDate":"2008-11-07 08:20:06","commitOrder":5,"curCode":"    public Principal authenticate(String username, String credentials) {\n\n        DirContext context = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            context = open();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            } catch (NullPointerException e) {\n                \r\n\r\n\n                \r\n                containerLog.warn(sm.getString(\"jndiRealm.exception\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            } catch (CommunicationException e) {\n\n                \r\n                containerLog.warn(sm.getString(\"jndiRealm.exception\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            } catch (ServiceUnavailableException e) {\n\n                \r\n                containerLog.warn(sm.getString(\"jndiRealm.exception\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            }\n\n\n            \r\n            release(context);\n\n            \r\n            return (principal);\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (context != null)\n                close(context);\n\n            \r\n            if (containerLog.isDebugEnabled())\n                containerLog.debug(\"Returning null principal.\");\n            return (null);\n\n        }\n\n    }\n","date":"2008-11-07 08:20:06","endLine":983,"groupId":"7631","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"authenticate","params":"(Stringusername@Stringcredentials)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/f9/3a1b39c9e57f505d17894bbbfb8e984473374f.src","preCode":"    public Principal authenticate(String username, String credentials) {\n\n        DirContext context = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            context = open();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            } catch (NullPointerException e) {\n                \r\n\r\n\n                \r\n                containerLog.warn(sm.getString(\"jndiRealm.exception\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            } catch (CommunicationException e) {\n\n                \r\n                containerLog.warn(sm.getString(\"jndiRealm.exception\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            } catch (ServiceUnavailableException e) {\n\n                \r\n                containerLog.warn(sm.getString(\"jndiRealm.exception\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            }\n\n\n            \r\n            release(context);\n\n            \r\n            return (principal);\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (context != null)\n                close(context);\n\n            \r\n            if (containerLog.isDebugEnabled())\n                containerLog.debug(\"Returning null principal.\");\n            return (null);\n\n        }\n\n    }\n","realPath":"java/org/apache/catalina/realm/JNDIRealm.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":894,"status":"NB"},{"authorDate":"2011-04-01 08:34:45","commitOrder":5,"curCode":"    protected Principal getPrincipal(String username,\n            GSSCredential gssCredential) {\n\n        DirContext context = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            context = open();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            } catch (CommunicationException e) {\n\n                \r\n                containerLog.warn(sm.getString(\"jndiRealm.exception\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            } catch (ServiceUnavailableException e) {\n\n                \r\n                containerLog.warn(sm.getString(\"jndiRealm.exception\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            }\n\n\n            \r\n            release(context);\n\n            \r\n            return (principal);\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (context != null)\n                close(context);\n\n            \r\n            return (null);\n\n        }\n\n\n    }\n","date":"2011-04-01 08:34:45","endLine":2032,"groupId":"7631","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"getPrincipal","params":"(Stringusername@GSSCredentialgssCredential)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/a6/5802af40412488cc820ed83b58c662f436574f.src","preCode":"    protected Principal getPrincipal(String username,\n            GSSCredential gssCredential) {\n\n        DirContext context = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            context = open();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            } catch (CommunicationException e) {\n\n                \r\n                containerLog.warn(sm.getString(\"jndiRealm.exception\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            } catch (ServiceUnavailableException e) {\n\n                \r\n                containerLog.warn(sm.getString(\"jndiRealm.exception\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            }\n\n\n            \r\n            release(context);\n\n            \r\n            return (principal);\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (context != null)\n                close(context);\n\n            \r\n            return (null);\n\n        }\n\n\n    }\n","realPath":"java/org/apache/catalina/realm/JNDIRealm.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":1960,"status":"B"}],"commitId":"b9c7f748872be38b27324fc5e676d67a9a9651c0","commitMessage":"@@@SPNEGP part 3 - the final part for 7.0.12\nIntegrate with JNDI realm so delegated credentials are used by default.\n\ngit-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1087524 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2011-04-01 08:34:45","modifiedFileCount":"3","status":"M","submitter":"Mark Emlyn David Thomas"},{"authorTime":"2013-08-28 22:02:50","codes":[{"authorDate":"2013-08-28 22:02:50","commitOrder":6,"curCode":"    public Principal authenticate(String username, String credentials) {\n\n        DirContext context = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            context = open();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            } catch (NullPointerException e) {\n                \r\n\r\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            } catch (CommunicationException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            } catch (ServiceUnavailableException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            }\n\n\n            \r\n            release(context);\n\n            \r\n            return (principal);\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (context != null)\n                close(context);\n\n            \r\n            if (containerLog.isDebugEnabled())\n                containerLog.debug(\"Returning null principal.\");\n            return (null);\n\n        }\n\n    }\n","date":"2013-08-28 22:02:50","endLine":1098,"groupId":"9690","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"authenticate","params":"(Stringusername@Stringcredentials)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/d5/5f174af55e91dd7ea9d7251e983d02f8b5a3a1.src","preCode":"    public Principal authenticate(String username, String credentials) {\n\n        DirContext context = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            context = open();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            } catch (NullPointerException e) {\n                \r\n\r\n\n                \r\n                containerLog.warn(sm.getString(\"jndiRealm.exception\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            } catch (CommunicationException e) {\n\n                \r\n                containerLog.warn(sm.getString(\"jndiRealm.exception\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            } catch (ServiceUnavailableException e) {\n\n                \r\n                containerLog.warn(sm.getString(\"jndiRealm.exception\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            }\n\n\n            \r\n            release(context);\n\n            \r\n            return (principal);\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (context != null)\n                close(context);\n\n            \r\n            if (containerLog.isDebugEnabled())\n                containerLog.debug(\"Returning null principal.\");\n            return (null);\n\n        }\n\n    }\n","realPath":"java/org/apache/catalina/realm/JNDIRealm.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":1009,"status":"M"},{"authorDate":"2013-08-28 22:02:50","commitOrder":6,"curCode":"    protected Principal getPrincipal(String username,\n            GSSCredential gssCredential) {\n\n        DirContext context = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            context = open();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            } catch (CommunicationException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            } catch (ServiceUnavailableException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            }\n\n\n            \r\n            release(context);\n\n            \r\n            return (principal);\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (context != null)\n                close(context);\n\n            \r\n            return (null);\n\n        }\n\n\n    }\n","date":"2013-08-28 22:02:50","endLine":2041,"groupId":"3611","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"getPrincipal","params":"(Stringusername@GSSCredentialgssCredential)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/d5/5f174af55e91dd7ea9d7251e983d02f8b5a3a1.src","preCode":"    protected Principal getPrincipal(String username,\n            GSSCredential gssCredential) {\n\n        DirContext context = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            context = open();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            } catch (CommunicationException e) {\n\n                \r\n                containerLog.warn(sm.getString(\"jndiRealm.exception\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            } catch (ServiceUnavailableException e) {\n\n                \r\n                containerLog.warn(sm.getString(\"jndiRealm.exception\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            }\n\n\n            \r\n            release(context);\n\n            \r\n            return (principal);\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (context != null)\n                close(context);\n\n            \r\n            return (null);\n\n        }\n\n\n    }\n","realPath":"java/org/apache/catalina/realm/JNDIRealm.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":1969,"status":"M"}],"commitId":"7e74aeef6bd3bcf5f5b84d550dd506b871a81d76","commitMessage":"@@@Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=55494\nReduce log level of exception messages that are logged for re-tries. Make clear in the message that a retry is taking place.\n\ngit-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1518210 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2013-08-28 22:02:50","modifiedFileCount":"1","status":"M","submitter":"Mark Emlyn David Thomas"},{"authorTime":"2016-03-06 04:50:52","codes":[{"authorDate":"2016-03-06 04:50:52","commitOrder":7,"curCode":"    public Principal authenticate(String username, String credentials) {\n\n        DirContext context = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            context = open();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            } catch (NullPointerException e) {\n                \r\n\r\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            } catch (CommunicationException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            } catch (ServiceUnavailableException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            }\n\n\n            \r\n            release(context);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (context != null)\n                close(context);\n\n            \r\n            if (containerLog.isDebugEnabled())\n                containerLog.debug(\"Returning null principal.\");\n            return null;\n\n        }\n\n    }\n","date":"2016-03-06 04:50:52","endLine":1341,"groupId":"9690","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"authenticate","params":"(Stringusername@Stringcredentials)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/81/d9f5cd4af7134fbde49d3d3d6ac8e8fc51ee9f.src","preCode":"    public Principal authenticate(String username, String credentials) {\n\n        DirContext context = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            context = open();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            } catch (NullPointerException e) {\n                \r\n\r\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            } catch (CommunicationException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            } catch (ServiceUnavailableException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            }\n\n\n            \r\n            release(context);\n\n            \r\n            return (principal);\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (context != null)\n                close(context);\n\n            \r\n            if (containerLog.isDebugEnabled())\n                containerLog.debug(\"Returning null principal.\");\n            return (null);\n\n        }\n\n    }\n","realPath":"java/org/apache/catalina/realm/JNDIRealm.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":1252,"status":"M"},{"authorDate":"2016-03-06 04:50:52","commitOrder":7,"curCode":"    protected Principal getPrincipal(String username,\n            GSSCredential gssCredential) {\n\n        DirContext context = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            context = open();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            } catch (CommunicationException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            } catch (ServiceUnavailableException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            }\n\n\n            \r\n            release(context);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (context != null)\n                close(context);\n\n            \r\n            return null;\n\n        }\n\n\n    }\n","date":"2016-03-06 04:50:52","endLine":2292,"groupId":"3611","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"getPrincipal","params":"(Stringusername@GSSCredentialgssCredential)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/81/d9f5cd4af7134fbde49d3d3d6ac8e8fc51ee9f.src","preCode":"    protected Principal getPrincipal(String username,\n            GSSCredential gssCredential) {\n\n        DirContext context = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            context = open();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            } catch (CommunicationException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            } catch (ServiceUnavailableException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            }\n\n\n            \r\n            release(context);\n\n            \r\n            return (principal);\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (context != null)\n                close(context);\n\n            \r\n            return (null);\n\n        }\n\n\n    }\n","realPath":"java/org/apache/catalina/realm/JNDIRealm.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":2220,"status":"M"}],"commitId":"dd929df503eaeba593154ea29ffa5cd08c55e7cf","commitMessage":"@@@Remove parentheses.  since return is not a function.\n\ngit-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1733763 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2016-03-06 04:50:52","modifiedFileCount":"1","status":"M","submitter":"Felix Schumacher"},{"authorTime":"2016-03-10 03:48:17","codes":[{"authorDate":"2016-03-10 03:48:17","commitOrder":8,"curCode":"    public Principal authenticate(String username, String credentials) {\n\n        DirContext context = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            context = open();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            } catch (NullPointerException | CommunicationException\n                    | ServiceUnavailableException e) {\n                \r\n\r\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = authenticate(context, username, credentials);\n            }\n\n\n            \r\n            release(context);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (context != null)\n                close(context);\n\n            \r\n            if (containerLog.isDebugEnabled())\n                containerLog.debug(\"Returning null principal.\");\n            return null;\n\n        }\n\n    }\n","date":"2016-03-10 03:48:17","endLine":1311,"groupId":"9690","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"authenticate","params":"(Stringusername@Stringcredentials)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/54/fa4a1e81eb0a6aedf637c7e4fe2469c49a54cd.src","preCode":"    public Principal authenticate(String username, String credentials) {\n\n        DirContext context = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            context = open();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            } catch (NullPointerException e) {\n                \r\n\r\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            } catch (CommunicationException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            } catch (ServiceUnavailableException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            }\n\n\n            \r\n            release(context);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (context != null)\n                close(context);\n\n            \r\n            if (containerLog.isDebugEnabled())\n                containerLog.debug(\"Returning null principal.\");\n            return null;\n\n        }\n\n    }\n","realPath":"java/org/apache/catalina/realm/JNDIRealm.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":1252,"status":"M"},{"authorDate":"2016-03-10 03:48:17","commitOrder":8,"curCode":"    protected Principal getPrincipal(String username,\n            GSSCredential gssCredential) {\n\n        DirContext context = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            context = open();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            } catch (CommunicationException | ServiceUnavailableException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            }\n\n\n            \r\n            release(context);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (context != null)\n                close(context);\n\n            \r\n            return null;\n\n        }\n\n\n    }\n","date":"2016-03-10 03:48:17","endLine":2258,"groupId":"3611","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"getPrincipal","params":"(Stringusername@GSSCredentialgssCredential)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/54/fa4a1e81eb0a6aedf637c7e4fe2469c49a54cd.src","preCode":"    protected Principal getPrincipal(String username,\n            GSSCredential gssCredential) {\n\n        DirContext context = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            context = open();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            } catch (CommunicationException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            } catch (ServiceUnavailableException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            }\n\n\n            \r\n            release(context);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (context != null)\n                close(context);\n\n            \r\n            return null;\n\n        }\n\n\n    }\n","realPath":"java/org/apache/catalina/realm/JNDIRealm.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":2201,"status":"M"}],"commitId":"f0d5bd2db94e7e1ac4e365d3db0e7d54d8ec5e23","commitMessage":"@@@Use multicatch to reduce code duplication.\n\ngit-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1734301 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2016-03-10 03:48:17","modifiedFileCount":"1","status":"M","submitter":"Felix Schumacher"},{"authorTime":"2016-03-10 03:48:17","codes":[{"authorDate":"2017-07-24 22:49:59","commitOrder":9,"curCode":"    public Principal authenticate(String username, String credentials) {\n\n        DirContext context = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            context = open();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            } catch (NullPointerException | NamingException e) {\n                \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n                \r\n\r\n\r\n\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = authenticate(context, username, credentials);\n            }\n\n\n            \r\n            release(context);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (context != null)\n                close(context);\n\n            \r\n            if (containerLog.isDebugEnabled())\n                containerLog.debug(\"Returning null principal.\");\n            return null;\n\n        }\n\n    }\n","date":"2017-07-24 22:49:59","endLine":1342,"groupId":"9690","id":9,"instanceNumber":1,"isCurCommit":0,"methodName":"authenticate","params":"(Stringusername@Stringcredentials)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/33/41bec4c40654c39fd881e92bd1bea4567c438c.src","preCode":"    public Principal authenticate(String username, String credentials) {\n\n        DirContext context = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            context = open();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            } catch (NullPointerException | CommunicationException\n                    | ServiceUnavailableException e) {\n                \r\n\r\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = authenticate(context, username, credentials);\n            }\n\n\n            \r\n            release(context);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (context != null)\n                close(context);\n\n            \r\n            if (containerLog.isDebugEnabled())\n                containerLog.debug(\"Returning null principal.\");\n            return null;\n\n        }\n\n    }\n","realPath":"java/org/apache/catalina/realm/JNDIRealm.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":1272,"status":"M"},{"authorDate":"2016-03-10 03:48:17","commitOrder":9,"curCode":"    protected Principal getPrincipal(String username,\n            GSSCredential gssCredential) {\n\n        DirContext context = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            context = open();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            } catch (CommunicationException | ServiceUnavailableException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            }\n\n\n            \r\n            release(context);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (context != null)\n                close(context);\n\n            \r\n            return null;\n\n        }\n\n\n    }\n","date":"2016-03-10 03:48:17","endLine":2258,"groupId":"3611","id":10,"instanceNumber":2,"isCurCommit":0,"methodName":"getPrincipal","params":"(Stringusername@GSSCredentialgssCredential)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/54/fa4a1e81eb0a6aedf637c7e4fe2469c49a54cd.src","preCode":"    protected Principal getPrincipal(String username,\n            GSSCredential gssCredential) {\n\n        DirContext context = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            context = open();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            } catch (CommunicationException | ServiceUnavailableException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            }\n\n\n            \r\n            release(context);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (context != null)\n                close(context);\n\n            \r\n            return null;\n\n        }\n\n\n    }\n","realPath":"java/org/apache/catalina/realm/JNDIRealm.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":2201,"status":"N"}],"commitId":"26a5eab3e1bfa909ef7265ffcb50fd165c236790","commitMessage":"@@@Fix https://bz.apache.org/bugzilla/show_bug.cgi?id=61313\nMake the read timeout configurable in the JNDIRealm and ensure that a read timeout will result in an attempt to fail over to the alternateURL.\nBased on patches by Peter Maloney and Felix Schumacher.\n\ngit-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1802820 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2017-07-24 22:49:59","modifiedFileCount":"1","status":"M","submitter":"Mark Thomas"},{"authorTime":"2020-01-31 00:22:51","codes":[{"authorDate":"2020-01-31 00:22:51","commitOrder":10,"curCode":"    public Principal authenticate(String username, String credentials) {\n\n        JNDIConnection connection = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            connection = get();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = authenticate(connection, username, credentials);\n\n            } catch (NullPointerException | NamingException e) {\n                \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n                \r\n\r\n\r\n\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                close(connection);\n\n                \r\n                connection = get();\n\n                \r\n                principal = authenticate(connection, username, credentials);\n            }\n\n\n            \r\n            release(connection);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            close(connection);\n\n            \r\n            if (containerLog.isDebugEnabled())\n                containerLog.debug(\"Returning null principal.\");\n            return null;\n\n        }\n\n    }\n","date":"2020-01-31 00:22:51","endLine":1334,"groupId":"2101","id":11,"instanceNumber":1,"isCurCommit":0,"methodName":"authenticate","params":"(Stringusername@Stringcredentials)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/cd/f89246cf9c1a649c769899207674c15ed14c1d.src","preCode":"    public Principal authenticate(String username, String credentials) {\n\n        DirContext context = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            context = open();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = authenticate(context, username, credentials);\n\n            } catch (NullPointerException | NamingException e) {\n                \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n                \r\n\r\n\r\n\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = authenticate(context, username, credentials);\n            }\n\n\n            \r\n            release(context);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (context != null)\n                close(context);\n\n            \r\n            if (containerLog.isDebugEnabled())\n                containerLog.debug(\"Returning null principal.\");\n            return null;\n\n        }\n\n    }\n","realPath":"java/org/apache/catalina/realm/JNDIRealm.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":1266,"status":"M"},{"authorDate":"2020-01-31 00:22:51","commitOrder":10,"curCode":"    protected Principal getPrincipal(String username,\n            GSSCredential gssCredential) {\n\n        JNDIConnection connection = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            connection = get();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = getPrincipal(connection, username, gssCredential);\n\n            } catch (CommunicationException | ServiceUnavailableException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                close(connection);\n\n                \r\n                connection = get();\n\n                \r\n                principal = getPrincipal(connection, username, gssCredential);\n\n            }\n\n\n            \r\n            release(connection);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            close(connection);\n\n            \r\n            return null;\n\n        }\n\n\n    }\n","date":"2020-01-31 00:22:51","endLine":2309,"groupId":"2111","id":12,"instanceNumber":2,"isCurCommit":0,"methodName":"getPrincipal","params":"(Stringusername@GSSCredentialgssCredential)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/cd/f89246cf9c1a649c769899207674c15ed14c1d.src","preCode":"    protected Principal getPrincipal(String username,\n            GSSCredential gssCredential) {\n\n        DirContext context = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            context = open();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            } catch (CommunicationException | ServiceUnavailableException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                if (context != null)\n                    close(context);\n\n                \r\n                context = open();\n\n                \r\n                principal = getPrincipal(context, username, gssCredential);\n\n            }\n\n\n            \r\n            release(context);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (context != null)\n                close(context);\n\n            \r\n            return null;\n\n        }\n\n\n    }\n","realPath":"java/org/apache/catalina/realm/JNDIRealm.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":2254,"status":"M"}],"commitId":"2cf770eb2671cef2a659d960074302e2574f56b3","commitMessage":"@@@Add connection pool to JNDI realm\n\nThis implements a TODO from the class javadoc header.\nAs described in the javadoc.  the idea is to use a pool to avoid blocking\non a single connection.  which could possibly become a bottleneck in some\ncases. The message formats need to be kept along with the connection\nsince they are not thread safe.\nPreserve the default behavior: sync without pooling (using a Lock object\nwhich is more flexible).\nI may backport this since this is limited to the JNDI realm.  but only\nonce it is confirmed to be regression free. Tested with ApacheDS but my\nLDAP skills are very limited.","date":"2020-01-31 00:22:51","modifiedFileCount":"2","status":"M","submitter":"remm"},{"authorTime":"2020-03-06 20:17:03","codes":[{"authorDate":"2020-03-06 20:17:03","commitOrder":11,"curCode":"    public Principal authenticate(String username, String credentials) {\n\n        JNDIConnection connection = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            connection = get();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = authenticate(connection, username, credentials);\n\n            } catch (NullPointerException | NamingException e) {\n                \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n                \r\n\r\n\r\n\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                close(connection);\n\n                \r\n                connection = get();\n\n                \r\n                principal = authenticate(connection, username, credentials);\n            }\n\n\n            \r\n            release(connection);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (containerLog.isDebugEnabled())\n                containerLog.debug(\"Returning null principal.\");\n            return null;\n\n        }\n\n    }\n","date":"2020-03-06 20:17:03","endLine":1331,"groupId":"2101","id":13,"instanceNumber":1,"isCurCommit":0,"methodName":"authenticate","params":"(Stringusername@Stringcredentials)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/f3/b4fd057d6cb626d83a6e8832163f462ef6604e.src","preCode":"    public Principal authenticate(String username, String credentials) {\n\n        JNDIConnection connection = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            connection = get();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = authenticate(connection, username, credentials);\n\n            } catch (NullPointerException | NamingException e) {\n                \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n                \r\n\r\n\r\n\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                close(connection);\n\n                \r\n                connection = get();\n\n                \r\n                principal = authenticate(connection, username, credentials);\n            }\n\n\n            \r\n            release(connection);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            close(connection);\n\n            \r\n            if (containerLog.isDebugEnabled())\n                containerLog.debug(\"Returning null principal.\");\n            return null;\n\n        }\n\n    }\n","realPath":"java/org/apache/catalina/realm/JNDIRealm.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":1266,"status":"M"},{"authorDate":"2020-03-06 20:17:03","commitOrder":11,"curCode":"    protected Principal getPrincipal(String username,\n            GSSCredential gssCredential) {\n\n        JNDIConnection connection = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            connection = get();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = getPrincipal(connection, username, gssCredential);\n\n            } catch (CommunicationException | ServiceUnavailableException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                close(connection);\n\n                \r\n                connection = get();\n\n                \r\n                principal = getPrincipal(connection, username, gssCredential);\n\n            }\n\n\n            \r\n            release(connection);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            return null;\n\n        }\n\n\n    }\n","date":"2020-03-06 20:17:03","endLine":2302,"groupId":"2111","id":14,"instanceNumber":2,"isCurCommit":0,"methodName":"getPrincipal","params":"(Stringusername@GSSCredentialgssCredential)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/f3/b4fd057d6cb626d83a6e8832163f462ef6604e.src","preCode":"    protected Principal getPrincipal(String username,\n            GSSCredential gssCredential) {\n\n        JNDIConnection connection = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            connection = get();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = getPrincipal(connection, username, gssCredential);\n\n            } catch (CommunicationException | ServiceUnavailableException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                close(connection);\n\n                \r\n                connection = get();\n\n                \r\n                principal = getPrincipal(connection, username, gssCredential);\n\n            }\n\n\n            \r\n            release(connection);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            close(connection);\n\n            \r\n            return null;\n\n        }\n\n\n    }\n","realPath":"java/org/apache/catalina/realm/JNDIRealm.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":2250,"status":"M"}],"commitId":"8debf09c6ff03634070c89e66d5bd60971e843aa","commitMessage":"@@@Remove unnecessary code and avoid potential NPEs. Thanks to SpotBugs.","date":"2020-03-06 20:17:03","modifiedFileCount":"1","status":"M","submitter":"Mark Thomas"},{"authorTime":"2020-03-06 20:17:03","codes":[{"authorDate":"2020-10-13 20:19:54","commitOrder":12,"curCode":"    public Principal authenticate(String username, String credentials) {\n\n        JNDIConnection connection = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            connection = get();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = authenticate(connection, username, credentials);\n\n            } catch (NullPointerException | NamingException e) {\n                \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n                \r\n\r\n\r\n\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                close(connection);\n\n                \r\n                connection = get(true);\n\n                \r\n                principal = authenticate(connection, username, credentials);\n            }\n\n\n            \r\n            release(connection);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (containerLog.isDebugEnabled())\n                containerLog.debug(\"Returning null principal.\");\n            return null;\n\n        }\n\n    }\n","date":"2020-10-13 20:19:54","endLine":1331,"groupId":"0","id":15,"instanceNumber":1,"isCurCommit":0,"methodName":"authenticate","params":"(Stringusername@Stringcredentials)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/a6/012bdf126f985f6a6fb2d30ec449176e5178d1.src","preCode":"    public Principal authenticate(String username, String credentials) {\n\n        JNDIConnection connection = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            connection = get();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = authenticate(connection, username, credentials);\n\n            } catch (NullPointerException | NamingException e) {\n                \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n                \r\n\r\n\r\n\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                close(connection);\n\n                \r\n                connection = get();\n\n                \r\n                principal = authenticate(connection, username, credentials);\n            }\n\n\n            \r\n            release(connection);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (containerLog.isDebugEnabled())\n                containerLog.debug(\"Returning null principal.\");\n            return null;\n\n        }\n\n    }\n","realPath":"java/org/apache/catalina/realm/JNDIRealm.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":1266,"status":"M"},{"authorDate":"2020-03-06 20:17:03","commitOrder":12,"curCode":"    protected Principal getPrincipal(String username,\n            GSSCredential gssCredential) {\n\n        JNDIConnection connection = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            connection = get();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = getPrincipal(connection, username, gssCredential);\n\n            } catch (CommunicationException | ServiceUnavailableException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                close(connection);\n\n                \r\n                connection = get();\n\n                \r\n                principal = getPrincipal(connection, username, gssCredential);\n\n            }\n\n\n            \r\n            release(connection);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            return null;\n\n        }\n\n\n    }\n","date":"2020-03-06 20:17:03","endLine":2302,"groupId":"2111","id":16,"instanceNumber":2,"isCurCommit":0,"methodName":"getPrincipal","params":"(Stringusername@GSSCredentialgssCredential)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/f3/b4fd057d6cb626d83a6e8832163f462ef6604e.src","preCode":"    protected Principal getPrincipal(String username,\n            GSSCredential gssCredential) {\n\n        JNDIConnection connection = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            connection = get();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = getPrincipal(connection, username, gssCredential);\n\n            } catch (CommunicationException | ServiceUnavailableException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                close(connection);\n\n                \r\n                connection = get();\n\n                \r\n                principal = getPrincipal(connection, username, gssCredential);\n\n            }\n\n\n            \r\n            release(connection);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            return null;\n\n        }\n\n\n    }\n","realPath":"java/org/apache/catalina/realm/JNDIRealm.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":2250,"status":"N"}],"commitId":"35b2d79ad26535deedcc0c6bea2a057138e1bd30","commitMessage":"@@@Always retry on a new connection.  even when pooling\n\nThis keeps the same very simple design as for the single connection\nscenario.  for now.","date":"2020-10-13 20:19:54","modifiedFileCount":"1","status":"M","submitter":"remm"},{"authorTime":"2020-10-20 02:30:54","codes":[{"authorDate":"2020-10-20 02:30:54","commitOrder":13,"curCode":"    public Principal authenticate(String username, String credentials) {\n\n        JNDIConnection connection = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            connection = get();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = authenticate(connection, username, credentials);\n\n            } catch (NullPointerException | NamingException e) {\n                \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n                \r\n\r\n\r\n\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                close(connection);\n                closePooledConnections();\n\n                \r\n                connection = get();\n\n                \r\n                principal = authenticate(connection, username, credentials);\n            }\n\n\n            \r\n            release(connection);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (containerLog.isDebugEnabled())\n                containerLog.debug(\"Returning null principal.\");\n            return null;\n\n        }\n\n    }\n","date":"2020-10-20 02:30:54","endLine":1332,"groupId":"280","id":17,"instanceNumber":1,"isCurCommit":0,"methodName":"authenticate","params":"(Stringusername@Stringcredentials)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/21/e9f17f7dc87548fb29da79ef190da3723df7aa.src","preCode":"    public Principal authenticate(String username, String credentials) {\n\n        JNDIConnection connection = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            connection = get();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = authenticate(connection, username, credentials);\n\n            } catch (NullPointerException | NamingException e) {\n                \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n                \r\n\r\n\r\n\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                close(connection);\n\n                \r\n                connection = get(true);\n\n                \r\n                principal = authenticate(connection, username, credentials);\n            }\n\n\n            \r\n            release(connection);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (containerLog.isDebugEnabled())\n                containerLog.debug(\"Returning null principal.\");\n            return null;\n\n        }\n\n    }\n","realPath":"java/org/apache/catalina/realm/JNDIRealm.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":1266,"status":"M"},{"authorDate":"2020-10-20 02:30:54","commitOrder":13,"curCode":"    protected Principal getPrincipal(String username,\n            GSSCredential gssCredential) {\n\n        JNDIConnection connection = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            connection = get();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = getPrincipal(connection, username, gssCredential);\n\n            } catch (CommunicationException | ServiceUnavailableException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                close(connection);\n                closePooledConnections();\n\n                \r\n                connection = get();\n\n                \r\n                principal = getPrincipal(connection, username, gssCredential);\n\n            }\n\n\n            \r\n            release(connection);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            return null;\n\n        }\n\n\n    }\n","date":"2020-10-20 02:30:54","endLine":2346,"groupId":"4536","id":18,"instanceNumber":2,"isCurCommit":0,"methodName":"getPrincipal","params":"(Stringusername@GSSCredentialgssCredential)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/21/e9f17f7dc87548fb29da79ef190da3723df7aa.src","preCode":"    protected Principal getPrincipal(String username,\n            GSSCredential gssCredential) {\n\n        JNDIConnection connection = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            connection = get();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = getPrincipal(connection, username, gssCredential);\n\n            } catch (CommunicationException | ServiceUnavailableException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                close(connection);\n\n                \r\n                connection = get();\n\n                \r\n                principal = getPrincipal(connection, username, gssCredential);\n\n            }\n\n\n            \r\n            release(connection);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            return null;\n\n        }\n\n\n    }\n","realPath":"java/org/apache/catalina/realm/JNDIRealm.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":2293,"status":"M"}],"commitId":"f48b7187951f998a48dc07121fe8593a2015b99d","commitMessage":"@@@Drop pooled connections on error\n\nThis avoids piling up on stale connections.\nAlso getPassword will use the retry logic. It is only called when using\ndigest it seems.  so it's not used often.","date":"2020-10-20 02:30:54","modifiedFileCount":"1","status":"M","submitter":"remm"},{"authorTime":"2020-10-20 02:30:54","codes":[{"authorDate":"2020-12-29 16:44:41","commitOrder":14,"curCode":"    public Principal authenticate(String username, String credentials) {\n\n        JNDIConnection connection = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            connection = get();\n\n            try {\n\n                \r\n                \r\n\n                \r\n                principal = authenticate(connection, username, credentials);\n\n            } catch (NullPointerException | NamingException e) {\n                \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n                \r\n\r\n\r\n\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                close(connection);\n                closePooledConnections();\n\n                \r\n                connection = get();\n\n                \r\n                principal = authenticate(connection, username, credentials);\n            }\n\n\n            \r\n            release(connection);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            close(connection);\n            closePooledConnections();\n\n            \r\n            if (containerLog.isDebugEnabled())\n                containerLog.debug(\"Returning null principal.\");\n            return null;\n\n        }\n\n    }\n","date":"2020-12-29 16:44:41","endLine":1365,"groupId":"280","id":19,"instanceNumber":1,"isCurCommit":0,"methodName":"authenticate","params":"(Stringusername@Stringcredentials)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/7e/09d5c74d9edb1cb9d0124f319d5ac5e7352415.src","preCode":"    public Principal authenticate(String username, String credentials) {\n\n        JNDIConnection connection = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            connection = get();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = authenticate(connection, username, credentials);\n\n            } catch (NullPointerException | NamingException e) {\n                \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n                \r\n\r\n\r\n\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                close(connection);\n                closePooledConnections();\n\n                \r\n                connection = get();\n\n                \r\n                principal = authenticate(connection, username, credentials);\n            }\n\n\n            \r\n            release(connection);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            if (containerLog.isDebugEnabled())\n                containerLog.debug(\"Returning null principal.\");\n            return null;\n\n        }\n\n    }\n","realPath":"java/org/apache/catalina/realm/JNDIRealm.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":1294,"status":"M"},{"authorDate":"2020-10-20 02:30:54","commitOrder":14,"curCode":"    protected Principal getPrincipal(String username,\n            GSSCredential gssCredential) {\n\n        JNDIConnection connection = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            connection = get();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = getPrincipal(connection, username, gssCredential);\n\n            } catch (CommunicationException | ServiceUnavailableException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                close(connection);\n                closePooledConnections();\n\n                \r\n                connection = get();\n\n                \r\n                principal = getPrincipal(connection, username, gssCredential);\n\n            }\n\n\n            \r\n            release(connection);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            return null;\n\n        }\n\n\n    }\n","date":"2020-10-20 02:30:54","endLine":2346,"groupId":"4536","id":20,"instanceNumber":2,"isCurCommit":0,"methodName":"getPrincipal","params":"(Stringusername@GSSCredentialgssCredential)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/21/e9f17f7dc87548fb29da79ef190da3723df7aa.src","preCode":"    protected Principal getPrincipal(String username,\n            GSSCredential gssCredential) {\n\n        JNDIConnection connection = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            connection = get();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = getPrincipal(connection, username, gssCredential);\n\n            } catch (CommunicationException | ServiceUnavailableException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                close(connection);\n                closePooledConnections();\n\n                \r\n                connection = get();\n\n                \r\n                principal = getPrincipal(connection, username, gssCredential);\n\n            }\n\n\n            \r\n            release(connection);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            return null;\n\n        }\n\n\n    }\n","realPath":"java/org/apache/catalina/realm/JNDIRealm.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":2293,"status":"N"}],"commitId":"55f2f355c778dae68a4a154cc6eaf10e997872c9","commitMessage":"@@@65033: Fix JNDI realm error handling\n\nConnecting to a failed server when pooling was not enabled would cause\nthreads to hang in authenticate since unlocking was not done. Closing\nthe connection was correctly present in that case before the refactoring\nthat added pooling.","date":"2020-12-29 16:44:41","modifiedFileCount":"2","status":"M","submitter":"remm"},{"authorTime":"2020-10-20 02:30:54","codes":[{"authorDate":"2021-04-09 23:56:25","commitOrder":15,"curCode":"    public Principal authenticate(String username, String credentials) {\n\n        JNDIConnection connection = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            connection = get();\n\n            try {\n\n                \r\n                \r\n\n                \r\n                principal = authenticate(connection, username, credentials);\n\n            } catch (NullPointerException | NamingException e) {\n                \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n                \r\n\r\n\r\n\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                close(connection);\n                closePooledConnections();\n\n                \r\n                connection = get();\n\n                \r\n                principal = authenticate(connection, username, credentials);\n            }\n\n\n            \r\n            release(connection);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            close(connection);\n            closePooledConnections();\n\n            \r\n            if (containerLog.isDebugEnabled()) {\n                containerLog.debug(\"Returning null principal.\");\n            }\n            return null;\n        }\n    }\n","date":"2021-04-10 00:58:21","endLine":1286,"groupId":"280","id":21,"instanceNumber":1,"isCurCommit":0,"methodName":"authenticate","params":"(Stringusername@Stringcredentials)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/cd/a0603992d6214c51237243db2beef69d4cc093.src","preCode":"    public Principal authenticate(String username, String credentials) {\n\n        JNDIConnection connection = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            connection = get();\n\n            try {\n\n                \r\n                \r\n\n                \r\n                principal = authenticate(connection, username, credentials);\n\n            } catch (NullPointerException | NamingException e) {\n                \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n                \r\n\r\n\r\n\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                close(connection);\n                closePooledConnections();\n\n                \r\n                connection = get();\n\n                \r\n                principal = authenticate(connection, username, credentials);\n            }\n\n\n            \r\n            release(connection);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            close(connection);\n            closePooledConnections();\n\n            \r\n            if (containerLog.isDebugEnabled())\n                containerLog.debug(\"Returning null principal.\");\n            return null;\n\n        }\n\n    }\n","realPath":"java/org/apache/catalina/realm/JNDIRealm.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":1216,"status":"M"},{"authorDate":"2020-10-20 02:30:54","commitOrder":15,"curCode":"    protected Principal getPrincipal(String username,\n            GSSCredential gssCredential) {\n\n        JNDIConnection connection = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            connection = get();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = getPrincipal(connection, username, gssCredential);\n\n            } catch (CommunicationException | ServiceUnavailableException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                close(connection);\n                closePooledConnections();\n\n                \r\n                connection = get();\n\n                \r\n                principal = getPrincipal(connection, username, gssCredential);\n\n            }\n\n\n            \r\n            release(connection);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            return null;\n\n        }\n\n\n    }\n","date":"2020-10-20 02:30:54","endLine":2346,"groupId":"4536","id":22,"instanceNumber":2,"isCurCommit":0,"methodName":"getPrincipal","params":"(Stringusername@GSSCredentialgssCredential)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/21/e9f17f7dc87548fb29da79ef190da3723df7aa.src","preCode":"    protected Principal getPrincipal(String username,\n            GSSCredential gssCredential) {\n\n        JNDIConnection connection = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            connection = get();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = getPrincipal(connection, username, gssCredential);\n\n            } catch (CommunicationException | ServiceUnavailableException e) {\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                close(connection);\n                closePooledConnections();\n\n                \r\n                connection = get();\n\n                \r\n                principal = getPrincipal(connection, username, gssCredential);\n\n            }\n\n\n            \r\n            release(connection);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            return null;\n\n        }\n\n\n    }\n","realPath":"java/org/apache/catalina/realm/JNDIRealm.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":2293,"status":"N"}],"commitId":"ec29686465037c31a318fc9803856c2f6ac8fd8c","commitMessage":"@@@Code clean-up. No functional change.","date":"2021-04-10 00:58:21","modifiedFileCount":"1","status":"M","submitter":"Mark Thomas"},{"authorTime":"2021-06-30 20:57:40","codes":[{"authorDate":"2021-04-09 23:56:25","commitOrder":16,"curCode":"    public Principal authenticate(String username, String credentials) {\n\n        JNDIConnection connection = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            connection = get();\n\n            try {\n\n                \r\n                \r\n\n                \r\n                principal = authenticate(connection, username, credentials);\n\n            } catch (NullPointerException | NamingException e) {\n                \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n                \r\n\r\n\r\n\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                close(connection);\n                closePooledConnections();\n\n                \r\n                connection = get();\n\n                \r\n                principal = authenticate(connection, username, credentials);\n            }\n\n\n            \r\n            release(connection);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            close(connection);\n            closePooledConnections();\n\n            \r\n            if (containerLog.isDebugEnabled()) {\n                containerLog.debug(\"Returning null principal.\");\n            }\n            return null;\n        }\n    }\n","date":"2021-04-10 00:58:21","endLine":1286,"groupId":"12935","id":23,"instanceNumber":1,"isCurCommit":0,"methodName":"authenticate","params":"(Stringusername@Stringcredentials)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/cd/a0603992d6214c51237243db2beef69d4cc093.src","preCode":"    public Principal authenticate(String username, String credentials) {\n\n        JNDIConnection connection = null;\n        Principal principal = null;\n\n        try {\n\n            \r\n            connection = get();\n\n            try {\n\n                \r\n                \r\n\n                \r\n                principal = authenticate(connection, username, credentials);\n\n            } catch (NullPointerException | NamingException e) {\n                \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n                \r\n\r\n\r\n\n\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                close(connection);\n                closePooledConnections();\n\n                \r\n                connection = get();\n\n                \r\n                principal = authenticate(connection, username, credentials);\n            }\n\n\n            \r\n            release(connection);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            close(connection);\n            closePooledConnections();\n\n            \r\n            if (containerLog.isDebugEnabled()) {\n                containerLog.debug(\"Returning null principal.\");\n            }\n            return null;\n        }\n    }\n","realPath":"java/org/apache/catalina/realm/JNDIRealm.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":1216,"status":"N"},{"authorDate":"2021-06-30 20:57:40","commitOrder":16,"curCode":"    protected Principal getPrincipal(String username, GSSCredential gssCredential) {\n\n        JNDIConnection connection = null;\n        Principal principal = null;\n\n        try {\n            \r\n            connection = get();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = getPrincipal(connection, username, gssCredential);\n\n            } catch (CommunicationException | ServiceUnavailableException e) {\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                close(connection);\n                closePooledConnections();\n\n                \r\n                connection = get();\n\n                \r\n                principal = getPrincipal(connection, username, gssCredential);\n            }\n\n            \r\n            release(connection);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            close(connection);\n            closePooledConnections();\n\n            \r\n            return null;\n        }\n    }\n","date":"2021-06-30 20:57:40","endLine":2321,"groupId":"12935","id":24,"instanceNumber":2,"isCurCommit":1,"methodName":"getPrincipal","params":"(Stringusername@GSSCredentialgssCredential)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/6e/2a3053a56ef18a37492155935216dcd3f7f461.src","preCode":"    protected Principal getPrincipal(String username, GSSCredential gssCredential) {\n\n        JNDIConnection connection = null;\n        Principal principal = null;\n\n        try {\n            \r\n            connection = get();\n\n            \r\n            \r\n            try {\n\n                \r\n                principal = getPrincipal(connection, username, gssCredential);\n\n            } catch (CommunicationException | ServiceUnavailableException e) {\n                \r\n                containerLog.info(sm.getString(\"jndiRealm.exception.retry\"), e);\n\n                \r\n                close(connection);\n                closePooledConnections();\n\n                \r\n                connection = get();\n\n                \r\n                principal = getPrincipal(connection, username, gssCredential);\n            }\n\n            \r\n            release(connection);\n\n            \r\n            return principal;\n\n        } catch (NamingException e) {\n            \r\n            containerLog.error(sm.getString(\"jndiRealm.exception\"), e);\n\n            \r\n            return null;\n        }\n    }\n","realPath":"java/org/apache/catalina/realm/JNDIRealm.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":2273,"status":"M"}],"commitId":"a53320349d2510af657cf0d3581bc56173b5efc4","commitMessage":"@@@Always close the connection when an uncaught NamingException occurs\n\n65411: Avoids possible connection locking. And this is safer anyway.\nSubmitted by Ole Ostergaard.","date":"2021-06-30 20:57:40","modifiedFileCount":"1","status":"M","submitter":"remm"}]
