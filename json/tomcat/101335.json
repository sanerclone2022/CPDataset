[{"authorTime":"2010-12-10 03:49:24","codes":[{"authorDate":"2010-12-10 03:49:24","commitOrder":1,"curCode":"    public void testStartStopBindOnInit() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n        \n        int port = getPort();\n\n        tomcat.start();\n        \n        tomcat.getConnector().stop();\n        \r\n        Exception e = null;\n        ServerSocket s = null;\n        try {\n            s = new ServerSocket(port);\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            if (s != null) {\n                try {\n                    s.close();\n                } catch (Exception e2) {  }\n            }\n        }\n        assertNotNull(e);\n        tomcat.getConnector().start();\n    }\n","date":"2010-12-10 03:49:24","endLine":59,"groupId":"16385","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testStartStopBindOnInit","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/d0/9632b1e5b5cedcb345efa4cadfd9e7aa5d68fc.src","preCode":"    public void testStartStopBindOnInit() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n        \n        int port = getPort();\n\n        tomcat.start();\n        \n        tomcat.getConnector().stop();\n        \r\n        Exception e = null;\n        ServerSocket s = null;\n        try {\n            s = new ServerSocket(port);\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            if (s != null) {\n                try {\n                    s.close();\n                } catch (Exception e2) {  }\n            }\n        }\n        assertNotNull(e);\n        tomcat.getConnector().start();\n    }\n","realPath":"test/org/apache/tomcat/util/net/TestXxxEndpoint.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":33,"status":"B"},{"authorDate":"2010-12-10 03:49:24","commitOrder":1,"curCode":"    public void testStartStopBindOnStart() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        Connector c = tomcat.getConnector();\n        c.setProperty(\"bindOnInit\", \"false\");\n        \n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n        \n        int port = getPort();\n\n        tomcat.start();\n        \n        tomcat.getConnector().stop();\n        \r\n        Exception e = null;\n        ServerSocket s = null;\n        try {\n            s = new ServerSocket(port);\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            if (s != null) {\n                try {\n                    s.close();\n                } catch (Exception e2) {  }\n            }\n        }\n        assertNull(e);\n        tomcat.getConnector().start();\n    }\n","date":"2010-12-10 03:49:24","endLine":90,"groupId":"16385","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testStartStopBindOnStart","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/d0/9632b1e5b5cedcb345efa4cadfd9e7aa5d68fc.src","preCode":"    public void testStartStopBindOnStart() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        Connector c = tomcat.getConnector();\n        c.setProperty(\"bindOnInit\", \"false\");\n        \n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n        \n        int port = getPort();\n\n        tomcat.start();\n        \n        tomcat.getConnector().stop();\n        \r\n        Exception e = null;\n        ServerSocket s = null;\n        try {\n            s = new ServerSocket(port);\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            if (s != null) {\n                try {\n                    s.close();\n                } catch (Exception e2) {  }\n            }\n        }\n        assertNull(e);\n        tomcat.getConnector().start();\n    }\n","realPath":"test/org/apache/tomcat/util/net/TestXxxEndpoint.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":61,"status":"B"}],"commitId":"ecd6e2f04dd42739550fdcd84f7d75c5a258bd21","commitMessage":"@@@Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=50360\nAdd an option to control when the socket is bound\n\ngit-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1044110 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2010-12-10 03:49:24","modifiedFileCount":"5","status":"B","submitter":"Mark Emlyn David Thomas"},{"authorTime":"2011-06-12 23:47:53","codes":[{"authorDate":"2011-06-12 23:47:53","commitOrder":2,"curCode":"    public void testStartStopBindOnInit() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n        \n        int port = getPort();\n\n        tomcat.start();\n        \n        tomcat.getConnector().stop();\n        Exception e = null;\n        ServerSocket s = null;\n        long pool = 0;\n        long nativeSocket = 0;\n        boolean isApr = tomcat.getConnector().getProtocolHandlerClassName().contains(\"Apr\");\n        try {\n            \r\n            if (isApr) {\n                pool = createAprPool();\n                assertTrue(pool != 0);\n                nativeSocket = createAprSocket(port, pool);\n                assertTrue(nativeSocket != 0);\n            } else {\n                s = new ServerSocket(port);\n            }\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            try {\n                if (isApr) {\n                    destroyAprSocket(nativeSocket, pool);\n                } else if (s != null) {\n                    s.close();\n                }\n            } catch (Exception e2) {  }\n        }\n        if (e != null) {\n            log.info(\"Exception was\", e);\n        }\n        assertNotNull(e);\n        tomcat.getConnector().start();\n    }\n","date":"2011-06-12 23:47:53","endLine":156,"groupId":"16385","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testStartStopBindOnInit","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/ea/95126630c94408be35d2426be7473c031d3876.src","preCode":"    public void testStartStopBindOnInit() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n        \n        int port = getPort();\n\n        tomcat.start();\n        \n        tomcat.getConnector().stop();\n        \r\n        Exception e = null;\n        ServerSocket s = null;\n        try {\n            s = new ServerSocket(port);\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            if (s != null) {\n                try {\n                    s.close();\n                } catch (Exception e2) {  }\n            }\n        }\n        assertNotNull(e);\n        tomcat.getConnector().start();\n    }\n","realPath":"test/org/apache/tomcat/util/net/TestXxxEndpoint.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":115,"status":"M"},{"authorDate":"2011-06-12 23:47:53","commitOrder":2,"curCode":"    public void testStartStopBindOnStart() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        Connector c = tomcat.getConnector();\n        c.setProperty(\"bindOnInit\", \"false\");\n        \n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n        \n        int port = getPort();\n\n        tomcat.start();\n        \n        tomcat.getConnector().stop();\n        Exception e = null;\n        ServerSocket s = null;\n        long pool = 0;\n        long nativeSocket = 0;\n        boolean isApr = tomcat.getConnector().getProtocolHandlerClassName().contains(\"Apr\");\n        try {\n            \r\n            if (isApr) {\n                pool = createAprPool();\n                assertTrue(pool != 0);\n                nativeSocket = createAprSocket(port, pool);\n                assertTrue(nativeSocket != 0);\n            } else {\n                s = new ServerSocket(port);\n            }\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            try {\n                if (isApr) {\n                    destroyAprSocket(nativeSocket, pool);\n                } else if (s != null) {\n                    s.close();\n                }\n            } catch (Exception e2) {  }\n        }\n        assertNull(e);\n        tomcat.getConnector().start();\n    }\n","date":"2011-06-12 23:47:53","endLine":199,"groupId":"16385","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testStartStopBindOnStart","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/ea/95126630c94408be35d2426be7473c031d3876.src","preCode":"    public void testStartStopBindOnStart() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        Connector c = tomcat.getConnector();\n        c.setProperty(\"bindOnInit\", \"false\");\n        \n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n        \n        int port = getPort();\n\n        tomcat.start();\n        \n        tomcat.getConnector().stop();\n        \r\n        Exception e = null;\n        ServerSocket s = null;\n        try {\n            s = new ServerSocket(port);\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            if (s != null) {\n                try {\n                    s.close();\n                } catch (Exception e2) {  }\n            }\n        }\n        assertNull(e);\n        tomcat.getConnector().start();\n    }\n","realPath":"test/org/apache/tomcat/util/net/TestXxxEndpoint.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":158,"status":"M"}],"commitId":"5aac9b8146b7e9c99d424efb975adf65207cbb7c","commitMessage":"@@@Fix unit test for bindOnInit.\n\nTest failed when Java was binding sockets using\nIPv4 and APR using IPv6. Since the connector\nuses APR.  and the test socket Java.  both could bind\nat the same time.\n\nObserved on Solaris 10 Sparc.\n\nFixed by also uding APR to bind the test socket.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1134938 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2011-06-12 23:47:53","modifiedFileCount":"1","status":"M","submitter":"Rainer Jung"},{"authorTime":"2011-11-29 07:16:42","codes":[{"authorDate":"2011-06-12 23:47:53","commitOrder":3,"curCode":"    public void testStartStopBindOnInit() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n        \n        int port = getPort();\n\n        tomcat.start();\n        \n        tomcat.getConnector().stop();\n        Exception e = null;\n        ServerSocket s = null;\n        long pool = 0;\n        long nativeSocket = 0;\n        boolean isApr = tomcat.getConnector().getProtocolHandlerClassName().contains(\"Apr\");\n        try {\n            \r\n            if (isApr) {\n                pool = createAprPool();\n                assertTrue(pool != 0);\n                nativeSocket = createAprSocket(port, pool);\n                assertTrue(nativeSocket != 0);\n            } else {\n                s = new ServerSocket(port);\n            }\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            try {\n                if (isApr) {\n                    destroyAprSocket(nativeSocket, pool);\n                } else if (s != null) {\n                    s.close();\n                }\n            } catch (Exception e2) {  }\n        }\n        if (e != null) {\n            log.info(\"Exception was\", e);\n        }\n        assertNotNull(e);\n        tomcat.getConnector().start();\n    }\n","date":"2011-06-12 23:47:53","endLine":156,"groupId":"16385","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"testStartStopBindOnInit","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/ea/95126630c94408be35d2426be7473c031d3876.src","preCode":"    public void testStartStopBindOnInit() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n        \n        int port = getPort();\n\n        tomcat.start();\n        \n        tomcat.getConnector().stop();\n        Exception e = null;\n        ServerSocket s = null;\n        long pool = 0;\n        long nativeSocket = 0;\n        boolean isApr = tomcat.getConnector().getProtocolHandlerClassName().contains(\"Apr\");\n        try {\n            \r\n            if (isApr) {\n                pool = createAprPool();\n                assertTrue(pool != 0);\n                nativeSocket = createAprSocket(port, pool);\n                assertTrue(nativeSocket != 0);\n            } else {\n                s = new ServerSocket(port);\n            }\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            try {\n                if (isApr) {\n                    destroyAprSocket(nativeSocket, pool);\n                } else if (s != null) {\n                    s.close();\n                }\n            } catch (Exception e2) {  }\n        }\n        if (e != null) {\n            log.info(\"Exception was\", e);\n        }\n        assertNotNull(e);\n        tomcat.getConnector().start();\n    }\n","realPath":"test/org/apache/tomcat/util/net/TestXxxEndpoint.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":115,"status":"N"},{"authorDate":"2011-11-29 07:16:42","commitOrder":3,"curCode":"    public void testStartStopBindOnStart() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        Connector c = tomcat.getConnector();\n        c.setProperty(\"bindOnInit\", \"false\");\n\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n\n\n        tomcat.start();\n        int port = getPort();\n\n        tomcat.getConnector().stop();\n        Exception e = null;\n        ServerSocket s = null;\n        long pool = 0;\n        long nativeSocket = 0;\n        boolean isApr = tomcat.getConnector().getProtocolHandlerClassName().contains(\"Apr\");\n        try {\n            \r\n            if (isApr) {\n                pool = createAprPool();\n                assertTrue(pool != 0);\n                nativeSocket = createAprSocket(port, pool);\n                assertTrue(nativeSocket != 0);\n            } else {\n                s = new ServerSocket(port);\n            }\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            try {\n                if (isApr) {\n                    destroyAprSocket(nativeSocket, pool);\n                } else if (s != null) {\n                    s.close();\n                }\n            } catch (Exception e2) {  }\n        }\n        assertNull(e);\n        tomcat.getConnector().start();\n    }\n","date":"2011-11-29 07:16:42","endLine":201,"groupId":"16385","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"testStartStopBindOnStart","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/41/d39674e31fae0991a8c588930dd556790cec3a.src","preCode":"    public void testStartStopBindOnStart() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        Connector c = tomcat.getConnector();\n        c.setProperty(\"bindOnInit\", \"false\");\n\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n\n        int port = getPort();\n\n        tomcat.start();\n\n        tomcat.getConnector().stop();\n        Exception e = null;\n        ServerSocket s = null;\n        long pool = 0;\n        long nativeSocket = 0;\n        boolean isApr = tomcat.getConnector().getProtocolHandlerClassName().contains(\"Apr\");\n        try {\n            \r\n            if (isApr) {\n                pool = createAprPool();\n                assertTrue(pool != 0);\n                nativeSocket = createAprSocket(port, pool);\n                assertTrue(nativeSocket != 0);\n            } else {\n                s = new ServerSocket(port);\n            }\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            try {\n                if (isApr) {\n                    destroyAprSocket(nativeSocket, pool);\n                } else if (s != null) {\n                    s.close();\n                }\n            } catch (Exception e2) {  }\n        }\n        assertNull(e);\n        tomcat.getConnector().start();\n    }\n","realPath":"test/org/apache/tomcat/util/net/TestXxxEndpoint.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":160,"status":"M"}],"commitId":"63f708ac1243fb91867da7345f73359cda742541","commitMessage":"@@@Fix https://issues.apache.org/bugzilla/show_bug.cgi?id=52028\nAdd support for automatic selection of a free port for a connector when the special value of zero is used\n\ngit-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1207692 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2011-11-29 07:16:42","modifiedFileCount":"25","status":"M","submitter":"Mark Emlyn David Thomas"},{"authorTime":"2011-11-29 07:16:42","codes":[{"authorDate":"2011-11-30 07:44:03","commitOrder":4,"curCode":"    public void testStartStopBindOnInit() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n\n        tomcat.start();\n\n        int port = getPort();\n\n        tomcat.getConnector().stop();\n        Exception e = null;\n        ServerSocket s = null;\n        long pool = 0;\n        long nativeSocket = 0;\n        boolean isApr = tomcat.getConnector().getProtocolHandlerClassName().contains(\"Apr\");\n        try {\n            \r\n            if (isApr) {\n                pool = createAprPool();\n                assertTrue(pool != 0);\n                nativeSocket = createAprSocket(port, pool);\n                assertTrue(nativeSocket != 0);\n            } else {\n                s = new ServerSocket(port);\n            }\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            try {\n                if (isApr) {\n                    destroyAprSocket(nativeSocket, pool);\n                } else if (s != null) {\n                    s.close();\n                }\n            } catch (Exception e2) {  }\n        }\n        if (e != null) {\n            log.info(\"Exception was\", e);\n        }\n        assertNotNull(e);\n        tomcat.getConnector().start();\n    }\n","date":"2011-11-30 07:44:03","endLine":157,"groupId":"16385","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"testStartStopBindOnInit","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/8d/f91ff5b7793ad13769164b37f94d912867bf23.src","preCode":"    public void testStartStopBindOnInit() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n\n        int port = getPort();\n\n        tomcat.start();\n\n        tomcat.getConnector().stop();\n        Exception e = null;\n        ServerSocket s = null;\n        long pool = 0;\n        long nativeSocket = 0;\n        boolean isApr = tomcat.getConnector().getProtocolHandlerClassName().contains(\"Apr\");\n        try {\n            \r\n            if (isApr) {\n                pool = createAprPool();\n                assertTrue(pool != 0);\n                nativeSocket = createAprSocket(port, pool);\n                assertTrue(nativeSocket != 0);\n            } else {\n                s = new ServerSocket(port);\n            }\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            try {\n                if (isApr) {\n                    destroyAprSocket(nativeSocket, pool);\n                } else if (s != null) {\n                    s.close();\n                }\n            } catch (Exception e2) {  }\n        }\n        if (e != null) {\n            log.info(\"Exception was\", e);\n        }\n        assertNotNull(e);\n        tomcat.getConnector().start();\n    }\n","realPath":"test/org/apache/tomcat/util/net/TestXxxEndpoint.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":116,"status":"M"},{"authorDate":"2011-11-29 07:16:42","commitOrder":4,"curCode":"    public void testStartStopBindOnStart() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        Connector c = tomcat.getConnector();\n        c.setProperty(\"bindOnInit\", \"false\");\n\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n\n\n        tomcat.start();\n        int port = getPort();\n\n        tomcat.getConnector().stop();\n        Exception e = null;\n        ServerSocket s = null;\n        long pool = 0;\n        long nativeSocket = 0;\n        boolean isApr = tomcat.getConnector().getProtocolHandlerClassName().contains(\"Apr\");\n        try {\n            \r\n            if (isApr) {\n                pool = createAprPool();\n                assertTrue(pool != 0);\n                nativeSocket = createAprSocket(port, pool);\n                assertTrue(nativeSocket != 0);\n            } else {\n                s = new ServerSocket(port);\n            }\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            try {\n                if (isApr) {\n                    destroyAprSocket(nativeSocket, pool);\n                } else if (s != null) {\n                    s.close();\n                }\n            } catch (Exception e2) {  }\n        }\n        assertNull(e);\n        tomcat.getConnector().start();\n    }\n","date":"2011-11-29 07:16:42","endLine":201,"groupId":"16385","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"testStartStopBindOnStart","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/41/d39674e31fae0991a8c588930dd556790cec3a.src","preCode":"    public void testStartStopBindOnStart() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        Connector c = tomcat.getConnector();\n        c.setProperty(\"bindOnInit\", \"false\");\n\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n\n\n        tomcat.start();\n        int port = getPort();\n\n        tomcat.getConnector().stop();\n        Exception e = null;\n        ServerSocket s = null;\n        long pool = 0;\n        long nativeSocket = 0;\n        boolean isApr = tomcat.getConnector().getProtocolHandlerClassName().contains(\"Apr\");\n        try {\n            \r\n            if (isApr) {\n                pool = createAprPool();\n                assertTrue(pool != 0);\n                nativeSocket = createAprSocket(port, pool);\n                assertTrue(nativeSocket != 0);\n            } else {\n                s = new ServerSocket(port);\n            }\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            try {\n                if (isApr) {\n                    destroyAprSocket(nativeSocket, pool);\n                } else if (s != null) {\n                    s.close();\n                }\n            } catch (Exception e2) {  }\n        }\n        assertNull(e);\n        tomcat.getConnector().start();\n    }\n","realPath":"test/org/apache/tomcat/util/net/TestXxxEndpoint.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":160,"status":"N"}],"commitId":"03632e0adc1c1b7e40a5b6232abc43f543e17e8c","commitMessage":"@@@Fix failing test for APR now random ports are used by default\n\ngit-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1208145 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2011-11-30 07:44:03","modifiedFileCount":"1","status":"M","submitter":"Mark Emlyn David Thomas"},{"authorTime":"2012-01-08 04:52:08","codes":[{"authorDate":"2012-01-08 04:52:08","commitOrder":5,"curCode":"    public void testStartStopBindOnInit() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n\n        tomcat.start();\n\n        int port = getPort();\n\n        tomcat.getConnector().stop();\n        Exception e = null;\n        ServerSocket s = null;\n        long pool = 0;\n        long nativeSocket = 0;\n        boolean isApr = tomcat.getConnector().getProtocolHandlerClassName().contains(\"Apr\");\n        try {\n            \r\n            if (isApr) {\n                pool = createAprPool();\n                assertTrue(pool != 0);\n                nativeSocket = createAprSocket(port, pool);\n                assertTrue(nativeSocket != 0);\n            } else {\n                s = new ServerSocket(port, 100,\n                        InetAddress.getByName(\"localhost\"));\n            }\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            try {\n                if (isApr) {\n                    destroyAprSocket(nativeSocket, pool);\n                } else if (s != null) {\n                    s.close();\n                }\n            } catch (Exception e2) {  }\n        }\n        if (e != null) {\n            log.info(\"Exception was\", e);\n        }\n        assertNotNull(e);\n        tomcat.getConnector().start();\n    }\n","date":"2012-01-08 04:52:08","endLine":159,"groupId":"16385","id":9,"instanceNumber":1,"isCurCommit":0,"methodName":"testStartStopBindOnInit","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/d7/e440de188e870d7525096d94500cabe5c7149a.src","preCode":"    public void testStartStopBindOnInit() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n\n        tomcat.start();\n\n        int port = getPort();\n\n        tomcat.getConnector().stop();\n        Exception e = null;\n        ServerSocket s = null;\n        long pool = 0;\n        long nativeSocket = 0;\n        boolean isApr = tomcat.getConnector().getProtocolHandlerClassName().contains(\"Apr\");\n        try {\n            \r\n            if (isApr) {\n                pool = createAprPool();\n                assertTrue(pool != 0);\n                nativeSocket = createAprSocket(port, pool);\n                assertTrue(nativeSocket != 0);\n            } else {\n                s = new ServerSocket(port);\n            }\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            try {\n                if (isApr) {\n                    destroyAprSocket(nativeSocket, pool);\n                } else if (s != null) {\n                    s.close();\n                }\n            } catch (Exception e2) {  }\n        }\n        if (e != null) {\n            log.info(\"Exception was\", e);\n        }\n        assertNotNull(e);\n        tomcat.getConnector().start();\n    }\n","realPath":"test/org/apache/tomcat/util/net/TestXxxEndpoint.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":117,"status":"M"},{"authorDate":"2012-01-08 04:52:08","commitOrder":5,"curCode":"    public void testStartStopBindOnStart() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        Connector c = tomcat.getConnector();\n        c.setProperty(\"bindOnInit\", \"false\");\n\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n\n\n        tomcat.start();\n        int port = getPort();\n\n        tomcat.getConnector().stop();\n        Exception e = null;\n        ServerSocket s = null;\n        long pool = 0;\n        long nativeSocket = 0;\n        boolean isApr = tomcat.getConnector().getProtocolHandlerClassName().contains(\"Apr\");\n        try {\n            \r\n            if (isApr) {\n                pool = createAprPool();\n                assertTrue(pool != 0);\n                nativeSocket = createAprSocket(port, pool);\n                assertTrue(nativeSocket != 0);\n            } else {\n                s = new ServerSocket(port, 100,\n                        InetAddress.getByName(\"localhost\"));\n            }\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            try {\n                if (isApr) {\n                    destroyAprSocket(nativeSocket, pool);\n                } else if (s != null) {\n                    s.close();\n                }\n            } catch (Exception e2) {  }\n        }\n        assertNull(e);\n        tomcat.getConnector().start();\n    }\n","date":"2012-01-08 04:52:08","endLine":204,"groupId":"16385","id":10,"instanceNumber":2,"isCurCommit":0,"methodName":"testStartStopBindOnStart","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/d7/e440de188e870d7525096d94500cabe5c7149a.src","preCode":"    public void testStartStopBindOnStart() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        Connector c = tomcat.getConnector();\n        c.setProperty(\"bindOnInit\", \"false\");\n\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n\n\n        tomcat.start();\n        int port = getPort();\n\n        tomcat.getConnector().stop();\n        Exception e = null;\n        ServerSocket s = null;\n        long pool = 0;\n        long nativeSocket = 0;\n        boolean isApr = tomcat.getConnector().getProtocolHandlerClassName().contains(\"Apr\");\n        try {\n            \r\n            if (isApr) {\n                pool = createAprPool();\n                assertTrue(pool != 0);\n                nativeSocket = createAprSocket(port, pool);\n                assertTrue(nativeSocket != 0);\n            } else {\n                s = new ServerSocket(port);\n            }\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            try {\n                if (isApr) {\n                    destroyAprSocket(nativeSocket, pool);\n                } else if (s != null) {\n                    s.close();\n                }\n            } catch (Exception e2) {  }\n        }\n        assertNull(e);\n        tomcat.getConnector().start();\n    }\n","realPath":"test/org/apache/tomcat/util/net/TestXxxEndpoint.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":162,"status":"M"}],"commitId":"429ccaafdf36b0f06ce40880b94e0f9e6f1878e5","commitMessage":"@@@Bind connectors to localhost for unit tests\nImprove format of JMX names that include an address\nUpdate unit tests so they pass with the above changes\n\ngit-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1228724 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2012-01-08 04:52:08","modifiedFileCount":"5","status":"M","submitter":"Mark Emlyn David Thomas"},{"authorTime":"2017-11-13 18:09:23","codes":[{"authorDate":"2017-11-13 18:09:23","commitOrder":6,"curCode":"    public void testStartStopBindOnInit() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n\n        tomcat.start();\n\n        int port = getPort();\n\n        tomcat.getConnector().stop();\n        Exception e = null;\n        ServerSocket s = null;\n        long pool = 0;\n        long nativeSocket = 0;\n        boolean isApr = tomcat.getConnector().getProtocolHandlerClassName().contains(\"Apr\");\n        try {\n            \r\n            if (isApr) {\n                pool = createAprPool();\n                Assert.assertTrue(pool != 0);\n                nativeSocket = createAprSocket(port, pool);\n                Assert.assertTrue(nativeSocket != 0);\n            } else {\n                s = new ServerSocket(port, 100,\n                        InetAddress.getByName(\"localhost\"));\n            }\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            try {\n                if (isApr) {\n                    destroyAprSocket(nativeSocket, pool);\n                } else if (s != null) {\n                    s.close();\n                }\n            } catch (Exception e2) {  }\n        }\n        if (e != null) {\n            log.info(\"Exception was\", e);\n        }\n        Assert.assertNotNull(e);\n        tomcat.getConnector().start();\n    }\n","date":"2017-11-13 18:09:23","endLine":152,"groupId":"16385","id":11,"instanceNumber":1,"isCurCommit":0,"methodName":"testStartStopBindOnInit","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/00/d6bb588df61ad1c78cdd4c298ecc57610584b5.src","preCode":"    public void testStartStopBindOnInit() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n\n        tomcat.start();\n\n        int port = getPort();\n\n        tomcat.getConnector().stop();\n        Exception e = null;\n        ServerSocket s = null;\n        long pool = 0;\n        long nativeSocket = 0;\n        boolean isApr = tomcat.getConnector().getProtocolHandlerClassName().contains(\"Apr\");\n        try {\n            \r\n            if (isApr) {\n                pool = createAprPool();\n                assertTrue(pool != 0);\n                nativeSocket = createAprSocket(port, pool);\n                assertTrue(nativeSocket != 0);\n            } else {\n                s = new ServerSocket(port, 100,\n                        InetAddress.getByName(\"localhost\"));\n            }\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            try {\n                if (isApr) {\n                    destroyAprSocket(nativeSocket, pool);\n                } else if (s != null) {\n                    s.close();\n                }\n            } catch (Exception e2) {  }\n        }\n        if (e != null) {\n            log.info(\"Exception was\", e);\n        }\n        assertNotNull(e);\n        tomcat.getConnector().start();\n    }\n","realPath":"test/org/apache/tomcat/util/net/TestXxxEndpoint.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":110,"status":"M"},{"authorDate":"2017-11-13 18:09:23","commitOrder":6,"curCode":"    public void testStartStopBindOnStart() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        Connector c = tomcat.getConnector();\n        c.setProperty(\"bindOnInit\", \"false\");\n\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n\n\n        tomcat.start();\n        int port = getPort();\n\n        tomcat.getConnector().stop();\n        Exception e = null;\n        ServerSocket s = null;\n        long pool = 0;\n        long nativeSocket = 0;\n        boolean isApr = tomcat.getConnector().getProtocolHandlerClassName().contains(\"Apr\");\n        try {\n            \r\n            if (isApr) {\n                pool = createAprPool();\n                Assert.assertTrue(pool != 0);\n                nativeSocket = createAprSocket(port, pool);\n                Assert.assertTrue(nativeSocket != 0);\n            } else {\n                s = new ServerSocket(port, 100,\n                        InetAddress.getByName(\"localhost\"));\n            }\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            try {\n                if (isApr) {\n                    destroyAprSocket(nativeSocket, pool);\n                } else if (s != null) {\n                    s.close();\n                }\n            } catch (Exception e2) {  }\n        }\n        Assert.assertNull(e);\n        tomcat.getConnector().start();\n    }\n","date":"2017-11-13 18:09:23","endLine":197,"groupId":"16385","id":12,"instanceNumber":2,"isCurCommit":0,"methodName":"testStartStopBindOnStart","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/00/d6bb588df61ad1c78cdd4c298ecc57610584b5.src","preCode":"    public void testStartStopBindOnStart() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        Connector c = tomcat.getConnector();\n        c.setProperty(\"bindOnInit\", \"false\");\n\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n\n\n        tomcat.start();\n        int port = getPort();\n\n        tomcat.getConnector().stop();\n        Exception e = null;\n        ServerSocket s = null;\n        long pool = 0;\n        long nativeSocket = 0;\n        boolean isApr = tomcat.getConnector().getProtocolHandlerClassName().contains(\"Apr\");\n        try {\n            \r\n            if (isApr) {\n                pool = createAprPool();\n                assertTrue(pool != 0);\n                nativeSocket = createAprSocket(port, pool);\n                assertTrue(nativeSocket != 0);\n            } else {\n                s = new ServerSocket(port, 100,\n                        InetAddress.getByName(\"localhost\"));\n            }\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            try {\n                if (isApr) {\n                    destroyAprSocket(nativeSocket, pool);\n                } else if (s != null) {\n                    s.close();\n                }\n            } catch (Exception e2) {  }\n        }\n        assertNull(e);\n        tomcat.getConnector().start();\n    }\n","realPath":"test/org/apache/tomcat/util/net/TestXxxEndpoint.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":155,"status":"M"}],"commitId":"8f4d5ba4ea05080a77a27b6c3b015c1b7d67f087","commitMessage":"@@@Switch to non-static imports\n- avoids checkstyle error\n- broadly the same code volume (or less)\n\ngit-svn-id: https://svn.apache.org/repos/asf/tomcat/trunk@1815069 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2017-11-13 18:09:23","modifiedFileCount":"18","status":"M","submitter":"Mark Thomas"},{"authorTime":"2020-01-15 19:44:40","codes":[{"authorDate":"2017-11-13 18:09:23","commitOrder":7,"curCode":"    public void testStartStopBindOnInit() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n\n        tomcat.start();\n\n        int port = getPort();\n\n        tomcat.getConnector().stop();\n        Exception e = null;\n        ServerSocket s = null;\n        long pool = 0;\n        long nativeSocket = 0;\n        boolean isApr = tomcat.getConnector().getProtocolHandlerClassName().contains(\"Apr\");\n        try {\n            \r\n            if (isApr) {\n                pool = createAprPool();\n                Assert.assertTrue(pool != 0);\n                nativeSocket = createAprSocket(port, pool);\n                Assert.assertTrue(nativeSocket != 0);\n            } else {\n                s = new ServerSocket(port, 100,\n                        InetAddress.getByName(\"localhost\"));\n            }\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            try {\n                if (isApr) {\n                    destroyAprSocket(nativeSocket, pool);\n                } else if (s != null) {\n                    s.close();\n                }\n            } catch (Exception e2) {  }\n        }\n        if (e != null) {\n            log.info(\"Exception was\", e);\n        }\n        Assert.assertNotNull(e);\n        tomcat.getConnector().start();\n    }\n","date":"2017-11-13 18:09:23","endLine":152,"groupId":"16385","id":13,"instanceNumber":1,"isCurCommit":0,"methodName":"testStartStopBindOnInit","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/00/d6bb588df61ad1c78cdd4c298ecc57610584b5.src","preCode":"    public void testStartStopBindOnInit() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n\n        tomcat.start();\n\n        int port = getPort();\n\n        tomcat.getConnector().stop();\n        Exception e = null;\n        ServerSocket s = null;\n        long pool = 0;\n        long nativeSocket = 0;\n        boolean isApr = tomcat.getConnector().getProtocolHandlerClassName().contains(\"Apr\");\n        try {\n            \r\n            if (isApr) {\n                pool = createAprPool();\n                Assert.assertTrue(pool != 0);\n                nativeSocket = createAprSocket(port, pool);\n                Assert.assertTrue(nativeSocket != 0);\n            } else {\n                s = new ServerSocket(port, 100,\n                        InetAddress.getByName(\"localhost\"));\n            }\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            try {\n                if (isApr) {\n                    destroyAprSocket(nativeSocket, pool);\n                } else if (s != null) {\n                    s.close();\n                }\n            } catch (Exception e2) {  }\n        }\n        if (e != null) {\n            log.info(\"Exception was\", e);\n        }\n        Assert.assertNotNull(e);\n        tomcat.getConnector().start();\n    }\n","realPath":"test/org/apache/tomcat/util/net/TestXxxEndpoint.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":110,"status":"N"},{"authorDate":"2020-01-15 19:44:40","commitOrder":7,"curCode":"    public void testStartStopBindOnStart() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        Connector c = tomcat.getConnector();\n        Assert.assertTrue(c.setProperty(\"bindOnInit\", \"false\"));\n\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n\n\n        tomcat.start();\n        int port = getPort();\n\n        tomcat.getConnector().stop();\n        Exception e = null;\n        ServerSocket s = null;\n        long pool = 0;\n        long nativeSocket = 0;\n        boolean isApr = tomcat.getConnector().getProtocolHandlerClassName().contains(\"Apr\");\n        try {\n            \r\n            if (isApr) {\n                pool = createAprPool();\n                Assert.assertTrue(pool != 0);\n                nativeSocket = createAprSocket(port, pool);\n                Assert.assertTrue(nativeSocket != 0);\n            } else {\n                s = new ServerSocket(port, 100,\n                        InetAddress.getByName(\"localhost\"));\n            }\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            try {\n                if (isApr) {\n                    destroyAprSocket(nativeSocket, pool);\n                } else if (s != null) {\n                    s.close();\n                }\n            } catch (Exception e2) {  }\n        }\n        Assert.assertNull(e);\n        tomcat.getConnector().start();\n    }\n","date":"2020-01-15 20:21:30","endLine":197,"groupId":"16385","id":14,"instanceNumber":2,"isCurCommit":0,"methodName":"testStartStopBindOnStart","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/ab/08bf786b8d5fffaf94f4c767c389a3134671eb.src","preCode":"    public void testStartStopBindOnStart() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        Connector c = tomcat.getConnector();\n        c.setProperty(\"bindOnInit\", \"false\");\n\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n\n\n        tomcat.start();\n        int port = getPort();\n\n        tomcat.getConnector().stop();\n        Exception e = null;\n        ServerSocket s = null;\n        long pool = 0;\n        long nativeSocket = 0;\n        boolean isApr = tomcat.getConnector().getProtocolHandlerClassName().contains(\"Apr\");\n        try {\n            \r\n            if (isApr) {\n                pool = createAprPool();\n                Assert.assertTrue(pool != 0);\n                nativeSocket = createAprSocket(port, pool);\n                Assert.assertTrue(nativeSocket != 0);\n            } else {\n                s = new ServerSocket(port, 100,\n                        InetAddress.getByName(\"localhost\"));\n            }\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            try {\n                if (isApr) {\n                    destroyAprSocket(nativeSocket, pool);\n                } else if (s != null) {\n                    s.close();\n                }\n            } catch (Exception e2) {  }\n        }\n        Assert.assertNull(e);\n        tomcat.getConnector().start();\n    }\n","realPath":"test/org/apache/tomcat/util/net/TestXxxEndpoint.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":155,"status":"M"}],"commitId":"200d15ae5b1150b46ca1e1400fe9d2d0ba10d9d3","commitMessage":"@@@Check that uses of Connector.setProperty() in tests complete correctly","date":"2020-01-15 20:21:30","modifiedFileCount":"17","status":"M","submitter":"Mark Thomas"},{"authorTime":"2021-08-19 03:41:02","codes":[{"authorDate":"2021-08-19 03:41:02","commitOrder":8,"curCode":"    public void testStartStopBindOnInit() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n\n        tomcat.start();\n\n        int port = getPort();\n\n        tomcat.getConnector().stop();\n        Exception e = null;\n        try (ServerSocket s = new ServerSocket(port, 100, InetAddress.getByName(\"localhost\"))){\n        } catch (Exception e1) {\n            e = e1;\n        }\n        if (e != null) {\n            log.info(\"Exception was\", e);\n        }\n        Assert.assertNotNull(e);\n        tomcat.getConnector().start();\n    }\n","date":"2021-08-20 02:17:15","endLine":62,"groupId":"101335","id":15,"instanceNumber":1,"isCurCommit":1,"methodName":"testStartStopBindOnInit","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/ea/97bf83008a1bfd4979b5abd14e420603478d66.src","preCode":"    public void testStartStopBindOnInit() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n\n        tomcat.start();\n\n        int port = getPort();\n\n        tomcat.getConnector().stop();\n        Exception e = null;\n        ServerSocket s = null;\n        long pool = 0;\n        long nativeSocket = 0;\n        boolean isApr = tomcat.getConnector().getProtocolHandlerClassName().contains(\"Apr\");\n        try {\n            \r\n            if (isApr) {\n                pool = createAprPool();\n                Assert.assertTrue(pool != 0);\n                nativeSocket = createAprSocket(port, pool);\n                Assert.assertTrue(nativeSocket != 0);\n            } else {\n                s = new ServerSocket(port, 100,\n                        InetAddress.getByName(\"localhost\"));\n            }\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            try {\n                if (isApr) {\n                    destroyAprSocket(nativeSocket, pool);\n                } else if (s != null) {\n                    s.close();\n                }\n            } catch (Exception e2) {  }\n        }\n        if (e != null) {\n            log.info(\"Exception was\", e);\n        }\n        Assert.assertNotNull(e);\n        tomcat.getConnector().start();\n    }\n","realPath":"test/org/apache/tomcat/util/net/TestXxxEndpoint.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":42,"status":"M"},{"authorDate":"2021-08-19 03:41:02","commitOrder":8,"curCode":"    public void testStartStopBindOnStart() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        Connector c = tomcat.getConnector();\n        Assert.assertTrue(c.setProperty(\"bindOnInit\", \"false\"));\n\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n\n\n        tomcat.start();\n        int port = getPort();\n\n        tomcat.getConnector().stop();\n        Exception e = null;\n        try (ServerSocket s = new ServerSocket(port, 100, InetAddress.getByName(\"localhost\"))) {\n            \r\n        } catch (Exception e1) {\n            e = e1;\n        }\n        Assert.assertNull(e);\n        tomcat.getConnector().start();\n    }\n","date":"2021-08-20 02:17:15","endLine":86,"groupId":"101335","id":16,"instanceNumber":2,"isCurCommit":1,"methodName":"testStartStopBindOnStart","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-tomcat-10-0.7/blobInfo/CC_OUT/blobs/ea/97bf83008a1bfd4979b5abd14e420603478d66.src","preCode":"    public void testStartStopBindOnStart() throws Exception {\n        Tomcat tomcat = getTomcatInstance();\n        Connector c = tomcat.getConnector();\n        Assert.assertTrue(c.setProperty(\"bindOnInit\", \"false\"));\n\n        File appDir = new File(getBuildDirectory(), \"webapps/examples\");\n        tomcat.addWebapp(null, \"/examples\", appDir.getAbsolutePath());\n\n\n        tomcat.start();\n        int port = getPort();\n\n        tomcat.getConnector().stop();\n        Exception e = null;\n        ServerSocket s = null;\n        long pool = 0;\n        long nativeSocket = 0;\n        boolean isApr = tomcat.getConnector().getProtocolHandlerClassName().contains(\"Apr\");\n        try {\n            \r\n            if (isApr) {\n                pool = createAprPool();\n                Assert.assertTrue(pool != 0);\n                nativeSocket = createAprSocket(port, pool);\n                Assert.assertTrue(nativeSocket != 0);\n            } else {\n                s = new ServerSocket(port, 100,\n                        InetAddress.getByName(\"localhost\"));\n            }\n        } catch (Exception e1) {\n            e = e1;\n        } finally {\n            try {\n                if (isApr) {\n                    destroyAprSocket(nativeSocket, pool);\n                } else if (s != null) {\n                    s.close();\n                }\n            } catch (Exception e2) {  }\n        }\n        Assert.assertNull(e);\n        tomcat.getConnector().start();\n    }\n","realPath":"test/org/apache/tomcat/util/net/TestXxxEndpoint.java","repoName":"tomcat","snippetEndLine":0,"snippetStartLine":0,"startLine":65,"status":"M"}],"commitId":"314568fa450680711f12f01ee050f2166f4263bd","commitMessage":"@@@Remove APR/Native connector implementation.\n\nRemoves:\n- code\n- tests\n\nDocs remain a TODO\n","date":"2021-08-20 02:17:15","modifiedFileCount":"21","status":"M","submitter":"Mark Thomas"}]
