[{"authorTime":"2017-07-07 06:19:58","codes":[{"authorDate":"2017-07-07 06:19:58","commitOrder":1,"curCode":"  @Test public void testFoodmart() throws Exception {\n    final Tester t = new Tester().foodmart();\n    final String q = \"select \\\"t\\\".\\\"the_year\\\" as \\\"c0\\\",\\n\"\n        + \" \\\"t\\\".\\\"quarter\\\" as \\\"c1\\\",\\n\"\n        + \" \\\"pc\\\".\\\"product_family\\\" as \\\"c2\\\",\\n\"\n        + \" sum(\\\"s\\\".\\\"unit_sales\\\") as \\\"m0\\\"\\n\"\n        + \"from \\\"time_by_day\\\" as \\\"t\\\",\\n\"\n        + \" \\\"sales_fact_1997\\\" as \\\"s\\\",\\n\"\n        + \" \\\"product_class\\\" as \\\"pc\\\",\\n\"\n        + \" \\\"product\\\" as \\\"p\\\"\\n\"\n        + \"where \\\"s\\\".\\\"time_id\\\" = \\\"t\\\".\\\"time_id\\\"\\n\"\n        + \"and \\\"t\\\".\\\"the_year\\\" = 1997\\n\"\n        + \"and \\\"s\\\".\\\"product_id\\\" = \\\"p\\\".\\\"product_id\\\"\\n\"\n        + \"and \\\"p\\\".\\\"product_class_id\\\" = \\\"pc\\\".\\\"product_class_id\\\"\\n\"\n        + \"group by \\\"t\\\".\\\"the_year\\\",\\n\"\n        + \" \\\"t\\\".\\\"quarter\\\",\\n\"\n        + \" \\\"pc\\\".\\\"product_family\\\"\";\n    final String g = \"sales_fact_1997\"\n        + \" (product:product_id (product_class:product_class_id)\"\n        + \" time_by_day:time_id)\";\n    assertThat(t.addQuery(q),\n        isGraphs(g, \"[SUM(sales_fact_1997.unit_sales)]\"));\n\n    \r\n    final String expected = \"graph(\"\n        + \"vertices: [\"\n        + \"[foodmart, product], \"\n        + \"[foodmart, product_class], \"\n        + \"[foodmart, sales_fact_1997], \"\n        + \"[foodmart, time_by_day]], \"\n        + \"edges: [\"\n        + \"Step([foodmart, product], [foodmart, product_class],\"\n        + \" product_class_id:product_class_id), \"\n        + \"Step([foodmart, sales_fact_1997], [foodmart, product],\"\n        + \" product_id:product_id), \"\n        + \"Step([foodmart, sales_fact_1997], [foodmart, time_by_day],\"\n        + \" time_id:time_id)])\";\n    assertThat(t.s.space.g.toString(), is(expected));\n  }\n","date":"2018-10-30 07:51:43","endLine":167,"groupId":"7757","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testFoodmart","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-calcite-10-0.7/blobInfo/CC_OUT/blobs/43/f756260700e59993f66424bb1040803a2aafe4.src","preCode":"  @Test public void testFoodmart() throws Exception {\n    final Tester t = new Tester().foodmart();\n    final String q = \"select \\\"t\\\".\\\"the_year\\\" as \\\"c0\\\",\\n\"\n        + \" \\\"t\\\".\\\"quarter\\\" as \\\"c1\\\",\\n\"\n        + \" \\\"pc\\\".\\\"product_family\\\" as \\\"c2\\\",\\n\"\n        + \" sum(\\\"s\\\".\\\"unit_sales\\\") as \\\"m0\\\"\\n\"\n        + \"from \\\"time_by_day\\\" as \\\"t\\\",\\n\"\n        + \" \\\"sales_fact_1997\\\" as \\\"s\\\",\\n\"\n        + \" \\\"product_class\\\" as \\\"pc\\\",\\n\"\n        + \" \\\"product\\\" as \\\"p\\\"\\n\"\n        + \"where \\\"s\\\".\\\"time_id\\\" = \\\"t\\\".\\\"time_id\\\"\\n\"\n        + \"and \\\"t\\\".\\\"the_year\\\" = 1997\\n\"\n        + \"and \\\"s\\\".\\\"product_id\\\" = \\\"p\\\".\\\"product_id\\\"\\n\"\n        + \"and \\\"p\\\".\\\"product_class_id\\\" = \\\"pc\\\".\\\"product_class_id\\\"\\n\"\n        + \"group by \\\"t\\\".\\\"the_year\\\",\\n\"\n        + \" \\\"t\\\".\\\"quarter\\\",\\n\"\n        + \" \\\"pc\\\".\\\"product_family\\\"\";\n    final String g = \"sales_fact_1997\"\n        + \" (product:product_id (product_class:product_class_id)\"\n        + \" time_by_day:time_id)\";\n    assertThat(t.addQuery(q),\n        isGraphs(g, \"[SUM(sales_fact_1997.unit_sales)]\"));\n\n    \r\n    final String expected = \"graph(\"\n        + \"vertices: [\"\n        + \"[foodmart, product], \"\n        + \"[foodmart, product_class], \"\n        + \"[foodmart, sales_fact_1997], \"\n        + \"[foodmart, time_by_day]], \"\n        + \"edges: [\"\n        + \"Step([foodmart, product], [foodmart, product_class],\"\n        + \" product_class_id:product_class_id), \"\n        + \"Step([foodmart, sales_fact_1997], [foodmart, product],\"\n        + \" product_id:product_id), \"\n        + \"Step([foodmart, sales_fact_1997], [foodmart, time_by_day],\"\n        + \" time_id:time_id)])\";\n    assertThat(t.s.space.g.toString(), is(expected));\n  }\n","realPath":"core/src/test/java/org/apache/calcite/materialize/LatticeSuggesterTest.java","repoName":"calcite","snippetEndLine":0,"snippetStartLine":0,"startLine":129,"status":"B"},{"authorDate":"2017-07-07 06:19:58","commitOrder":1,"curCode":"  @Test public void testSharedSnowflake() throws Exception {\n    final Tester t = new Tester().foodmart();\n    \r\n    \r\n    \r\n    final String q = \"select \\\"s\\\".\\\"store_country\\\" as \\\"c0\\\",\\n\"\n        + \" \\\"r\\\".\\\"sales_region\\\" as \\\"c1\\\",\\n\"\n        + \" \\\"r1\\\".\\\"sales_region\\\" as \\\"c2\\\",\\n\"\n        + \" sum(\\\"f\\\".\\\"unit_sales\\\") as \\\"m0\\\"\\n\"\n        + \"from \\\"store\\\" as \\\"s\\\",\\n\"\n        + \" \\\"sales_fact_1997\\\" as \\\"f\\\",\\n\"\n        + \" \\\"region\\\" as \\\"r\\\",\\n\"\n        + \" \\\"region\\\" as \\\"r1\\\",\\n\"\n        + \" \\\"customer\\\" as \\\"c\\\"\\n\"\n        + \"where \\\"f\\\".\\\"store_id\\\" = \\\"s\\\".\\\"store_id\\\"\\n\"\n        + \" and \\\"s\\\".\\\"store_country\\\" = 'USA'\\n\"\n        + \" and \\\"s\\\".\\\"region_id\\\" = \\\"r\\\".\\\"region_id\\\"\\n\"\n        + \" and \\\"r\\\".\\\"sales_region\\\" = 'South West'\\n\"\n        + \" and \\\"f\\\".\\\"customer_id\\\" = \\\"c\\\".\\\"customer_id\\\"\\n\"\n        + \" and \\\"c\\\".\\\"customer_region_id\\\" = \\\"r1\\\".\\\"region_id\\\"\\n\"\n        + \" and \\\"r1\\\".\\\"sales_region\\\" = 'South West'\\n\"\n        + \"group by \\\"s\\\".\\\"store_country\\\",\\n\"\n        + \" \\\"r\\\".\\\"sales_region\\\",\\n\"\n        + \" \\\"r1\\\".\\\"sales_region\\\"\\n\";\n    final String g = \"sales_fact_1997\"\n        + \" (customer:customer_id (region:customer_region_id)\"\n        + \" store:store_id (region:region_id))\";\n    assertThat(t.addQuery(q),\n        isGraphs(g, \"[SUM(sales_fact_1997.unit_sales)]\"));\n  }\n","date":"2018-10-30 07:51:43","endLine":262,"groupId":"7757","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testSharedSnowflake","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-calcite-10-0.7/blobInfo/CC_OUT/blobs/43/f756260700e59993f66424bb1040803a2aafe4.src","preCode":"  @Test public void testSharedSnowflake() throws Exception {\n    final Tester t = new Tester().foodmart();\n    \r\n    \r\n    \r\n    final String q = \"select \\\"s\\\".\\\"store_country\\\" as \\\"c0\\\",\\n\"\n        + \" \\\"r\\\".\\\"sales_region\\\" as \\\"c1\\\",\\n\"\n        + \" \\\"r1\\\".\\\"sales_region\\\" as \\\"c2\\\",\\n\"\n        + \" sum(\\\"f\\\".\\\"unit_sales\\\") as \\\"m0\\\"\\n\"\n        + \"from \\\"store\\\" as \\\"s\\\",\\n\"\n        + \" \\\"sales_fact_1997\\\" as \\\"f\\\",\\n\"\n        + \" \\\"region\\\" as \\\"r\\\",\\n\"\n        + \" \\\"region\\\" as \\\"r1\\\",\\n\"\n        + \" \\\"customer\\\" as \\\"c\\\"\\n\"\n        + \"where \\\"f\\\".\\\"store_id\\\" = \\\"s\\\".\\\"store_id\\\"\\n\"\n        + \" and \\\"s\\\".\\\"store_country\\\" = 'USA'\\n\"\n        + \" and \\\"s\\\".\\\"region_id\\\" = \\\"r\\\".\\\"region_id\\\"\\n\"\n        + \" and \\\"r\\\".\\\"sales_region\\\" = 'South West'\\n\"\n        + \" and \\\"f\\\".\\\"customer_id\\\" = \\\"c\\\".\\\"customer_id\\\"\\n\"\n        + \" and \\\"c\\\".\\\"customer_region_id\\\" = \\\"r1\\\".\\\"region_id\\\"\\n\"\n        + \" and \\\"r1\\\".\\\"sales_region\\\" = 'South West'\\n\"\n        + \"group by \\\"s\\\".\\\"store_country\\\",\\n\"\n        + \" \\\"r\\\".\\\"sales_region\\\",\\n\"\n        + \" \\\"r1\\\".\\\"sales_region\\\"\\n\";\n    final String g = \"sales_fact_1997\"\n        + \" (customer:customer_id (region:customer_region_id)\"\n        + \" store:store_id (region:region_id))\";\n    assertThat(t.addQuery(q),\n        isGraphs(g, \"[SUM(sales_fact_1997.unit_sales)]\"));\n  }\n","realPath":"core/src/test/java/org/apache/calcite/materialize/LatticeSuggesterTest.java","repoName":"calcite","snippetEndLine":0,"snippetStartLine":0,"startLine":233,"status":"B"}],"commitId":"b47413a1d648455c43dbe8d51df926ebd68b3a36","commitMessage":"@@@[CALCITE-1870] Lattice suggester\n\nDon't add a query graph if it is cyclic.\n\nMore concise descriptions of join graphs.  and add FoodMart test case.\nAdd a test based on TPC-DS.\n\nMake FoodMartQueryTest a top-level class.  and add a test that runs\nthrough all of its queries and suggests lattices.\n\nAPI changes to Lattice. Rename class Lattice.Node to LatticeNode.  add\nsub-class LatticeRootNode that is immutable and has state that was\npreviously in Lattice. LatticeSuggester makes heavy use of LatticeNode.\nMove column unique name into Column.  and remove the\nLattice.uniqueColumnNames field.\n\nDirectedGraph.toString sorts lists of vertices and edges.\n\nAdd materialized views to documentation menu;\ntweak SQL formatting.\n\nIn HepPlanner.  rename noDAG to noDag.\n\nSqlImplementor: Translate simple RexNode to SQL without requiring RelBuilder;\nSqlImplementor.Context is now static.  but not all derived classes are.\n\nFix a typo in UdfTest.\n","date":"2018-10-30 07:51:43","modifiedFileCount":"19","status":"B","submitter":"Julian Hyde"},{"authorTime":"2020-04-02 10:39:10","codes":[{"authorDate":"2020-04-02 10:39:10","commitOrder":2,"curCode":"  @Test void testFoodmart() throws Exception {\n    final Tester t = new Tester().foodmart();\n    final String q = \"select \\\"t\\\".\\\"the_year\\\" as \\\"c0\\\",\\n\"\n        + \" \\\"t\\\".\\\"quarter\\\" as \\\"c1\\\",\\n\"\n        + \" \\\"pc\\\".\\\"product_family\\\" as \\\"c2\\\",\\n\"\n        + \" sum(\\\"s\\\".\\\"unit_sales\\\") as \\\"m0\\\"\\n\"\n        + \"from \\\"time_by_day\\\" as \\\"t\\\",\\n\"\n        + \" \\\"sales_fact_1997\\\" as \\\"s\\\",\\n\"\n        + \" \\\"product_class\\\" as \\\"pc\\\",\\n\"\n        + \" \\\"product\\\" as \\\"p\\\"\\n\"\n        + \"where \\\"s\\\".\\\"time_id\\\" = \\\"t\\\".\\\"time_id\\\"\\n\"\n        + \"and \\\"t\\\".\\\"the_year\\\" = 1997\\n\"\n        + \"and \\\"s\\\".\\\"product_id\\\" = \\\"p\\\".\\\"product_id\\\"\\n\"\n        + \"and \\\"p\\\".\\\"product_class_id\\\" = \\\"pc\\\".\\\"product_class_id\\\"\\n\"\n        + \"group by \\\"t\\\".\\\"the_year\\\",\\n\"\n        + \" \\\"t\\\".\\\"quarter\\\",\\n\"\n        + \" \\\"pc\\\".\\\"product_family\\\"\";\n    final String g = \"sales_fact_1997\"\n        + \" (product:product_id (product_class:product_class_id)\"\n        + \" time_by_day:time_id)\";\n    assertThat(t.addQuery(q),\n        isGraphs(g, \"[SUM(sales_fact_1997.unit_sales)]\"));\n\n    \r\n    final String expected = \"graph(\"\n        + \"vertices: [\"\n        + \"[foodmart, product], \"\n        + \"[foodmart, product_class], \"\n        + \"[foodmart, sales_fact_1997], \"\n        + \"[foodmart, time_by_day]], \"\n        + \"edges: [\"\n        + \"Step([foodmart, product], [foodmart, product_class],\"\n        + \" product_class_id:product_class_id), \"\n        + \"Step([foodmart, sales_fact_1997], [foodmart, product],\"\n        + \" product_id:product_id), \"\n        + \"Step([foodmart, sales_fact_1997], [foodmart, time_by_day],\"\n        + \" time_id:time_id)])\";\n    assertThat(t.s.space.g.toString(), is(expected));\n  }\n","date":"2020-04-06 04:57:49","endLine":178,"groupId":"101419","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testFoodmart","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-calcite-10-0.7/blobInfo/CC_OUT/blobs/bc/3cc8e5ae752cd3b53de4d9ae6709226dc852a5.src","preCode":"  @Test public void testFoodmart() throws Exception {\n    final Tester t = new Tester().foodmart();\n    final String q = \"select \\\"t\\\".\\\"the_year\\\" as \\\"c0\\\",\\n\"\n        + \" \\\"t\\\".\\\"quarter\\\" as \\\"c1\\\",\\n\"\n        + \" \\\"pc\\\".\\\"product_family\\\" as \\\"c2\\\",\\n\"\n        + \" sum(\\\"s\\\".\\\"unit_sales\\\") as \\\"m0\\\"\\n\"\n        + \"from \\\"time_by_day\\\" as \\\"t\\\",\\n\"\n        + \" \\\"sales_fact_1997\\\" as \\\"s\\\",\\n\"\n        + \" \\\"product_class\\\" as \\\"pc\\\",\\n\"\n        + \" \\\"product\\\" as \\\"p\\\"\\n\"\n        + \"where \\\"s\\\".\\\"time_id\\\" = \\\"t\\\".\\\"time_id\\\"\\n\"\n        + \"and \\\"t\\\".\\\"the_year\\\" = 1997\\n\"\n        + \"and \\\"s\\\".\\\"product_id\\\" = \\\"p\\\".\\\"product_id\\\"\\n\"\n        + \"and \\\"p\\\".\\\"product_class_id\\\" = \\\"pc\\\".\\\"product_class_id\\\"\\n\"\n        + \"group by \\\"t\\\".\\\"the_year\\\",\\n\"\n        + \" \\\"t\\\".\\\"quarter\\\",\\n\"\n        + \" \\\"pc\\\".\\\"product_family\\\"\";\n    final String g = \"sales_fact_1997\"\n        + \" (product:product_id (product_class:product_class_id)\"\n        + \" time_by_day:time_id)\";\n    assertThat(t.addQuery(q),\n        isGraphs(g, \"[SUM(sales_fact_1997.unit_sales)]\"));\n\n    \r\n    final String expected = \"graph(\"\n        + \"vertices: [\"\n        + \"[foodmart, product], \"\n        + \"[foodmart, product_class], \"\n        + \"[foodmart, sales_fact_1997], \"\n        + \"[foodmart, time_by_day]], \"\n        + \"edges: [\"\n        + \"Step([foodmart, product], [foodmart, product_class],\"\n        + \" product_class_id:product_class_id), \"\n        + \"Step([foodmart, sales_fact_1997], [foodmart, product],\"\n        + \" product_id:product_id), \"\n        + \"Step([foodmart, sales_fact_1997], [foodmart, time_by_day],\"\n        + \" time_id:time_id)])\";\n    assertThat(t.s.space.g.toString(), is(expected));\n  }\n","realPath":"core/src/test/java/org/apache/calcite/materialize/LatticeSuggesterTest.java","repoName":"calcite","snippetEndLine":0,"snippetStartLine":0,"startLine":140,"status":"M"},{"authorDate":"2020-04-02 10:39:10","commitOrder":2,"curCode":"  @Test void testSharedSnowflake() throws Exception {\n    final Tester t = new Tester().foodmart();\n    \r\n    \r\n    \r\n    final String q = \"select \\\"s\\\".\\\"store_country\\\" as \\\"c0\\\",\\n\"\n        + \" \\\"r\\\".\\\"sales_region\\\" as \\\"c1\\\",\\n\"\n        + \" \\\"r1\\\".\\\"sales_region\\\" as \\\"c2\\\",\\n\"\n        + \" sum(\\\"f\\\".\\\"unit_sales\\\") as \\\"m0\\\"\\n\"\n        + \"from \\\"store\\\" as \\\"s\\\",\\n\"\n        + \" \\\"sales_fact_1997\\\" as \\\"f\\\",\\n\"\n        + \" \\\"region\\\" as \\\"r\\\",\\n\"\n        + \" \\\"region\\\" as \\\"r1\\\",\\n\"\n        + \" \\\"customer\\\" as \\\"c\\\"\\n\"\n        + \"where \\\"f\\\".\\\"store_id\\\" = \\\"s\\\".\\\"store_id\\\"\\n\"\n        + \" and \\\"s\\\".\\\"store_country\\\" = 'USA'\\n\"\n        + \" and \\\"s\\\".\\\"region_id\\\" = \\\"r\\\".\\\"region_id\\\"\\n\"\n        + \" and \\\"r\\\".\\\"sales_region\\\" = 'South West'\\n\"\n        + \" and \\\"f\\\".\\\"customer_id\\\" = \\\"c\\\".\\\"customer_id\\\"\\n\"\n        + \" and \\\"c\\\".\\\"customer_region_id\\\" = \\\"r1\\\".\\\"region_id\\\"\\n\"\n        + \" and \\\"r1\\\".\\\"sales_region\\\" = 'South West'\\n\"\n        + \"group by \\\"s\\\".\\\"store_country\\\",\\n\"\n        + \" \\\"r\\\".\\\"sales_region\\\",\\n\"\n        + \" \\\"r1\\\".\\\"sales_region\\\"\\n\";\n    final String g = \"sales_fact_1997\"\n        + \" (customer:customer_id (region:customer_region_id)\"\n        + \" store:store_id (region:region_id))\";\n    assertThat(t.addQuery(q),\n        isGraphs(g, \"[SUM(sales_fact_1997.unit_sales)]\"));\n  }\n","date":"2020-04-06 04:57:49","endLine":274,"groupId":"101419","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testSharedSnowflake","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-calcite-10-0.7/blobInfo/CC_OUT/blobs/bc/3cc8e5ae752cd3b53de4d9ae6709226dc852a5.src","preCode":"  @Test public void testSharedSnowflake() throws Exception {\n    final Tester t = new Tester().foodmart();\n    \r\n    \r\n    \r\n    final String q = \"select \\\"s\\\".\\\"store_country\\\" as \\\"c0\\\",\\n\"\n        + \" \\\"r\\\".\\\"sales_region\\\" as \\\"c1\\\",\\n\"\n        + \" \\\"r1\\\".\\\"sales_region\\\" as \\\"c2\\\",\\n\"\n        + \" sum(\\\"f\\\".\\\"unit_sales\\\") as \\\"m0\\\"\\n\"\n        + \"from \\\"store\\\" as \\\"s\\\",\\n\"\n        + \" \\\"sales_fact_1997\\\" as \\\"f\\\",\\n\"\n        + \" \\\"region\\\" as \\\"r\\\",\\n\"\n        + \" \\\"region\\\" as \\\"r1\\\",\\n\"\n        + \" \\\"customer\\\" as \\\"c\\\"\\n\"\n        + \"where \\\"f\\\".\\\"store_id\\\" = \\\"s\\\".\\\"store_id\\\"\\n\"\n        + \" and \\\"s\\\".\\\"store_country\\\" = 'USA'\\n\"\n        + \" and \\\"s\\\".\\\"region_id\\\" = \\\"r\\\".\\\"region_id\\\"\\n\"\n        + \" and \\\"r\\\".\\\"sales_region\\\" = 'South West'\\n\"\n        + \" and \\\"f\\\".\\\"customer_id\\\" = \\\"c\\\".\\\"customer_id\\\"\\n\"\n        + \" and \\\"c\\\".\\\"customer_region_id\\\" = \\\"r1\\\".\\\"region_id\\\"\\n\"\n        + \" and \\\"r1\\\".\\\"sales_region\\\" = 'South West'\\n\"\n        + \"group by \\\"s\\\".\\\"store_country\\\",\\n\"\n        + \" \\\"r\\\".\\\"sales_region\\\",\\n\"\n        + \" \\\"r1\\\".\\\"sales_region\\\"\\n\";\n    final String g = \"sales_fact_1997\"\n        + \" (customer:customer_id (region:customer_region_id)\"\n        + \" store:store_id (region:region_id))\";\n    assertThat(t.addQuery(q),\n        isGraphs(g, \"[SUM(sales_fact_1997.unit_sales)]\"));\n  }\n","realPath":"core/src/test/java/org/apache/calcite/materialize/LatticeSuggesterTest.java","repoName":"calcite","snippetEndLine":0,"snippetStartLine":0,"startLine":245,"status":"M"}],"commitId":"9492dd4146f63ddc028010d6c4e86f6a5cb29a8d","commitMessage":"@@@[CALCITE-3892] Make junit test classes and methods non-public where possible\n\nPrior to junit 5.  classes and methods had to be public. This is no\nlonger the case.\n\nSome classes need to remain public because they are referenced from\nelsewhere.  or if they use reflection somehow. The remaining 'public'\nkeyword will be informative to maintainers.\n","date":"2020-04-06 04:57:49","modifiedFileCount":"196","status":"M","submitter":"Julian Hyde"}]
