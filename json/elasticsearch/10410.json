[{"authorTime":"2018-04-26 03:22:53","codes":[{"authorDate":"2018-04-26 03:22:53","commitOrder":1,"curCode":"    public void testInvalidMustacheTemplate() throws Exception {\n        AppendProcessor.Factory factory = new AppendProcessor.Factory(TestTemplateService.instance(true));\n        Map<String, Object> config = new HashMap<>();\n        config.put(\"field\", \"field1\");\n        config.put(\"value\", \"value1\");\n        String processorTag = randomAlphaOfLength(10);\n        ElasticsearchException exception = expectThrows(ElasticsearchException.class, () -> factory.create(null, processorTag, config));\n        assertThat(exception.getMessage(), equalTo(\"java.lang.RuntimeException: could not compile script\"));\n        assertThat(exception.getHeader(\"processor_tag\").get(0), equalTo(processorTag));\n    }\n","date":"2018-04-26 03:22:53","endLine":106,"groupId":"72899","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testInvalidMustacheTemplate","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/0d/600283b1dc5af4aad051e03e1f8a125b7be9fc.src","preCode":"    public void testInvalidMustacheTemplate() throws Exception {\n        AppendProcessor.Factory factory = new AppendProcessor.Factory(TestTemplateService.instance(true));\n        Map<String, Object> config = new HashMap<>();\n        config.put(\"field\", \"field1\");\n        config.put(\"value\", \"value1\");\n        String processorTag = randomAlphaOfLength(10);\n        ElasticsearchException exception = expectThrows(ElasticsearchException.class, () -> factory.create(null, processorTag, config));\n        assertThat(exception.getMessage(), equalTo(\"java.lang.RuntimeException: could not compile script\"));\n        assertThat(exception.getHeader(\"processor_tag\").get(0), equalTo(processorTag));\n    }\n","realPath":"modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/AppendProcessorFactoryTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":97,"status":"B"},{"authorDate":"2018-04-26 03:22:53","commitOrder":1,"curCode":"    public void testCreateWithMissingFieldSplit() {\n        KeyValueProcessor.Factory factory = new KeyValueProcessor.Factory();\n        Map<String, Object> config = new HashMap<>();\n        config.put(\"field\", \"field1\");\n        String processorTag = randomAlphaOfLength(10);\n        ElasticsearchException exception = expectThrows(ElasticsearchParseException.class,\n            () -> factory.create(null, processorTag, config));\n        assertThat(exception.getMessage(), equalTo(\"[field_split] required property is missing\"));\n    }\n","date":"2018-04-26 03:22:53","endLine":94,"groupId":"72899","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testCreateWithMissingFieldSplit","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/cc/e8cb5b24b1b487f2448ec7371b3f95ff199ce0.src","preCode":"    public void testCreateWithMissingFieldSplit() {\n        KeyValueProcessor.Factory factory = new KeyValueProcessor.Factory();\n        Map<String, Object> config = new HashMap<>();\n        config.put(\"field\", \"field1\");\n        String processorTag = randomAlphaOfLength(10);\n        ElasticsearchException exception = expectThrows(ElasticsearchParseException.class,\n            () -> factory.create(null, processorTag, config));\n        assertThat(exception.getMessage(), equalTo(\"[field_split] required property is missing\"));\n    }\n","realPath":"modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/KeyValueProcessorFactoryTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":86,"status":"B"}],"commitId":"d74fb9eb4559077e2d20b19a9ed62d9ff825027a","commitMessage":"@@@Opened x-pack ILM code\n","date":"2018-04-26 03:22:53","modifiedFileCount":"0","status":"B","submitter":"Tal Levy"},{"authorTime":"2018-04-26 03:22:53","codes":[{"authorDate":"2018-08-16 03:56:01","commitOrder":2,"curCode":"    public void testInvalidMustacheTemplate() throws Exception {\n        AppendProcessor.Factory factory = new AppendProcessor.Factory(TestTemplateService.instance(true));\n        Map<String, Object> config = new HashMap<>();\n        config.put(\"field\", \"field1\");\n        config.put(\"value\", \"value1\");\n        String processorTag = randomAlphaOfLength(10);\n        ElasticsearchException exception = expectThrows(ElasticsearchException.class, () -> factory.create(null, processorTag, config));\n        assertThat(exception.getMessage(), equalTo(\"java.lang.RuntimeException: could not compile script\"));\n        assertThat(exception.getMetadata(\"es.processor_tag\").get(0), equalTo(processorTag));\n    }\n","date":"2018-08-16 03:56:01","endLine":104,"groupId":"72899","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testInvalidMustacheTemplate","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/d5/1cb368e431793ceec0d8f73b0b1afb853a436b.src","preCode":"    public void testInvalidMustacheTemplate() throws Exception {\n        AppendProcessor.Factory factory = new AppendProcessor.Factory(TestTemplateService.instance(true));\n        Map<String, Object> config = new HashMap<>();\n        config.put(\"field\", \"field1\");\n        config.put(\"value\", \"value1\");\n        String processorTag = randomAlphaOfLength(10);\n        ElasticsearchException exception = expectThrows(ElasticsearchException.class, () -> factory.create(null, processorTag, config));\n        assertThat(exception.getMessage(), equalTo(\"java.lang.RuntimeException: could not compile script\"));\n        assertThat(exception.getHeader(\"processor_tag\").get(0), equalTo(processorTag));\n    }\n","realPath":"modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/AppendProcessorFactoryTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":95,"status":"M"},{"authorDate":"2018-04-26 03:22:53","commitOrder":2,"curCode":"    public void testCreateWithMissingFieldSplit() {\n        KeyValueProcessor.Factory factory = new KeyValueProcessor.Factory();\n        Map<String, Object> config = new HashMap<>();\n        config.put(\"field\", \"field1\");\n        String processorTag = randomAlphaOfLength(10);\n        ElasticsearchException exception = expectThrows(ElasticsearchParseException.class,\n            () -> factory.create(null, processorTag, config));\n        assertThat(exception.getMessage(), equalTo(\"[field_split] required property is missing\"));\n    }\n","date":"2018-04-26 03:22:53","endLine":94,"groupId":"72899","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testCreateWithMissingFieldSplit","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/cc/e8cb5b24b1b487f2448ec7371b3f95ff199ce0.src","preCode":"    public void testCreateWithMissingFieldSplit() {\n        KeyValueProcessor.Factory factory = new KeyValueProcessor.Factory();\n        Map<String, Object> config = new HashMap<>();\n        config.put(\"field\", \"field1\");\n        String processorTag = randomAlphaOfLength(10);\n        ElasticsearchException exception = expectThrows(ElasticsearchParseException.class,\n            () -> factory.create(null, processorTag, config));\n        assertThat(exception.getMessage(), equalTo(\"[field_split] required property is missing\"));\n    }\n","realPath":"modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/KeyValueProcessorFactoryTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":86,"status":"N"}],"commitId":"ec9375660036b3c0a59cb3db60cd0626e9fc5979","commitMessage":"@@@Merge branch 'master' into index-lifecycle\n","date":"2018-08-16 03:56:01","modifiedFileCount":"176","status":"M","submitter":"Tal Levy"},{"authorTime":"2018-04-26 03:22:53","codes":[{"authorDate":"2019-01-10 04:47:47","commitOrder":3,"curCode":"    public void testInvalidMustacheTemplate() throws Exception {\n        AppendProcessor.Factory factory = new AppendProcessor.Factory(TestTemplateService.instance(true));\n        Map<String, Object> config = new HashMap<>();\n        config.put(\"field\", \"{{field1}}\");\n        config.put(\"value\", \"value1\");\n        String processorTag = randomAlphaOfLength(10);\n        ElasticsearchException exception = expectThrows(ElasticsearchException.class, () -> factory.create(null, processorTag, config));\n        assertThat(exception.getMessage(), equalTo(\"java.lang.RuntimeException: could not compile script\"));\n        assertThat(exception.getMetadata(\"es.processor_tag\").get(0), equalTo(processorTag));\n    }\n","date":"2019-01-10 04:47:47","endLine":104,"groupId":"18416","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"testInvalidMustacheTemplate","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/45/44140737612713aa644b4908f5fb42cba69a41.src","preCode":"    public void testInvalidMustacheTemplate() throws Exception {\n        AppendProcessor.Factory factory = new AppendProcessor.Factory(TestTemplateService.instance(true));\n        Map<String, Object> config = new HashMap<>();\n        config.put(\"field\", \"field1\");\n        config.put(\"value\", \"value1\");\n        String processorTag = randomAlphaOfLength(10);\n        ElasticsearchException exception = expectThrows(ElasticsearchException.class, () -> factory.create(null, processorTag, config));\n        assertThat(exception.getMessage(), equalTo(\"java.lang.RuntimeException: could not compile script\"));\n        assertThat(exception.getMetadata(\"es.processor_tag\").get(0), equalTo(processorTag));\n    }\n","realPath":"modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/AppendProcessorFactoryTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":95,"status":"M"},{"authorDate":"2018-04-26 03:22:53","commitOrder":3,"curCode":"    public void testCreateWithMissingFieldSplit() {\n        KeyValueProcessor.Factory factory = new KeyValueProcessor.Factory();\n        Map<String, Object> config = new HashMap<>();\n        config.put(\"field\", \"field1\");\n        String processorTag = randomAlphaOfLength(10);\n        ElasticsearchException exception = expectThrows(ElasticsearchParseException.class,\n            () -> factory.create(null, processorTag, config));\n        assertThat(exception.getMessage(), equalTo(\"[field_split] required property is missing\"));\n    }\n","date":"2018-04-26 03:22:53","endLine":94,"groupId":"72899","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"testCreateWithMissingFieldSplit","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/cc/e8cb5b24b1b487f2448ec7371b3f95ff199ce0.src","preCode":"    public void testCreateWithMissingFieldSplit() {\n        KeyValueProcessor.Factory factory = new KeyValueProcessor.Factory();\n        Map<String, Object> config = new HashMap<>();\n        config.put(\"field\", \"field1\");\n        String processorTag = randomAlphaOfLength(10);\n        ElasticsearchException exception = expectThrows(ElasticsearchParseException.class,\n            () -> factory.create(null, processorTag, config));\n        assertThat(exception.getMessage(), equalTo(\"[field_split] required property is missing\"));\n    }\n","realPath":"modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/KeyValueProcessorFactoryTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":86,"status":"N"}],"commitId":"195873002bd3724c839a4a211c3aa1428f104a3a","commitMessage":"@@@ingest: compile mustache template only if field includes '{{'' (#37207)\n\n* ingest: compile mustache template only if field includes '{{''\n\nPrior to this change.  any field in an ingest node processor that supports\nscript templates would be compiled as mustache template regardless if they\ncontain a template or not. Compiling normal text as mustache templates is\nharmless. However.  each compilation counts against the script compilation\ncircuit breaker. A large number of processors without any templates or scripts\ncould un-intuitively trip the too many script compilations circuit breaker.\n\nThis change simple checks for '{{' in the text before it attempts to compile.\n\nfixes #37120","date":"2019-01-10 04:47:47","modifiedFileCount":"8","status":"M","submitter":"Jake Landis"},{"authorTime":"2020-06-16 05:08:29","codes":[{"authorDate":"2020-06-16 05:08:29","commitOrder":4,"curCode":"    public void testInvalidMustacheTemplate() throws Exception {\n        AppendProcessor.Factory factory = new AppendProcessor.Factory(TestTemplateService.instance(true));\n        Map<String, Object> config = new HashMap<>();\n        config.put(\"field\", \"{{field1}}\");\n        config.put(\"value\", \"value1\");\n        String processorTag = randomAlphaOfLength(10);\n        ElasticsearchException exception = expectThrows(ElasticsearchException.class,\n            () -> factory.create(null, processorTag, null, config));\n        assertThat(exception.getMessage(), equalTo(\"java.lang.RuntimeException: could not compile script\"));\n        assertThat(exception.getMetadata(\"es.processor_tag\").get(0), equalTo(processorTag));\n    }\n","date":"2020-06-16 05:08:29","endLine":105,"groupId":"72899","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"testInvalidMustacheTemplate","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/be/d9e91cb4c25786ae1a38dd5d6db49acb2d1fcc.src","preCode":"    public void testInvalidMustacheTemplate() throws Exception {\n        AppendProcessor.Factory factory = new AppendProcessor.Factory(TestTemplateService.instance(true));\n        Map<String, Object> config = new HashMap<>();\n        config.put(\"field\", \"{{field1}}\");\n        config.put(\"value\", \"value1\");\n        String processorTag = randomAlphaOfLength(10);\n        ElasticsearchException exception = expectThrows(ElasticsearchException.class, () -> factory.create(null, processorTag, config));\n        assertThat(exception.getMessage(), equalTo(\"java.lang.RuntimeException: could not compile script\"));\n        assertThat(exception.getMetadata(\"es.processor_tag\").get(0), equalTo(processorTag));\n    }\n","realPath":"modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/AppendProcessorFactoryTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":95,"status":"M"},{"authorDate":"2020-06-16 05:08:29","commitOrder":4,"curCode":"    public void testCreateWithMissingFieldSplit() {\n        KeyValueProcessor.Factory factory = new KeyValueProcessor.Factory();\n        Map<String, Object> config = new HashMap<>();\n        config.put(\"field\", \"field1\");\n        String processorTag = randomAlphaOfLength(10);\n        ElasticsearchException exception = expectThrows(ElasticsearchParseException.class,\n            () -> factory.create(null, processorTag, null, config));\n        assertThat(exception.getMessage(), equalTo(\"[field_split] required property is missing\"));\n    }\n","date":"2020-06-16 05:08:29","endLine":94,"groupId":"72899","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"testCreateWithMissingFieldSplit","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/7e/6aa741cea7c834ab3d0f6b9cad9fb214cd694a.src","preCode":"    public void testCreateWithMissingFieldSplit() {\n        KeyValueProcessor.Factory factory = new KeyValueProcessor.Factory();\n        Map<String, Object> config = new HashMap<>();\n        config.put(\"field\", \"field1\");\n        String processorTag = randomAlphaOfLength(10);\n        ElasticsearchException exception = expectThrows(ElasticsearchParseException.class,\n            () -> factory.create(null, processorTag, config));\n        assertThat(exception.getMessage(), equalTo(\"[field_split] required property is missing\"));\n    }\n","realPath":"modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/KeyValueProcessorFactoryTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":86,"status":"M"}],"commitId":"69a6a18d8dc3f95001cfe6f55c1451ac616f7e84","commitMessage":"@@@Add optional description parameter to ingest processors. (#57906)\n\nThis commit adds an optional field.  `description`.  to all ingest processors\nso that users can explain the purpose of the specific processor instance.\n\nCloses #56000.","date":"2020-06-16 05:08:29","modifiedFileCount":"125","status":"M","submitter":"Tal Levy"},{"authorTime":"2021-06-23 05:32:11","codes":[{"authorDate":"2020-06-16 05:08:29","commitOrder":5,"curCode":"    public void testInvalidMustacheTemplate() throws Exception {\n        AppendProcessor.Factory factory = new AppendProcessor.Factory(TestTemplateService.instance(true));\n        Map<String, Object> config = new HashMap<>();\n        config.put(\"field\", \"{{field1}}\");\n        config.put(\"value\", \"value1\");\n        String processorTag = randomAlphaOfLength(10);\n        ElasticsearchException exception = expectThrows(ElasticsearchException.class,\n            () -> factory.create(null, processorTag, null, config));\n        assertThat(exception.getMessage(), equalTo(\"java.lang.RuntimeException: could not compile script\"));\n        assertThat(exception.getMetadata(\"es.processor_tag\").get(0), equalTo(processorTag));\n    }\n","date":"2020-06-16 05:08:29","endLine":105,"groupId":"10410","id":9,"instanceNumber":1,"isCurCommit":0,"methodName":"testInvalidMustacheTemplate","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/be/d9e91cb4c25786ae1a38dd5d6db49acb2d1fcc.src","preCode":"    public void testInvalidMustacheTemplate() throws Exception {\n        AppendProcessor.Factory factory = new AppendProcessor.Factory(TestTemplateService.instance(true));\n        Map<String, Object> config = new HashMap<>();\n        config.put(\"field\", \"{{field1}}\");\n        config.put(\"value\", \"value1\");\n        String processorTag = randomAlphaOfLength(10);\n        ElasticsearchException exception = expectThrows(ElasticsearchException.class,\n            () -> factory.create(null, processorTag, null, config));\n        assertThat(exception.getMessage(), equalTo(\"java.lang.RuntimeException: could not compile script\"));\n        assertThat(exception.getMetadata(\"es.processor_tag\").get(0), equalTo(processorTag));\n    }\n","realPath":"modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/AppendProcessorFactoryTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":95,"status":"N"},{"authorDate":"2021-06-23 05:32:11","commitOrder":5,"curCode":"    public void testCreateWithMissingFieldSplit() {\n        Map<String, Object> config = new HashMap<>();\n        config.put(\"field\", \"field1\");\n        String processorTag = randomAlphaOfLength(10);\n        ElasticsearchException exception = expectThrows(ElasticsearchParseException.class,\n            () -> factory.create(null, processorTag, null, config));\n        assertThat(exception.getMessage(), equalTo(\"[field_split] required property is missing\"));\n    }\n","date":"2021-06-23 05:32:11","endLine":88,"groupId":"10410","id":10,"instanceNumber":2,"isCurCommit":1,"methodName":"testCreateWithMissingFieldSplit","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/b1/4d13d2d6e5dc425f8050fec54be8a10f432829.src","preCode":"    public void testCreateWithMissingFieldSplit() {\n        KeyValueProcessor.Factory factory = new KeyValueProcessor.Factory();\n        Map<String, Object> config = new HashMap<>();\n        config.put(\"field\", \"field1\");\n        String processorTag = randomAlphaOfLength(10);\n        ElasticsearchException exception = expectThrows(ElasticsearchParseException.class,\n            () -> factory.create(null, processorTag, null, config));\n        assertThat(exception.getMessage(), equalTo(\"[field_split] required property is missing\"));\n    }\n","realPath":"modules/ingest-common/src/test/java/org/elasticsearch/ingest/common/KeyValueProcessorFactoryTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":81,"status":"M"}],"commitId":"42c0be4c67db7d7252250b4c096274c0565fd7f0","commitMessage":"@@@Add template snippets support for KV ingest processor (#73758)\n\n","date":"2021-06-23 05:32:11","modifiedFileCount":"4","status":"M","submitter":"bellengao"}]
