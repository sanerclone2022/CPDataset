[{"authorTime":"2018-04-26 03:22:53","codes":[{"authorDate":"2018-04-26 03:22:53","commitOrder":1,"curCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().documentMapperParser().parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(SourceToParse.source(\"test\", \"type\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_id\", \"1\").endObject()), XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertTrue(e.getMessage(), e.getMessage().contains(\"Field [_id] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","date":"2018-04-26 03:22:53","endLine":60,"groupId":"65963","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testIncludeInObjectNotAllowed","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/18/413100418edf1378ff0b0d09406a7781dee0ce.src","preCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().documentMapperParser().parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(SourceToParse.source(\"test\", \"type\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_id\", \"1\").endObject()), XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertTrue(e.getMessage(), e.getMessage().contains(\"Field [_id] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/IdFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":49,"status":"B"},{"authorDate":"2018-04-26 03:22:53","commitOrder":1,"curCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().documentMapperParser().parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(SourceToParse.source(\"test\", \"type\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_routing\", \"foo\").endObject()),XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertTrue(e.getMessage(), e.getMessage().contains(\"Field [_routing] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","date":"2018-04-26 03:22:53","endLine":60,"groupId":"53119","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testIncludeInObjectNotAllowed","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/1b/83b1bcb5b67a646db62f34ca7e2a0da6d517d7.src","preCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().documentMapperParser().parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(SourceToParse.source(\"test\", \"type\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_routing\", \"foo\").endObject()),XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertTrue(e.getMessage(), e.getMessage().contains(\"Field [_routing] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/RoutingFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":49,"status":"B"}],"commitId":"d74fb9eb4559077e2d20b19a9ed62d9ff825027a","commitMessage":"@@@Opened x-pack ILM code\n","date":"2018-04-26 03:22:53","modifiedFileCount":"0","status":"B","submitter":"Tal Levy"},{"authorTime":"2018-11-01 01:47:07","codes":[{"authorDate":"2018-04-26 03:22:53","commitOrder":2,"curCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().documentMapperParser().parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(SourceToParse.source(\"test\", \"type\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_id\", \"1\").endObject()), XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertTrue(e.getMessage(), e.getMessage().contains(\"Field [_id] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","date":"2018-04-26 03:22:53","endLine":60,"groupId":"65963","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testIncludeInObjectNotAllowed","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/18/413100418edf1378ff0b0d09406a7781dee0ce.src","preCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().documentMapperParser().parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(SourceToParse.source(\"test\", \"type\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_id\", \"1\").endObject()), XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertTrue(e.getMessage(), e.getMessage().contains(\"Field [_id] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/IdFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":49,"status":"N"},{"authorDate":"2018-11-01 01:47:07","commitOrder":2,"curCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(SourceToParse.source(\"test\", \"type\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_routing\", \"foo\").endObject()),XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertThat(e.getMessage(), e.getMessage(),\n                containsString(\"Field [_routing] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","date":"2018-11-01 01:47:07","endLine":64,"groupId":"53119","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testIncludeInObjectNotAllowed","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/11/c858545d03fdfba7bbc3fef1706095ce0ea58f.src","preCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().documentMapperParser().parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(SourceToParse.source(\"test\", \"type\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_routing\", \"foo\").endObject()),XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertTrue(e.getMessage(), e.getMessage().contains(\"Field [_routing] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/RoutingFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":51,"status":"M"}],"commitId":"d5d28420b636275705d7998a88592b4060b905db","commitMessage":"@@@Merge remote-tracking branch 'upstream/master' into index-lifecycle\n","date":"2018-11-01 01:47:07","modifiedFileCount":"168","status":"M","submitter":"Tal Levy"},{"authorTime":"2018-12-25 03:06:50","codes":[{"authorDate":"2018-12-25 03:06:50","commitOrder":3,"curCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(new SourceToParse(\"test\", \"type\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_id\", \"1\").endObject()), XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertTrue(e.getMessage(), e.getMessage().contains(\"Field [_id] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","date":"2018-12-25 03:06:50","endLine":59,"groupId":"0","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"testIncludeInObjectNotAllowed","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/f0/15dee1f8931bd1d1a5baf8c724a2a2f9da043c.src","preCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(SourceToParse.source(\"test\", \"type\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_id\", \"1\").endObject()), XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertTrue(e.getMessage(), e.getMessage().contains(\"Field [_id] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/IdFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":47,"status":"M"},{"authorDate":"2018-12-25 03:06:50","commitOrder":3,"curCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(new SourceToParse(\"test\", \"type\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_routing\", \"foo\").endObject()),XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertThat(e.getMessage(), e.getMessage(),\n                containsString(\"Field [_routing] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","date":"2018-12-25 03:06:50","endLine":64,"groupId":"0","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"testIncludeInObjectNotAllowed","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/3d/a00e3f787c951b7b62ea5fed1a28329e092c51.src","preCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(SourceToParse.source(\"test\", \"type\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_routing\", \"foo\").endObject()),XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertThat(e.getMessage(), e.getMessage(),\n                containsString(\"Field [_routing] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/RoutingFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":51,"status":"M"}],"commitId":"7580d9d925d864b25466d693637b3bd3092d44cf","commitMessage":"@@@Make SourceToParse immutable (#36971)\n\nToday the routing of a SourceToParse is assigned in a separate step\nafter the object is created. We can easily forget to set the routing.\nWith this commit.  the routing must be provided in the constructor of\nSourceToParse.\n\nRelates #36921","date":"2018-12-25 03:06:50","modifiedFileCount":"66","status":"M","submitter":"Nhat Nguyen"},{"authorTime":"2019-10-15 16:05:29","codes":[{"authorDate":"2019-10-15 16:05:29","commitOrder":4,"curCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(new SourceToParse(\"test\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_id\", \"1\").endObject()), XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertTrue(e.getMessage(), e.getMessage().contains(\"Field [_id] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","date":"2019-10-15 16:05:29","endLine":59,"groupId":"38029","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"testIncludeInObjectNotAllowed","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/4f/2198c577a3f8873580aa0a256654fe69636686.src","preCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(new SourceToParse(\"test\", \"type\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_id\", \"1\").endObject()), XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertTrue(e.getMessage(), e.getMessage().contains(\"Field [_id] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/IdFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":47,"status":"M"},{"authorDate":"2019-10-15 16:05:29","commitOrder":4,"curCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(new SourceToParse(\"test\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_routing\", \"foo\").endObject()),XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertThat(e.getMessage(), e.getMessage(),\n                containsString(\"Field [_routing] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","date":"2019-10-15 16:05:29","endLine":64,"groupId":"26836","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"testIncludeInObjectNotAllowed","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/d4/e6f685aeeb2805bcadf128377c4d9ccf67a746.src","preCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(new SourceToParse(\"test\", \"type\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_routing\", \"foo\").endObject()),XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertThat(e.getMessage(), e.getMessage(),\n                containsString(\"Field [_routing] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/RoutingFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":51,"status":"M"}],"commitId":"6531369f11d159896957b75a7eae0b7da214d01a","commitMessage":"@@@Don't persist type information to translog (#47229)\n\nWe no longer need to store type information in the translog.  given that an index\ncan only have a single type.\n\nRelates to #41059","date":"2019-10-15 16:05:29","modifiedFileCount":"100","status":"M","submitter":"Alan Woodward"},{"authorTime":"2020-09-18 14:45:32","codes":[{"authorDate":"2020-09-18 14:45:32","commitOrder":5,"curCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(new SourceToParse(\"test\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_id\", \"1\").endObject()), XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertTrue(e.getCause().getMessage(),\n                e.getCause().getMessage().contains(\"Field [_id] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","date":"2020-09-18 14:45:32","endLine":65,"groupId":"38029","id":9,"instanceNumber":1,"isCurCommit":0,"methodName":"testIncludeInObjectNotAllowed","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/fb/f593df5fc5b93143e894802d64c6653aeb5f50.src","preCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(new SourceToParse(\"test\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_id\", \"1\").endObject()), XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertTrue(e.getMessage(), e.getMessage().contains(\"Field [_id] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/IdFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":52,"status":"M"},{"authorDate":"2020-09-18 14:45:32","commitOrder":5,"curCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(new SourceToParse(\"test\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_routing\", \"foo\").endObject()),XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertThat(e.getCause().getMessage(), e.getCause().getMessage(),\n                containsString(\"Field [_routing] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","date":"2020-09-18 14:45:32","endLine":64,"groupId":"26836","id":10,"instanceNumber":2,"isCurCommit":0,"methodName":"testIncludeInObjectNotAllowed","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/cf/1404875382c61ba4f528e8f523a966ae7bd511.src","preCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(new SourceToParse(\"test\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_routing\", \"foo\").endObject()),XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertThat(e.getMessage(), e.getMessage(),\n                containsString(\"Field [_routing] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/RoutingFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":51,"status":"M"}],"commitId":"55294e5c424e93efbe314b3f0a4bb610836ad570","commitMessage":"@@@Allow metadata fields in the _source (#61590)\n\n* Configurable metadata field mappers in the _source\n\n* Changes to support metadata fields in _source\nAdded test testDocumentContainsAllowedMetadataField()\n\n* Merged DocumentParserTests from master\nFixed broken tests\n\n* Handle non string values\n\n* Allow metadata fields to parse values/objects/arrays/null\n\n* Removed MetadataFieldMapper.isAllowedInSource() method\n\nDelegated this functionality to MetadataFieldMapper.parse()\n\n* Fixed bug that caused tests to break\n\n* Cleanup parsing for existing metadata fields\n\n* Cleanup parsing for existing metadata fields\n\n* Remove doParse() method\n\n* Fix broken test\n\n* Lookup metadata mapper by name\n\nInstead of linear scan","date":"2020-09-18 14:45:32","modifiedFileCount":"22","status":"M","submitter":"Christos Soulios"},{"authorTime":"2020-10-21 02:11:29","codes":[{"authorDate":"2020-10-21 02:11:29","commitOrder":6,"curCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(new SourceToParse(\"test\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_id\", \"1\").endObject()), XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertTrue(e.getCause().getMessage(),\n                e.getCause().getMessage().contains(\"Field [_id] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","date":"2020-10-21 02:11:29","endLine":64,"groupId":"0","id":11,"instanceNumber":1,"isCurCommit":0,"methodName":"testIncludeInObjectNotAllowed","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/85/a6af847950d0a7a1d81a4c1a363e33de70cb1d.src","preCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(new SourceToParse(\"test\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_id\", \"1\").endObject()), XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertTrue(e.getCause().getMessage(),\n                e.getCause().getMessage().contains(\"Field [_id] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/IdFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":52,"status":"M"},{"authorDate":"2020-10-21 02:11:29","commitOrder":6,"curCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(new SourceToParse(\"test\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_routing\", \"foo\").endObject()),XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertThat(e.getCause().getMessage(), e.getCause().getMessage(),\n                containsString(\"Field [_routing] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","date":"2020-10-21 02:11:29","endLine":62,"groupId":"0","id":12,"instanceNumber":2,"isCurCommit":0,"methodName":"testIncludeInObjectNotAllowed","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/cd/57c8fa7b176fe8c4fc95902db559ecaa6b907a.src","preCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(new SourceToParse(\"test\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_routing\", \"foo\").endObject()),XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertThat(e.getCause().getMessage(), e.getCause().getMessage(),\n                containsString(\"Field [_routing] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/RoutingFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":50,"status":"M"}],"commitId":"b96f26eba2049ffafb3197fbbb1942b3cdf8733a","commitMessage":"@@@Remove documentMapperParser method from MapperService (#63938)\n\nMapperService allows to retrieve its internal DocumentMapperParser instance. Such method is only used in tests.  and always to parse mappings which is already exposed by MapperService through a specific parse method.\n\nThis commit removes the getter for DocumentMapperParser from MapperService in favour of calling MapperService#parse","date":"2020-10-21 02:11:29","modifiedFileCount":"27","status":"M","submitter":"Luca Cavanna"},{"authorTime":"2020-10-21 02:11:29","codes":[{"authorDate":"2020-10-21 23:16:11","commitOrder":7,"curCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        DocumentMapper docMapper = createDocumentMapper(mapping(b -> {}));\n\n        Exception e = expectThrows(MapperParsingException.class,\n            () -> docMapper.parse(source(b -> b.field(\"_id\", 1))));\n\n        assertThat(e.getCause().getMessage(),\n            containsString(\"Field [_id] is a metadata field and cannot be added inside a document\"));\n    }\n","date":"2020-10-21 23:16:11","endLine":41,"groupId":"55540","id":13,"instanceNumber":1,"isCurCommit":0,"methodName":"testIncludeInObjectNotAllowed","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/9b/4c26615bd59362a809438afb23ec1530e3d6d8.src","preCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(new SourceToParse(\"test\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_id\", \"1\").endObject()), XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertTrue(e.getCause().getMessage(),\n                e.getCause().getMessage().contains(\"Field [_id] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/IdFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":33,"status":"M"},{"authorDate":"2020-10-21 02:11:29","commitOrder":7,"curCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(new SourceToParse(\"test\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_routing\", \"foo\").endObject()),XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertThat(e.getCause().getMessage(), e.getCause().getMessage(),\n                containsString(\"Field [_routing] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","date":"2020-10-21 02:11:29","endLine":62,"groupId":"0","id":14,"instanceNumber":2,"isCurCommit":0,"methodName":"testIncludeInObjectNotAllowed","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/cd/57c8fa7b176fe8c4fc95902db559ecaa6b907a.src","preCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(new SourceToParse(\"test\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_routing\", \"foo\").endObject()),XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertThat(e.getCause().getMessage(), e.getCause().getMessage(),\n                containsString(\"Field [_routing] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/RoutingFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":50,"status":"N"}],"commitId":"e075e0fab0715a3b484dff5df810f3e0903d110b","commitMessage":"@@@Convert some more tests to MapperServiceTestCase (#63997)\n\nRelates to #62774","date":"2020-10-21 23:16:11","modifiedFileCount":"7","status":"M","submitter":"Alan Woodward"},{"authorTime":"2021-01-06 23:15:00","codes":[{"authorDate":"2020-10-21 23:16:11","commitOrder":8,"curCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        DocumentMapper docMapper = createDocumentMapper(mapping(b -> {}));\n\n        Exception e = expectThrows(MapperParsingException.class,\n            () -> docMapper.parse(source(b -> b.field(\"_id\", 1))));\n\n        assertThat(e.getCause().getMessage(),\n            containsString(\"Field [_id] is a metadata field and cannot be added inside a document\"));\n    }\n","date":"2020-10-21 23:16:11","endLine":41,"groupId":"103062","id":15,"instanceNumber":1,"isCurCommit":0,"methodName":"testIncludeInObjectNotAllowed","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/9b/4c26615bd59362a809438afb23ec1530e3d6d8.src","preCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        DocumentMapper docMapper = createDocumentMapper(mapping(b -> {}));\n\n        Exception e = expectThrows(MapperParsingException.class,\n            () -> docMapper.parse(source(b -> b.field(\"_id\", 1))));\n\n        assertThat(e.getCause().getMessage(),\n            containsString(\"Field [_id] is a metadata field and cannot be added inside a document\"));\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/IdFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":33,"status":"N"},{"authorDate":"2021-01-06 23:15:00","commitOrder":8,"curCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        DocumentMapper docMapper = createDocumentMapper(mapping(b -> {}));\n        Exception e = expectThrows(MapperParsingException.class,\n            () -> docMapper.parse(source(b -> b.field(\"_routing\", \"foo\"))));\n\n        assertThat(e.getCause().getMessage(),\n                containsString(\"Field [_routing] is a metadata field and cannot be added inside a document\"));\n    }\n","date":"2021-01-06 23:15:00","endLine":64,"groupId":"103062","id":16,"instanceNumber":2,"isCurCommit":0,"methodName":"testIncludeInObjectNotAllowed","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/77/1290d837883eaf783d3df20e793ccc5828521f.src","preCode":"    public void testIncludeInObjectNotAllowed() throws Exception {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\").endObject().endObject());\n        DocumentMapper docMapper = createIndex(\"test\").mapperService().parse(\"type\", new CompressedXContent(mapping));\n\n        try {\n            docMapper.parse(new SourceToParse(\"test\", \"1\", BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"_routing\", \"foo\").endObject()),XContentType.JSON));\n            fail(\"Expected failure to parse metadata field\");\n        } catch (MapperParsingException e) {\n            assertThat(e.getCause().getMessage(), e.getCause().getMessage(),\n                containsString(\"Field [_routing] is a metadata field and cannot be added inside a document\"));\n        }\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/RoutingFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":57,"status":"M"}],"commitId":"3945bf7a409a3b66160aaec45455cafbffff2c41","commitMessage":"@@@Convert metadata mapper tests to use MapperServiceTestCase (#66334)\n\nA number of metadata field mapper tests are still extending ESSingleNodeTestCase.\nThis commit changes them to use MapperServiceTestCase instead.  and adds a new\nbase class for those metadata fields that have parameters subject to conflict checks.","date":"2021-01-06 23:15:00","modifiedFileCount":"12","status":"M","submitter":"Alan Woodward"}]
