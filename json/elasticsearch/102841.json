[{"authorTime":"2018-04-26 03:22:53","codes":[{"authorDate":"2018-04-26 03:22:53","commitOrder":1,"curCode":"    public void testDynamicDottedFieldNameLong() throws Exception {\n        DocumentMapperParser mapperParser = createIndex(\"test\").mapperService().documentMapperParser();\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\")\n            .endObject().endObject());\n        DocumentMapper mapper = mapperParser.parse(\"type\", new CompressedXContent(mapping));\n\n        BytesReference bytes = BytesReference.bytes(XContentFactory.jsonBuilder()\n            .startObject().field(\"foo.bar.baz\", 0)\n            .endObject());\n        ParsedDocument doc = mapper.parse(SourceToParse.source(\"test\", \"type\", \"1\", bytes, XContentType.JSON));\n        assertEquals(2, doc.rootDoc().getFields(\"foo.bar.baz\").length);\n        Mapper fooMapper = doc.dynamicMappingsUpdate().root().getMapper(\"foo\");\n        assertNotNull(fooMapper);\n        assertThat(fooMapper, instanceOf(ObjectMapper.class));\n        Mapper barMapper = ((ObjectMapper) fooMapper).getMapper(\"bar\");\n        assertNotNull(barMapper);\n        assertThat(barMapper, instanceOf(ObjectMapper.class));\n        Mapper bazMapper = ((ObjectMapper) barMapper).getMapper(\"baz\");\n        assertNotNull(bazMapper);\n        assertThat(bazMapper, instanceOf(NumberFieldMapper.class));\n    }\n","date":"2018-04-26 03:22:53","endLine":760,"groupId":"61109","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testDynamicDottedFieldNameLong","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/11/f69c738e949d93045fcd94f9dee0b99ddc0359.src","preCode":"    public void testDynamicDottedFieldNameLong() throws Exception {\n        DocumentMapperParser mapperParser = createIndex(\"test\").mapperService().documentMapperParser();\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\")\n            .endObject().endObject());\n        DocumentMapper mapper = mapperParser.parse(\"type\", new CompressedXContent(mapping));\n\n        BytesReference bytes = BytesReference.bytes(XContentFactory.jsonBuilder()\n            .startObject().field(\"foo.bar.baz\", 0)\n            .endObject());\n        ParsedDocument doc = mapper.parse(SourceToParse.source(\"test\", \"type\", \"1\", bytes, XContentType.JSON));\n        assertEquals(2, doc.rootDoc().getFields(\"foo.bar.baz\").length);\n        Mapper fooMapper = doc.dynamicMappingsUpdate().root().getMapper(\"foo\");\n        assertNotNull(fooMapper);\n        assertThat(fooMapper, instanceOf(ObjectMapper.class));\n        Mapper barMapper = ((ObjectMapper) fooMapper).getMapper(\"bar\");\n        assertNotNull(barMapper);\n        assertThat(barMapper, instanceOf(ObjectMapper.class));\n        Mapper bazMapper = ((ObjectMapper) barMapper).getMapper(\"baz\");\n        assertNotNull(bazMapper);\n        assertThat(bazMapper, instanceOf(NumberFieldMapper.class));\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/DocumentParserTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":740,"status":"B"},{"authorDate":"2018-04-26 03:22:53","commitOrder":1,"curCode":"    public void testDynamicDottedFieldNameLongWithParentTemplate() throws Exception {\n        DocumentMapperParser mapperParser = createIndex(\"test\").mapperService().documentMapperParser();\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\")\n            .startArray(\"dynamic_templates\").startObject().startObject(\"georule\")\n                .field(\"match\", \"foo*\")\n                .startObject(\"mapping\").field(\"type\", \"object\").endObject()\n            .endObject().endObject().endArray().endObject().endObject());\n        DocumentMapper mapper = mapperParser.parse(\"type\", new CompressedXContent(mapping));\n\n        BytesReference bytes = BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"foo.bar.baz\", 0)\n            .endObject());\n        ParsedDocument doc = mapper.parse(SourceToParse.source(\"test\", \"type\", \"1\", bytes, XContentType.JSON));\n        assertEquals(2, doc.rootDoc().getFields(\"foo.bar.baz\").length);\n        Mapper fooMapper = doc.dynamicMappingsUpdate().root().getMapper(\"foo\");\n        assertNotNull(fooMapper);\n        assertThat(fooMapper, instanceOf(ObjectMapper.class));\n        Mapper barMapper = ((ObjectMapper) fooMapper).getMapper(\"bar\");\n        assertNotNull(barMapper);\n        assertThat(barMapper, instanceOf(ObjectMapper.class));\n        Mapper bazMapper = ((ObjectMapper) barMapper).getMapper(\"baz\");\n        assertNotNull(bazMapper);\n        assertThat(bazMapper, instanceOf(NumberFieldMapper.class));\n    }\n","date":"2018-04-26 03:22:53","endLine":785,"groupId":"61109","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testDynamicDottedFieldNameLongWithParentTemplate","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/11/f69c738e949d93045fcd94f9dee0b99ddc0359.src","preCode":"    public void testDynamicDottedFieldNameLongWithParentTemplate() throws Exception {\n        DocumentMapperParser mapperParser = createIndex(\"test\").mapperService().documentMapperParser();\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\")\n            .startArray(\"dynamic_templates\").startObject().startObject(\"georule\")\n                .field(\"match\", \"foo*\")\n                .startObject(\"mapping\").field(\"type\", \"object\").endObject()\n            .endObject().endObject().endArray().endObject().endObject());\n        DocumentMapper mapper = mapperParser.parse(\"type\", new CompressedXContent(mapping));\n\n        BytesReference bytes = BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"foo.bar.baz\", 0)\n            .endObject());\n        ParsedDocument doc = mapper.parse(SourceToParse.source(\"test\", \"type\", \"1\", bytes, XContentType.JSON));\n        assertEquals(2, doc.rootDoc().getFields(\"foo.bar.baz\").length);\n        Mapper fooMapper = doc.dynamicMappingsUpdate().root().getMapper(\"foo\");\n        assertNotNull(fooMapper);\n        assertThat(fooMapper, instanceOf(ObjectMapper.class));\n        Mapper barMapper = ((ObjectMapper) fooMapper).getMapper(\"bar\");\n        assertNotNull(barMapper);\n        assertThat(barMapper, instanceOf(ObjectMapper.class));\n        Mapper bazMapper = ((ObjectMapper) barMapper).getMapper(\"baz\");\n        assertNotNull(bazMapper);\n        assertThat(bazMapper, instanceOf(NumberFieldMapper.class));\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/DocumentParserTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":762,"status":"B"}],"commitId":"d74fb9eb4559077e2d20b19a9ed62d9ff825027a","commitMessage":"@@@Opened x-pack ILM code\n","date":"2018-04-26 03:22:53","modifiedFileCount":"0","status":"B","submitter":"Tal Levy"},{"authorTime":"2018-12-25 03:06:50","codes":[{"authorDate":"2018-12-25 03:06:50","commitOrder":2,"curCode":"    public void testDynamicDottedFieldNameLong() throws Exception {\n        DocumentMapperParser mapperParser = createIndex(\"test\").mapperService().documentMapperParser();\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\")\n            .endObject().endObject());\n        DocumentMapper mapper = mapperParser.parse(\"type\", new CompressedXContent(mapping));\n\n        BytesReference bytes = BytesReference.bytes(XContentFactory.jsonBuilder()\n            .startObject().field(\"foo.bar.baz\", 0)\n            .endObject());\n        ParsedDocument doc = mapper.parse(new SourceToParse(\"test\", \"type\", \"1\", bytes, XContentType.JSON));\n        assertEquals(2, doc.rootDoc().getFields(\"foo.bar.baz\").length);\n        Mapper fooMapper = doc.dynamicMappingsUpdate().root().getMapper(\"foo\");\n        assertNotNull(fooMapper);\n        assertThat(fooMapper, instanceOf(ObjectMapper.class));\n        Mapper barMapper = ((ObjectMapper) fooMapper).getMapper(\"bar\");\n        assertNotNull(barMapper);\n        assertThat(barMapper, instanceOf(ObjectMapper.class));\n        Mapper bazMapper = ((ObjectMapper) barMapper).getMapper(\"baz\");\n        assertNotNull(bazMapper);\n        assertThat(bazMapper, instanceOf(NumberFieldMapper.class));\n    }\n","date":"2018-12-25 03:06:50","endLine":808,"groupId":"61109","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testDynamicDottedFieldNameLong","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/ff/db93474c0e954401f67f66f5529d7452db700a.src","preCode":"    public void testDynamicDottedFieldNameLong() throws Exception {\n        DocumentMapperParser mapperParser = createIndex(\"test\").mapperService().documentMapperParser();\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\")\n            .endObject().endObject());\n        DocumentMapper mapper = mapperParser.parse(\"type\", new CompressedXContent(mapping));\n\n        BytesReference bytes = BytesReference.bytes(XContentFactory.jsonBuilder()\n            .startObject().field(\"foo.bar.baz\", 0)\n            .endObject());\n        ParsedDocument doc = mapper.parse(SourceToParse.source(\"test\", \"type\", \"1\", bytes, XContentType.JSON));\n        assertEquals(2, doc.rootDoc().getFields(\"foo.bar.baz\").length);\n        Mapper fooMapper = doc.dynamicMappingsUpdate().root().getMapper(\"foo\");\n        assertNotNull(fooMapper);\n        assertThat(fooMapper, instanceOf(ObjectMapper.class));\n        Mapper barMapper = ((ObjectMapper) fooMapper).getMapper(\"bar\");\n        assertNotNull(barMapper);\n        assertThat(barMapper, instanceOf(ObjectMapper.class));\n        Mapper bazMapper = ((ObjectMapper) barMapper).getMapper(\"baz\");\n        assertNotNull(bazMapper);\n        assertThat(bazMapper, instanceOf(NumberFieldMapper.class));\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/DocumentParserTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":788,"status":"M"},{"authorDate":"2018-12-25 03:06:50","commitOrder":2,"curCode":"    public void testDynamicDottedFieldNameLongWithParentTemplate() throws Exception {\n        DocumentMapperParser mapperParser = createIndex(\"test\").mapperService().documentMapperParser();\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\")\n            .startArray(\"dynamic_templates\").startObject().startObject(\"georule\")\n                .field(\"match\", \"foo*\")\n                .startObject(\"mapping\").field(\"type\", \"object\").endObject()\n            .endObject().endObject().endArray().endObject().endObject());\n        DocumentMapper mapper = mapperParser.parse(\"type\", new CompressedXContent(mapping));\n\n        BytesReference bytes = BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"foo.bar.baz\", 0)\n            .endObject());\n        ParsedDocument doc = mapper.parse(new SourceToParse(\"test\", \"type\", \"1\", bytes, XContentType.JSON));\n        assertEquals(2, doc.rootDoc().getFields(\"foo.bar.baz\").length);\n        Mapper fooMapper = doc.dynamicMappingsUpdate().root().getMapper(\"foo\");\n        assertNotNull(fooMapper);\n        assertThat(fooMapper, instanceOf(ObjectMapper.class));\n        Mapper barMapper = ((ObjectMapper) fooMapper).getMapper(\"bar\");\n        assertNotNull(barMapper);\n        assertThat(barMapper, instanceOf(ObjectMapper.class));\n        Mapper bazMapper = ((ObjectMapper) barMapper).getMapper(\"baz\");\n        assertNotNull(bazMapper);\n        assertThat(bazMapper, instanceOf(NumberFieldMapper.class));\n    }\n","date":"2018-12-25 03:06:50","endLine":833,"groupId":"61109","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testDynamicDottedFieldNameLongWithParentTemplate","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/ff/db93474c0e954401f67f66f5529d7452db700a.src","preCode":"    public void testDynamicDottedFieldNameLongWithParentTemplate() throws Exception {\n        DocumentMapperParser mapperParser = createIndex(\"test\").mapperService().documentMapperParser();\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\")\n            .startArray(\"dynamic_templates\").startObject().startObject(\"georule\")\n                .field(\"match\", \"foo*\")\n                .startObject(\"mapping\").field(\"type\", \"object\").endObject()\n            .endObject().endObject().endArray().endObject().endObject());\n        DocumentMapper mapper = mapperParser.parse(\"type\", new CompressedXContent(mapping));\n\n        BytesReference bytes = BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"foo.bar.baz\", 0)\n            .endObject());\n        ParsedDocument doc = mapper.parse(SourceToParse.source(\"test\", \"type\", \"1\", bytes, XContentType.JSON));\n        assertEquals(2, doc.rootDoc().getFields(\"foo.bar.baz\").length);\n        Mapper fooMapper = doc.dynamicMappingsUpdate().root().getMapper(\"foo\");\n        assertNotNull(fooMapper);\n        assertThat(fooMapper, instanceOf(ObjectMapper.class));\n        Mapper barMapper = ((ObjectMapper) fooMapper).getMapper(\"bar\");\n        assertNotNull(barMapper);\n        assertThat(barMapper, instanceOf(ObjectMapper.class));\n        Mapper bazMapper = ((ObjectMapper) barMapper).getMapper(\"baz\");\n        assertNotNull(bazMapper);\n        assertThat(bazMapper, instanceOf(NumberFieldMapper.class));\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/DocumentParserTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":810,"status":"M"}],"commitId":"7580d9d925d864b25466d693637b3bd3092d44cf","commitMessage":"@@@Make SourceToParse immutable (#36971)\n\nToday the routing of a SourceToParse is assigned in a separate step\nafter the object is created. We can easily forget to set the routing.\nWith this commit.  the routing must be provided in the constructor of\nSourceToParse.\n\nRelates #36921","date":"2018-12-25 03:06:50","modifiedFileCount":"66","status":"M","submitter":"Nhat Nguyen"},{"authorTime":"2019-10-15 16:05:29","codes":[{"authorDate":"2019-10-15 16:05:29","commitOrder":3,"curCode":"    public void testDynamicDottedFieldNameLong() throws Exception {\n        DocumentMapperParser mapperParser = createIndex(\"test\").mapperService().documentMapperParser();\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\")\n            .endObject().endObject());\n        DocumentMapper mapper = mapperParser.parse(\"type\", new CompressedXContent(mapping));\n\n        BytesReference bytes = BytesReference.bytes(XContentFactory.jsonBuilder()\n            .startObject().field(\"foo.bar.baz\", 0)\n            .endObject());\n        ParsedDocument doc = mapper.parse(new SourceToParse(\"test\", \"1\", bytes, XContentType.JSON));\n        assertEquals(2, doc.rootDoc().getFields(\"foo.bar.baz\").length);\n        Mapper fooMapper = doc.dynamicMappingsUpdate().root().getMapper(\"foo\");\n        assertNotNull(fooMapper);\n        assertThat(fooMapper, instanceOf(ObjectMapper.class));\n        Mapper barMapper = ((ObjectMapper) fooMapper).getMapper(\"bar\");\n        assertNotNull(barMapper);\n        assertThat(barMapper, instanceOf(ObjectMapper.class));\n        Mapper bazMapper = ((ObjectMapper) barMapper).getMapper(\"baz\");\n        assertNotNull(bazMapper);\n        assertThat(bazMapper, instanceOf(NumberFieldMapper.class));\n    }\n","date":"2019-10-15 16:05:29","endLine":918,"groupId":"61109","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"testDynamicDottedFieldNameLong","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/d8/8518d073d058bcafb3785a743b3df978586b3d.src","preCode":"    public void testDynamicDottedFieldNameLong() throws Exception {\n        DocumentMapperParser mapperParser = createIndex(\"test\").mapperService().documentMapperParser();\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\")\n            .endObject().endObject());\n        DocumentMapper mapper = mapperParser.parse(\"type\", new CompressedXContent(mapping));\n\n        BytesReference bytes = BytesReference.bytes(XContentFactory.jsonBuilder()\n            .startObject().field(\"foo.bar.baz\", 0)\n            .endObject());\n        ParsedDocument doc = mapper.parse(new SourceToParse(\"test\", \"type\", \"1\", bytes, XContentType.JSON));\n        assertEquals(2, doc.rootDoc().getFields(\"foo.bar.baz\").length);\n        Mapper fooMapper = doc.dynamicMappingsUpdate().root().getMapper(\"foo\");\n        assertNotNull(fooMapper);\n        assertThat(fooMapper, instanceOf(ObjectMapper.class));\n        Mapper barMapper = ((ObjectMapper) fooMapper).getMapper(\"bar\");\n        assertNotNull(barMapper);\n        assertThat(barMapper, instanceOf(ObjectMapper.class));\n        Mapper bazMapper = ((ObjectMapper) barMapper).getMapper(\"baz\");\n        assertNotNull(bazMapper);\n        assertThat(bazMapper, instanceOf(NumberFieldMapper.class));\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/DocumentParserTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":898,"status":"M"},{"authorDate":"2019-10-15 16:05:29","commitOrder":3,"curCode":"    public void testDynamicDottedFieldNameLongWithParentTemplate() throws Exception {\n        DocumentMapperParser mapperParser = createIndex(\"test\").mapperService().documentMapperParser();\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\")\n            .startArray(\"dynamic_templates\").startObject().startObject(\"georule\")\n                .field(\"match\", \"foo*\")\n                .startObject(\"mapping\").field(\"type\", \"object\").endObject()\n            .endObject().endObject().endArray().endObject().endObject());\n        DocumentMapper mapper = mapperParser.parse(\"type\", new CompressedXContent(mapping));\n\n        BytesReference bytes = BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"foo.bar.baz\", 0)\n            .endObject());\n        ParsedDocument doc = mapper.parse(new SourceToParse(\"test\", \"1\", bytes, XContentType.JSON));\n        assertEquals(2, doc.rootDoc().getFields(\"foo.bar.baz\").length);\n        Mapper fooMapper = doc.dynamicMappingsUpdate().root().getMapper(\"foo\");\n        assertNotNull(fooMapper);\n        assertThat(fooMapper, instanceOf(ObjectMapper.class));\n        Mapper barMapper = ((ObjectMapper) fooMapper).getMapper(\"bar\");\n        assertNotNull(barMapper);\n        assertThat(barMapper, instanceOf(ObjectMapper.class));\n        Mapper bazMapper = ((ObjectMapper) barMapper).getMapper(\"baz\");\n        assertNotNull(bazMapper);\n        assertThat(bazMapper, instanceOf(NumberFieldMapper.class));\n    }\n","date":"2019-10-15 16:05:29","endLine":943,"groupId":"61109","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"testDynamicDottedFieldNameLongWithParentTemplate","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/d8/8518d073d058bcafb3785a743b3df978586b3d.src","preCode":"    public void testDynamicDottedFieldNameLongWithParentTemplate() throws Exception {\n        DocumentMapperParser mapperParser = createIndex(\"test\").mapperService().documentMapperParser();\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\")\n            .startArray(\"dynamic_templates\").startObject().startObject(\"georule\")\n                .field(\"match\", \"foo*\")\n                .startObject(\"mapping\").field(\"type\", \"object\").endObject()\n            .endObject().endObject().endArray().endObject().endObject());\n        DocumentMapper mapper = mapperParser.parse(\"type\", new CompressedXContent(mapping));\n\n        BytesReference bytes = BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"foo.bar.baz\", 0)\n            .endObject());\n        ParsedDocument doc = mapper.parse(new SourceToParse(\"test\", \"type\", \"1\", bytes, XContentType.JSON));\n        assertEquals(2, doc.rootDoc().getFields(\"foo.bar.baz\").length);\n        Mapper fooMapper = doc.dynamicMappingsUpdate().root().getMapper(\"foo\");\n        assertNotNull(fooMapper);\n        assertThat(fooMapper, instanceOf(ObjectMapper.class));\n        Mapper barMapper = ((ObjectMapper) fooMapper).getMapper(\"bar\");\n        assertNotNull(barMapper);\n        assertThat(barMapper, instanceOf(ObjectMapper.class));\n        Mapper bazMapper = ((ObjectMapper) barMapper).getMapper(\"baz\");\n        assertNotNull(bazMapper);\n        assertThat(bazMapper, instanceOf(NumberFieldMapper.class));\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/DocumentParserTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":920,"status":"M"}],"commitId":"6531369f11d159896957b75a7eae0b7da214d01a","commitMessage":"@@@Don't persist type information to translog (#47229)\n\nWe no longer need to store type information in the translog.  given that an index\ncan only have a single type.\n\nRelates to #41059","date":"2019-10-15 16:05:29","modifiedFileCount":"100","status":"M","submitter":"Alan Woodward"},{"authorTime":"2020-09-09 00:25:01","codes":[{"authorDate":"2020-09-09 00:25:01","commitOrder":4,"curCode":"    public void testDynamicDottedFieldNameLong() throws Exception {\n        DocumentMapper mapper = createDocumentMapper(mapping(b -> {}));\n        ParsedDocument doc = mapper.parse(source(b -> b.field(\"foo.bar.baz\", 0)));\n        assertEquals(2, doc.rootDoc().getFields(\"foo.bar.baz\").length);\n        Mapper fooMapper = doc.dynamicMappingsUpdate().root().getMapper(\"foo\");\n        assertNotNull(fooMapper);\n        assertThat(fooMapper, instanceOf(ObjectMapper.class));\n        Mapper barMapper = ((ObjectMapper) fooMapper).getMapper(\"bar\");\n        assertNotNull(barMapper);\n        assertThat(barMapper, instanceOf(ObjectMapper.class));\n        Mapper bazMapper = ((ObjectMapper) barMapper).getMapper(\"baz\");\n        assertNotNull(bazMapper);\n        assertThat(bazMapper, instanceOf(NumberFieldMapper.class));\n    }\n","date":"2020-09-09 00:25:01","endLine":769,"groupId":"31800","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"testDynamicDottedFieldNameLong","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/39/40a9ae572a6047475b9316c7c3d4e34d1d3bca.src","preCode":"    public void testDynamicDottedFieldNameLong() throws Exception {\n        DocumentMapperParser mapperParser = createIndex(\"test\").mapperService().documentMapperParser();\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\")\n            .endObject().endObject());\n        DocumentMapper mapper = mapperParser.parse(\"type\", new CompressedXContent(mapping));\n\n        BytesReference bytes = BytesReference.bytes(XContentFactory.jsonBuilder()\n            .startObject().field(\"foo.bar.baz\", 0)\n            .endObject());\n        ParsedDocument doc = mapper.parse(new SourceToParse(\"test\", \"1\", bytes, XContentType.JSON));\n        assertEquals(2, doc.rootDoc().getFields(\"foo.bar.baz\").length);\n        Mapper fooMapper = doc.dynamicMappingsUpdate().root().getMapper(\"foo\");\n        assertNotNull(fooMapper);\n        assertThat(fooMapper, instanceOf(ObjectMapper.class));\n        Mapper barMapper = ((ObjectMapper) fooMapper).getMapper(\"bar\");\n        assertNotNull(barMapper);\n        assertThat(barMapper, instanceOf(ObjectMapper.class));\n        Mapper bazMapper = ((ObjectMapper) barMapper).getMapper(\"baz\");\n        assertNotNull(bazMapper);\n        assertThat(bazMapper, instanceOf(NumberFieldMapper.class));\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/DocumentParserTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":756,"status":"M"},{"authorDate":"2020-09-09 00:25:01","commitOrder":4,"curCode":"    public void testDynamicDottedFieldNameLongWithParentTemplate() throws Exception {\n        DocumentMapper mapper = createDocumentMapper(topMapping(b -> {\n            b.startArray(\"dynamic_templates\");\n            {\n                b.startObject();\n                {\n                    b.startObject(\"georule\");\n                    {\n                        b.field(\"match\", \"foo*\");\n                        b.startObject(\"mapping\").field(\"type\", \"object\").endObject();\n                    }\n                    b.endObject();\n                }\n                b.endObject();\n            }\n            b.endArray();\n        }));\n\n        ParsedDocument doc = mapper.parse(source(b -> b.field(\"foo.bar.baz\", 0)));\n        assertEquals(2, doc.rootDoc().getFields(\"foo.bar.baz\").length);\n        Mapper fooMapper = doc.dynamicMappingsUpdate().root().getMapper(\"foo\");\n        assertNotNull(fooMapper);\n        assertThat(fooMapper, instanceOf(ObjectMapper.class));\n        Mapper barMapper = ((ObjectMapper) fooMapper).getMapper(\"bar\");\n        assertNotNull(barMapper);\n        assertThat(barMapper, instanceOf(ObjectMapper.class));\n        Mapper bazMapper = ((ObjectMapper) barMapper).getMapper(\"baz\");\n        assertNotNull(bazMapper);\n        assertThat(bazMapper, instanceOf(NumberFieldMapper.class));\n    }\n","date":"2020-09-09 00:25:01","endLine":800,"groupId":"31800","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"testDynamicDottedFieldNameLongWithParentTemplate","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/39/40a9ae572a6047475b9316c7c3d4e34d1d3bca.src","preCode":"    public void testDynamicDottedFieldNameLongWithParentTemplate() throws Exception {\n        DocumentMapperParser mapperParser = createIndex(\"test\").mapperService().documentMapperParser();\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type\")\n            .startArray(\"dynamic_templates\").startObject().startObject(\"georule\")\n                .field(\"match\", \"foo*\")\n                .startObject(\"mapping\").field(\"type\", \"object\").endObject()\n            .endObject().endObject().endArray().endObject().endObject());\n        DocumentMapper mapper = mapperParser.parse(\"type\", new CompressedXContent(mapping));\n\n        BytesReference bytes = BytesReference.bytes(XContentFactory.jsonBuilder()\n                .startObject().field(\"foo.bar.baz\", 0)\n            .endObject());\n        ParsedDocument doc = mapper.parse(new SourceToParse(\"test\", \"1\", bytes, XContentType.JSON));\n        assertEquals(2, doc.rootDoc().getFields(\"foo.bar.baz\").length);\n        Mapper fooMapper = doc.dynamicMappingsUpdate().root().getMapper(\"foo\");\n        assertNotNull(fooMapper);\n        assertThat(fooMapper, instanceOf(ObjectMapper.class));\n        Mapper barMapper = ((ObjectMapper) fooMapper).getMapper(\"bar\");\n        assertNotNull(barMapper);\n        assertThat(barMapper, instanceOf(ObjectMapper.class));\n        Mapper bazMapper = ((ObjectMapper) barMapper).getMapper(\"baz\");\n        assertNotNull(bazMapper);\n        assertThat(bazMapper, instanceOf(NumberFieldMapper.class));\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/DocumentParserTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":771,"status":"M"}],"commitId":"98590517f5ecb504874ca24c9d01b5d092b79360","commitMessage":"@@@Convert some more mapping tests to MapperServiceTestCase (#62089)\n\nWe don't need to extend ESSingleNodeTestCase for all these tests.","date":"2020-09-09 00:25:01","modifiedFileCount":"7","status":"M","submitter":"Alan Woodward"},{"authorTime":"2021-03-02 22:26:50","codes":[{"authorDate":"2021-03-02 22:26:50","commitOrder":5,"curCode":"    public void testDynamicDottedFieldNameLong() throws Exception {\n        DocumentMapper mapper = createDocumentMapper(mapping(b -> {}));\n        ParsedDocument doc = mapper.parse(source(b -> b.field(\"foo.bar.baz\", 0)));\n        assertEquals(2, doc.rootDoc().getFields(\"foo.bar.baz\").length);\n        Mapper fooMapper = doc.dynamicMappingsUpdate().getRoot().getMapper(\"foo\");\n        assertNotNull(fooMapper);\n        assertThat(fooMapper, instanceOf(ObjectMapper.class));\n        Mapper barMapper = ((ObjectMapper) fooMapper).getMapper(\"bar\");\n        assertNotNull(barMapper);\n        assertThat(barMapper, instanceOf(ObjectMapper.class));\n        Mapper bazMapper = ((ObjectMapper) barMapper).getMapper(\"baz\");\n        assertNotNull(bazMapper);\n        assertThat(bazMapper, instanceOf(NumberFieldMapper.class));\n    }\n","date":"2021-03-02 22:26:50","endLine":1090,"groupId":"102841","id":9,"instanceNumber":1,"isCurCommit":0,"methodName":"testDynamicDottedFieldNameLong","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/b2/9c7b31dfc8c00166510b35f9ad1aab14d36016.src","preCode":"    public void testDynamicDottedFieldNameLong() throws Exception {\n        DocumentMapper mapper = createDocumentMapper(mapping(b -> {}));\n        ParsedDocument doc = mapper.parse(source(b -> b.field(\"foo.bar.baz\", 0)));\n        assertEquals(2, doc.rootDoc().getFields(\"foo.bar.baz\").length);\n        Mapper fooMapper = doc.dynamicMappingsUpdate().root().getMapper(\"foo\");\n        assertNotNull(fooMapper);\n        assertThat(fooMapper, instanceOf(ObjectMapper.class));\n        Mapper barMapper = ((ObjectMapper) fooMapper).getMapper(\"bar\");\n        assertNotNull(barMapper);\n        assertThat(barMapper, instanceOf(ObjectMapper.class));\n        Mapper bazMapper = ((ObjectMapper) barMapper).getMapper(\"baz\");\n        assertNotNull(bazMapper);\n        assertThat(bazMapper, instanceOf(NumberFieldMapper.class));\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/DocumentParserTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":1077,"status":"M"},{"authorDate":"2021-03-02 22:26:50","commitOrder":5,"curCode":"    public void testDynamicDottedFieldNameLongWithParentTemplate() throws Exception {\n        DocumentMapper mapper = createDocumentMapper(topMapping(b -> {\n            b.startArray(\"dynamic_templates\");\n            {\n                b.startObject();\n                {\n                    b.startObject(\"georule\");\n                    {\n                        b.field(\"match\", \"foo*\");\n                        b.startObject(\"mapping\").field(\"type\", \"object\").endObject();\n                    }\n                    b.endObject();\n                }\n                b.endObject();\n            }\n            b.endArray();\n        }));\n\n        ParsedDocument doc = mapper.parse(source(b -> b.field(\"foo.bar.baz\", 0)));\n        assertEquals(2, doc.rootDoc().getFields(\"foo.bar.baz\").length);\n        Mapper fooMapper = doc.dynamicMappingsUpdate().getRoot().getMapper(\"foo\");\n        assertNotNull(fooMapper);\n        assertThat(fooMapper, instanceOf(ObjectMapper.class));\n        Mapper barMapper = ((ObjectMapper) fooMapper).getMapper(\"bar\");\n        assertNotNull(barMapper);\n        assertThat(barMapper, instanceOf(ObjectMapper.class));\n        Mapper bazMapper = ((ObjectMapper) barMapper).getMapper(\"baz\");\n        assertNotNull(bazMapper);\n        assertThat(bazMapper, instanceOf(NumberFieldMapper.class));\n    }\n","date":"2021-03-02 22:26:50","endLine":1121,"groupId":"102841","id":10,"instanceNumber":2,"isCurCommit":0,"methodName":"testDynamicDottedFieldNameLongWithParentTemplate","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/b2/9c7b31dfc8c00166510b35f9ad1aab14d36016.src","preCode":"    public void testDynamicDottedFieldNameLongWithParentTemplate() throws Exception {\n        DocumentMapper mapper = createDocumentMapper(topMapping(b -> {\n            b.startArray(\"dynamic_templates\");\n            {\n                b.startObject();\n                {\n                    b.startObject(\"georule\");\n                    {\n                        b.field(\"match\", \"foo*\");\n                        b.startObject(\"mapping\").field(\"type\", \"object\").endObject();\n                    }\n                    b.endObject();\n                }\n                b.endObject();\n            }\n            b.endArray();\n        }));\n\n        ParsedDocument doc = mapper.parse(source(b -> b.field(\"foo.bar.baz\", 0)));\n        assertEquals(2, doc.rootDoc().getFields(\"foo.bar.baz\").length);\n        Mapper fooMapper = doc.dynamicMappingsUpdate().root().getMapper(\"foo\");\n        assertNotNull(fooMapper);\n        assertThat(fooMapper, instanceOf(ObjectMapper.class));\n        Mapper barMapper = ((ObjectMapper) fooMapper).getMapper(\"bar\");\n        assertNotNull(barMapper);\n        assertThat(barMapper, instanceOf(ObjectMapper.class));\n        Mapper bazMapper = ((ObjectMapper) barMapper).getMapper(\"baz\");\n        assertNotNull(bazMapper);\n        assertThat(bazMapper, instanceOf(NumberFieldMapper.class));\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/DocumentParserTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":1092,"status":"M"}],"commitId":"8ac243666af4854ea67f416522babc69401379ad","commitMessage":"@@@Remove redundant methods from DocumentMapper (#69803)\n\nDocumentMapper exposes root() and meta() methods.  which can be accessed through the mapping() method which exposes the entire Mapping instance.\n\nThis commit removes such redundant methods in favour of accessing mapping and retrieving root and meta from them. Additionally.  access to Mapping's members is made consistent through getters rather than package private fields in some cases and getters is some other case.","date":"2021-03-02 22:26:50","modifiedFileCount":"15","status":"M","submitter":"Luca Cavanna"}]
