[{"authorTime":"2020-04-17 00:18:09","codes":[{"authorDate":"2018-07-19 02:10:12","commitOrder":3,"curCode":"    public void testIgnoreZValue() throws IOException {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"geo_point\")\n            .field(IGNORE_Z_VALUE.getPreferredName(), \"true\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        DocumentMapper defaultMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        Mapper fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(GeoPointFieldMapper.class));\n\n        boolean ignoreZValue = ((GeoPointFieldMapper)fieldMapper).ignoreZValue().value();\n        assertThat(ignoreZValue, equalTo(true));\n\n        \r\n        mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"geo_point\")\n            .field(IGNORE_Z_VALUE.getPreferredName(), \"false\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        defaultMapper = createIndex(\"test2\").mapperService().documentMapperParser().parse(\"type1\", new CompressedXContent(mapping));\n        fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(GeoPointFieldMapper.class));\n\n        ignoreZValue = ((GeoPointFieldMapper)fieldMapper).ignoreZValue().value();\n        assertThat(ignoreZValue, equalTo(false));\n    }\n","date":"2018-07-19 02:10:12","endLine":310,"groupId":"21404","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testIgnoreZValue","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/ea/bf0a849fa39066049c3b8a58041b055f38f3a0.src","preCode":"    public void testIgnoreZValue() throws IOException {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"geo_point\")\n            .field(IGNORE_Z_VALUE.getPreferredName(), \"true\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        DocumentMapper defaultMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        Mapper fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(GeoPointFieldMapper.class));\n\n        boolean ignoreZValue = ((GeoPointFieldMapper)fieldMapper).ignoreZValue().value();\n        assertThat(ignoreZValue, equalTo(true));\n\n        \r\n        mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"geo_point\")\n            .field(IGNORE_Z_VALUE.getPreferredName(), \"false\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        defaultMapper = createIndex(\"test2\").mapperService().documentMapperParser().parse(\"type1\", new CompressedXContent(mapping));\n        fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(GeoPointFieldMapper.class));\n\n        ignoreZValue = ((GeoPointFieldMapper)fieldMapper).ignoreZValue().value();\n        assertThat(ignoreZValue, equalTo(false));\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/GeoPointFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":280,"status":"NB"},{"authorDate":"2020-04-17 00:18:09","commitOrder":3,"curCode":"    public void testCoerceParsing() throws IOException {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"geo_shape\")\n            .field(\"coerce\", \"true\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        DocumentMapper defaultMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        Mapper fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(GeoShapeWithDocValuesFieldMapper.class));\n\n        boolean coerce = ((GeoShapeWithDocValuesFieldMapper)fieldMapper).coerce().value();\n        assertThat(coerce, equalTo(true));\n\n        \r\n        mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"geo_shape\")\n            .field(\"coerce\", \"false\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        defaultMapper = createIndex(\"test2\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(GeoShapeWithDocValuesFieldMapper.class));\n\n        coerce = ((GeoShapeWithDocValuesFieldMapper)fieldMapper).coerce().value();\n        assertThat(coerce, equalTo(false));\n        assertFieldWarnings(\"tree\");\n    }\n","date":"2020-04-17 00:18:09","endLine":182,"groupId":"65134","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testCoerceParsing","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/1b/734e3dbba3ed674decfad8d723d0ecc5c51d83.src","preCode":"    public void testCoerceParsing() throws IOException {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"geo_shape\")\n            .field(\"coerce\", \"true\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        DocumentMapper defaultMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        Mapper fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(GeoShapeWithDocValuesFieldMapper.class));\n\n        boolean coerce = ((GeoShapeWithDocValuesFieldMapper)fieldMapper).coerce().value();\n        assertThat(coerce, equalTo(true));\n\n        \r\n        mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"geo_shape\")\n            .field(\"coerce\", \"false\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        defaultMapper = createIndex(\"test2\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(GeoShapeWithDocValuesFieldMapper.class));\n\n        coerce = ((GeoShapeWithDocValuesFieldMapper)fieldMapper).coerce().value();\n        assertThat(coerce, equalTo(false));\n        assertFieldWarnings(\"tree\");\n    }\n","realPath":"x-pack/plugin/spatial/src/test/java/org/elasticsearch/xpack/spatial/index/mapper/GeoShapeWithDocValuesFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":150,"status":"B"}],"commitId":"b78dfb07ae1f79300cfb9a99a740bf5cdd0e2f9b","commitMessage":"@@@Add geo_shape mapper supporting doc-values in Spatial Plugin (#55037)\n\nAfter #53562.  the `geo_shape` field mapper is registered within\na module. This opens the door for introducing a new `geo_shape`\nfield mapper into the Spatial Plugin that has doc-values support.\n\nThis is very much an extension of server's GeoShapeFieldMapper. \nbut with the addition of the doc values implementation.","date":"2020-04-17 00:18:09","modifiedFileCount":"11","status":"M","submitter":"Tal Levy"},{"authorTime":"2020-04-17 00:18:09","codes":[{"authorDate":"2020-08-25 01:10:47","commitOrder":4,"curCode":"    public void testIgnoreZValue() throws IOException {\n        DocumentMapper mapper = createDocumentMapper(fieldMapping(b -> b.field(\"type\", \"geo_point\").field(\"ignore_z_value\", true)));\n        Mapper fieldMapper = mapper.mappers().getMapper(\"field\");\n        assertThat(fieldMapper, instanceOf(GeoPointFieldMapper.class));\n        boolean ignoreZValue = ((GeoPointFieldMapper)fieldMapper).ignoreZValue().value();\n        assertThat(ignoreZValue, equalTo(true));\n\n        \r\n        mapper = createDocumentMapper(fieldMapping(b -> b.field(\"type\", \"geo_point\").field(\"ignore_z_value\", false)));\n        fieldMapper = mapper.mappers().getMapper(\"field\");\n        assertThat(fieldMapper, instanceOf(GeoPointFieldMapper.class));\n        ignoreZValue = ((GeoPointFieldMapper)fieldMapper).ignoreZValue().value();\n        assertThat(ignoreZValue, equalTo(false));\n    }\n","date":"2020-08-25 01:10:47","endLine":187,"groupId":"66433","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testIgnoreZValue","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/19/a0776b199a5f99e823fbafa9c05611fb8b5411.src","preCode":"    public void testIgnoreZValue() throws IOException {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"geo_point\")\n            .field(IGNORE_Z_VALUE.getPreferredName(), \"true\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        DocumentMapper defaultMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        Mapper fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(GeoPointFieldMapper.class));\n\n        boolean ignoreZValue = ((GeoPointFieldMapper)fieldMapper).ignoreZValue().value();\n        assertThat(ignoreZValue, equalTo(true));\n\n        \r\n        mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"geo_point\")\n            .field(IGNORE_Z_VALUE.getPreferredName(), \"false\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        defaultMapper = createIndex(\"test2\").mapperService().documentMapperParser().parse(\"type1\", new CompressedXContent(mapping));\n        fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(GeoPointFieldMapper.class));\n\n        ignoreZValue = ((GeoPointFieldMapper)fieldMapper).ignoreZValue().value();\n        assertThat(ignoreZValue, equalTo(false));\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/GeoPointFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":174,"status":"M"},{"authorDate":"2020-04-17 00:18:09","commitOrder":4,"curCode":"    public void testCoerceParsing() throws IOException {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"geo_shape\")\n            .field(\"coerce\", \"true\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        DocumentMapper defaultMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        Mapper fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(GeoShapeWithDocValuesFieldMapper.class));\n\n        boolean coerce = ((GeoShapeWithDocValuesFieldMapper)fieldMapper).coerce().value();\n        assertThat(coerce, equalTo(true));\n\n        \r\n        mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"geo_shape\")\n            .field(\"coerce\", \"false\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        defaultMapper = createIndex(\"test2\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(GeoShapeWithDocValuesFieldMapper.class));\n\n        coerce = ((GeoShapeWithDocValuesFieldMapper)fieldMapper).coerce().value();\n        assertThat(coerce, equalTo(false));\n        assertFieldWarnings(\"tree\");\n    }\n","date":"2020-04-17 00:18:09","endLine":182,"groupId":"65134","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testCoerceParsing","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/1b/734e3dbba3ed674decfad8d723d0ecc5c51d83.src","preCode":"    public void testCoerceParsing() throws IOException {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"geo_shape\")\n            .field(\"coerce\", \"true\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        DocumentMapper defaultMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        Mapper fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(GeoShapeWithDocValuesFieldMapper.class));\n\n        boolean coerce = ((GeoShapeWithDocValuesFieldMapper)fieldMapper).coerce().value();\n        assertThat(coerce, equalTo(true));\n\n        \r\n        mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"geo_shape\")\n            .field(\"coerce\", \"false\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        defaultMapper = createIndex(\"test2\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(GeoShapeWithDocValuesFieldMapper.class));\n\n        coerce = ((GeoShapeWithDocValuesFieldMapper)fieldMapper).coerce().value();\n        assertThat(coerce, equalTo(false));\n        assertFieldWarnings(\"tree\");\n    }\n","realPath":"x-pack/plugin/spatial/src/test/java/org/elasticsearch/xpack/spatial/index/mapper/GeoShapeWithDocValuesFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":150,"status":"N"}],"commitId":"e2dd0bde26e6c1f9f1a5137a5bf432d348e4205e","commitMessage":"@@@Merge branch 'master' into feature/runtime_fields\n","date":"2020-08-25 01:10:47","modifiedFileCount":"48","status":"M","submitter":"Nik Everett"},{"authorTime":"2020-04-17 00:18:09","codes":[{"authorDate":"2020-10-22 16:11:41","commitOrder":5,"curCode":"    public void testIgnoreZValue() throws IOException {\n        DocumentMapper mapper = createDocumentMapper(fieldMapping(b -> b.field(\"type\", \"geo_point\").field(\"ignore_z_value\", true)));\n        Mapper fieldMapper = mapper.mappers().getMapper(\"field\");\n        assertThat(fieldMapper, instanceOf(GeoPointFieldMapper.class));\n        boolean ignoreZValue = ((GeoPointFieldMapper)fieldMapper).ignoreZValue();\n        assertThat(ignoreZValue, equalTo(true));\n\n        \r\n        mapper = createDocumentMapper(fieldMapping(b -> b.field(\"type\", \"geo_point\").field(\"ignore_z_value\", false)));\n        fieldMapper = mapper.mappers().getMapper(\"field\");\n        assertThat(fieldMapper, instanceOf(GeoPointFieldMapper.class));\n        ignoreZValue = ((GeoPointFieldMapper)fieldMapper).ignoreZValue();\n        assertThat(ignoreZValue, equalTo(false));\n    }\n","date":"2020-10-22 16:11:41","endLine":204,"groupId":"66433","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"testIgnoreZValue","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/1a/c01f8cc5b376e178d7b71e22071eda236763b8.src","preCode":"    public void testIgnoreZValue() throws IOException {\n        DocumentMapper mapper = createDocumentMapper(fieldMapping(b -> b.field(\"type\", \"geo_point\").field(\"ignore_z_value\", true)));\n        Mapper fieldMapper = mapper.mappers().getMapper(\"field\");\n        assertThat(fieldMapper, instanceOf(GeoPointFieldMapper.class));\n        boolean ignoreZValue = ((GeoPointFieldMapper)fieldMapper).ignoreZValue().value();\n        assertThat(ignoreZValue, equalTo(true));\n\n        \r\n        mapper = createDocumentMapper(fieldMapping(b -> b.field(\"type\", \"geo_point\").field(\"ignore_z_value\", false)));\n        fieldMapper = mapper.mappers().getMapper(\"field\");\n        assertThat(fieldMapper, instanceOf(GeoPointFieldMapper.class));\n        ignoreZValue = ((GeoPointFieldMapper)fieldMapper).ignoreZValue().value();\n        assertThat(ignoreZValue, equalTo(false));\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/GeoPointFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":191,"status":"M"},{"authorDate":"2020-04-17 00:18:09","commitOrder":5,"curCode":"    public void testCoerceParsing() throws IOException {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"geo_shape\")\n            .field(\"coerce\", \"true\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        DocumentMapper defaultMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        Mapper fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(GeoShapeWithDocValuesFieldMapper.class));\n\n        boolean coerce = ((GeoShapeWithDocValuesFieldMapper)fieldMapper).coerce().value();\n        assertThat(coerce, equalTo(true));\n\n        \r\n        mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"geo_shape\")\n            .field(\"coerce\", \"false\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        defaultMapper = createIndex(\"test2\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(GeoShapeWithDocValuesFieldMapper.class));\n\n        coerce = ((GeoShapeWithDocValuesFieldMapper)fieldMapper).coerce().value();\n        assertThat(coerce, equalTo(false));\n        assertFieldWarnings(\"tree\");\n    }\n","date":"2020-04-17 00:18:09","endLine":182,"groupId":"65134","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"testCoerceParsing","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/1b/734e3dbba3ed674decfad8d723d0ecc5c51d83.src","preCode":"    public void testCoerceParsing() throws IOException {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"geo_shape\")\n            .field(\"coerce\", \"true\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        DocumentMapper defaultMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        Mapper fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(GeoShapeWithDocValuesFieldMapper.class));\n\n        boolean coerce = ((GeoShapeWithDocValuesFieldMapper)fieldMapper).coerce().value();\n        assertThat(coerce, equalTo(true));\n\n        \r\n        mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"geo_shape\")\n            .field(\"coerce\", \"false\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        defaultMapper = createIndex(\"test2\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(GeoShapeWithDocValuesFieldMapper.class));\n\n        coerce = ((GeoShapeWithDocValuesFieldMapper)fieldMapper).coerce().value();\n        assertThat(coerce, equalTo(false));\n        assertFieldWarnings(\"tree\");\n    }\n","realPath":"x-pack/plugin/spatial/src/test/java/org/elasticsearch/xpack/spatial/index/mapper/GeoShapeWithDocValuesFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":150,"status":"N"}],"commitId":"bfaf3040c6e5245b6d3367483ba86c676dd09bd2","commitMessage":"@@@Convert geo field mappers to Parametrized form (#63836)\n\nRelates to #62988","date":"2020-10-22 16:11:41","modifiedFileCount":"42","status":"M","submitter":"Alan Woodward"},{"authorTime":"2020-11-06 23:20:25","codes":[{"authorDate":"2020-10-22 16:11:41","commitOrder":6,"curCode":"    public void testIgnoreZValue() throws IOException {\n        DocumentMapper mapper = createDocumentMapper(fieldMapping(b -> b.field(\"type\", \"geo_point\").field(\"ignore_z_value\", true)));\n        Mapper fieldMapper = mapper.mappers().getMapper(\"field\");\n        assertThat(fieldMapper, instanceOf(GeoPointFieldMapper.class));\n        boolean ignoreZValue = ((GeoPointFieldMapper)fieldMapper).ignoreZValue();\n        assertThat(ignoreZValue, equalTo(true));\n\n        \r\n        mapper = createDocumentMapper(fieldMapping(b -> b.field(\"type\", \"geo_point\").field(\"ignore_z_value\", false)));\n        fieldMapper = mapper.mappers().getMapper(\"field\");\n        assertThat(fieldMapper, instanceOf(GeoPointFieldMapper.class));\n        ignoreZValue = ((GeoPointFieldMapper)fieldMapper).ignoreZValue();\n        assertThat(ignoreZValue, equalTo(false));\n    }\n","date":"2020-10-22 16:11:41","endLine":204,"groupId":"103008","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"testIgnoreZValue","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/1a/c01f8cc5b376e178d7b71e22071eda236763b8.src","preCode":"    public void testIgnoreZValue() throws IOException {\n        DocumentMapper mapper = createDocumentMapper(fieldMapping(b -> b.field(\"type\", \"geo_point\").field(\"ignore_z_value\", true)));\n        Mapper fieldMapper = mapper.mappers().getMapper(\"field\");\n        assertThat(fieldMapper, instanceOf(GeoPointFieldMapper.class));\n        boolean ignoreZValue = ((GeoPointFieldMapper)fieldMapper).ignoreZValue();\n        assertThat(ignoreZValue, equalTo(true));\n\n        \r\n        mapper = createDocumentMapper(fieldMapping(b -> b.field(\"type\", \"geo_point\").field(\"ignore_z_value\", false)));\n        fieldMapper = mapper.mappers().getMapper(\"field\");\n        assertThat(fieldMapper, instanceOf(GeoPointFieldMapper.class));\n        ignoreZValue = ((GeoPointFieldMapper)fieldMapper).ignoreZValue();\n        assertThat(ignoreZValue, equalTo(false));\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/GeoPointFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":191,"status":"N"},{"authorDate":"2020-11-06 23:20:25","commitOrder":6,"curCode":"    public void testCoerceParsing() throws IOException {\n\n        DocumentMapper defaultMapper = createDocumentMapper(fieldMapping(b -> {\n            b.field(\"type\", \"geo_shape\");\n            b.field(\"coerce\", true);\n        }));\n        Mapper fieldMapper = defaultMapper.mappers().getMapper(\"field\");\n        assertThat(fieldMapper, instanceOf(GeoShapeWithDocValuesFieldMapper.class));\n\n        boolean coerce = ((GeoShapeWithDocValuesFieldMapper)fieldMapper).coerce();\n        assertThat(coerce, equalTo(true));\n\n        defaultMapper = createDocumentMapper(fieldMapping(b -> {\n            b.field(\"type\", \"geo_shape\");\n            b.field(\"coerce\", false);\n        }));\n        fieldMapper = defaultMapper.mappers().getMapper(\"field\");\n        assertThat(fieldMapper, instanceOf(GeoShapeWithDocValuesFieldMapper.class));\n\n        coerce = ((GeoShapeWithDocValuesFieldMapper)fieldMapper).coerce();\n        assertThat(coerce, equalTo(false));\n\n    }\n","date":"2020-11-06 23:20:25","endLine":172,"groupId":"103008","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"testCoerceParsing","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/92/e7d0659f7b61103e260fdbf9d45d62ac7b437a.src","preCode":"    public void testCoerceParsing() throws IOException {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"geo_shape\")\n            .field(\"coerce\", \"true\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        DocumentMapper defaultMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        Mapper fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(GeoShapeWithDocValuesFieldMapper.class));\n\n        boolean coerce = ((GeoShapeWithDocValuesFieldMapper)fieldMapper).coerce().value();\n        assertThat(coerce, equalTo(true));\n\n        \r\n        mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"geo_shape\")\n            .field(\"coerce\", \"false\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        defaultMapper = createIndex(\"test2\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(GeoShapeWithDocValuesFieldMapper.class));\n\n        coerce = ((GeoShapeWithDocValuesFieldMapper)fieldMapper).coerce().value();\n        assertThat(coerce, equalTo(false));\n        assertFieldWarnings(\"tree\");\n    }\n","realPath":"x-pack/plugin/spatial/src/test/java/org/elasticsearch/xpack/spatial/index/mapper/GeoShapeWithDocValuesFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":150,"status":"M"}],"commitId":"038fc354abe932c3fc7615beb4e3b991f1219533","commitMessage":"@@@Use MapperTestCase for cartesian mappers tests (#64705)\n\nThis commit changes the cartesian mapper tests (point and shape fields) so that they use MapperTestCase. ","date":"2020-11-06 23:20:25","modifiedFileCount":"0","status":"M","submitter":"Ignacio Vera"}]
