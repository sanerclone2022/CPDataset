[{"authorTime":"2018-12-06 15:31:46","codes":[{"authorDate":"2018-12-06 15:31:46","commitOrder":1,"curCode":"    public void testFailsNodeThatDoesNotRespond() {\n        final Builder settingsBuilder = Settings.builder();\n        if (randomBoolean()) {\n            settingsBuilder.put(FOLLOWER_CHECK_RETRY_COUNT_SETTING.getKey(), randomIntBetween(1, 10));\n        }\n        if (randomBoolean()) {\n            settingsBuilder.put(FOLLOWER_CHECK_INTERVAL_SETTING.getKey(), randomIntBetween(100, 100000) + \"ms\");\n        }\n        if (randomBoolean()) {\n            settingsBuilder.put(FOLLOWER_CHECK_TIMEOUT_SETTING.getKey(), randomIntBetween(1, 100000) + \"ms\");\n        }\n        final Settings settings = settingsBuilder.build();\n\n        testBehaviourOfFailingNode(settings, () -> null,\n            \"followers check retry count exceeded\",\n            (FOLLOWER_CHECK_RETRY_COUNT_SETTING.get(settings) - 1) * FOLLOWER_CHECK_INTERVAL_SETTING.get(settings).millis()\n                + FOLLOWER_CHECK_RETRY_COUNT_SETTING.get(settings) * FOLLOWER_CHECK_TIMEOUT_SETTING.get(settings).millis());\n    }\n","date":"2018-12-06 15:31:46","endLine":172,"groupId":"46471","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testFailsNodeThatDoesNotRespond","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/be/da4ef1a8c4c2eea418c3decb7d282f1793a813.src","preCode":"    public void testFailsNodeThatDoesNotRespond() {\n        final Builder settingsBuilder = Settings.builder();\n        if (randomBoolean()) {\n            settingsBuilder.put(FOLLOWER_CHECK_RETRY_COUNT_SETTING.getKey(), randomIntBetween(1, 10));\n        }\n        if (randomBoolean()) {\n            settingsBuilder.put(FOLLOWER_CHECK_INTERVAL_SETTING.getKey(), randomIntBetween(100, 100000) + \"ms\");\n        }\n        if (randomBoolean()) {\n            settingsBuilder.put(FOLLOWER_CHECK_TIMEOUT_SETTING.getKey(), randomIntBetween(1, 100000) + \"ms\");\n        }\n        final Settings settings = settingsBuilder.build();\n\n        testBehaviourOfFailingNode(settings, () -> null,\n            \"followers check retry count exceeded\",\n            (FOLLOWER_CHECK_RETRY_COUNT_SETTING.get(settings) - 1) * FOLLOWER_CHECK_INTERVAL_SETTING.get(settings).millis()\n                + FOLLOWER_CHECK_RETRY_COUNT_SETTING.get(settings) * FOLLOWER_CHECK_TIMEOUT_SETTING.get(settings).millis());\n    }\n","realPath":"server/src/test/java/org/elasticsearch/cluster/coordination/FollowersCheckerTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":155,"status":"B"},{"authorDate":"2018-12-06 15:31:46","commitOrder":1,"curCode":"    public void testFailsNodeThatRejectsCheck() {\n        final Builder settingsBuilder = Settings.builder();\n        if (randomBoolean()) {\n            settingsBuilder.put(FOLLOWER_CHECK_RETRY_COUNT_SETTING.getKey(), randomIntBetween(1, 10));\n        }\n        if (randomBoolean()) {\n            settingsBuilder.put(FOLLOWER_CHECK_INTERVAL_SETTING.getKey(), randomIntBetween(100, 100000) + \"ms\");\n        }\n        final Settings settings = settingsBuilder.build();\n\n        testBehaviourOfFailingNode(settings, () -> {\n                throw new ElasticsearchException(\"simulated exception\");\n            },\n            \"followers check retry count exceeded\",\n            (FOLLOWER_CHECK_RETRY_COUNT_SETTING.get(settings) - 1) * FOLLOWER_CHECK_INTERVAL_SETTING.get(settings).millis());\n    }\n","date":"2018-12-06 15:31:46","endLine":189,"groupId":"46471","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testFailsNodeThatRejectsCheck","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/be/da4ef1a8c4c2eea418c3decb7d282f1793a813.src","preCode":"    public void testFailsNodeThatRejectsCheck() {\n        final Builder settingsBuilder = Settings.builder();\n        if (randomBoolean()) {\n            settingsBuilder.put(FOLLOWER_CHECK_RETRY_COUNT_SETTING.getKey(), randomIntBetween(1, 10));\n        }\n        if (randomBoolean()) {\n            settingsBuilder.put(FOLLOWER_CHECK_INTERVAL_SETTING.getKey(), randomIntBetween(100, 100000) + \"ms\");\n        }\n        final Settings settings = settingsBuilder.build();\n\n        testBehaviourOfFailingNode(settings, () -> {\n                throw new ElasticsearchException(\"simulated exception\");\n            },\n            \"followers check retry count exceeded\",\n            (FOLLOWER_CHECK_RETRY_COUNT_SETTING.get(settings) - 1) * FOLLOWER_CHECK_INTERVAL_SETTING.get(settings).millis());\n    }\n","realPath":"server/src/test/java/org/elasticsearch/cluster/coordination/FollowersCheckerTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":174,"status":"B"}],"commitId":"ee05ef131286eead295cf58ed4393af56f0d7ade","commitMessage":"@@@Merge branch 'zen2'\n","date":"2018-12-06 15:31:46","modifiedFileCount":"122","status":"B","submitter":"Yannick Welsch"},{"authorTime":"2020-07-10 21:44:56","codes":[{"authorDate":"2020-07-10 21:44:56","commitOrder":2,"curCode":"    public void testFailsNodeThatDoesNotRespond() {\n        final Settings settings = randomSettings();\n        testBehaviourOfFailingNode(settings, () -> null,\n            \"followers check retry count exceeded\",\n            (FOLLOWER_CHECK_RETRY_COUNT_SETTING.get(settings) - 1) * FOLLOWER_CHECK_INTERVAL_SETTING.get(settings).millis()\n                + FOLLOWER_CHECK_RETRY_COUNT_SETTING.get(settings) * FOLLOWER_CHECK_TIMEOUT_SETTING.get(settings).millis(),\n            () -> new StatusInfo(HEALTHY, \"healthy-info\"));\n    }\n","date":"2020-07-10 21:44:56","endLine":178,"groupId":"46471","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testFailsNodeThatDoesNotRespond","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/f2/400e1fc2f33aed12c78c8614a6161937d8e159.src","preCode":"    public void testFailsNodeThatDoesNotRespond() {\n        final Builder settingsBuilder = Settings.builder();\n        if (randomBoolean()) {\n            settingsBuilder.put(FOLLOWER_CHECK_RETRY_COUNT_SETTING.getKey(), randomIntBetween(1, 10));\n        }\n        if (randomBoolean()) {\n            settingsBuilder.put(FOLLOWER_CHECK_INTERVAL_SETTING.getKey(), randomIntBetween(100, 100000) + \"ms\");\n        }\n        if (randomBoolean()) {\n            settingsBuilder.put(FOLLOWER_CHECK_TIMEOUT_SETTING.getKey(), randomIntBetween(1, 100000) + \"ms\");\n        }\n        final Settings settings = settingsBuilder.build();\n\n        testBehaviourOfFailingNode(settings, () -> null,\n            \"followers check retry count exceeded\",\n            (FOLLOWER_CHECK_RETRY_COUNT_SETTING.get(settings) - 1) * FOLLOWER_CHECK_INTERVAL_SETTING.get(settings).millis()\n                + FOLLOWER_CHECK_RETRY_COUNT_SETTING.get(settings) * FOLLOWER_CHECK_TIMEOUT_SETTING.get(settings).millis());\n    }\n","realPath":"server/src/test/java/org/elasticsearch/cluster/coordination/FollowersCheckerTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":171,"status":"M"},{"authorDate":"2020-07-10 21:44:56","commitOrder":2,"curCode":"    public void testFailsNodeThatRejectsCheck() {\n        final Settings settings = randomSettings();\n        testBehaviourOfFailingNode(settings, () -> {\n                throw new ElasticsearchException(\"simulated exception\");\n            },\n            \"followers check retry count exceeded\",\n            (FOLLOWER_CHECK_RETRY_COUNT_SETTING.get(settings) - 1) * FOLLOWER_CHECK_INTERVAL_SETTING.get(settings).millis(),\n            () -> new StatusInfo(HEALTHY, \"healthy-info\"));\n    }\n","date":"2020-07-10 21:44:56","endLine":188,"groupId":"47552","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testFailsNodeThatRejectsCheck","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/f2/400e1fc2f33aed12c78c8614a6161937d8e159.src","preCode":"    public void testFailsNodeThatRejectsCheck() {\n        final Builder settingsBuilder = Settings.builder();\n        if (randomBoolean()) {\n            settingsBuilder.put(FOLLOWER_CHECK_RETRY_COUNT_SETTING.getKey(), randomIntBetween(1, 10));\n        }\n        if (randomBoolean()) {\n            settingsBuilder.put(FOLLOWER_CHECK_INTERVAL_SETTING.getKey(), randomIntBetween(100, 100000) + \"ms\");\n        }\n        final Settings settings = settingsBuilder.build();\n\n        testBehaviourOfFailingNode(settings, () -> {\n                throw new ElasticsearchException(\"simulated exception\");\n            },\n            \"followers check retry count exceeded\",\n            (FOLLOWER_CHECK_RETRY_COUNT_SETTING.get(settings) - 1) * FOLLOWER_CHECK_INTERVAL_SETTING.get(settings).millis());\n    }\n","realPath":"server/src/test/java/org/elasticsearch/cluster/coordination/FollowersCheckerTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":180,"status":"M"}],"commitId":"366ca378a8644d6654417988820c67f4feb714fe","commitMessage":"@@@Merge branch 'master' into feature/runtime_fields\n","date":"2020-07-10 21:44:56","modifiedFileCount":"565","status":"M","submitter":"Luca Cavanna"},{"authorTime":"2021-07-26 16:13:00","codes":[{"authorDate":"2021-07-26 16:13:00","commitOrder":3,"curCode":"    public void testFailsNodeThatDoesNotRespond() {\n        final Settings settings = randomSettings();\n        testBehaviourOfFailingNode(settings, () -> null,\n            \"followers check retry count exceeded [timeouts=\" + FOLLOWER_CHECK_RETRY_COUNT_SETTING.get(settings) + \", failures=0]\",\n            (FOLLOWER_CHECK_RETRY_COUNT_SETTING.get(settings) - 1) * FOLLOWER_CHECK_INTERVAL_SETTING.get(settings).millis()\n                + FOLLOWER_CHECK_RETRY_COUNT_SETTING.get(settings) * FOLLOWER_CHECK_TIMEOUT_SETTING.get(settings).millis(),\n            () -> new StatusInfo(HEALTHY, \"healthy-info\"));\n    }\n","date":"2021-07-26 16:13:00","endLine":168,"groupId":"102341","id":5,"instanceNumber":1,"isCurCommit":1,"methodName":"testFailsNodeThatDoesNotRespond","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/1b/fc46bb7ab25ea26180e586223fedffefdd4215.src","preCode":"    public void testFailsNodeThatDoesNotRespond() {\n        final Settings settings = randomSettings();\n        testBehaviourOfFailingNode(settings, () -> null,\n            \"followers check retry count exceeded\",\n            (FOLLOWER_CHECK_RETRY_COUNT_SETTING.get(settings) - 1) * FOLLOWER_CHECK_INTERVAL_SETTING.get(settings).millis()\n                + FOLLOWER_CHECK_RETRY_COUNT_SETTING.get(settings) * FOLLOWER_CHECK_TIMEOUT_SETTING.get(settings).millis(),\n            () -> new StatusInfo(HEALTHY, \"healthy-info\"));\n    }\n","realPath":"server/src/test/java/org/elasticsearch/cluster/coordination/FollowersCheckerTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":161,"status":"M"},{"authorDate":"2021-07-26 16:13:00","commitOrder":3,"curCode":"    public void testFailsNodeThatRejectsCheck() {\n        final Settings settings = randomSettings();\n        testBehaviourOfFailingNode(settings, () -> {\n                throw new ElasticsearchException(\"simulated exception\");\n            },\n            \"followers check retry count exceeded [timeouts=0, failures=\" + FOLLOWER_CHECK_RETRY_COUNT_SETTING.get(settings) + \"]\",\n            (FOLLOWER_CHECK_RETRY_COUNT_SETTING.get(settings) - 1) * FOLLOWER_CHECK_INTERVAL_SETTING.get(settings).millis(),\n            () -> new StatusInfo(HEALTHY, \"healthy-info\"));\n    }\n","date":"2021-07-26 16:13:00","endLine":178,"groupId":"102341","id":6,"instanceNumber":2,"isCurCommit":1,"methodName":"testFailsNodeThatRejectsCheck","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/1b/fc46bb7ab25ea26180e586223fedffefdd4215.src","preCode":"    public void testFailsNodeThatRejectsCheck() {\n        final Settings settings = randomSettings();\n        testBehaviourOfFailingNode(settings, () -> {\n                throw new ElasticsearchException(\"simulated exception\");\n            },\n            \"followers check retry count exceeded\",\n            (FOLLOWER_CHECK_RETRY_COUNT_SETTING.get(settings) - 1) * FOLLOWER_CHECK_INTERVAL_SETTING.get(settings).millis(),\n            () -> new StatusInfo(HEALTHY, \"healthy-info\"));\n    }\n","realPath":"server/src/test/java/org/elasticsearch/cluster/coordination/FollowersCheckerTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":170,"status":"M"}],"commitId":"b6efb38aaed9c29b3efd493e074db71de7cd1b88","commitMessage":"@@@Distinguish timeouts/failures in follower checker (#75519)\n\nToday when a node is removed from the cluster because of repeated\nfollower check failures it is not clear whether those failures are due\nto active rejections or timeouts. It's important for further\ninvestigation to distinguish these two cases. This commit adds tracking\nfor the number of timeouts separately from the number of active\nfailures.  and includes the counts of each in the removal reason.","date":"2021-07-26 16:13:00","modifiedFileCount":"2","status":"M","submitter":"David Turner"}]
