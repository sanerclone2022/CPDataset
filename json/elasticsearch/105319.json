[{"authorTime":"2020-02-08 07:01:20","codes":[{"authorDate":"2019-12-17 00:14:45","commitOrder":2,"curCode":"    public void testBadMissingField() {\n        MinAggregationBuilder aggregationBuilder = new MinAggregationBuilder(\"min\").field(\"number\").missing(\"not_a_number\");\n\n        MappedFieldType fieldType = new NumberFieldMapper.NumberFieldType(NumberFieldMapper.NumberType.INTEGER);\n        fieldType.setName(\"number\");\n\n        expectThrows(NumberFormatException.class,\n            () -> testCase(aggregationBuilder, new MatchAllDocsQuery(), iw -> {\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 7)));\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 1)));\n            }, (Consumer<InternalMin>) min -> {\n                fail(\"Should have thrown exception\");\n            }, fieldType));\n    }\n","date":"2019-12-17 00:14:45","endLine":299,"groupId":"42656","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testBadMissingField","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/92/2536a76544a8bfd0b6cba2ecbedb0f63c53b71.src","preCode":"    public void testBadMissingField() {\n        MinAggregationBuilder aggregationBuilder = new MinAggregationBuilder(\"min\").field(\"number\").missing(\"not_a_number\");\n\n        MappedFieldType fieldType = new NumberFieldMapper.NumberFieldType(NumberFieldMapper.NumberType.INTEGER);\n        fieldType.setName(\"number\");\n\n        expectThrows(NumberFormatException.class,\n            () -> testCase(aggregationBuilder, new MatchAllDocsQuery(), iw -> {\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 7)));\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 1)));\n            }, (Consumer<InternalMin>) min -> {\n                fail(\"Should have thrown exception\");\n            }, fieldType));\n    }\n","realPath":"server/src/test/java/org/elasticsearch/search/aggregations/metrics/MinAggregatorTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":286,"status":"NB"},{"authorDate":"2020-02-08 07:01:20","commitOrder":2,"curCode":"    public void testUnmappedWithBadMissingField() {\n        BoxplotAggregationBuilder aggregationBuilder = new BoxplotAggregationBuilder(\"boxplot\")\n            .field(\"does_not_exist\").missing(\"not_a_number\");\n\n        MappedFieldType fieldType = new NumberFieldMapper.NumberFieldType(NumberFieldMapper.NumberType.INTEGER);\n        fieldType.setName(\"number\");\n\n        expectThrows(NumberFormatException.class,\n            () -> testCase(aggregationBuilder, new MatchAllDocsQuery(), iw -> {\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 2)));\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 2)));\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 3)));\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 4)));\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 5)));\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 10)));\n            }, (Consumer<InternalBoxplot>) boxplot -> {\n                fail(\"Should have thrown exception\");\n            }, fieldType));\n    }\n","date":"2020-02-08 07:01:20","endLine":198,"groupId":"42656","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testUnmappedWithBadMissingField","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/31/a532d5314be103a38f588467823a5d0d7e3a1e.src","preCode":"    public void testUnmappedWithBadMissingField() {\n        BoxplotAggregationBuilder aggregationBuilder = new BoxplotAggregationBuilder(\"boxplot\")\n            .field(\"does_not_exist\").missing(\"not_a_number\");\n\n        MappedFieldType fieldType = new NumberFieldMapper.NumberFieldType(NumberFieldMapper.NumberType.INTEGER);\n        fieldType.setName(\"number\");\n\n        expectThrows(NumberFormatException.class,\n            () -> testCase(aggregationBuilder, new MatchAllDocsQuery(), iw -> {\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 2)));\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 2)));\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 3)));\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 4)));\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 5)));\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 10)));\n            }, (Consumer<InternalBoxplot>) boxplot -> {\n                fail(\"Should have thrown exception\");\n            }, fieldType));\n    }\n","realPath":"x-pack/plugin/analytics/src/test/java/org/elasticsearch/xpack/analytics/boxplot/BoxplotAggregatorTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":180,"status":"B"}],"commitId":"c50cfa0668ff11b6649e327ea8b0f70cdcdde64c","commitMessage":"@@@Add Boxplot Aggregation (#51948)\n\nAdds a `boxplot` aggregation that calculates min.  max.  medium and the first\nand the third quartiles of the given data set.\n\nCloses #33112\n","date":"2020-02-08 07:01:20","modifiedFileCount":"2","status":"M","submitter":"Igor Motov"},{"authorTime":"2020-06-16 00:47:15","codes":[{"authorDate":"2020-06-16 00:47:15","commitOrder":3,"curCode":"    public void testBadMissingField() {\n        MinAggregationBuilder aggregationBuilder = new MinAggregationBuilder(\"min\").field(\"number\").missing(\"not_a_number\");\n\n        MappedFieldType fieldType = new NumberFieldMapper.NumberFieldType(\"number\", NumberFieldMapper.NumberType.INTEGER);\n\n        expectThrows(NumberFormatException.class,\n            () -> testCase(aggregationBuilder, new MatchAllDocsQuery(), iw -> {\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 7)));\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 1)));\n            }, (Consumer<InternalMin>) min -> {\n                fail(\"Should have thrown exception\");\n            }, fieldType));\n    }\n","date":"2020-06-16 00:47:15","endLine":316,"groupId":"105319","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testBadMissingField","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/89/91639f5ac7ec53c1cdad0e648bcd305b8a2fc8.src","preCode":"    public void testBadMissingField() {\n        MinAggregationBuilder aggregationBuilder = new MinAggregationBuilder(\"min\").field(\"number\").missing(\"not_a_number\");\n\n        MappedFieldType fieldType = new NumberFieldMapper.NumberFieldType(NumberFieldMapper.NumberType.INTEGER);\n        fieldType.setName(\"number\");\n\n        expectThrows(NumberFormatException.class,\n            () -> testCase(aggregationBuilder, new MatchAllDocsQuery(), iw -> {\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 7)));\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 1)));\n            }, (Consumer<InternalMin>) min -> {\n                fail(\"Should have thrown exception\");\n            }, fieldType));\n    }\n","realPath":"server/src/test/java/org/elasticsearch/search/aggregations/metrics/MinAggregatorTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":304,"status":"M"},{"authorDate":"2020-06-16 00:47:15","commitOrder":3,"curCode":"    public void testUnmappedWithBadMissingField() {\n        BoxplotAggregationBuilder aggregationBuilder = new BoxplotAggregationBuilder(\"boxplot\")\n            .field(\"does_not_exist\").missing(\"not_a_number\");\n\n        MappedFieldType fieldType = new NumberFieldMapper.NumberFieldType(\"number\", NumberFieldMapper.NumberType.INTEGER);\n\n        expectThrows(NumberFormatException.class,\n            () -> testCase(aggregationBuilder, new MatchAllDocsQuery(), iw -> {\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 2)));\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 2)));\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 3)));\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 4)));\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 5)));\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 10)));\n            }, (Consumer<InternalBoxplot>) boxplot -> {\n                fail(\"Should have thrown exception\");\n            }, fieldType));\n    }\n","date":"2020-06-16 00:47:15","endLine":260,"groupId":"105319","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testUnmappedWithBadMissingField","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/a1/75976641dc86c40b696465df50fb7bf630c708.src","preCode":"    public void testUnmappedWithBadMissingField() {\n        BoxplotAggregationBuilder aggregationBuilder = new BoxplotAggregationBuilder(\"boxplot\")\n            .field(\"does_not_exist\").missing(\"not_a_number\");\n\n        MappedFieldType fieldType = new NumberFieldMapper.NumberFieldType(NumberFieldMapper.NumberType.INTEGER);\n        fieldType.setName(\"number\");\n\n        expectThrows(NumberFormatException.class,\n            () -> testCase(aggregationBuilder, new MatchAllDocsQuery(), iw -> {\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 2)));\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 2)));\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 3)));\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 4)));\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 5)));\n                iw.addDocument(singleton(new NumericDocValuesField(\"number\", 10)));\n            }, (Consumer<InternalBoxplot>) boxplot -> {\n                fail(\"Should have thrown exception\");\n            }, fieldType));\n    }\n","realPath":"x-pack/plugin/analytics/src/test/java/org/elasticsearch/xpack/analytics/boxplot/BoxplotAggregatorTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":243,"status":"M"}],"commitId":"3b696828ada5953bb1669b972a353736383edf08","commitMessage":"@@@MappedFieldType should not extend FieldType (#57666)\n\nMappedFieldType is a combination of two concerns:\n\n* an extension of lucene's FieldType.  defining how a field should be indexed\n* a set of query factory methods.  defining how a field should be searched\n\nWe want to break these two concerns apart. This commit is a first step to doing this.  breaking\nthe inheritance relationship between MappedFieldType and FieldType. MappedFieldType \ninstead has a series of boolean flags defining whether or not the field is searchable or \naggregatable.  and FieldMapper has a separate FieldType passed to its constructor defining \nhow indexing should be done.\n\nRelates to #56814","date":"2020-06-16 00:47:15","modifiedFileCount":"257","status":"M","submitter":"Alan Woodward"}]
