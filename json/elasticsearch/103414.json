[{"authorTime":"2019-06-27 20:33:28","codes":[{"authorDate":"2019-12-04 20:16:36","commitOrder":2,"curCode":"    public void testCacheability() throws IOException {\n        IntervalQueryBuilder queryBuilder = new IntervalQueryBuilder(STRING_FIELD_NAME, createRandomSource(0, false));\n        QueryShardContext context = createShardContext();\n        QueryBuilder rewriteQuery = rewriteQuery(queryBuilder, new QueryShardContext(context));\n        assertNotNull(rewriteQuery.toQuery(context));\n        assertTrue(\"query should be cacheable: \" + queryBuilder.toString(), context.isCacheable());\n\n        IntervalsSourceProvider.IntervalFilter scriptFilter = new IntervalsSourceProvider.IntervalFilter(\n            new Script(ScriptType.INLINE, \"mockscript\", \"1\", Collections.emptyMap())\n        );\n        IntervalsSourceProvider source = new IntervalsSourceProvider.Match(\"text\", 0, true, \"simple\", scriptFilter, null);\n        queryBuilder = new IntervalQueryBuilder(STRING_FIELD_NAME, source);\n        rewriteQuery = rewriteQuery(queryBuilder, new QueryShardContext(context));\n        assertNotNull(rewriteQuery.toQuery(context));\n        assertFalse(\"query with scripts should not be cacheable: \" + queryBuilder.toString(), context.isCacheable());\n    }\n","date":"2019-12-04 20:16:36","endLine":157,"groupId":"37519","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testCacheability","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/73/75b5951948f56ae3bf2f1ba4a4749d75395133.src","preCode":"    public void testCacheability() throws IOException {\n        IntervalQueryBuilder queryBuilder = new IntervalQueryBuilder(STRING_FIELD_NAME, createRandomSource(0, false));\n        QueryShardContext context = createShardContext();\n        QueryBuilder rewriteQuery = rewriteQuery(queryBuilder, new QueryShardContext(context));\n        assertNotNull(rewriteQuery.toQuery(context));\n        assertTrue(\"query should be cacheable: \" + queryBuilder.toString(), context.isCacheable());\n\n        IntervalsSourceProvider.IntervalFilter scriptFilter = new IntervalsSourceProvider.IntervalFilter(\n            new Script(ScriptType.INLINE, \"mockscript\", \"1\", Collections.emptyMap())\n        );\n        IntervalsSourceProvider source = new IntervalsSourceProvider.Match(\"text\", 0, true, \"simple\", scriptFilter, null);\n        queryBuilder = new IntervalQueryBuilder(STRING_FIELD_NAME, source);\n        rewriteQuery = rewriteQuery(queryBuilder, new QueryShardContext(context));\n        assertNotNull(rewriteQuery.toQuery(context));\n        assertFalse(\"query with scripts should not be cacheable: \" + queryBuilder.toString(), context.isCacheable());\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/query/IntervalQueryBuilderTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":142,"status":"B"},{"authorDate":"2019-06-27 20:33:28","commitOrder":2,"curCode":"    public void testCacheability() throws IOException {\n        ScriptQueryBuilder queryBuilder = createTestQueryBuilder();\n        QueryShardContext context = createShardContext();\n        QueryBuilder rewriteQuery = rewriteQuery(queryBuilder, new QueryShardContext(context));\n        assertNotNull(rewriteQuery.toQuery(context));\n        assertFalse(\"query should not be cacheable: \" + queryBuilder.toString(), context.isCacheable());\n    }\n","date":"2019-06-27 20:33:28","endLine":129,"groupId":"37519","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testCacheability","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/b3/cac936d3ae26e7387c69749ece91052183c315.src","preCode":"    public void testCacheability() throws IOException {\n        ScriptQueryBuilder queryBuilder = createTestQueryBuilder();\n        QueryShardContext context = createShardContext();\n        QueryBuilder rewriteQuery = rewriteQuery(queryBuilder, new QueryShardContext(context));\n        assertNotNull(rewriteQuery.toQuery(context));\n        assertFalse(\"query should not be cacheable: \" + queryBuilder.toString(), context.isCacheable());\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/query/ScriptQueryBuilderTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":123,"status":"NB"}],"commitId":"f38ce06b9e66e0671cc0121c3ae3c0f25abeb7ee","commitMessage":"@@@[CI] Interval queries cannot be cached if they use scripts (#49824)\n\n#49793 added test coverage for interval queries that contain script filters.  but did\nnot adjust testCacheability().  which how fails occasionally when given a random\ninterval source containing a script. This commit overrides testCacheability() to\nexplicitly sources with and without script filters.\n\nFixes #49821","date":"2019-12-04 20:16:36","modifiedFileCount":"1","status":"M","submitter":"Alan Woodward"},{"authorTime":"2019-06-27 20:33:28","codes":[{"authorDate":"2020-04-03 22:00:46","commitOrder":3,"curCode":"    public void testCacheability() throws IOException {\n        IntervalQueryBuilder queryBuilder = new IntervalQueryBuilder(TEXT_FIELD_NAME, createRandomSource(0, false));\n        QueryShardContext context = createShardContext();\n        QueryBuilder rewriteQuery = rewriteQuery(queryBuilder, new QueryShardContext(context));\n        assertNotNull(rewriteQuery.toQuery(context));\n        assertTrue(\"query should be cacheable: \" + queryBuilder.toString(), context.isCacheable());\n\n        IntervalsSourceProvider.IntervalFilter scriptFilter = new IntervalsSourceProvider.IntervalFilter(\n            new Script(ScriptType.INLINE, \"mockscript\", \"1\", Collections.emptyMap())\n        );\n        IntervalsSourceProvider source = new IntervalsSourceProvider.Match(\"text\", 0, true, \"simple\", scriptFilter, null);\n        queryBuilder = new IntervalQueryBuilder(TEXT_FIELD_NAME, source);\n        rewriteQuery = rewriteQuery(queryBuilder, new QueryShardContext(context));\n        assertNotNull(rewriteQuery.toQuery(context));\n        assertFalse(\"query with scripts should not be cacheable: \" + queryBuilder.toString(), context.isCacheable());\n    }\n","date":"2020-04-03 22:00:46","endLine":175,"groupId":"37519","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testCacheability","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/63/bd21ad8df1d5631775be3670736034570253f6.src","preCode":"    public void testCacheability() throws IOException {\n        IntervalQueryBuilder queryBuilder = new IntervalQueryBuilder(STRING_FIELD_NAME, createRandomSource(0, false));\n        QueryShardContext context = createShardContext();\n        QueryBuilder rewriteQuery = rewriteQuery(queryBuilder, new QueryShardContext(context));\n        assertNotNull(rewriteQuery.toQuery(context));\n        assertTrue(\"query should be cacheable: \" + queryBuilder.toString(), context.isCacheable());\n\n        IntervalsSourceProvider.IntervalFilter scriptFilter = new IntervalsSourceProvider.IntervalFilter(\n            new Script(ScriptType.INLINE, \"mockscript\", \"1\", Collections.emptyMap())\n        );\n        IntervalsSourceProvider source = new IntervalsSourceProvider.Match(\"text\", 0, true, \"simple\", scriptFilter, null);\n        queryBuilder = new IntervalQueryBuilder(STRING_FIELD_NAME, source);\n        rewriteQuery = rewriteQuery(queryBuilder, new QueryShardContext(context));\n        assertNotNull(rewriteQuery.toQuery(context));\n        assertFalse(\"query with scripts should not be cacheable: \" + queryBuilder.toString(), context.isCacheable());\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/query/IntervalQueryBuilderTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":160,"status":"M"},{"authorDate":"2019-06-27 20:33:28","commitOrder":3,"curCode":"    public void testCacheability() throws IOException {\n        ScriptQueryBuilder queryBuilder = createTestQueryBuilder();\n        QueryShardContext context = createShardContext();\n        QueryBuilder rewriteQuery = rewriteQuery(queryBuilder, new QueryShardContext(context));\n        assertNotNull(rewriteQuery.toQuery(context));\n        assertFalse(\"query should not be cacheable: \" + queryBuilder.toString(), context.isCacheable());\n    }\n","date":"2019-06-27 20:33:28","endLine":129,"groupId":"37519","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testCacheability","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/b3/cac936d3ae26e7387c69749ece91052183c315.src","preCode":"    public void testCacheability() throws IOException {\n        ScriptQueryBuilder queryBuilder = createTestQueryBuilder();\n        QueryShardContext context = createShardContext();\n        QueryBuilder rewriteQuery = rewriteQuery(queryBuilder, new QueryShardContext(context));\n        assertNotNull(rewriteQuery.toQuery(context));\n        assertFalse(\"query should not be cacheable: \" + queryBuilder.toString(), context.isCacheable());\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/query/ScriptQueryBuilderTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":123,"status":"N"}],"commitId":"f5759bb2092f1a957e79626c872c3f5707c1ee04","commitMessage":"@@@Rename field name constants in AbstractBuilderTestCase (#53234)\n\nSome field name constants were not updaten when we moved from \"string\" to \"text\"\nand \"keyword\" fields. Renaming them makes it easier and faster to know which\nfield type is used in test subclassing this base test case.","date":"2020-04-03 22:00:46","modifiedFileCount":"34","status":"M","submitter":"Christoph B?scher"},{"authorTime":"2021-01-15 01:11:59","codes":[{"authorDate":"2021-01-15 01:11:59","commitOrder":4,"curCode":"    public void testCacheability() throws IOException {\n        IntervalQueryBuilder queryBuilder = new IntervalQueryBuilder(TEXT_FIELD_NAME, createRandomSource(0, false));\n        SearchExecutionContext context = createSearchExecutionContext();\n        QueryBuilder rewriteQuery = rewriteQuery(queryBuilder, new SearchExecutionContext(context));\n        assertNotNull(rewriteQuery.toQuery(context));\n        assertTrue(\"query should be cacheable: \" + queryBuilder.toString(), context.isCacheable());\n\n        IntervalsSourceProvider.IntervalFilter scriptFilter = new IntervalsSourceProvider.IntervalFilter(\n            new Script(ScriptType.INLINE, \"mockscript\", \"1\", Collections.emptyMap())\n        );\n        IntervalsSourceProvider source = new IntervalsSourceProvider.Match(\"text\", 0, true, \"simple\", scriptFilter, null);\n        queryBuilder = new IntervalQueryBuilder(TEXT_FIELD_NAME, source);\n        rewriteQuery = rewriteQuery(queryBuilder, new SearchExecutionContext(context));\n        assertNotNull(rewriteQuery.toQuery(context));\n        assertFalse(\"query with scripts should not be cacheable: \" + queryBuilder.toString(), context.isCacheable());\n    }\n","date":"2021-01-15 01:11:59","endLine":171,"groupId":"103414","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"testCacheability","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/ab/ea56aeab55bb4d372bb7fcadc1e5bee0a2860c.src","preCode":"    public void testCacheability() throws IOException {\n        IntervalQueryBuilder queryBuilder = new IntervalQueryBuilder(TEXT_FIELD_NAME, createRandomSource(0, false));\n        QueryShardContext context = createShardContext();\n        QueryBuilder rewriteQuery = rewriteQuery(queryBuilder, new QueryShardContext(context));\n        assertNotNull(rewriteQuery.toQuery(context));\n        assertTrue(\"query should be cacheable: \" + queryBuilder.toString(), context.isCacheable());\n\n        IntervalsSourceProvider.IntervalFilter scriptFilter = new IntervalsSourceProvider.IntervalFilter(\n            new Script(ScriptType.INLINE, \"mockscript\", \"1\", Collections.emptyMap())\n        );\n        IntervalsSourceProvider source = new IntervalsSourceProvider.Match(\"text\", 0, true, \"simple\", scriptFilter, null);\n        queryBuilder = new IntervalQueryBuilder(TEXT_FIELD_NAME, source);\n        rewriteQuery = rewriteQuery(queryBuilder, new QueryShardContext(context));\n        assertNotNull(rewriteQuery.toQuery(context));\n        assertFalse(\"query with scripts should not be cacheable: \" + queryBuilder.toString(), context.isCacheable());\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/query/IntervalQueryBuilderTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":156,"status":"M"},{"authorDate":"2021-01-15 01:11:59","commitOrder":4,"curCode":"    public void testCacheability() throws IOException {\n        ScriptQueryBuilder queryBuilder = createTestQueryBuilder();\n        SearchExecutionContext context = createSearchExecutionContext();\n        QueryBuilder rewriteQuery = rewriteQuery(queryBuilder, new SearchExecutionContext(context));\n        assertNotNull(rewriteQuery.toQuery(context));\n        assertFalse(\"query should not be cacheable: \" + queryBuilder.toString(), context.isCacheable());\n    }\n","date":"2021-01-15 01:11:59","endLine":133,"groupId":"103414","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"testCacheability","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/fb/2d9998161a9821a61f8d50c8f2507f922fcd15.src","preCode":"    public void testCacheability() throws IOException {\n        ScriptQueryBuilder queryBuilder = createTestQueryBuilder();\n        QueryShardContext context = createShardContext();\n        QueryBuilder rewriteQuery = rewriteQuery(queryBuilder, new QueryShardContext(context));\n        assertNotNull(rewriteQuery.toQuery(context));\n        assertFalse(\"query should not be cacheable: \" + queryBuilder.toString(), context.isCacheable());\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/query/ScriptQueryBuilderTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":127,"status":"M"}],"commitId":"5852fbedf52c77b0a76c2c731fdd4982fb65cd87","commitMessage":"@@@Rename QueryShardContext -> SearchExecutionContext. (#67490)\n\nWe decided to rename `QueryShardContext` to clarify that it supports all parts\nof search request execution. Before there was confusion over whether it should\nonly be used for building queries.  or maybe only used in the query phase. This\nPR also updates the javadocs.\n\nCloses #64740.","date":"2021-01-15 01:11:59","modifiedFileCount":"357","status":"M","submitter":"Julie Tibshirani"}]
