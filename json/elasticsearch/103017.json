[{"authorTime":"2019-07-31 10:52:59","codes":[{"authorDate":"2018-07-19 02:10:12","commitOrder":3,"curCode":"    public void testIgnoreMalformedParsing() throws IOException {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"geo_shape\")\n            .field(\"ignore_malformed\", \"true\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        DocumentMapper defaultMapper = createIndex(\"test\").mapperService().documentMapperParser().parse(\"type1\", new CompressedXContent(mapping));\n        Mapper fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(GeoShapeFieldMapper.class));\n\n        Explicit<Boolean> ignoreMalformed = ((GeoShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed.value(), equalTo(true));\n\n        \r\n        mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"geo_shape\")\n            .field(\"ignore_malformed\", \"false\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        defaultMapper = createIndex(\"test2\").mapperService().documentMapperParser().parse(\"type1\", new CompressedXContent(mapping));\n        fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(GeoShapeFieldMapper.class));\n\n        ignoreMalformed = ((GeoShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed.explicit(), equalTo(true));\n        assertThat(ignoreMalformed.value(), equalTo(false));\n    }\n","date":"2018-07-19 02:10:12","endLine":215,"groupId":"65135","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testIgnoreMalformedParsing","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/4c/947a44a0a1258afb556249eb52aa9d7d73daed.src","preCode":"    public void testIgnoreMalformedParsing() throws IOException {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"geo_shape\")\n            .field(\"ignore_malformed\", \"true\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        DocumentMapper defaultMapper = createIndex(\"test\").mapperService().documentMapperParser().parse(\"type1\", new CompressedXContent(mapping));\n        Mapper fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(GeoShapeFieldMapper.class));\n\n        Explicit<Boolean> ignoreMalformed = ((GeoShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed.value(), equalTo(true));\n\n        \r\n        mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"geo_shape\")\n            .field(\"ignore_malformed\", \"false\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        defaultMapper = createIndex(\"test2\").mapperService().documentMapperParser().parse(\"type1\", new CompressedXContent(mapping));\n        fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(GeoShapeFieldMapper.class));\n\n        ignoreMalformed = ((GeoShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed.explicit(), equalTo(true));\n        assertThat(ignoreMalformed.value(), equalTo(false));\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/GeoShapeFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":185,"status":"NB"},{"authorDate":"2019-07-31 10:52:59","commitOrder":3,"curCode":"    public void testIgnoreMalformedParsing() throws IOException {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"shape\")\n            .field(\"ignore_malformed\", \"true\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        DocumentMapper defaultMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        Mapper fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(ShapeFieldMapper.class));\n\n        Explicit<Boolean> ignoreMalformed = ((ShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed.value(), equalTo(true));\n\n        \r\n        mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"shape\")\n            .field(\"ignore_malformed\", \"false\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        defaultMapper = createIndex(\"test2\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(ShapeFieldMapper.class));\n\n        ignoreMalformed = ((ShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed.explicit(), equalTo(true));\n        assertThat(ignoreMalformed.value(), equalTo(false));\n    }\n","date":"2019-07-31 10:52:59","endLine":208,"groupId":"65135","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testIgnoreMalformedParsing","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/d1/ca1a035a9bbf07a236fc9401a4ea70925e485a.src","preCode":"    public void testIgnoreMalformedParsing() throws IOException {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"shape\")\n            .field(\"ignore_malformed\", \"true\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        DocumentMapper defaultMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        Mapper fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(ShapeFieldMapper.class));\n\n        Explicit<Boolean> ignoreMalformed = ((ShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed.value(), equalTo(true));\n\n        \r\n        mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"shape\")\n            .field(\"ignore_malformed\", \"false\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        defaultMapper = createIndex(\"test2\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(ShapeFieldMapper.class));\n\n        ignoreMalformed = ((ShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed.explicit(), equalTo(true));\n        assertThat(ignoreMalformed.value(), equalTo(false));\n    }\n","realPath":"x-pack/plugin/spatial/src/test/java/org/elasticsearch/xpack/spatial/index/mapper/ShapeFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":176,"status":"B"}],"commitId":"b07310022d2ae66ef28b011d289a3da6b197ba1e","commitMessage":"@@@[SPATIAL] New ShapeFieldMapper for indexing cartesian geometries (#44980)\n\nThis commit adds a new ShapeFieldMapper to the xpack spatial module for\nindexing arbitrary cartesian geometries using a new field type called shape.\nThe indexing approach leverages lucene's new XYShape field type which is\nbacked by BKD in the same manner as LatLonShape but without the WGS84\nlatitude longitude restrictions. The new field mapper builds on and\nextends the refactoring effort in AbstractGeometryFieldMapper and accepts\nshapes in either GeoJSON or WKT format (both of which support non geospatial geometries).\n\nTests are provided in the ShapeFieldMapperTest class in the same manner\nas GeoShapeFieldMapperTests and LegacyGeoShapeFieldMapperTests.\nDocumentation for how to use the new field type and what parameters are\naccepted is included. The QueryBuilder for searching indexed shapes is provided in a separate commit.","date":"2019-07-31 10:52:59","modifiedFileCount":"6","status":"M","submitter":"Nick Knize"},{"authorTime":"2019-07-31 10:52:59","codes":[{"authorDate":"2020-08-25 01:10:47","commitOrder":4,"curCode":"    public void testIgnoreMalformedParsing() throws IOException {\n        DocumentMapper mapper = createDocumentMapper(fieldMapping(b -> b.field(\"type\", \"geo_shape\").field(\"ignore_malformed\", true)));\n        Mapper fieldMapper = mapper.mappers().getMapper(\"field\");\n        assertThat(fieldMapper, instanceOf(GeoShapeFieldMapper.class));\n        Explicit<Boolean> ignoreMalformed = ((GeoShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed.value(), equalTo(true));\n\n        \r\n        mapper = createDocumentMapper(fieldMapping(b -> b.field(\"type\", \"geo_shape\").field(\"ignore_malformed\", false)));\n        fieldMapper = mapper.mappers().getMapper(\"field\");\n        assertThat(fieldMapper, instanceOf(GeoShapeFieldMapper.class));\n        ignoreMalformed = ((GeoShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed.explicit(), equalTo(true));\n        assertThat(ignoreMalformed.value(), equalTo(false));\n    }\n","date":"2020-08-25 01:10:47","endLine":166,"groupId":"16100","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testIgnoreMalformedParsing","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/79/72c5250d4325af263d43b2cb48ccc974e5c03c.src","preCode":"    public void testIgnoreMalformedParsing() throws IOException {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"geo_shape\")\n            .field(\"ignore_malformed\", \"true\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        DocumentMapper defaultMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        Mapper fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(GeoShapeFieldMapper.class));\n\n        Explicit<Boolean> ignoreMalformed = ((GeoShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed.value(), equalTo(true));\n\n        \r\n        mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"geo_shape\")\n            .field(\"ignore_malformed\", \"false\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        defaultMapper = createIndex(\"test2\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(GeoShapeFieldMapper.class));\n\n        ignoreMalformed = ((GeoShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed.explicit(), equalTo(true));\n        assertThat(ignoreMalformed.value(), equalTo(false));\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/GeoShapeFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":152,"status":"M"},{"authorDate":"2019-07-31 10:52:59","commitOrder":4,"curCode":"    public void testIgnoreMalformedParsing() throws IOException {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"shape\")\n            .field(\"ignore_malformed\", \"true\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        DocumentMapper defaultMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        Mapper fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(ShapeFieldMapper.class));\n\n        Explicit<Boolean> ignoreMalformed = ((ShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed.value(), equalTo(true));\n\n        \r\n        mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"shape\")\n            .field(\"ignore_malformed\", \"false\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        defaultMapper = createIndex(\"test2\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(ShapeFieldMapper.class));\n\n        ignoreMalformed = ((ShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed.explicit(), equalTo(true));\n        assertThat(ignoreMalformed.value(), equalTo(false));\n    }\n","date":"2019-07-31 10:52:59","endLine":208,"groupId":"65135","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testIgnoreMalformedParsing","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/d1/ca1a035a9bbf07a236fc9401a4ea70925e485a.src","preCode":"    public void testIgnoreMalformedParsing() throws IOException {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"shape\")\n            .field(\"ignore_malformed\", \"true\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        DocumentMapper defaultMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        Mapper fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(ShapeFieldMapper.class));\n\n        Explicit<Boolean> ignoreMalformed = ((ShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed.value(), equalTo(true));\n\n        \r\n        mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"shape\")\n            .field(\"ignore_malformed\", \"false\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        defaultMapper = createIndex(\"test2\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(ShapeFieldMapper.class));\n\n        ignoreMalformed = ((ShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed.explicit(), equalTo(true));\n        assertThat(ignoreMalformed.value(), equalTo(false));\n    }\n","realPath":"x-pack/plugin/spatial/src/test/java/org/elasticsearch/xpack/spatial/index/mapper/ShapeFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":176,"status":"N"}],"commitId":"e2dd0bde26e6c1f9f1a5137a5bf432d348e4205e","commitMessage":"@@@Merge branch 'master' into feature/runtime_fields\n","date":"2020-08-25 01:10:47","modifiedFileCount":"48","status":"M","submitter":"Nik Everett"},{"authorTime":"2019-07-31 10:52:59","codes":[{"authorDate":"2020-10-22 16:11:41","commitOrder":5,"curCode":"    public void testIgnoreMalformedParsing() throws IOException {\n        DocumentMapper mapper = createDocumentMapper(fieldMapping(b -> b.field(\"type\", \"geo_shape\").field(\"ignore_malformed\", true)));\n        Mapper fieldMapper = mapper.mappers().getMapper(\"field\");\n        assertThat(fieldMapper, instanceOf(GeoShapeFieldMapper.class));\n        boolean ignoreMalformed = ((GeoShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed, equalTo(true));\n\n        \r\n        mapper = createDocumentMapper(fieldMapping(b -> b.field(\"type\", \"geo_shape\").field(\"ignore_malformed\", false)));\n        fieldMapper = mapper.mappers().getMapper(\"field\");\n        assertThat(fieldMapper, instanceOf(GeoShapeFieldMapper.class));\n        ignoreMalformed = ((GeoShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed, equalTo(false));\n    }\n","date":"2020-10-22 16:11:41","endLine":163,"groupId":"64836","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"testIgnoreMalformedParsing","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/ff/1f1ebad3dd8ddb0a3a377034bf3095fbd9cba6.src","preCode":"    public void testIgnoreMalformedParsing() throws IOException {\n        DocumentMapper mapper = createDocumentMapper(fieldMapping(b -> b.field(\"type\", \"geo_shape\").field(\"ignore_malformed\", true)));\n        Mapper fieldMapper = mapper.mappers().getMapper(\"field\");\n        assertThat(fieldMapper, instanceOf(GeoShapeFieldMapper.class));\n        Explicit<Boolean> ignoreMalformed = ((GeoShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed.value(), equalTo(true));\n\n        \r\n        mapper = createDocumentMapper(fieldMapping(b -> b.field(\"type\", \"geo_shape\").field(\"ignore_malformed\", false)));\n        fieldMapper = mapper.mappers().getMapper(\"field\");\n        assertThat(fieldMapper, instanceOf(GeoShapeFieldMapper.class));\n        ignoreMalformed = ((GeoShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed.explicit(), equalTo(true));\n        assertThat(ignoreMalformed.value(), equalTo(false));\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/GeoShapeFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":150,"status":"M"},{"authorDate":"2019-07-31 10:52:59","commitOrder":5,"curCode":"    public void testIgnoreMalformedParsing() throws IOException {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"shape\")\n            .field(\"ignore_malformed\", \"true\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        DocumentMapper defaultMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        Mapper fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(ShapeFieldMapper.class));\n\n        Explicit<Boolean> ignoreMalformed = ((ShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed.value(), equalTo(true));\n\n        \r\n        mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"shape\")\n            .field(\"ignore_malformed\", \"false\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        defaultMapper = createIndex(\"test2\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(ShapeFieldMapper.class));\n\n        ignoreMalformed = ((ShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed.explicit(), equalTo(true));\n        assertThat(ignoreMalformed.value(), equalTo(false));\n    }\n","date":"2019-07-31 10:52:59","endLine":208,"groupId":"65135","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"testIgnoreMalformedParsing","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/d1/ca1a035a9bbf07a236fc9401a4ea70925e485a.src","preCode":"    public void testIgnoreMalformedParsing() throws IOException {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"shape\")\n            .field(\"ignore_malformed\", \"true\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        DocumentMapper defaultMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        Mapper fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(ShapeFieldMapper.class));\n\n        Explicit<Boolean> ignoreMalformed = ((ShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed.value(), equalTo(true));\n\n        \r\n        mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"shape\")\n            .field(\"ignore_malformed\", \"false\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        defaultMapper = createIndex(\"test2\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(ShapeFieldMapper.class));\n\n        ignoreMalformed = ((ShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed.explicit(), equalTo(true));\n        assertThat(ignoreMalformed.value(), equalTo(false));\n    }\n","realPath":"x-pack/plugin/spatial/src/test/java/org/elasticsearch/xpack/spatial/index/mapper/ShapeFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":176,"status":"N"}],"commitId":"bfaf3040c6e5245b6d3367483ba86c676dd09bd2","commitMessage":"@@@Convert geo field mappers to Parametrized form (#63836)\n\nRelates to #62988","date":"2020-10-22 16:11:41","modifiedFileCount":"42","status":"M","submitter":"Alan Woodward"},{"authorTime":"2020-11-06 23:20:25","codes":[{"authorDate":"2020-10-22 16:11:41","commitOrder":6,"curCode":"    public void testIgnoreMalformedParsing() throws IOException {\n        DocumentMapper mapper = createDocumentMapper(fieldMapping(b -> b.field(\"type\", \"geo_shape\").field(\"ignore_malformed\", true)));\n        Mapper fieldMapper = mapper.mappers().getMapper(\"field\");\n        assertThat(fieldMapper, instanceOf(GeoShapeFieldMapper.class));\n        boolean ignoreMalformed = ((GeoShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed, equalTo(true));\n\n        \r\n        mapper = createDocumentMapper(fieldMapping(b -> b.field(\"type\", \"geo_shape\").field(\"ignore_malformed\", false)));\n        fieldMapper = mapper.mappers().getMapper(\"field\");\n        assertThat(fieldMapper, instanceOf(GeoShapeFieldMapper.class));\n        ignoreMalformed = ((GeoShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed, equalTo(false));\n    }\n","date":"2020-10-22 16:11:41","endLine":163,"groupId":"103017","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"testIgnoreMalformedParsing","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/ff/1f1ebad3dd8ddb0a3a377034bf3095fbd9cba6.src","preCode":"    public void testIgnoreMalformedParsing() throws IOException {\n        DocumentMapper mapper = createDocumentMapper(fieldMapping(b -> b.field(\"type\", \"geo_shape\").field(\"ignore_malformed\", true)));\n        Mapper fieldMapper = mapper.mappers().getMapper(\"field\");\n        assertThat(fieldMapper, instanceOf(GeoShapeFieldMapper.class));\n        boolean ignoreMalformed = ((GeoShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed, equalTo(true));\n\n        \r\n        mapper = createDocumentMapper(fieldMapping(b -> b.field(\"type\", \"geo_shape\").field(\"ignore_malformed\", false)));\n        fieldMapper = mapper.mappers().getMapper(\"field\");\n        assertThat(fieldMapper, instanceOf(GeoShapeFieldMapper.class));\n        ignoreMalformed = ((GeoShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed, equalTo(false));\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/mapper/GeoShapeFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":150,"status":"N"},{"authorDate":"2020-11-06 23:20:25","commitOrder":6,"curCode":"    public void testIgnoreMalformedParsing() throws IOException {\n\n        DocumentMapper defaultMapper = createDocumentMapper(fieldMapping(b -> {\n            b.field(\"type\", \"shape\");\n            b.field(\"ignore_malformed\", true);\n        }));\n        Mapper fieldMapper = defaultMapper.mappers().getMapper(FIELD_NAME);\n        assertThat(fieldMapper, instanceOf(ShapeFieldMapper.class));\n\n        boolean ignoreMalformed = ((ShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed, equalTo(true));\n\n        \r\n        defaultMapper = createDocumentMapper(fieldMapping(b -> {\n            b.field(\"type\", \"shape\");\n            b.field(\"ignore_malformed\", false);\n        }));\n        fieldMapper = defaultMapper.mappers().getMapper(FIELD_NAME);\n        assertThat(fieldMapper, instanceOf(ShapeFieldMapper.class));\n\n        ignoreMalformed = ((ShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed, equalTo(false));\n    }\n","date":"2020-11-06 23:20:25","endLine":174,"groupId":"103017","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"testIgnoreMalformedParsing","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/51/a90405b731793e07e0539c143ab7a4e693405c.src","preCode":"    public void testIgnoreMalformedParsing() throws IOException {\n        String mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"shape\")\n            .field(\"ignore_malformed\", \"true\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        DocumentMapper defaultMapper = createIndex(\"test\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        Mapper fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(ShapeFieldMapper.class));\n\n        Explicit<Boolean> ignoreMalformed = ((ShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed.value(), equalTo(true));\n\n        \r\n        mapping = Strings.toString(XContentFactory.jsonBuilder().startObject().startObject(\"type1\")\n            .startObject(\"properties\").startObject(\"location\")\n            .field(\"type\", \"shape\")\n            .field(\"ignore_malformed\", \"false\")\n            .endObject().endObject()\n            .endObject().endObject());\n\n        defaultMapper = createIndex(\"test2\").mapperService().documentMapperParser()\n            .parse(\"type1\", new CompressedXContent(mapping));\n        fieldMapper = defaultMapper.mappers().getMapper(\"location\");\n        assertThat(fieldMapper, instanceOf(ShapeFieldMapper.class));\n\n        ignoreMalformed = ((ShapeFieldMapper)fieldMapper).ignoreMalformed();\n        assertThat(ignoreMalformed.explicit(), equalTo(true));\n        assertThat(ignoreMalformed.value(), equalTo(false));\n    }\n","realPath":"x-pack/plugin/spatial/src/test/java/org/elasticsearch/xpack/spatial/index/mapper/ShapeFieldMapperTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":152,"status":"M"}],"commitId":"038fc354abe932c3fc7615beb4e3b991f1219533","commitMessage":"@@@Use MapperTestCase for cartesian mappers tests (#64705)\n\nThis commit changes the cartesian mapper tests (point and shape fields) so that they use MapperTestCase. ","date":"2020-11-06 23:20:25","modifiedFileCount":"0","status":"M","submitter":"Ignacio Vera"}]
