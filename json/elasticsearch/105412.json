[{"authorTime":"2018-10-03 23:11:28","codes":[{"authorDate":"2018-10-03 23:11:28","commitOrder":2,"curCode":"    public void testScriptedMetricWithoutCombine() throws IOException {\n        try (Directory directory = newDirectory()) {\n            int numDocs = randomInt(100);\n            try (RandomIndexWriter indexWriter = new RandomIndexWriter(random(), directory)) {\n                for (int i = 0; i < numDocs; i++) {\n                    indexWriter.addDocument(singleton(new SortedNumericDocValuesField(\"number\", i)));\n                }\n            }\n            try (IndexReader indexReader = DirectoryReader.open(directory)) {\n                ScriptedMetricAggregationBuilder aggregationBuilder = new ScriptedMetricAggregationBuilder(AGG_NAME);\n                aggregationBuilder.initScript(INIT_SCRIPT).mapScript(MAP_SCRIPT).reduceScript(REDUCE_SCRIPT);\n                IllegalArgumentException exception = expectThrows(IllegalArgumentException.class,\n                    () -> search(newSearcher(indexReader, true, true), new MatchAllDocsQuery(), aggregationBuilder));\n                assertEquals(exception.getMessage(), \"[combineScript] must not be null: [scriptedMetric]\");\n            }\n        }\n    }\n","date":"2018-10-03 23:11:28","endLine":200,"groupId":"23810","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testScriptedMetricWithoutCombine","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/05/115a03e300f6323fe6b1e80b791eb761cf2536.src","preCode":"    public void testScriptedMetricWithoutCombine() throws IOException {\n        try (Directory directory = newDirectory()) {\n            int numDocs = randomInt(100);\n            try (RandomIndexWriter indexWriter = new RandomIndexWriter(random(), directory)) {\n                for (int i = 0; i < numDocs; i++) {\n                    indexWriter.addDocument(singleton(new SortedNumericDocValuesField(\"number\", i)));\n                }\n            }\n            try (IndexReader indexReader = DirectoryReader.open(directory)) {\n                ScriptedMetricAggregationBuilder aggregationBuilder = new ScriptedMetricAggregationBuilder(AGG_NAME);\n                aggregationBuilder.initScript(INIT_SCRIPT).mapScript(MAP_SCRIPT).reduceScript(REDUCE_SCRIPT);\n                IllegalArgumentException exception = expectThrows(IllegalArgumentException.class,\n                    () -> search(newSearcher(indexReader, true, true), new MatchAllDocsQuery(), aggregationBuilder));\n                assertEquals(exception.getMessage(), \"[combineScript] must not be null: [scriptedMetric]\");\n            }\n        }\n    }\n","realPath":"server/src/test/java/org/elasticsearch/search/aggregations/metrics/ScriptedMetricAggregatorTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":184,"status":"MB"},{"authorDate":"2018-10-03 23:11:28","commitOrder":2,"curCode":"    public void testScriptedMetricWithoutReduce() throws IOException {\n        try (Directory directory = newDirectory()) {\n            int numDocs = randomInt(100);\n            try (RandomIndexWriter indexWriter = new RandomIndexWriter(random(), directory)) {\n                for (int i = 0; i < numDocs; i++) {\n                    indexWriter.addDocument(singleton(new SortedNumericDocValuesField(\"number\", i)));\n                }\n            }\n            try (IndexReader indexReader = DirectoryReader.open(directory)) {\n                ScriptedMetricAggregationBuilder aggregationBuilder = new ScriptedMetricAggregationBuilder(AGG_NAME);\n                aggregationBuilder.initScript(INIT_SCRIPT).mapScript(MAP_SCRIPT).combineScript(COMBINE_SCRIPT);\n                IllegalArgumentException exception = expectThrows(IllegalArgumentException.class,\n                    () -> search(newSearcher(indexReader, true, true), new MatchAllDocsQuery(), aggregationBuilder));\n                assertEquals(exception.getMessage(), \"[reduceScript] must not be null: [scriptedMetric]\");\n            }\n        }\n    }\n","date":"2018-10-03 23:11:28","endLine":218,"groupId":"23810","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testScriptedMetricWithoutReduce","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/05/115a03e300f6323fe6b1e80b791eb761cf2536.src","preCode":"    public void testScriptedMetricWithoutReduce() throws IOException {\n        try (Directory directory = newDirectory()) {\n            int numDocs = randomInt(100);\n            try (RandomIndexWriter indexWriter = new RandomIndexWriter(random(), directory)) {\n                for (int i = 0; i < numDocs; i++) {\n                    indexWriter.addDocument(singleton(new SortedNumericDocValuesField(\"number\", i)));\n                }\n            }\n            try (IndexReader indexReader = DirectoryReader.open(directory)) {\n                ScriptedMetricAggregationBuilder aggregationBuilder = new ScriptedMetricAggregationBuilder(AGG_NAME);\n                aggregationBuilder.initScript(INIT_SCRIPT).mapScript(MAP_SCRIPT).combineScript(COMBINE_SCRIPT);\n                IllegalArgumentException exception = expectThrows(IllegalArgumentException.class,\n                    () -> search(newSearcher(indexReader, true, true), new MatchAllDocsQuery(), aggregationBuilder));\n                assertEquals(exception.getMessage(), \"[reduceScript] must not be null: [scriptedMetric]\");\n            }\n        }\n    }\n","realPath":"server/src/test/java/org/elasticsearch/search/aggregations/metrics/ScriptedMetricAggregatorTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":202,"status":"B"}],"commitId":"90c55f5e36ddc9d7cbf2fcde8e88027db8a5e060","commitMessage":"@@@Merge remote-tracking branch 'origin/master' into index-lifecycle\n","date":"2018-10-03 23:11:28","modifiedFileCount":"33","status":"M","submitter":"Lee Hinman"},{"authorTime":"2020-08-07 05:14:20","codes":[{"authorDate":"2020-08-07 05:14:20","commitOrder":3,"curCode":"    public void testScriptedMetricWithoutCombine() throws IOException {\n        try (Directory directory = newDirectory()) {\n            int numDocs = randomInt(100);\n            try (RandomIndexWriter indexWriter = new RandomIndexWriter(random(), directory)) {\n                for (int i = 0; i < numDocs; i++) {\n                    indexWriter.addDocument(singleton(new SortedNumericDocValuesField(\"number\", i)));\n                }\n            }\n            try (IndexReader indexReader = DirectoryReader.open(directory)) {\n                ScriptedMetricAggregationBuilder aggregationBuilder = new ScriptedMetricAggregationBuilder(AGG_NAME);\n                aggregationBuilder.initScript(INIT_SCRIPT).mapScript(MAP_SCRIPT).reduceScript(REDUCE_SCRIPT);\n                IllegalArgumentException exception = expectThrows(IllegalArgumentException.class,\n                    () -> searchAndReduce(newSearcher(indexReader, true, true), new MatchAllDocsQuery(), aggregationBuilder));\n                assertEquals(exception.getMessage(), \"[combineScript] must not be null: [scriptedMetric]\");\n            }\n        }\n    }\n","date":"2020-08-07 05:14:20","endLine":293,"groupId":"105412","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testScriptedMetricWithoutCombine","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/8d/8b3da169249f41d4459c9e3853a1516f4722ed.src","preCode":"    public void testScriptedMetricWithoutCombine() throws IOException {\n        try (Directory directory = newDirectory()) {\n            int numDocs = randomInt(100);\n            try (RandomIndexWriter indexWriter = new RandomIndexWriter(random(), directory)) {\n                for (int i = 0; i < numDocs; i++) {\n                    indexWriter.addDocument(singleton(new SortedNumericDocValuesField(\"number\", i)));\n                }\n            }\n            try (IndexReader indexReader = DirectoryReader.open(directory)) {\n                ScriptedMetricAggregationBuilder aggregationBuilder = new ScriptedMetricAggregationBuilder(AGG_NAME);\n                aggregationBuilder.initScript(INIT_SCRIPT).mapScript(MAP_SCRIPT).reduceScript(REDUCE_SCRIPT);\n                IllegalArgumentException exception = expectThrows(IllegalArgumentException.class,\n                    () -> search(newSearcher(indexReader, true, true), new MatchAllDocsQuery(), aggregationBuilder));\n                assertEquals(exception.getMessage(), \"[combineScript] must not be null: [scriptedMetric]\");\n            }\n        }\n    }\n","realPath":"server/src/test/java/org/elasticsearch/search/aggregations/metrics/ScriptedMetricAggregatorTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":277,"status":"M"},{"authorDate":"2020-08-07 05:14:20","commitOrder":3,"curCode":"    public void testScriptedMetricWithoutReduce() throws IOException {\n        try (Directory directory = newDirectory()) {\n            int numDocs = randomInt(100);\n            try (RandomIndexWriter indexWriter = new RandomIndexWriter(random(), directory)) {\n                for (int i = 0; i < numDocs; i++) {\n                    indexWriter.addDocument(singleton(new SortedNumericDocValuesField(\"number\", i)));\n                }\n            }\n            try (IndexReader indexReader = DirectoryReader.open(directory)) {\n                ScriptedMetricAggregationBuilder aggregationBuilder = new ScriptedMetricAggregationBuilder(AGG_NAME);\n                aggregationBuilder.initScript(INIT_SCRIPT).mapScript(MAP_SCRIPT).combineScript(COMBINE_SCRIPT);\n                IllegalArgumentException exception = expectThrows(IllegalArgumentException.class,\n                    () -> searchAndReduce(newSearcher(indexReader, true, true), new MatchAllDocsQuery(), aggregationBuilder));\n                assertEquals(exception.getMessage(), \"[reduceScript] must not be null: [scriptedMetric]\");\n            }\n        }\n    }\n","date":"2020-08-07 05:14:20","endLine":311,"groupId":"105412","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testScriptedMetricWithoutReduce","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/8d/8b3da169249f41d4459c9e3853a1516f4722ed.src","preCode":"    public void testScriptedMetricWithoutReduce() throws IOException {\n        try (Directory directory = newDirectory()) {\n            int numDocs = randomInt(100);\n            try (RandomIndexWriter indexWriter = new RandomIndexWriter(random(), directory)) {\n                for (int i = 0; i < numDocs; i++) {\n                    indexWriter.addDocument(singleton(new SortedNumericDocValuesField(\"number\", i)));\n                }\n            }\n            try (IndexReader indexReader = DirectoryReader.open(directory)) {\n                ScriptedMetricAggregationBuilder aggregationBuilder = new ScriptedMetricAggregationBuilder(AGG_NAME);\n                aggregationBuilder.initScript(INIT_SCRIPT).mapScript(MAP_SCRIPT).combineScript(COMBINE_SCRIPT);\n                IllegalArgumentException exception = expectThrows(IllegalArgumentException.class,\n                    () -> search(newSearcher(indexReader, true, true), new MatchAllDocsQuery(), aggregationBuilder));\n                assertEquals(exception.getMessage(), \"[reduceScript] must not be null: [scriptedMetric]\");\n            }\n        }\n    }\n","realPath":"server/src/test/java/org/elasticsearch/search/aggregations/metrics/ScriptedMetricAggregatorTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":295,"status":"M"}],"commitId":"5e3ea6eb11c68bdcc9adda51715a6e1fea9186d6","commitMessage":"@@@Merge branch 'master' into feature/runtime_fields\n","date":"2020-08-07 05:14:20","modifiedFileCount":"73","status":"M","submitter":"Nik Everett"}]
