[{"authorTime":"2018-06-15 06:32:41","codes":[{"authorDate":"2018-06-15 06:32:41","commitOrder":1,"curCode":"    public HttpRequest removeHeader(String header) {\n        HttpHeaders headersWithoutContentTypeHeader = new DefaultHttpHeaders();\n        headersWithoutContentTypeHeader.add(request.headers());\n        headersWithoutContentTypeHeader.remove(header);\n        HttpHeaders trailingHeaders = new DefaultHttpHeaders();\n        trailingHeaders.add(request.trailingHeaders());\n        trailingHeaders.remove(header);\n        FullHttpRequest requestWithoutHeader = new DefaultFullHttpRequest(request.protocolVersion(), request.method(), request.uri(),\n            request.content(), headersWithoutContentTypeHeader, trailingHeaders);\n        return new Netty4HttpRequest(requestWithoutHeader, sequence);\n    }\n","date":"2018-06-15 06:32:41","endLine":151,"groupId":"28137","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"removeHeader","params":"(Stringheader)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/ff/abe5cbbe2249d64cd79c0db14bb678f9b12e01.src","preCode":"    public HttpRequest removeHeader(String header) {\n        HttpHeaders headersWithoutContentTypeHeader = new DefaultHttpHeaders();\n        headersWithoutContentTypeHeader.add(request.headers());\n        headersWithoutContentTypeHeader.remove(header);\n        HttpHeaders trailingHeaders = new DefaultHttpHeaders();\n        trailingHeaders.add(request.trailingHeaders());\n        trailingHeaders.remove(header);\n        FullHttpRequest requestWithoutHeader = new DefaultFullHttpRequest(request.protocolVersion(), request.method(), request.uri(),\n            request.content(), headersWithoutContentTypeHeader, trailingHeaders);\n        return new Netty4HttpRequest(requestWithoutHeader, sequence);\n    }\n","realPath":"modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpRequest.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":141,"status":"B"},{"authorDate":"2018-06-15 06:32:41","commitOrder":1,"curCode":"    public HttpRequest removeHeader(String header) {\n        HttpHeaders headersWithoutContentTypeHeader = new DefaultHttpHeaders();\n        headersWithoutContentTypeHeader.add(request.headers());\n        headersWithoutContentTypeHeader.remove(header);\n        HttpHeaders trailingHeaders = new DefaultHttpHeaders();\n        trailingHeaders.add(request.trailingHeaders());\n        trailingHeaders.remove(header);\n        FullHttpRequest requestWithoutHeader = new DefaultFullHttpRequest(request.protocolVersion(), request.method(), request.uri(),\n            request.content(), headersWithoutContentTypeHeader, trailingHeaders);\n        return new NioHttpRequest(requestWithoutHeader, sequence);\n    }\n","date":"2018-06-15 06:32:41","endLine":151,"groupId":"28137","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"removeHeader","params":"(Stringheader)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/08/937593f3ba6a8b27d8c1a84881b15ab2e9a299.src","preCode":"    public HttpRequest removeHeader(String header) {\n        HttpHeaders headersWithoutContentTypeHeader = new DefaultHttpHeaders();\n        headersWithoutContentTypeHeader.add(request.headers());\n        headersWithoutContentTypeHeader.remove(header);\n        HttpHeaders trailingHeaders = new DefaultHttpHeaders();\n        trailingHeaders.add(request.trailingHeaders());\n        trailingHeaders.remove(header);\n        FullHttpRequest requestWithoutHeader = new DefaultFullHttpRequest(request.protocolVersion(), request.method(), request.uri(),\n            request.content(), headersWithoutContentTypeHeader, trailingHeaders);\n        return new NioHttpRequest(requestWithoutHeader, sequence);\n    }\n","realPath":"plugins/transport-nio/src/main/java/org/elasticsearch/http/nio/NioHttpRequest.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":141,"status":"B"}],"commitId":"2af05e5480ab63e5602ff92ded3ca5d4d127b08b","commitMessage":"@@@Merge branch 'master' into index-lifecycle\n","date":"2018-06-15 06:32:41","modifiedFileCount":"62","status":"B","submitter":"Tal Levy"},{"authorTime":"2018-06-15 06:32:41","codes":[{"authorDate":"2019-12-04 05:44:20","commitOrder":2,"curCode":"    public HttpRequest removeHeader(String header) {\n        HttpHeaders headersWithoutContentTypeHeader = new DefaultHttpHeaders();\n        headersWithoutContentTypeHeader.add(request.headers());\n        headersWithoutContentTypeHeader.remove(header);\n        HttpHeaders trailingHeaders = new DefaultHttpHeaders();\n        trailingHeaders.add(request.trailingHeaders());\n        trailingHeaders.remove(header);\n        FullHttpRequest requestWithoutHeader = new DefaultFullHttpRequest(request.protocolVersion(), request.method(), request.uri(),\n            request.content(), headersWithoutContentTypeHeader, trailingHeaders);\n        return new Netty4HttpRequest(requestWithoutHeader, new HttpHeadersMap(requestWithoutHeader.headers()), sequence, released,\n            pooled, content);\n    }\n","date":"2019-12-04 05:44:20","endLine":184,"groupId":"28137","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"removeHeader","params":"(Stringheader)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/e0/ad3007c98a9f7789454da2a3ec3b0e7bce0bcb.src","preCode":"    public HttpRequest removeHeader(String header) {\n        HttpHeaders headersWithoutContentTypeHeader = new DefaultHttpHeaders();\n        headersWithoutContentTypeHeader.add(request.headers());\n        headersWithoutContentTypeHeader.remove(header);\n        HttpHeaders trailingHeaders = new DefaultHttpHeaders();\n        trailingHeaders.add(request.trailingHeaders());\n        trailingHeaders.remove(header);\n        FullHttpRequest requestWithoutHeader = new DefaultFullHttpRequest(request.protocolVersion(), request.method(), request.uri(),\n            request.content(), headersWithoutContentTypeHeader, trailingHeaders);\n        return new Netty4HttpRequest(requestWithoutHeader, sequence);\n    }\n","realPath":"modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpRequest.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":173,"status":"M"},{"authorDate":"2018-06-15 06:32:41","commitOrder":2,"curCode":"    public HttpRequest removeHeader(String header) {\n        HttpHeaders headersWithoutContentTypeHeader = new DefaultHttpHeaders();\n        headersWithoutContentTypeHeader.add(request.headers());\n        headersWithoutContentTypeHeader.remove(header);\n        HttpHeaders trailingHeaders = new DefaultHttpHeaders();\n        trailingHeaders.add(request.trailingHeaders());\n        trailingHeaders.remove(header);\n        FullHttpRequest requestWithoutHeader = new DefaultFullHttpRequest(request.protocolVersion(), request.method(), request.uri(),\n            request.content(), headersWithoutContentTypeHeader, trailingHeaders);\n        return new NioHttpRequest(requestWithoutHeader, sequence);\n    }\n","date":"2018-06-15 06:32:41","endLine":151,"groupId":"28137","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"removeHeader","params":"(Stringheader)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/08/937593f3ba6a8b27d8c1a84881b15ab2e9a299.src","preCode":"    public HttpRequest removeHeader(String header) {\n        HttpHeaders headersWithoutContentTypeHeader = new DefaultHttpHeaders();\n        headersWithoutContentTypeHeader.add(request.headers());\n        headersWithoutContentTypeHeader.remove(header);\n        HttpHeaders trailingHeaders = new DefaultHttpHeaders();\n        trailingHeaders.add(request.trailingHeaders());\n        trailingHeaders.remove(header);\n        FullHttpRequest requestWithoutHeader = new DefaultFullHttpRequest(request.protocolVersion(), request.method(), request.uri(),\n            request.content(), headersWithoutContentTypeHeader, trailingHeaders);\n        return new NioHttpRequest(requestWithoutHeader, sequence);\n    }\n","realPath":"plugins/transport-nio/src/main/java/org/elasticsearch/http/nio/NioHttpRequest.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":141,"status":"N"}],"commitId":"5ddf9203f1b1efb8683df16bdf84b8d81a79741c","commitMessage":"@@@Stop Copying Every Http Request in Message Handler (#44564)\n\n* Copying the request is not necessary here. We can simply release it once the response has been generated and a lot of `Unpooled` allocations that way\n* Relates #32228\n   * I think the issue that preventet that PR  that PR from being merged was solved by #39634 that moved the bulk index marker search to ByteBuf bulk access so the composite buffer shouldn't require many additional bounds checks  (I'd argue the bounds checks we add.  we save when copying the composite buffer)\n* I couldn't neccessarily reproduce much of a speedup from this change.  but I could reproduce a very measureable reduction in GC time with e.g. Rally's PMC (4g heap node and bulk requests of size 5k saw a reduction in young GC time by ~10% for me)\n","date":"2019-12-04 05:44:20","modifiedFileCount":"14","status":"M","submitter":"Armin Braun"},{"authorTime":"2020-01-24 16:15:44","codes":[{"authorDate":"2019-12-04 05:44:20","commitOrder":3,"curCode":"    public HttpRequest removeHeader(String header) {\n        HttpHeaders headersWithoutContentTypeHeader = new DefaultHttpHeaders();\n        headersWithoutContentTypeHeader.add(request.headers());\n        headersWithoutContentTypeHeader.remove(header);\n        HttpHeaders trailingHeaders = new DefaultHttpHeaders();\n        trailingHeaders.add(request.trailingHeaders());\n        trailingHeaders.remove(header);\n        FullHttpRequest requestWithoutHeader = new DefaultFullHttpRequest(request.protocolVersion(), request.method(), request.uri(),\n            request.content(), headersWithoutContentTypeHeader, trailingHeaders);\n        return new Netty4HttpRequest(requestWithoutHeader, new HttpHeadersMap(requestWithoutHeader.headers()), sequence, released,\n            pooled, content);\n    }\n","date":"2019-12-04 05:44:20","endLine":184,"groupId":"28137","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"removeHeader","params":"(Stringheader)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/e0/ad3007c98a9f7789454da2a3ec3b0e7bce0bcb.src","preCode":"    public HttpRequest removeHeader(String header) {\n        HttpHeaders headersWithoutContentTypeHeader = new DefaultHttpHeaders();\n        headersWithoutContentTypeHeader.add(request.headers());\n        headersWithoutContentTypeHeader.remove(header);\n        HttpHeaders trailingHeaders = new DefaultHttpHeaders();\n        trailingHeaders.add(request.trailingHeaders());\n        trailingHeaders.remove(header);\n        FullHttpRequest requestWithoutHeader = new DefaultFullHttpRequest(request.protocolVersion(), request.method(), request.uri(),\n            request.content(), headersWithoutContentTypeHeader, trailingHeaders);\n        return new Netty4HttpRequest(requestWithoutHeader, new HttpHeadersMap(requestWithoutHeader.headers()), sequence, released,\n            pooled, content);\n    }\n","realPath":"modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpRequest.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":173,"status":"N"},{"authorDate":"2020-01-24 16:15:44","commitOrder":3,"curCode":"    public HttpRequest removeHeader(String header) {\n        HttpHeaders headersWithoutContentTypeHeader = new DefaultHttpHeaders();\n        headersWithoutContentTypeHeader.add(request.headers());\n        headersWithoutContentTypeHeader.remove(header);\n        HttpHeaders trailingHeaders = new DefaultHttpHeaders();\n        trailingHeaders.add(request.trailingHeaders());\n        trailingHeaders.remove(header);\n        FullHttpRequest requestWithoutHeader = new DefaultFullHttpRequest(request.protocolVersion(), request.method(), request.uri(),\n            request.content(), headersWithoutContentTypeHeader, trailingHeaders);\n        return new NioHttpRequest(requestWithoutHeader, new HttpHeadersMap(requestWithoutHeader.headers()), sequence, released,\n            pooled, content);\n    }\n","date":"2020-01-24 16:15:44","endLine":184,"groupId":"28137","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"removeHeader","params":"(Stringheader)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/44/2ae42f0b9327860000c1fe89435eb95b032d8f.src","preCode":"    public HttpRequest removeHeader(String header) {\n        HttpHeaders headersWithoutContentTypeHeader = new DefaultHttpHeaders();\n        headersWithoutContentTypeHeader.add(request.headers());\n        headersWithoutContentTypeHeader.remove(header);\n        HttpHeaders trailingHeaders = new DefaultHttpHeaders();\n        trailingHeaders.add(request.trailingHeaders());\n        trailingHeaders.remove(header);\n        FullHttpRequest requestWithoutHeader = new DefaultFullHttpRequest(request.protocolVersion(), request.method(), request.uri(),\n            request.content(), headersWithoutContentTypeHeader, trailingHeaders);\n        return new NioHttpRequest(requestWithoutHeader, sequence);\n    }\n","realPath":"plugins/transport-nio/src/main/java/org/elasticsearch/http/nio/NioHttpRequest.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":173,"status":"M"}],"commitId":"44d5ad9ac6283e94c04e9cfe9b3d1d976ada4089","commitMessage":"@@@Stop Copying Bulk HTTP Requests in NIO Networking (#49819)\n\nSame as #44564 but for NIO.","date":"2020-01-24 16:15:44","modifiedFileCount":"3","status":"M","submitter":"Armin Braun"},{"authorTime":"2020-05-18 23:06:24","codes":[{"authorDate":"2020-05-18 23:06:24","commitOrder":4,"curCode":"    public HttpRequest removeHeader(String header) {\n        HttpHeaders headersWithoutContentTypeHeader = new DefaultHttpHeaders();\n        headersWithoutContentTypeHeader.add(request.headers());\n        headersWithoutContentTypeHeader.remove(header);\n        HttpHeaders trailingHeaders = new DefaultHttpHeaders();\n        trailingHeaders.add(request.trailingHeaders());\n        trailingHeaders.remove(header);\n        FullHttpRequest requestWithoutHeader = new DefaultFullHttpRequest(request.protocolVersion(), request.method(), request.uri(),\n            request.content(), headersWithoutContentTypeHeader, trailingHeaders);\n        return new Netty4HttpRequest(requestWithoutHeader, new HttpHeadersMap(requestWithoutHeader.headers()), released,\n            pooled, content);\n    }\n","date":"2020-05-18 23:06:24","endLine":195,"groupId":"10682","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"removeHeader","params":"(Stringheader)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/f9/88f353db0c1e1cab35abde2c2b6fe61006c1a7.src","preCode":"    public HttpRequest removeHeader(String header) {\n        HttpHeaders headersWithoutContentTypeHeader = new DefaultHttpHeaders();\n        headersWithoutContentTypeHeader.add(request.headers());\n        headersWithoutContentTypeHeader.remove(header);\n        HttpHeaders trailingHeaders = new DefaultHttpHeaders();\n        trailingHeaders.add(request.trailingHeaders());\n        trailingHeaders.remove(header);\n        FullHttpRequest requestWithoutHeader = new DefaultFullHttpRequest(request.protocolVersion(), request.method(), request.uri(),\n            request.content(), headersWithoutContentTypeHeader, trailingHeaders);\n        return new Netty4HttpRequest(requestWithoutHeader, new HttpHeadersMap(requestWithoutHeader.headers()), sequence, released,\n            pooled, content);\n    }\n","realPath":"modules/transport-netty4/src/main/java/org/elasticsearch/http/netty4/Netty4HttpRequest.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":184,"status":"M"},{"authorDate":"2020-05-18 23:06:24","commitOrder":4,"curCode":"    public HttpRequest removeHeader(String header) {\n        HttpHeaders headersWithoutContentTypeHeader = new DefaultHttpHeaders();\n        headersWithoutContentTypeHeader.add(request.headers());\n        headersWithoutContentTypeHeader.remove(header);\n        HttpHeaders trailingHeaders = new DefaultHttpHeaders();\n        trailingHeaders.add(request.trailingHeaders());\n        trailingHeaders.remove(header);\n        FullHttpRequest requestWithoutHeader = new DefaultFullHttpRequest(request.protocolVersion(), request.method(), request.uri(),\n            request.content(), headersWithoutContentTypeHeader, trailingHeaders);\n        return new NioHttpRequest(requestWithoutHeader, new HttpHeadersMap(requestWithoutHeader.headers()), released, pooled, content);\n    }\n","date":"2020-05-18 23:06:24","endLine":193,"groupId":"10682","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"removeHeader","params":"(Stringheader)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/73/8c0fbf8a6a012da319a589bdba4e2c615a3b25.src","preCode":"    public HttpRequest removeHeader(String header) {\n        HttpHeaders headersWithoutContentTypeHeader = new DefaultHttpHeaders();\n        headersWithoutContentTypeHeader.add(request.headers());\n        headersWithoutContentTypeHeader.remove(header);\n        HttpHeaders trailingHeaders = new DefaultHttpHeaders();\n        trailingHeaders.add(request.trailingHeaders());\n        trailingHeaders.remove(header);\n        FullHttpRequest requestWithoutHeader = new DefaultFullHttpRequest(request.protocolVersion(), request.method(), request.uri(),\n            request.content(), headersWithoutContentTypeHeader, trailingHeaders);\n        return new NioHttpRequest(requestWithoutHeader, new HttpHeadersMap(requestWithoutHeader.headers()), sequence, released,\n            pooled, content);\n    }\n","realPath":"plugins/transport-nio/src/main/java/org/elasticsearch/http/nio/NioHttpRequest.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":183,"status":"M"}],"commitId":"7501e061cfe2b2455884b651267130976ac90c20","commitMessage":"@@@Create HttpRequest earlier in pipeline (#56393)\n\nElasticsearch requires that a HttpRequest abstraction be implemented\nby http modules before server processing. This abstraction controls when\nunderlying resources are released. This commit moves this abstraction to\nbe created immediately after content aggregation. This change will\nenable follow-up work including moving Cors logic into the server\npackage and tracking bytes as they are aggregated from the network\nlevel.","date":"2020-05-18 23:06:24","modifiedFileCount":"26","status":"M","submitter":"Tim Brooks"}]
