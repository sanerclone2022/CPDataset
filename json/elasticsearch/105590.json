[{"authorTime":"2021-07-08 13:19:38","codes":[{"authorDate":"2021-07-08 13:19:38","commitOrder":1,"curCode":"    protected void createMapping(String indexName, String fieldName, Settings settings) throws Exception {\n        final XContentBuilder xcb = XContentFactory.jsonBuilder().startObject()\n            .startObject(\"properties\").startObject(fieldName)\n            .field(\"type\", \"geo_shape\")\n            .field(\"tree\", randomFrom(PREFIX_TREES))\n            .endObject()\n            .endObject()\n            .endObject();\n\n        final Settings finalSetting;\n        MapperParsingException ex =\n            expectThrows(MapperParsingException.class,\n                () -> client().admin().indices().prepareCreate(indexName).setMapping(xcb).setSettings(settings).get());\n        assertThat(ex.getMessage(),\n            containsString(\"using deprecated parameters [tree] in mapper [\" + fieldName + \"] of type [geo_shape] is no longer allowed\"));\n        Version version = VersionUtils.randomPreviousCompatibleVersion(random(), Version.V_8_0_0);\n        finalSetting = settings(version).put(settings).build();\n        client().admin().indices().prepareCreate(indexName).setMapping(xcb).setSettings(finalSetting).get();\n    }\n","date":"2021-07-08 13:19:38","endLine":61,"groupId":"20781","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"createMapping","params":"(StringindexName@StringfieldName@Settingssettings)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/6c/62de84175032fa1dd0da03e3afba58c06b86e1.src","preCode":"    protected void createMapping(String indexName, String fieldName, Settings settings) throws Exception {\n        final XContentBuilder xcb = XContentFactory.jsonBuilder().startObject()\n            .startObject(\"properties\").startObject(fieldName)\n            .field(\"type\", \"geo_shape\")\n            .field(\"tree\", randomFrom(PREFIX_TREES))\n            .endObject()\n            .endObject()\n            .endObject();\n\n        final Settings finalSetting;\n        MapperParsingException ex =\n            expectThrows(MapperParsingException.class,\n                () -> client().admin().indices().prepareCreate(indexName).setMapping(xcb).setSettings(settings).get());\n        assertThat(ex.getMessage(),\n            containsString(\"using deprecated parameters [tree] in mapper [\" + fieldName + \"] of type [geo_shape] is no longer allowed\"));\n        Version version = VersionUtils.randomPreviousCompatibleVersion(random(), Version.V_8_0_0);\n        finalSetting = settings(version).put(settings).build();\n        client().admin().indices().prepareCreate(indexName).setMapping(xcb).setSettings(finalSetting).get();\n    }\n","realPath":"server/src/test/java/org/elasticsearch/search/geo/LegacyGeoShapeQueryTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":43,"status":"B"},{"authorDate":"2021-07-08 13:19:38","commitOrder":1,"curCode":"    protected void createMapping(String indexName, String fieldName, Settings settings) throws Exception {\n        XContentBuilder xcb = XContentFactory.jsonBuilder().startObject()\n            .startObject(\"properties\").startObject(fieldName)\n            .field(\"type\", \"geo_point\")\n            .endObject().endObject().endObject();\n        client().admin().indices().prepareCreate(indexName).setMapping(xcb).setSettings(settings).get();\n    }\n","date":"2021-07-08 13:19:38","endLine":35,"groupId":"20781","id":2,"instanceNumber":2,"isCurCommit":1,"methodName":"createMapping","params":"(StringindexName@StringfieldName@Settingssettings)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/89/a4551f3d3b06aa51250d2ca3277c14b137ae5f.src","preCode":"    protected void createMapping(String indexName, String fieldName, Settings settings) throws Exception {\n        XContentBuilder xcb = XContentFactory.jsonBuilder().startObject()\n            .startObject(\"properties\").startObject(fieldName)\n            .field(\"type\", \"geo_point\")\n            .endObject().endObject().endObject();\n        client().admin().indices().prepareCreate(indexName).setMapping(xcb).setSettings(settings).get();\n    }\n","realPath":"server/src/test/java/org/elasticsearch/search/geo/GeoPointShapeQueryTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":29,"status":"B"}],"commitId":"ebe8a9b58f58796298044f75edf628d1772edcb3","commitMessage":"@@@Alias field does not work with geo_shape query (#74895)\n\nFixes the resolution of the field name in the geo_shape query.","date":"2021-07-08 13:19:38","modifiedFileCount":"6","status":"B","submitter":"Ignacio Vera"},{"authorTime":"2021-07-08 13:19:38","codes":[{"authorDate":"2021-09-15 15:10:53","commitOrder":2,"curCode":"    protected void createMapping(String indexName, String fieldName, Settings settings) throws Exception {\n        final XContentBuilder xcb = XContentFactory.jsonBuilder().startObject()\n            .startObject(\"properties\").startObject(fieldName)\n            .field(\"type\", \"geo_shape\")\n            .field(\"tree\", randomFrom(PREFIX_TREES))\n            .endObject()\n            .endObject()\n            .endObject();\n        client().admin().indices().prepareCreate(indexName).setMapping(xcb).setSettings(settings).get();\n    }\n","date":"2021-09-15 15:10:53","endLine":60,"groupId":"105590","id":3,"instanceNumber":1,"isCurCommit":1,"methodName":"createMapping","params":"(StringindexName@StringfieldName@Settingssettings)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/05/cff23acb691c6c8bcd36d6358c5b7800121f35.src","preCode":"    protected void createMapping(String indexName, String fieldName, Settings settings) throws Exception {\n        final XContentBuilder xcb = XContentFactory.jsonBuilder().startObject()\n            .startObject(\"properties\").startObject(fieldName)\n            .field(\"type\", \"geo_shape\")\n            .field(\"tree\", randomFrom(PREFIX_TREES))\n            .endObject()\n            .endObject()\n            .endObject();\n\n        final Settings finalSetting;\n        MapperParsingException ex =\n            expectThrows(MapperParsingException.class,\n                () -> client().admin().indices().prepareCreate(indexName).setMapping(xcb).setSettings(settings).get());\n        assertThat(ex.getMessage(),\n            containsString(\"using deprecated parameters [tree] in mapper [\" + fieldName + \"] of type [geo_shape] is no longer allowed\"));\n        Version version = VersionUtils.randomPreviousCompatibleVersion(random(), Version.V_8_0_0);\n        finalSetting = settings(version).put(settings).build();\n        client().admin().indices().prepareCreate(indexName).setMapping(xcb).setSettings(finalSetting).get();\n    }\n","realPath":"server/src/test/java/org/elasticsearch/search/geo/LegacyGeoShapeQueryTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":51,"status":"M"},{"authorDate":"2021-07-08 13:19:38","commitOrder":2,"curCode":"    protected void createMapping(String indexName, String fieldName, Settings settings) throws Exception {\n        XContentBuilder xcb = XContentFactory.jsonBuilder().startObject()\n            .startObject(\"properties\").startObject(fieldName)\n            .field(\"type\", \"geo_point\")\n            .endObject().endObject().endObject();\n        client().admin().indices().prepareCreate(indexName).setMapping(xcb).setSettings(settings).get();\n    }\n","date":"2021-07-08 13:19:38","endLine":35,"groupId":"105590","id":4,"instanceNumber":2,"isCurCommit":1,"methodName":"createMapping","params":"(StringindexName@StringfieldName@Settingssettings)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/89/a4551f3d3b06aa51250d2ca3277c14b137ae5f.src","preCode":"    protected void createMapping(String indexName, String fieldName, Settings settings) throws Exception {\n        XContentBuilder xcb = XContentFactory.jsonBuilder().startObject()\n            .startObject(\"properties\").startObject(fieldName)\n            .field(\"type\", \"geo_point\")\n            .endObject().endObject().endObject();\n        client().admin().indices().prepareCreate(indexName).setMapping(xcb).setSettings(settings).get();\n    }\n","realPath":"server/src/test/java/org/elasticsearch/search/geo/GeoPointShapeQueryTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":29,"status":"N"}],"commitId":"f5c36c100529e45a5e5c0cbbcf3a5c8efeebf0a1","commitMessage":"@@@Improve testing of geo_shape field in the spatial plugin (#77687)\n\nAdds more integration test to he spatial plugin.","date":"2021-09-15 15:10:53","modifiedFileCount":"9","status":"M","submitter":"Ignacio Vera"}]
