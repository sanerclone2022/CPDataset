[{"authorTime":"2019-08-09 04:28:35","codes":[{"authorDate":"2019-08-03 02:34:02","commitOrder":6,"curCode":"    public void testMustRewrite() throws IOException {\n        GeoShapeQueryBuilder query = doCreateTestQueryBuilder(true);\n\n        UnsupportedOperationException e = expectThrows(UnsupportedOperationException.class, () -> query.toQuery(createShardContext()));\n        assertEquals(\"query must be rewritten first\", e.getMessage());\n        QueryBuilder rewrite = rewriteAndFetch(query, createShardContext());\n        GeoShapeQueryBuilder geoShapeQueryBuilder = randomBoolean() ?\n            new GeoShapeQueryBuilder(fieldName(), indexedShapeToReturn) :\n            new GeoShapeQueryBuilder(fieldName(), indexedShapeToReturn.buildGeometry());\n        geoShapeQueryBuilder.strategy(query.strategy());\n        geoShapeQueryBuilder.relation(query.relation());\n        assertEquals(geoShapeQueryBuilder, rewrite);\n    }\n","date":"2019-08-03 02:34:02","endLine":241,"groupId":"43113","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testMustRewrite","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/ca/84a19cf619071c20585f900b2037ccfce4b5c6.src","preCode":"    public void testMustRewrite() throws IOException {\n        GeoShapeQueryBuilder query = doCreateTestQueryBuilder(true);\n\n        UnsupportedOperationException e = expectThrows(UnsupportedOperationException.class, () -> query.toQuery(createShardContext()));\n        assertEquals(\"query must be rewritten first\", e.getMessage());\n        QueryBuilder rewrite = rewriteAndFetch(query, createShardContext());\n        GeoShapeQueryBuilder geoShapeQueryBuilder = randomBoolean() ?\n            new GeoShapeQueryBuilder(fieldName(), indexedShapeToReturn) :\n            new GeoShapeQueryBuilder(fieldName(), indexedShapeToReturn.buildGeometry());\n        geoShapeQueryBuilder.strategy(query.strategy());\n        geoShapeQueryBuilder.relation(query.relation());\n        assertEquals(geoShapeQueryBuilder, rewrite);\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/query/GeoShapeQueryBuilderTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":229,"status":"NB"},{"authorDate":"2019-08-09 04:28:35","commitOrder":6,"curCode":"    public void testMustRewrite() {\n        ShapeQueryBuilder query = doCreateTestQueryBuilder(true);\n\n        UnsupportedOperationException e = expectThrows(UnsupportedOperationException.class, () -> query.toQuery(createShardContext()));\n        assertEquals(\"query must be rewritten first\", e.getMessage());\n        QueryBuilder rewrite = rewriteAndFetch(query, createShardContext());\n        ShapeQueryBuilder geoShapeQueryBuilder = new ShapeQueryBuilder(fieldName(), indexedShapeToReturn);\n        geoShapeQueryBuilder.relation(query.relation());\n        assertEquals(geoShapeQueryBuilder, rewrite);\n    }\n","date":"2019-08-09 04:28:35","endLine":199,"groupId":"43113","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testMustRewrite","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/37/51fb55554f6bd7169c8ccbf41126054ccb1dc4.src","preCode":"    public void testMustRewrite() {\n        ShapeQueryBuilder query = doCreateTestQueryBuilder(true);\n\n        UnsupportedOperationException e = expectThrows(UnsupportedOperationException.class, () -> query.toQuery(createShardContext()));\n        assertEquals(\"query must be rewritten first\", e.getMessage());\n        QueryBuilder rewrite = rewriteAndFetch(query, createShardContext());\n        ShapeQueryBuilder geoShapeQueryBuilder = new ShapeQueryBuilder(fieldName(), indexedShapeToReturn);\n        geoShapeQueryBuilder.relation(query.relation());\n        assertEquals(geoShapeQueryBuilder, rewrite);\n    }\n","realPath":"x-pack/plugin/spatial/src/test/java/org/elasticsearch/xpack/spatial/index/query/ShapeQueryBuilderTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":190,"status":"B"}],"commitId":"c89b66afcb43fa0caa2acf81ab137b02a686b3e5","commitMessage":"@@@[SPATIAL] New ShapeQueryBuilder for querying indexed cartesian geometry (#45108)\n\nThis commit adds a new ShapeQueryBuilder to the xpack spatial module for\nquerying arbitrary Cartesian geometries indexed using the new shape field\ntype.\n\nThe query builder extends AbstractGeometryQueryBuilder and leverages the\nShapeQueryProcessor added in the previous field mapper commit.\n\nTests are provided in ShapeQueryTests in the same manner as\nGeoShapeQueryTests and docs are updated to explain how the query works.","date":"2019-08-09 04:28:35","modifiedFileCount":"5","status":"M","submitter":"Nick Knize"},{"authorTime":"2021-01-15 01:11:59","codes":[{"authorDate":"2021-01-15 01:11:59","commitOrder":7,"curCode":"    public void testMustRewrite() throws IOException {\n        GeoShapeQueryBuilder query = doCreateTestQueryBuilder(true);\n\n        UnsupportedOperationException e = expectThrows(UnsupportedOperationException.class,\n            () -> query.toQuery(createSearchExecutionContext()));\n        assertEquals(\"query must be rewritten first\", e.getMessage());\n        QueryBuilder rewrite = rewriteAndFetch(query, createSearchExecutionContext());\n        GeoShapeQueryBuilder geoShapeQueryBuilder = randomBoolean() ?\n            new GeoShapeQueryBuilder(fieldName(), indexedShapeToReturn) :\n            new GeoShapeQueryBuilder(fieldName(), indexedShapeToReturn.buildGeometry());\n        geoShapeQueryBuilder.strategy(query.strategy());\n        geoShapeQueryBuilder.relation(query.relation());\n        assertEquals(geoShapeQueryBuilder, rewrite);\n    }\n","date":"2021-01-15 01:11:59","endLine":179,"groupId":"43113","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testMustRewrite","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/3a/fd6296d831856fda18f174c0874452bcc532b1.src","preCode":"    public void testMustRewrite() throws IOException {\n        GeoShapeQueryBuilder query = doCreateTestQueryBuilder(true);\n\n        UnsupportedOperationException e = expectThrows(UnsupportedOperationException.class, () -> query.toQuery(createShardContext()));\n        assertEquals(\"query must be rewritten first\", e.getMessage());\n        QueryBuilder rewrite = rewriteAndFetch(query, createShardContext());\n        GeoShapeQueryBuilder geoShapeQueryBuilder = randomBoolean() ?\n            new GeoShapeQueryBuilder(fieldName(), indexedShapeToReturn) :\n            new GeoShapeQueryBuilder(fieldName(), indexedShapeToReturn.buildGeometry());\n        geoShapeQueryBuilder.strategy(query.strategy());\n        geoShapeQueryBuilder.relation(query.relation());\n        assertEquals(geoShapeQueryBuilder, rewrite);\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/query/GeoShapeQueryBuilderTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":166,"status":"M"},{"authorDate":"2021-01-15 01:11:59","commitOrder":7,"curCode":"    public void testMustRewrite() {\n        ShapeQueryBuilder query = doCreateTestQueryBuilder(true);\n\n        UnsupportedOperationException e = expectThrows(UnsupportedOperationException.class,\n            () -> query.toQuery(createSearchExecutionContext()));\n        assertEquals(\"query must be rewritten first\", e.getMessage());\n        QueryBuilder rewrite = rewriteAndFetch(query, createSearchExecutionContext());\n        ShapeQueryBuilder geoShapeQueryBuilder = new ShapeQueryBuilder(fieldName(), indexedShapeToReturn);\n        geoShapeQueryBuilder.relation(query.relation());\n        assertEquals(geoShapeQueryBuilder, rewrite);\n    }\n","date":"2021-01-15 01:11:59","endLine":184,"groupId":"43113","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testMustRewrite","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/92/fe933a9cb279e3630544a95c6319387c824a4b.src","preCode":"    public void testMustRewrite() {\n        ShapeQueryBuilder query = doCreateTestQueryBuilder(true);\n\n        UnsupportedOperationException e = expectThrows(UnsupportedOperationException.class, () -> query.toQuery(createShardContext()));\n        assertEquals(\"query must be rewritten first\", e.getMessage());\n        QueryBuilder rewrite = rewriteAndFetch(query, createShardContext());\n        ShapeQueryBuilder geoShapeQueryBuilder = new ShapeQueryBuilder(fieldName(), indexedShapeToReturn);\n        geoShapeQueryBuilder.relation(query.relation());\n        assertEquals(geoShapeQueryBuilder, rewrite);\n    }\n","realPath":"x-pack/plugin/spatial/src/test/java/org/elasticsearch/xpack/spatial/index/query/ShapeQueryBuilderTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":174,"status":"M"}],"commitId":"5852fbedf52c77b0a76c2c731fdd4982fb65cd87","commitMessage":"@@@Rename QueryShardContext -> SearchExecutionContext. (#67490)\n\nWe decided to rename `QueryShardContext` to clarify that it supports all parts\nof search request execution. Before there was confusion over whether it should\nonly be used for building queries.  or maybe only used in the query phase. This\nPR also updates the javadocs.\n\nCloses #64740.","date":"2021-01-15 01:11:59","modifiedFileCount":"357","status":"M","submitter":"Julie Tibshirani"},{"authorTime":"2021-01-15 01:11:59","codes":[{"authorDate":"2021-07-05 13:31:55","commitOrder":8,"curCode":"    public void testMustRewrite() throws IOException {\n        GeoShapeQueryBuilder query = doCreateTestQueryBuilder(true);\n\n        UnsupportedOperationException e = expectThrows(UnsupportedOperationException.class,\n            () -> query.toQuery(createSearchExecutionContext()));\n        assertEquals(\"query must be rewritten first\", e.getMessage());\n        QueryBuilder rewrite = rewriteAndFetch(query, createSearchExecutionContext());\n        GeoShapeQueryBuilder geoShapeQueryBuilder = new GeoShapeQueryBuilder(fieldName(), indexedShapeToReturn);\n        geoShapeQueryBuilder.strategy(query.strategy());\n        geoShapeQueryBuilder.relation(query.relation());\n        assertEquals(geoShapeQueryBuilder, rewrite);\n    }\n","date":"2021-07-05 13:31:55","endLine":168,"groupId":"103439","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"testMustRewrite","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/0a/65a4ce3f969b5b4cb15da3fd24fb69e0e1d573.src","preCode":"    public void testMustRewrite() throws IOException {\n        GeoShapeQueryBuilder query = doCreateTestQueryBuilder(true);\n\n        UnsupportedOperationException e = expectThrows(UnsupportedOperationException.class,\n            () -> query.toQuery(createSearchExecutionContext()));\n        assertEquals(\"query must be rewritten first\", e.getMessage());\n        QueryBuilder rewrite = rewriteAndFetch(query, createSearchExecutionContext());\n        GeoShapeQueryBuilder geoShapeQueryBuilder = randomBoolean() ?\n            new GeoShapeQueryBuilder(fieldName(), indexedShapeToReturn) :\n            new GeoShapeQueryBuilder(fieldName(), indexedShapeToReturn.buildGeometry());\n        geoShapeQueryBuilder.strategy(query.strategy());\n        geoShapeQueryBuilder.relation(query.relation());\n        assertEquals(geoShapeQueryBuilder, rewrite);\n    }\n","realPath":"server/src/test/java/org/elasticsearch/index/query/GeoShapeQueryBuilderTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":157,"status":"M"},{"authorDate":"2021-01-15 01:11:59","commitOrder":8,"curCode":"    public void testMustRewrite() {\n        ShapeQueryBuilder query = doCreateTestQueryBuilder(true);\n\n        UnsupportedOperationException e = expectThrows(UnsupportedOperationException.class,\n            () -> query.toQuery(createSearchExecutionContext()));\n        assertEquals(\"query must be rewritten first\", e.getMessage());\n        QueryBuilder rewrite = rewriteAndFetch(query, createSearchExecutionContext());\n        ShapeQueryBuilder geoShapeQueryBuilder = new ShapeQueryBuilder(fieldName(), indexedShapeToReturn);\n        geoShapeQueryBuilder.relation(query.relation());\n        assertEquals(geoShapeQueryBuilder, rewrite);\n    }\n","date":"2021-01-15 01:11:59","endLine":184,"groupId":"103439","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"testMustRewrite","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/92/fe933a9cb279e3630544a95c6319387c824a4b.src","preCode":"    public void testMustRewrite() {\n        ShapeQueryBuilder query = doCreateTestQueryBuilder(true);\n\n        UnsupportedOperationException e = expectThrows(UnsupportedOperationException.class,\n            () -> query.toQuery(createSearchExecutionContext()));\n        assertEquals(\"query must be rewritten first\", e.getMessage());\n        QueryBuilder rewrite = rewriteAndFetch(query, createSearchExecutionContext());\n        ShapeQueryBuilder geoShapeQueryBuilder = new ShapeQueryBuilder(fieldName(), indexedShapeToReturn);\n        geoShapeQueryBuilder.relation(query.relation());\n        assertEquals(geoShapeQueryBuilder, rewrite);\n    }\n","realPath":"x-pack/plugin/spatial/src/test/java/org/elasticsearch/xpack/spatial/index/query/ShapeQueryBuilderTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":174,"status":"N"}],"commitId":"0f30c79e4b54b1e0be818a4166f01ecb34c33b10","commitMessage":"@@@Remove legacy geo code from AbstractGeometryQueryBuilder classes (#74741)\n\nremoves references to Legacy ShapeParser and ShapeBuilder in AbstractGeometryQueryBuilder classes \nin favour to Geometry and GeometryParser.","date":"2021-07-05 13:31:55","modifiedFileCount":"16","status":"M","submitter":"Ignacio Vera"}]
