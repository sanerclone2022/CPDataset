[{"authorTime":"2018-04-26 03:22:53","codes":[{"authorDate":"2018-04-26 03:22:53","commitOrder":1,"curCode":"    protected void extractInnerHitBuilders(Map<String, InnerHitContextBuilder> innerHits) {\n        if (innerHitBuilder != null) {\n            Map<String, InnerHitContextBuilder> children = new HashMap<>();\n            InnerHitContextBuilder.extractInnerHits(query, children);\n            String name = innerHitBuilder.getName() != null ? innerHitBuilder.getName() : type;\n            InnerHitContextBuilder innerHitContextBuilder =\n                new ParentChildInnerHitContextBuilder(type, false, query, innerHitBuilder, children);\n            innerHits.put(name, innerHitContextBuilder);\n        }\n    }\n","date":"2018-04-26 03:22:53","endLine":304,"groupId":"71722","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"extractInnerHitBuilders","params":"(Map<String@InnerHitContextBuilder>innerHits)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/ac/a5f4a56d393992eb5a6d0f0b1810e02af024d0.src","preCode":"    protected void extractInnerHitBuilders(Map<String, InnerHitContextBuilder> innerHits) {\n        if (innerHitBuilder != null) {\n            Map<String, InnerHitContextBuilder> children = new HashMap<>();\n            InnerHitContextBuilder.extractInnerHits(query, children);\n            String name = innerHitBuilder.getName() != null ? innerHitBuilder.getName() : type;\n            InnerHitContextBuilder innerHitContextBuilder =\n                new ParentChildInnerHitContextBuilder(type, false, query, innerHitBuilder, children);\n            innerHits.put(name, innerHitContextBuilder);\n        }\n    }\n","realPath":"modules/parent-join/src/main/java/org/elasticsearch/join/query/HasParentQueryBuilder.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":295,"status":"B"},{"authorDate":"2018-04-26 03:22:53","commitOrder":1,"curCode":"    public void extractInnerHitBuilders(Map<String, InnerHitContextBuilder> innerHits) {\n        if (innerHitBuilder != null) {\n            Map<String, InnerHitContextBuilder> children = new HashMap<>();\n            InnerHitContextBuilder.extractInnerHits(query, children);\n            InnerHitContextBuilder innerHitContextBuilder = new NestedInnerHitContextBuilder(path, query, innerHitBuilder, children);\n            String name = innerHitBuilder.getName() != null ? innerHitBuilder.getName() : path;\n            innerHits.put(name, innerHitContextBuilder);\n        }\n    }\n","date":"2018-04-26 03:22:53","endLine":331,"groupId":"38954","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"extractInnerHitBuilders","params":"(Map<String@InnerHitContextBuilder>innerHits)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/88/9f41a037f860056d99813003a6935f95a13b32.src","preCode":"    public void extractInnerHitBuilders(Map<String, InnerHitContextBuilder> innerHits) {\n        if (innerHitBuilder != null) {\n            Map<String, InnerHitContextBuilder> children = new HashMap<>();\n            InnerHitContextBuilder.extractInnerHits(query, children);\n            InnerHitContextBuilder innerHitContextBuilder = new NestedInnerHitContextBuilder(path, query, innerHitBuilder, children);\n            String name = innerHitBuilder.getName() != null ? innerHitBuilder.getName() : path;\n            innerHits.put(name, innerHitContextBuilder);\n        }\n    }\n","realPath":"server/src/main/java/org/elasticsearch/index/query/NestedQueryBuilder.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":323,"status":"B"}],"commitId":"d74fb9eb4559077e2d20b19a9ed62d9ff825027a","commitMessage":"@@@Opened x-pack ILM code\n","date":"2018-04-26 03:22:53","modifiedFileCount":"0","status":"B","submitter":"Tal Levy"},{"authorTime":"2019-02-01 22:53:50","codes":[{"authorDate":"2019-02-01 22:53:50","commitOrder":2,"curCode":"    protected void extractInnerHitBuilders(Map<String, InnerHitContextBuilder> innerHits) {\n        if (innerHitBuilder != null) {\n            String name = innerHitBuilder.getName() != null ? innerHitBuilder.getName() : type;\n            if (innerHits.containsKey(name)) {\n                throw new IllegalArgumentException(\"[inner_hits] already contains an entry for key [\" + name + \"]\");\n            }\n\n            Map<String, InnerHitContextBuilder> children = new HashMap<>();\n            InnerHitContextBuilder.extractInnerHits(query, children);\n            InnerHitContextBuilder innerHitContextBuilder =\n                new ParentChildInnerHitContextBuilder(type, false, query, innerHitBuilder, children);\n            innerHits.put(name, innerHitContextBuilder);\n        }\n    }\n","date":"2019-02-01 22:53:50","endLine":299,"groupId":"19774","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"extractInnerHitBuilders","params":"(Map<String@InnerHitContextBuilder>innerHits)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/30/a2718aab0544f0dfa780951c00d70b3a1bb46c.src","preCode":"    protected void extractInnerHitBuilders(Map<String, InnerHitContextBuilder> innerHits) {\n        if (innerHitBuilder != null) {\n            Map<String, InnerHitContextBuilder> children = new HashMap<>();\n            InnerHitContextBuilder.extractInnerHits(query, children);\n            String name = innerHitBuilder.getName() != null ? innerHitBuilder.getName() : type;\n            InnerHitContextBuilder innerHitContextBuilder =\n                new ParentChildInnerHitContextBuilder(type, false, query, innerHitBuilder, children);\n            innerHits.put(name, innerHitContextBuilder);\n        }\n    }\n","realPath":"modules/parent-join/src/main/java/org/elasticsearch/join/query/HasParentQueryBuilder.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":286,"status":"M"},{"authorDate":"2019-02-01 22:53:50","commitOrder":2,"curCode":"    public void extractInnerHitBuilders(Map<String, InnerHitContextBuilder> innerHits) {\n        if (innerHitBuilder != null) {\n            String name = innerHitBuilder.getName() != null ? innerHitBuilder.getName() : path;\n            if (innerHits.containsKey(name)) {\n                throw new IllegalArgumentException(\"[inner_hits] already contains an entry for key [\" + name + \"]\");\n            }\n\n            Map<String, InnerHitContextBuilder> children = new HashMap<>();\n            InnerHitContextBuilder.extractInnerHits(query, children);\n            InnerHitContextBuilder innerHitContextBuilder = new NestedInnerHitContextBuilder(path, query, innerHitBuilder, children);\n            innerHits.put(name, innerHitContextBuilder);\n        }\n    }\n","date":"2019-02-01 22:53:50","endLine":330,"groupId":"19774","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"extractInnerHitBuilders","params":"(Map<String@InnerHitContextBuilder>innerHits)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/ee/8062308ac115a2b33462dd1fa8d8cf0a4c9dc2.src","preCode":"    public void extractInnerHitBuilders(Map<String, InnerHitContextBuilder> innerHits) {\n        if (innerHitBuilder != null) {\n            Map<String, InnerHitContextBuilder> children = new HashMap<>();\n            InnerHitContextBuilder.extractInnerHits(query, children);\n            InnerHitContextBuilder innerHitContextBuilder = new NestedInnerHitContextBuilder(path, query, innerHitBuilder, children);\n            String name = innerHitBuilder.getName() != null ? innerHitBuilder.getName() : path;\n            innerHits.put(name, innerHitContextBuilder);\n        }\n    }\n","realPath":"server/src/main/java/org/elasticsearch/index/query/NestedQueryBuilder.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":318,"status":"M"}],"commitId":"c1c4abae10266f82e7ec2a34ed56c60e078023b7","commitMessage":"@@@Throw if two inner_hits have the same name (#37645)\n\nThis change throws an error if two inner_hits have the same name\n\nCloses #37584\n","date":"2019-02-01 22:53:50","modifiedFileCount":"7","status":"M","submitter":"Desmond Vehar"},{"authorTime":"2019-02-01 22:53:50","codes":[{"authorDate":"2020-10-19 19:17:48","commitOrder":3,"curCode":"    protected void extractInnerHitBuilders(Map<String, InnerHitContextBuilder> innerHits) {\n        if (innerHitBuilder != null) {\n            String name = innerHitBuilder.getName() != null ? innerHitBuilder.getName() : parentType;\n            if (innerHits.containsKey(name)) {\n                throw new IllegalArgumentException(\"[inner_hits] already contains an entry for key [\" + name + \"]\");\n            }\n\n            Map<String, InnerHitContextBuilder> children = new HashMap<>();\n            InnerHitContextBuilder.extractInnerHits(query, children);\n            InnerHitContextBuilder innerHitContextBuilder =\n                new ParentChildInnerHitContextBuilder(parentType, false, query, innerHitBuilder, children);\n            innerHits.put(name, innerHitContextBuilder);\n        }\n    }\n","date":"2020-10-19 19:17:48","endLine":304,"groupId":"101493","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"extractInnerHitBuilders","params":"(Map<String@InnerHitContextBuilder>innerHits)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/0d/7e6852b2aac4f374f980bb99ed7bd51ff46c36.src","preCode":"    protected void extractInnerHitBuilders(Map<String, InnerHitContextBuilder> innerHits) {\n        if (innerHitBuilder != null) {\n            String name = innerHitBuilder.getName() != null ? innerHitBuilder.getName() : type;\n            if (innerHits.containsKey(name)) {\n                throw new IllegalArgumentException(\"[inner_hits] already contains an entry for key [\" + name + \"]\");\n            }\n\n            Map<String, InnerHitContextBuilder> children = new HashMap<>();\n            InnerHitContextBuilder.extractInnerHits(query, children);\n            InnerHitContextBuilder innerHitContextBuilder =\n                new ParentChildInnerHitContextBuilder(type, false, query, innerHitBuilder, children);\n            innerHits.put(name, innerHitContextBuilder);\n        }\n    }\n","realPath":"modules/parent-join/src/main/java/org/elasticsearch/join/query/HasParentQueryBuilder.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":291,"status":"M"},{"authorDate":"2019-02-01 22:53:50","commitOrder":3,"curCode":"    public void extractInnerHitBuilders(Map<String, InnerHitContextBuilder> innerHits) {\n        if (innerHitBuilder != null) {\n            String name = innerHitBuilder.getName() != null ? innerHitBuilder.getName() : path;\n            if (innerHits.containsKey(name)) {\n                throw new IllegalArgumentException(\"[inner_hits] already contains an entry for key [\" + name + \"]\");\n            }\n\n            Map<String, InnerHitContextBuilder> children = new HashMap<>();\n            InnerHitContextBuilder.extractInnerHits(query, children);\n            InnerHitContextBuilder innerHitContextBuilder = new NestedInnerHitContextBuilder(path, query, innerHitBuilder, children);\n            innerHits.put(name, innerHitContextBuilder);\n        }\n    }\n","date":"2019-02-01 22:53:50","endLine":330,"groupId":"101493","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"extractInnerHitBuilders","params":"(Map<String@InnerHitContextBuilder>innerHits)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/ee/8062308ac115a2b33462dd1fa8d8cf0a4c9dc2.src","preCode":"    public void extractInnerHitBuilders(Map<String, InnerHitContextBuilder> innerHits) {\n        if (innerHitBuilder != null) {\n            String name = innerHitBuilder.getName() != null ? innerHitBuilder.getName() : path;\n            if (innerHits.containsKey(name)) {\n                throw new IllegalArgumentException(\"[inner_hits] already contains an entry for key [\" + name + \"]\");\n            }\n\n            Map<String, InnerHitContextBuilder> children = new HashMap<>();\n            InnerHitContextBuilder.extractInnerHits(query, children);\n            InnerHitContextBuilder innerHitContextBuilder = new NestedInnerHitContextBuilder(path, query, innerHitBuilder, children);\n            innerHits.put(name, innerHitContextBuilder);\n        }\n    }\n","realPath":"server/src/main/java/org/elasticsearch/index/query/NestedQueryBuilder.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":318,"status":"N"}],"commitId":"70d88ef62d7ea287907c98b3f3263e3b08e60f3f","commitMessage":"@@@Rework parent-join to not require access to DocumentMapper (#63738)\n\nParent joins work using a cluster of field mappers: the join field itself;\na set of subfields that allow multiple relationships between parents and\nchildren to be defined; and a metadata field that acts to only allow a\nsingle join field per index to be defined. The various queries and\naggregations that use this infrastructure retrieve the join field mapper\nvia a static method and then build themselves by pulling individual\nrelationship mappers from this main mapper.\n\nUsing mappers rather than MappedFieldTypes means that we need to\nexpose DocumentMapper at search time.  which is something we are\ntrying to avoid. This commit refactors things so that the join relations\nare encapsulated in a Joiner object.  which lives instead on the\nMappedFieldType associated with the metadata join field. Rather than\nusing the ParentJoinFieldMapper and connected ParentIdFieldMappers. \nwe can now build queries and aggregations using this Joiner object. \nretrieved via the QueryShardContext or AggregationContext using\na static helper method on Joiner itself.","date":"2020-10-19 19:17:48","modifiedFileCount":"16","status":"M","submitter":"Alan Woodward"}]
