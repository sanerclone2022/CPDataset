[{"authorTime":"2013-03-08 06:54:59","codes":[{"authorDate":"2013-03-08 06:54:59","commitOrder":1,"curCode":"    public void testLostConnection() throws Exception\n    {\n        final int PARTICIPANT_QTY = 10;\n\n        List<LeaderLatch> latches = Lists.newArrayList();\n\n        final Timing timing = new Timing();\n        final CuratorFramework client = CuratorFrameworkFactory.newClient(server.getConnectString(), timing.session(), timing.connection(), new RetryOneTime(1));\n        try\n        {\n            client.start();\n\n            final CountDownLatch        countDownLatch = new CountDownLatch(1);\n            client.getConnectionStateListenable().addListener\n            (\n                new ConnectionStateListener()\n                {\n                    @Override\n                    public void stateChanged(CuratorFramework client, ConnectionState newState)\n                    {\n                        if ( newState == ConnectionState.LOST )\n                        {\n                            countDownLatch.countDown();\n                        }\n                    }\n                }\n            );\n\n            for ( int i = 0; i < PARTICIPANT_QTY; ++i )\n            {\n                LeaderLatch latch = new LeaderLatch(client, PATH_NAME);\n                latch.start();\n                latches.add(latch);\n            }\n\n            waitForALeader(latches, timing);\n\n            server.stop();\n            Assert.assertTrue(timing.awaitLatch(countDownLatch));\n\n            timing.forWaiting().sleepABit();\n\n            Assert.assertEquals(getLeaders(latches).size(), 0);\n\n            server = new TestingServer(server.getPort(), server.getTempDirectory());\n            Assert.assertEquals(waitForALeader(latches, timing).size(), 1); \r\n        }\n        finally\n        {\n            for ( LeaderLatch latch : latches )\n            {\n                Closeables.closeQuietly(latch);\n            }\n            Closeables.closeQuietly(client);\n        }\n    }\n","date":"2013-03-08 06:54:59","endLine":131,"groupId":"1903","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testLostConnection","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-curator-10-0.7/blobInfo/CC_OUT/blobs/38/be1629efa4a86a55147286438e4c79e309d76a.src","preCode":"    public void testLostConnection() throws Exception\n    {\n        final int PARTICIPANT_QTY = 10;\n\n        List<LeaderLatch> latches = Lists.newArrayList();\n\n        final Timing timing = new Timing();\n        final CuratorFramework client = CuratorFrameworkFactory.newClient(server.getConnectString(), timing.session(), timing.connection(), new RetryOneTime(1));\n        try\n        {\n            client.start();\n\n            final CountDownLatch        countDownLatch = new CountDownLatch(1);\n            client.getConnectionStateListenable().addListener\n            (\n                new ConnectionStateListener()\n                {\n                    @Override\n                    public void stateChanged(CuratorFramework client, ConnectionState newState)\n                    {\n                        if ( newState == ConnectionState.LOST )\n                        {\n                            countDownLatch.countDown();\n                        }\n                    }\n                }\n            );\n\n            for ( int i = 0; i < PARTICIPANT_QTY; ++i )\n            {\n                LeaderLatch latch = new LeaderLatch(client, PATH_NAME);\n                latch.start();\n                latches.add(latch);\n            }\n\n            waitForALeader(latches, timing);\n\n            server.stop();\n            Assert.assertTrue(timing.awaitLatch(countDownLatch));\n\n            timing.forWaiting().sleepABit();\n\n            Assert.assertEquals(getLeaders(latches).size(), 0);\n\n            server = new TestingServer(server.getPort(), server.getTempDirectory());\n            Assert.assertEquals(waitForALeader(latches, timing).size(), 1); \r\n        }\n        finally\n        {\n            for ( LeaderLatch latch : latches )\n            {\n                Closeables.closeQuietly(latch);\n            }\n            Closeables.closeQuietly(client);\n        }\n    }\n","realPath":"curator-recipes/src/test/java/org/apache/curator/framework/recipes/leader/TestLeaderLatch.java","repoName":"curator","snippetEndLine":0,"snippetStartLine":0,"startLine":76,"status":"B"},{"authorDate":"2013-03-08 06:54:59","commitOrder":1,"curCode":"    public void testCorrectWatching() throws Exception\n    {\n    \tfinal int PARTICIPANT_QTY = 10;\n    \tfinal int PARTICIPANT_ID = 2;\n    \t\n    \tList<LeaderLatch> latches = Lists.newArrayList();\n\n        final Timing timing = new Timing();\n        final CuratorFramework client = CuratorFrameworkFactory.newClient(server.getConnectString(), timing.session(), timing.connection(), new RetryOneTime(1));\n        try\n        {\n             client.start();\n\n             for ( int i = 0; i < PARTICIPANT_QTY; ++i )\n             {\n                 LeaderLatch latch = new LeaderLatch(client, PATH_NAME);\n                 latch.start();\n                 latches.add(latch);\n             }\n\n             waitForALeader(latches, timing);\n             \n             \r\n             latches.get(PARTICIPANT_ID).close();\n             \n             \r\n             \r\n             Assert.assertTrue(!latches.get(PARTICIPANT_ID-1).hasLeadership());\n\t     }\n\t     finally\n\t     {\n\t    \t \r\n\t    \t latches.remove(PARTICIPANT_ID);\n\t    \t \n\t         for ( LeaderLatch latch : latches )\n\t         {\n\t             Closeables.closeQuietly(latch);\n\t         }\n\t         Closeables.closeQuietly(client);\n\t     }\n\n    }\n","date":"2013-03-08 06:54:59","endLine":175,"groupId":"973","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testCorrectWatching","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-curator-10-0.7/blobInfo/CC_OUT/blobs/38/be1629efa4a86a55147286438e4c79e309d76a.src","preCode":"    public void testCorrectWatching() throws Exception\n    {\n    \tfinal int PARTICIPANT_QTY = 10;\n    \tfinal int PARTICIPANT_ID = 2;\n    \t\n    \tList<LeaderLatch> latches = Lists.newArrayList();\n\n        final Timing timing = new Timing();\n        final CuratorFramework client = CuratorFrameworkFactory.newClient(server.getConnectString(), timing.session(), timing.connection(), new RetryOneTime(1));\n        try\n        {\n             client.start();\n\n             for ( int i = 0; i < PARTICIPANT_QTY; ++i )\n             {\n                 LeaderLatch latch = new LeaderLatch(client, PATH_NAME);\n                 latch.start();\n                 latches.add(latch);\n             }\n\n             waitForALeader(latches, timing);\n             \n             \r\n             latches.get(PARTICIPANT_ID).close();\n             \n             \r\n             \r\n             Assert.assertTrue(!latches.get(PARTICIPANT_ID-1).hasLeadership());\n\t     }\n\t     finally\n\t     {\n\t    \t \r\n\t    \t latches.remove(PARTICIPANT_ID);\n\t    \t \n\t         for ( LeaderLatch latch : latches )\n\t         {\n\t             Closeables.closeQuietly(latch);\n\t         }\n\t         Closeables.closeQuietly(client);\n\t     }\n\n    }\n","realPath":"curator-recipes/src/test/java/org/apache/curator/framework/recipes/leader/TestLeaderLatch.java","repoName":"curator","snippetEndLine":0,"snippetStartLine":0,"startLine":134,"status":"B"}],"commitId":"8d32c4738afe4fb6fa5e6fd843b05821ddc2ce88","commitMessage":"@@@Beginning to move everything to Apache\n","date":"2013-03-08 06:54:59","modifiedFileCount":"10","status":"B","submitter":"Jordan Zimmerman"},{"authorTime":"2014-02-04 02:55:50","codes":[{"authorDate":"2014-02-04 02:55:50","commitOrder":2,"curCode":"    public void testLostConnection() throws Exception\n    {\n        final int PARTICIPANT_QTY = 10;\n\n        List<LeaderLatch> latches = Lists.newArrayList();\n\n        final Timing timing = new Timing();\n        final CuratorFramework client = CuratorFrameworkFactory.newClient(server.getConnectString(), timing.session(), timing.connection(), new RetryOneTime(1));\n        try\n        {\n            client.start();\n\n            final CountDownLatch countDownLatch = new CountDownLatch(1);\n            client.getConnectionStateListenable().addListener\n            (\n                new ConnectionStateListener()\n                {\n                    @Override\n                    public void stateChanged(CuratorFramework client, ConnectionState newState)\n                    {\n                        if ( newState == ConnectionState.LOST )\n                        {\n                            countDownLatch.countDown();\n                        }\n                    }\n                }\n            );\n\n            for ( int i = 0; i < PARTICIPANT_QTY; ++i )\n            {\n                LeaderLatch latch = new LeaderLatch(client, PATH_NAME);\n                latch.start();\n                latches.add(latch);\n            }\n\n            waitForALeader(latches, timing);\n\n            server.stop();\n            Assert.assertTrue(timing.awaitLatch(countDownLatch));\n\n            timing.forWaiting().sleepABit();\n\n            Assert.assertEquals(getLeaders(latches).size(), 0);\n\n            server = new TestingServer(server.getPort(), server.getTempDirectory());\n            Assert.assertEquals(waitForALeader(latches, timing).size(), 1); \r\n        }\n        finally\n        {\n            for ( LeaderLatch latch : latches )\n            {\n                CloseableUtils.closeQuietly(latch);\n            }\n            CloseableUtils.closeQuietly(client);\n        }\n    }\n","date":"2014-02-04 02:55:50","endLine":168,"groupId":"1903","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testLostConnection","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-curator-10-0.7/blobInfo/CC_OUT/blobs/f4/b5590bec1129d1716d90be818bd35ef612e884.src","preCode":"    public void testLostConnection() throws Exception\n    {\n        final int PARTICIPANT_QTY = 10;\n\n        List<LeaderLatch> latches = Lists.newArrayList();\n\n        final Timing timing = new Timing();\n        final CuratorFramework client = CuratorFrameworkFactory.newClient(server.getConnectString(), timing.session(), timing.connection(), new RetryOneTime(1));\n        try\n        {\n            client.start();\n\n            final CountDownLatch countDownLatch = new CountDownLatch(1);\n            client.getConnectionStateListenable().addListener\n            (\n                new ConnectionStateListener()\n                {\n                    @Override\n                    public void stateChanged(CuratorFramework client, ConnectionState newState)\n                    {\n                        if ( newState == ConnectionState.LOST )\n                        {\n                            countDownLatch.countDown();\n                        }\n                    }\n                }\n            );\n\n            for ( int i = 0; i < PARTICIPANT_QTY; ++i )\n            {\n                LeaderLatch latch = new LeaderLatch(client, PATH_NAME);\n                latch.start();\n                latches.add(latch);\n            }\n\n            waitForALeader(latches, timing);\n\n            server.stop();\n            Assert.assertTrue(timing.awaitLatch(countDownLatch));\n\n            timing.forWaiting().sleepABit();\n\n            Assert.assertEquals(getLeaders(latches).size(), 0);\n\n            server = new TestingServer(server.getPort(), server.getTempDirectory());\n            Assert.assertEquals(waitForALeader(latches, timing).size(), 1); \r\n        }\n        finally\n        {\n            for ( LeaderLatch latch : latches )\n            {\n                Closeables.closeQuietly(latch);\n            }\n            Closeables.closeQuietly(client);\n        }\n    }\n","realPath":"curator-recipes/src/test/java/org/apache/curator/framework/recipes/leader/TestLeaderLatch.java","repoName":"curator","snippetEndLine":0,"snippetStartLine":0,"startLine":113,"status":"M"},{"authorDate":"2014-02-04 02:55:50","commitOrder":2,"curCode":"    public void testCorrectWatching() throws Exception\n    {\n        final int PARTICIPANT_QTY = 10;\n        final int PARTICIPANT_ID = 2;\n\n        List<LeaderLatch> latches = Lists.newArrayList();\n\n        final Timing timing = new Timing();\n        final CuratorFramework client = CuratorFrameworkFactory.newClient(server.getConnectString(), timing.session(), timing.connection(), new RetryOneTime(1));\n        try\n        {\n            client.start();\n\n            for ( int i = 0; i < PARTICIPANT_QTY; ++i )\n            {\n                LeaderLatch latch = new LeaderLatch(client, PATH_NAME);\n                latch.start();\n                latches.add(latch);\n            }\n\n            waitForALeader(latches, timing);\n\n            \r\n            latches.get(PARTICIPANT_ID).close();\n\n            \r\n            \r\n            Assert.assertTrue(!latches.get(PARTICIPANT_ID - 1).hasLeadership());\n        }\n        finally\n        {\n            \r\n            latches.remove(PARTICIPANT_ID);\n\n            for ( LeaderLatch latch : latches )\n            {\n                CloseableUtils.closeQuietly(latch);\n            }\n            CloseableUtils.closeQuietly(client);\n        }\n\n    }\n","date":"2014-02-04 02:55:50","endLine":212,"groupId":"973","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testCorrectWatching","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-curator-10-0.7/blobInfo/CC_OUT/blobs/f4/b5590bec1129d1716d90be818bd35ef612e884.src","preCode":"    public void testCorrectWatching() throws Exception\n    {\n        final int PARTICIPANT_QTY = 10;\n        final int PARTICIPANT_ID = 2;\n\n        List<LeaderLatch> latches = Lists.newArrayList();\n\n        final Timing timing = new Timing();\n        final CuratorFramework client = CuratorFrameworkFactory.newClient(server.getConnectString(), timing.session(), timing.connection(), new RetryOneTime(1));\n        try\n        {\n            client.start();\n\n            for ( int i = 0; i < PARTICIPANT_QTY; ++i )\n            {\n                LeaderLatch latch = new LeaderLatch(client, PATH_NAME);\n                latch.start();\n                latches.add(latch);\n            }\n\n            waitForALeader(latches, timing);\n\n            \r\n            latches.get(PARTICIPANT_ID).close();\n\n            \r\n            \r\n            Assert.assertTrue(!latches.get(PARTICIPANT_ID - 1).hasLeadership());\n        }\n        finally\n        {\n            \r\n            latches.remove(PARTICIPANT_ID);\n\n            for ( LeaderLatch latch : latches )\n            {\n                Closeables.closeQuietly(latch);\n            }\n            Closeables.closeQuietly(client);\n        }\n\n    }\n","realPath":"curator-recipes/src/test/java/org/apache/curator/framework/recipes/leader/TestLeaderLatch.java","repoName":"curator","snippetEndLine":0,"snippetStartLine":0,"startLine":171,"status":"M"}],"commitId":"863eaee2f11fe930601c3da3bce386263fb552c4","commitMessage":"@@@CURATOR-85 - Guava no longer has closeQuietly(). This change adds the implementation internally to Curator\n","date":"2014-02-04 02:55:50","modifiedFileCount":"61","status":"M","submitter":"randgalt"},{"authorTime":"2014-02-04 02:55:50","codes":[{"authorDate":"2014-06-18 12:01:35","commitOrder":3,"curCode":"    public void testLostConnection() throws Exception\n    {\n        final int PARTICIPANT_QTY = 10;\n\n        List<LeaderLatch> latches = Lists.newArrayList();\n\n        final Timing timing = new Timing();\n        final CuratorFramework client = CuratorFrameworkFactory.newClient(server.getConnectString(), timing.session(), timing.connection(), new RetryOneTime(1));\n        try\n        {\n            client.start();\n\n            final CountDownLatch countDownLatch = new CountDownLatch(1);\n            client.getConnectionStateListenable().addListener(new ConnectionStateListener()\n            {\n                @Override\n                public void stateChanged(CuratorFramework client, ConnectionState newState)\n                {\n                    if ( newState == ConnectionState.LOST )\n                    {\n                        countDownLatch.countDown();\n                    }\n                }\n            });\n\n            for ( int i = 0; i < PARTICIPANT_QTY; ++i )\n            {\n                LeaderLatch latch = new LeaderLatch(client, PATH_NAME);\n                latch.start();\n                latches.add(latch);\n            }\n\n            waitForALeader(latches, timing);\n\n            server.stop();\n            Assert.assertTrue(timing.awaitLatch(countDownLatch));\n\n            timing.forWaiting().sleepABit();\n\n            Assert.assertEquals(getLeaders(latches).size(), 0);\n\n            server.restart();\n            Assert.assertEquals(waitForALeader(latches, timing).size(), 1); \r\n        }\n        finally\n        {\n            for ( LeaderLatch latch : latches )\n            {\n                CloseableUtils.closeQuietly(latch);\n            }\n            CloseableUtils.closeQuietly(client);\n        }\n    }\n","date":"2014-06-18 12:01:35","endLine":218,"groupId":"1903","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"testLostConnection","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-curator-10-0.7/blobInfo/CC_OUT/blobs/9f/d2f10e3dad5ecb172790ec7822921742d7295c.src","preCode":"    public void testLostConnection() throws Exception\n    {\n        final int PARTICIPANT_QTY = 10;\n\n        List<LeaderLatch> latches = Lists.newArrayList();\n\n        final Timing timing = new Timing();\n        final CuratorFramework client = CuratorFrameworkFactory.newClient(server.getConnectString(), timing.session(), timing.connection(), new RetryOneTime(1));\n        try\n        {\n            client.start();\n\n            final CountDownLatch countDownLatch = new CountDownLatch(1);\n            client.getConnectionStateListenable().addListener(new ConnectionStateListener()\n            {\n                @Override\n                public void stateChanged(CuratorFramework client, ConnectionState newState)\n                {\n                    if ( newState == ConnectionState.LOST )\n                    {\n                        countDownLatch.countDown();\n                    }\n                }\n            });\n\n            for ( int i = 0; i < PARTICIPANT_QTY; ++i )\n            {\n                LeaderLatch latch = new LeaderLatch(client, PATH_NAME);\n                latch.start();\n                latches.add(latch);\n            }\n\n            waitForALeader(latches, timing);\n\n            server.stop();\n            Assert.assertTrue(timing.awaitLatch(countDownLatch));\n\n            timing.forWaiting().sleepABit();\n\n            Assert.assertEquals(getLeaders(latches).size(), 0);\n\n            server = new TestingServer(server.getPort(), server.getTempDirectory());\n            Assert.assertEquals(waitForALeader(latches, timing).size(), 1); \r\n        }\n        finally\n        {\n            for ( LeaderLatch latch : latches )\n            {\n                CloseableUtils.closeQuietly(latch);\n            }\n            CloseableUtils.closeQuietly(client);\n        }\n    }\n","realPath":"curator-recipes/src/test/java/org/apache/curator/framework/recipes/leader/TestLeaderLatch.java","repoName":"curator","snippetEndLine":0,"snippetStartLine":0,"startLine":166,"status":"M"},{"authorDate":"2014-02-04 02:55:50","commitOrder":3,"curCode":"    public void testCorrectWatching() throws Exception\n    {\n        final int PARTICIPANT_QTY = 10;\n        final int PARTICIPANT_ID = 2;\n\n        List<LeaderLatch> latches = Lists.newArrayList();\n\n        final Timing timing = new Timing();\n        final CuratorFramework client = CuratorFrameworkFactory.newClient(server.getConnectString(), timing.session(), timing.connection(), new RetryOneTime(1));\n        try\n        {\n            client.start();\n\n            for ( int i = 0; i < PARTICIPANT_QTY; ++i )\n            {\n                LeaderLatch latch = new LeaderLatch(client, PATH_NAME);\n                latch.start();\n                latches.add(latch);\n            }\n\n            waitForALeader(latches, timing);\n\n            \r\n            latches.get(PARTICIPANT_ID).close();\n\n            \r\n            \r\n            Assert.assertTrue(!latches.get(PARTICIPANT_ID - 1).hasLeadership());\n        }\n        finally\n        {\n            \r\n            latches.remove(PARTICIPANT_ID);\n\n            for ( LeaderLatch latch : latches )\n            {\n                CloseableUtils.closeQuietly(latch);\n            }\n            CloseableUtils.closeQuietly(client);\n        }\n\n    }\n","date":"2014-02-04 02:55:50","endLine":212,"groupId":"973","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"testCorrectWatching","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-curator-10-0.7/blobInfo/CC_OUT/blobs/f4/b5590bec1129d1716d90be818bd35ef612e884.src","preCode":"    public void testCorrectWatching() throws Exception\n    {\n        final int PARTICIPANT_QTY = 10;\n        final int PARTICIPANT_ID = 2;\n\n        List<LeaderLatch> latches = Lists.newArrayList();\n\n        final Timing timing = new Timing();\n        final CuratorFramework client = CuratorFrameworkFactory.newClient(server.getConnectString(), timing.session(), timing.connection(), new RetryOneTime(1));\n        try\n        {\n            client.start();\n\n            for ( int i = 0; i < PARTICIPANT_QTY; ++i )\n            {\n                LeaderLatch latch = new LeaderLatch(client, PATH_NAME);\n                latch.start();\n                latches.add(latch);\n            }\n\n            waitForALeader(latches, timing);\n\n            \r\n            latches.get(PARTICIPANT_ID).close();\n\n            \r\n            \r\n            Assert.assertTrue(!latches.get(PARTICIPANT_ID - 1).hasLeadership());\n        }\n        finally\n        {\n            \r\n            latches.remove(PARTICIPANT_ID);\n\n            for ( LeaderLatch latch : latches )\n            {\n                CloseableUtils.closeQuietly(latch);\n            }\n            CloseableUtils.closeQuietly(client);\n        }\n\n    }\n","realPath":"curator-recipes/src/test/java/org/apache/curator/framework/recipes/leader/TestLeaderLatch.java","repoName":"curator","snippetEndLine":0,"snippetStartLine":0,"startLine":171,"status":"N"}],"commitId":"2337b64fc5a1cfbbcbe462560cb0a8d2fef22c0a","commitMessage":"@@@Merge branch 'CURATOR-114' of github.com:cammckenzie/curator into CURATOR-114\n","date":"2014-06-18 12:01:35","modifiedFileCount":"11","status":"M","submitter":"randgalt"},{"authorTime":"2015-08-18 10:13:37","codes":[{"authorDate":"2015-08-18 10:13:37","commitOrder":4,"curCode":"    public void testLostConnection() throws Exception\n    {\n        final int PARTICIPANT_QTY = 10;\n\n        List<LeaderLatch> latches = Lists.newArrayList();\n\n        final Timing timing = new Timing();\n        final CuratorFramework client = CuratorFrameworkFactory.newClient(server.getConnectString(), timing.session(), timing.connection(), new RetryOneTime(1));\n        try\n        {\n            client.start();\n\n            final CountDownLatch countDownLatch = new CountDownLatch(1);\n            client.getConnectionStateListenable().addListener(new ConnectionStateListener()\n            {\n                @Override\n                public void stateChanged(CuratorFramework client, ConnectionState newState)\n                {\n                    if ( newState == ConnectionState.LOST )\n                    {\n                        countDownLatch.countDown();\n                    }\n                }\n            });\n\n            for ( int i = 0; i < PARTICIPANT_QTY; ++i )\n            {\n                LeaderLatch latch = new LeaderLatch(client, PATH_NAME);\n                latch.start();\n                latches.add(latch);\n            }\n\n            waitForALeader(latches, timing);\n\n            server.stop();\n            Assert.assertTrue(timing.awaitLatch(countDownLatch));\n\n            timing.forWaiting().sleepABit();\n\n            Assert.assertEquals(getLeaders(latches).size(), 0);\n\n            server.restart();\n            Assert.assertEquals(waitForALeader(latches, timing).size(), 1); \r\n        }\n        finally\n        {\n            for ( LeaderLatch latch : latches )\n            {\n                CloseableUtils.closeQuietly(latch);\n            }\n            TestCleanState.closeAndTestClean(client);\n        }\n    }\n","date":"2015-08-18 10:13:37","endLine":219,"groupId":"1903","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"testLostConnection","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-curator-10-0.7/blobInfo/CC_OUT/blobs/37/42fb7f7c4b7851c140d2de2383638972217c29.src","preCode":"    public void testLostConnection() throws Exception\n    {\n        final int PARTICIPANT_QTY = 10;\n\n        List<LeaderLatch> latches = Lists.newArrayList();\n\n        final Timing timing = new Timing();\n        final CuratorFramework client = CuratorFrameworkFactory.newClient(server.getConnectString(), timing.session(), timing.connection(), new RetryOneTime(1));\n        try\n        {\n            client.start();\n\n            final CountDownLatch countDownLatch = new CountDownLatch(1);\n            client.getConnectionStateListenable().addListener(new ConnectionStateListener()\n            {\n                @Override\n                public void stateChanged(CuratorFramework client, ConnectionState newState)\n                {\n                    if ( newState == ConnectionState.LOST )\n                    {\n                        countDownLatch.countDown();\n                    }\n                }\n            });\n\n            for ( int i = 0; i < PARTICIPANT_QTY; ++i )\n            {\n                LeaderLatch latch = new LeaderLatch(client, PATH_NAME);\n                latch.start();\n                latches.add(latch);\n            }\n\n            waitForALeader(latches, timing);\n\n            server.stop();\n            Assert.assertTrue(timing.awaitLatch(countDownLatch));\n\n            timing.forWaiting().sleepABit();\n\n            Assert.assertEquals(getLeaders(latches).size(), 0);\n\n            server.restart();\n            Assert.assertEquals(waitForALeader(latches, timing).size(), 1); \r\n        }\n        finally\n        {\n            for ( LeaderLatch latch : latches )\n            {\n                CloseableUtils.closeQuietly(latch);\n            }\n            CloseableUtils.closeQuietly(client);\n        }\n    }\n","realPath":"curator-recipes/src/test/java/org/apache/curator/framework/recipes/leader/TestLeaderLatch.java","repoName":"curator","snippetEndLine":0,"snippetStartLine":0,"startLine":167,"status":"M"},{"authorDate":"2015-08-18 10:13:37","commitOrder":4,"curCode":"    public void testCorrectWatching() throws Exception\n    {\n        final int PARTICIPANT_QTY = 10;\n        final int PARTICIPANT_ID = 2;\n\n        List<LeaderLatch> latches = Lists.newArrayList();\n\n        final Timing timing = new Timing();\n        final CuratorFramework client = CuratorFrameworkFactory.newClient(server.getConnectString(), timing.session(), timing.connection(), new RetryOneTime(1));\n        try\n        {\n            client.start();\n\n            for ( int i = 0; i < PARTICIPANT_QTY; ++i )\n            {\n                LeaderLatch latch = new LeaderLatch(client, PATH_NAME);\n                latch.start();\n                latches.add(latch);\n            }\n\n            waitForALeader(latches, timing);\n\n            \r\n            latches.get(PARTICIPANT_ID).close();\n\n            \r\n            \r\n            Assert.assertTrue(!latches.get(PARTICIPANT_ID - 1).hasLeadership());\n        }\n        finally\n        {\n            \r\n            latches.remove(PARTICIPANT_ID);\n\n            for ( LeaderLatch latch : latches )\n            {\n                CloseableUtils.closeQuietly(latch);\n            }\n            TestCleanState.closeAndTestClean(client);\n        }\n    }\n","date":"2015-08-18 10:13:37","endLine":262,"groupId":"973","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"testCorrectWatching","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-curator-10-0.7/blobInfo/CC_OUT/blobs/37/42fb7f7c4b7851c140d2de2383638972217c29.src","preCode":"    public void testCorrectWatching() throws Exception\n    {\n        final int PARTICIPANT_QTY = 10;\n        final int PARTICIPANT_ID = 2;\n\n        List<LeaderLatch> latches = Lists.newArrayList();\n\n        final Timing timing = new Timing();\n        final CuratorFramework client = CuratorFrameworkFactory.newClient(server.getConnectString(), timing.session(), timing.connection(), new RetryOneTime(1));\n        try\n        {\n            client.start();\n\n            for ( int i = 0; i < PARTICIPANT_QTY; ++i )\n            {\n                LeaderLatch latch = new LeaderLatch(client, PATH_NAME);\n                latch.start();\n                latches.add(latch);\n            }\n\n            waitForALeader(latches, timing);\n\n            \r\n            latches.get(PARTICIPANT_ID).close();\n\n            \r\n            \r\n            Assert.assertTrue(!latches.get(PARTICIPANT_ID - 1).hasLeadership());\n        }\n        finally\n        {\n            \r\n            latches.remove(PARTICIPANT_ID);\n\n            for ( LeaderLatch latch : latches )\n            {\n                CloseableUtils.closeQuietly(latch);\n            }\n            CloseableUtils.closeQuietly(client);\n        }\n\n    }\n","realPath":"curator-recipes/src/test/java/org/apache/curator/framework/recipes/leader/TestLeaderLatch.java","repoName":"curator","snippetEndLine":0,"snippetStartLine":0,"startLine":222,"status":"M"}],"commitId":"d5d12c88b075fd1fc51a29412b3c08918cceb983","commitMessage":"@@@Merge 'CURATOR-217' into CURATOR-3.0\n","date":"2015-08-18 10:13:37","modifiedFileCount":"40","status":"M","submitter":"Scott Blum"},{"authorTime":"2015-09-26 08:22:10","codes":[{"authorDate":"2015-08-18 10:13:37","commitOrder":5,"curCode":"    public void testLostConnection() throws Exception\n    {\n        final int PARTICIPANT_QTY = 10;\n\n        List<LeaderLatch> latches = Lists.newArrayList();\n\n        final Timing timing = new Timing();\n        final CuratorFramework client = CuratorFrameworkFactory.newClient(server.getConnectString(), timing.session(), timing.connection(), new RetryOneTime(1));\n        try\n        {\n            client.start();\n\n            final CountDownLatch countDownLatch = new CountDownLatch(1);\n            client.getConnectionStateListenable().addListener(new ConnectionStateListener()\n            {\n                @Override\n                public void stateChanged(CuratorFramework client, ConnectionState newState)\n                {\n                    if ( newState == ConnectionState.LOST )\n                    {\n                        countDownLatch.countDown();\n                    }\n                }\n            });\n\n            for ( int i = 0; i < PARTICIPANT_QTY; ++i )\n            {\n                LeaderLatch latch = new LeaderLatch(client, PATH_NAME);\n                latch.start();\n                latches.add(latch);\n            }\n\n            waitForALeader(latches, timing);\n\n            server.stop();\n            Assert.assertTrue(timing.awaitLatch(countDownLatch));\n\n            timing.forWaiting().sleepABit();\n\n            Assert.assertEquals(getLeaders(latches).size(), 0);\n\n            server.restart();\n            Assert.assertEquals(waitForALeader(latches, timing).size(), 1); \r\n        }\n        finally\n        {\n            for ( LeaderLatch latch : latches )\n            {\n                CloseableUtils.closeQuietly(latch);\n            }\n            TestCleanState.closeAndTestClean(client);\n        }\n    }\n","date":"2015-08-18 10:13:37","endLine":219,"groupId":"1903","id":9,"instanceNumber":1,"isCurCommit":0,"methodName":"testLostConnection","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-curator-10-0.7/blobInfo/CC_OUT/blobs/37/42fb7f7c4b7851c140d2de2383638972217c29.src","preCode":"    public void testLostConnection() throws Exception\n    {\n        final int PARTICIPANT_QTY = 10;\n\n        List<LeaderLatch> latches = Lists.newArrayList();\n\n        final Timing timing = new Timing();\n        final CuratorFramework client = CuratorFrameworkFactory.newClient(server.getConnectString(), timing.session(), timing.connection(), new RetryOneTime(1));\n        try\n        {\n            client.start();\n\n            final CountDownLatch countDownLatch = new CountDownLatch(1);\n            client.getConnectionStateListenable().addListener(new ConnectionStateListener()\n            {\n                @Override\n                public void stateChanged(CuratorFramework client, ConnectionState newState)\n                {\n                    if ( newState == ConnectionState.LOST )\n                    {\n                        countDownLatch.countDown();\n                    }\n                }\n            });\n\n            for ( int i = 0; i < PARTICIPANT_QTY; ++i )\n            {\n                LeaderLatch latch = new LeaderLatch(client, PATH_NAME);\n                latch.start();\n                latches.add(latch);\n            }\n\n            waitForALeader(latches, timing);\n\n            server.stop();\n            Assert.assertTrue(timing.awaitLatch(countDownLatch));\n\n            timing.forWaiting().sleepABit();\n\n            Assert.assertEquals(getLeaders(latches).size(), 0);\n\n            server.restart();\n            Assert.assertEquals(waitForALeader(latches, timing).size(), 1); \r\n        }\n        finally\n        {\n            for ( LeaderLatch latch : latches )\n            {\n                CloseableUtils.closeQuietly(latch);\n            }\n            TestCleanState.closeAndTestClean(client);\n        }\n    }\n","realPath":"curator-recipes/src/test/java/org/apache/curator/framework/recipes/leader/TestLeaderLatch.java","repoName":"curator","snippetEndLine":0,"snippetStartLine":0,"startLine":167,"status":"N"},{"authorDate":"2015-09-26 08:22:10","commitOrder":5,"curCode":"    public void testCorrectWatching() throws Exception\n    {\n        final int PARTICIPANT_QTY = 10;\n        final int PARTICIPANT_ID = 2;\n\n        List<LeaderLatch> latches = Lists.newArrayList();\n\n        final Timing timing = new Timing();\n        final CuratorFramework client = CuratorFrameworkFactory.newClient(server.getConnectString(), timing.session(), timing.connection(), new RetryOneTime(1));\n        try\n        {\n            client.start();\n\n            for ( int i = 0; i < PARTICIPANT_QTY; ++i )\n            {\n                LeaderLatch latch = new LeaderLatch(client, PATH_NAME);\n                latch.start();\n                latches.add(latch);\n                waitForALeader(latches, timing);\n            }\n\n            \r\n            latches.get(PARTICIPANT_ID).close();\n\n            \r\n            \r\n            Assert.assertTrue(!latches.get(PARTICIPANT_ID - 1).hasLeadership());\n        }\n        finally\n        {\n            \r\n            latches.remove(PARTICIPANT_ID);\n\n            for ( LeaderLatch latch : latches )\n            {\n                CloseableUtils.closeQuietly(latch);\n            }\n            TestCleanState.closeAndTestClean(client);\n        }\n    }\n","date":"2015-09-26 08:22:10","endLine":427,"groupId":"973","id":10,"instanceNumber":2,"isCurCommit":0,"methodName":"testCorrectWatching","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-curator-10-0.7/blobInfo/CC_OUT/blobs/99/1e6fc4bddae820c63f45dfb418387049c97370.src","preCode":"    public void testCorrectWatching() throws Exception\n    {\n        final int PARTICIPANT_QTY = 10;\n        final int PARTICIPANT_ID = 2;\n\n        List<LeaderLatch> latches = Lists.newArrayList();\n\n        final Timing timing = new Timing();\n        final CuratorFramework client = CuratorFrameworkFactory.newClient(server.getConnectString(), timing.session(), timing.connection(), new RetryOneTime(1));\n        try\n        {\n            client.start();\n\n            for ( int i = 0; i < PARTICIPANT_QTY; ++i )\n            {\n                LeaderLatch latch = new LeaderLatch(client, PATH_NAME);\n                latch.start();\n                latches.add(latch);\n            }\n\n            waitForALeader(latches, timing);\n\n            \r\n            latches.get(PARTICIPANT_ID).close();\n\n            \r\n            \r\n            Assert.assertTrue(!latches.get(PARTICIPANT_ID - 1).hasLeadership());\n        }\n        finally\n        {\n            \r\n            latches.remove(PARTICIPANT_ID);\n\n            for ( LeaderLatch latch : latches )\n            {\n                CloseableUtils.closeQuietly(latch);\n            }\n            TestCleanState.closeAndTestClean(client);\n        }\n    }\n","realPath":"curator-recipes/src/test/java/org/apache/curator/framework/recipes/leader/TestLeaderLatch.java","repoName":"curator","snippetEndLine":0,"snippetStartLine":0,"startLine":388,"status":"M"}],"commitId":"4c3c8377935f8ae2c0f24c4a1010cf4bdef4e297","commitMessage":"@@@Merge branch 'CURATOR-3.0' into CURATOR-265\n\nConflicts:\n\tcurator-framework/src/test/java/org/apache/curator/framework/imps/TestReconfiguration.java\n","date":"2015-09-26 08:22:10","modifiedFileCount":"10","status":"M","submitter":"randgalt"},{"authorTime":"2020-10-20 21:18:25","codes":[{"authorDate":"2020-10-20 21:18:25","commitOrder":6,"curCode":"    public void testLostConnection() throws Exception\n    {\n        final int PARTICIPANT_QTY = 10;\n\n        List<LeaderLatch> latches = Lists.newArrayList();\n\n        final Timing timing = new Timing();\n        final CuratorFramework client = CuratorFrameworkFactory.newClient(server.getConnectString(), timing.session(), timing.connection(), new RetryOneTime(1));\n        try\n        {\n            client.start();\n\n            final CountDownLatch countDownLatch = new CountDownLatch(1);\n            client.getConnectionStateListenable().addListener(new ConnectionStateListener()\n            {\n                @Override\n                public void stateChanged(CuratorFramework client, ConnectionState newState)\n                {\n                    if ( newState == ConnectionState.LOST )\n                    {\n                        countDownLatch.countDown();\n                    }\n                }\n            });\n\n            for ( int i = 0; i < PARTICIPANT_QTY; ++i )\n            {\n                LeaderLatch latch = new LeaderLatch(client, PATH_NAME);\n                latch.start();\n                latches.add(latch);\n            }\n\n            waitForALeader(latches, timing);\n\n            server.stop();\n            assertTrue(timing.awaitLatch(countDownLatch));\n\n            timing.forWaiting().sleepABit();\n\n            assertEquals(getLeaders(latches).size(), 0);\n\n            server.restart();\n            assertEquals(waitForALeader(latches, timing).size(), 1); \r\n        }\n        finally\n        {\n            for ( LeaderLatch latch : latches )\n            {\n                CloseableUtils.closeQuietly(latch);\n            }\n            TestCleanState.closeAndTestClean(client);\n        }\n    }\n","date":"2020-10-20 21:18:25","endLine":546,"groupId":"10257","id":11,"instanceNumber":1,"isCurCommit":1,"methodName":"testLostConnection","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-curator-10-0.7/blobInfo/CC_OUT/blobs/d6/4e7cfee5a68697da91b22db994682480935885.src","preCode":"    public void testLostConnection() throws Exception\n    {\n        final int PARTICIPANT_QTY = 10;\n\n        List<LeaderLatch> latches = Lists.newArrayList();\n\n        final Timing timing = new Timing();\n        final CuratorFramework client = CuratorFrameworkFactory.newClient(server.getConnectString(), timing.session(), timing.connection(), new RetryOneTime(1));\n        try\n        {\n            client.start();\n\n            final CountDownLatch countDownLatch = new CountDownLatch(1);\n            client.getConnectionStateListenable().addListener(new ConnectionStateListener()\n            {\n                @Override\n                public void stateChanged(CuratorFramework client, ConnectionState newState)\n                {\n                    if ( newState == ConnectionState.LOST )\n                    {\n                        countDownLatch.countDown();\n                    }\n                }\n            });\n\n            for ( int i = 0; i < PARTICIPANT_QTY; ++i )\n            {\n                LeaderLatch latch = new LeaderLatch(client, PATH_NAME);\n                latch.start();\n                latches.add(latch);\n            }\n\n            waitForALeader(latches, timing);\n\n            server.stop();\n            Assert.assertTrue(timing.awaitLatch(countDownLatch));\n\n            timing.forWaiting().sleepABit();\n\n            Assert.assertEquals(getLeaders(latches).size(), 0);\n\n            server.restart();\n            Assert.assertEquals(waitForALeader(latches, timing).size(), 1); \r\n        }\n        finally\n        {\n            for ( LeaderLatch latch : latches )\n            {\n                CloseableUtils.closeQuietly(latch);\n            }\n            TestCleanState.closeAndTestClean(client);\n        }\n    }\n","realPath":"curator-recipes/src/test/java/org/apache/curator/framework/recipes/leader/TestLeaderLatch.java","repoName":"curator","snippetEndLine":0,"snippetStartLine":0,"startLine":494,"status":"M"},{"authorDate":"2020-10-20 21:18:25","commitOrder":6,"curCode":"    public void testCorrectWatching() throws Exception\n    {\n        final int PARTICIPANT_QTY = 10;\n        final int PARTICIPANT_ID = 2;\n\n        List<LeaderLatch> latches = Lists.newArrayList();\n\n        final Timing timing = new Timing();\n        final CuratorFramework client = CuratorFrameworkFactory.newClient(server.getConnectString(), timing.session(), timing.connection(), new RetryOneTime(1));\n        try\n        {\n            client.start();\n\n            for ( int i = 0; i < PARTICIPANT_QTY; ++i )\n            {\n                LeaderLatch latch = new LeaderLatch(client, PATH_NAME);\n                latch.start();\n                latches.add(latch);\n                waitForALeader(latches, timing);\n            }\n\n            \r\n            latches.get(PARTICIPANT_ID).close();\n\n            \r\n            \r\n            assertTrue(!latches.get(PARTICIPANT_ID - 1).hasLeadership());\n        }\n        finally\n        {\n            \r\n            latches.remove(PARTICIPANT_ID);\n\n            for ( LeaderLatch latch : latches )\n            {\n                CloseableUtils.closeQuietly(latch);\n            }\n            TestCleanState.closeAndTestClean(client);\n        }\n    }\n","date":"2020-10-20 21:18:25","endLine":588,"groupId":"10257","id":12,"instanceNumber":2,"isCurCommit":1,"methodName":"testCorrectWatching","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-curator-10-0.7/blobInfo/CC_OUT/blobs/d6/4e7cfee5a68697da91b22db994682480935885.src","preCode":"    public void testCorrectWatching() throws Exception\n    {\n        final int PARTICIPANT_QTY = 10;\n        final int PARTICIPANT_ID = 2;\n\n        List<LeaderLatch> latches = Lists.newArrayList();\n\n        final Timing timing = new Timing();\n        final CuratorFramework client = CuratorFrameworkFactory.newClient(server.getConnectString(), timing.session(), timing.connection(), new RetryOneTime(1));\n        try\n        {\n            client.start();\n\n            for ( int i = 0; i < PARTICIPANT_QTY; ++i )\n            {\n                LeaderLatch latch = new LeaderLatch(client, PATH_NAME);\n                latch.start();\n                latches.add(latch);\n                waitForALeader(latches, timing);\n            }\n\n            \r\n            latches.get(PARTICIPANT_ID).close();\n\n            \r\n            \r\n            Assert.assertTrue(!latches.get(PARTICIPANT_ID - 1).hasLeadership());\n        }\n        finally\n        {\n            \r\n            latches.remove(PARTICIPANT_ID);\n\n            for ( LeaderLatch latch : latches )\n            {\n                CloseableUtils.closeQuietly(latch);\n            }\n            TestCleanState.closeAndTestClean(client);\n        }\n    }\n","realPath":"curator-recipes/src/test/java/org/apache/curator/framework/recipes/leader/TestLeaderLatch.java","repoName":"curator","snippetEndLine":0,"snippetStartLine":0,"startLine":549,"status":"M"}],"commitId":"7a148288603ae5db0c232142f7dc07d43e01bea3","commitMessage":"@@@CURATOR-582: Migrate to jUnit 5.6 (#372)\n\n","date":"2020-10-20 21:18:25","modifiedFileCount":"125","status":"M","submitter":"Tam?s P?nzes"}]
