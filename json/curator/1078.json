[{"authorTime":"2020-03-17 01:12:53","codes":[{"authorDate":"2020-03-17 01:12:53","commitOrder":1,"curCode":"    public void testRemoveAllDataWatches() throws Exception\n    {       \n        Timing timing = new Timing();\n        CuratorFramework client = CuratorFrameworkFactory.builder().\n                connectString(server.getConnectString()).\n                retryPolicy(new RetryOneTime(1)).\n                build();\n        try\n        {\n            client.start();\n            \n            final String path = \"/\";\n            final AtomicBoolean removedFlag = new AtomicBoolean(false);\n            final CountDownLatch removedLatch = new CountDownLatch(1);\n            \n            Watcher watcher1 = new BooleanWatcher(path, removedFlag, EventType.ChildWatchRemoved);            \n            Watcher watcher2 = new CountDownWatcher(path, removedLatch, EventType.DataWatchRemoved);                        \n            \n            client.getChildren().usingWatcher(watcher1).forPath(path);\n            client.checkExists().usingWatcher(watcher2).forPath(path);\n            \n            client.watches().removeAll().ofType(WatcherType.Data).forPath(path);\n            \n            Assert.assertTrue(timing.awaitLatch(removedLatch), \"Timed out waiting for watch removal\");\n            Assert.assertEquals(removedFlag.get(), false);\n        }\n        finally\n        {\n            CloseableUtils.closeQuietly(client);\n        }\n    }\n","date":"2020-03-17 01:12:53","endLine":338,"groupId":"1877","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testRemoveAllDataWatches","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-curator-10-0.7/blobInfo/CC_OUT/blobs/a7/77e2feeb85d0cb999498bed6e2d8535928d43a.src","preCode":"    public void testRemoveAllDataWatches() throws Exception\n    {       \n        Timing timing = new Timing();\n        CuratorFramework client = CuratorFrameworkFactory.builder().\n                connectString(server.getConnectString()).\n                retryPolicy(new RetryOneTime(1)).\n                build();\n        try\n        {\n            client.start();\n            \n            final String path = \"/\";\n            final AtomicBoolean removedFlag = new AtomicBoolean(false);\n            final CountDownLatch removedLatch = new CountDownLatch(1);\n            \n            Watcher watcher1 = new BooleanWatcher(path, removedFlag, EventType.ChildWatchRemoved);            \n            Watcher watcher2 = new CountDownWatcher(path, removedLatch, EventType.DataWatchRemoved);                        \n            \n            client.getChildren().usingWatcher(watcher1).forPath(path);\n            client.checkExists().usingWatcher(watcher2).forPath(path);\n            \n            client.watches().removeAll().ofType(WatcherType.Data).forPath(path);\n            \n            Assert.assertTrue(timing.awaitLatch(removedLatch), \"Timed out waiting for watch removal\");\n            Assert.assertEquals(removedFlag.get(), false);\n        }\n        finally\n        {\n            CloseableUtils.closeQuietly(client);\n        }\n    }\n","realPath":"curator-framework/src/test/java/org/apache/curator/framework/imps/TestWatchesBuilder.java","repoName":"curator","snippetEndLine":0,"snippetStartLine":0,"startLine":308,"status":"B"},{"authorDate":"2020-03-17 01:12:53","commitOrder":1,"curCode":"    public void testRemoveAllChildWatches() throws Exception\n    {       \n        Timing timing = new Timing();\n        CuratorFramework client = CuratorFrameworkFactory.builder().\n                connectString(server.getConnectString()).\n                retryPolicy(new RetryOneTime(1)).\n                build();\n        try\n        {\n            client.start();\n            \n            final String path = \"/\";\n            final AtomicBoolean removedFlag = new AtomicBoolean(false);\n            final CountDownLatch removedLatch = new CountDownLatch(1);\n            \n            Watcher watcher1 = new BooleanWatcher(path, removedFlag, EventType.DataWatchRemoved);            \n            Watcher watcher2 = new CountDownWatcher(path, removedLatch, EventType.ChildWatchRemoved);                        \n                        \n            client.checkExists().usingWatcher(watcher1).forPath(path);\n            client.getChildren().usingWatcher(watcher2).forPath(path);\n            \n            client.watches().removeAll().ofType(WatcherType.Children).forPath(path);\n            \n            Assert.assertTrue(timing.awaitLatch(removedLatch), \"Timed out waiting for watch removal\");\n            Assert.assertEquals(removedFlag.get(), false);\n        }\n        finally\n        {\n            CloseableUtils.closeQuietly(client);\n        }\n    }     \n","date":"2020-03-17 01:12:53","endLine":371,"groupId":"1878","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testRemoveAllChildWatches","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-curator-10-0.7/blobInfo/CC_OUT/blobs/a7/77e2feeb85d0cb999498bed6e2d8535928d43a.src","preCode":"    public void testRemoveAllChildWatches() throws Exception\n    {       \n        Timing timing = new Timing();\n        CuratorFramework client = CuratorFrameworkFactory.builder().\n                connectString(server.getConnectString()).\n                retryPolicy(new RetryOneTime(1)).\n                build();\n        try\n        {\n            client.start();\n            \n            final String path = \"/\";\n            final AtomicBoolean removedFlag = new AtomicBoolean(false);\n            final CountDownLatch removedLatch = new CountDownLatch(1);\n            \n            Watcher watcher1 = new BooleanWatcher(path, removedFlag, EventType.DataWatchRemoved);            \n            Watcher watcher2 = new CountDownWatcher(path, removedLatch, EventType.ChildWatchRemoved);                        \n                        \n            client.checkExists().usingWatcher(watcher1).forPath(path);\n            client.getChildren().usingWatcher(watcher2).forPath(path);\n            \n            client.watches().removeAll().ofType(WatcherType.Children).forPath(path);\n            \n            Assert.assertTrue(timing.awaitLatch(removedLatch), \"Timed out waiting for watch removal\");\n            Assert.assertEquals(removedFlag.get(), false);\n        }\n        finally\n        {\n            CloseableUtils.closeQuietly(client);\n        }\n    }     \n","realPath":"curator-framework/src/test/java/org/apache/curator/framework/imps/TestWatchesBuilder.java","repoName":"curator","snippetEndLine":0,"snippetStartLine":0,"startLine":341,"status":"B"}],"commitId":"7bbb7196173b88baac0e102bdff265dc7f2ee77e","commitMessage":"@@@[CURATOR-558] - Updates for ZooKeeper 3.6.0 (#350)\n\n* CURATOR-558\n\nBring Curator up to ZooKeeper 3.5.6 in preparation for supporting persistent recursive watchers while maintaining background compatability with previous versions of ZK. Added a new module to make sure we maintain compatibility with ZK 3.5.x. ZooKeeper 3.6.0 has some significant changes from previous versions. The reconfig APIs have moved into a new class.  ZooKeeperAdmin. This class existed in 3.5.x but wasn't required. Now it is. A bunch of little things changed in the ZK server code which affected Curator's test classes. I moved it all into reflection based calls in Compatibility.java in the test module. We now have modules that test ZK 3.4.  3.5 and 3.6 so we're safe with compatibility. ZooKeeper's MultiTransactionRecord has been removed it seems. That forced CuratorMultiTransactionRecord to be re-written. It's not a public class so hopefully it won't affect anyone.\n\nThere is a new module.  curator-test-zk35. It forces ZooKeeper 3.5.6 and performs selected tests from the other modules to ensure compatibility. Tests annotated with TestNG groups zk35 and zk35Compatibility are tested. Group zk36 is excluded. Note: these tests will only run from Maven. I don't think IntelliJ/Eclipse support the Maven syntax I used.\nSupport persistent watchers in ZK 3.6+ while maintaining background compatability with previous versions of ZK. Added a new module to make sure we maintain comaptibility with ZK 3.5.x\n\n* CURATOR-558 - change to version 5.0.0-SNAPSHOT\n\nCo-authored-by: randgalt <randgalt@apache.org>","date":"2020-03-17 01:12:53","modifiedFileCount":"29","status":"B","submitter":"Jordan Zimmerman"},{"authorTime":"2020-10-20 21:18:25","codes":[{"authorDate":"2020-10-20 21:18:25","commitOrder":2,"curCode":"    public void testRemoveAllDataWatches() throws Exception\n    {       \n        Timing timing = new Timing();\n        CuratorFramework client = CuratorFrameworkFactory.builder().\n                connectString(server.getConnectString()).\n                retryPolicy(new RetryOneTime(1)).\n                build();\n        try\n        {\n            client.start();\n            \n            final String path = \"/\";\n            final AtomicBoolean removedFlag = new AtomicBoolean(false);\n            final CountDownLatch removedLatch = new CountDownLatch(1);\n            \n            Watcher watcher1 = new BooleanWatcher(path, removedFlag, EventType.ChildWatchRemoved);            \n            Watcher watcher2 = new CountDownWatcher(path, removedLatch, EventType.DataWatchRemoved);                        \n            \n            client.getChildren().usingWatcher(watcher1).forPath(path);\n            client.checkExists().usingWatcher(watcher2).forPath(path);\n            \n            client.watches().removeAll().ofType(WatcherType.Data).forPath(path);\n            \n            assertTrue(timing.awaitLatch(removedLatch), \"Timed out waiting for watch removal\");\n            assertEquals(removedFlag.get(), false);\n        }\n        finally\n        {\n            CloseableUtils.closeQuietly(client);\n        }\n    }\n","date":"2020-10-20 21:18:25","endLine":346,"groupId":"1078","id":3,"instanceNumber":1,"isCurCommit":1,"methodName":"testRemoveAllDataWatches","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-curator-10-0.7/blobInfo/CC_OUT/blobs/30/526506433fc4388fb9e7ed3cfaef4570c915c0.src","preCode":"    public void testRemoveAllDataWatches() throws Exception\n    {       \n        Timing timing = new Timing();\n        CuratorFramework client = CuratorFrameworkFactory.builder().\n                connectString(server.getConnectString()).\n                retryPolicy(new RetryOneTime(1)).\n                build();\n        try\n        {\n            client.start();\n            \n            final String path = \"/\";\n            final AtomicBoolean removedFlag = new AtomicBoolean(false);\n            final CountDownLatch removedLatch = new CountDownLatch(1);\n            \n            Watcher watcher1 = new BooleanWatcher(path, removedFlag, EventType.ChildWatchRemoved);            \n            Watcher watcher2 = new CountDownWatcher(path, removedLatch, EventType.DataWatchRemoved);                        \n            \n            client.getChildren().usingWatcher(watcher1).forPath(path);\n            client.checkExists().usingWatcher(watcher2).forPath(path);\n            \n            client.watches().removeAll().ofType(WatcherType.Data).forPath(path);\n            \n            Assert.assertTrue(timing.awaitLatch(removedLatch), \"Timed out waiting for watch removal\");\n            Assert.assertEquals(removedFlag.get(), false);\n        }\n        finally\n        {\n            CloseableUtils.closeQuietly(client);\n        }\n    }\n","realPath":"curator-framework/src/test/java/org/apache/curator/framework/imps/TestWatchesBuilder.java","repoName":"curator","snippetEndLine":0,"snippetStartLine":0,"startLine":316,"status":"M"},{"authorDate":"2020-10-20 21:18:25","commitOrder":2,"curCode":"    public void testRemoveAllChildWatches() throws Exception\n    {       \n        Timing timing = new Timing();\n        CuratorFramework client = CuratorFrameworkFactory.builder().\n                connectString(server.getConnectString()).\n                retryPolicy(new RetryOneTime(1)).\n                build();\n        try\n        {\n            client.start();\n            \n            final String path = \"/\";\n            final AtomicBoolean removedFlag = new AtomicBoolean(false);\n            final CountDownLatch removedLatch = new CountDownLatch(1);\n            \n            Watcher watcher1 = new BooleanWatcher(path, removedFlag, EventType.DataWatchRemoved);            \n            Watcher watcher2 = new CountDownWatcher(path, removedLatch, EventType.ChildWatchRemoved);                        \n                        \n            client.checkExists().usingWatcher(watcher1).forPath(path);\n            client.getChildren().usingWatcher(watcher2).forPath(path);\n            \n            client.watches().removeAll().ofType(WatcherType.Children).forPath(path);\n            \n            assertTrue(timing.awaitLatch(removedLatch), \"Timed out waiting for watch removal\");\n            assertEquals(removedFlag.get(), false);\n        }\n        finally\n        {\n            CloseableUtils.closeQuietly(client);\n        }\n    }     \n","date":"2020-10-20 21:18:25","endLine":379,"groupId":"1078","id":4,"instanceNumber":2,"isCurCommit":1,"methodName":"testRemoveAllChildWatches","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-curator-10-0.7/blobInfo/CC_OUT/blobs/30/526506433fc4388fb9e7ed3cfaef4570c915c0.src","preCode":"    public void testRemoveAllChildWatches() throws Exception\n    {       \n        Timing timing = new Timing();\n        CuratorFramework client = CuratorFrameworkFactory.builder().\n                connectString(server.getConnectString()).\n                retryPolicy(new RetryOneTime(1)).\n                build();\n        try\n        {\n            client.start();\n            \n            final String path = \"/\";\n            final AtomicBoolean removedFlag = new AtomicBoolean(false);\n            final CountDownLatch removedLatch = new CountDownLatch(1);\n            \n            Watcher watcher1 = new BooleanWatcher(path, removedFlag, EventType.DataWatchRemoved);            \n            Watcher watcher2 = new CountDownWatcher(path, removedLatch, EventType.ChildWatchRemoved);                        \n                        \n            client.checkExists().usingWatcher(watcher1).forPath(path);\n            client.getChildren().usingWatcher(watcher2).forPath(path);\n            \n            client.watches().removeAll().ofType(WatcherType.Children).forPath(path);\n            \n            Assert.assertTrue(timing.awaitLatch(removedLatch), \"Timed out waiting for watch removal\");\n            Assert.assertEquals(removedFlag.get(), false);\n        }\n        finally\n        {\n            CloseableUtils.closeQuietly(client);\n        }\n    }     \n","realPath":"curator-framework/src/test/java/org/apache/curator/framework/imps/TestWatchesBuilder.java","repoName":"curator","snippetEndLine":0,"snippetStartLine":0,"startLine":349,"status":"M"}],"commitId":"7a148288603ae5db0c232142f7dc07d43e01bea3","commitMessage":"@@@CURATOR-582: Migrate to jUnit 5.6 (#372)\n\n","date":"2020-10-20 21:18:25","modifiedFileCount":"125","status":"M","submitter":"Tam?s P?nzes"}]
