[{"authorTime":"2021-05-04 02:50:45","codes":[{"authorDate":"2021-05-07 13:25:23","commitOrder":2,"curCode":"  public KillSupervisors(\n      DruidCoordinatorConfig config,\n      MetadataSupervisorManager metadataSupervisorManager\n  )\n  {\n    this.metadataSupervisorManager = metadataSupervisorManager;\n    this.period = config.getCoordinatorSupervisorKillPeriod().getMillis();\n    Preconditions.checkArgument(\n        this.period >= config.getCoordinatorMetadataStoreManagementPeriod().getMillis(),\n        \"Coordinator supervisor kill period must be >= druid.coordinator.period.metadataStoreManagementPeriod\"\n    );\n    this.retainDuration = config.getCoordinatorSupervisorKillDurationToRetain().getMillis();\n    Preconditions.checkArgument(this.retainDuration >= 0, \"Coordinator supervisor kill retainDuration must be >= 0\");\n    log.debug(\n        \"Supervisor Kill Task scheduling enabled with period [%s], retainDuration [%s]\",\n        this.period,\n        this.retainDuration\n    );\n  }\n","date":"2021-05-07 13:25:23","endLine":63,"groupId":"21955","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"KillSupervisors","params":"(DruidCoordinatorConfigconfig@MetadataSupervisorManagermetadataSupervisorManager)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-druid-10-0.7/blobInfo/CC_OUT/blobs/a1/c2a3f283267532e7d3d59e1089a6ccaee2924c.src","preCode":"  public KillSupervisors(\n      DruidCoordinatorConfig config,\n      MetadataSupervisorManager metadataSupervisorManager\n  )\n  {\n    this.metadataSupervisorManager = metadataSupervisorManager;\n    this.period = config.getCoordinatorSupervisorKillPeriod().getMillis();\n    Preconditions.checkArgument(\n        this.period >= config.getCoordinatorMetadataStoreManagementPeriod().getMillis(),\n        \"Coordinator supervisor kill period must be >= druid.coordinator.period.metadataStoreManagementPeriod\"\n    );\n    this.retainDuration = config.getCoordinatorSupervisorKillDurationToRetain().getMillis();\n    Preconditions.checkArgument(this.retainDuration >= 0, \"Coordinator supervisor kill retainDuration must be >= 0\");\n    log.debug(\n        \"Supervisor Kill Task scheduling enabled with period [%s], retainDuration [%s]\",\n        this.period,\n        this.retainDuration\n    );\n  }\n","realPath":"server/src/main/java/org/apache/druid/server/coordinator/duty/KillSupervisors.java","repoName":"druid","snippetEndLine":0,"snippetStartLine":0,"startLine":45,"status":"B"},{"authorDate":"2021-05-04 02:50:45","commitOrder":2,"curCode":"  public KillRules(\n      DruidCoordinatorConfig config\n  )\n  {\n    this.period = config.getCoordinatorRuleKillPeriod().getMillis();\n    Preconditions.checkArgument(\n        this.period >= config.getCoordinatorMetadataStoreManagementPeriod().getMillis(),\n        \"coordinator rule kill period must be >= druid.coordinator.period.metadataStoreManagementPeriod\"\n    );\n    this.retainDuration = config.getCoordinatorRuleKillDurationToRetain().getMillis();\n    Preconditions.checkArgument(this.retainDuration >= 0, \"coordinator rule kill retainDuration must be >= 0\");\n    log.debug(\n        \"Rule Kill Task scheduling enabled with period [%s], retainDuration [%s]\",\n        this.period,\n        this.retainDuration\n    );\n  }\n","date":"2021-05-04 02:50:45","endLine":55,"groupId":"21955","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"KillRules","params":"(DruidCoordinatorConfigconfig)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-druid-10-0.7/blobInfo/CC_OUT/blobs/eb/4f0186cdd4b269d889b187f2fedb3072360cb1.src","preCode":"  public KillRules(\n      DruidCoordinatorConfig config\n  )\n  {\n    this.period = config.getCoordinatorRuleKillPeriod().getMillis();\n    Preconditions.checkArgument(\n        this.period >= config.getCoordinatorMetadataStoreManagementPeriod().getMillis(),\n        \"coordinator rule kill period must be >= druid.coordinator.period.metadataStoreManagementPeriod\"\n    );\n    this.retainDuration = config.getCoordinatorRuleKillDurationToRetain().getMillis();\n    Preconditions.checkArgument(this.retainDuration >= 0, \"coordinator rule kill retainDuration must be >= 0\");\n    log.debug(\n        \"Rule Kill Task scheduling enabled with period [%s], retainDuration [%s]\",\n        this.period,\n        this.retainDuration\n    );\n  }\n","realPath":"server/src/main/java/org/apache/druid/server/coordinator/duty/KillRules.java","repoName":"druid","snippetEndLine":0,"snippetStartLine":0,"startLine":39,"status":"NB"}],"commitId":"d73f72e50892fe0b7450d8d4bf5678c3f8270cfe","commitMessage":"@@@Add feature to automatically remove supervisor based on retention period (#11200)\n\n* add auto clean up\n\n* add test\n\n* add test\n\n* fix test\n\n* Address comments\n\n* Address comments","date":"2021-05-07 13:25:23","modifiedFileCount":"14","status":"M","submitter":"Maytas Monsereenusorn"},{"authorTime":"2021-05-11 16:22:33","codes":[{"authorDate":"2021-05-11 16:22:33","commitOrder":3,"curCode":"  public KillSupervisors(\n      DruidCoordinatorConfig config,\n      MetadataSupervisorManager metadataSupervisorManager\n  )\n  {\n    this.metadataSupervisorManager = metadataSupervisorManager;\n    this.period = config.getCoordinatorSupervisorKillPeriod().getMillis();\n    Preconditions.checkArgument(\n        this.period >= config.getCoordinatorMetadataStoreManagementPeriod().getMillis(),\n        \"Coordinator supervisor kill period must be >= druid.coordinator.period.metadataStoreManagementPeriod\"\n    );\n    this.retainDuration = config.getCoordinatorSupervisorKillDurationToRetain().getMillis();\n    Preconditions.checkArgument(this.retainDuration >= 0, \"Coordinator supervisor kill retainDuration must be >= 0\");\n    Preconditions.checkArgument(this.retainDuration < System.currentTimeMillis(), \"Coordinator supervisor kill retainDuration cannot be greater than current time in ms\");\n    log.debug(\n        \"Supervisor Kill Task scheduling enabled with period [%s], retainDuration [%s]\",\n        this.period,\n        this.retainDuration\n    );\n  }\n","date":"2021-05-11 16:22:33","endLine":64,"groupId":"101157","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"KillSupervisors","params":"(DruidCoordinatorConfigconfig@MetadataSupervisorManagermetadataSupervisorManager)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-druid-10-0.7/blobInfo/CC_OUT/blobs/8a/0b484f3eaa19b99cea6258e2e4ed325b57c24f.src","preCode":"  public KillSupervisors(\n      DruidCoordinatorConfig config,\n      MetadataSupervisorManager metadataSupervisorManager\n  )\n  {\n    this.metadataSupervisorManager = metadataSupervisorManager;\n    this.period = config.getCoordinatorSupervisorKillPeriod().getMillis();\n    Preconditions.checkArgument(\n        this.period >= config.getCoordinatorMetadataStoreManagementPeriod().getMillis(),\n        \"Coordinator supervisor kill period must be >= druid.coordinator.period.metadataStoreManagementPeriod\"\n    );\n    this.retainDuration = config.getCoordinatorSupervisorKillDurationToRetain().getMillis();\n    Preconditions.checkArgument(this.retainDuration >= 0, \"Coordinator supervisor kill retainDuration must be >= 0\");\n    log.debug(\n        \"Supervisor Kill Task scheduling enabled with period [%s], retainDuration [%s]\",\n        this.period,\n        this.retainDuration\n    );\n  }\n","realPath":"server/src/main/java/org/apache/druid/server/coordinator/duty/KillSupervisors.java","repoName":"druid","snippetEndLine":0,"snippetStartLine":0,"startLine":45,"status":"M"},{"authorDate":"2021-05-11 16:22:33","commitOrder":3,"curCode":"  public KillRules(\n      DruidCoordinatorConfig config\n  )\n  {\n    this.period = config.getCoordinatorRuleKillPeriod().getMillis();\n    Preconditions.checkArgument(\n        this.period >= config.getCoordinatorMetadataStoreManagementPeriod().getMillis(),\n        \"coordinator rule kill period must be >= druid.coordinator.period.metadataStoreManagementPeriod\"\n    );\n    this.retainDuration = config.getCoordinatorRuleKillDurationToRetain().getMillis();\n    Preconditions.checkArgument(this.retainDuration >= 0, \"coordinator rule kill retainDuration must be >= 0\");\n    Preconditions.checkArgument(this.retainDuration < System.currentTimeMillis(), \"Coordinator rule kill retainDuration cannot be greater than current time in ms\");\n    log.debug(\n        \"Rule Kill Task scheduling enabled with period [%s], retainDuration [%s]\",\n        this.period,\n        this.retainDuration\n    );\n  }\n","date":"2021-05-11 16:22:33","endLine":56,"groupId":"101157","id":4,"instanceNumber":2,"isCurCommit":1,"methodName":"KillRules","params":"(DruidCoordinatorConfigconfig)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-druid-10-0.7/blobInfo/CC_OUT/blobs/50/b1740e86436efa12502248da7714ae48496b3f.src","preCode":"  public KillRules(\n      DruidCoordinatorConfig config\n  )\n  {\n    this.period = config.getCoordinatorRuleKillPeriod().getMillis();\n    Preconditions.checkArgument(\n        this.period >= config.getCoordinatorMetadataStoreManagementPeriod().getMillis(),\n        \"coordinator rule kill period must be >= druid.coordinator.period.metadataStoreManagementPeriod\"\n    );\n    this.retainDuration = config.getCoordinatorRuleKillDurationToRetain().getMillis();\n    Preconditions.checkArgument(this.retainDuration >= 0, \"coordinator rule kill retainDuration must be >= 0\");\n    log.debug(\n        \"Rule Kill Task scheduling enabled with period [%s], retainDuration [%s]\",\n        this.period,\n        this.retainDuration\n    );\n  }\n","realPath":"server/src/main/java/org/apache/druid/server/coordinator/duty/KillRules.java","repoName":"druid","snippetEndLine":0,"snippetStartLine":0,"startLine":39,"status":"M"}],"commitId":"4326e699bd3e146e1899f014e8765c52241f3cd3","commitMessage":"@@@Add feature to automatically remove datasource metadata based on retention period (#11227)\n\n* add auto clean up datasource metadata\n\n* add test\n\n* fix checkstyle\n\n* add comments\n\n* fix error\n\n* address comments\n\n* Address comments\n\n* fix test\n\n* fix test\n\n* fix typo\n\n* add comment\n\n* fix test\n\n* fix test","date":"2021-05-11 16:22:33","modifiedFileCount":"22","status":"M","submitter":"Maytas Monsereenusorn"}]
