[{"authorTime":"2018-08-31 00:56:26","codes":[{"authorDate":"2018-08-31 00:56:26","commitOrder":1,"curCode":"  public Response specGet(@PathParam(\"id\") final String id)\n  {\n    return asLeaderWithSupervisorManager(\n        new Function<SupervisorManager, Response>()\n        {\n          @Override\n          public Response apply(SupervisorManager manager)\n          {\n            Optional<SupervisorSpec> spec = manager.getSupervisorSpec(id);\n            if (!spec.isPresent()) {\n              return Response.status(Response.Status.NOT_FOUND)\n                             .entity(ImmutableMap.of(\"error\", StringUtils.format(\"[%s] does not exist\", id)))\n                             .build();\n            }\n\n            return Response.ok(spec.get()).build();\n          }\n        }\n    );\n  }\n","date":"2018-08-31 00:56:26","endLine":164,"groupId":"7512","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"specGet","params":"(@PathParam(\"id\")finalStringid)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-druid-10-0.7/blobInfo/CC_OUT/blobs/9b/e9c9fb3b57ae05a4f6f403303a749906a44b3a.src","preCode":"  public Response specGet(@PathParam(\"id\") final String id)\n  {\n    return asLeaderWithSupervisorManager(\n        new Function<SupervisorManager, Response>()\n        {\n          @Override\n          public Response apply(SupervisorManager manager)\n          {\n            Optional<SupervisorSpec> spec = manager.getSupervisorSpec(id);\n            if (!spec.isPresent()) {\n              return Response.status(Response.Status.NOT_FOUND)\n                             .entity(ImmutableMap.of(\"error\", StringUtils.format(\"[%s] does not exist\", id)))\n                             .build();\n            }\n\n            return Response.ok(spec.get()).build();\n          }\n        }\n    );\n  }\n","realPath":"indexing-service/src/main/java/org/apache/druid/indexing/overlord/supervisor/SupervisorResource.java","repoName":"druid","snippetEndLine":0,"snippetStartLine":0,"startLine":145,"status":"B"},{"authorDate":"2018-08-31 00:56:26","commitOrder":1,"curCode":"  public Response specGetStatus(@PathParam(\"id\") final String id)\n  {\n    return asLeaderWithSupervisorManager(\n        new Function<SupervisorManager, Response>()\n        {\n          @Override\n          public Response apply(SupervisorManager manager)\n          {\n            Optional<SupervisorReport> spec = manager.getSupervisorStatus(id);\n            if (!spec.isPresent()) {\n              return Response.status(Response.Status.NOT_FOUND)\n                             .entity(ImmutableMap.of(\"error\", StringUtils.format(\"[%s] does not exist\", id)))\n                             .build();\n            }\n\n            return Response.ok(spec.get()).build();\n          }\n        }\n    );\n  }\n","date":"2018-08-31 00:56:26","endLine":189,"groupId":"7512","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"specGetStatus","params":"(@PathParam(\"id\")finalStringid)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-druid-10-0.7/blobInfo/CC_OUT/blobs/9b/e9c9fb3b57ae05a4f6f403303a749906a44b3a.src","preCode":"  public Response specGetStatus(@PathParam(\"id\") final String id)\n  {\n    return asLeaderWithSupervisorManager(\n        new Function<SupervisorManager, Response>()\n        {\n          @Override\n          public Response apply(SupervisorManager manager)\n          {\n            Optional<SupervisorReport> spec = manager.getSupervisorStatus(id);\n            if (!spec.isPresent()) {\n              return Response.status(Response.Status.NOT_FOUND)\n                             .entity(ImmutableMap.of(\"error\", StringUtils.format(\"[%s] does not exist\", id)))\n                             .build();\n            }\n\n            return Response.ok(spec.get()).build();\n          }\n        }\n    );\n  }\n","realPath":"indexing-service/src/main/java/org/apache/druid/indexing/overlord/supervisor/SupervisorResource.java","repoName":"druid","snippetEndLine":0,"snippetStartLine":0,"startLine":170,"status":"B"}],"commitId":"431d3d8497f9079857c3baa7ae7ab4cb44a22355","commitMessage":"@@@Rename io.druid to org.apache.druid. (#6266)\n\n* Rename io.druid to org.apache.druid.\n\n* Fix META-INF files and remove some benchmark results.\n\n* MonitorsConfig update for metrics package migration.\n\n* Reorder some dimensions in inner queries for some reason.\n\n* Fix protobuf tests.\n","date":"2018-08-31 00:56:26","modifiedFileCount":"5","status":"B","submitter":"Gian Merlino"},{"authorTime":"2018-09-14 05:42:18","codes":[{"authorDate":"2018-09-14 05:42:18","commitOrder":2,"curCode":"  public Response specGet(@PathParam(\"id\") final String id)\n  {\n    return asLeaderWithSupervisorManager(\n        manager -> {\n          Optional<SupervisorSpec> spec = manager.getSupervisorSpec(id);\n          if (!spec.isPresent()) {\n            return Response.status(Response.Status.NOT_FOUND)\n                           .entity(ImmutableMap.of(\"error\", StringUtils.format(\"[%s] does not exist\", id)))\n                           .build();\n          }\n\n          return Response.ok(spec.get()).build();\n        }\n    );\n  }\n","date":"2018-09-14 05:42:18","endLine":167,"groupId":"104675","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"specGet","params":"(@PathParam(\"id\")finalStringid)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-druid-10-0.7/blobInfo/CC_OUT/blobs/d3/e19bbb4aba661d71103705136f6d1553f0ee31.src","preCode":"  public Response specGet(@PathParam(\"id\") final String id)\n  {\n    return asLeaderWithSupervisorManager(\n        new Function<SupervisorManager, Response>()\n        {\n          @Override\n          public Response apply(SupervisorManager manager)\n          {\n            Optional<SupervisorSpec> spec = manager.getSupervisorSpec(id);\n            if (!spec.isPresent()) {\n              return Response.status(Response.Status.NOT_FOUND)\n                             .entity(ImmutableMap.of(\"error\", StringUtils.format(\"[%s] does not exist\", id)))\n                             .build();\n            }\n\n            return Response.ok(spec.get()).build();\n          }\n        }\n    );\n  }\n","realPath":"indexing-service/src/main/java/org/apache/druid/indexing/overlord/supervisor/SupervisorResource.java","repoName":"druid","snippetEndLine":0,"snippetStartLine":0,"startLine":153,"status":"M"},{"authorDate":"2018-09-14 05:42:18","commitOrder":2,"curCode":"  public Response specGetStatus(@PathParam(\"id\") final String id)\n  {\n    return asLeaderWithSupervisorManager(\n        manager -> {\n          Optional<SupervisorReport> spec = manager.getSupervisorStatus(id);\n          if (!spec.isPresent()) {\n            return Response.status(Response.Status.NOT_FOUND)\n                           .entity(ImmutableMap.of(\"error\", StringUtils.format(\"[%s] does not exist\", id)))\n                           .build();\n          }\n\n          return Response.ok(spec.get()).build();\n        }\n    );\n  }\n","date":"2018-09-14 05:42:18","endLine":187,"groupId":"104675","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"specGetStatus","params":"(@PathParam(\"id\")finalStringid)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-druid-10-0.7/blobInfo/CC_OUT/blobs/d3/e19bbb4aba661d71103705136f6d1553f0ee31.src","preCode":"  public Response specGetStatus(@PathParam(\"id\") final String id)\n  {\n    return asLeaderWithSupervisorManager(\n        new Function<SupervisorManager, Response>()\n        {\n          @Override\n          public Response apply(SupervisorManager manager)\n          {\n            Optional<SupervisorReport> spec = manager.getSupervisorStatus(id);\n            if (!spec.isPresent()) {\n              return Response.status(Response.Status.NOT_FOUND)\n                             .entity(ImmutableMap.of(\"error\", StringUtils.format(\"[%s] does not exist\", id)))\n                             .build();\n            }\n\n            return Response.ok(spec.get()).build();\n          }\n        }\n    );\n  }\n","realPath":"indexing-service/src/main/java/org/apache/druid/indexing/overlord/supervisor/SupervisorResource.java","repoName":"druid","snippetEndLine":0,"snippetStartLine":0,"startLine":173,"status":"M"}],"commitId":"91a37c692dd8db34d6e4323cd61dba38a00145b1","commitMessage":"@@@'suspend' and 'resume' support for supervisors (kafka indexing service.  materialized views) (#6234)\n\n* 'suspend' and 'resume' support for kafka indexing service\nchanges:\n* introduces `SuspendableSupervisorSpec` interface to describe supervisors which support suspend/resume functionality controlled through the `SupervisorManager`.  which will gracefully shutdown the supervisor and it's tasks.  update it's `SupervisorSpec` with either a suspended or running state.  and update with the toggled spec. Spec updates are provided by `SuspendableSupervisorSpec.createSuspendedSpec` and `SuspendableSupervisorSpec.createRunningSpec` respectively.\n* `KafkaSupervisorSpec` extends `SuspendableSupervisorSpec` and now supports suspend/resume functionality. The difference in behavior between 'running' and 'suspended' state is whether the supervisor will attempt to ensure that indexing tasks are or are not running respectively. Behavior is identical otherwise.\n* `SupervisorResource` now provides `/druid/indexer/v1/supervisor/{id}/suspend` and `/druid/indexer/v1/supervisor/{id}/resume` which are used to suspend/resume suspendable supervisors\n* Deprecated `/druid/indexer/v1/supervisor/{id}/shutdown` and moved it's functionality to `/druid/indexer/v1/supervisor/{id}/terminate` since 'shutdown' is ambiguous verbage for something that effectively stops a supervisor forever\n* Added ability to get all supervisor specs from `/druid/indexer/v1/supervisor` by supplying the 'full' query parameter `/druid/indexer/v1/supervisor?full` which will return a list of json objects of the form `{\"id\":<id>.  \"spec\":<SupervisorSpec>}`\n* Updated overlord console ui to enable suspend/resume.  and changed 'shutdown' to 'terminate'\n\n* move overlord console status to own column in supervisor table so does not look like garbage\n\n* spacing\n\n* padding\n\n* other kind of spacing\n\n* fix rebase fail\n\n* fix more better\n\n* all supervisors now suspendable.  updated materialized view supervisor to support suspend.  more tests\n\n* fix log\n","date":"2018-09-14 05:42:18","modifiedFileCount":"16","status":"M","submitter":"Clint Wylie"}]
