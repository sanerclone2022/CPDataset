[{"authorTime":"2021-02-06 04:56:55","codes":[{"authorDate":"2019-02-24 12:10:31","commitOrder":3,"curCode":"  public void testCountStarOnCommonTableExpression() throws Exception\n  {\n    testQuery(\n        \"WITH beep (dim1_firstchar) AS (SELECT SUBSTRING(dim1, 1, 1) FROM foo WHERE dim2 = 'a')\\n\"\n        + \"SELECT COUNT(*) FROM beep WHERE dim1_firstchar <> 'z'\",\n        ImmutableList.of(\n            Druids.newTimeseriesQueryBuilder()\n                  .dataSource(CalciteTests.DATASOURCE1)\n                  .intervals(querySegmentSpec(Filtration.eternity()))\n                  .filters(and(\n                      selector(\"dim2\", \"a\", null),\n                      not(selector(\"dim1\", \"z\", new SubstringDimExtractionFn(0, 1)))\n                  ))\n                  .granularity(Granularities.ALL)\n                  .aggregators(aggregators(new CountAggregatorFactory(\"a0\")))\n                  .context(TIMESERIES_CONTEXT_DEFAULT)\n                  .build()\n        ),\n        ImmutableList.of(\n            new Object[]{2L}\n        )\n    );\n  }\n","date":"2019-02-24 12:10:31","endLine":2084,"groupId":"7860","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testCountStarOnCommonTableExpression","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-druid-10-0.7/blobInfo/CC_OUT/blobs/ad/6030fb8d73521776662c2a97e0f873c4ad7d0f.src","preCode":"  public void testCountStarOnCommonTableExpression() throws Exception\n  {\n    testQuery(\n        \"WITH beep (dim1_firstchar) AS (SELECT SUBSTRING(dim1, 1, 1) FROM foo WHERE dim2 = 'a')\\n\"\n        + \"SELECT COUNT(*) FROM beep WHERE dim1_firstchar <> 'z'\",\n        ImmutableList.of(\n            Druids.newTimeseriesQueryBuilder()\n                  .dataSource(CalciteTests.DATASOURCE1)\n                  .intervals(querySegmentSpec(Filtration.eternity()))\n                  .filters(and(\n                      selector(\"dim2\", \"a\", null),\n                      not(selector(\"dim1\", \"z\", new SubstringDimExtractionFn(0, 1)))\n                  ))\n                  .granularity(Granularities.ALL)\n                  .aggregators(aggregators(new CountAggregatorFactory(\"a0\")))\n                  .context(TIMESERIES_CONTEXT_DEFAULT)\n                  .build()\n        ),\n        ImmutableList.of(\n            new Object[]{2L}\n        )\n    );\n  }\n","realPath":"sql/src/test/java/org/apache/druid/sql/calcite/CalciteQueryTest.java","repoName":"druid","snippetEndLine":0,"snippetStartLine":0,"startLine":2062,"status":"NB"},{"authorDate":"2021-02-06 04:56:55","commitOrder":3,"curCode":"  public void testConfusedView() throws Exception\n  {\n    testQuery(\n        \"SELECT COUNT(*) FROM view.dview as druid WHERE druid.numfoo <> 'z'\",\n        ImmutableList.of(\n            Druids.newTimeseriesQueryBuilder()\n                  .dataSource(CalciteTests.DATASOURCE1)\n                  .intervals(querySegmentSpec(Filtration.eternity()))\n                  .filters(and(\n                      selector(\"dim2\", \"a\", null),\n                      not(selector(\"dim1\", \"z\", new SubstringDimExtractionFn(0, 1)))\n                  ))\n                  .granularity(Granularities.ALL)\n                  .aggregators(aggregators(new CountAggregatorFactory(\"a0\")))\n                  .context(TIMESERIES_CONTEXT_DEFAULT)\n                  .build()\n        ),\n        ImmutableList.of(\n            new Object[]{2L}\n        )\n    );\n  }\n","date":"2021-02-06 04:56:55","endLine":5298,"groupId":"7860","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testConfusedView","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-druid-10-0.7/blobInfo/CC_OUT/blobs/f4/a941b6de0c38e747fd6a1e77570d64e04db2c2.src","preCode":"  public void testConfusedView() throws Exception\n  {\n    testQuery(\n        \"SELECT COUNT(*) FROM view.dview as druid WHERE druid.numfoo <> 'z'\",\n        ImmutableList.of(\n            Druids.newTimeseriesQueryBuilder()\n                  .dataSource(CalciteTests.DATASOURCE1)\n                  .intervals(querySegmentSpec(Filtration.eternity()))\n                  .filters(and(\n                      selector(\"dim2\", \"a\", null),\n                      not(selector(\"dim1\", \"z\", new SubstringDimExtractionFn(0, 1)))\n                  ))\n                  .granularity(Granularities.ALL)\n                  .aggregators(aggregators(new CountAggregatorFactory(\"a0\")))\n                  .context(TIMESERIES_CONTEXT_DEFAULT)\n                  .build()\n        ),\n        ImmutableList.of(\n            new Object[]{2L}\n        )\n    );\n  }\n","realPath":"sql/src/test/java/org/apache/druid/sql/calcite/CalciteQueryTest.java","repoName":"druid","snippetEndLine":0,"snippetStartLine":0,"startLine":5277,"status":"B"}],"commitId":"fe30f4b4144b782075db2c7e068f2bd9565a6cfd","commitMessage":"@@@refactor sql lifecycle.  druid planner.  views.  and view permissions (#10812)\n\n* before i leaped i should've seen.  the view from halfway down\n\n* fixes\n\n* fixes.  more test\n\n* rename\n\n* fix style\n\n* further refactoring\n\n* review stuffs\n\n* rename\n\n* more javadoc and comments","date":"2021-02-06 04:56:55","modifiedFileCount":"29","status":"M","submitter":"Clint Wylie"},{"authorTime":"2021-05-11 01:13:37","codes":[{"authorDate":"2021-05-11 01:13:37","commitOrder":4,"curCode":"  public void testCountStarOnCommonTableExpression() throws Exception\n  {\n    testQuery(\n        \"WITH beep (dim1_firstchar) AS (SELECT SUBSTRING(dim1, 1, 1) FROM foo WHERE dim2 = 'a')\\n\"\n        + \"SELECT COUNT(*) FROM beep WHERE dim1_firstchar <> 'z'\",\n        ImmutableList.of(\n            Druids.newTimeseriesQueryBuilder()\n                  .dataSource(CalciteTests.DATASOURCE1)\n                  .intervals(querySegmentSpec(Filtration.eternity()))\n                  .filters(and(\n                      selector(\"dim2\", \"a\", null),\n                      not(selector(\"dim1\", \"z\", new SubstringDimExtractionFn(0, 1)))\n                  ))\n                  .granularity(Granularities.ALL)\n                  .aggregators(aggregators(new CountAggregatorFactory(\"a0\")))\n                  .context(QUERY_CONTEXT_DEFAULT)\n                  .build()\n        ),\n        ImmutableList.of(\n            new Object[]{2L}\n        )\n    );\n  }\n","date":"2021-05-11 01:13:37","endLine":5683,"groupId":"101697","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testCountStarOnCommonTableExpression","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-druid-10-0.7/blobInfo/CC_OUT/blobs/1e/fd99b05ebe6da94fffaa752ce8de0e97ef485f.src","preCode":"  public void testCountStarOnCommonTableExpression() throws Exception\n  {\n    testQuery(\n        \"WITH beep (dim1_firstchar) AS (SELECT SUBSTRING(dim1, 1, 1) FROM foo WHERE dim2 = 'a')\\n\"\n        + \"SELECT COUNT(*) FROM beep WHERE dim1_firstchar <> 'z'\",\n        ImmutableList.of(\n            Druids.newTimeseriesQueryBuilder()\n                  .dataSource(CalciteTests.DATASOURCE1)\n                  .intervals(querySegmentSpec(Filtration.eternity()))\n                  .filters(and(\n                      selector(\"dim2\", \"a\", null),\n                      not(selector(\"dim1\", \"z\", new SubstringDimExtractionFn(0, 1)))\n                  ))\n                  .granularity(Granularities.ALL)\n                  .aggregators(aggregators(new CountAggregatorFactory(\"a0\")))\n                  .context(TIMESERIES_CONTEXT_DEFAULT)\n                  .build()\n        ),\n        ImmutableList.of(\n            new Object[]{2L}\n        )\n    );\n  }\n","realPath":"sql/src/test/java/org/apache/druid/sql/calcite/CalciteQueryTest.java","repoName":"druid","snippetEndLine":0,"snippetStartLine":0,"startLine":5661,"status":"M"},{"authorDate":"2021-05-11 01:13:37","commitOrder":4,"curCode":"  public void testConfusedView() throws Exception\n  {\n    testQuery(\n        \"SELECT COUNT(*) FROM view.dview as druid WHERE druid.numfoo <> 'z'\",\n        ImmutableList.of(\n            Druids.newTimeseriesQueryBuilder()\n                  .dataSource(CalciteTests.DATASOURCE1)\n                  .intervals(querySegmentSpec(Filtration.eternity()))\n                  .filters(and(\n                      selector(\"dim2\", \"a\", null),\n                      not(selector(\"dim1\", \"z\", new SubstringDimExtractionFn(0, 1)))\n                  ))\n                  .granularity(Granularities.ALL)\n                  .aggregators(aggregators(new CountAggregatorFactory(\"a0\")))\n                  .context(QUERY_CONTEXT_DEFAULT)\n                  .build()\n        ),\n        ImmutableList.of(\n            new Object[]{2L}\n        )\n    );\n  }\n","date":"2021-05-11 01:13:37","endLine":5731,"groupId":"101697","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testConfusedView","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-druid-10-0.7/blobInfo/CC_OUT/blobs/1e/fd99b05ebe6da94fffaa752ce8de0e97ef485f.src","preCode":"  public void testConfusedView() throws Exception\n  {\n    testQuery(\n        \"SELECT COUNT(*) FROM view.dview as druid WHERE druid.numfoo <> 'z'\",\n        ImmutableList.of(\n            Druids.newTimeseriesQueryBuilder()\n                  .dataSource(CalciteTests.DATASOURCE1)\n                  .intervals(querySegmentSpec(Filtration.eternity()))\n                  .filters(and(\n                      selector(\"dim2\", \"a\", null),\n                      not(selector(\"dim1\", \"z\", new SubstringDimExtractionFn(0, 1)))\n                  ))\n                  .granularity(Granularities.ALL)\n                  .aggregators(aggregators(new CountAggregatorFactory(\"a0\")))\n                  .context(TIMESERIES_CONTEXT_DEFAULT)\n                  .build()\n        ),\n        ImmutableList.of(\n            new Object[]{2L}\n        )\n    );\n  }\n","realPath":"sql/src/test/java/org/apache/druid/sql/calcite/CalciteQueryTest.java","repoName":"druid","snippetEndLine":0,"snippetStartLine":0,"startLine":5710,"status":"M"}],"commitId":"691d7a1d548909951468005348a603380f4d6d74","commitMessage":"@@@SQL timeseries no longer skip empty buckets with all granularity (#11188)\n\n* SQL timeseries no longer skip empty buckets with all granularity\n\n* add comment.  fix tests\n\n* the ol switcheroo\n\n* revert unintended change\n\n* docs and more tests\n\n* style\n\n* make checkstyle happy\n\n* docs fixes and more tests\n\n* add docs.  tests for array_agg\n\n* fixes\n\n* oops\n\n* doc stuffs\n\n* fix compile.  match doc style","date":"2021-05-11 01:13:37","modifiedFileCount":"16","status":"M","submitter":"Clint Wylie"}]
