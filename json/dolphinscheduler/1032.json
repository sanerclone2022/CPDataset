[{"authorTime":"2021-03-03 08:52:45","codes":[{"authorDate":"2021-03-03 08:52:45","commitOrder":1,"curCode":"    public void testBasicSuccess() throws Exception {\n        testBasicInit();\n        ProcessInstance dependentProcessInstance =\n                getProcessInstanceForFindLastRunningProcess(200, 2, ExecutionStatus.FAILURE);\n        \r\n        Mockito.when(processService\n                .findLastRunningProcess(Mockito.eq(2), Mockito.any(), Mockito.any()))\n                .thenReturn(dependentProcessInstance);\n\n        \r\n        Mockito.when(processService\n                .findValidTaskListByProcessId(200))\n                .thenReturn(Stream.of(\n                        getTaskInstanceForValidTaskList(2000, ExecutionStatus.SUCCESS, \"A\", dependentProcessInstance),\n                        getTaskInstanceForValidTaskList(2000, ExecutionStatus.FAILURE, \"B\", dependentProcessInstance)\n                ).collect(Collectors.toList()));\n\n        DependentTaskExecThread taskExecThread = new DependentTaskExecThread(taskInstance);\n        taskExecThread.call();\n        Assert.assertEquals(ExecutionStatus.SUCCESS, taskExecThread.getTaskInstance().getState());\n    }\n","date":"2021-03-03 08:52:45","endLine":154,"groupId":"2158","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testBasicSuccess","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dolphinscheduler-10-0.7/blobInfo/CC_OUT/blobs/48/a0750666787a6b82bcf7aa6bf30d2e98f8e0ec.src","preCode":"    public void testBasicSuccess() throws Exception {\n        testBasicInit();\n        ProcessInstance dependentProcessInstance =\n                getProcessInstanceForFindLastRunningProcess(200, 2, ExecutionStatus.FAILURE);\n        \r\n        Mockito.when(processService\n                .findLastRunningProcess(Mockito.eq(2), Mockito.any(), Mockito.any()))\n                .thenReturn(dependentProcessInstance);\n\n        \r\n        Mockito.when(processService\n                .findValidTaskListByProcessId(200))\n                .thenReturn(Stream.of(\n                        getTaskInstanceForValidTaskList(2000, ExecutionStatus.SUCCESS, \"A\", dependentProcessInstance),\n                        getTaskInstanceForValidTaskList(2000, ExecutionStatus.FAILURE, \"B\", dependentProcessInstance)\n                ).collect(Collectors.toList()));\n\n        DependentTaskExecThread taskExecThread = new DependentTaskExecThread(taskInstance);\n        taskExecThread.call();\n        Assert.assertEquals(ExecutionStatus.SUCCESS, taskExecThread.getTaskInstance().getState());\n    }\n","realPath":"dolphinscheduler-server/src/test/java/org/apache/dolphinscheduler/server/master/DependentTaskTest.java","repoName":"dolphinscheduler","snippetEndLine":0,"snippetStartLine":0,"startLine":134,"status":"B"},{"authorDate":"2021-03-03 08:52:45","commitOrder":1,"curCode":"    public void testBasicFailure() throws Exception {\n        testBasicInit();\n        ProcessInstance dependentProcessInstance =\n                getProcessInstanceForFindLastRunningProcess(200, 2, ExecutionStatus.SUCCESS);\n        \r\n        Mockito.when(processService\n                .findLastRunningProcess(Mockito.eq(2), Mockito.any(), Mockito.any()))\n                .thenReturn(dependentProcessInstance);\n\n        \r\n        Mockito.when(processService\n                .findValidTaskListByProcessId(200))\n                .thenReturn(Stream.of(\n                        getTaskInstanceForValidTaskList(2000, ExecutionStatus.FAILURE, \"A\", dependentProcessInstance),\n                        getTaskInstanceForValidTaskList(2000, ExecutionStatus.SUCCESS, \"B\", dependentProcessInstance)\n                ).collect(Collectors.toList()));\n\n        DependentTaskExecThread taskExecThread = new DependentTaskExecThread(taskInstance);\n        taskExecThread.call();\n        Assert.assertEquals(ExecutionStatus.FAILURE, taskExecThread.getTaskInstance().getState());\n    }\n","date":"2021-03-03 08:52:45","endLine":177,"groupId":"2159","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testBasicFailure","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dolphinscheduler-10-0.7/blobInfo/CC_OUT/blobs/48/a0750666787a6b82bcf7aa6bf30d2e98f8e0ec.src","preCode":"    public void testBasicFailure() throws Exception {\n        testBasicInit();\n        ProcessInstance dependentProcessInstance =\n                getProcessInstanceForFindLastRunningProcess(200, 2, ExecutionStatus.SUCCESS);\n        \r\n        Mockito.when(processService\n                .findLastRunningProcess(Mockito.eq(2), Mockito.any(), Mockito.any()))\n                .thenReturn(dependentProcessInstance);\n\n        \r\n        Mockito.when(processService\n                .findValidTaskListByProcessId(200))\n                .thenReturn(Stream.of(\n                        getTaskInstanceForValidTaskList(2000, ExecutionStatus.FAILURE, \"A\", dependentProcessInstance),\n                        getTaskInstanceForValidTaskList(2000, ExecutionStatus.SUCCESS, \"B\", dependentProcessInstance)\n                ).collect(Collectors.toList()));\n\n        DependentTaskExecThread taskExecThread = new DependentTaskExecThread(taskInstance);\n        taskExecThread.call();\n        Assert.assertEquals(ExecutionStatus.FAILURE, taskExecThread.getTaskInstance().getState());\n    }\n","realPath":"dolphinscheduler-server/src/test/java/org/apache/dolphinscheduler/server/master/DependentTaskTest.java","repoName":"dolphinscheduler","snippetEndLine":0,"snippetStartLine":0,"startLine":157,"status":"B"}],"commitId":"ccd8aaebab635174c0b8dccbd49f7415c43cd405","commitMessage":"@@@[Improvement][Server] Improve dependent task unit tests (#4911)\n\n","date":"2021-03-03 08:52:45","modifiedFileCount":"1","status":"B","submitter":"Shiwen Cheng"},{"authorTime":"2021-05-12 18:44:30","codes":[{"authorDate":"2021-05-12 18:44:30","commitOrder":2,"curCode":"    public void testBasicSuccess() {\n        testBasicInit();\n        ProcessInstance dependentProcessInstance =\n                getProcessInstanceForFindLastRunningProcess(200, ExecutionStatus.FAILURE);\n        \r\n        Mockito.when(processService\n                .findLastRunningProcess(Mockito.eq(2L), Mockito.any(), Mockito.any()))\n                .thenReturn(dependentProcessInstance);\n\n        \r\n        Mockito.when(processService\n                .findValidTaskListByProcessId(200))\n                .thenReturn(Stream.of(\n                        getTaskInstanceForValidTaskList(2000, ExecutionStatus.SUCCESS, \"A\", dependentProcessInstance),\n                        getTaskInstanceForValidTaskList(2000, ExecutionStatus.FAILURE, \"B\", dependentProcessInstance)\n                ).collect(Collectors.toList()));\n\n        DependentTaskExecThread taskExecThread = new DependentTaskExecThread(taskInstance);\n        taskExecThread.call();\n        Assert.assertEquals(ExecutionStatus.SUCCESS, taskExecThread.getTaskInstance().getState());\n    }\n","date":"2021-05-12 18:44:30","endLine":163,"groupId":"2158","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testBasicSuccess","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dolphinscheduler-10-0.7/blobInfo/CC_OUT/blobs/4f/80f5d36b6fd324a45d8f37ee4bd94a3cd33194.src","preCode":"    public void testBasicSuccess() throws Exception {\n        testBasicInit();\n        ProcessInstance dependentProcessInstance =\n                getProcessInstanceForFindLastRunningProcess(200, 2, ExecutionStatus.FAILURE);\n        \r\n        Mockito.when(processService\n                .findLastRunningProcess(Mockito.eq(2), Mockito.any(), Mockito.any()))\n                .thenReturn(dependentProcessInstance);\n\n        \r\n        Mockito.when(processService\n                .findValidTaskListByProcessId(200))\n                .thenReturn(Stream.of(\n                        getTaskInstanceForValidTaskList(2000, ExecutionStatus.SUCCESS, \"A\", dependentProcessInstance),\n                        getTaskInstanceForValidTaskList(2000, ExecutionStatus.FAILURE, \"B\", dependentProcessInstance)\n                ).collect(Collectors.toList()));\n\n        DependentTaskExecThread taskExecThread = new DependentTaskExecThread(taskInstance);\n        taskExecThread.call();\n        Assert.assertEquals(ExecutionStatus.SUCCESS, taskExecThread.getTaskInstance().getState());\n    }\n","realPath":"dolphinscheduler-server/src/test/java/org/apache/dolphinscheduler/server/master/DependentTaskTest.java","repoName":"dolphinscheduler","snippetEndLine":0,"snippetStartLine":0,"startLine":143,"status":"M"},{"authorDate":"2021-05-12 18:44:30","commitOrder":2,"curCode":"    public void testBasicFailure() {\n        testBasicInit();\n        ProcessInstance dependentProcessInstance =\n                getProcessInstanceForFindLastRunningProcess(200, ExecutionStatus.SUCCESS);\n        \r\n        Mockito.when(processService\n                .findLastRunningProcess(Mockito.eq(2L), Mockito.any(), Mockito.any()))\n                .thenReturn(dependentProcessInstance);\n\n        \r\n        Mockito.when(processService\n                .findValidTaskListByProcessId(200))\n                .thenReturn(Stream.of(\n                        getTaskInstanceForValidTaskList(2000, ExecutionStatus.FAILURE, \"A\", dependentProcessInstance),\n                        getTaskInstanceForValidTaskList(2000, ExecutionStatus.SUCCESS, \"B\", dependentProcessInstance)\n                ).collect(Collectors.toList()));\n\n        DependentTaskExecThread taskExecThread = new DependentTaskExecThread(taskInstance);\n        taskExecThread.call();\n        Assert.assertEquals(ExecutionStatus.FAILURE, taskExecThread.getTaskInstance().getState());\n    }\n","date":"2021-05-12 18:44:30","endLine":186,"groupId":"2159","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testBasicFailure","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dolphinscheduler-10-0.7/blobInfo/CC_OUT/blobs/4f/80f5d36b6fd324a45d8f37ee4bd94a3cd33194.src","preCode":"    public void testBasicFailure() throws Exception {\n        testBasicInit();\n        ProcessInstance dependentProcessInstance =\n                getProcessInstanceForFindLastRunningProcess(200, 2, ExecutionStatus.SUCCESS);\n        \r\n        Mockito.when(processService\n                .findLastRunningProcess(Mockito.eq(2), Mockito.any(), Mockito.any()))\n                .thenReturn(dependentProcessInstance);\n\n        \r\n        Mockito.when(processService\n                .findValidTaskListByProcessId(200))\n                .thenReturn(Stream.of(\n                        getTaskInstanceForValidTaskList(2000, ExecutionStatus.FAILURE, \"A\", dependentProcessInstance),\n                        getTaskInstanceForValidTaskList(2000, ExecutionStatus.SUCCESS, \"B\", dependentProcessInstance)\n                ).collect(Collectors.toList()));\n\n        DependentTaskExecThread taskExecThread = new DependentTaskExecThread(taskInstance);\n        taskExecThread.call();\n        Assert.assertEquals(ExecutionStatus.FAILURE, taskExecThread.getTaskInstance().getState());\n    }\n","realPath":"dolphinscheduler-server/src/test/java/org/apache/dolphinscheduler/server/master/DependentTaskTest.java","repoName":"dolphinscheduler","snippetEndLine":0,"snippetStartLine":0,"startLine":166,"status":"M"}],"commitId":"a3e5dfc146e2ca72e75ee5b270241cea5bd7a478","commitMessage":"@@@Merge pull request #5390 from apache/json_split\n\n[Feature-4417] Process definition json split","date":"2021-05-12 18:44:30","modifiedFileCount":"113","status":"M","submitter":"Kirs"},{"authorTime":"2021-09-06 16:57:02","codes":[{"authorDate":"2021-09-06 16:57:02","commitOrder":3,"curCode":"    public void testBasicSuccess() {\n        testBasicInit();\n        ProcessInstance dependentProcessInstance =\n                getProcessInstanceForFindLastRunningProcess(200, ExecutionStatus.FAILURE);\n        \r\n        Mockito.when(processService\n                .findLastRunningProcess(Mockito.eq(2L), Mockito.any(), Mockito.any()))\n                .thenReturn(dependentProcessInstance);\n\n        \r\n        Mockito.when(processService\n                .findValidTaskListByProcessId(200))\n                .thenReturn(Stream.of(\n                        getTaskInstanceForValidTaskList(2000, ExecutionStatus.SUCCESS, \"A\", dependentProcessInstance),\n                        getTaskInstanceForValidTaskList(2000, ExecutionStatus.FAILURE, \"B\", dependentProcessInstance)\n                ).collect(Collectors.toList()));\n\n    }\n","date":"2021-09-06 16:57:02","endLine":159,"groupId":"1032","id":5,"instanceNumber":1,"isCurCommit":1,"methodName":"testBasicSuccess","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dolphinscheduler-10-0.7/blobInfo/CC_OUT/blobs/9a/1861388d08b09773c19ae83f062a88c43572ee.src","preCode":"    public void testBasicSuccess() {\n        testBasicInit();\n        ProcessInstance dependentProcessInstance =\n                getProcessInstanceForFindLastRunningProcess(200, ExecutionStatus.FAILURE);\n        \r\n        Mockito.when(processService\n                .findLastRunningProcess(Mockito.eq(2L), Mockito.any(), Mockito.any()))\n                .thenReturn(dependentProcessInstance);\n\n        \r\n        Mockito.when(processService\n                .findValidTaskListByProcessId(200))\n                .thenReturn(Stream.of(\n                        getTaskInstanceForValidTaskList(2000, ExecutionStatus.SUCCESS, \"A\", dependentProcessInstance),\n                        getTaskInstanceForValidTaskList(2000, ExecutionStatus.FAILURE, \"B\", dependentProcessInstance)\n                ).collect(Collectors.toList()));\n\n        DependentTaskExecThread taskExecThread = new DependentTaskExecThread(taskInstance);\n        taskExecThread.call();\n        Assert.assertEquals(ExecutionStatus.SUCCESS, taskExecThread.getTaskInstance().getState());\n    }\n","realPath":"dolphinscheduler-server/src/test/java/org/apache/dolphinscheduler/server/master/DependentTaskTest.java","repoName":"dolphinscheduler","snippetEndLine":0,"snippetStartLine":0,"startLine":142,"status":"M"},{"authorDate":"2021-09-06 16:57:02","commitOrder":3,"curCode":"    public void testBasicFailure() {\n        testBasicInit();\n        ProcessInstance dependentProcessInstance =\n                getProcessInstanceForFindLastRunningProcess(200, ExecutionStatus.SUCCESS);\n        \r\n        Mockito.when(processService\n                .findLastRunningProcess(Mockito.eq(2L), Mockito.any(), Mockito.any()))\n                .thenReturn(dependentProcessInstance);\n\n        \r\n        Mockito.when(processService\n                .findValidTaskListByProcessId(200))\n                .thenReturn(Stream.of(\n                        getTaskInstanceForValidTaskList(2000, ExecutionStatus.FAILURE, \"A\", dependentProcessInstance),\n                        getTaskInstanceForValidTaskList(2000, ExecutionStatus.SUCCESS, \"B\", dependentProcessInstance)\n                ).collect(Collectors.toList()));\n    }\n","date":"2021-09-06 16:57:02","endLine":178,"groupId":"1032","id":6,"instanceNumber":2,"isCurCommit":1,"methodName":"testBasicFailure","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dolphinscheduler-10-0.7/blobInfo/CC_OUT/blobs/9a/1861388d08b09773c19ae83f062a88c43572ee.src","preCode":"    public void testBasicFailure() {\n        testBasicInit();\n        ProcessInstance dependentProcessInstance =\n                getProcessInstanceForFindLastRunningProcess(200, ExecutionStatus.SUCCESS);\n        \r\n        Mockito.when(processService\n                .findLastRunningProcess(Mockito.eq(2L), Mockito.any(), Mockito.any()))\n                .thenReturn(dependentProcessInstance);\n\n        \r\n        Mockito.when(processService\n                .findValidTaskListByProcessId(200))\n                .thenReturn(Stream.of(\n                        getTaskInstanceForValidTaskList(2000, ExecutionStatus.FAILURE, \"A\", dependentProcessInstance),\n                        getTaskInstanceForValidTaskList(2000, ExecutionStatus.SUCCESS, \"B\", dependentProcessInstance)\n                ).collect(Collectors.toList()));\n\n        DependentTaskExecThread taskExecThread = new DependentTaskExecThread(taskInstance);\n        taskExecThread.call();\n        Assert.assertEquals(ExecutionStatus.FAILURE, taskExecThread.getTaskInstance().getState());\n    }\n","realPath":"dolphinscheduler-server/src/test/java/org/apache/dolphinscheduler/server/master/DependentTaskTest.java","repoName":"dolphinscheduler","snippetEndLine":0,"snippetStartLine":0,"startLine":162,"status":"M"}],"commitId":"e34c65d5a676ad4ff9b8eca5c5446d578b0b39b3","commitMessage":"@@@[Feature-4355][Master-Worker-API] improvements of master and scheduler module (#6095)\n\n* [Feature-4355][Master-Worker-API] improvements of master and scheduler module (#6085)\n\n* master refactor:\n   1. spi for task submit and other actions(pause.  kill)\n   2. remove threads for process instance and task instance.\n   3. add events for process instance and task instance\n\n* ut npe\n\n* add try catch\n\n* code style\n\n* fix critical bugs\n\n* fix critical bugs\n\n* fix critical bugs\n\n* fix critical bugs","date":"2021-09-06 16:57:02","modifiedFileCount":"41","status":"M","submitter":"OS"}]
