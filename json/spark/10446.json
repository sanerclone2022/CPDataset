[{"authorTime":"2017-08-16 02:26:29","codes":[{"authorDate":"2017-08-16 02:26:29","commitOrder":1,"curCode":"  public void testRedirectOutputToLog() throws Exception {\n    assumeFalse(isWindows());\n\n    Path out = Files.createTempFile(\"stdout\", \"txt\");\n\n    SparkAppHandle handle = (ChildProcAppHandle) new TestSparkLauncher()\n      .redirectOutput(out.toFile())\n      .startApplication();\n    waitFor(handle);\n\n    assertTrue(MESSAGES.contains(\"error\"));\n    assertEquals(Arrays.asList(\"output\"), Files.lines(out).collect(Collectors.toList()));\n  }\n","date":"2017-08-16 02:26:29","endLine":139,"groupId":"2017","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testRedirectOutputToLog","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-spark-10-0.7/blobInfo/CC_OUT/blobs/64/a87b365d6a94f5d34a6e887b6360139e2a295f.src","preCode":"  public void testRedirectOutputToLog() throws Exception {\n    assumeFalse(isWindows());\n\n    Path out = Files.createTempFile(\"stdout\", \"txt\");\n\n    SparkAppHandle handle = (ChildProcAppHandle) new TestSparkLauncher()\n      .redirectOutput(out.toFile())\n      .startApplication();\n    waitFor(handle);\n\n    assertTrue(MESSAGES.contains(\"error\"));\n    assertEquals(Arrays.asList(\"output\"), Files.lines(out).collect(Collectors.toList()));\n  }\n","realPath":"launcher/src/test/java/org/apache/spark/launcher/ChildProcAppHandleSuite.java","repoName":"spark","snippetEndLine":0,"snippetStartLine":0,"startLine":127,"status":"B"},{"authorDate":"2017-08-16 02:26:29","commitOrder":1,"curCode":"  public void testNoRedirectToLog() throws Exception {\n    assumeFalse(isWindows());\n\n    Path out = Files.createTempFile(\"stdout\", \"txt\");\n    Path err = Files.createTempFile(\"stderr\", \"txt\");\n\n    ChildProcAppHandle handle = (ChildProcAppHandle) new TestSparkLauncher()\n      .redirectError(err.toFile())\n      .redirectOutput(out.toFile())\n      .startApplication();\n    waitFor(handle);\n\n    assertTrue(MESSAGES.isEmpty());\n    assertEquals(Arrays.asList(\"error\"), Files.lines(err).collect(Collectors.toList()));\n    assertEquals(Arrays.asList(\"output\"), Files.lines(out).collect(Collectors.toList()));\n  }\n","date":"2017-08-16 02:26:29","endLine":157,"groupId":"2019","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testNoRedirectToLog","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-spark-10-0.7/blobInfo/CC_OUT/blobs/64/a87b365d6a94f5d34a6e887b6360139e2a295f.src","preCode":"  public void testNoRedirectToLog() throws Exception {\n    assumeFalse(isWindows());\n\n    Path out = Files.createTempFile(\"stdout\", \"txt\");\n    Path err = Files.createTempFile(\"stderr\", \"txt\");\n\n    ChildProcAppHandle handle = (ChildProcAppHandle) new TestSparkLauncher()\n      .redirectError(err.toFile())\n      .redirectOutput(out.toFile())\n      .startApplication();\n    waitFor(handle);\n\n    assertTrue(MESSAGES.isEmpty());\n    assertEquals(Arrays.asList(\"error\"), Files.lines(err).collect(Collectors.toList()));\n    assertEquals(Arrays.asList(\"output\"), Files.lines(out).collect(Collectors.toList()));\n  }\n","realPath":"launcher/src/test/java/org/apache/spark/launcher/ChildProcAppHandleSuite.java","repoName":"spark","snippetEndLine":0,"snippetStartLine":0,"startLine":142,"status":"B"}],"commitId":"cba826d00173a945b0c9a7629c66e36fa73b723e","commitMessage":"@@@[SPARK-17742][CORE] Handle child process exit in SparkLauncher.\n\nCurrently the launcher handle does not monitor the child spark-submit\nprocess it launches; this means that if the child exits with an error. \nthe handle's state will never change.  and an application will not know\nthat the application has failed.\n\nThis change adds code to monitor the child process.  and changes the\nhandle state appropriately when the child process exits.\n\nTested with added unit tests.\n\nAuthor: Marcelo Vanzin <vanzin@cloudera.com>\n\nCloses #18877 from vanzin/SPARK-17742.\n","date":"2017-08-16 02:26:29","modifiedFileCount":"3","status":"B","submitter":"Marcelo Vanzin"},{"authorTime":"2017-09-13 20:01:30","codes":[{"authorDate":"2017-09-13 20:01:30","commitOrder":2,"curCode":"  public void testRedirectOutputToLog() throws Exception {\n    assumeFalse(isWindows());\n\n    Path out = Files.createTempFile(\"stdout\", \"txt\");\n    out.toFile().deleteOnExit();\n\n    SparkAppHandle handle = (ChildProcAppHandle) new TestSparkLauncher()\n      .redirectOutput(out.toFile())\n      .startApplication();\n    waitFor(handle);\n\n    assertTrue(MESSAGES.contains(\"error\"));\n    assertEquals(Arrays.asList(\"output\"), Files.lines(out).collect(Collectors.toList()));\n  }\n","date":"2017-09-13 20:01:30","endLine":142,"groupId":"10446","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testRedirectOutputToLog","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-spark-10-0.7/blobInfo/CC_OUT/blobs/9f/59b41d52d447f00b0cabb5ef090e3e6aa7697d.src","preCode":"  public void testRedirectOutputToLog() throws Exception {\n    assumeFalse(isWindows());\n\n    Path out = Files.createTempFile(\"stdout\", \"txt\");\n\n    SparkAppHandle handle = (ChildProcAppHandle) new TestSparkLauncher()\n      .redirectOutput(out.toFile())\n      .startApplication();\n    waitFor(handle);\n\n    assertTrue(MESSAGES.contains(\"error\"));\n    assertEquals(Arrays.asList(\"output\"), Files.lines(out).collect(Collectors.toList()));\n  }\n","realPath":"launcher/src/test/java/org/apache/spark/launcher/ChildProcAppHandleSuite.java","repoName":"spark","snippetEndLine":0,"snippetStartLine":0,"startLine":129,"status":"M"},{"authorDate":"2017-09-13 20:01:30","commitOrder":2,"curCode":"  public void testNoRedirectToLog() throws Exception {\n    assumeFalse(isWindows());\n\n    Path out = Files.createTempFile(\"stdout\", \"txt\");\n    Path err = Files.createTempFile(\"stderr\", \"txt\");\n    out.toFile().deleteOnExit();\n    err.toFile().deleteOnExit();\n\n    ChildProcAppHandle handle = (ChildProcAppHandle) new TestSparkLauncher()\n      .redirectError(err.toFile())\n      .redirectOutput(out.toFile())\n      .startApplication();\n    waitFor(handle);\n\n    assertTrue(MESSAGES.isEmpty());\n    assertEquals(Arrays.asList(\"error\"), Files.lines(err).collect(Collectors.toList()));\n    assertEquals(Arrays.asList(\"output\"), Files.lines(out).collect(Collectors.toList()));\n  }\n","date":"2017-09-13 20:01:30","endLine":162,"groupId":"10446","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testNoRedirectToLog","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-spark-10-0.7/blobInfo/CC_OUT/blobs/9f/59b41d52d447f00b0cabb5ef090e3e6aa7697d.src","preCode":"  public void testNoRedirectToLog() throws Exception {\n    assumeFalse(isWindows());\n\n    Path out = Files.createTempFile(\"stdout\", \"txt\");\n    Path err = Files.createTempFile(\"stderr\", \"txt\");\n\n    ChildProcAppHandle handle = (ChildProcAppHandle) new TestSparkLauncher()\n      .redirectError(err.toFile())\n      .redirectOutput(out.toFile())\n      .startApplication();\n    waitFor(handle);\n\n    assertTrue(MESSAGES.isEmpty());\n    assertEquals(Arrays.asList(\"error\"), Files.lines(err).collect(Collectors.toList()));\n    assertEquals(Arrays.asList(\"output\"), Files.lines(out).collect(Collectors.toList()));\n  }\n","realPath":"launcher/src/test/java/org/apache/spark/launcher/ChildProcAppHandleSuite.java","repoName":"spark","snippetEndLine":0,"snippetStartLine":0,"startLine":145,"status":"M"}],"commitId":"ca00cc70d6f01c0253a5bc2c22089cc54b476462","commitMessage":"@@@[SPARK-21963][CORE][TEST] Create temp file should be delete after use\n\n## What changes were proposed in this pull request?\n\nAfter you create a temporary table.  you need to delete it.  otherwise it will leave a file similar to the file name ?SPARK194465907929586320484966temp?.\n\n## How was this patch tested?\n\nN / A\n\nAuthor: caoxuewen <cao.xuewen@zte.com.cn>\n\nCloses #19174 from heary-cao/DeleteTempFile.\n","date":"2017-09-13 20:01:30","modifiedFileCount":"1","status":"M","submitter":"caoxuewen"}]
