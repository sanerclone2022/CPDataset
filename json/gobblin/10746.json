[{"authorTime":"2019-06-04 02:03:07","codes":[{"authorDate":"2019-06-04 02:03:07","commitOrder":1,"curCode":"  public void testAddSpec()\n      throws URISyntaxException, ExecutionException, InterruptedException {\n    this._fsSpecProducer.addSpec(createTestJobSpec());\n\n    List<Pair<SpecExecutor.Verb, Spec>> jobSpecs = this._fsSpecConsumer.changedSpecs().get();\n    Assert.assertEquals(jobSpecs.size(), 1);\n    Assert.assertEquals(jobSpecs.get(0).getLeft(), SpecExecutor.Verb.ADD);\n    Assert.assertEquals(jobSpecs.get(0).getRight().getUri().toString(), \"testJob\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key1\"), \"val1\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key2\"), \"val2\");\n  }\n","date":"2019-06-04 02:03:07","endLine":69,"groupId":"6936","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testAddSpec","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-gobblin-10-0.7/blobInfo/CC_OUT/blobs/89/c80feba8dd8c92f35f8a0a4641c65c0d85e445.src","preCode":"  public void testAddSpec()\n      throws URISyntaxException, ExecutionException, InterruptedException {\n    this._fsSpecProducer.addSpec(createTestJobSpec());\n\n    List<Pair<SpecExecutor.Verb, Spec>> jobSpecs = this._fsSpecConsumer.changedSpecs().get();\n    Assert.assertEquals(jobSpecs.size(), 1);\n    Assert.assertEquals(jobSpecs.get(0).getLeft(), SpecExecutor.Verb.ADD);\n    Assert.assertEquals(jobSpecs.get(0).getRight().getUri().toString(), \"testJob\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key1\"), \"val1\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key2\"), \"val2\");\n  }\n","realPath":"gobblin-runtime/src/test/java/org/apache/gobblin/runtime/api/FsSpecProducerTest.java","repoName":"gobblin","snippetEndLine":0,"snippetStartLine":0,"startLine":59,"status":"B"},{"authorDate":"2019-06-04 02:03:07","commitOrder":1,"curCode":"  public void testUpdateSpec() throws ExecutionException, InterruptedException, URISyntaxException {\n    this._fsSpecProducer.updateSpec(createTestJobSpec());\n\n    List<Pair<SpecExecutor.Verb, Spec>> jobSpecs = this._fsSpecConsumer.changedSpecs().get();\n    Assert.assertEquals(jobSpecs.size(), 1);\n    Assert.assertEquals(jobSpecs.get(0).getLeft(), SpecExecutor.Verb.UPDATE);\n    Assert.assertEquals(jobSpecs.get(0).getRight().getUri().toString(), \"testJob\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key1\"), \"val1\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key2\"), \"val2\");\n  }\n","date":"2019-06-04 02:03:07","endLine":81,"groupId":"6936","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testUpdateSpec","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-gobblin-10-0.7/blobInfo/CC_OUT/blobs/89/c80feba8dd8c92f35f8a0a4641c65c0d85e445.src","preCode":"  public void testUpdateSpec() throws ExecutionException, InterruptedException, URISyntaxException {\n    this._fsSpecProducer.updateSpec(createTestJobSpec());\n\n    List<Pair<SpecExecutor.Verb, Spec>> jobSpecs = this._fsSpecConsumer.changedSpecs().get();\n    Assert.assertEquals(jobSpecs.size(), 1);\n    Assert.assertEquals(jobSpecs.get(0).getLeft(), SpecExecutor.Verb.UPDATE);\n    Assert.assertEquals(jobSpecs.get(0).getRight().getUri().toString(), \"testJob\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key1\"), \"val1\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key2\"), \"val2\");\n  }\n","realPath":"gobblin-runtime/src/test/java/org/apache/gobblin/runtime/api/FsSpecProducerTest.java","repoName":"gobblin","snippetEndLine":0,"snippetStartLine":0,"startLine":72,"status":"B"}],"commitId":"b3011c060aae679489e3b6704a5027eceda01c87","commitMessage":"@@@[GOBBLIN-789] Implement a FileSystem based SpecProducer.\n\nCloses #2655 from sv2000/fsSpecProducer\n","date":"2019-06-04 02:03:07","modifiedFileCount":"2","status":"B","submitter":"sv2000"},{"authorTime":"2021-06-11 04:04:08","codes":[{"authorDate":"2021-06-11 04:04:08","commitOrder":2,"curCode":"  public void testAddSpec()\n      throws URISyntaxException, ExecutionException, InterruptedException {\n    this._fsSpecProducer.addSpec(createTestJobSpec());\n\n    List<Pair<SpecExecutor.Verb, Spec>> jobSpecs = this._fsSpecConsumer.changedSpecs().get();\n    Assert.assertEquals(jobSpecs.size(), 1);\n    Assert.assertEquals(jobSpecs.get(0).getLeft(), SpecExecutor.Verb.ADD);\n    Assert.assertEquals(jobSpecs.get(0).getRight().getUri().toString(), \"testJob\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key1\"), \"val1\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key2\"), \"val2\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key3.1\" + ConfigUtils.STRIP_SUFFIX), \"val3\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key3.1.1\"), \"val4\");\n  }\n","date":"2021-06-11 04:04:08","endLine":83,"groupId":"6936","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testAddSpec","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-gobblin-10-0.7/blobInfo/CC_OUT/blobs/52/dcf8b1ccdbecaea1c0117f93fc923a416965f4.src","preCode":"  public void testAddSpec()\n      throws URISyntaxException, ExecutionException, InterruptedException {\n    this._fsSpecProducer.addSpec(createTestJobSpec());\n\n    List<Pair<SpecExecutor.Verb, Spec>> jobSpecs = this._fsSpecConsumer.changedSpecs().get();\n    Assert.assertEquals(jobSpecs.size(), 1);\n    Assert.assertEquals(jobSpecs.get(0).getLeft(), SpecExecutor.Verb.ADD);\n    Assert.assertEquals(jobSpecs.get(0).getRight().getUri().toString(), \"testJob\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key1\"), \"val1\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key2\"), \"val2\");\n  }\n","realPath":"gobblin-runtime/src/test/java/org/apache/gobblin/runtime/api/FsSpecProducerTest.java","repoName":"gobblin","snippetEndLine":0,"snippetStartLine":0,"startLine":71,"status":"M"},{"authorDate":"2021-06-11 04:04:08","commitOrder":2,"curCode":"  public void testUpdateSpec() throws ExecutionException, InterruptedException, URISyntaxException {\n    this._fsSpecProducer.updateSpec(createTestJobSpec());\n\n    List<Pair<SpecExecutor.Verb, Spec>> jobSpecs = this._fsSpecConsumer.changedSpecs().get();\n    Assert.assertEquals(jobSpecs.size(), 1);\n    Assert.assertEquals(jobSpecs.get(0).getLeft(), SpecExecutor.Verb.UPDATE);\n    Assert.assertEquals(jobSpecs.get(0).getRight().getUri().toString(), \"testJob\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key1\"), \"val1\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key2\"), \"val2\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key3.1\" + ConfigUtils.STRIP_SUFFIX), \"val3\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key3.1.1\"), \"val4\");\n  }\n","date":"2021-06-11 04:04:08","endLine":97,"groupId":"6936","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testUpdateSpec","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-gobblin-10-0.7/blobInfo/CC_OUT/blobs/52/dcf8b1ccdbecaea1c0117f93fc923a416965f4.src","preCode":"  public void testUpdateSpec() throws ExecutionException, InterruptedException, URISyntaxException {\n    this._fsSpecProducer.updateSpec(createTestJobSpec());\n\n    List<Pair<SpecExecutor.Verb, Spec>> jobSpecs = this._fsSpecConsumer.changedSpecs().get();\n    Assert.assertEquals(jobSpecs.size(), 1);\n    Assert.assertEquals(jobSpecs.get(0).getLeft(), SpecExecutor.Verb.UPDATE);\n    Assert.assertEquals(jobSpecs.get(0).getRight().getUri().toString(), \"testJob\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key1\"), \"val1\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key2\"), \"val2\");\n  }\n","realPath":"gobblin-runtime/src/test/java/org/apache/gobblin/runtime/api/FsSpecProducerTest.java","repoName":"gobblin","snippetEndLine":0,"snippetStartLine":0,"startLine":86,"status":"M"}],"commitId":"1bc7e822ea27bdf90cc2f3fe895d2d6dc72e3f53","commitMessage":"@@@[GOBBLIN-1462] Ensure FsSpecConsumer handles config keys which are prefixes of other keys\n\nCloses #3302 from sv2000/typesafeConfigPrefix\n","date":"2021-06-11 04:04:08","modifiedFileCount":"2","status":"M","submitter":"suvasude"},{"authorTime":"2021-06-11 04:04:08","codes":[{"authorDate":"2021-08-21 05:56:27","commitOrder":3,"curCode":"  public void testAddSpec()\n      throws URISyntaxException, ExecutionException, InterruptedException, IOException {\n    this._fsSpecProducer.addSpec(createTestJobSpec());\n\n    \r\n    File randomFile = new File(workDir, \"random\");\n    Assert.assertTrue(randomFile.createNewFile());\n    randomFile.deleteOnExit();\n\n    List<Pair<SpecExecutor.Verb, Spec>> jobSpecs = this._fsSpecConsumer.changedSpecs().get();\n    Assert.assertEquals(jobSpecs.size(), 1);\n    Assert.assertEquals(jobSpecs.get(0).getLeft(), SpecExecutor.Verb.ADD);\n    Assert.assertEquals(jobSpecs.get(0).getRight().getUri().toString(), \"testJob\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key1\"), \"val1\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key2\"), \"val2\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key3.1\" + ConfigUtils.STRIP_SUFFIX), \"val3\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key3.1.1\"), \"val4\");\n    jobSpecs.clear();\n\n    \r\n    this._fsSpecProducer.addSpec(createTestJobSpec(\"newTestJob\"));\n    jobSpecs = this._fsSpecConsumer.changedSpecs().get();\n    Assert.assertEquals(jobSpecs.size(), 2);\n    Assert.assertEquals(jobSpecs.get(0).getLeft(), SpecExecutor.Verb.ADD);\n    Assert.assertEquals(jobSpecs.get(1).getLeft(), SpecExecutor.Verb.ADD);\n    List<String> uriList = jobSpecs.stream().map(s -> s.getRight().getUri().toString()).collect(Collectors.toList());\n    Assert.assertTrue(uriList.contains( \"testJob\"));\n    Assert.assertTrue(uriList.contains( \"newTestJob\"));\n  }\n","date":"2021-08-21 05:56:27","endLine":108,"groupId":"10746","id":5,"instanceNumber":1,"isCurCommit":1,"methodName":"testAddSpec","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-gobblin-10-0.7/blobInfo/CC_OUT/blobs/5e/43eb671fe9c3549179ae85e557f3f978262b07.src","preCode":"  public void testAddSpec()\n      throws URISyntaxException, ExecutionException, InterruptedException {\n    this._fsSpecProducer.addSpec(createTestJobSpec());\n\n    List<Pair<SpecExecutor.Verb, Spec>> jobSpecs = this._fsSpecConsumer.changedSpecs().get();\n    Assert.assertEquals(jobSpecs.size(), 1);\n    Assert.assertEquals(jobSpecs.get(0).getLeft(), SpecExecutor.Verb.ADD);\n    Assert.assertEquals(jobSpecs.get(0).getRight().getUri().toString(), \"testJob\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key1\"), \"val1\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key2\"), \"val2\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key3.1\" + ConfigUtils.STRIP_SUFFIX), \"val3\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key3.1.1\"), \"val4\");\n  }\n","realPath":"gobblin-runtime/src/test/java/org/apache/gobblin/runtime/api/FsSpecProducerTest.java","repoName":"gobblin","snippetEndLine":0,"snippetStartLine":0,"startLine":80,"status":"M"},{"authorDate":"2021-06-11 04:04:08","commitOrder":3,"curCode":"  public void testUpdateSpec() throws ExecutionException, InterruptedException, URISyntaxException {\n    this._fsSpecProducer.updateSpec(createTestJobSpec());\n\n    List<Pair<SpecExecutor.Verb, Spec>> jobSpecs = this._fsSpecConsumer.changedSpecs().get();\n    Assert.assertEquals(jobSpecs.size(), 1);\n    Assert.assertEquals(jobSpecs.get(0).getLeft(), SpecExecutor.Verb.UPDATE);\n    Assert.assertEquals(jobSpecs.get(0).getRight().getUri().toString(), \"testJob\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key1\"), \"val1\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key2\"), \"val2\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key3.1\" + ConfigUtils.STRIP_SUFFIX), \"val3\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key3.1.1\"), \"val4\");\n  }\n","date":"2021-06-11 04:04:08","endLine":97,"groupId":"10746","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"testUpdateSpec","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-gobblin-10-0.7/blobInfo/CC_OUT/blobs/52/dcf8b1ccdbecaea1c0117f93fc923a416965f4.src","preCode":"  public void testUpdateSpec() throws ExecutionException, InterruptedException, URISyntaxException {\n    this._fsSpecProducer.updateSpec(createTestJobSpec());\n\n    List<Pair<SpecExecutor.Verb, Spec>> jobSpecs = this._fsSpecConsumer.changedSpecs().get();\n    Assert.assertEquals(jobSpecs.size(), 1);\n    Assert.assertEquals(jobSpecs.get(0).getLeft(), SpecExecutor.Verb.UPDATE);\n    Assert.assertEquals(jobSpecs.get(0).getRight().getUri().toString(), \"testJob\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key1\"), \"val1\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key2\"), \"val2\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key3.1\" + ConfigUtils.STRIP_SUFFIX), \"val3\");\n    Assert.assertEquals(((JobSpec) jobSpecs.get(0).getRight()).getConfig().getString(\"key3.1.1\"), \"val4\");\n  }\n","realPath":"gobblin-runtime/src/test/java/org/apache/gobblin/runtime/api/FsSpecProducerTest.java","repoName":"gobblin","snippetEndLine":0,"snippetStartLine":0,"startLine":86,"status":"N"}],"commitId":"44c73168125e1132b0cf511a78bee3cfc88522d3","commitMessage":"@@@[GOBBLIN-1520] Standardize FsSpec's protocol in file name\n\nStandardize FsSpec's protocol in file name\n\nAddress reviewer's comments\n\nRemove unused imports\n\nCloses #3370 from autumnust/spec-consumer-avro\n","date":"2021-08-21 05:56:27","modifiedFileCount":"4","status":"M","submitter":"Lei Sun"}]
