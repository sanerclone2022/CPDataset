[{"authorTime":"2017-07-31 15:51:25","codes":[{"authorDate":"2017-07-31 15:51:25","commitOrder":1,"curCode":"  public void testCopySource()\n      throws Exception {\n\n    SourceState state = new SourceState();\n\n    state.setProp(ConfigurationKeys.SOURCE_FILEBASED_FS_URI, \"file:///\");\n    state.setProp(ConfigurationKeys.WRITER_FILE_SYSTEM_URI, \"file:///\");\n    state.setProp(ConfigurationKeys.DATA_PUBLISHER_FINAL_DIR, \"/target/dir\");\n    state.setProp(DatasetUtils.DATASET_PROFILE_CLASS_KEY, TestCopyableDatasetFinder.class.getName());\n\n    CopySource source = new CopySource();\n\n    List<WorkUnit> workunits = source.getWorkunits(state);\n    workunits = JobLauncherUtils.flattenWorkUnits(workunits);\n\n    Assert.assertEquals(workunits.size(), TestCopyableDataset.FILE_COUNT);\n\n    Extract extract = workunits.get(0).getExtract();\n\n    for (WorkUnit workUnit : workunits) {\n      CopyableFile file = (CopyableFile) CopySource.deserializeCopyEntity(workUnit);\n      Assert.assertTrue(file.getOrigin().getPath().toString().startsWith(TestCopyableDataset.ORIGIN_PREFIX));\n      Assert.assertEquals(file.getDestinationOwnerAndPermission(), TestCopyableDataset.OWNER_AND_PERMISSION);\n      Assert.assertEquals(workUnit.getExtract(), extract);\n    }\n  }\n","date":"2017-07-31 15:51:25","endLine":61,"groupId":"828","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testCopySource","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-gobblin-10-0.7/blobInfo/CC_OUT/blobs/d9/e5368bb787b5d13b74740f571a87881d98c002.src","preCode":"  public void testCopySource()\n      throws Exception {\n\n    SourceState state = new SourceState();\n\n    state.setProp(ConfigurationKeys.SOURCE_FILEBASED_FS_URI, \"file:///\");\n    state.setProp(ConfigurationKeys.WRITER_FILE_SYSTEM_URI, \"file:///\");\n    state.setProp(ConfigurationKeys.DATA_PUBLISHER_FINAL_DIR, \"/target/dir\");\n    state.setProp(DatasetUtils.DATASET_PROFILE_CLASS_KEY, TestCopyableDatasetFinder.class.getName());\n\n    CopySource source = new CopySource();\n\n    List<WorkUnit> workunits = source.getWorkunits(state);\n    workunits = JobLauncherUtils.flattenWorkUnits(workunits);\n\n    Assert.assertEquals(workunits.size(), TestCopyableDataset.FILE_COUNT);\n\n    Extract extract = workunits.get(0).getExtract();\n\n    for (WorkUnit workUnit : workunits) {\n      CopyableFile file = (CopyableFile) CopySource.deserializeCopyEntity(workUnit);\n      Assert.assertTrue(file.getOrigin().getPath().toString().startsWith(TestCopyableDataset.ORIGIN_PREFIX));\n      Assert.assertEquals(file.getDestinationOwnerAndPermission(), TestCopyableDataset.OWNER_AND_PERMISSION);\n      Assert.assertEquals(workUnit.getExtract(), extract);\n    }\n  }\n","realPath":"gobblin-data-management/src/test/java/org/apache/gobblin/data/management/copy/CopySourceTest.java","repoName":"gobblin","snippetEndLine":0,"snippetStartLine":0,"startLine":36,"status":"B"},{"authorDate":"2017-07-31 15:51:25","commitOrder":1,"curCode":"  public void testNoPrioritization() throws Exception {\n    SourceState state = new SourceState();\n\n    state.setProp(ConfigurationKeys.SOURCE_FILEBASED_FS_URI, \"file:///\");\n    state.setProp(ConfigurationKeys.WRITER_FILE_SYSTEM_URI, \"file:///\");\n    state.setProp(ConfigurationKeys.DATA_PUBLISHER_FINAL_DIR, \"/target/dir\");\n    state.setProp(DatasetUtils.DATASET_PROFILE_CLASS_KEY,\n        MyFinder.class.getName());\n\n    CopySource source = new CopySource();\n\n    List<WorkUnit> workunits = source.getWorkunits(state);\n    workunits = JobLauncherUtils.flattenWorkUnits(workunits);\n\n    Assert.assertEquals(workunits.size(), MyFinder.DATASETS * MyDataset.FILE_SETS * MyFileSet.FILES);\n  }\n","date":"2017-07-31 15:51:25","endLine":70,"groupId":"828","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testNoPrioritization","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-gobblin-10-0.7/blobInfo/CC_OUT/blobs/2b/55bd4222f665b6dbc82cb23cff8c115784faf9.src","preCode":"  public void testNoPrioritization() throws Exception {\n    SourceState state = new SourceState();\n\n    state.setProp(ConfigurationKeys.SOURCE_FILEBASED_FS_URI, \"file:///\");\n    state.setProp(ConfigurationKeys.WRITER_FILE_SYSTEM_URI, \"file:///\");\n    state.setProp(ConfigurationKeys.DATA_PUBLISHER_FINAL_DIR, \"/target/dir\");\n    state.setProp(DatasetUtils.DATASET_PROFILE_CLASS_KEY,\n        MyFinder.class.getName());\n\n    CopySource source = new CopySource();\n\n    List<WorkUnit> workunits = source.getWorkunits(state);\n    workunits = JobLauncherUtils.flattenWorkUnits(workunits);\n\n    Assert.assertEquals(workunits.size(), MyFinder.DATASETS * MyDataset.FILE_SETS * MyFileSet.FILES);\n  }\n","realPath":"gobblin-data-management/src/test/java/org/apache/gobblin/data/management/copy/CopySourcePrioritizationTest.java","repoName":"gobblin","snippetEndLine":0,"snippetStartLine":0,"startLine":55,"status":"B"}],"commitId":"5457af88d56b8fb89b172129fd1ff24ecdd4eba8","commitMessage":"@@@Merge pull request #2031 from abti/move_packages_to_apache\n","date":"2017-07-31 15:51:25","modifiedFileCount":"2","status":"B","submitter":"Abhishek Tiwari"},{"authorTime":"2017-07-31 15:51:25","codes":[{"authorDate":"2021-08-02 23:38:15","commitOrder":2,"curCode":"  public void testCopySource()\n      throws Exception {\n\n    SourceState state = new SourceState();\n\n    state.setProp(ConfigurationKeys.SOURCE_FILEBASED_FS_URI, \"file:///\");\n    state.setProp(ConfigurationKeys.WRITER_FILE_SYSTEM_URI, \"file:///\");\n    state.setProp(ConfigurationKeys.DATA_PUBLISHER_FINAL_DIR, \"/target/dir\");\n    state.setProp(DatasetUtils.DATASET_PROFILE_CLASS_KEY, TestCopyableDatasetFinder.class.getName());\n\n    CopySource source = new CopySource();\n\n    List<WorkUnit> workunits = source.getWorkunits(state);\n    workunits = JobLauncherUtils.flattenWorkUnits(workunits);\n\n    Assert.assertEquals(workunits.size(), TestCopyableDataset.FILE_COUNT);\n\n    Extract extract = workunits.get(0).getExtract();\n\n    for (WorkUnit workUnit : workunits) {\n      CopyableFile file = (CopyableFile) CopySource.deserializeCopyEntity(workUnit);\n      Assert.assertTrue(file.getOrigin().getPath().toString().startsWith(TestCopyableDataset.ORIGIN_PREFIX));\n      Assert.assertEquals(file.getDestinationOwnerAndPermission(), TestCopyableDataset.OWNER_AND_PERMISSION);\n      Assert.assertEquals(workUnit.getProp(ServiceConfigKeys.WORK_UNIT_SIZE), String.valueOf(TestCopyableDataset.FILE_LENGTH));\n      Assert.assertEquals(workUnit.getExtract(), extract);\n    }\n  }\n","date":"2021-08-02 23:38:15","endLine":88,"groupId":"101612","id":3,"instanceNumber":1,"isCurCommit":1,"methodName":"testCopySource","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-gobblin-10-0.7/blobInfo/CC_OUT/blobs/10/2d6d1b3ae228de7d1db605e5e22ca67ac7c220.src","preCode":"  public void testCopySource()\n      throws Exception {\n\n    SourceState state = new SourceState();\n\n    state.setProp(ConfigurationKeys.SOURCE_FILEBASED_FS_URI, \"file:///\");\n    state.setProp(ConfigurationKeys.WRITER_FILE_SYSTEM_URI, \"file:///\");\n    state.setProp(ConfigurationKeys.DATA_PUBLISHER_FINAL_DIR, \"/target/dir\");\n    state.setProp(DatasetUtils.DATASET_PROFILE_CLASS_KEY, TestCopyableDatasetFinder.class.getName());\n\n    CopySource source = new CopySource();\n\n    List<WorkUnit> workunits = source.getWorkunits(state);\n    workunits = JobLauncherUtils.flattenWorkUnits(workunits);\n\n    Assert.assertEquals(workunits.size(), TestCopyableDataset.FILE_COUNT);\n\n    Extract extract = workunits.get(0).getExtract();\n\n    for (WorkUnit workUnit : workunits) {\n      CopyableFile file = (CopyableFile) CopySource.deserializeCopyEntity(workUnit);\n      Assert.assertTrue(file.getOrigin().getPath().toString().startsWith(TestCopyableDataset.ORIGIN_PREFIX));\n      Assert.assertEquals(file.getDestinationOwnerAndPermission(), TestCopyableDataset.OWNER_AND_PERMISSION);\n      Assert.assertEquals(workUnit.getExtract(), extract);\n    }\n  }\n","realPath":"gobblin-data-management/src/test/java/org/apache/gobblin/data/management/copy/CopySourceTest.java","repoName":"gobblin","snippetEndLine":0,"snippetStartLine":0,"startLine":62,"status":"M"},{"authorDate":"2017-07-31 15:51:25","commitOrder":2,"curCode":"  public void testNoPrioritization() throws Exception {\n    SourceState state = new SourceState();\n\n    state.setProp(ConfigurationKeys.SOURCE_FILEBASED_FS_URI, \"file:///\");\n    state.setProp(ConfigurationKeys.WRITER_FILE_SYSTEM_URI, \"file:///\");\n    state.setProp(ConfigurationKeys.DATA_PUBLISHER_FINAL_DIR, \"/target/dir\");\n    state.setProp(DatasetUtils.DATASET_PROFILE_CLASS_KEY,\n        MyFinder.class.getName());\n\n    CopySource source = new CopySource();\n\n    List<WorkUnit> workunits = source.getWorkunits(state);\n    workunits = JobLauncherUtils.flattenWorkUnits(workunits);\n\n    Assert.assertEquals(workunits.size(), MyFinder.DATASETS * MyDataset.FILE_SETS * MyFileSet.FILES);\n  }\n","date":"2017-07-31 15:51:25","endLine":70,"groupId":"101612","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testNoPrioritization","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-gobblin-10-0.7/blobInfo/CC_OUT/blobs/2b/55bd4222f665b6dbc82cb23cff8c115784faf9.src","preCode":"  public void testNoPrioritization() throws Exception {\n    SourceState state = new SourceState();\n\n    state.setProp(ConfigurationKeys.SOURCE_FILEBASED_FS_URI, \"file:///\");\n    state.setProp(ConfigurationKeys.WRITER_FILE_SYSTEM_URI, \"file:///\");\n    state.setProp(ConfigurationKeys.DATA_PUBLISHER_FINAL_DIR, \"/target/dir\");\n    state.setProp(DatasetUtils.DATASET_PROFILE_CLASS_KEY,\n        MyFinder.class.getName());\n\n    CopySource source = new CopySource();\n\n    List<WorkUnit> workunits = source.getWorkunits(state);\n    workunits = JobLauncherUtils.flattenWorkUnits(workunits);\n\n    Assert.assertEquals(workunits.size(), MyFinder.DATASETS * MyDataset.FILE_SETS * MyFileSet.FILES);\n  }\n","realPath":"gobblin-data-management/src/test/java/org/apache/gobblin/data/management/copy/CopySourcePrioritizationTest.java","repoName":"gobblin","snippetEndLine":0,"snippetStartLine":0,"startLine":55,"status":"N"}],"commitId":"5ab79b0453e71eb170b0e75f41daeb10377e7233","commitMessage":"@@@[GOBBLIN-1493] Data Copy Progress Reporting (#3336)\n\n* Emits GobblinTrackingEvent containing progress percentage\n* Calculates remaining time for copy\n* Stores progress percentage and remaning time in job status\n\nCo-authored-by: Urmi Mustafi <umustafi@umustafi-mn1.linkedin.biz>","date":"2021-08-02 23:38:15","modifiedFileCount":"15","status":"M","submitter":"umustafi"}]
