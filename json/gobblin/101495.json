[{"authorTime":"2020-04-29 08:00:20","codes":[{"authorDate":"2020-11-08 09:17:19","commitOrder":3,"curCode":"  public void checkRequester(\n      RequesterService requesterService, FlowConfig originalFlowConfig, List<ServiceRequester> requesterList) {\n    if (requesterList == null) {\n      return;\n    }\n\n    try {\n      String serializedOriginalRequesterList = originalFlowConfig.getProperties().get(RequesterService.REQUESTER_LIST);\n      if (serializedOriginalRequesterList != null) {\n        List<ServiceRequester> originalRequesterList = RequesterService.deserialize(serializedOriginalRequesterList);\n        if (!requesterService.isRequesterAllowed(originalRequesterList, requesterList)) {\n          \r\n          \r\n          if (!(originalFlowConfig.hasOwningGroup() && this.groupOwnershipService.isMemberOfGroup(\n              requesterList, originalFlowConfig.getOwningGroup()))) {\n            throw new FlowConfigLoggedException(HttpStatus.S_401_UNAUTHORIZED, \"Requester not allowed to make this request\");\n          }\n        }\n      }\n    } catch (IOException e) {\n      throw new FlowConfigLoggedException(HttpStatus.S_400_BAD_REQUEST, \"Failed to get original requester list\", e);\n    }\n  }\n","date":"2020-11-08 09:17:19","endLine":242,"groupId":"399","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"checkRequester","params":"(RequesterServicerequesterService@FlowConfigoriginalFlowConfig@List<ServiceRequester>requesterList)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-gobblin-10-0.7/blobInfo/CC_OUT/blobs/49/f7faac0847d4022ec16130692a59c1e9cca5eb.src","preCode":"  public void checkRequester(\n      RequesterService requesterService, FlowConfig originalFlowConfig, List<ServiceRequester> requesterList) {\n    if (requesterList == null) {\n      return;\n    }\n\n    try {\n      String serializedOriginalRequesterList = originalFlowConfig.getProperties().get(RequesterService.REQUESTER_LIST);\n      if (serializedOriginalRequesterList != null) {\n        List<ServiceRequester> originalRequesterList = RequesterService.deserialize(serializedOriginalRequesterList);\n        if (!requesterService.isRequesterAllowed(originalRequesterList, requesterList)) {\n          \r\n          \r\n          if (!(originalFlowConfig.hasOwningGroup() && this.groupOwnershipService.isMemberOfGroup(\n              requesterList, originalFlowConfig.getOwningGroup()))) {\n            throw new FlowConfigLoggedException(HttpStatus.S_401_UNAUTHORIZED, \"Requester not allowed to make this request\");\n          }\n        }\n      }\n    } catch (IOException e) {\n      throw new FlowConfigLoggedException(HttpStatus.S_400_BAD_REQUEST, \"Failed to get original requester list\", e);\n    }\n  }\n","realPath":"gobblin-restli/gobblin-flow-config-service/gobblin-flow-config-service-server/src/main/java/org/apache/gobblin/service/FlowConfigsV2Resource.java","repoName":"gobblin","snippetEndLine":0,"snippetStartLine":0,"startLine":220,"status":"B"},{"authorDate":"2020-04-29 08:00:20","commitOrder":3,"curCode":"  public static void checkRequester(\n      RequesterService requesterService, FlowConfig originalFlowConfig, List<ServiceRequester> requesterList) {\n    if (requesterList == null) {\n      return;\n    }\n\n    try {\n      String serializedOriginalRequesterList = originalFlowConfig.getProperties().get(RequesterService.REQUESTER_LIST);\n      if (serializedOriginalRequesterList != null) {\n        List<ServiceRequester> originalRequesterList = RequesterService.deserialize(serializedOriginalRequesterList);\n        if (!requesterService.isRequesterAllowed(originalRequesterList, requesterList)) {\n          throw new FlowConfigLoggedException(HttpStatus.S_401_UNAUTHORIZED, \"Requester not allowed to make this request\");\n        }\n      }\n    } catch (IOException e) {\n      throw new FlowConfigLoggedException(HttpStatus.S_400_BAD_REQUEST, \"Failed to get original requester list\", e);\n    }\n  }\n","date":"2020-04-29 08:00:20","endLine":160,"groupId":"7524","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"checkRequester","params":"(RequesterServicerequesterService@FlowConfigoriginalFlowConfig@List<ServiceRequester>requesterList)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-gobblin-10-0.7/blobInfo/CC_OUT/blobs/6f/dd6086b713afa3018499b05d619524abce4ea8.src","preCode":"  public static void checkRequester(\n      RequesterService requesterService, FlowConfig originalFlowConfig, List<ServiceRequester> requesterList) {\n    if (requesterList == null) {\n      return;\n    }\n\n    try {\n      String serializedOriginalRequesterList = originalFlowConfig.getProperties().get(RequesterService.REQUESTER_LIST);\n      if (serializedOriginalRequesterList != null) {\n        List<ServiceRequester> originalRequesterList = RequesterService.deserialize(serializedOriginalRequesterList);\n        if (!requesterService.isRequesterAllowed(originalRequesterList, requesterList)) {\n          throw new FlowConfigLoggedException(HttpStatus.S_401_UNAUTHORIZED, \"Requester not allowed to make this request\");\n        }\n      }\n    } catch (IOException e) {\n      throw new FlowConfigLoggedException(HttpStatus.S_400_BAD_REQUEST, \"Failed to get original requester list\", e);\n    }\n  }\n","realPath":"gobblin-restli/gobblin-flow-config-service/gobblin-flow-config-service-server/src/main/java/org/apache/gobblin/service/FlowConfigsResource.java","repoName":"gobblin","snippetEndLine":0,"snippetStartLine":0,"startLine":143,"status":"NB"}],"commitId":"7352cad8ae3a1d9be10d3b6fb78383ccbada9b19","commitMessage":"@@@[GOBBLIN-1304] Adds group ownership service\n\nCloses #3142 from Will-Lo/add-group-ownership-\nflows\n","date":"2020-11-08 09:17:19","modifiedFileCount":"10","status":"M","submitter":"William Lo"},{"authorTime":"2021-03-09 02:42:57","codes":[{"authorDate":"2021-03-09 02:42:57","commitOrder":4,"curCode":"  public void checkRequester(FlowConfig originalFlowConfig, List<ServiceRequester> requesterList) {\n    if (this.requesterService.isRequesterWhitelisted(requesterList)) {\n      return;\n    }\n\n    try {\n      String serializedOriginalRequesterList = originalFlowConfig.getProperties().get(RequesterService.REQUESTER_LIST);\n      if (serializedOriginalRequesterList != null) {\n        List<ServiceRequester> originalRequesterList = RequesterService.deserialize(serializedOriginalRequesterList);\n        if (!requesterService.isRequesterAllowed(originalRequesterList, requesterList)) {\n          \r\n          \r\n          if (!(originalFlowConfig.hasOwningGroup() && this.groupOwnershipService.isMemberOfGroup(\n              requesterList, originalFlowConfig.getOwningGroup()))) {\n            throw new FlowConfigLoggedException(HttpStatus.S_401_UNAUTHORIZED, \"Requester not allowed to make this request\");\n          }\n        }\n      }\n    } catch (IOException e) {\n      throw new FlowConfigLoggedException(HttpStatus.S_400_BAD_REQUEST, \"Failed to get original requester list\", e);\n    }\n  }\n","date":"2021-03-09 02:42:57","endLine":304,"groupId":"101495","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"checkRequester","params":"(FlowConfigoriginalFlowConfig@List<ServiceRequester>requesterList)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-gobblin-10-0.7/blobInfo/CC_OUT/blobs/1e/a39bccade73f0e7d679aba89cd87221c87b76f.src","preCode":"  public void checkRequester(\n      RequesterService requesterService, FlowConfig originalFlowConfig, List<ServiceRequester> requesterList) {\n    if (requesterList == null) {\n      return;\n    }\n\n    try {\n      String serializedOriginalRequesterList = originalFlowConfig.getProperties().get(RequesterService.REQUESTER_LIST);\n      if (serializedOriginalRequesterList != null) {\n        List<ServiceRequester> originalRequesterList = RequesterService.deserialize(serializedOriginalRequesterList);\n        if (!requesterService.isRequesterAllowed(originalRequesterList, requesterList)) {\n          \r\n          \r\n          if (!(originalFlowConfig.hasOwningGroup() && this.groupOwnershipService.isMemberOfGroup(\n              requesterList, originalFlowConfig.getOwningGroup()))) {\n            throw new FlowConfigLoggedException(HttpStatus.S_401_UNAUTHORIZED, \"Requester not allowed to make this request\");\n          }\n        }\n      }\n    } catch (IOException e) {\n      throw new FlowConfigLoggedException(HttpStatus.S_400_BAD_REQUEST, \"Failed to get original requester list\", e);\n    }\n  }\n","realPath":"gobblin-restli/gobblin-flow-config-service/gobblin-flow-config-service-server/src/main/java/org/apache/gobblin/service/FlowConfigsV2Resource.java","repoName":"gobblin","snippetEndLine":0,"snippetStartLine":0,"startLine":283,"status":"M"},{"authorDate":"2021-03-09 02:42:57","commitOrder":4,"curCode":"  public static void checkRequester(\n      RequesterService requesterService, FlowConfig originalFlowConfig, List<ServiceRequester> requesterList) {\n    if (requesterService.isRequesterWhitelisted(requesterList)) {\n      return;\n    }\n\n    try {\n      String serializedOriginalRequesterList = originalFlowConfig.getProperties().get(RequesterService.REQUESTER_LIST);\n      if (serializedOriginalRequesterList != null) {\n        List<ServiceRequester> originalRequesterList = RequesterService.deserialize(serializedOriginalRequesterList);\n        if (!requesterService.isRequesterAllowed(originalRequesterList, requesterList)) {\n          throw new FlowConfigLoggedException(HttpStatus.S_401_UNAUTHORIZED, \"Requester not allowed to make this request\");\n        }\n      }\n    } catch (IOException e) {\n      throw new FlowConfigLoggedException(HttpStatus.S_400_BAD_REQUEST, \"Failed to get original requester list\", e);\n    }\n  }\n","date":"2021-03-09 02:42:57","endLine":173,"groupId":"101495","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"checkRequester","params":"(RequesterServicerequesterService@FlowConfigoriginalFlowConfig@List<ServiceRequester>requesterList)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-gobblin-10-0.7/blobInfo/CC_OUT/blobs/9e/e00c0917c343b4a8617c2255fc08ad3431267d.src","preCode":"  public static void checkRequester(\n      RequesterService requesterService, FlowConfig originalFlowConfig, List<ServiceRequester> requesterList) {\n    if (requesterList == null) {\n      return;\n    }\n\n    try {\n      String serializedOriginalRequesterList = originalFlowConfig.getProperties().get(RequesterService.REQUESTER_LIST);\n      if (serializedOriginalRequesterList != null) {\n        List<ServiceRequester> originalRequesterList = RequesterService.deserialize(serializedOriginalRequesterList);\n        if (!requesterService.isRequesterAllowed(originalRequesterList, requesterList)) {\n          throw new FlowConfigLoggedException(HttpStatus.S_401_UNAUTHORIZED, \"Requester not allowed to make this request\");\n        }\n      }\n    } catch (IOException e) {\n      throw new FlowConfigLoggedException(HttpStatus.S_400_BAD_REQUEST, \"Failed to get original requester list\", e);\n    }\n  }\n","realPath":"gobblin-restli/gobblin-flow-config-service/gobblin-flow-config-service-server/src/main/java/org/apache/gobblin/service/FlowConfigsResource.java","repoName":"gobblin","snippetEndLine":0,"snippetStartLine":0,"startLine":156,"status":"M"}],"commitId":"303ec0e99a6987db834638726d3e88daf22ef181","commitMessage":"@@@[GOBBLIN-1402] Allow flow's requester list/owner to be updated\n\nCloses #3238 from jack-moseley/requester-logic-\nupdate\n","date":"2021-03-09 02:42:57","modifiedFileCount":"5","status":"M","submitter":"Jack Moseley"}]
