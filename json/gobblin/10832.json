[{"authorTime":"2017-07-31 15:51:25","codes":[{"authorDate":"2017-07-31 15:51:25","commitOrder":1,"curCode":"  private void finalizeDatasetStateBeforeCommit(JobState.DatasetState datasetState) {\n    for (TaskState taskState : datasetState.getTaskStates()) {\n      if (taskState.getWorkingState() != WorkUnitState.WorkingState.SUCCESSFUL\n          && this.jobContext.getJobCommitPolicy() == JobCommitPolicy.COMMIT_ON_FULL_SUCCESS) {\n        \r\n        datasetState.setState(JobState.RunningState.FAILED);\n        datasetState.incrementJobFailures();\n        return;\n      }\n    }\n\n    datasetState.setState(JobState.RunningState.SUCCESSFUL);\n    datasetState.setNoJobFailure();\n  }\n","date":"2017-07-31 15:51:25","endLine":255,"groupId":"804","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"finalizeDatasetStateBeforeCommit","params":"(JobState.DatasetStatedatasetState)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-gobblin-10-0.7/blobInfo/CC_OUT/blobs/36/3adf3c2aa2e3739f5271788c75c84f24cb20b6.src","preCode":"  private void finalizeDatasetStateBeforeCommit(JobState.DatasetState datasetState) {\n    for (TaskState taskState : datasetState.getTaskStates()) {\n      if (taskState.getWorkingState() != WorkUnitState.WorkingState.SUCCESSFUL\n          && this.jobContext.getJobCommitPolicy() == JobCommitPolicy.COMMIT_ON_FULL_SUCCESS) {\n        \r\n        datasetState.setState(JobState.RunningState.FAILED);\n        datasetState.incrementJobFailures();\n        return;\n      }\n    }\n\n    datasetState.setState(JobState.RunningState.SUCCESSFUL);\n    datasetState.setNoJobFailure();\n  }\n","realPath":"gobblin-runtime/src/main/java/org/apache/gobblin/runtime/SafeDatasetCommit.java","repoName":"gobblin","snippetEndLine":0,"snippetStartLine":0,"startLine":242,"status":"B"},{"authorDate":"2017-07-31 15:51:25","commitOrder":1,"curCode":"  private void finalizeDatasetState(JobState.DatasetState datasetState, String datasetUrn) {\n    for (TaskState taskState : datasetState.getTaskStates()) {\n      \r\n      if (taskState.getWorkingState() != WorkUnitState.WorkingState.COMMITTED) {\n        taskState.backoffActualHighWatermark();\n        if (this.jobContext.getJobCommitPolicy() == JobCommitPolicy.COMMIT_ON_FULL_SUCCESS) {\n          \r\n          \r\n          \r\n          \r\n          \r\n          datasetState.setState(JobState.RunningState.FAILED);\n        }\n      }\n    }\n\n    datasetState.setId(datasetUrn);\n  }\n","date":"2017-07-31 15:51:25","endLine":328,"groupId":"6402","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"finalizeDatasetState","params":"(JobState.DatasetStatedatasetState@StringdatasetUrn)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-gobblin-10-0.7/blobInfo/CC_OUT/blobs/36/3adf3c2aa2e3739f5271788c75c84f24cb20b6.src","preCode":"  private void finalizeDatasetState(JobState.DatasetState datasetState, String datasetUrn) {\n    for (TaskState taskState : datasetState.getTaskStates()) {\n      \r\n      if (taskState.getWorkingState() != WorkUnitState.WorkingState.COMMITTED) {\n        taskState.backoffActualHighWatermark();\n        if (this.jobContext.getJobCommitPolicy() == JobCommitPolicy.COMMIT_ON_FULL_SUCCESS) {\n          \r\n          \r\n          \r\n          \r\n          \r\n          datasetState.setState(JobState.RunningState.FAILED);\n        }\n      }\n    }\n\n    datasetState.setId(datasetUrn);\n  }\n","realPath":"gobblin-runtime/src/main/java/org/apache/gobblin/runtime/SafeDatasetCommit.java","repoName":"gobblin","snippetEndLine":0,"snippetStartLine":0,"startLine":311,"status":"B"}],"commitId":"5457af88d56b8fb89b172129fd1ff24ecdd4eba8","commitMessage":"@@@Merge pull request #2031 from abti/move_packages_to_apache\n","date":"2017-07-31 15:51:25","modifiedFileCount":"2","status":"B","submitter":"Abhishek Tiwari"},{"authorTime":"2018-02-06 03:56:20","codes":[{"authorDate":"2017-07-31 15:51:25","commitOrder":2,"curCode":"  private void finalizeDatasetStateBeforeCommit(JobState.DatasetState datasetState) {\n    for (TaskState taskState : datasetState.getTaskStates()) {\n      if (taskState.getWorkingState() != WorkUnitState.WorkingState.SUCCESSFUL\n          && this.jobContext.getJobCommitPolicy() == JobCommitPolicy.COMMIT_ON_FULL_SUCCESS) {\n        \r\n        datasetState.setState(JobState.RunningState.FAILED);\n        datasetState.incrementJobFailures();\n        return;\n      }\n    }\n\n    datasetState.setState(JobState.RunningState.SUCCESSFUL);\n    datasetState.setNoJobFailure();\n  }\n","date":"2017-07-31 15:51:25","endLine":255,"groupId":"804","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"finalizeDatasetStateBeforeCommit","params":"(JobState.DatasetStatedatasetState)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-gobblin-10-0.7/blobInfo/CC_OUT/blobs/36/3adf3c2aa2e3739f5271788c75c84f24cb20b6.src","preCode":"  private void finalizeDatasetStateBeforeCommit(JobState.DatasetState datasetState) {\n    for (TaskState taskState : datasetState.getTaskStates()) {\n      if (taskState.getWorkingState() != WorkUnitState.WorkingState.SUCCESSFUL\n          && this.jobContext.getJobCommitPolicy() == JobCommitPolicy.COMMIT_ON_FULL_SUCCESS) {\n        \r\n        datasetState.setState(JobState.RunningState.FAILED);\n        datasetState.incrementJobFailures();\n        return;\n      }\n    }\n\n    datasetState.setState(JobState.RunningState.SUCCESSFUL);\n    datasetState.setNoJobFailure();\n  }\n","realPath":"gobblin-runtime/src/main/java/org/apache/gobblin/runtime/SafeDatasetCommit.java","repoName":"gobblin","snippetEndLine":0,"snippetStartLine":0,"startLine":242,"status":"N"},{"authorDate":"2018-02-06 03:56:20","commitOrder":2,"curCode":"  private void finalizeDatasetState(JobState.DatasetState datasetState, String datasetUrn) {\n    for (TaskState taskState : datasetState.getTaskStates()) {\n      \r\n      if (taskState.getWorkingState() != WorkUnitState.WorkingState.COMMITTED) {\n        taskState.backoffActualHighWatermark();\n        if (this.jobContext.getJobCommitPolicy() == JobCommitPolicy.COMMIT_ON_FULL_SUCCESS) {\n          \r\n          \r\n          \r\n          \r\n          \r\n          datasetState.setState(JobState.RunningState.FAILED);\n          Optional<String> taskStateException = taskState.getTaskFailureException();\n          log.warn(\"At least one task did not committed successfully. Setting dataset state to FAILED.\",\n              taskStateException.isPresent() ? taskStateException.get() : \"Exception not set.\");\n        }\n      }\n    }\n\n    datasetState.setId(datasetUrn);\n  }\n","date":"2018-02-06 03:56:20","endLine":410,"groupId":"6402","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"finalizeDatasetState","params":"(JobState.DatasetStatedatasetState@StringdatasetUrn)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-gobblin-10-0.7/blobInfo/CC_OUT/blobs/a8/0d83247a866564083ce8a3a08181424c3f313e.src","preCode":"  private void finalizeDatasetState(JobState.DatasetState datasetState, String datasetUrn) {\n    for (TaskState taskState : datasetState.getTaskStates()) {\n      \r\n      if (taskState.getWorkingState() != WorkUnitState.WorkingState.COMMITTED) {\n        taskState.backoffActualHighWatermark();\n        if (this.jobContext.getJobCommitPolicy() == JobCommitPolicy.COMMIT_ON_FULL_SUCCESS) {\n          \r\n          \r\n          \r\n          \r\n          \r\n          datasetState.setState(JobState.RunningState.FAILED);\n        }\n      }\n    }\n\n    datasetState.setId(datasetUrn);\n  }\n","realPath":"gobblin-runtime/src/main/java/org/apache/gobblin/runtime/SafeDatasetCommit.java","repoName":"gobblin","snippetEndLine":0,"snippetStartLine":0,"startLine":390,"status":"M"}],"commitId":"7d11c65015acb4b52b4ae5dcf6f0f888ad097a2a","commitMessage":"@@@[GOBBLIN-370] added some log information\n\nCloses #2245 from arjun4084346/enhanceLogging\n","date":"2018-02-06 03:56:20","modifiedFileCount":"3","status":"M","submitter":"Arjun"},{"authorTime":"2019-08-28 07:59:35","codes":[{"authorDate":"2019-08-28 07:59:35","commitOrder":3,"curCode":"  private void finalizeDatasetStateBeforeCommit(JobState.DatasetState datasetState) {\n    for (TaskState taskState : datasetState.getTaskStates()) {\n      if (taskState.getWorkingState() != WorkUnitState.WorkingState.SUCCESSFUL\n          && this.jobContext.getJobCommitPolicy() == JobCommitPolicy.COMMIT_ON_FULL_SUCCESS) {\n        \r\n        datasetState.setState(JobState.RunningState.FAILED);\n        datasetState.incrementJobFailures();\n        Optional<String> taskStateException = taskState.getTaskFailureException();\n        String errMsg = \"At least one task did not committed successfully. Setting dataset state to FAILED. \"\n            + (taskStateException.isPresent() ? taskStateException.get() : \"Exception not set.\");\n        log.warn(errMsg);\n        datasetState.setJobFailureMessage(errMsg);\n        return;\n      }\n    }\n\n    datasetState.setState(JobState.RunningState.SUCCESSFUL);\n    datasetState.setNoJobFailure();\n  }\n","date":"2019-08-28 07:59:35","endLine":340,"groupId":"804","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"finalizeDatasetStateBeforeCommit","params":"(JobState.DatasetStatedatasetState)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-gobblin-10-0.7/blobInfo/CC_OUT/blobs/d9/f63b12ccf0393d02b307803a8123838f553203.src","preCode":"  private void finalizeDatasetStateBeforeCommit(JobState.DatasetState datasetState) {\n    for (TaskState taskState : datasetState.getTaskStates()) {\n      if (taskState.getWorkingState() != WorkUnitState.WorkingState.SUCCESSFUL\n          && this.jobContext.getJobCommitPolicy() == JobCommitPolicy.COMMIT_ON_FULL_SUCCESS) {\n        \r\n        datasetState.setState(JobState.RunningState.FAILED);\n        datasetState.incrementJobFailures();\n        return;\n      }\n    }\n\n    datasetState.setState(JobState.RunningState.SUCCESSFUL);\n    datasetState.setNoJobFailure();\n  }\n","realPath":"gobblin-runtime/src/main/java/org/apache/gobblin/runtime/SafeDatasetCommit.java","repoName":"gobblin","snippetEndLine":0,"snippetStartLine":0,"startLine":322,"status":"M"},{"authorDate":"2019-08-28 07:59:35","commitOrder":3,"curCode":"  private void finalizeDatasetState(JobState.DatasetState datasetState, String datasetUrn) {\n    for (TaskState taskState : datasetState.getTaskStates()) {\n      \r\n      if (taskState.getWorkingState() != WorkUnitState.WorkingState.COMMITTED) {\n        taskState.backoffActualHighWatermark();\n        if (this.jobContext.getJobCommitPolicy() == JobCommitPolicy.COMMIT_ON_FULL_SUCCESS) {\n          \r\n          \r\n          \r\n          \r\n          \r\n          datasetState.setState(JobState.RunningState.FAILED);\n          Optional<String> taskStateException = taskState.getTaskFailureException();\n          String errMsg = \"At least one task did not committed successfully. Setting dataset state to FAILED. \"\n              + (taskStateException.isPresent() ? taskStateException.get() : \"Exception not set.\");\n          log.warn(errMsg);\n          datasetState.setJobFailureMessage(errMsg);\n        }\n      }\n    }\n\n    datasetState.setId(datasetUrn);\n  }\n","date":"2019-08-28 07:59:35","endLine":418,"groupId":"6402","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"finalizeDatasetState","params":"(JobState.DatasetStatedatasetState@StringdatasetUrn)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-gobblin-10-0.7/blobInfo/CC_OUT/blobs/d9/f63b12ccf0393d02b307803a8123838f553203.src","preCode":"  private void finalizeDatasetState(JobState.DatasetState datasetState, String datasetUrn) {\n    for (TaskState taskState : datasetState.getTaskStates()) {\n      \r\n      if (taskState.getWorkingState() != WorkUnitState.WorkingState.COMMITTED) {\n        taskState.backoffActualHighWatermark();\n        if (this.jobContext.getJobCommitPolicy() == JobCommitPolicy.COMMIT_ON_FULL_SUCCESS) {\n          \r\n          \r\n          \r\n          \r\n          \r\n          datasetState.setState(JobState.RunningState.FAILED);\n          Optional<String> taskStateException = taskState.getTaskFailureException();\n          log.warn(\"At least one task did not committed successfully. Setting dataset state to FAILED.\",\n              taskStateException.isPresent() ? taskStateException.get() : \"Exception not set.\");\n        }\n      }\n    }\n\n    datasetState.setId(datasetUrn);\n  }\n","realPath":"gobblin-runtime/src/main/java/org/apache/gobblin/runtime/SafeDatasetCommit.java","repoName":"gobblin","snippetEndLine":0,"snippetStartLine":0,"startLine":396,"status":"M"}],"commitId":"9bf9a882427e98e7f4ef089c4ca1bde42f4b36a3","commitMessage":"@@@[GOBBLIN-864] add job error message in job state\n\nCloses #2720 from arjun4084346/storeErrorMessages\n","date":"2019-08-28 07:59:35","modifiedFileCount":"7","status":"M","submitter":"Arjun"},{"authorTime":"2019-10-03 04:13:20","codes":[{"authorDate":"2019-10-03 04:13:20","commitOrder":4,"curCode":"  private void finalizeDatasetStateBeforeCommit(JobState.DatasetState datasetState) {\n    for (TaskState taskState : datasetState.getTaskStates()) {\n      if (taskState.getWorkingState() != WorkUnitState.WorkingState.SUCCESSFUL\n          && this.jobContext.getJobCommitPolicy() == JobCommitPolicy.COMMIT_ON_FULL_SUCCESS) {\n        \r\n        datasetState.setState(JobState.RunningState.FAILED);\n        datasetState.incrementJobFailures();\n        Optional<String> taskStateException = taskState.getTaskFailureException();\n        log.warn(\"At least one task did not committed successfully. Setting dataset state to FAILED. \"\n            + (taskStateException.isPresent() ? taskStateException.get() : \"Exception not set.\"));\n        return;\n      }\n    }\n\n    datasetState.setState(JobState.RunningState.SUCCESSFUL);\n    datasetState.setNoJobFailure();\n  }\n","date":"2019-10-03 04:13:20","endLine":338,"groupId":"10832","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"finalizeDatasetStateBeforeCommit","params":"(JobState.DatasetStatedatasetState)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-gobblin-10-0.7/blobInfo/CC_OUT/blobs/57/82196239dab147f3980c58f94077ebebbc41ae.src","preCode":"  private void finalizeDatasetStateBeforeCommit(JobState.DatasetState datasetState) {\n    for (TaskState taskState : datasetState.getTaskStates()) {\n      if (taskState.getWorkingState() != WorkUnitState.WorkingState.SUCCESSFUL\n          && this.jobContext.getJobCommitPolicy() == JobCommitPolicy.COMMIT_ON_FULL_SUCCESS) {\n        \r\n        datasetState.setState(JobState.RunningState.FAILED);\n        datasetState.incrementJobFailures();\n        Optional<String> taskStateException = taskState.getTaskFailureException();\n        String errMsg = \"At least one task did not committed successfully. Setting dataset state to FAILED. \"\n            + (taskStateException.isPresent() ? taskStateException.get() : \"Exception not set.\");\n        log.warn(errMsg);\n        datasetState.setJobFailureMessage(errMsg);\n        return;\n      }\n    }\n\n    datasetState.setState(JobState.RunningState.SUCCESSFUL);\n    datasetState.setNoJobFailure();\n  }\n","realPath":"gobblin-runtime/src/main/java/org/apache/gobblin/runtime/SafeDatasetCommit.java","repoName":"gobblin","snippetEndLine":0,"snippetStartLine":0,"startLine":322,"status":"M"},{"authorDate":"2019-10-03 04:13:20","commitOrder":4,"curCode":"  private void finalizeDatasetState(JobState.DatasetState datasetState, String datasetUrn) {\n    for (TaskState taskState : datasetState.getTaskStates()) {\n      \r\n      if (taskState.getWorkingState() != WorkUnitState.WorkingState.COMMITTED) {\n        taskState.backoffActualHighWatermark();\n        if (this.jobContext.getJobCommitPolicy() == JobCommitPolicy.COMMIT_ON_FULL_SUCCESS) {\n          \r\n          \r\n          \r\n          \r\n          \r\n          datasetState.setState(JobState.RunningState.FAILED);\n          Optional<String> taskStateException = taskState.getTaskFailureException();\n          log.warn(\"At least one task did not committed successfully. Setting dataset state to FAILED. {}\",\n              taskStateException.isPresent() ? taskStateException.get() : \"Exception not set.\");\n        }\n      }\n    }\n\n    datasetState.setId(datasetUrn);\n  }\n","date":"2019-10-03 04:13:20","endLine":414,"groupId":"10832","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"finalizeDatasetState","params":"(JobState.DatasetStatedatasetState@StringdatasetUrn)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-gobblin-10-0.7/blobInfo/CC_OUT/blobs/57/82196239dab147f3980c58f94077ebebbc41ae.src","preCode":"  private void finalizeDatasetState(JobState.DatasetState datasetState, String datasetUrn) {\n    for (TaskState taskState : datasetState.getTaskStates()) {\n      \r\n      if (taskState.getWorkingState() != WorkUnitState.WorkingState.COMMITTED) {\n        taskState.backoffActualHighWatermark();\n        if (this.jobContext.getJobCommitPolicy() == JobCommitPolicy.COMMIT_ON_FULL_SUCCESS) {\n          \r\n          \r\n          \r\n          \r\n          \r\n          datasetState.setState(JobState.RunningState.FAILED);\n          Optional<String> taskStateException = taskState.getTaskFailureException();\n          String errMsg = \"At least one task did not committed successfully. Setting dataset state to FAILED. \"\n              + (taskStateException.isPresent() ? taskStateException.get() : \"Exception not set.\");\n          log.warn(errMsg);\n          datasetState.setJobFailureMessage(errMsg);\n        }\n      }\n    }\n\n    datasetState.setId(datasetUrn);\n  }\n","realPath":"gobblin-runtime/src/main/java/org/apache/gobblin/runtime/SafeDatasetCommit.java","repoName":"gobblin","snippetEndLine":0,"snippetStartLine":0,"startLine":394,"status":"M"}],"commitId":"32805d9105d9d506743aa37b7c39119d6cd5ffe2","commitMessage":"@@@[GOBBLIN-892][GOBBLIN-864] reverting back bad changes done in PR 2720\n\nCloses #2747 from arjun4084346/fix\n","date":"2019-10-03 04:13:20","modifiedFileCount":"1","status":"M","submitter":"Arjun"}]
