[{"authorTime":"2017-04-27 06:34:25","codes":[{"authorDate":"2017-04-27 06:34:25","commitOrder":1,"curCode":"  public void testGenericTaskAndDisabledRebalanceAndNodeDown() throws InterruptedException {\n    WORKFLOW = TestHelper.getTestMethodName();\n    startParticipant(_initialNumNodes);\n\n    JobConfig.Builder jobBuilder = new JobConfig.Builder()\n        .setWorkflow(WORKFLOW)\n        .setNumberOfTasks(10) \r\n                              \r\n        .setNumConcurrentTasksPerInstance(100)\n        .setCommand(MockTask.TASK_COMMAND)\n        .setJobCommandConfigMap(ImmutableMap.of(MockTask.TIMEOUT_CONFIG, \"99999999\")); \r\n\n    Workflow.Builder workflowBuilder = new Workflow.Builder(WORKFLOW)\n        .addJob(JOB, jobBuilder);\n\n    _driver.start(workflowBuilder.build());\n\n    Assert.assertTrue(checkTasksOnDifferentInstances());\n    \r\n    stopParticipant(_initialNumNodes);\n    Assert.assertTrue(checkTasksOnSameInstances());\n  }\n","date":"2017-07-13 04:58:05","endLine":157,"groupId":"3403","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testGenericTaskAndDisabledRebalanceAndNodeDown","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/10/d7cc4f4c87acaa2a5dcd8a19d1b73a33fdf1b1.src","preCode":"  public void testGenericTaskAndDisabledRebalanceAndNodeDown() throws InterruptedException {\n    WORKFLOW = TestHelper.getTestMethodName();\n    startParticipant(_initialNumNodes);\n\n    JobConfig.Builder jobBuilder = new JobConfig.Builder()\n        .setWorkflow(WORKFLOW)\n        .setNumberOfTasks(10) \r\n                              \r\n        .setNumConcurrentTasksPerInstance(100)\n        .setCommand(MockTask.TASK_COMMAND)\n        .setJobCommandConfigMap(ImmutableMap.of(MockTask.TIMEOUT_CONFIG, \"99999999\")); \r\n\n    Workflow.Builder workflowBuilder = new Workflow.Builder(WORKFLOW)\n        .addJob(JOB, jobBuilder);\n\n    _driver.start(workflowBuilder.build());\n\n    Assert.assertTrue(checkTasksOnDifferentInstances());\n    \r\n    stopParticipant(_initialNumNodes);\n    Assert.assertTrue(checkTasksOnSameInstances());\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestRebalanceRunningTask.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":136,"status":"B"},{"authorDate":"2017-04-27 06:34:25","commitOrder":1,"curCode":"  public void testFixedTargetTaskAndDisabledRebalanceAndNodeDown() throws InterruptedException {\n    WORKFLOW = TestHelper.getTestMethodName();\n    startParticipant(_initialNumNodes);\n\n    JobConfig.Builder jobBuilder = new JobConfig.Builder()\n        .setWorkflow(WORKFLOW)\n        .setTargetResource(DATABASE)\n        .setNumConcurrentTasksPerInstance(100)\n        .setCommand(MockTask.TASK_COMMAND)\n        .setJobCommandConfigMap(ImmutableMap.of(MockTask.TIMEOUT_CONFIG, \"99999999\"));\n\n    Workflow.Builder workflowBuilder = new Workflow.Builder(WORKFLOW)\n        .addJob(JOB, jobBuilder);\n\n    _driver.start(workflowBuilder.build());\n\n    Assert.assertTrue(checkTasksOnDifferentInstances());\n    \r\n    \r\n    stopParticipant(_initialNumNodes);\n    Assert.assertTrue(checkTasksOnSameInstances());\n  }\n","date":"2017-07-13 04:58:05","endLine":250,"groupId":"3403","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testFixedTargetTaskAndDisabledRebalanceAndNodeDown","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/10/d7cc4f4c87acaa2a5dcd8a19d1b73a33fdf1b1.src","preCode":"  public void testFixedTargetTaskAndDisabledRebalanceAndNodeDown() throws InterruptedException {\n    WORKFLOW = TestHelper.getTestMethodName();\n    startParticipant(_initialNumNodes);\n\n    JobConfig.Builder jobBuilder = new JobConfig.Builder()\n        .setWorkflow(WORKFLOW)\n        .setTargetResource(DATABASE)\n        .setNumConcurrentTasksPerInstance(100)\n        .setCommand(MockTask.TASK_COMMAND)\n        .setJobCommandConfigMap(ImmutableMap.of(MockTask.TIMEOUT_CONFIG, \"99999999\"));\n\n    Workflow.Builder workflowBuilder = new Workflow.Builder(WORKFLOW)\n        .addJob(JOB, jobBuilder);\n\n    _driver.start(workflowBuilder.build());\n\n    Assert.assertTrue(checkTasksOnDifferentInstances());\n    \r\n    \r\n    stopParticipant(_initialNumNodes);\n    Assert.assertTrue(checkTasksOnSameInstances());\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestRebalanceRunningTask.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":229,"status":"B"}],"commitId":"8cbbf834efa30b07c31067e1b48ac6332763b02e","commitMessage":"@@@[HELIX-654] Running task rebalance\n\nAdd a job config RebalanceRunningTask.\n\nFor generic task.  if feature is enabled.  Helix will drop running\ntasks that are assigned differently from the previous assignment. \nwhich will cause cancellation of that running task on participant.\nThe task will then be re-assigned to a new instance.\n\nFor fix target task.  running task always follows the partition.  so\ntasks are always re-assigned as needed.\n\nAdd different test cases for this feature enabled/disabled.\n","date":"2017-07-13 04:58:05","modifiedFileCount":"10","status":"B","submitter":"Weihan Kong"},{"authorTime":"2018-04-21 07:11:27","codes":[{"authorDate":"2018-04-21 07:11:27","commitOrder":2,"curCode":"  public void testGenericTaskAndDisabledRebalanceAndNodeDown() throws InterruptedException {\n    WORKFLOW = TestHelper.getTestMethodName();\n    startParticipant(_initialNumNodes);\n\n    JobConfig.Builder jobBuilder = new JobConfig.Builder()\n        .setWorkflow(WORKFLOW)\n        .setNumberOfTasks(10) \r\n        \r\n        .setNumConcurrentTasksPerInstance(100)\n        .setCommand(MockTask.TASK_COMMAND)\n        .setJobCommandConfigMap(ImmutableMap.of(MockTask.JOB_DELAY, \"99999999\")); \r\n\n    Workflow.Builder workflowBuilder = new Workflow.Builder(WORKFLOW)\n        .addJob(JOB, jobBuilder);\n\n    _driver.start(workflowBuilder.build());\n\n    Assert.assertTrue(checkTasksOnDifferentInstances());\n    \r\n    stopParticipant(_initialNumNodes);\n    Assert.assertTrue(checkTasksOnSameInstances());\n  }\n","date":"2018-04-25 03:45:43","endLine":149,"groupId":"10551","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testGenericTaskAndDisabledRebalanceAndNodeDown","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/f5/18d5c481235b038d87052a60a6d49f7a60c53b.src","preCode":"  public void testGenericTaskAndDisabledRebalanceAndNodeDown() throws InterruptedException {\n    WORKFLOW = TestHelper.getTestMethodName();\n    startParticipant(_initialNumNodes);\n\n    JobConfig.Builder jobBuilder = new JobConfig.Builder()\n        .setWorkflow(WORKFLOW)\n        .setNumberOfTasks(10) \r\n        \r\n        .setNumConcurrentTasksPerInstance(100)\n        .setCommand(MockTask.TASK_COMMAND)\n        .setJobCommandConfigMap(ImmutableMap.of(MockTask.TIMEOUT_CONFIG, \"99999999\")); \r\n\n    Workflow.Builder workflowBuilder = new Workflow.Builder(WORKFLOW)\n        .addJob(JOB, jobBuilder);\n\n    _driver.start(workflowBuilder.build());\n\n    Assert.assertTrue(checkTasksOnDifferentInstances());\n    \r\n    stopParticipant(_initialNumNodes);\n    Assert.assertTrue(checkTasksOnSameInstances());\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestRebalanceRunningTask.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":128,"status":"M"},{"authorDate":"2018-04-21 07:11:27","commitOrder":2,"curCode":"  public void testFixedTargetTaskAndDisabledRebalanceAndNodeDown() throws InterruptedException {\n    WORKFLOW = TestHelper.getTestMethodName();\n    startParticipant(_initialNumNodes);\n\n    JobConfig.Builder jobBuilder = new JobConfig.Builder()\n        .setWorkflow(WORKFLOW)\n        .setTargetResource(DATABASE)\n        .setNumConcurrentTasksPerInstance(100)\n        .setCommand(MockTask.TASK_COMMAND)\n        .setJobCommandConfigMap(ImmutableMap.of(MockTask.JOB_DELAY, \"99999999\"));\n\n    Workflow.Builder workflowBuilder = new Workflow.Builder(WORKFLOW)\n        .addJob(JOB, jobBuilder);\n\n    _driver.start(workflowBuilder.build());\n\n    Assert.assertTrue(checkTasksOnDifferentInstances());\n    \r\n    \r\n    stopParticipant(_initialNumNodes);\n    Assert.assertTrue(checkTasksOnSameInstances());\n  }\n","date":"2018-04-25 03:45:43","endLine":242,"groupId":"10551","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testFixedTargetTaskAndDisabledRebalanceAndNodeDown","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/f5/18d5c481235b038d87052a60a6d49f7a60c53b.src","preCode":"  public void testFixedTargetTaskAndDisabledRebalanceAndNodeDown() throws InterruptedException {\n    WORKFLOW = TestHelper.getTestMethodName();\n    startParticipant(_initialNumNodes);\n\n    JobConfig.Builder jobBuilder = new JobConfig.Builder()\n        .setWorkflow(WORKFLOW)\n        .setTargetResource(DATABASE)\n        .setNumConcurrentTasksPerInstance(100)\n        .setCommand(MockTask.TASK_COMMAND)\n        .setJobCommandConfigMap(ImmutableMap.of(MockTask.TIMEOUT_CONFIG, \"99999999\"));\n\n    Workflow.Builder workflowBuilder = new Workflow.Builder(WORKFLOW)\n        .addJob(JOB, jobBuilder);\n\n    _driver.start(workflowBuilder.build());\n\n    Assert.assertTrue(checkTasksOnDifferentInstances());\n    \r\n    \r\n    stopParticipant(_initialNumNodes);\n    Assert.assertTrue(checkTasksOnSameInstances());\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestRebalanceRunningTask.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":221,"status":"M"}],"commitId":"d2fb22d1f3a3db602b27cba7ed8d814cb931622e","commitMessage":"@@@Fix a few of unstable integration tests.\n","date":"2018-04-25 03:45:43","modifiedFileCount":"18","status":"M","submitter":"Lei Xia"}]
