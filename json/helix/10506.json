[{"authorTime":"2016-05-11 02:44:25","codes":[{"authorDate":"2016-08-19 04:33:31","commitOrder":6,"curCode":"  public void testWorkflowAndJobTaskUserContentStore() throws InterruptedException {\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(1);\n    Map<String, String> taskConfigMap = Maps.newHashMap();\n    TaskConfig taskConfig1 = new TaskConfig(\"ContentStoreTask\", taskConfigMap, false);\n    taskConfigs.add(taskConfig1);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n    jobCommandMap.put(\"Timeout\", \"1000\");\n\n    JobConfig.Builder jobBuilder = new JobConfig.Builder().setCommand(\"DummyCommand\")\n        .addTaskConfigs(taskConfigs)\n        .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n\n    _driver.start(workflowBuilder.build());\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n    Assert\n        .assertEquals(_driver.getWorkflowContext(jobName).getWorkflowState(), TaskState.COMPLETED);\n  }\n","date":"2016-09-01 01:54:32","endLine":140,"groupId":"4403","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testWorkflowAndJobTaskUserContentStore","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/b2/b27efa9f159a5f1d89050ae1890a04943a72a5.src","preCode":"  public void testWorkflowAndJobTaskUserContentStore() throws InterruptedException {\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(1);\n    Map<String, String> taskConfigMap = Maps.newHashMap();\n    TaskConfig taskConfig1 = new TaskConfig(\"ContentStoreTask\", taskConfigMap, false);\n    taskConfigs.add(taskConfig1);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n    jobCommandMap.put(\"Timeout\", \"1000\");\n\n    JobConfig.Builder jobBuilder = new JobConfig.Builder().setCommand(\"DummyCommand\")\n        .addTaskConfigs(taskConfigs)\n        .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n\n    _driver.start(workflowBuilder.build());\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n    Assert\n        .assertEquals(_driver.getWorkflowContext(jobName).getWorkflowState(), TaskState.COMPLETED);\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestUserContentStore.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":121,"status":"B"},{"authorDate":"2016-05-11 02:44:25","commitOrder":6,"curCode":"  public void testDelayedRetry() throws Exception {\n    \r\n    int delay = 3000;\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(1);\n    Map<String, String> taskConfigMap = Maps.newHashMap();\n    TaskConfig taskConfig1 = new TaskConfig(\"SingleFailTask\", taskConfigMap, false);\n    taskConfigs.add(taskConfig1);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n\n    JobConfig.Builder jobBuilder = new JobConfig.Builder().setCommand(\"DummyCommand\")\n        .setTaskRetryDelay(delay).addTaskConfigs(taskConfigs)\n        .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n\n    SingleFailTask.hasFailed = false;\n    _driver.start(workflowBuilder.build());\n\n    \r\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n\n    \r\n    JobContext jobCtx = _driver.getJobContext(jobName + \"_\" + jobName);\n    Assert.assertEquals(jobCtx.getPartitionNumAttempts(0), 2);\n    Assert.assertTrue(jobCtx.getFinishTime() - jobCtx.getStartTime() >= delay);\n  }\n","date":"2016-07-06 07:21:13","endLine":311,"groupId":"6311","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testDelayedRetry","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/49/b4bf438bddc2da3a50f9edfffdb9f35a7729b8.src","preCode":"  public void testDelayedRetry() throws Exception {\n    \r\n    int delay = 3000;\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(1);\n    Map<String, String> taskConfigMap = Maps.newHashMap();\n    TaskConfig taskConfig1 = new TaskConfig(\"SingleFailTask\", taskConfigMap, false);\n    taskConfigs.add(taskConfig1);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n\n    JobConfig.Builder jobBuilder = new JobConfig.Builder().setCommand(\"DummyCommand\")\n        .setTaskRetryDelay(delay).addTaskConfigs(taskConfigs)\n        .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n\n    SingleFailTask.hasFailed = false;\n    _driver.start(workflowBuilder.build());\n\n    \r\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n\n    \r\n    JobContext jobCtx = _driver.getJobContext(jobName + \"_\" + jobName);\n    Assert.assertEquals(jobCtx.getPartitionNumAttempts(0), 2);\n    Assert.assertTrue(jobCtx.getFinishTime() - jobCtx.getStartTime() >= delay);\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestIndependentTaskRebalancer.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":285,"status":"NB"}],"commitId":"adfe4dda8aaef6b1ea088acaf24bd120f6fe250d","commitMessage":"@@@Support user defined content store per workflow/job/task layer\n\n1. Add feature to support workflow/job/task layer key value user defined content store\n2. Add test case for workflow/job/task layer key-value pair store and verify.\n","date":"2016-09-01 01:54:32","modifiedFileCount":"4","status":"M","submitter":"Junkai Xue"},{"authorTime":"2016-09-14 07:01:39","codes":[{"authorDate":"2016-09-14 07:01:39","commitOrder":7,"curCode":"  public void testWorkflowAndJobTaskUserContentStore() throws InterruptedException {\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(1);\n    Map<String, String> taskConfigMap = Maps.newHashMap();\n    TaskConfig taskConfig1 = new TaskConfig(\"ContentStoreTask\", taskConfigMap);\n    taskConfigs.add(taskConfig1);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n    jobCommandMap.put(\"Timeout\", \"1000\");\n\n    JobConfig.Builder jobBuilder = new JobConfig.Builder().setCommand(\"DummyCommand\")\n        .addTaskConfigs(taskConfigs)\n        .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n\n    _driver.start(workflowBuilder.build());\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n    Assert\n        .assertEquals(_driver.getWorkflowContext(jobName).getWorkflowState(), TaskState.COMPLETED);\n  }\n","date":"2016-09-22 01:43:35","endLine":140,"groupId":"4403","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testWorkflowAndJobTaskUserContentStore","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/13/cd5311acf4b17542d1dbf06c1418a65ab0cab4.src","preCode":"  public void testWorkflowAndJobTaskUserContentStore() throws InterruptedException {\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(1);\n    Map<String, String> taskConfigMap = Maps.newHashMap();\n    TaskConfig taskConfig1 = new TaskConfig(\"ContentStoreTask\", taskConfigMap, false);\n    taskConfigs.add(taskConfig1);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n    jobCommandMap.put(\"Timeout\", \"1000\");\n\n    JobConfig.Builder jobBuilder = new JobConfig.Builder().setCommand(\"DummyCommand\")\n        .addTaskConfigs(taskConfigs)\n        .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n\n    _driver.start(workflowBuilder.build());\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n    Assert\n        .assertEquals(_driver.getWorkflowContext(jobName).getWorkflowState(), TaskState.COMPLETED);\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestUserContentStore.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":121,"status":"M"},{"authorDate":"2016-09-14 07:01:39","commitOrder":7,"curCode":"  public void testDelayedRetry() throws Exception {\n    \r\n    int delay = 3000;\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(1);\n    Map<String, String> taskConfigMap = Maps.newHashMap();\n    TaskConfig taskConfig1 = new TaskConfig(\"SingleFailTask\", taskConfigMap);\n    taskConfigs.add(taskConfig1);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n\n    JobConfig.Builder jobBuilder = new JobConfig.Builder().setCommand(\"DummyCommand\")\n        .setTaskRetryDelay(delay).addTaskConfigs(taskConfigs)\n        .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n\n    SingleFailTask.hasFailed = false;\n    _driver.start(workflowBuilder.build());\n\n    \r\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n\n    \r\n    JobContext jobCtx = _driver.getJobContext(jobName + \"_\" + jobName);\n    Assert.assertEquals(jobCtx.getPartitionNumAttempts(0), 2);\n    Assert.assertTrue(jobCtx.getFinishTime() - jobCtx.getStartTime() >= delay);\n  }\n","date":"2016-09-22 01:43:35","endLine":282,"groupId":"2582","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testDelayedRetry","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/64/b9073e53f10994f831ab8508b03772d93d0569.src","preCode":"  public void testDelayedRetry() throws Exception {\n    \r\n    int delay = 3000;\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(1);\n    Map<String, String> taskConfigMap = Maps.newHashMap();\n    TaskConfig taskConfig1 = new TaskConfig(\"SingleFailTask\", taskConfigMap, false);\n    taskConfigs.add(taskConfig1);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n\n    JobConfig.Builder jobBuilder = new JobConfig.Builder().setCommand(\"DummyCommand\")\n        .setTaskRetryDelay(delay).addTaskConfigs(taskConfigs)\n        .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n\n    SingleFailTask.hasFailed = false;\n    _driver.start(workflowBuilder.build());\n\n    \r\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n\n    \r\n    JobContext jobCtx = _driver.getJobContext(jobName + \"_\" + jobName);\n    Assert.assertEquals(jobCtx.getPartitionNumAttempts(0), 2);\n    Assert.assertTrue(jobCtx.getFinishTime() - jobCtx.getStartTime() >= delay);\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestIndependentTaskRebalancer.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":256,"status":"M"}],"commitId":"9fc6c540bbcb4d7c71f0b7fe89e2acbc5955e859","commitMessage":"@@@Job Config and logic refactoring\n\n1. Support identical task initialization with job command and number of tasks\n2. Remove unused MaxForcedReassignmentPerTask field\n3. Refactor logics of failure.\n","date":"2016-09-22 01:43:35","modifiedFileCount":"8","status":"M","submitter":"Junkai Xue"},{"authorTime":"2016-09-14 07:01:39","codes":[{"authorDate":"2016-12-16 10:20:03","commitOrder":8,"curCode":"  public void testWorkflowAndJobTaskUserContentStore() throws InterruptedException {\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(1);\n    Map<String, String> taskConfigMap = Maps.newHashMap();\n    TaskConfig taskConfig1 = new TaskConfig(\"ContentStoreTask\", taskConfigMap);\n    taskConfigs.add(taskConfig1);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n    jobCommandMap.put(\"Timeout\", \"1000\");\n\n    JobConfig.Builder jobBuilder = new JobConfig.Builder().setCommand(\"DummyCommand\")\n        .addTaskConfigs(taskConfigs).setWorkflow(jobName)\n        .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n\n    _driver.start(workflowBuilder.build());\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n    Assert\n        .assertEquals(_driver.getWorkflowContext(jobName).getWorkflowState(), TaskState.COMPLETED);\n  }\n","date":"2016-12-16 10:20:03","endLine":140,"groupId":"10506","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"testWorkflowAndJobTaskUserContentStore","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/eb/90a34fff1ffeded471de704395f537aea8f98e.src","preCode":"  public void testWorkflowAndJobTaskUserContentStore() throws InterruptedException {\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(1);\n    Map<String, String> taskConfigMap = Maps.newHashMap();\n    TaskConfig taskConfig1 = new TaskConfig(\"ContentStoreTask\", taskConfigMap);\n    taskConfigs.add(taskConfig1);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n    jobCommandMap.put(\"Timeout\", \"1000\");\n\n    JobConfig.Builder jobBuilder = new JobConfig.Builder().setCommand(\"DummyCommand\")\n        .addTaskConfigs(taskConfigs)\n        .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n\n    _driver.start(workflowBuilder.build());\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n    Assert\n        .assertEquals(_driver.getWorkflowContext(jobName).getWorkflowState(), TaskState.COMPLETED);\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestUserContentStore.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":121,"status":"M"},{"authorDate":"2016-09-14 07:01:39","commitOrder":8,"curCode":"  public void testDelayedRetry() throws Exception {\n    \r\n    int delay = 3000;\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(1);\n    Map<String, String> taskConfigMap = Maps.newHashMap();\n    TaskConfig taskConfig1 = new TaskConfig(\"SingleFailTask\", taskConfigMap);\n    taskConfigs.add(taskConfig1);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n\n    JobConfig.Builder jobBuilder = new JobConfig.Builder().setCommand(\"DummyCommand\")\n        .setTaskRetryDelay(delay).addTaskConfigs(taskConfigs)\n        .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n\n    SingleFailTask.hasFailed = false;\n    _driver.start(workflowBuilder.build());\n\n    \r\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n\n    \r\n    JobContext jobCtx = _driver.getJobContext(jobName + \"_\" + jobName);\n    Assert.assertEquals(jobCtx.getPartitionNumAttempts(0), 2);\n    Assert.assertTrue(jobCtx.getFinishTime() - jobCtx.getStartTime() >= delay);\n  }\n","date":"2016-09-22 01:43:35","endLine":282,"groupId":"10506","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"testDelayedRetry","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/64/b9073e53f10994f831ab8508b03772d93d0569.src","preCode":"  public void testDelayedRetry() throws Exception {\n    \r\n    int delay = 3000;\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(1);\n    Map<String, String> taskConfigMap = Maps.newHashMap();\n    TaskConfig taskConfig1 = new TaskConfig(\"SingleFailTask\", taskConfigMap);\n    taskConfigs.add(taskConfig1);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n\n    JobConfig.Builder jobBuilder = new JobConfig.Builder().setCommand(\"DummyCommand\")\n        .setTaskRetryDelay(delay).addTaskConfigs(taskConfigs)\n        .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n\n    SingleFailTask.hasFailed = false;\n    _driver.start(workflowBuilder.build());\n\n    \r\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n\n    \r\n    JobContext jobCtx = _driver.getJobContext(jobName + \"_\" + jobName);\n    Assert.assertEquals(jobCtx.getPartitionNumAttempts(0), 2);\n    Assert.assertTrue(jobCtx.getFinishTime() - jobCtx.getStartTime() >= delay);\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestIndependentTaskRebalancer.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":256,"status":"N"}],"commitId":"1eb40c3ffb5191c94ec4055b692d2601723f91cf","commitMessage":"@@@[HELIX-648] Extend WorkflowConfig and JobConfig to ResourceConfig\n\nWorkflowConfig and JobConfig are stored as ResourceConfig but still needs extra conversion in current codebase. Thus we have to extend those two configs to ResourceConfig.\n","date":"2016-12-16 10:20:03","modifiedFileCount":"10","status":"M","submitter":"Junkai Xue"}]
