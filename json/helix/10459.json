[{"authorTime":"2017-11-09 06:56:09","codes":[{"authorDate":"2017-11-09 06:56:09","commitOrder":1,"curCode":"  public void testDisableInstance() throws InterruptedException {\n    \r\n    String prevMasterInstance = _instances.get(0);\n    _gSetupTool.getClusterManagementTool().enableInstance(CLUSTER_NAME, prevMasterInstance, false);\n    Assert.assertTrue(_clusterVerifier.verify());\n\n    validateRoutingTable(_routingTableProvider, Sets.newSet(_instances.get(1)),\n        Sets.newSet(_instances.get(2)));\n    validateRoutingTable(_routingTableProvider2, Sets.newSet(_instances.get(1)),\n        Sets.newSet(_instances.get(2)));\n  }\n","date":"2018-01-25 10:31:51","endLine":128,"groupId":"812","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testDisableInstance","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/aa/731e5b7fa15a4394c3fdb730251ddcbd4e7b02.src","preCode":"  public void testDisableInstance() throws InterruptedException {\n    \r\n    String prevMasterInstance = _instances.get(0);\n    _gSetupTool.getClusterManagementTool().enableInstance(CLUSTER_NAME, prevMasterInstance, false);\n    Assert.assertTrue(_clusterVerifier.verify());\n\n    validateRoutingTable(_routingTableProvider, Sets.newSet(_instances.get(1)),\n        Sets.newSet(_instances.get(2)));\n    validateRoutingTable(_routingTableProvider2, Sets.newSet(_instances.get(1)),\n        Sets.newSet(_instances.get(2)));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/Spectator/TestRoutingTableProvider.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":118,"status":"B"},{"authorDate":"2017-11-09 06:56:09","commitOrder":1,"curCode":"  public void testShutdownInstance() throws InterruptedException {\n    \r\n    String prevMasterInstance = _instances.get(0);\n    _gSetupTool.getClusterManagementTool().enableInstance(CLUSTER_NAME, prevMasterInstance, true);\n\n    \r\n    _participants.get(1).syncStop();\n\n    Assert.assertTrue(_clusterVerifier.verify());\n\n    Assert.assertEquals(_routingTableProvider.getLiveInstances().size(), _instances.size() - 1);\n    Assert.assertEquals(_routingTableProvider.getInstanceConfigs().size(), _instances.size());\n\n    Assert.assertEquals(_routingTableProvider2.getLiveInstances().size(), _instances.size() - 1);\n    Assert.assertEquals(_routingTableProvider2.getInstanceConfigs().size(), _instances.size());\n\n    validateRoutingTable(_routingTableProvider, Sets.newSet(_instances.get(0)),\n        Sets.newSet(_instances.get(2)));\n    validateRoutingTable(_routingTableProvider2, Sets.newSet(_instances.get(0)),\n        Sets.newSet(_instances.get(2)));\n  }\n","date":"2018-01-25 10:31:51","endLine":151,"groupId":"1388","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testShutdownInstance","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/aa/731e5b7fa15a4394c3fdb730251ddcbd4e7b02.src","preCode":"  public void testShutdownInstance() throws InterruptedException {\n    \r\n    String prevMasterInstance = _instances.get(0);\n    _gSetupTool.getClusterManagementTool().enableInstance(CLUSTER_NAME, prevMasterInstance, true);\n\n    \r\n    _participants.get(1).syncStop();\n\n    Assert.assertTrue(_clusterVerifier.verify());\n\n    Assert.assertEquals(_routingTableProvider.getLiveInstances().size(), _instances.size() - 1);\n    Assert.assertEquals(_routingTableProvider.getInstanceConfigs().size(), _instances.size());\n\n    Assert.assertEquals(_routingTableProvider2.getLiveInstances().size(), _instances.size() - 1);\n    Assert.assertEquals(_routingTableProvider2.getInstanceConfigs().size(), _instances.size());\n\n    validateRoutingTable(_routingTableProvider, Sets.newSet(_instances.get(0)),\n        Sets.newSet(_instances.get(2)));\n    validateRoutingTable(_routingTableProvider2, Sets.newSet(_instances.get(0)),\n        Sets.newSet(_instances.get(2)));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/Spectator/TestRoutingTableProvider.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":131,"status":"B"}],"commitId":"093f7ab949b1d6d77f8589b96e7a1a10762f7e6b","commitMessage":"@@@Improve the data load in Helix Spectator (RoutingTableProvider).  which includes:\n1) Put event callback handler in a spearate thread so other ZK event callbacks won't be blocked.\n2) Deduplicate the callbacks from same event type.  always keep just one latest copy of event callback in the event queue.\n3) Add methods to return all instances and liveInstances in the cluster.\n","date":"2018-01-25 10:31:51","modifiedFileCount":"9","status":"B","submitter":"Lei Xia"},{"authorTime":"2018-03-01 06:12:31","codes":[{"authorDate":"2017-11-09 06:56:09","commitOrder":2,"curCode":"  public void testDisableInstance() throws InterruptedException {\n    \r\n    String prevMasterInstance = _instances.get(0);\n    _gSetupTool.getClusterManagementTool().enableInstance(CLUSTER_NAME, prevMasterInstance, false);\n    Assert.assertTrue(_clusterVerifier.verify());\n\n    validateRoutingTable(_routingTableProvider, Sets.newSet(_instances.get(1)),\n        Sets.newSet(_instances.get(2)));\n    validateRoutingTable(_routingTableProvider2, Sets.newSet(_instances.get(1)),\n        Sets.newSet(_instances.get(2)));\n  }\n","date":"2018-01-25 10:31:51","endLine":128,"groupId":"812","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testDisableInstance","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/aa/731e5b7fa15a4394c3fdb730251ddcbd4e7b02.src","preCode":"  public void testDisableInstance() throws InterruptedException {\n    \r\n    String prevMasterInstance = _instances.get(0);\n    _gSetupTool.getClusterManagementTool().enableInstance(CLUSTER_NAME, prevMasterInstance, false);\n    Assert.assertTrue(_clusterVerifier.verify());\n\n    validateRoutingTable(_routingTableProvider, Sets.newSet(_instances.get(1)),\n        Sets.newSet(_instances.get(2)));\n    validateRoutingTable(_routingTableProvider2, Sets.newSet(_instances.get(1)),\n        Sets.newSet(_instances.get(2)));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/Spectator/TestRoutingTableProvider.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":118,"status":"N"},{"authorDate":"2018-03-01 06:12:31","commitOrder":2,"curCode":"  public void testShutdownInstance() throws InterruptedException {\n    \r\n    _participants.get(1).syncStop();\n\n    Assert.assertTrue(_clusterVerifier.verify());\n\n    Assert.assertEquals(_routingTableProvider.getLiveInstances().size(), _instances.size() - 1);\n    Assert.assertEquals(_routingTableProvider.getInstanceConfigs().size(), _instances.size());\n\n    Assert.assertEquals(_routingTableProvider2.getLiveInstances().size(), _instances.size() - 1);\n    Assert.assertEquals(_routingTableProvider2.getInstanceConfigs().size(), _instances.size());\n\n    validateRoutingTable(_routingTableProvider, Sets.newSet(_instances.get(0)),\n        Sets.newSet(_instances.get(2)));\n    validateRoutingTable(_routingTableProvider2, Sets.newSet(_instances.get(0)),\n        Sets.newSet(_instances.get(2)));\n  }\n","date":"2018-03-24 03:12:44","endLine":193,"groupId":"1388","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testShutdownInstance","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/6f/a7f6df5226efe411572edd015af8bab1d59a84.src","preCode":"  public void testShutdownInstance() throws InterruptedException {\n    \r\n    String prevMasterInstance = _instances.get(0);\n    _gSetupTool.getClusterManagementTool().enableInstance(CLUSTER_NAME, prevMasterInstance, true);\n\n    \r\n    _participants.get(1).syncStop();\n\n    Assert.assertTrue(_clusterVerifier.verify());\n\n    Assert.assertEquals(_routingTableProvider.getLiveInstances().size(), _instances.size() - 1);\n    Assert.assertEquals(_routingTableProvider.getInstanceConfigs().size(), _instances.size());\n\n    Assert.assertEquals(_routingTableProvider2.getLiveInstances().size(), _instances.size() - 1);\n    Assert.assertEquals(_routingTableProvider2.getInstanceConfigs().size(), _instances.size());\n\n    validateRoutingTable(_routingTableProvider, Sets.newSet(_instances.get(0)),\n        Sets.newSet(_instances.get(2)));\n    validateRoutingTable(_routingTableProvider2, Sets.newSet(_instances.get(0)),\n        Sets.newSet(_instances.get(2)));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/spectator/TestRoutingTableProvider.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":177,"status":"M"}],"commitId":"1c04f2f8b352e37fe9d64b40a7c9d14cbfb15e4c","commitMessage":"@@@Support RoutingTableChangeListener in RoutingTableProvider. Add test for it.\n","date":"2018-03-24 03:12:44","modifiedFileCount":"2","status":"M","submitter":"Junkai Xue"},{"authorTime":"2018-06-13 04:57:09","codes":[{"authorDate":"2018-06-13 04:57:09","commitOrder":3,"curCode":"  public void testDisableInstance() throws InterruptedException {\n    \r\n    String prevMasterInstance = _instances.get(0);\n    _gSetupTool.getClusterManagementTool().enableInstance(CLUSTER_NAME, prevMasterInstance, false);\n    Assert.assertTrue(_clusterVerifier.verifyByPolling());\n\n    validateRoutingTable(_routingTableProvider, Sets.newSet(_instances.get(1)),\n        Sets.newSet(_instances.get(2)));\n    validateRoutingTable(_routingTableProvider2, Sets.newSet(_instances.get(1)),\n        Sets.newSet(_instances.get(2)));\n  }\n","date":"2018-07-14 06:55:35","endLine":159,"groupId":"5928","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"testDisableInstance","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/23/1f68d75bbc4526fa823fece3a6c8e2f46394f9.src","preCode":"  public void testDisableInstance() throws InterruptedException {\n    \r\n    String prevMasterInstance = _instances.get(0);\n    _gSetupTool.getClusterManagementTool().enableInstance(CLUSTER_NAME, prevMasterInstance, false);\n    Assert.assertTrue(_clusterVerifier.verify());\n\n    validateRoutingTable(_routingTableProvider, Sets.newSet(_instances.get(1)),\n        Sets.newSet(_instances.get(2)));\n    validateRoutingTable(_routingTableProvider2, Sets.newSet(_instances.get(1)),\n        Sets.newSet(_instances.get(2)));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/spectator/TestRoutingTableProvider.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":149,"status":"M"},{"authorDate":"2018-06-13 04:57:09","commitOrder":3,"curCode":"  public void testShutdownInstance() throws InterruptedException {\n    \r\n    _participants.get(1).syncStop();\n\n    Assert.assertTrue(_clusterVerifier.verifyByPolling());\n\n    Assert.assertEquals(_routingTableProvider.getLiveInstances().size(), _instances.size() - 1);\n    Assert.assertEquals(_routingTableProvider.getInstanceConfigs().size(), _instances.size());\n\n    Assert.assertEquals(_routingTableProvider2.getLiveInstances().size(), _instances.size() - 1);\n    Assert.assertEquals(_routingTableProvider2.getInstanceConfigs().size(), _instances.size());\n\n    validateRoutingTable(_routingTableProvider, Sets.newSet(_instances.get(0)),\n        Sets.newSet(_instances.get(2)));\n    validateRoutingTable(_routingTableProvider2, Sets.newSet(_instances.get(0)),\n        Sets.newSet(_instances.get(2)));\n  }\n","date":"2018-07-14 06:55:35","endLine":195,"groupId":"1388","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"testShutdownInstance","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/23/1f68d75bbc4526fa823fece3a6c8e2f46394f9.src","preCode":"  public void testShutdownInstance() throws InterruptedException {\n    \r\n    _participants.get(1).syncStop();\n\n    Assert.assertTrue(_clusterVerifier.verify());\n\n    Assert.assertEquals(_routingTableProvider.getLiveInstances().size(), _instances.size() - 1);\n    Assert.assertEquals(_routingTableProvider.getInstanceConfigs().size(), _instances.size());\n\n    Assert.assertEquals(_routingTableProvider2.getLiveInstances().size(), _instances.size() - 1);\n    Assert.assertEquals(_routingTableProvider2.getInstanceConfigs().size(), _instances.size());\n\n    validateRoutingTable(_routingTableProvider, Sets.newSet(_instances.get(0)),\n        Sets.newSet(_instances.get(2)));\n    validateRoutingTable(_routingTableProvider2, Sets.newSet(_instances.get(0)),\n        Sets.newSet(_instances.get(2)));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/spectator/TestRoutingTableProvider.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":179,"status":"M"}],"commitId":"4609d94488f4e97e6bf1c233281ca39433c4f72e","commitMessage":"@@@Fix a couple of tests.  and reduce the total test times.\n","date":"2018-07-14 06:55:35","modifiedFileCount":"272","status":"M","submitter":"Lei Xia"},{"authorTime":"2018-06-30 06:07:53","codes":[{"authorDate":"2018-06-30 06:07:53","commitOrder":4,"curCode":"  public void testDisableInstance() throws InterruptedException {\n    \r\n    String prevMasterInstance = _instances.get(0);\n    _gSetupTool.getClusterManagementTool().enableInstance(CLUSTER_NAME, prevMasterInstance, false);\n    Assert.assertTrue(_clusterVerifier.verifyByPolling());\n\n    validateRoutingTable(_routingTableProvider_default, Sets.newSet(_instances.get(1)),\n        Sets.newSet(_instances.get(2)));\n    validateRoutingTable(_routingTableProvider_ev, Sets.newSet(_instances.get(1)),\n        Sets.newSet(_instances.get(2)));\n    validateRoutingTable(_routingTableProvider_cs, Sets.newSet(_instances.get(1)),\n        Sets.newSet(_instances.get(2)));\n  }\n","date":"2018-07-18 02:52:25","endLine":169,"groupId":"10459","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"testDisableInstance","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/01/fa6df38e4470b75caf8f4e324595326769366e.src","preCode":"  public void testDisableInstance() throws InterruptedException {\n    \r\n    String prevMasterInstance = _instances.get(0);\n    _gSetupTool.getClusterManagementTool().enableInstance(CLUSTER_NAME, prevMasterInstance, false);\n    Assert.assertTrue(_clusterVerifier.verifyByPolling());\n\n    validateRoutingTable(_routingTableProvider, Sets.newSet(_instances.get(1)),\n        Sets.newSet(_instances.get(2)));\n    validateRoutingTable(_routingTableProvider2, Sets.newSet(_instances.get(1)),\n        Sets.newSet(_instances.get(2)));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/spectator/TestRoutingTableProvider.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":157,"status":"M"},{"authorDate":"2018-06-30 06:07:53","commitOrder":4,"curCode":"  public void testShutdownInstance() throws InterruptedException {\n    \r\n    _participants.get(1).syncStop();\n\n    Assert.assertTrue(_clusterVerifier.verifyByPolling());\n\n    Assert.assertEquals(_routingTableProvider_default.getLiveInstances().size(), _instances.size() - 1);\n    Assert.assertEquals(_routingTableProvider_default.getInstanceConfigs().size(), _instances.size());\n\n    Assert.assertEquals(_routingTableProvider_ev.getLiveInstances().size(), _instances.size() - 1);\n    Assert.assertEquals(_routingTableProvider_ev.getInstanceConfigs().size(), _instances.size());\n\n    Assert.assertEquals(_routingTableProvider_cs.getLiveInstances().size(), _instances.size() - 1);\n    Assert.assertEquals(_routingTableProvider_cs.getInstanceConfigs().size(), _instances.size());\n\n    validateRoutingTable(_routingTableProvider_default, Sets.newSet(_instances.get(0)),\n        Sets.newSet(_instances.get(2)));\n    validateRoutingTable(_routingTableProvider_ev, Sets.newSet(_instances.get(0)),\n        Sets.newSet(_instances.get(2)));\n    validateRoutingTable(_routingTableProvider_cs, Sets.newSet(_instances.get(0)),\n        Sets.newSet(_instances.get(2)));\n  }\n","date":"2018-07-18 02:52:25","endLine":211,"groupId":"10459","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"testShutdownInstance","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/01/fa6df38e4470b75caf8f4e324595326769366e.src","preCode":"  public void testShutdownInstance() throws InterruptedException {\n    \r\n    _participants.get(1).syncStop();\n\n    Assert.assertTrue(_clusterVerifier.verifyByPolling());\n\n    Assert.assertEquals(_routingTableProvider.getLiveInstances().size(), _instances.size() - 1);\n    Assert.assertEquals(_routingTableProvider.getInstanceConfigs().size(), _instances.size());\n\n    Assert.assertEquals(_routingTableProvider2.getLiveInstances().size(), _instances.size() - 1);\n    Assert.assertEquals(_routingTableProvider2.getInstanceConfigs().size(), _instances.size());\n\n    validateRoutingTable(_routingTableProvider, Sets.newSet(_instances.get(0)),\n        Sets.newSet(_instances.get(2)));\n    validateRoutingTable(_routingTableProvider2, Sets.newSet(_instances.get(0)),\n        Sets.newSet(_instances.get(2)));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/spectator/TestRoutingTableProvider.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":190,"status":"M"}],"commitId":"acea2f16bce6c439fdc8d1dfb8ad37650679f822","commitMessage":"@@@Refine RoutingTable refresh() logic.\n\nSimplify the construtors.\nRefine Log string to a clearer statement.\nFixing a potential bug that empty instanceConfig is recorded in the RoutingTable.\n","date":"2018-07-18 02:52:25","modifiedFileCount":"2","status":"M","submitter":"Jiajun Wang"}]
