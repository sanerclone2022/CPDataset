[{"authorTime":"2016-12-17 09:21:43","codes":[{"authorDate":"2016-12-17 09:21:43","commitOrder":1,"curCode":"  public void testScheduleDelayTaskWithStartTime() throws InterruptedException {\n    String workflowName = TestHelper.getTestMethodName();\n    Workflow.Builder builder = new Workflow.Builder(workflowName);\n\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setTargetResource(WorkflowGenerator.DEFAULT_TGT_DB)\n            .setCommand(MockTask.TASK_COMMAND).setMaxAttemptsPerTask(2)\n            .setJobCommandConfigMap(WorkflowGenerator.DEFAULT_COMMAND_CONFIG);\n\n    long currentTime = System.currentTimeMillis();\n    builder.addParentChildDependency(\"Job1\", \"Job2\");\n    builder.addJob(\"Job1\", jobBuilder);\n    builder.addJob(\"Job2\", jobBuilder.setExecutionStart(currentTime + 5000L));\n\n    _driver.start(builder.build());\n    _driver.pollForJobState(workflowName, TaskUtil.getNamespacedJobName(workflowName, \"Job2\"),\n        TaskState.COMPLETED);\n\n    long jobTwoStartTime =\n        _driver.getJobContext(TaskUtil.getNamespacedJobName(workflowName, \"Job2\")).getStartTime();\n\n    Assert.assertTrue(jobTwoStartTime - currentTime >= 5000L);\n  }\n","date":"2017-01-28 06:34:23","endLine":100,"groupId":"1375","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testScheduleDelayTaskWithStartTime","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/f3/1435b7d6e268981a2108ff3419b3416789a7e8.src","preCode":"  public void testScheduleDelayTaskWithStartTime() throws InterruptedException {\n    String workflowName = TestHelper.getTestMethodName();\n    Workflow.Builder builder = new Workflow.Builder(workflowName);\n\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setTargetResource(WorkflowGenerator.DEFAULT_TGT_DB)\n            .setCommand(MockTask.TASK_COMMAND).setMaxAttemptsPerTask(2)\n            .setJobCommandConfigMap(WorkflowGenerator.DEFAULT_COMMAND_CONFIG);\n\n    long currentTime = System.currentTimeMillis();\n    builder.addParentChildDependency(\"Job1\", \"Job2\");\n    builder.addJob(\"Job1\", jobBuilder);\n    builder.addJob(\"Job2\", jobBuilder.setExecutionStart(currentTime + 5000L));\n\n    _driver.start(builder.build());\n    _driver.pollForJobState(workflowName, TaskUtil.getNamespacedJobName(workflowName, \"Job2\"),\n        TaskState.COMPLETED);\n\n    long jobTwoStartTime =\n        _driver.getJobContext(TaskUtil.getNamespacedJobName(workflowName, \"Job2\")).getStartTime();\n\n    Assert.assertTrue(jobTwoStartTime - currentTime >= 5000L);\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestScheduleDelayTask.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":78,"status":"B"},{"authorDate":"2016-12-17 09:21:43","commitOrder":1,"curCode":"  public void testDeplayTimeAndStartTime() throws InterruptedException {\n    String workflowName = TestHelper.getTestMethodName();\n    Workflow.Builder builder = new Workflow.Builder(workflowName);\n\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setTargetResource(WorkflowGenerator.DEFAULT_TGT_DB)\n            .setCommand(MockTask.TASK_COMMAND).setMaxAttemptsPerTask(2)\n            .setJobCommandConfigMap(WorkflowGenerator.DEFAULT_COMMAND_CONFIG);\n\n    builder.addParentChildDependency(\"Job1\", \"Job2\");\n\n    long currentTime = System.currentTimeMillis();\n    builder.addJob(\"Job1\", jobBuilder);\n    builder\n        .addJob(\"Job2\", jobBuilder.setExecutionDelay(2000L).setExecutionStart(currentTime + 5000L));\n\n    _driver.start(builder.build());\n    _driver.pollForJobState(workflowName, TaskUtil.getNamespacedJobName(workflowName, \"Job2\"),\n        TaskState.COMPLETED);\n\n    long jobTwoStartTime =\n        _driver.getJobContext(TaskUtil.getNamespacedJobName(workflowName, \"Job2\")).getStartTime();\n\n    Assert.assertTrue(jobTwoStartTime - currentTime >= 5000L);\n  }\n","date":"2017-01-28 06:34:23","endLine":155,"groupId":"6474","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testDeplayTimeAndStartTime","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/f3/1435b7d6e268981a2108ff3419b3416789a7e8.src","preCode":"  public void testDeplayTimeAndStartTime() throws InterruptedException {\n    String workflowName = TestHelper.getTestMethodName();\n    Workflow.Builder builder = new Workflow.Builder(workflowName);\n\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setTargetResource(WorkflowGenerator.DEFAULT_TGT_DB)\n            .setCommand(MockTask.TASK_COMMAND).setMaxAttemptsPerTask(2)\n            .setJobCommandConfigMap(WorkflowGenerator.DEFAULT_COMMAND_CONFIG);\n\n    builder.addParentChildDependency(\"Job1\", \"Job2\");\n\n    long currentTime = System.currentTimeMillis();\n    builder.addJob(\"Job1\", jobBuilder);\n    builder\n        .addJob(\"Job2\", jobBuilder.setExecutionDelay(2000L).setExecutionStart(currentTime + 5000L));\n\n    _driver.start(builder.build());\n    _driver.pollForJobState(workflowName, TaskUtil.getNamespacedJobName(workflowName, \"Job2\"),\n        TaskState.COMPLETED);\n\n    long jobTwoStartTime =\n        _driver.getJobContext(TaskUtil.getNamespacedJobName(workflowName, \"Job2\")).getStartTime();\n\n    Assert.assertTrue(jobTwoStartTime - currentTime >= 5000L);\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestScheduleDelayTask.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":131,"status":"B"}],"commitId":"594d94aca6d2bcc461e809c53d4ae2ee2d96cd0a","commitMessage":"@@@Support delaying jobs schedule with configurable delay time and start time\n","date":"2017-01-28 06:34:23","modifiedFileCount":"2","status":"B","submitter":"Junkai Xue"},{"authorTime":"2018-11-06 08:55:22","codes":[{"authorDate":"2018-11-06 08:55:22","commitOrder":2,"curCode":"  public void testScheduleDelayTaskWithStartTime() throws InterruptedException {\n    String workflowName = TestHelper.getTestMethodName();\n    Workflow.Builder builder = new Workflow.Builder(workflowName);\n\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setTargetResource(WorkflowGenerator.DEFAULT_TGT_DB)\n            .setCommand(MockTask.TASK_COMMAND).setMaxAttemptsPerTask(2)\n            .setJobCommandConfigMap(WorkflowGenerator.DEFAULT_COMMAND_CONFIG);\n\n    long currentTime = System.currentTimeMillis();\n    builder.addParentChildDependency(\"Job1\", \"Job2\");\n    builder.addJob(\"Job1\", jobBuilder);\n    builder.addJob(\"Job2\", jobBuilder.setExecutionStart(currentTime + 5000L));\n\n    _driver.start(builder.build());\n    _driver.pollForJobState(workflowName, TaskUtil.getNamespacedJobName(workflowName, \"Job2\"),\n        TaskState.COMPLETED);\n\n    long jobTwoStartTime = _driver.getWorkflowContext(workflowName)\n        .getJobStartTime(TaskUtil.getNamespacedJobName(workflowName, \"Job2\"));\n\n    Assert.assertTrue(jobTwoStartTime - currentTime >= 5000L);\n  }\n","date":"2019-02-26 08:59:48","endLine":97,"groupId":"10500","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testScheduleDelayTaskWithStartTime","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/59/cfa76bfa60c5100f2914127b289a8067c0c8fd.src","preCode":"  public void testScheduleDelayTaskWithStartTime() throws InterruptedException {\n    String workflowName = TestHelper.getTestMethodName();\n    Workflow.Builder builder = new Workflow.Builder(workflowName);\n\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setTargetResource(WorkflowGenerator.DEFAULT_TGT_DB)\n            .setCommand(MockTask.TASK_COMMAND).setMaxAttemptsPerTask(2)\n            .setJobCommandConfigMap(WorkflowGenerator.DEFAULT_COMMAND_CONFIG);\n\n    long currentTime = System.currentTimeMillis();\n    builder.addParentChildDependency(\"Job1\", \"Job2\");\n    builder.addJob(\"Job1\", jobBuilder);\n    builder.addJob(\"Job2\", jobBuilder.setExecutionStart(currentTime + 5000L));\n\n    _driver.start(builder.build());\n    _driver.pollForJobState(workflowName, TaskUtil.getNamespacedJobName(workflowName, \"Job2\"),\n        TaskState.COMPLETED);\n\n    long jobTwoStartTime =\n        _driver.getJobContext(TaskUtil.getNamespacedJobName(workflowName, \"Job2\")).getStartTime();\n\n    Assert.assertTrue(jobTwoStartTime - currentTime >= 5000L);\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestScheduleDelayTask.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":75,"status":"M"},{"authorDate":"2018-11-06 08:55:22","commitOrder":2,"curCode":"  public void testDeplayTimeAndStartTime() throws InterruptedException {\n    String workflowName = TestHelper.getTestMethodName();\n    Workflow.Builder builder = new Workflow.Builder(workflowName);\n\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setTargetResource(WorkflowGenerator.DEFAULT_TGT_DB)\n            .setCommand(MockTask.TASK_COMMAND).setMaxAttemptsPerTask(2)\n            .setJobCommandConfigMap(WorkflowGenerator.DEFAULT_COMMAND_CONFIG);\n\n    builder.addParentChildDependency(\"Job1\", \"Job2\");\n\n    long currentTime = System.currentTimeMillis();\n    builder.addJob(\"Job1\", jobBuilder);\n    builder\n        .addJob(\"Job2\", jobBuilder.setExecutionDelay(2000L).setExecutionStart(currentTime + 5000L));\n\n    _driver.start(builder.build());\n    _driver.pollForJobState(workflowName, TaskUtil.getNamespacedJobName(workflowName, \"Job2\"),\n        TaskState.COMPLETED);\n\n    long jobTwoStartTime = _driver.getWorkflowContext(workflowName)\n        .getJobStartTime(TaskUtil.getNamespacedJobName(workflowName, \"Job2\"));\n\n    Assert.assertTrue(jobTwoStartTime - currentTime >= 5000L);\n  }\n","date":"2019-02-26 08:59:48","endLine":152,"groupId":"10500","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testDeplayTimeAndStartTime","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/59/cfa76bfa60c5100f2914127b289a8067c0c8fd.src","preCode":"  public void testDeplayTimeAndStartTime() throws InterruptedException {\n    String workflowName = TestHelper.getTestMethodName();\n    Workflow.Builder builder = new Workflow.Builder(workflowName);\n\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setTargetResource(WorkflowGenerator.DEFAULT_TGT_DB)\n            .setCommand(MockTask.TASK_COMMAND).setMaxAttemptsPerTask(2)\n            .setJobCommandConfigMap(WorkflowGenerator.DEFAULT_COMMAND_CONFIG);\n\n    builder.addParentChildDependency(\"Job1\", \"Job2\");\n\n    long currentTime = System.currentTimeMillis();\n    builder.addJob(\"Job1\", jobBuilder);\n    builder\n        .addJob(\"Job2\", jobBuilder.setExecutionDelay(2000L).setExecutionStart(currentTime + 5000L));\n\n    _driver.start(builder.build());\n    _driver.pollForJobState(workflowName, TaskUtil.getNamespacedJobName(workflowName, \"Job2\"),\n        TaskState.COMPLETED);\n\n    long jobTwoStartTime =\n        _driver.getJobContext(TaskUtil.getNamespacedJobName(workflowName, \"Job2\")).getStartTime();\n\n    Assert.assertTrue(jobTwoStartTime - currentTime >= 5000L);\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestScheduleDelayTask.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":128,"status":"M"}],"commitId":"dad3f36a1b8aeb7590214069141915a8bf932ec6","commitMessage":"@@@Integrate JobIterator for existing pipeline\n\nExisting pipeline still looping all the jobs inside the workflow. When JobIterator is ready.  we shall change the looping mechanism to apply the JobIterator and skip the jobs when quota is used out.\n","date":"2019-02-26 08:59:48","modifiedFileCount":"18","status":"M","submitter":"Junkai Xue"}]
