[{"authorTime":"2014-05-22 07:10:17","codes":[{"authorDate":"2014-05-22 07:10:17","commitOrder":2,"curCode":"  public void testDifferentTasks() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", null, true);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, true);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    workflowBuilder.addTaskConfigs(jobName, taskConfigs);\n    workflowBuilder.addConfig(jobName, JobConfig.COMMAND, \"DummyCommand\");\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    workflowBuilder.addJobConfigMap(jobName, jobConfigMap);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.IN_PROGRESS);\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","date":"2014-05-22 07:10:17","endLine":153,"groupId":"6701","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testDifferentTasks","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/70/41db873b3f2a2da17b81d6acb35aa21c1425bd.src","preCode":"  public void testDifferentTasks() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", null, true);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, true);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    workflowBuilder.addTaskConfigs(jobName, taskConfigs);\n    workflowBuilder.addConfig(jobName, JobConfig.COMMAND, \"DummyCommand\");\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    workflowBuilder.addJobConfigMap(jobName, jobConfigMap);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.IN_PROGRESS);\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestIndependentTaskRebalancer.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":130,"status":"MB"},{"authorDate":"2014-05-22 07:10:17","commitOrder":2,"curCode":"  public void testThresholdFailure() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    Map<String, String> taskConfigMap = Maps.newHashMap(ImmutableMap.of(\"fail\", \"\" + true));\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", taskConfigMap, false);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, false);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    workflowBuilder.addTaskConfigs(jobName, taskConfigs);\n    workflowBuilder.addConfig(jobName, JobConfig.COMMAND, \"DummyCommand\");\n    workflowBuilder.addConfig(jobName, JobConfig.FAILURE_THRESHOLD, \"\" + 1);\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    workflowBuilder.addJobConfigMap(jobName, jobConfigMap);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.IN_PROGRESS);\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","date":"2014-05-22 07:10:17","endLine":181,"groupId":"6701","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testThresholdFailure","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/70/41db873b3f2a2da17b81d6acb35aa21c1425bd.src","preCode":"  public void testThresholdFailure() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    Map<String, String> taskConfigMap = Maps.newHashMap(ImmutableMap.of(\"fail\", \"\" + true));\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", taskConfigMap, false);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, false);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    workflowBuilder.addTaskConfigs(jobName, taskConfigs);\n    workflowBuilder.addConfig(jobName, JobConfig.COMMAND, \"DummyCommand\");\n    workflowBuilder.addConfig(jobName, JobConfig.FAILURE_THRESHOLD, \"\" + 1);\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    workflowBuilder.addJobConfigMap(jobName, jobConfigMap);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.IN_PROGRESS);\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestIndependentTaskRebalancer.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":156,"status":"B"}],"commitId":"efed8848fee9eeda847336f3de93f7ce4458b6a4","commitMessage":"@@@[HELIX-439] Support thresholding for job success/failure\n","date":"2014-05-22 07:10:17","modifiedFileCount":"7","status":"M","submitter":"Kanak Biscuitwala"},{"authorTime":"2014-08-06 04:16:07","codes":[{"authorDate":"2014-08-06 04:16:07","commitOrder":3,"curCode":"  public void testDifferentTasks() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", null, true);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, true);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    workflowBuilder.addTaskConfigs(jobName, taskConfigs);\n    workflowBuilder.addConfig(jobName, JobConfig.COMMAND, \"DummyCommand\");\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    workflowBuilder.addJobCommandConfigMap(jobName, jobConfigMap);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.IN_PROGRESS);\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","date":"2014-08-06 04:16:07","endLine":160,"groupId":"6701","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testDifferentTasks","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/b7/f20d1faa8d040b6a5fb4d946fd59a13ccb6b9d.src","preCode":"  public void testDifferentTasks() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", null, true);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, true);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    workflowBuilder.addTaskConfigs(jobName, taskConfigs);\n    workflowBuilder.addConfig(jobName, JobConfig.COMMAND, \"DummyCommand\");\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    workflowBuilder.addJobConfigMap(jobName, jobConfigMap);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.IN_PROGRESS);\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestIndependentTaskRebalancer.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":137,"status":"M"},{"authorDate":"2014-08-06 04:16:07","commitOrder":3,"curCode":"  public void testThresholdFailure() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    Map<String, String> taskConfigMap = Maps.newHashMap(ImmutableMap.of(\"fail\", \"\" + true));\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", taskConfigMap, false);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, false);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    workflowBuilder.addTaskConfigs(jobName, taskConfigs);\n    workflowBuilder.addConfig(jobName, JobConfig.COMMAND, \"DummyCommand\");\n    workflowBuilder.addConfig(jobName, JobConfig.FAILURE_THRESHOLD, \"\" + 1);\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    workflowBuilder.addJobCommandConfigMap(jobName, jobConfigMap);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.IN_PROGRESS);\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","date":"2014-08-06 04:16:07","endLine":188,"groupId":"6701","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testThresholdFailure","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/b7/f20d1faa8d040b6a5fb4d946fd59a13ccb6b9d.src","preCode":"  public void testThresholdFailure() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    Map<String, String> taskConfigMap = Maps.newHashMap(ImmutableMap.of(\"fail\", \"\" + true));\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", taskConfigMap, false);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, false);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    workflowBuilder.addTaskConfigs(jobName, taskConfigs);\n    workflowBuilder.addConfig(jobName, JobConfig.COMMAND, \"DummyCommand\");\n    workflowBuilder.addConfig(jobName, JobConfig.FAILURE_THRESHOLD, \"\" + 1);\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    workflowBuilder.addJobConfigMap(jobName, jobConfigMap);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.IN_PROGRESS);\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestIndependentTaskRebalancer.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":163,"status":"M"}],"commitId":"24b99e877037d56c5a8515b606b366c8a74f1d8d","commitMessage":"@@@[HELIX-422] Simplify single job creation\n\nThis both augments the Java API to specify fully-built job configs.  as\nwell as reduces the confusion between the job configs and the command\nconfig maps they contain.\n","date":"2014-08-06 04:16:07","modifiedFileCount":"7","status":"M","submitter":"Kanak Biscuitwala"},{"authorTime":"2016-02-11 07:59:37","codes":[{"authorDate":"2016-02-11 07:59:37","commitOrder":4,"curCode":"  @Test public void testDifferentTasks() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", null, true);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, true);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n    jobCommandMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").addTaskConfigs(taskConfigs)\n            .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJobConfig(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.IN_PROGRESS);\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","date":"2016-04-14 01:43:23","endLine":167,"groupId":"6701","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"testDifferentTasks","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/40/c24854e699c405fe48b783f42f4f4956cc41d7.src","preCode":"  public void testDifferentTasks() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", null, true);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, true);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    workflowBuilder.addTaskConfigs(jobName, taskConfigs);\n    workflowBuilder.addConfig(jobName, JobConfig.COMMAND, \"DummyCommand\");\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    workflowBuilder.addJobCommandConfigMap(jobName, jobConfigMap);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.IN_PROGRESS);\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestIndependentTaskRebalancer.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":143,"status":"M"},{"authorDate":"2016-02-11 07:59:37","commitOrder":4,"curCode":"  @Test public void testThresholdFailure() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    Map<String, String> taskConfigMap = Maps.newHashMap(ImmutableMap.of(\"fail\", \"\" + true));\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", taskConfigMap, false);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, false);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").setFailureThreshold(1)\n            .addTaskConfigs(taskConfigs).setJobCommandConfigMap(jobConfigMap);\n    workflowBuilder.addJobConfig(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.IN_PROGRESS);\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","date":"2016-04-14 01:43:23","endLine":194,"groupId":"6701","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"testThresholdFailure","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/40/c24854e699c405fe48b783f42f4f4956cc41d7.src","preCode":"  public void testThresholdFailure() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    Map<String, String> taskConfigMap = Maps.newHashMap(ImmutableMap.of(\"fail\", \"\" + true));\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", taskConfigMap, false);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, false);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    workflowBuilder.addTaskConfigs(jobName, taskConfigs);\n    workflowBuilder.addConfig(jobName, JobConfig.COMMAND, \"DummyCommand\");\n    workflowBuilder.addConfig(jobName, JobConfig.FAILURE_THRESHOLD, \"\" + 1);\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    workflowBuilder.addJobCommandConfigMap(jobName, jobConfigMap);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.IN_PROGRESS);\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestIndependentTaskRebalancer.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":169,"status":"M"}],"commitId":"79c490fab080494b68a1f52845c1e708b8881439","commitMessage":"@@@[HELIX-623] Do not expose internal configuration field name. Client should use JobConfig.Builder to create jobConfig.\n","date":"2016-04-14 01:43:23","modifiedFileCount":"11","status":"M","submitter":"Lei Xia"},{"authorTime":"2016-02-11 08:33:08","codes":[{"authorDate":"2016-02-11 08:33:08","commitOrder":5,"curCode":"  @Test public void testDifferentTasks() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", null, true);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, true);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n    jobCommandMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").addTaskConfigs(taskConfigs)\n            .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJobConfig(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    TaskTestUtil.pollForWorkflowState(_manager, jobName, TaskState.IN_PROGRESS);\n    TaskTestUtil.pollForWorkflowState(_manager, jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","date":"2016-04-14 01:43:23","endLine":166,"groupId":"6701","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"testDifferentTasks","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/ba/8367e136816a3c3b9281fc37af6ac6257489a7.src","preCode":"  @Test public void testDifferentTasks() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", null, true);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, true);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n    jobCommandMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").addTaskConfigs(taskConfigs)\n            .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJobConfig(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.IN_PROGRESS);\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestIndependentTaskRebalancer.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":142,"status":"M"},{"authorDate":"2016-02-11 08:33:08","commitOrder":5,"curCode":"  @Test public void testThresholdFailure() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    Map<String, String> taskConfigMap = Maps.newHashMap(ImmutableMap.of(\"fail\", \"\" + true));\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", taskConfigMap, false);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, false);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").setFailureThreshold(1)\n            .addTaskConfigs(taskConfigs).setJobCommandConfigMap(jobConfigMap);\n    workflowBuilder.addJobConfig(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    TaskTestUtil.pollForWorkflowState(_manager, jobName, TaskState.IN_PROGRESS);\n    TaskTestUtil.pollForWorkflowState(_manager, jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","date":"2016-04-14 01:43:23","endLine":193,"groupId":"6701","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"testThresholdFailure","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/ba/8367e136816a3c3b9281fc37af6ac6257489a7.src","preCode":"  @Test public void testThresholdFailure() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    Map<String, String> taskConfigMap = Maps.newHashMap(ImmutableMap.of(\"fail\", \"\" + true));\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", taskConfigMap, false);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, false);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").setFailureThreshold(1)\n            .addTaskConfigs(taskConfigs).setJobCommandConfigMap(jobConfigMap);\n    workflowBuilder.addJobConfig(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.IN_PROGRESS);\n    TestUtil.pollForWorkflowState(_manager, jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestIndependentTaskRebalancer.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":168,"status":"M"}],"commitId":"d381a3a1cc69d129388896907b9cc696811650c7","commitMessage":"@@@Clean up unit tests for task framework.\n","date":"2016-04-14 01:43:23","modifiedFileCount":"9","status":"M","submitter":"Lei Xia"},{"authorTime":"2016-02-24 09:32:35","codes":[{"authorDate":"2016-02-24 09:32:35","commitOrder":6,"curCode":"  @Test public void testDifferentTasks() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", null, true);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, true);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n    jobCommandMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").addTaskConfigs(taskConfigs)\n            .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJobConfig(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    TaskTestUtil.pollForWorkflowState(_driver, jobName, TaskState.IN_PROGRESS);\n    TaskTestUtil.pollForWorkflowState(_driver, jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","date":"2016-07-06 05:44:32","endLine":165,"groupId":"6701","id":9,"instanceNumber":1,"isCurCommit":0,"methodName":"testDifferentTasks","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/1c/58776b84e7b044950a679f3625cb2ec35f2c7d.src","preCode":"  @Test public void testDifferentTasks() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", null, true);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, true);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n    jobCommandMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").addTaskConfigs(taskConfigs)\n            .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJobConfig(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    TaskTestUtil.pollForWorkflowState(_manager, jobName, TaskState.IN_PROGRESS);\n    TaskTestUtil.pollForWorkflowState(_manager, jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestIndependentTaskRebalancer.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":141,"status":"M"},{"authorDate":"2016-02-24 09:32:35","commitOrder":6,"curCode":"  @Test public void testThresholdFailure() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    Map<String, String> taskConfigMap = Maps.newHashMap(ImmutableMap.of(\"fail\", \"\" + true));\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", taskConfigMap, false);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, false);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").setFailureThreshold(1)\n            .addTaskConfigs(taskConfigs).setJobCommandConfigMap(jobConfigMap);\n    workflowBuilder.addJobConfig(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    TaskTestUtil.pollForWorkflowState(_driver, jobName, TaskState.IN_PROGRESS);\n    TaskTestUtil.pollForWorkflowState(_driver, jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","date":"2016-07-06 05:44:32","endLine":192,"groupId":"6701","id":10,"instanceNumber":2,"isCurCommit":0,"methodName":"testThresholdFailure","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/1c/58776b84e7b044950a679f3625cb2ec35f2c7d.src","preCode":"  @Test public void testThresholdFailure() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    Map<String, String> taskConfigMap = Maps.newHashMap(ImmutableMap.of(\"fail\", \"\" + true));\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", taskConfigMap, false);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, false);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").setFailureThreshold(1)\n            .addTaskConfigs(taskConfigs).setJobCommandConfigMap(jobConfigMap);\n    workflowBuilder.addJobConfig(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    TaskTestUtil.pollForWorkflowState(_manager, jobName, TaskState.IN_PROGRESS);\n    TaskTestUtil.pollForWorkflowState(_manager, jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestIndependentTaskRebalancer.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":167,"status":"M"}],"commitId":"579d82fd2aa8fdce8ec0e0c4d6da73cb8209729d","commitMessage":"@@@Refactor TaskUtil class to move as many as methods out of the class.  and make other methods in it as internal API as possible. Expose necessary APIs in TaskDriver instead.\n","date":"2016-07-06 05:44:32","modifiedFileCount":"16","status":"M","submitter":"Lei Xia"},{"authorTime":"2016-03-31 04:59:59","codes":[{"authorDate":"2016-03-31 04:59:59","commitOrder":7,"curCode":"  @Test public void testDifferentTasks() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", null, true);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, true);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n    jobCommandMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").addTaskConfigs(taskConfigs)\n            .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    TaskTestUtil.pollForWorkflowState(_driver, jobName, TaskState.IN_PROGRESS);\n    TaskTestUtil.pollForWorkflowState(_driver, jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","date":"2016-07-06 05:58:18","endLine":165,"groupId":"6701","id":11,"instanceNumber":1,"isCurCommit":0,"methodName":"testDifferentTasks","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/04/6281e7006b26c77188cd334cd8152e7cc1f1fd.src","preCode":"  @Test public void testDifferentTasks() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", null, true);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, true);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n    jobCommandMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").addTaskConfigs(taskConfigs)\n            .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJobConfig(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    TaskTestUtil.pollForWorkflowState(_driver, jobName, TaskState.IN_PROGRESS);\n    TaskTestUtil.pollForWorkflowState(_driver, jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestIndependentTaskRebalancer.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":141,"status":"M"},{"authorDate":"2016-03-31 04:59:59","commitOrder":7,"curCode":"  @Test public void testThresholdFailure() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    Map<String, String> taskConfigMap = Maps.newHashMap(ImmutableMap.of(\"fail\", \"\" + true));\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", taskConfigMap, false);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, false);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").setFailureThreshold(1)\n            .addTaskConfigs(taskConfigs).setJobCommandConfigMap(jobConfigMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    TaskTestUtil.pollForWorkflowState(_driver, jobName, TaskState.IN_PROGRESS);\n    TaskTestUtil.pollForWorkflowState(_driver, jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","date":"2016-07-06 05:58:18","endLine":192,"groupId":"6701","id":12,"instanceNumber":2,"isCurCommit":0,"methodName":"testThresholdFailure","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/04/6281e7006b26c77188cd334cd8152e7cc1f1fd.src","preCode":"  @Test public void testThresholdFailure() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    Map<String, String> taskConfigMap = Maps.newHashMap(ImmutableMap.of(\"fail\", \"\" + true));\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", taskConfigMap, false);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, false);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").setFailureThreshold(1)\n            .addTaskConfigs(taskConfigs).setJobCommandConfigMap(jobConfigMap);\n    workflowBuilder.addJobConfig(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    TaskTestUtil.pollForWorkflowState(_driver, jobName, TaskState.IN_PROGRESS);\n    TaskTestUtil.pollForWorkflowState(_driver, jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestIndependentTaskRebalancer.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":167,"status":"M"}],"commitId":"1f683b863df23f16bd893fc675f88ed8b7f3d3b8","commitMessage":"@@@More cleanup on workflow and workflowConfig builders.\n","date":"2016-07-06 05:58:18","modifiedFileCount":"7","status":"M","submitter":"Lei Xia"},{"authorTime":"2016-05-11 02:44:25","codes":[{"authorDate":"2016-05-11 02:44:25","commitOrder":8,"curCode":"  @Test public void testDifferentTasks() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", null, true);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, true);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n    jobCommandMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").addTaskConfigs(taskConfigs)\n            .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    _driver.pollForWorkflowState(jobName, TaskState.IN_PROGRESS);\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","date":"2016-07-06 07:21:13","endLine":159,"groupId":"6701","id":13,"instanceNumber":1,"isCurCommit":0,"methodName":"testDifferentTasks","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/49/b4bf438bddc2da3a50f9edfffdb9f35a7729b8.src","preCode":"  @Test public void testDifferentTasks() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", null, true);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, true);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n    jobCommandMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").addTaskConfigs(taskConfigs)\n            .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    TaskTestUtil.pollForWorkflowState(_driver, jobName, TaskState.IN_PROGRESS);\n    TaskTestUtil.pollForWorkflowState(_driver, jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestIndependentTaskRebalancer.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":134,"status":"M"},{"authorDate":"2016-05-11 02:44:25","commitOrder":8,"curCode":"  @Test public void testThresholdFailure() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    Map<String, String> taskConfigMap = Maps.newHashMap(ImmutableMap.of(\"fail\", \"\" + true));\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", taskConfigMap, false);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, false);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").setFailureThreshold(1)\n            .addTaskConfigs(taskConfigs).setJobCommandConfigMap(jobConfigMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    _driver.pollForWorkflowState(jobName, TaskState.IN_PROGRESS);\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","date":"2016-07-06 07:21:13","endLine":186,"groupId":"6701","id":14,"instanceNumber":2,"isCurCommit":0,"methodName":"testThresholdFailure","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/49/b4bf438bddc2da3a50f9edfffdb9f35a7729b8.src","preCode":"  @Test public void testThresholdFailure() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    Map<String, String> taskConfigMap = Maps.newHashMap(ImmutableMap.of(\"fail\", \"\" + true));\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", taskConfigMap, false);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, false);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").setFailureThreshold(1)\n            .addTaskConfigs(taskConfigs).setJobCommandConfigMap(jobConfigMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    TaskTestUtil.pollForWorkflowState(_driver, jobName, TaskState.IN_PROGRESS);\n    TaskTestUtil.pollForWorkflowState(_driver, jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestIndependentTaskRebalancer.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":161,"status":"M"}],"commitId":"183a26ae7857a7c35985b14df9742ba3f4a06566","commitMessage":"@@@Add pollForJobState and pollForWorkflowState function in TaskDriver\n\n1. Add pollForJobState and pollForWorkflowState functions in TaskDriver\n2. Add unit tests for poll completed states for those tasks.\n3. Refactor all tests using new functions.\n","date":"2016-07-06 07:21:13","modifiedFileCount":"20","status":"M","submitter":"Junkai Xue"},{"authorTime":"2016-09-14 07:01:39","codes":[{"authorDate":"2016-09-14 07:01:39","commitOrder":9,"curCode":"  @Test public void testDifferentTasks() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", null);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n    jobCommandMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").addTaskConfigs(taskConfigs)\n            .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    _driver.pollForWorkflowState(jobName, TaskState.IN_PROGRESS);\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","date":"2016-09-22 01:43:35","endLine":159,"groupId":"6701","id":15,"instanceNumber":1,"isCurCommit":0,"methodName":"testDifferentTasks","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/64/b9073e53f10994f831ab8508b03772d93d0569.src","preCode":"  @Test public void testDifferentTasks() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", null, true);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, true);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n    jobCommandMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").addTaskConfigs(taskConfigs)\n            .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    _driver.pollForWorkflowState(jobName, TaskState.IN_PROGRESS);\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestIndependentTaskRebalancer.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":134,"status":"M"},{"authorDate":"2016-09-14 07:01:39","commitOrder":9,"curCode":"  @Test public void testThresholdFailure() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    Map<String, String> taskConfigMap = Maps.newHashMap(ImmutableMap.of(\"fail\", \"\" + true));\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", taskConfigMap);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").setFailureThreshold(1)\n            .addTaskConfigs(taskConfigs).setJobCommandConfigMap(jobConfigMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    _driver.pollForWorkflowState(jobName, TaskState.IN_PROGRESS);\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","date":"2016-09-22 01:43:35","endLine":186,"groupId":"4792","id":16,"instanceNumber":2,"isCurCommit":0,"methodName":"testThresholdFailure","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/64/b9073e53f10994f831ab8508b03772d93d0569.src","preCode":"  @Test public void testThresholdFailure() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    Map<String, String> taskConfigMap = Maps.newHashMap(ImmutableMap.of(\"fail\", \"\" + true));\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", taskConfigMap, false);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null, false);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").setFailureThreshold(1)\n            .addTaskConfigs(taskConfigs).setJobCommandConfigMap(jobConfigMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    _driver.pollForWorkflowState(jobName, TaskState.IN_PROGRESS);\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestIndependentTaskRebalancer.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":161,"status":"M"}],"commitId":"9fc6c540bbcb4d7c71f0b7fe89e2acbc5955e859","commitMessage":"@@@Job Config and logic refactoring\n\n1. Support identical task initialization with job command and number of tasks\n2. Remove unused MaxForcedReassignmentPerTask field\n3. Refactor logics of failure.\n","date":"2016-09-22 01:43:35","modifiedFileCount":"8","status":"M","submitter":"Junkai Xue"},{"authorTime":"2017-04-27 06:34:25","codes":[{"authorDate":"2016-09-14 07:01:39","commitOrder":10,"curCode":"  @Test public void testDifferentTasks() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", null);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n    jobCommandMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").addTaskConfigs(taskConfigs)\n            .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    _driver.pollForWorkflowState(jobName, TaskState.IN_PROGRESS);\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","date":"2016-09-22 01:43:35","endLine":159,"groupId":"6701","id":17,"instanceNumber":1,"isCurCommit":0,"methodName":"testDifferentTasks","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/64/b9073e53f10994f831ab8508b03772d93d0569.src","preCode":"  @Test public void testDifferentTasks() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", null);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n    jobCommandMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").addTaskConfigs(taskConfigs)\n            .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    _driver.pollForWorkflowState(jobName, TaskState.IN_PROGRESS);\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestIndependentTaskRebalancer.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":134,"status":"N"},{"authorDate":"2017-04-27 06:34:25","commitOrder":10,"curCode":"  @Test public void testThresholdFailure() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    Map<String, String> taskConfigMap = Maps.newHashMap(ImmutableMap.of(\"fail\", \"\" + true));\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", taskConfigMap);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").setFailureThreshold(1)\n            .addTaskConfigs(taskConfigs).setJobCommandConfigMap(jobConfigMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","date":"2017-07-13 04:58:05","endLine":182,"groupId":"4792","id":18,"instanceNumber":2,"isCurCommit":0,"methodName":"testThresholdFailure","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/b7/a9bebd347c9c1bbe2b4baf13dbf47acd6504c0.src","preCode":"  @Test public void testThresholdFailure() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    Map<String, String> taskConfigMap = Maps.newHashMap(ImmutableMap.of(\"fail\", \"\" + true));\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", taskConfigMap);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").setFailureThreshold(1)\n            .addTaskConfigs(taskConfigs).setJobCommandConfigMap(jobConfigMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    _driver.pollForWorkflowState(jobName, TaskState.IN_PROGRESS);\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestIndependentTaskRebalancer.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":158,"status":"M"}],"commitId":"8cbbf834efa30b07c31067e1b48ac6332763b02e","commitMessage":"@@@[HELIX-654] Running task rebalance\n\nAdd a job config RebalanceRunningTask.\n\nFor generic task.  if feature is enabled.  Helix will drop running\ntasks that are assigned differently from the previous assignment. \nwhich will cause cancellation of that running task on participant.\nThe task will then be re-assigned to a new instance.\n\nFor fix target task.  running task always follows the partition.  so\ntasks are always re-assigned as needed.\n\nAdd different test cases for this feature enabled/disabled.\n","date":"2017-07-13 04:58:05","modifiedFileCount":"10","status":"M","submitter":"Weihan Kong"},{"authorTime":"2017-11-08 08:48:26","codes":[{"authorDate":"2017-11-08 08:48:26","commitOrder":11,"curCode":"  @Test public void testDifferentTasks() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", null);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n    jobCommandMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").addTaskConfigs(taskConfigs)\n            .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","date":"2017-11-08 08:48:26","endLine":157,"groupId":"6701","id":19,"instanceNumber":1,"isCurCommit":0,"methodName":"testDifferentTasks","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/b0/50c0cd230774cad17e0aa2a0f33202079de0b7.src","preCode":"  @Test public void testDifferentTasks() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", null);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n    jobCommandMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").addTaskConfigs(taskConfigs)\n            .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    _driver.pollForWorkflowState(jobName, TaskState.IN_PROGRESS);\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestIndependentTaskRebalancer.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":133,"status":"M"},{"authorDate":"2017-11-08 08:48:26","commitOrder":11,"curCode":"  @Test public void testThresholdFailure() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    Map<String, String> taskConfigMap = Maps.newHashMap(ImmutableMap.of(\"fail\", \"\" + true));\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", taskConfigMap);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").setFailureThreshold(1)\n            .addTaskConfigs(taskConfigs).setJobCommandConfigMap(jobConfigMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    _driver.pollForWorkflowState(jobName, TaskState.IN_PROGRESS);\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","date":"2017-11-08 08:48:26","endLine":184,"groupId":"4792","id":20,"instanceNumber":2,"isCurCommit":0,"methodName":"testThresholdFailure","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/b0/50c0cd230774cad17e0aa2a0f33202079de0b7.src","preCode":"  @Test public void testThresholdFailure() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    Map<String, String> taskConfigMap = Maps.newHashMap(ImmutableMap.of(\"fail\", \"\" + true));\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", taskConfigMap);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").setFailureThreshold(1)\n            .addTaskConfigs(taskConfigs).setJobCommandConfigMap(jobConfigMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestIndependentTaskRebalancer.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":159,"status":"M"}],"commitId":"fe0b6e800e24c52d514c78d1fbab3d6b0800803f","commitMessage":"@@@Merge branch 'helixli/master'\n\nConflicts:\n\thelix-admin-webapp/helix-admin-webapp-0.6.10-SNAPSHOT.ivy\n\thelix-admin-webapp/helix-admin-webapp-0.6.6-SNAPSHOT.ivy\n\thelix-admin-webapp/helix-admin-webapp-0.6.9-SNAPSHOT.ivy\n\thelix-admin-webapp/pom.xml\n\thelix-admin-webapp/src/main/java/org/apache/helix/webapp/resources/JobResource.java\n\thelix-admin-webapp/src/main/java/org/apache/helix/webapp/resources/SchedulerTasksResource.java\n\thelix-admin-webapp/src/test/java/org/apache/helix/webapp/TestClusterManagementWebapp.java\n\thelix-agent/helix-agent-0.6.10-SNAPSHOT.ivy\n\thelix-agent/helix-agent-0.6.6-SNAPSHOT.ivy\n\thelix-agent/helix-agent-0.6.9-SNAPSHOT.ivy\n\thelix-agent/pom.xml\n\thelix-core/helix-core-0.6.10-SNAPSHOT.ivy\n\thelix-core/helix-core-0.6.6-SNAPSHOT.ivy\n\thelix-core/helix-core-0.6.9-SNAPSHOT.ivy\n\thelix-core/pom.xml\n\thelix-core/src/main/java/org/apache/helix/BaseDataAccessor.java\n\thelix-core/src/main/java/org/apache/helix/ConfigAccessor.java\n\thelix-core/src/main/java/org/apache/helix/HelixAdmin.java\n\thelix-core/src/main/java/org/apache/helix/HelixConstants.java\n\thelix-core/src/main/java/org/apache/helix/HelixDataAccessor.java\n\thelix-core/src/main/java/org/apache/helix/NotificationContext.java\n\thelix-core/src/main/java/org/apache/helix/PropertyPathBuilder.java\n\thelix-core/src/main/java/org/apache/helix/ZNRecord.java\n\thelix-core/src/main/java/org/apache/helix/api/config/RebalanceConfig.java\n\thelix-core/src/main/java/org/apache/helix/api/config/StateTransitionThrottleConfig.java\n\thelix-core/src/main/java/org/apache/helix/api/config/StateTransitionTimeoutConfig.java\n\thelix-core/src/main/java/org/apache/helix/controller/GenericHelixController.java\n\thelix-core/src/main/java/org/apache/helix/controller/common/PartitionStateMap.java\n\thelix-core/src/main/java/org/apache/helix/controller/rebalancer/AbstractRebalancer.java\n\thelix-core/src/main/java/org/apache/helix/controller/rebalancer/AutoRebalancer.java\n\thelix-core/src/main/java/org/apache/helix/controller/rebalancer/DelayedAutoRebalancer.java\n\thelix-core/src/main/java/org/apache/helix/controller/rebalancer/SemiAutoRebalancer.java\n\thelix-core/src/main/java/org/apache/helix/controller/rebalancer/strategy/AutoRebalanceStrategy.java\n\thelix-core/src/main/java/org/apache/helix/controller/rebalancer/strategy/CrushRebalanceStrategy.java\n\thelix-core/src/main/java/org/apache/helix/controller/rebalancer/strategy/MultiRoundCrushRebalanceStrategy.java\n\thelix-core/src/main/java/org/apache/helix/controller/rebalancer/strategy/crushMapping/CRUSHPlacementAlgorithm.java\n\thelix-core/src/main/java/org/apache/helix/controller/rebalancer/topology/Node.java\n\thelix-core/src/main/java/org/apache/helix/controller/rebalancer/topology/Topology.java\n\thelix-core/src/main/java/org/apache/helix/controller/rebalancer/util/RebalanceScheduler.java\n\thelix-core/src/main/java/org/apache/helix/controller/stages/BestPossibleStateCalcStage.java\n\thelix-core/src/main/java/org/apache/helix/controller/stages/BestPossibleStateOutput.java\n\thelix-core/src/main/java/org/apache/helix/controller/stages/ClusterDataCache.java\n\thelix-core/src/main/java/org/apache/helix/controller/stages/CurrentStateComputationStage.java\n\thelix-core/src/main/java/org/apache/helix/controller/stages/ExternalViewComputeStage.java\n\thelix-core/src/main/java/org/apache/helix/controller/stages/IntermediateStateCalcStage.java\n\thelix-core/src/main/java/org/apache/helix/controller/stages/MessageGenerationPhase.java\n\thelix-core/src/main/java/org/apache/helix/controller/stages/MessageSelectionStage.java\n\thelix-core/src/main/java/org/apache/helix/controller/stages/PersistAssignmentStage.java\n\thelix-core/src/main/java/org/apache/helix/controller/stages/ReadClusterDataStage.java\n\thelix-core/src/main/java/org/apache/helix/controller/stages/ResourceComputationStage.java\n\thelix-core/src/main/java/org/apache/helix/controller/stages/StateTransitionThrottleController.java\n\thelix-core/src/main/java/org/apache/helix/controller/stages/TaskAssignmentStage.java\n\thelix-core/src/main/java/org/apache/helix/manager/zk/CallbackHandler.java\n\thelix-core/src/main/java/org/apache/helix/manager/zk/ParticipantManager.java\n\thelix-core/src/main/java/org/apache/helix/manager/zk/ZKHelixAdmin.java\n\thelix-core/src/main/java/org/apache/helix/manager/zk/ZKHelixDataAccessor.java\n\thelix-core/src/main/java/org/apache/helix/manager/zk/ZKHelixManager.java\n\thelix-core/src/main/java/org/apache/helix/manager/zk/ZKUtil.java\n\thelix-core/src/main/java/org/apache/helix/manager/zk/ZkClient.java\n\thelix-core/src/main/java/org/apache/helix/messaging/DefaultMessagingService.java\n\thelix-core/src/main/java/org/apache/helix/messaging/handling/HelixTask.java\n\thelix-core/src/main/java/org/apache/helix/messaging/handling/HelixTaskExecutor.java\n\thelix-core/src/main/java/org/apache/helix/model/ClusterConfig.java\n\thelix-core/src/main/java/org/apache/helix/model/IdealState.java\n\thelix-core/src/main/java/org/apache/helix/model/InstanceConfig.java\n\thelix-core/src/main/java/org/apache/helix/model/LeaderHistory.java\n\thelix-core/src/main/java/org/apache/helix/model/ParticipantHistory.java\n\thelix-core/src/main/java/org/apache/helix/model/ResourceConfig.java\n\thelix-core/src/main/java/org/apache/helix/model/StateModelDefinition.java\n\thelix-core/src/main/java/org/apache/helix/model/builder/IdealStateBuilder.java\n\thelix-core/src/main/java/org/apache/helix/monitoring/ParticipantStatusMonitor.java\n\thelix-core/src/main/java/org/apache/helix/monitoring/mbeans/ClusterStatusMonitor.java\n\thelix-core/src/main/java/org/apache/helix/monitoring/mbeans/InstanceMonitor.java\n\thelix-core/src/main/java/org/apache/helix/monitoring/mbeans/JobMonitor.java\n\thelix-core/src/main/java/org/apache/helix/monitoring/mbeans/ParticipantMessageMonitor.java\n\thelix-core/src/main/java/org/apache/helix/participant/statemachine/StateModelFactory.java\n\thelix-core/src/main/java/org/apache/helix/task/DeprecatedTaskRebalancer.java\n\thelix-core/src/main/java/org/apache/helix/task/FixedTargetTaskAssignmentCalculator.java\n\thelix-core/src/main/java/org/apache/helix/task/GenericTaskAssignmentCalculator.java\n\thelix-core/src/main/java/org/apache/helix/task/JobConfig.java\n\thelix-core/src/main/java/org/apache/helix/task/JobContext.java\n\thelix-core/src/main/java/org/apache/helix/task/JobRebalancer.java\n\thelix-core/src/main/java/org/apache/helix/task/TaskConstants.java\n\thelix-core/src/main/java/org/apache/helix/task/TaskDriver.java\n\thelix-core/src/main/java/org/apache/helix/task/TaskRebalancer.java\n\thelix-core/src/main/java/org/apache/helix/task/TaskState.java\n\thelix-core/src/main/java/org/apache/helix/task/TaskStateModel.java\n\thelix-core/src/main/java/org/apache/helix/task/TaskStateModelFactory.java\n\thelix-core/src/main/java/org/apache/helix/task/TaskUtil.java\n\thelix-core/src/main/java/org/apache/helix/task/Workflow.java\n\thelix-core/src/main/java/org/apache/helix/task/WorkflowConfig.java\n\thelix-core/src/main/java/org/apache/helix/task/WorkflowContext.java\n\thelix-core/src/main/java/org/apache/helix/task/WorkflowRebalancer.java\n\thelix-core/src/main/java/org/apache/helix/task/beans/JobBean.java\n\thelix-core/src/main/java/org/apache/helix/tools/ClusterExternalViewVerifier.java\n\thelix-core/src/main/java/org/apache/helix/tools/ClusterLiveNodesVerifier.java\n\thelix-core/src/main/java/org/apache/helix/tools/ClusterStateVerifier.java\n\thelix-core/src/main/java/org/apache/helix/tools/ClusterVerifier.java\n\thelix-core/src/main/java/org/apache/helix/tools/ClusterVerifiers/BestPossibleExternalViewVerifier.java\n\thelix-core/src/main/java/org/apache/helix/tools/ClusterVerifiers/StrictMatchExternalViewVerifier.java\n\thelix-core/src/main/java/org/apache/helix/tools/ClusterVerifiers/ZkHelixClusterVerifier.java\n\thelix-core/src/main/java/org/apache/helix/tools/IntegrationTestUtil.java\n\thelix-core/src/main/java/org/apache/helix/util/HelixUtil.java\n\thelix-core/src/test/java/org/apache/helix/Mocks.java\n\thelix-core/src/test/java/org/apache/helix/TestHelixTaskExecutor.java\n\thelix-core/src/test/java/org/apache/helix/TestPropertyPathBuilder.java\n\thelix-core/src/test/java/org/apache/helix/ZkUnitTestBase.java\n\thelix-core/src/test/java/org/apache/helix/controller/rebalancer/TestAutoRebalanceStrategy.java\n\thelix-core/src/test/java/org/apache/helix/controller/stages/TestBestPossibleCalcStageCompatibility.java\n\thelix-core/src/test/java/org/apache/helix/controller/stages/TestBestPossibleStateCalcStage.java\n\thelix-core/src/test/java/org/apache/helix/controller/stages/TestCurrentStateComputationStage.java\n\thelix-core/src/test/java/org/apache/helix/controller/stages/TestRebalancePipeline.java\n\thelix-core/src/test/java/org/apache/helix/controller/stages/TestResourceComputationStage.java\n\thelix-core/src/test/java/org/apache/helix/controller/stages/TestResourceValidationStage.java\n\thelix-core/src/test/java/org/apache/helix/controller/strategy/TestTopology.java\n\thelix-core/src/test/java/org/apache/helix/integration/SinglePartitionLeaderStandByTest.java\n\thelix-core/src/test/java/org/apache/helix/integration/TestAddNodeAfterControllerStart.java\n\thelix-core/src/test/java/org/apache/helix/integration/TestBatchMessageHandling.java\n\thelix-core/src/test/java/org/apache/helix/integration/TestBucketizedResource.java\n\thelix-core/src/test/java/org/apache/helix/integration/TestCarryOverBadCurState.java\n\thelix-core/src/test/java/org/apache/helix/integration/TestClusterStartsup.java\n\thelix-core/src/test/java/org/apache/helix/integration/TestDisable.java\n\thelix-core/src/test/java/org/apache/helix/integration/TestDriver.java\n\thelix-core/src/test/java/org/apache/helix/integration/TestDrop.java\n\thelix-core/src/test/java/org/apache/helix/integration/TestEnableCompression.java\n\thelix-core/src/test/java/org/apache/helix/integration/TestEnablePartitionDuringDisable.java\n\thelix-core/src/test/java/org/apache/helix/integration/TestNullReplica.java\n\thelix-core/src/test/java/org/apache/helix/integration/TestPartitionMovementThrottle.java\n\thelix-core/src/test/java/org/apache/helix/integration/TestPersistAssignmentStage.java\n\thelix-core/src/test/java/org/apache/helix/integration/TestRebalancerPersistAssignments.java\n\thelix-core/src/test/java/org/apache/helix/integration/TestResourceGroupEndtoEnd.java\n\thelix-core/src/test/java/org/apache/helix/integration/TestStartMultipleControllersWithSameName.java\n\thelix-core/src/test/java/org/apache/helix/integration/TestStateTransitionCancellation.java\n\thelix-core/src/test/java/org/apache/helix/integration/TestSyncSessionToController.java\n\thelix-core/src/test/java/org/apache/helix/integration/ZkIntegrationTestBase.java\n\thelix-core/src/test/java/org/apache/helix/integration/manager/MockParticipantManager.java\n\thelix-core/src/test/java/org/apache/helix/integration/manager/TestParticipantManager.java\n\thelix-core/src/test/java/org/apache/helix/integration/messaging/TestBatchMessage.java\n\thelix-core/src/test/java/org/apache/helix/integration/messaging/TestBatchMessageWrapper.java\n\thelix-core/src/test/java/org/apache/helix/integration/messaging/TestMessageThrottle.java\n\thelix-core/src/test/java/org/apache/helix/integration/messaging/TestSchedulerMessage.java\n\thelix-core/src/test/java/org/apache/helix/integration/rebalancer/TestAutoIsWithEmptyMap.java\n\thelix-core/src/test/java/org/apache/helix/integration/rebalancer/TestAutoRebalance.java\n\thelix-core/src/test/java/org/apache/helix/integration/task/MockTask.java\n\thelix-core/src/test/java/org/apache/helix/integration/task/TaskTestBase.java\n\thelix-core/src/test/java/org/apache/helix/integration/task/TaskTestUtil.java\n\thelix-core/src/test/java/org/apache/helix/integration/task/TestGenericTaskAssignmentCalculator.java\n\thelix-core/src/test/java/org/apache/helix/integration/task/TestIndependentTaskRebalancer.java\n\thelix-core/src/test/java/org/apache/helix/integration/task/TestJobQueueCleanUp.java\n\thelix-core/src/test/java/org/apache/helix/integration/task/TestRebalanceRunningTask.java\n\thelix-core/src/test/java/org/apache/helix/integration/task/TestRecurringJobQueue.java\n\thelix-core/src/test/java/org/apache/helix/integration/task/TestRunJobsWithMissingTarget.java\n\thelix-core/src/test/java/org/apache/helix/integration/task/TestTaskRebalancer.java\n\thelix-core/src/test/java/org/apache/helix/integration/task/TestTaskRebalancerParallel.java\n\thelix-core/src/test/java/org/apache/helix/integration/task/TestTaskRebalancerStopResume.java\n\thelix-core/src/test/java/org/apache/helix/integration/task/TestTaskRetryDelay.java\n\thelix-core/src/test/java/org/apache/helix/integration/task/TestTaskThrottling.java\n\thelix-core/src/test/java/org/apache/helix/integration/task/TestUnregisteredCommand.java\n\thelix-core/src/test/java/org/apache/helix/integration/task/TestUserContentStore.java\n\thelix-core/src/test/java/org/apache/helix/integration/task/TestWorkflowJobDependency.java\n\thelix-core/src/test/java/org/apache/helix/manager/zk/TestWtCacheAsyncOpMultiThread.java\n\thelix-core/src/test/java/org/apache/helix/manager/zk/TestWtCacheAsyncOpSingleThread.java\n\thelix-core/src/test/java/org/apache/helix/manager/zk/TestWtCacheSyncOpSingleThread.java\n\thelix-core/src/test/java/org/apache/helix/manager/zk/TestZKUtil.java\n\thelix-core/src/test/java/org/apache/helix/manager/zk/TestZkBaseDataAccessor.java\n\thelix-core/src/test/java/org/apache/helix/manager/zk/TestZkCacheAsyncOpSingleThread.java\n\thelix-core/src/test/java/org/apache/helix/manager/zk/TestZkCacheSyncOpSingleThread.java\n\thelix-core/src/test/java/org/apache/helix/manager/zk/TestZkClient.java\n\thelix-core/src/test/java/org/apache/helix/manager/zk/TestZkHelixAdmin.java\n\thelix-core/src/test/java/org/apache/helix/messaging/TestDefaultMessagingService.java\n\thelix-core/src/test/java/org/apache/helix/messaging/handling/TestConfigThreadpoolSize.java\n\thelix-core/src/test/java/org/apache/helix/messaging/handling/TestHelixTaskExecutor.java\n\thelix-core/src/test/java/org/apache/helix/messaging/handling/TestResourceThreadpoolSize.java\n\thelix-core/src/test/java/org/apache/helix/monitoring/TestParticipantMonitor.java\n\thelix-core/src/test/java/org/apache/helix/monitoring/mbeans/TestDisableResourceMbean.java\n\thelix-core/src/test/java/org/apache/helix/participant/TestDistControllerElection.java\n\thelix-core/src/test/java/org/apache/helix/task/TaskSynchronizedTestBase.java\n\thelix-core/src/test/java/org/apache/helix/task/TestCleanExpiredJobs.java\n\thelix-core/src/test/java/org/apache/helix/task/TestScheduleDelayJobs.java\n\thelix-core/src/test/java/org/apache/helix/task/TestSemiAutoStateTransition.java\n\thelix-core/src/test/java/org/apache/helix/tools/TestClusterSetup.java\n\thelix-core/src/test/java/org/apache/helix/tools/TestClusterVerifier.java\n\tpom.xml\n\trecipes/distributed-lock-manager/pom.xml\n\trecipes/pom.xml\n\trecipes/rabbitmq-consumer-group/pom.xml\n\trecipes/rsync-replicated-file-system/pom.xml\n\trecipes/service-discovery/pom.xml\n\trecipes/task-execution/pom.xml\n","date":"2017-11-08 08:48:26","modifiedFileCount":"275","status":"M","submitter":"Junkai Xue"},{"authorTime":"2018-07-14 05:45:41","codes":[{"authorDate":"2018-07-14 05:45:41","commitOrder":12,"curCode":"  public void testDifferentTasks() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", null);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n    jobCommandMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder = new JobConfig.Builder().setCommand(\"DummyCommand\")\n        .addTaskConfigs(taskConfigs).setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","date":"2018-07-14 08:38:58","endLine":145,"groupId":"10516","id":21,"instanceNumber":1,"isCurCommit":0,"methodName":"testDifferentTasks","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/43/1b929586e8ae2e1bc9f9241fdde8bb6f1eed5d.src","preCode":"  @Test public void testDifferentTasks() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", null);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobCommandMap = Maps.newHashMap();\n    jobCommandMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").addTaskConfigs(taskConfigs)\n            .setJobCommandConfigMap(jobCommandMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestIndependentTaskRebalancer.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":123,"status":"M"},{"authorDate":"2018-07-14 05:45:41","commitOrder":12,"curCode":"  public void testThresholdFailure() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    Map<String, String> taskConfigMap = Maps.newHashMap(ImmutableMap.of(\"fail\", \"\" + true));\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", taskConfigMap);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder = new JobConfig.Builder().setCommand(\"DummyCommand\")\n        .setFailureThreshold(1).addTaskConfigs(taskConfigs).setJobCommandConfigMap(jobConfigMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    _driver.pollForWorkflowState(jobName, TaskState.IN_PROGRESS);\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","date":"2018-07-14 08:38:58","endLine":172,"groupId":"10516","id":22,"instanceNumber":2,"isCurCommit":0,"methodName":"testThresholdFailure","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/43/1b929586e8ae2e1bc9f9241fdde8bb6f1eed5d.src","preCode":"  @Test public void testThresholdFailure() throws Exception {\n    \r\n    String jobName = TestHelper.getTestMethodName();\n    Workflow.Builder workflowBuilder = new Workflow.Builder(jobName);\n    List<TaskConfig> taskConfigs = Lists.newArrayListWithCapacity(2);\n    Map<String, String> taskConfigMap = Maps.newHashMap(ImmutableMap.of(\"fail\", \"\" + true));\n    TaskConfig taskConfig1 = new TaskConfig(\"TaskOne\", taskConfigMap);\n    TaskConfig taskConfig2 = new TaskConfig(\"TaskTwo\", null);\n    taskConfigs.add(taskConfig1);\n    taskConfigs.add(taskConfig2);\n    Map<String, String> jobConfigMap = Maps.newHashMap();\n    jobConfigMap.put(\"Timeout\", \"1000\");\n    JobConfig.Builder jobBuilder =\n        new JobConfig.Builder().setCommand(\"DummyCommand\").setFailureThreshold(1)\n            .addTaskConfigs(taskConfigs).setJobCommandConfigMap(jobConfigMap);\n    workflowBuilder.addJob(jobName, jobBuilder);\n    _driver.start(workflowBuilder.build());\n\n    \r\n    _driver.pollForWorkflowState(jobName, TaskState.IN_PROGRESS);\n    _driver.pollForWorkflowState(jobName, TaskState.COMPLETED);\n\n    \r\n    Assert.assertTrue(_invokedClasses.contains(TaskOne.class.getName()));\n    Assert.assertTrue(_invokedClasses.contains(TaskTwo.class.getName()));\n  }\n","realPath":"helix-core/src/test/java/org/apache/helix/integration/task/TestIndependentTaskRebalancer.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":148,"status":"M"}],"commitId":"4db61b56e473b64ec9956f694dd2ac6a8d328ed4","commitMessage":"@@@[HELIX-730] Add ThreadCountBasedAssignmentCalculator and integrate with Workflow/JobRebalancer and fix rebalancing logic\n\nFor quota-based scheduling of tasks.  we have added the TaskAssigner interface that takes into account AssignableInstances by way of AssignableInstanceManager. In order to use this in the currently-existing pipeline prior to Task Framework 2.0.  GenericTaskAssignmentCalculator was replaced with ThreadCountBasedAssignmentCalculator.  which is a wrapper around TaskAssigner. Necessary adjustments were made in Workflow/JobRebalancer for this replacement. Also the rebalance logic in Workflow/JobRebalancer was reviewed and fixed. Additionally.  TestQuotaBasedScheduling is added to test quota-based task scheduling. Note that quotas will apply to both generic and targeted jobs.\n\nA few bugs were uncovered during this process such as the faulty retry logic that never really got tasks to restart. For more details.  see the changelist below:\n\nChangelist:\n    1. Add ThreadCountBasedAssignmentCalculator.  a wrapper around ThreadCountBasedTaskAssigner\n    2. Make logic changes in JobRebalancer to enable the use of ThreadCountBasedAssignmentCalculator\n    3. Fix the failing test by using a thread-safe map and rename TestGenericTaskAssignmentCalculator to TestTaskAssignmentCalculator to better reflect what its tests are doing\n    4. Add retry logic that was previously absent for INIT and DROPPED tasks in JobRebalancer\n    5. Add TestQuotaBasedScheduling to test that jobs and tasks were being assigned and scheduled per quota config set in ClusterConfig\n    6. Add more log messages to aid with task-scheduling debugging in AssignableInstance\n    7. In AbstractTaskDispatcher.  for tasks that are STOPPED.  TIMED_OUT.  TASK_ERROR.  the retry logic was newly implemented so that they get re-started correctly\n    8. In AbstractTaskDispatcher.  when enforcing overlapAssign for jobs with isAllowOverlapAssignment().  a fix was implemented so that only jobs whose state is IN_PROGRESS are considered\n    9. In AbstractTaskDispatcher.  isWorkflowFinished() method was modified so that non-active jobs will have their tasks' resource freed from AssignableInstances to prevent resource leak\n   10. In markJobFailed() and markJobCompleted().  non-active jobs will have their tasks' resource freed from AssignableInstances to prevent resource leak\n   11. Fix the logic so that quotas do not apply to targeted jobs\n   12. Fix TestTaskRebalancer (assumes Consistent Hashing.  which is no longer used)\n   13. Fix TestIndependentTaskRebalancer (assumes Consistent Hashing.  no longer used)\n   14. Assignment logic was improved so that incomplete tasks whose assigned participants are no longer live will be re-assigned accordingly\n   15. Fix TestTaskRebalanceFailover (tasks on non-live instances will be re-assigned promptly)\n   16. Fix TestRebalanceRunningTask (targeted jobs will get tasks reassigned upon liveInstance and currentState change)\n   17. Fix a bug in FixedAssignmentCalculator and assignment logic for targeted jobs such that a task index will no longer be assigned multiple times\n   18. Fix TestJobFailureTaskNotStarted (tasks were not being assigned at all due to having reached maximum capacity for quota)\n   19. Add targetedTaskConfigMap field in JobConfig to cache TaskConfig objects for targeted tasks to reduce object creation and GC overload\n   20. Fix JobConfig so that it doesn't write quotaType to ZooKeeper when quotaType is null or not set\n   21. Fix deleteWorkflow() in TaskUtil so that the earliest delete failure will render the entire method as failed (and return prematurely to prevent breaking other ZNodes from incomplete deletion)\n   22. Fix TestDeleteWorkflow by adding another removeProperty() clause to lower failure rate\n","date":"2018-07-14 08:38:58","modifiedFileCount":"36","status":"M","submitter":"Hunter Lee"}]
