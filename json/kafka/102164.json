[{"authorTime":"2020-03-22 02:40:34","codes":[{"authorDate":"2020-03-22 02:40:34","commitOrder":4,"curCode":"    public void shouldAddActiveTasksToBothAssignedAndActive() {\n        client.assignActive(taskId01);\n        assertThat(client.activeTasks(), equalTo(Collections.singleton(taskId01)));\n        assertThat(client.assignedTasks(), equalTo(Collections.singleton(taskId01)));\n        assertThat(client.assignedTaskCount(), equalTo(1));\n        assertThat(client.standbyTasks().size(), equalTo(0));\n    }\n","date":"2020-03-22 02:40:34","endLine":63,"groupId":"11962","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"shouldAddActiveTasksToBothAssignedAndActive","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-kafka-10-0.7/blobInfo/CC_OUT/blobs/f0/8ae1ae28e9508efb1ab8067dc0dceefd589a0e.src","preCode":"    public void shouldAddActiveTasksToBothAssignedAndActive() {\n        client.assignActive(taskId01);\n        assertThat(client.activeTasks(), equalTo(Collections.singleton(taskId01)));\n        assertThat(client.assignedTasks(), equalTo(Collections.singleton(taskId01)));\n        assertThat(client.assignedTaskCount(), equalTo(1));\n        assertThat(client.standbyTasks().size(), equalTo(0));\n    }\n","realPath":"streams/src/test/java/org/apache/kafka/streams/processor/internals/assignment/ClientStateTest.java","repoName":"kafka","snippetEndLine":0,"snippetStartLine":0,"startLine":57,"status":"MB"},{"authorDate":"2020-03-22 02:40:34","commitOrder":4,"curCode":"    public void shouldAddStandbyTasksToBothStandbyAndAssigned() {\n        client.assignStandby(taskId01);\n        assertThat(client.assignedTasks(), equalTo(Collections.singleton(taskId01)));\n        assertThat(client.standbyTasks(), equalTo(Collections.singleton(taskId01)));\n        assertThat(client.assignedTaskCount(), equalTo(1));\n        assertThat(client.activeTasks().size(), equalTo(0));\n    }\n","date":"2020-03-22 02:40:34","endLine":72,"groupId":"11962","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"shouldAddStandbyTasksToBothStandbyAndAssigned","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-kafka-10-0.7/blobInfo/CC_OUT/blobs/f0/8ae1ae28e9508efb1ab8067dc0dceefd589a0e.src","preCode":"    public void shouldAddStandbyTasksToBothStandbyAndAssigned() {\n        client.assignStandby(taskId01);\n        assertThat(client.assignedTasks(), equalTo(Collections.singleton(taskId01)));\n        assertThat(client.standbyTasks(), equalTo(Collections.singleton(taskId01)));\n        assertThat(client.assignedTaskCount(), equalTo(1));\n        assertThat(client.activeTasks().size(), equalTo(0));\n    }\n","realPath":"streams/src/test/java/org/apache/kafka/streams/processor/internals/assignment/ClientStateTest.java","repoName":"kafka","snippetEndLine":0,"snippetStartLine":0,"startLine":66,"status":"B"}],"commitId":"6cf27c9c771900baf43cc47f9b010dbf7a86fa22","commitMessage":"@@@KAFKA-6145: Pt 2.5 Compute overall task lag per client (#8252)\n\nOnce we have encoded the offset sums per task for each client.  we can compute the overall lag during assign by fetching the end offsets for all changelog and subtracting.\n\nIf the listOffsets request fails.  we simply return a \"completely sticky\" assignment.  ie all active tasks are given to previous owners regardless of balance.\n\nBuilds (but does not yet use) the statefulTasksToRankedCandidates map with the ranking:\nRank -1: active running task\nRank 0: standby or restoring task whose overall lag is within acceptableRecoveryLag\nRank 1: tasks whose lag is unknown (eg during version probing)\nRank 1+: all other tasks are ranked according to their actual total lag\n\nImplements: KIP-441\nReviewers: Bruno Cadonna <bruno@confluent.io>.  John Roesler <vvcephei@apache.org>","date":"2020-03-22 02:40:34","modifiedFileCount":"12","status":"M","submitter":"A. Sophie Blee-Goldman"},{"authorTime":"2020-04-04 02:53:51","codes":[{"authorDate":"2020-04-04 02:53:51","commitOrder":5,"curCode":"    public void shouldAddActiveTasksToBothAssignedAndActive() {\n        client.assignActive(TASK_0_1);\n        assertThat(client.activeTasks(), equalTo(Collections.singleton(TASK_0_1)));\n        assertThat(client.assignedTasks(), equalTo(Collections.singleton(TASK_0_1)));\n        assertThat(client.assignedTaskCount(), equalTo(1));\n        assertThat(client.standbyTasks().size(), equalTo(0));\n    }\n","date":"2020-04-04 02:53:51","endLine":62,"groupId":"102164","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"shouldAddActiveTasksToBothAssignedAndActive","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-kafka-10-0.7/blobInfo/CC_OUT/blobs/cb/32155690c9f3d24d0f77489750444e1e253d24.src","preCode":"    public void shouldAddActiveTasksToBothAssignedAndActive() {\n        client.assignActive(taskId01);\n        assertThat(client.activeTasks(), equalTo(Collections.singleton(taskId01)));\n        assertThat(client.assignedTasks(), equalTo(Collections.singleton(taskId01)));\n        assertThat(client.assignedTaskCount(), equalTo(1));\n        assertThat(client.standbyTasks().size(), equalTo(0));\n    }\n","realPath":"streams/src/test/java/org/apache/kafka/streams/processor/internals/assignment/ClientStateTest.java","repoName":"kafka","snippetEndLine":0,"snippetStartLine":0,"startLine":56,"status":"M"},{"authorDate":"2020-04-04 02:53:51","commitOrder":5,"curCode":"    public void shouldAddStandbyTasksToBothStandbyAndAssigned() {\n        client.assignStandby(TASK_0_1);\n        assertThat(client.assignedTasks(), equalTo(Collections.singleton(TASK_0_1)));\n        assertThat(client.standbyTasks(), equalTo(Collections.singleton(TASK_0_1)));\n        assertThat(client.assignedTaskCount(), equalTo(1));\n        assertThat(client.activeTasks().size(), equalTo(0));\n    }\n","date":"2020-04-04 02:53:51","endLine":71,"groupId":"102164","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"shouldAddStandbyTasksToBothStandbyAndAssigned","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-kafka-10-0.7/blobInfo/CC_OUT/blobs/cb/32155690c9f3d24d0f77489750444e1e253d24.src","preCode":"    public void shouldAddStandbyTasksToBothStandbyAndAssigned() {\n        client.assignStandby(taskId01);\n        assertThat(client.assignedTasks(), equalTo(Collections.singleton(taskId01)));\n        assertThat(client.standbyTasks(), equalTo(Collections.singleton(taskId01)));\n        assertThat(client.assignedTaskCount(), equalTo(1));\n        assertThat(client.activeTasks().size(), equalTo(0));\n    }\n","realPath":"streams/src/test/java/org/apache/kafka/streams/processor/internals/assignment/ClientStateTest.java","repoName":"kafka","snippetEndLine":0,"snippetStartLine":0,"startLine":65,"status":"M"}],"commitId":"6e0d553350cef876f4fd2de0e3b8e6e40ce6be44","commitMessage":"@@@MINOR: clean up Streams assignment classes and tests (#8406)\n\nFirst set of cleanup pushed to followup PR after KIP-441 Pt. 5. Main changes are:\n\n1. Moved `RankedClient` and the static `buildClientRankingsByTask` to a new file\n2. Moved `Movement` and the static `getMovements` to a new file (also renamed to `TaskMovement`)\n3. Consolidated the many common variables throughout the assignment tests to the new `AssignmentTestUtils` \n4. New utility to generate comparable/predictable UUIDs for tests.  and removed the generic from `TaskAssignor` and all related classes\n\nReviewers: John Roesler <vvcephei@apache.org>.  Andrew Choi <a24choi@edu.uwaterloo.ca>","date":"2020-04-04 02:53:51","modifiedFileCount":"16","status":"M","submitter":"A. Sophie Blee-Goldman"}]
