[{"authorTime":"2017-04-28 08:19:06","codes":[{"authorDate":"2017-04-28 08:19:06","commitOrder":3,"curCode":"    public void testRestoreEvict() {\n        store.close();\n        \r\n        \r\n        driver.addEntryToRestoreLog(0, \"zero\");\n        driver.addEntryToRestoreLog(1, \"one\");\n        driver.addEntryToRestoreLog(2, \"two\");\n        driver.addEntryToRestoreLog(3, \"three\");\n        driver.addEntryToRestoreLog(4, \"four\");\n        driver.addEntryToRestoreLog(5, \"five\");\n        driver.addEntryToRestoreLog(6, \"fix\");\n        driver.addEntryToRestoreLog(7, \"seven\");\n        driver.addEntryToRestoreLog(8, \"eight\");\n        driver.addEntryToRestoreLog(9, \"nine\");\n        driver.addEntryToRestoreLog(10, \"ten\");\n\n        \r\n        \r\n        store = createKeyValueStore(driver.context(), Integer.class, String.class, false);\n        context.restore(store.name(), driver.restoredEntries());\n        \r\n        assertEquals(0, driver.numFlushedEntryStored());\n        assertEquals(0, driver.numFlushedEntryRemoved());\n\n        \r\n        assertEquals(10, driver.sizeOf(store));\n    }\n","date":"2017-04-28 08:19:14","endLine":168,"groupId":"18478","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testRestoreEvict","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-kafka-10-0.7/blobInfo/CC_OUT/blobs/7d/da58552f36aa41f13354e8398ad9b0f6a345f2.src","preCode":"    public void testRestoreEvict() {\n        store.close();\n        \r\n        \r\n        driver.addEntryToRestoreLog(0, \"zero\");\n        driver.addEntryToRestoreLog(1, \"one\");\n        driver.addEntryToRestoreLog(2, \"two\");\n        driver.addEntryToRestoreLog(3, \"three\");\n        driver.addEntryToRestoreLog(4, \"four\");\n        driver.addEntryToRestoreLog(5, \"five\");\n        driver.addEntryToRestoreLog(6, \"fix\");\n        driver.addEntryToRestoreLog(7, \"seven\");\n        driver.addEntryToRestoreLog(8, \"eight\");\n        driver.addEntryToRestoreLog(9, \"nine\");\n        driver.addEntryToRestoreLog(10, \"ten\");\n\n        \r\n        \r\n        store = createKeyValueStore(driver.context(), Integer.class, String.class, false);\n        context.restore(store.name(), driver.restoredEntries());\n        \r\n        assertEquals(0, driver.numFlushedEntryStored());\n        assertEquals(0, driver.numFlushedEntryRemoved());\n\n        \r\n        assertEquals(10, driver.sizeOf(store));\n    }\n","realPath":"streams/src/test/java/org/apache/kafka/streams/state/internals/InMemoryLRUCacheStoreTest.java","repoName":"kafka","snippetEndLine":0,"snippetStartLine":0,"startLine":142,"status":"B"},{"authorDate":"2017-04-28 08:19:06","commitOrder":3,"curCode":"    public void testRestore() {\n        store.close();\n        \r\n        \r\n        driver.addEntryToRestoreLog(0, \"zero\");\n        driver.addEntryToRestoreLog(1, \"one\");\n        driver.addEntryToRestoreLog(2, \"two\");\n        driver.addEntryToRestoreLog(3, \"three\");\n\n        \r\n        \r\n        store = createKeyValueStore(driver.context(), Integer.class, String.class, false);\n        context.restore(store.name(), driver.restoredEntries());\n        \r\n        assertEquals(0, driver.checkForRestoredEntries(store));\n\n        \r\n        assertEquals(4, driver.sizeOf(store));\n    }\n","date":"2017-04-28 08:19:14","endLine":168,"groupId":"18102","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testRestore","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-kafka-10-0.7/blobInfo/CC_OUT/blobs/3e/b406b4fe153bb70c247357fa27b2cfc3f8594f.src","preCode":"    public void testRestore() {\n        store.close();\n        \r\n        \r\n        driver.addEntryToRestoreLog(0, \"zero\");\n        driver.addEntryToRestoreLog(1, \"one\");\n        driver.addEntryToRestoreLog(2, \"two\");\n        driver.addEntryToRestoreLog(3, \"three\");\n\n        \r\n        \r\n        store = createKeyValueStore(driver.context(), Integer.class, String.class, false);\n        context.restore(store.name(), driver.restoredEntries());\n        \r\n        assertEquals(0, driver.checkForRestoredEntries(store));\n\n        \r\n        assertEquals(4, driver.sizeOf(store));\n    }\n","realPath":"streams/src/test/java/org/apache/kafka/streams/state/internals/AbstractKeyValueStoreTest.java","repoName":"kafka","snippetEndLine":0,"snippetStartLine":0,"startLine":150,"status":"MB"}],"commitId":"ee8c5e2dc391222b618b8a48dde9e407031ea85b","commitMessage":"@@@KAFKA-4379; Follow-up to avoid sending to changelog while restoring InMemoryLRUCache\n\n1. Added a flag to indicate if it is restoring or not in the LRU Store; since we only have a restore callback we have to set it each time applying the change.\n2. Fixed the corresponding unit test.  plus some minor cleaning up.\n\nAuthor: Guozhang Wang <wangguoz@gmail.com>\n\nReviewers: Damian Guy <damian.guy@gmail.com>.  Matthias J. Sax <matthias@confluent.io>.  Jason Gustafson <jason@confluent.io>\n\nCloses #2908 from guozhangwang/K4379-remove-listener\n","date":"2017-04-28 08:19:14","modifiedFileCount":"9","status":"M","submitter":"Guozhang Wang"},{"authorTime":"2018-02-07 05:14:33","codes":[{"authorDate":"2018-02-07 05:14:33","commitOrder":4,"curCode":"    public void testRestoreEvict() {\n        store.close();\n        \r\n        \r\n        driver.addEntryToRestoreLog(0, \"zero\");\n        driver.addEntryToRestoreLog(1, \"one\");\n        driver.addEntryToRestoreLog(2, \"two\");\n        driver.addEntryToRestoreLog(3, \"three\");\n        driver.addEntryToRestoreLog(4, \"four\");\n        driver.addEntryToRestoreLog(5, \"five\");\n        driver.addEntryToRestoreLog(6, \"fix\");\n        driver.addEntryToRestoreLog(7, \"seven\");\n        driver.addEntryToRestoreLog(8, \"eight\");\n        driver.addEntryToRestoreLog(9, \"nine\");\n        driver.addEntryToRestoreLog(10, \"ten\");\n\n        \r\n        \r\n        store = createKeyValueStore(driver.context());\n        context.restore(store.name(), driver.restoredEntries());\n        \r\n        assertEquals(0, driver.numFlushedEntryStored());\n        assertEquals(0, driver.numFlushedEntryRemoved());\n\n        \r\n        assertEquals(10, driver.sizeOf(store));\n    }\n","date":"2018-02-07 05:14:33","endLine":165,"groupId":"10871","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testRestoreEvict","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-kafka-10-0.7/blobInfo/CC_OUT/blobs/2d/39ae72ab63cd53e87412b7f08189d45231db3d.src","preCode":"    public void testRestoreEvict() {\n        store.close();\n        \r\n        \r\n        driver.addEntryToRestoreLog(0, \"zero\");\n        driver.addEntryToRestoreLog(1, \"one\");\n        driver.addEntryToRestoreLog(2, \"two\");\n        driver.addEntryToRestoreLog(3, \"three\");\n        driver.addEntryToRestoreLog(4, \"four\");\n        driver.addEntryToRestoreLog(5, \"five\");\n        driver.addEntryToRestoreLog(6, \"fix\");\n        driver.addEntryToRestoreLog(7, \"seven\");\n        driver.addEntryToRestoreLog(8, \"eight\");\n        driver.addEntryToRestoreLog(9, \"nine\");\n        driver.addEntryToRestoreLog(10, \"ten\");\n\n        \r\n        \r\n        store = createKeyValueStore(driver.context(), Integer.class, String.class, false);\n        context.restore(store.name(), driver.restoredEntries());\n        \r\n        assertEquals(0, driver.numFlushedEntryStored());\n        assertEquals(0, driver.numFlushedEntryRemoved());\n\n        \r\n        assertEquals(10, driver.sizeOf(store));\n    }\n","realPath":"streams/src/test/java/org/apache/kafka/streams/state/internals/InMemoryLRUCacheStoreTest.java","repoName":"kafka","snippetEndLine":0,"snippetStartLine":0,"startLine":139,"status":"M"},{"authorDate":"2018-02-07 05:14:33","commitOrder":4,"curCode":"    public void testRestore() {\n        store.close();\n        \r\n        \r\n        driver.addEntryToRestoreLog(0, \"zero\");\n        driver.addEntryToRestoreLog(1, \"one\");\n        driver.addEntryToRestoreLog(2, \"two\");\n        driver.addEntryToRestoreLog(3, \"three\");\n\n        \r\n        \r\n        store = createKeyValueStore(driver.context());\n        context.restore(store.name(), driver.restoredEntries());\n\n        \r\n        assertEquals(0, driver.checkForRestoredEntries(store));\n\n        \r\n        assertEquals(4, driver.sizeOf(store));\n    }\n","date":"2018-02-07 05:14:33","endLine":231,"groupId":"10871","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testRestore","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-kafka-10-0.7/blobInfo/CC_OUT/blobs/05/83e916511cd2d302dedb96990bc4ca03844861.src","preCode":"    public void testRestore() {\n        store.close();\n        \r\n        \r\n        driver.addEntryToRestoreLog(0, \"zero\");\n        driver.addEntryToRestoreLog(1, \"one\");\n        driver.addEntryToRestoreLog(2, \"two\");\n        driver.addEntryToRestoreLog(3, \"three\");\n\n        \r\n        \r\n        store = createKeyValueStore(driver.context(), Integer.class, String.class, false);\n        context.restore(store.name(), driver.restoredEntries());\n\n        \r\n        assertEquals(0, driver.checkForRestoredEntries(store));\n\n        \r\n        assertEquals(4, driver.sizeOf(store));\n    }\n","realPath":"streams/src/test/java/org/apache/kafka/streams/state/internals/AbstractKeyValueStoreTest.java","repoName":"kafka","snippetEndLine":0,"snippetStartLine":0,"startLine":212,"status":"M"}],"commitId":"a88db9595910a1a7f249f7c9f3effb14636955c7","commitMessage":"@@@KAFKA-4750: Bypass null value and treat it as deletes (#4508)\n\nHere is the new rule for handling nulls:\n* in the interface store.  put(key.  null) are handled normally and value serde will still be applied to null.  hence needs to handle null values\n* in the inner bytes store.  null bytes after serialization will be treated as deletes.\n* in the interface store.  if null bytes get returned in get(key).  it indicate the key is not available; and hence serde will be avoided and null object will be returned.\n\nMore changes:\n* Update javadocs.  add unit tests accordingly; augment MockContext to set serdes for the newly added tests.\n* Fixed a discovered bug which is exposed by the newly added tests.\n* Use the new API to remove all old APIs in the existing state store tests.\n* Remove SerializedKeyValueIterator since it is not used any more.\n\nThis is originally contributed by @evis.\n\nReviewers: Bill Bejeck <bill@confluent.io>.  Matthias J. Sax <matthias@confluent.io>.  Damian Guy <damian@confluent.io>","date":"2018-02-07 05:14:33","modifiedFileCount":"30","status":"M","submitter":"Guozhang Wang"}]
