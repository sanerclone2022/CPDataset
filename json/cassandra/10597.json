[{"authorTime":"2015-04-27 14:38:53","codes":[{"authorDate":"2015-04-27 14:38:53","commitOrder":1,"curCode":"    public void testRewriteFinished() throws IOException\n    {\n        Keyspace keyspace = Keyspace.open(KEYSPACE);\n        ColumnFamilyStore cfs = keyspace.getColumnFamilyStore(REWRITE_FINISHED_CF);\n\n        SSTableReader oldSSTable = getSSTable(cfs, 1);\n        LifecycleTransaction txn = cfs.getTracker().tryModify(oldSSTable, OperationType.COMPACTION);\n        SSTableReader newSSTable = replaceSSTable(cfs, txn, false);\n        TransactionLogs.waitForDeletions();\n\n        assertFiles(txn.logs().getDataFolder(), new HashSet<>(newSSTable.getAllFilePaths()));\n        assertFiles(txn.logs().getLogsFolder(), Collections.<String>emptySet());\n    }\n","date":"2015-07-24 21:41:51","endLine":96,"groupId":"6415","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testRewriteFinished","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cassandra-10-0.7/blobInfo/CC_OUT/blobs/52/91baa5d1b78600b0aa0ea959a4810e2af15e12.src","preCode":"    public void testRewriteFinished() throws IOException\n    {\n        Keyspace keyspace = Keyspace.open(KEYSPACE);\n        ColumnFamilyStore cfs = keyspace.getColumnFamilyStore(REWRITE_FINISHED_CF);\n\n        SSTableReader oldSSTable = getSSTable(cfs, 1);\n        LifecycleTransaction txn = cfs.getTracker().tryModify(oldSSTable, OperationType.COMPACTION);\n        SSTableReader newSSTable = replaceSSTable(cfs, txn, false);\n        TransactionLogs.waitForDeletions();\n\n        assertFiles(txn.logs().getDataFolder(), new HashSet<>(newSSTable.getAllFilePaths()));\n        assertFiles(txn.logs().getLogsFolder(), Collections.<String>emptySet());\n    }\n","realPath":"test/unit/org/apache/cassandra/db/lifecycle/RealTransactionsTest.java","repoName":"cassandra","snippetEndLine":0,"snippetStartLine":0,"startLine":84,"status":"B"},{"authorDate":"2015-04-27 14:38:53","commitOrder":1,"curCode":"    public void testRewriteAborted() throws IOException\n    {\n        Keyspace keyspace = Keyspace.open(KEYSPACE);\n        ColumnFamilyStore cfs = keyspace.getColumnFamilyStore(REWRITE_ABORTED_CF);\n\n        SSTableReader oldSSTable = getSSTable(cfs, 1);\n        LifecycleTransaction txn = cfs.getTracker().tryModify(oldSSTable, OperationType.COMPACTION);\n\n        replaceSSTable(cfs, txn, true);\n        TransactionLogs.waitForDeletions();\n\n        assertFiles(txn.logs().getDataFolder(), new HashSet<>(oldSSTable.getAllFilePaths()));\n        assertFiles(txn.logs().getLogsFolder(), Collections.<String>emptySet());\n    }\n","date":"2015-07-24 21:41:51","endLine":112,"groupId":"6416","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testRewriteAborted","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cassandra-10-0.7/blobInfo/CC_OUT/blobs/52/91baa5d1b78600b0aa0ea959a4810e2af15e12.src","preCode":"    public void testRewriteAborted() throws IOException\n    {\n        Keyspace keyspace = Keyspace.open(KEYSPACE);\n        ColumnFamilyStore cfs = keyspace.getColumnFamilyStore(REWRITE_ABORTED_CF);\n\n        SSTableReader oldSSTable = getSSTable(cfs, 1);\n        LifecycleTransaction txn = cfs.getTracker().tryModify(oldSSTable, OperationType.COMPACTION);\n\n        replaceSSTable(cfs, txn, true);\n        TransactionLogs.waitForDeletions();\n\n        assertFiles(txn.logs().getDataFolder(), new HashSet<>(oldSSTable.getAllFilePaths()));\n        assertFiles(txn.logs().getLogsFolder(), Collections.<String>emptySet());\n    }\n","realPath":"test/unit/org/apache/cassandra/db/lifecycle/RealTransactionsTest.java","repoName":"cassandra","snippetEndLine":0,"snippetStartLine":0,"startLine":99,"status":"B"}],"commitId":"b09e60f72bb2f37235d9e9190c25db36371b3c18","commitMessage":"@@@Introduce safer durable sstable membership management\n(and simplify cleanup of compaction leftovers)\n\nInstead of using temporary files and system tables. \nthis patch introduces a simple transaction log for sstable\nmembership edits that can be committed/aborted atomically\nand simply replayed on startup.\n\npatch by stefania; reviewed by benedict for CASSANDRA-7066\n","date":"2015-07-24 21:41:51","modifiedFileCount":"75","status":"B","submitter":"Stefania Alborghetti"},{"authorTime":"2015-08-17 17:20:15","codes":[{"authorDate":"2015-08-17 17:20:15","commitOrder":2,"curCode":"    public void testRewriteFinished() throws IOException\n    {\n        Keyspace keyspace = Keyspace.open(KEYSPACE);\n        ColumnFamilyStore cfs = keyspace.getColumnFamilyStore(REWRITE_FINISHED_CF);\n\n        SSTableReader oldSSTable = getSSTable(cfs, 1);\n        LifecycleTransaction txn = cfs.getTracker().tryModify(oldSSTable, OperationType.COMPACTION);\n        SSTableReader newSSTable = replaceSSTable(cfs, txn, false);\n        TransactionLog.waitForDeletions();\n\n        assertFiles(txn.log().getDataFolder(), new HashSet<>(newSSTable.getAllFilePaths()));\n    }\n","date":"2015-08-17 17:20:15","endLine":95,"groupId":"4751","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testRewriteFinished","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cassandra-10-0.7/blobInfo/CC_OUT/blobs/30/9e35acfe614d9aea3d667d35c75c375f1b4471.src","preCode":"    public void testRewriteFinished() throws IOException\n    {\n        Keyspace keyspace = Keyspace.open(KEYSPACE);\n        ColumnFamilyStore cfs = keyspace.getColumnFamilyStore(REWRITE_FINISHED_CF);\n\n        SSTableReader oldSSTable = getSSTable(cfs, 1);\n        LifecycleTransaction txn = cfs.getTracker().tryModify(oldSSTable, OperationType.COMPACTION);\n        SSTableReader newSSTable = replaceSSTable(cfs, txn, false);\n        TransactionLogs.waitForDeletions();\n\n        assertFiles(txn.logs().getDataFolder(), new HashSet<>(newSSTable.getAllFilePaths()));\n        assertFiles(txn.logs().getLogsFolder(), Collections.<String>emptySet());\n    }\n","realPath":"test/unit/org/apache/cassandra/db/lifecycle/RealTransactionsTest.java","repoName":"cassandra","snippetEndLine":0,"snippetStartLine":0,"startLine":84,"status":"M"},{"authorDate":"2015-08-17 17:20:15","commitOrder":2,"curCode":"    public void testRewriteAborted() throws IOException\n    {\n        Keyspace keyspace = Keyspace.open(KEYSPACE);\n        ColumnFamilyStore cfs = keyspace.getColumnFamilyStore(REWRITE_ABORTED_CF);\n\n        SSTableReader oldSSTable = getSSTable(cfs, 1);\n        LifecycleTransaction txn = cfs.getTracker().tryModify(oldSSTable, OperationType.COMPACTION);\n\n        replaceSSTable(cfs, txn, true);\n        TransactionLog.waitForDeletions();\n\n        assertFiles(txn.log().getDataFolder(), new HashSet<>(oldSSTable.getAllFilePaths()));\n    }\n","date":"2015-08-17 17:20:15","endLine":110,"groupId":"21770","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testRewriteAborted","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cassandra-10-0.7/blobInfo/CC_OUT/blobs/30/9e35acfe614d9aea3d667d35c75c375f1b4471.src","preCode":"    public void testRewriteAborted() throws IOException\n    {\n        Keyspace keyspace = Keyspace.open(KEYSPACE);\n        ColumnFamilyStore cfs = keyspace.getColumnFamilyStore(REWRITE_ABORTED_CF);\n\n        SSTableReader oldSSTable = getSSTable(cfs, 1);\n        LifecycleTransaction txn = cfs.getTracker().tryModify(oldSSTable, OperationType.COMPACTION);\n\n        replaceSSTable(cfs, txn, true);\n        TransactionLogs.waitForDeletions();\n\n        assertFiles(txn.logs().getDataFolder(), new HashSet<>(oldSSTable.getAllFilePaths()));\n        assertFiles(txn.logs().getLogsFolder(), Collections.<String>emptySet());\n    }\n","realPath":"test/unit/org/apache/cassandra/db/lifecycle/RealTransactionsTest.java","repoName":"cassandra","snippetEndLine":0,"snippetStartLine":0,"startLine":98,"status":"M"}],"commitId":"13ec86ce9e4fe6616bff85aa4730686212a347c1","commitMessage":"@@@Merge branch 'cassandra-3.0' into trunk\n","date":"2015-08-17 17:20:15","modifiedFileCount":"41","status":"M","submitter":"Benedict Elliott Smith"},{"authorTime":"2015-09-08 18:53:45","codes":[{"authorDate":"2015-09-08 18:53:45","commitOrder":3,"curCode":"    public void testRewriteFinished() throws IOException\n    {\n        Keyspace keyspace = Keyspace.open(KEYSPACE);\n        ColumnFamilyStore cfs = keyspace.getColumnFamilyStore(REWRITE_FINISHED_CF);\n\n        SSTableReader oldSSTable = getSSTable(cfs, 1);\n        LifecycleTransaction txn = cfs.getTracker().tryModify(oldSSTable, OperationType.COMPACTION);\n        SSTableReader newSSTable = replaceSSTable(cfs, txn, false);\n        LogTransaction.waitForDeletions();\n\n        assertFiles(txn.log().getDataFolder(), new HashSet<>(newSSTable.getAllFilePaths()));\n    }\n","date":"2015-09-08 18:53:45","endLine":90,"groupId":"4751","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"testRewriteFinished","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cassandra-10-0.7/blobInfo/CC_OUT/blobs/a7/ad156cbca0798b686187771fe14f9cae7a5068.src","preCode":"    public void testRewriteFinished() throws IOException\n    {\n        Keyspace keyspace = Keyspace.open(KEYSPACE);\n        ColumnFamilyStore cfs = keyspace.getColumnFamilyStore(REWRITE_FINISHED_CF);\n\n        SSTableReader oldSSTable = getSSTable(cfs, 1);\n        LifecycleTransaction txn = cfs.getTracker().tryModify(oldSSTable, OperationType.COMPACTION);\n        SSTableReader newSSTable = replaceSSTable(cfs, txn, false);\n        TransactionLog.waitForDeletions();\n\n        assertFiles(txn.log().getDataFolder(), new HashSet<>(newSSTable.getAllFilePaths()));\n    }\n","realPath":"test/unit/org/apache/cassandra/db/lifecycle/RealTransactionsTest.java","repoName":"cassandra","snippetEndLine":0,"snippetStartLine":0,"startLine":79,"status":"M"},{"authorDate":"2015-09-08 18:53:45","commitOrder":3,"curCode":"    public void testRewriteAborted() throws IOException\n    {\n        Keyspace keyspace = Keyspace.open(KEYSPACE);\n        ColumnFamilyStore cfs = keyspace.getColumnFamilyStore(REWRITE_ABORTED_CF);\n\n        SSTableReader oldSSTable = getSSTable(cfs, 1);\n        LifecycleTransaction txn = cfs.getTracker().tryModify(oldSSTable, OperationType.COMPACTION);\n\n        replaceSSTable(cfs, txn, true);\n        LogTransaction.waitForDeletions();\n\n        assertFiles(txn.log().getDataFolder(), new HashSet<>(oldSSTable.getAllFilePaths()));\n    }\n","date":"2015-09-08 18:53:45","endLine":105,"groupId":"21770","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"testRewriteAborted","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cassandra-10-0.7/blobInfo/CC_OUT/blobs/a7/ad156cbca0798b686187771fe14f9cae7a5068.src","preCode":"    public void testRewriteAborted() throws IOException\n    {\n        Keyspace keyspace = Keyspace.open(KEYSPACE);\n        ColumnFamilyStore cfs = keyspace.getColumnFamilyStore(REWRITE_ABORTED_CF);\n\n        SSTableReader oldSSTable = getSSTable(cfs, 1);\n        LifecycleTransaction txn = cfs.getTracker().tryModify(oldSSTable, OperationType.COMPACTION);\n\n        replaceSSTable(cfs, txn, true);\n        TransactionLog.waitForDeletions();\n\n        assertFiles(txn.log().getDataFolder(), new HashSet<>(oldSSTable.getAllFilePaths()));\n    }\n","realPath":"test/unit/org/apache/cassandra/db/lifecycle/RealTransactionsTest.java","repoName":"cassandra","snippetEndLine":0,"snippetStartLine":0,"startLine":93,"status":"M"}],"commitId":"322e21ec4ec4200d155ea5eb8e7545c446c3c726","commitMessage":"@@@Merge branch 'cassandra-3.0' into trunk\n","date":"2015-09-08 18:53:45","modifiedFileCount":"22","status":"M","submitter":"Benedict Elliott Smith"},{"authorTime":"2015-10-24 05:43:32","codes":[{"authorDate":"2015-10-24 05:43:32","commitOrder":4,"curCode":"    public void testRewriteFinished() throws IOException\n    {\n        Keyspace keyspace = Keyspace.open(KEYSPACE);\n        ColumnFamilyStore cfs = keyspace.getColumnFamilyStore(REWRITE_FINISHED_CF);\n\n        SSTableReader oldSSTable = getSSTable(cfs, 1);\n        LifecycleTransaction txn = cfs.getTracker().tryModify(oldSSTable, OperationType.COMPACTION);\n        SSTableReader newSSTable = replaceSSTable(cfs, txn, false);\n        LogTransaction.waitForDeletions();\n\n        \r\n        assertFiles(oldSSTable.descriptor.directory.getPath(), new HashSet<>(newSSTable.getAllFilePaths()));\n        assertFiles(newSSTable.descriptor.directory.getPath(), new HashSet<>(newSSTable.getAllFilePaths()));\n    }\n","date":"2015-10-24 05:43:32","endLine":92,"groupId":"10597","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"testRewriteFinished","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cassandra-10-0.7/blobInfo/CC_OUT/blobs/4f/bbb36828fc10b80cbf015a86c835d2e765f7da.src","preCode":"    public void testRewriteFinished() throws IOException\n    {\n        Keyspace keyspace = Keyspace.open(KEYSPACE);\n        ColumnFamilyStore cfs = keyspace.getColumnFamilyStore(REWRITE_FINISHED_CF);\n\n        SSTableReader oldSSTable = getSSTable(cfs, 1);\n        LifecycleTransaction txn = cfs.getTracker().tryModify(oldSSTable, OperationType.COMPACTION);\n        SSTableReader newSSTable = replaceSSTable(cfs, txn, false);\n        LogTransaction.waitForDeletions();\n\n        assertFiles(txn.log().getDataFolder(), new HashSet<>(newSSTable.getAllFilePaths()));\n    }\n","realPath":"test/unit/org/apache/cassandra/db/lifecycle/RealTransactionsTest.java","repoName":"cassandra","snippetEndLine":0,"snippetStartLine":0,"startLine":79,"status":"M"},{"authorDate":"2015-10-24 05:43:32","commitOrder":4,"curCode":"    public void testRewriteAborted() throws IOException\n    {\n        Keyspace keyspace = Keyspace.open(KEYSPACE);\n        ColumnFamilyStore cfs = keyspace.getColumnFamilyStore(REWRITE_ABORTED_CF);\n\n        SSTableReader oldSSTable = getSSTable(cfs, 1);\n        LifecycleTransaction txn = cfs.getTracker().tryModify(oldSSTable, OperationType.COMPACTION);\n\n        replaceSSTable(cfs, txn, true);\n        LogTransaction.waitForDeletions();\n\n        assertFiles(oldSSTable.descriptor.directory.getPath(), new HashSet<>(oldSSTable.getAllFilePaths()));\n    }\n","date":"2015-10-24 05:43:32","endLine":107,"groupId":"10597","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"testRewriteAborted","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cassandra-10-0.7/blobInfo/CC_OUT/blobs/4f/bbb36828fc10b80cbf015a86c835d2e765f7da.src","preCode":"    public void testRewriteAborted() throws IOException\n    {\n        Keyspace keyspace = Keyspace.open(KEYSPACE);\n        ColumnFamilyStore cfs = keyspace.getColumnFamilyStore(REWRITE_ABORTED_CF);\n\n        SSTableReader oldSSTable = getSSTable(cfs, 1);\n        LifecycleTransaction txn = cfs.getTracker().tryModify(oldSSTable, OperationType.COMPACTION);\n\n        replaceSSTable(cfs, txn, true);\n        LogTransaction.waitForDeletions();\n\n        assertFiles(txn.log().getDataFolder(), new HashSet<>(oldSSTable.getAllFilePaths()));\n    }\n","realPath":"test/unit/org/apache/cassandra/db/lifecycle/RealTransactionsTest.java","repoName":"cassandra","snippetEndLine":0,"snippetStartLine":0,"startLine":95,"status":"M"}],"commitId":"3a2dd0cf60f34c242c53d59ad144e76558dface9","commitMessage":"@@@Merge branch 'cassandra-3.0' into trunk\n","date":"2015-10-24 05:43:32","modifiedFileCount":"16","status":"M","submitter":"Joshua McKenzie"}]
