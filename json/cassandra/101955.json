[{"authorTime":"2016-05-30 23:45:22","codes":[{"authorDate":"2016-05-30 23:45:22","commitOrder":1,"curCode":"    private static void truncateLegacyTables(String legacyVersion) throws Exception\n    {\n        for (int compact = 0; compact <= 1; compact++)\n        {\n            logger.info(\"Truncating legacy version {}{}\", legacyVersion, getCompactNameSuffix(compact));\n            Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_simple%s\", legacyVersion, getCompactNameSuffix(compact))).truncateBlocking();\n            Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_simple_counter%s\", legacyVersion, getCompactNameSuffix(compact))).truncateBlocking();\n            Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_clust%s\", legacyVersion, getCompactNameSuffix(compact))).truncateBlocking();\n            Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_clust_counter%s\", legacyVersion, getCompactNameSuffix(compact))).truncateBlocking();\n        }\n    }\n","date":"2016-05-30 23:45:22","endLine":206,"groupId":"4015","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"truncateLegacyTables","params":"(StringlegacyVersion)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cassandra-10-0.7/blobInfo/CC_OUT/blobs/80/3e2755baff8dcd3199ad67842ab14f9e13b039.src","preCode":"    private static void truncateLegacyTables(String legacyVersion) throws Exception\n    {\n        for (int compact = 0; compact <= 1; compact++)\n        {\n            logger.info(\"Truncating legacy version {}{}\", legacyVersion, getCompactNameSuffix(compact));\n            Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_simple%s\", legacyVersion, getCompactNameSuffix(compact))).truncateBlocking();\n            Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_simple_counter%s\", legacyVersion, getCompactNameSuffix(compact))).truncateBlocking();\n            Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_clust%s\", legacyVersion, getCompactNameSuffix(compact))).truncateBlocking();\n            Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_clust_counter%s\", legacyVersion, getCompactNameSuffix(compact))).truncateBlocking();\n        }\n    }\n","realPath":"test/unit/org/apache/cassandra/io/sstable/LegacySSTableTest.java","repoName":"cassandra","snippetEndLine":0,"snippetStartLine":0,"startLine":196,"status":"B"},{"authorDate":"2016-05-30 23:45:22","commitOrder":1,"curCode":"    private static void compactLegacyTables(String legacyVersion) throws Exception\n    {\n        for (int compact = 0; compact <= 1; compact++)\n        {\n            logger.info(\"Compacting legacy version {}{}\", legacyVersion, getCompactNameSuffix(compact));\n            Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_simple%s\", legacyVersion, getCompactNameSuffix(compact))).forceMajorCompaction();\n            Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_simple_counter%s\", legacyVersion, getCompactNameSuffix(compact))).forceMajorCompaction();\n            Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_clust%s\", legacyVersion, getCompactNameSuffix(compact))).forceMajorCompaction();\n            Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_clust_counter%s\", legacyVersion, getCompactNameSuffix(compact))).forceMajorCompaction();\n        }\n    }\n","date":"2016-05-30 23:45:22","endLine":218,"groupId":"4013","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"compactLegacyTables","params":"(StringlegacyVersion)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cassandra-10-0.7/blobInfo/CC_OUT/blobs/80/3e2755baff8dcd3199ad67842ab14f9e13b039.src","preCode":"    private static void compactLegacyTables(String legacyVersion) throws Exception\n    {\n        for (int compact = 0; compact <= 1; compact++)\n        {\n            logger.info(\"Compacting legacy version {}{}\", legacyVersion, getCompactNameSuffix(compact));\n            Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_simple%s\", legacyVersion, getCompactNameSuffix(compact))).forceMajorCompaction();\n            Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_simple_counter%s\", legacyVersion, getCompactNameSuffix(compact))).forceMajorCompaction();\n            Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_clust%s\", legacyVersion, getCompactNameSuffix(compact))).forceMajorCompaction();\n            Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_clust_counter%s\", legacyVersion, getCompactNameSuffix(compact))).forceMajorCompaction();\n        }\n    }\n","realPath":"test/unit/org/apache/cassandra/io/sstable/LegacySSTableTest.java","repoName":"cassandra","snippetEndLine":0,"snippetStartLine":0,"startLine":208,"status":"B"}],"commitId":"72a053629e5c5a2b3d106909e705ebb417d0d898","commitMessage":"@@@Merge branch 'cassandra-3.7' into trunk\n","date":"2016-05-30 23:45:22","modifiedFileCount":"2","status":"B","submitter":"Robert Stupp"},{"authorTime":"2017-10-17 17:17:41","codes":[{"authorDate":"2017-10-17 17:17:41","commitOrder":2,"curCode":"    private static void truncateLegacyTables(String legacyVersion) throws Exception\n    {\n        logger.info(\"Truncating legacy version {}\", legacyVersion);\n        Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_simple\", legacyVersion)).truncateBlocking();\n        Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_simple_counter\", legacyVersion)).truncateBlocking();\n        Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_clust\", legacyVersion)).truncateBlocking();\n        Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_clust_counter\", legacyVersion)).truncateBlocking();\n    }\n","date":"2017-11-06 23:44:50","endLine":229,"groupId":"32289","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"truncateLegacyTables","params":"(StringlegacyVersion)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cassandra-10-0.7/blobInfo/CC_OUT/blobs/48/921842ceb63d40350431a952e69b6fccd3ef96.src","preCode":"    private static void truncateLegacyTables(String legacyVersion) throws Exception\n    {\n        for (int compact = 0; compact <= 1; compact++)\n        {\n            logger.info(\"Truncating legacy version {}{}\", legacyVersion, getCompactNameSuffix(compact));\n            Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_simple%s\", legacyVersion, getCompactNameSuffix(compact))).truncateBlocking();\n            Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_simple_counter%s\", legacyVersion, getCompactNameSuffix(compact))).truncateBlocking();\n            Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_clust%s\", legacyVersion, getCompactNameSuffix(compact))).truncateBlocking();\n            Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_clust_counter%s\", legacyVersion, getCompactNameSuffix(compact))).truncateBlocking();\n        }\n    }\n","realPath":"test/unit/org/apache/cassandra/io/sstable/LegacySSTableTest.java","repoName":"cassandra","snippetEndLine":0,"snippetStartLine":0,"startLine":222,"status":"M"},{"authorDate":"2017-10-17 17:17:41","commitOrder":2,"curCode":"    private static void compactLegacyTables(String legacyVersion) throws Exception\n    {\n        logger.info(\"Compacting legacy version {}\", legacyVersion);\n        Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_simple\", legacyVersion)).forceMajorCompaction();\n        Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_simple_counter\", legacyVersion)).forceMajorCompaction();\n        Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_clust\", legacyVersion)).forceMajorCompaction();\n        Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_clust_counter\", legacyVersion)).forceMajorCompaction();\n    }\n","date":"2017-11-06 23:44:50","endLine":238,"groupId":"32289","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"compactLegacyTables","params":"(StringlegacyVersion)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cassandra-10-0.7/blobInfo/CC_OUT/blobs/48/921842ceb63d40350431a952e69b6fccd3ef96.src","preCode":"    private static void compactLegacyTables(String legacyVersion) throws Exception\n    {\n        for (int compact = 0; compact <= 1; compact++)\n        {\n            logger.info(\"Compacting legacy version {}{}\", legacyVersion, getCompactNameSuffix(compact));\n            Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_simple%s\", legacyVersion, getCompactNameSuffix(compact))).forceMajorCompaction();\n            Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_simple_counter%s\", legacyVersion, getCompactNameSuffix(compact))).forceMajorCompaction();\n            Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_clust%s\", legacyVersion, getCompactNameSuffix(compact))).forceMajorCompaction();\n            Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_clust_counter%s\", legacyVersion, getCompactNameSuffix(compact))).forceMajorCompaction();\n        }\n    }\n","realPath":"test/unit/org/apache/cassandra/io/sstable/LegacySSTableTest.java","repoName":"cassandra","snippetEndLine":0,"snippetStartLine":0,"startLine":231,"status":"M"}],"commitId":"07fbd8ee6042797aaade90357d625ba9d79c31e0","commitMessage":"@@@Disallow COMPACT STORAGE syntax.  avoid starting when compact tables are present\n\nPatch by Alex Petrov; reviewed by Sylvain Lebresne for CASSANDRA-10857","date":"2017-11-06 23:44:50","modifiedFileCount":"33","status":"M","submitter":"Alex Petrov"},{"authorTime":"2017-10-17 17:17:41","codes":[{"authorDate":"2020-11-04 16:01:05","commitOrder":3,"curCode":"    public static void truncateLegacyTables(String legacyVersion) throws Exception\n    {\n        logger.info(\"Truncating legacy version {}\", legacyVersion);\n        Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_simple\", legacyVersion)).truncateBlocking();\n        Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_simple_counter\", legacyVersion)).truncateBlocking();\n        Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_clust\", legacyVersion)).truncateBlocking();\n        Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_clust_counter\", legacyVersion)).truncateBlocking();\n    }\n","date":"2020-11-05 02:01:06","endLine":455,"groupId":"101955","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"truncateLegacyTables","params":"(StringlegacyVersion)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cassandra-10-0.7/blobInfo/CC_OUT/blobs/94/0084f6f7328852f3a79580b664d5bc8a14d0e0.src","preCode":"    private static void truncateLegacyTables(String legacyVersion) throws Exception\n    {\n        logger.info(\"Truncating legacy version {}\", legacyVersion);\n        Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_simple\", legacyVersion)).truncateBlocking();\n        Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_simple_counter\", legacyVersion)).truncateBlocking();\n        Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_clust\", legacyVersion)).truncateBlocking();\n        Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_clust_counter\", legacyVersion)).truncateBlocking();\n    }\n","realPath":"test/unit/org/apache/cassandra/io/sstable/LegacySSTableTest.java","repoName":"cassandra","snippetEndLine":0,"snippetStartLine":0,"startLine":448,"status":"M"},{"authorDate":"2017-10-17 17:17:41","commitOrder":3,"curCode":"    private static void compactLegacyTables(String legacyVersion) throws Exception\n    {\n        logger.info(\"Compacting legacy version {}\", legacyVersion);\n        Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_simple\", legacyVersion)).forceMajorCompaction();\n        Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_simple_counter\", legacyVersion)).forceMajorCompaction();\n        Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_clust\", legacyVersion)).forceMajorCompaction();\n        Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_clust_counter\", legacyVersion)).forceMajorCompaction();\n    }\n","date":"2017-11-06 23:44:50","endLine":238,"groupId":"101955","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"compactLegacyTables","params":"(StringlegacyVersion)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cassandra-10-0.7/blobInfo/CC_OUT/blobs/48/921842ceb63d40350431a952e69b6fccd3ef96.src","preCode":"    private static void compactLegacyTables(String legacyVersion) throws Exception\n    {\n        logger.info(\"Compacting legacy version {}\", legacyVersion);\n        Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_simple\", legacyVersion)).forceMajorCompaction();\n        Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_simple_counter\", legacyVersion)).forceMajorCompaction();\n        Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_clust\", legacyVersion)).forceMajorCompaction();\n        Keyspace.open(\"legacy_tables\").getColumnFamilyStore(String.format(\"legacy_%s_clust_counter\", legacyVersion)).forceMajorCompaction();\n    }\n","realPath":"test/unit/org/apache/cassandra/io/sstable/LegacySSTableTest.java","repoName":"cassandra","snippetEndLine":0,"snippetStartLine":0,"startLine":231,"status":"N"}],"commitId":"7e0c0e59c7c5a27df2dfce52f02c2cb7c0eff968","commitMessage":"@@@Harden sstableupgrade unit test\n\nPatch by Berenguer Blasi.  reviewed by brandonwilliams for\nCASSANDRA-16011\n","date":"2020-11-05 02:01:06","modifiedFileCount":"2","status":"M","submitter":"Bereng"}]
