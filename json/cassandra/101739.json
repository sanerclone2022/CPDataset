[{"authorTime":"2016-03-05 05:15:17","codes":[{"authorDate":"2016-03-05 05:15:17","commitOrder":1,"curCode":"    public void testMapKeyContainsWithIndex() throws Throwable\n    {\n        createTable(\"CREATE TABLE %s (account text, id int, categories map<text,text>, PRIMARY KEY (account, id))\");\n        createIndex(\"CREATE INDEX ON %s(keys(categories))\");\n\n        execute(\"INSERT INTO %s (account, id , categories) VALUES (?, ?, ?)\", \"test\", 5, map(\"lmn\", \"foo\"));\n\n        assertEmpty(execute(\"SELECT * FROM %s WHERE account = ? AND categories CONTAINS KEY ?\", \"xyz\", \"lmn\"));\n\n        assertRows(execute(\"SELECT * FROM %s WHERE account = ? AND categories CONTAINS KEY ?\", \"test\", \"lmn\"),\n                   row(\"test\", 5, map(\"lmn\", \"foo\"))\n        );\n        assertRows(execute(\"SELECT * FROM %s WHERE categories CONTAINS KEY ?\", \"lmn\"),\n                   row(\"test\", 5, map(\"lmn\", \"foo\"))\n        );\n\n        assertRows(execute(\"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS KEY ?\", \"test\", 5, \"lmn\"),\n                   row(\"test\", 5, map(\"lmn\", \"foo\"))\n        );\n\n        assertInvalidMessage(\"Unsupported null value for column categories\",\n                             \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS KEY ?\", \"test\", 5, null);\n\n        assertInvalidMessage(\"Unsupported unset value for column categories\",\n                             \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS KEY ?\", \"test\", 5, unset());\n\n        assertInvalidMessage(StatementRestrictions.REQUIRES_ALLOW_FILTERING_MESSAGE,\n                             \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS KEY ? AND categories CONTAINS KEY ?\",\n                             \"test\", 5, \"lmn\", \"notPresent\");\n        assertEmpty(execute(\"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS KEY ? AND categories CONTAINS KEY ? ALLOW FILTERING\",\n                            \"test\", 5, \"lmn\", \"notPresent\"));\n\n        assertInvalidMessage(StatementRestrictions.REQUIRES_ALLOW_FILTERING_MESSAGE,\n                             \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS KEY ? AND categories CONTAINS ?\",\n                             \"test\", 5, \"lmn\", \"foo\");\n    }\n","date":"2016-03-05 05:15:29","endLine":494,"groupId":"24580","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testMapKeyContainsWithIndex","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cassandra-10-0.7/blobInfo/CC_OUT/blobs/c5/feccbf365a889a9fb38560391a77038483fd3f.src","preCode":"    public void testMapKeyContainsWithIndex() throws Throwable\n    {\n        createTable(\"CREATE TABLE %s (account text, id int, categories map<text,text>, PRIMARY KEY (account, id))\");\n        createIndex(\"CREATE INDEX ON %s(keys(categories))\");\n\n        execute(\"INSERT INTO %s (account, id , categories) VALUES (?, ?, ?)\", \"test\", 5, map(\"lmn\", \"foo\"));\n\n        assertEmpty(execute(\"SELECT * FROM %s WHERE account = ? AND categories CONTAINS KEY ?\", \"xyz\", \"lmn\"));\n\n        assertRows(execute(\"SELECT * FROM %s WHERE account = ? AND categories CONTAINS KEY ?\", \"test\", \"lmn\"),\n                   row(\"test\", 5, map(\"lmn\", \"foo\"))\n        );\n        assertRows(execute(\"SELECT * FROM %s WHERE categories CONTAINS KEY ?\", \"lmn\"),\n                   row(\"test\", 5, map(\"lmn\", \"foo\"))\n        );\n\n        assertRows(execute(\"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS KEY ?\", \"test\", 5, \"lmn\"),\n                   row(\"test\", 5, map(\"lmn\", \"foo\"))\n        );\n\n        assertInvalidMessage(\"Unsupported null value for column categories\",\n                             \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS KEY ?\", \"test\", 5, null);\n\n        assertInvalidMessage(\"Unsupported unset value for column categories\",\n                             \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS KEY ?\", \"test\", 5, unset());\n\n        assertInvalidMessage(StatementRestrictions.REQUIRES_ALLOW_FILTERING_MESSAGE,\n                             \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS KEY ? AND categories CONTAINS KEY ?\",\n                             \"test\", 5, \"lmn\", \"notPresent\");\n        assertEmpty(execute(\"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS KEY ? AND categories CONTAINS KEY ? ALLOW FILTERING\",\n                            \"test\", 5, \"lmn\", \"notPresent\"));\n\n        assertInvalidMessage(StatementRestrictions.REQUIRES_ALLOW_FILTERING_MESSAGE,\n                             \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS KEY ? AND categories CONTAINS ?\",\n                             \"test\", 5, \"lmn\", \"foo\");\n    }\n","realPath":"test/unit/org/apache/cassandra/cql3/validation/operations/SelectTest.java","repoName":"cassandra","snippetEndLine":0,"snippetStartLine":0,"startLine":459,"status":"B"},{"authorDate":"2016-03-05 05:15:17","commitOrder":1,"curCode":"    public void testMapValueContainsWithIndex() throws Throwable\n    {\n        createTable(\"CREATE TABLE %s (account text, id int, categories map<text,text>, PRIMARY KEY (account, id))\");\n        createIndex(\"CREATE INDEX ON %s(categories)\");\n\n        execute(\"INSERT INTO %s (account, id , categories) VALUES (?, ?, ?)\", \"test\", 5, map(\"lmn\", \"foo\"));\n\n        assertEmpty(execute(\"SELECT * FROM %s WHERE account = ? AND categories CONTAINS ?\", \"xyz\", \"foo\"));\n\n        assertRows(execute(\"SELECT * FROM %s WHERE account = ? AND categories CONTAINS ?\", \"test\", \"foo\"),\n                   row(\"test\", 5, map(\"lmn\", \"foo\"))\n        );\n\n        assertRows(execute(\"SELECT * FROM %s WHERE categories CONTAINS ?\", \"foo\"),\n                   row(\"test\", 5, map(\"lmn\", \"foo\"))\n        );\n\n        assertRows(execute(\"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS ?\", \"test\", 5, \"foo\"),\n                   row(\"test\", 5, map(\"lmn\", \"foo\"))\n        );\n\n        assertInvalidMessage(\"Unsupported null value for column categories\",\n                             \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS ?\", \"test\", 5, null);\n\n        assertInvalidMessage(\"Unsupported unset value for column categories\",\n                             \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS ?\", \"test\", 5, unset());\n\n        assertInvalidMessage(StatementRestrictions.REQUIRES_ALLOW_FILTERING_MESSAGE,\n                             \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS ? AND categories CONTAINS ?\"\n                            , \"test\", 5, \"foo\", \"notPresent\");\n\n        assertEmpty(execute(\"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS ? AND categories CONTAINS ? ALLOW FILTERING\"\n                           , \"test\", 5, \"foo\", \"notPresent\"));\n    }\n","date":"2016-03-05 05:15:29","endLine":530,"groupId":"24581","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testMapValueContainsWithIndex","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cassandra-10-0.7/blobInfo/CC_OUT/blobs/c5/feccbf365a889a9fb38560391a77038483fd3f.src","preCode":"    public void testMapValueContainsWithIndex() throws Throwable\n    {\n        createTable(\"CREATE TABLE %s (account text, id int, categories map<text,text>, PRIMARY KEY (account, id))\");\n        createIndex(\"CREATE INDEX ON %s(categories)\");\n\n        execute(\"INSERT INTO %s (account, id , categories) VALUES (?, ?, ?)\", \"test\", 5, map(\"lmn\", \"foo\"));\n\n        assertEmpty(execute(\"SELECT * FROM %s WHERE account = ? AND categories CONTAINS ?\", \"xyz\", \"foo\"));\n\n        assertRows(execute(\"SELECT * FROM %s WHERE account = ? AND categories CONTAINS ?\", \"test\", \"foo\"),\n                   row(\"test\", 5, map(\"lmn\", \"foo\"))\n        );\n\n        assertRows(execute(\"SELECT * FROM %s WHERE categories CONTAINS ?\", \"foo\"),\n                   row(\"test\", 5, map(\"lmn\", \"foo\"))\n        );\n\n        assertRows(execute(\"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS ?\", \"test\", 5, \"foo\"),\n                   row(\"test\", 5, map(\"lmn\", \"foo\"))\n        );\n\n        assertInvalidMessage(\"Unsupported null value for column categories\",\n                             \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS ?\", \"test\", 5, null);\n\n        assertInvalidMessage(\"Unsupported unset value for column categories\",\n                             \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS ?\", \"test\", 5, unset());\n\n        assertInvalidMessage(StatementRestrictions.REQUIRES_ALLOW_FILTERING_MESSAGE,\n                             \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS ? AND categories CONTAINS ?\"\n                            , \"test\", 5, \"foo\", \"notPresent\");\n\n        assertEmpty(execute(\"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS ? AND categories CONTAINS ? ALLOW FILTERING\"\n                           , \"test\", 5, \"foo\", \"notPresent\"));\n    }\n","realPath":"test/unit/org/apache/cassandra/cql3/validation/operations/SelectTest.java","repoName":"cassandra","snippetEndLine":0,"snippetStartLine":0,"startLine":497,"status":"B"}],"commitId":"6e69c75900f3640195130085ad69daa1659184eb","commitMessage":"@@@Merge branch cassandra-3.5 into trunk\n","date":"2016-03-05 05:15:29","modifiedFileCount":"14","status":"B","submitter":"Benjamin Lerer"},{"authorTime":"2016-09-21 23:08:58","codes":[{"authorDate":"2016-09-21 23:08:58","commitOrder":2,"curCode":"    public void testMapKeyContainsWithIndex() throws Throwable\n    {\n        createTable(\"CREATE TABLE %s (account text, id int, categories map<text,text>, PRIMARY KEY (account, id))\");\n        createIndex(\"CREATE INDEX ON %s(keys(categories))\");\n\n        execute(\"INSERT INTO %s (account, id , categories) VALUES (?, ?, ?)\", \"test\", 5, map(\"lmn\", \"foo\"));\n\n        beforeAndAfterFlush(() -> {\n            assertEmpty(execute(\"SELECT * FROM %s WHERE account = ? AND categories CONTAINS KEY ?\", \"xyz\", \"lmn\"));\n\n            assertRows(execute(\"SELECT * FROM %s WHERE account = ? AND categories CONTAINS KEY ?\", \"test\", \"lmn\"),\n                       row(\"test\", 5, map(\"lmn\", \"foo\"))\n            );\n            assertRows(execute(\"SELECT * FROM %s WHERE categories CONTAINS KEY ?\", \"lmn\"),\n                       row(\"test\", 5, map(\"lmn\", \"foo\"))\n            );\n\n            assertRows(execute(\"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS KEY ?\", \"test\", 5, \"lmn\"),\n                       row(\"test\", 5, map(\"lmn\", \"foo\"))\n            );\n\n            assertInvalidMessage(\"Unsupported null value for column categories\",\n                                 \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS KEY ?\", \"test\", 5, null);\n\n            assertInvalidMessage(\"Unsupported unset value for column categories\",\n                                 \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS KEY ?\", \"test\", 5, unset());\n\n            assertInvalidMessage(StatementRestrictions.REQUIRES_ALLOW_FILTERING_MESSAGE,\n                                 \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS KEY ? AND categories CONTAINS KEY ?\",\n                                 \"test\", 5, \"lmn\", \"notPresent\");\n            assertEmpty(execute(\"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS KEY ? AND categories CONTAINS KEY ? ALLOW FILTERING\",\n                                \"test\", 5, \"lmn\", \"notPresent\"));\n\n            assertInvalidMessage(StatementRestrictions.REQUIRES_ALLOW_FILTERING_MESSAGE,\n                                 \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS KEY ? AND categories CONTAINS ?\",\n                                 \"test\", 5, \"lmn\", \"foo\");\n        });\n    }\n","date":"2016-09-21 23:30:18","endLine":504,"groupId":"101739","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testMapKeyContainsWithIndex","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cassandra-10-0.7/blobInfo/CC_OUT/blobs/f1/6795592d2728dd0caa765af89f123e805bdb87.src","preCode":"    public void testMapKeyContainsWithIndex() throws Throwable\n    {\n        createTable(\"CREATE TABLE %s (account text, id int, categories map<text,text>, PRIMARY KEY (account, id))\");\n        createIndex(\"CREATE INDEX ON %s(keys(categories))\");\n\n        execute(\"INSERT INTO %s (account, id , categories) VALUES (?, ?, ?)\", \"test\", 5, map(\"lmn\", \"foo\"));\n\n        assertEmpty(execute(\"SELECT * FROM %s WHERE account = ? AND categories CONTAINS KEY ?\", \"xyz\", \"lmn\"));\n\n        assertRows(execute(\"SELECT * FROM %s WHERE account = ? AND categories CONTAINS KEY ?\", \"test\", \"lmn\"),\n                   row(\"test\", 5, map(\"lmn\", \"foo\"))\n        );\n        assertRows(execute(\"SELECT * FROM %s WHERE categories CONTAINS KEY ?\", \"lmn\"),\n                   row(\"test\", 5, map(\"lmn\", \"foo\"))\n        );\n\n        assertRows(execute(\"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS KEY ?\", \"test\", 5, \"lmn\"),\n                   row(\"test\", 5, map(\"lmn\", \"foo\"))\n        );\n\n        assertInvalidMessage(\"Unsupported null value for column categories\",\n                             \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS KEY ?\", \"test\", 5, null);\n\n        assertInvalidMessage(\"Unsupported unset value for column categories\",\n                             \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS KEY ?\", \"test\", 5, unset());\n\n        assertInvalidMessage(StatementRestrictions.REQUIRES_ALLOW_FILTERING_MESSAGE,\n                             \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS KEY ? AND categories CONTAINS KEY ?\",\n                             \"test\", 5, \"lmn\", \"notPresent\");\n        assertEmpty(execute(\"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS KEY ? AND categories CONTAINS KEY ? ALLOW FILTERING\",\n                            \"test\", 5, \"lmn\", \"notPresent\"));\n\n        assertInvalidMessage(StatementRestrictions.REQUIRES_ALLOW_FILTERING_MESSAGE,\n                             \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS KEY ? AND categories CONTAINS ?\",\n                             \"test\", 5, \"lmn\", \"foo\");\n    }\n","realPath":"test/unit/org/apache/cassandra/cql3/validation/operations/SelectTest.java","repoName":"cassandra","snippetEndLine":0,"snippetStartLine":0,"startLine":467,"status":"M"},{"authorDate":"2016-09-21 23:08:58","commitOrder":2,"curCode":"    public void testMapValueContainsWithIndex() throws Throwable\n    {\n        createTable(\"CREATE TABLE %s (account text, id int, categories map<text,text>, PRIMARY KEY (account, id))\");\n        createIndex(\"CREATE INDEX ON %s(categories)\");\n\n        execute(\"INSERT INTO %s (account, id , categories) VALUES (?, ?, ?)\", \"test\", 5, map(\"lmn\", \"foo\"));\n\n        beforeAndAfterFlush(() -> {\n            assertEmpty(execute(\"SELECT * FROM %s WHERE account = ? AND categories CONTAINS ?\", \"xyz\", \"foo\"));\n\n            assertRows(execute(\"SELECT * FROM %s WHERE account = ? AND categories CONTAINS ?\", \"test\", \"foo\"),\n                       row(\"test\", 5, map(\"lmn\", \"foo\"))\n            );\n\n            assertRows(execute(\"SELECT * FROM %s WHERE categories CONTAINS ?\", \"foo\"),\n                       row(\"test\", 5, map(\"lmn\", \"foo\"))\n            );\n\n            assertRows(execute(\"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS ?\", \"test\", 5, \"foo\"),\n                       row(\"test\", 5, map(\"lmn\", \"foo\"))\n            );\n\n            assertInvalidMessage(\"Unsupported null value for column categories\",\n                                 \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS ?\", \"test\", 5, null);\n\n            assertInvalidMessage(\"Unsupported unset value for column categories\",\n                                 \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS ?\", \"test\", 5, unset());\n\n            assertInvalidMessage(StatementRestrictions.REQUIRES_ALLOW_FILTERING_MESSAGE,\n                                 \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS ? AND categories CONTAINS ?\",\n                                 \"test\", 5, \"foo\", \"notPresent\");\n\n            assertEmpty(execute(\"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS ? AND categories CONTAINS ? ALLOW FILTERING\",\n                                \"test\", 5, \"foo\", \"notPresent\"));\n        });\n    }\n","date":"2016-09-21 23:30:18","endLine":542,"groupId":"101739","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testMapValueContainsWithIndex","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cassandra-10-0.7/blobInfo/CC_OUT/blobs/f1/6795592d2728dd0caa765af89f123e805bdb87.src","preCode":"    public void testMapValueContainsWithIndex() throws Throwable\n    {\n        createTable(\"CREATE TABLE %s (account text, id int, categories map<text,text>, PRIMARY KEY (account, id))\");\n        createIndex(\"CREATE INDEX ON %s(categories)\");\n\n        execute(\"INSERT INTO %s (account, id , categories) VALUES (?, ?, ?)\", \"test\", 5, map(\"lmn\", \"foo\"));\n\n        assertEmpty(execute(\"SELECT * FROM %s WHERE account = ? AND categories CONTAINS ?\", \"xyz\", \"foo\"));\n\n        assertRows(execute(\"SELECT * FROM %s WHERE account = ? AND categories CONTAINS ?\", \"test\", \"foo\"),\n                   row(\"test\", 5, map(\"lmn\", \"foo\"))\n        );\n\n        assertRows(execute(\"SELECT * FROM %s WHERE categories CONTAINS ?\", \"foo\"),\n                   row(\"test\", 5, map(\"lmn\", \"foo\"))\n        );\n\n        assertRows(execute(\"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS ?\", \"test\", 5, \"foo\"),\n                   row(\"test\", 5, map(\"lmn\", \"foo\"))\n        );\n\n        assertInvalidMessage(\"Unsupported null value for column categories\",\n                             \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS ?\", \"test\", 5, null);\n\n        assertInvalidMessage(\"Unsupported unset value for column categories\",\n                             \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS ?\", \"test\", 5, unset());\n\n        assertInvalidMessage(StatementRestrictions.REQUIRES_ALLOW_FILTERING_MESSAGE,\n                             \"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS ? AND categories CONTAINS ?\"\n                            , \"test\", 5, \"foo\", \"notPresent\");\n\n        assertEmpty(execute(\"SELECT * FROM %s WHERE account = ? AND id = ? AND categories CONTAINS ? AND categories CONTAINS ? ALLOW FILTERING\"\n                           , \"test\", 5, \"foo\", \"notPresent\"));\n    }\n","realPath":"test/unit/org/apache/cassandra/cql3/validation/operations/SelectTest.java","repoName":"cassandra","snippetEndLine":0,"snippetStartLine":0,"startLine":507,"status":"M"}],"commitId":"bcd274f7c04e2cb9fe9a8155428dfa7212fe3a70","commitMessage":"@@@Ninja: add beforeAndAfterFlush to 2i and filtering tests.","date":"2016-09-21 23:30:18","modifiedFileCount":"2","status":"M","submitter":"Alex Petrov"}]
