[{"authorTime":"2015-10-24 05:43:32","codes":[{"authorDate":"2015-10-24 05:43:32","commitOrder":2,"curCode":"    public void testGetTemporaryFilesSafeAfterObsoletion() throws Throwable\n    {\n        ColumnFamilyStore cfs = MockSchema.newCFS(KEYSPACE);\n        File dataFolder = new Directories(cfs.metadata).getDirectoryForNewSSTables();\n        SSTableReader sstable = sstable(dataFolder, cfs, 0, 128);\n\n        LogTransaction logs = new LogTransaction(OperationType.COMPACTION);\n        assertNotNull(logs);\n\n        LogTransaction.SSTableTidier tidier = logs.obsoleted(sstable);\n\n        logs.finish();\n\n        sstable.markObsolete(tidier);\n        sstable.selfRef().release();\n\n        \r\n        \r\n        \r\n        for (int i = 0; i < 200; i++)\n            LogAwareFileLister.getTemporaryFiles(dataFolder);\n    }\n","date":"2015-10-24 05:43:32","endLine":1053,"groupId":"18580","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testGetTemporaryFilesSafeAfterObsoletion","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cassandra-10-0.7/blobInfo/CC_OUT/blobs/df/05d71fd177e6af16b3ea4e4c0c1a735ea6301b.src","preCode":"    public void testGetTemporaryFilesSafeAfterObsoletion() throws Throwable\n    {\n        ColumnFamilyStore cfs = MockSchema.newCFS(KEYSPACE);\n        File dataFolder = new Directories(cfs.metadata).getDirectoryForNewSSTables();\n        SSTableReader sstable = sstable(dataFolder, cfs, 0, 128);\n\n        LogTransaction logs = new LogTransaction(OperationType.COMPACTION);\n        assertNotNull(logs);\n\n        LogTransaction.SSTableTidier tidier = logs.obsoleted(sstable);\n\n        logs.finish();\n\n        sstable.markObsolete(tidier);\n        sstable.selfRef().release();\n\n        \r\n        \r\n        \r\n        for (int i = 0; i < 200; i++)\n            LogAwareFileLister.getTemporaryFiles(dataFolder);\n    }\n","realPath":"test/unit/org/apache/cassandra/db/lifecycle/LogTransactionTest.java","repoName":"cassandra","snippetEndLine":0,"snippetStartLine":0,"startLine":1032,"status":"MB"},{"authorDate":"2015-10-24 05:43:32","commitOrder":2,"curCode":"    public void testGetTemporaryFilesThrowsIfCompletingAfterObsoletion() throws Throwable\n    {\n        ColumnFamilyStore cfs = MockSchema.newCFS(KEYSPACE);\n        File dataFolder = new Directories(cfs.metadata).getDirectoryForNewSSTables();\n        SSTableReader sstable = sstable(dataFolder, cfs, 0, 128);\n\n        LogTransaction logs = new LogTransaction(OperationType.COMPACTION);\n        assertNotNull(logs);\n\n        LogTransaction.SSTableTidier tidier = logs.obsoleted(sstable);\n\n        sstable.markObsolete(tidier);\n        sstable.selfRef().release();\n\n        LogTransaction.waitForDeletions();\n\n        try\n        {\n            \r\n            \r\n            \r\n            LogAwareFileLister.getTemporaryFiles(dataFolder);\n            fail(\"Expected runtime exception\");\n        }\n        catch(RuntimeException e)\n        {\n            \r\n        }\n\n        logs.finish();\n    }\n","date":"2015-10-24 05:43:32","endLine":1086,"groupId":"2679","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testGetTemporaryFilesThrowsIfCompletingAfterObsoletion","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cassandra-10-0.7/blobInfo/CC_OUT/blobs/df/05d71fd177e6af16b3ea4e4c0c1a735ea6301b.src","preCode":"    public void testGetTemporaryFilesThrowsIfCompletingAfterObsoletion() throws Throwable\n    {\n        ColumnFamilyStore cfs = MockSchema.newCFS(KEYSPACE);\n        File dataFolder = new Directories(cfs.metadata).getDirectoryForNewSSTables();\n        SSTableReader sstable = sstable(dataFolder, cfs, 0, 128);\n\n        LogTransaction logs = new LogTransaction(OperationType.COMPACTION);\n        assertNotNull(logs);\n\n        LogTransaction.SSTableTidier tidier = logs.obsoleted(sstable);\n\n        sstable.markObsolete(tidier);\n        sstable.selfRef().release();\n\n        LogTransaction.waitForDeletions();\n\n        try\n        {\n            \r\n            \r\n            \r\n            LogAwareFileLister.getTemporaryFiles(dataFolder);\n            fail(\"Expected runtime exception\");\n        }\n        catch(RuntimeException e)\n        {\n            \r\n        }\n\n        logs.finish();\n    }\n","realPath":"test/unit/org/apache/cassandra/db/lifecycle/LogTransactionTest.java","repoName":"cassandra","snippetEndLine":0,"snippetStartLine":0,"startLine":1056,"status":"MB"}],"commitId":"3a2dd0cf60f34c242c53d59ad144e76558dface9","commitMessage":"@@@Merge branch 'cassandra-3.0' into trunk\n","date":"2015-10-24 05:43:32","modifiedFileCount":"16","status":"M","submitter":"Joshua McKenzie"},{"authorTime":"2016-02-11 16:19:33","codes":[{"authorDate":"2015-10-24 05:43:32","commitOrder":3,"curCode":"    public void testGetTemporaryFilesSafeAfterObsoletion() throws Throwable\n    {\n        ColumnFamilyStore cfs = MockSchema.newCFS(KEYSPACE);\n        File dataFolder = new Directories(cfs.metadata).getDirectoryForNewSSTables();\n        SSTableReader sstable = sstable(dataFolder, cfs, 0, 128);\n\n        LogTransaction logs = new LogTransaction(OperationType.COMPACTION);\n        assertNotNull(logs);\n\n        LogTransaction.SSTableTidier tidier = logs.obsoleted(sstable);\n\n        logs.finish();\n\n        sstable.markObsolete(tidier);\n        sstable.selfRef().release();\n\n        \r\n        \r\n        \r\n        for (int i = 0; i < 200; i++)\n            LogAwareFileLister.getTemporaryFiles(dataFolder);\n    }\n","date":"2015-10-24 05:43:32","endLine":1053,"groupId":"18580","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testGetTemporaryFilesSafeAfterObsoletion","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cassandra-10-0.7/blobInfo/CC_OUT/blobs/df/05d71fd177e6af16b3ea4e4c0c1a735ea6301b.src","preCode":"    public void testGetTemporaryFilesSafeAfterObsoletion() throws Throwable\n    {\n        ColumnFamilyStore cfs = MockSchema.newCFS(KEYSPACE);\n        File dataFolder = new Directories(cfs.metadata).getDirectoryForNewSSTables();\n        SSTableReader sstable = sstable(dataFolder, cfs, 0, 128);\n\n        LogTransaction logs = new LogTransaction(OperationType.COMPACTION);\n        assertNotNull(logs);\n\n        LogTransaction.SSTableTidier tidier = logs.obsoleted(sstable);\n\n        logs.finish();\n\n        sstable.markObsolete(tidier);\n        sstable.selfRef().release();\n\n        \r\n        \r\n        \r\n        for (int i = 0; i < 200; i++)\n            LogAwareFileLister.getTemporaryFiles(dataFolder);\n    }\n","realPath":"test/unit/org/apache/cassandra/db/lifecycle/LogTransactionTest.java","repoName":"cassandra","snippetEndLine":0,"snippetStartLine":0,"startLine":1032,"status":"N"},{"authorDate":"2016-02-11 16:19:33","commitOrder":3,"curCode":"    public void testGetTemporaryFilesThrowsIfCompletingAfterObsoletion() throws Throwable\n    {\n        ColumnFamilyStore cfs = MockSchema.newCFS(KEYSPACE);\n        File dataFolder = new Directories(cfs.metadata).getDirectoryForNewSSTables();\n        SSTableReader sstable = sstable(dataFolder, cfs, 0, 128);\n\n        LogTransaction logs = new LogTransaction(OperationType.COMPACTION);\n        assertNotNull(logs);\n\n        LogTransaction.SSTableTidier tidier = logs.obsoleted(sstable);\n\n        sstable.markObsolete(tidier);\n        sstable.selfRef().release();\n\n        LogTransaction.waitForDeletions();\n\n        try\n        {\n            \r\n            \r\n            \r\n            LogAwareFileLister.getTemporaryFiles(dataFolder);\n            fail(\"Expected runtime exception\");\n        }\n        catch(RuntimeException e)\n        {\n            \r\n            assertFalse(e.getCause() instanceof AssertionError);\n        }\n\n        logs.finish();\n    }\n","date":"2016-02-11 16:19:33","endLine":1087,"groupId":"2679","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testGetTemporaryFilesThrowsIfCompletingAfterObsoletion","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cassandra-10-0.7/blobInfo/CC_OUT/blobs/4f/2fc731f89501fcb38ffa437628f537acba75ba.src","preCode":"    public void testGetTemporaryFilesThrowsIfCompletingAfterObsoletion() throws Throwable\n    {\n        ColumnFamilyStore cfs = MockSchema.newCFS(KEYSPACE);\n        File dataFolder = new Directories(cfs.metadata).getDirectoryForNewSSTables();\n        SSTableReader sstable = sstable(dataFolder, cfs, 0, 128);\n\n        LogTransaction logs = new LogTransaction(OperationType.COMPACTION);\n        assertNotNull(logs);\n\n        LogTransaction.SSTableTidier tidier = logs.obsoleted(sstable);\n\n        sstable.markObsolete(tidier);\n        sstable.selfRef().release();\n\n        LogTransaction.waitForDeletions();\n\n        try\n        {\n            \r\n            \r\n            \r\n            LogAwareFileLister.getTemporaryFiles(dataFolder);\n            fail(\"Expected runtime exception\");\n        }\n        catch(RuntimeException e)\n        {\n            \r\n        }\n\n        logs.finish();\n    }\n","realPath":"test/unit/org/apache/cassandra/db/lifecycle/LogTransactionTest.java","repoName":"cassandra","snippetEndLine":0,"snippetStartLine":0,"startLine":1056,"status":"M"}],"commitId":"ebd6c23dffddbef5daf9068abf51c82e4a245d80","commitMessage":"@@@Merge branch 'cassandra-3.0' into trunk\n","date":"2016-02-11 16:19:33","modifiedFileCount":"2","status":"M","submitter":"Marcus Eriksson"},{"authorTime":"2016-04-02 01:45:48","codes":[{"authorDate":"2016-04-02 01:45:48","commitOrder":4,"curCode":"    public void testGetTemporaryFilesSafeAfterObsoletion() throws Throwable\n    {\n        ColumnFamilyStore cfs = MockSchema.newCFS(KEYSPACE);\n        File dataFolder = new Directories(cfs.metadata).getDirectoryForNewSSTables();\n        SSTableReader sstable = sstable(dataFolder, cfs, 0, 128);\n\n        LogTransaction logs = new LogTransaction(OperationType.COMPACTION);\n        assertNotNull(logs);\n\n        LogTransaction.SSTableTidier tidier = logs.obsoleted(sstable);\n\n        logs.finish();\n\n        sstable.markObsolete(tidier);\n        sstable.selfRef().release();\n\n        \r\n        \r\n        \r\n        for (int i = 0; i < 200; i++)\n            getTemporaryFiles(dataFolder);\n    }\n","date":"2016-04-02 01:45:48","endLine":1055,"groupId":"18580","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"testGetTemporaryFilesSafeAfterObsoletion","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cassandra-10-0.7/blobInfo/CC_OUT/blobs/9d/efa8d26eb59e35e5b69e51a381b2c4aaca9cd1.src","preCode":"    public void testGetTemporaryFilesSafeAfterObsoletion() throws Throwable\n    {\n        ColumnFamilyStore cfs = MockSchema.newCFS(KEYSPACE);\n        File dataFolder = new Directories(cfs.metadata).getDirectoryForNewSSTables();\n        SSTableReader sstable = sstable(dataFolder, cfs, 0, 128);\n\n        LogTransaction logs = new LogTransaction(OperationType.COMPACTION);\n        assertNotNull(logs);\n\n        LogTransaction.SSTableTidier tidier = logs.obsoleted(sstable);\n\n        logs.finish();\n\n        sstable.markObsolete(tidier);\n        sstable.selfRef().release();\n\n        \r\n        \r\n        \r\n        for (int i = 0; i < 200; i++)\n            LogAwareFileLister.getTemporaryFiles(dataFolder);\n    }\n","realPath":"test/unit/org/apache/cassandra/db/lifecycle/LogTransactionTest.java","repoName":"cassandra","snippetEndLine":0,"snippetStartLine":0,"startLine":1034,"status":"M"},{"authorDate":"2016-04-02 01:45:48","commitOrder":4,"curCode":"    public void testGetTemporaryFilesThrowsIfCompletingAfterObsoletion() throws Throwable\n    {\n        ColumnFamilyStore cfs = MockSchema.newCFS(KEYSPACE);\n        File dataFolder = new Directories(cfs.metadata).getDirectoryForNewSSTables();\n        SSTableReader sstable = sstable(dataFolder, cfs, 0, 128);\n\n        LogTransaction logs = new LogTransaction(OperationType.COMPACTION);\n        assertNotNull(logs);\n\n        LogTransaction.SSTableTidier tidier = logs.obsoleted(sstable);\n\n        sstable.markObsolete(tidier);\n        sstable.selfRef().release();\n\n        LogTransaction.waitForDeletions();\n\n        try\n        {\n            \r\n            \r\n            \r\n            getTemporaryFiles(dataFolder);\n            fail(\"Expected runtime exception\");\n        }\n        catch(RuntimeException e)\n        {\n            \r\n            assertFalse(e.getCause() instanceof AssertionError);\n        }\n\n        logs.finish();\n    }\n","date":"2016-04-02 01:45:48","endLine":1089,"groupId":"2679","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"testGetTemporaryFilesThrowsIfCompletingAfterObsoletion","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cassandra-10-0.7/blobInfo/CC_OUT/blobs/9d/efa8d26eb59e35e5b69e51a381b2c4aaca9cd1.src","preCode":"    public void testGetTemporaryFilesThrowsIfCompletingAfterObsoletion() throws Throwable\n    {\n        ColumnFamilyStore cfs = MockSchema.newCFS(KEYSPACE);\n        File dataFolder = new Directories(cfs.metadata).getDirectoryForNewSSTables();\n        SSTableReader sstable = sstable(dataFolder, cfs, 0, 128);\n\n        LogTransaction logs = new LogTransaction(OperationType.COMPACTION);\n        assertNotNull(logs);\n\n        LogTransaction.SSTableTidier tidier = logs.obsoleted(sstable);\n\n        sstable.markObsolete(tidier);\n        sstable.selfRef().release();\n\n        LogTransaction.waitForDeletions();\n\n        try\n        {\n            \r\n            \r\n            \r\n            LogAwareFileLister.getTemporaryFiles(dataFolder);\n            fail(\"Expected runtime exception\");\n        }\n        catch(RuntimeException e)\n        {\n            \r\n            assertFalse(e.getCause() instanceof AssertionError);\n        }\n\n        logs.finish();\n    }\n","realPath":"test/unit/org/apache/cassandra/db/lifecycle/LogTransactionTest.java","repoName":"cassandra","snippetEndLine":0,"snippetStartLine":0,"startLine":1058,"status":"M"}],"commitId":"fc37e618bb879717777e5df82be1104ba7bec83e","commitMessage":"@@@Merge branch 'cassandra-3.5' into trunk\n","date":"2016-04-02 01:45:48","modifiedFileCount":"4","status":"M","submitter":"Yuki Morishita"},{"authorTime":"2016-11-10 09:16:59","codes":[{"authorDate":"2016-11-10 09:16:59","commitOrder":5,"curCode":"    public void testGetTemporaryFilesSafeAfterObsoletion() throws Throwable\n    {\n        ColumnFamilyStore cfs = MockSchema.newCFS(KEYSPACE);\n        File dataFolder = new Directories(cfs.metadata()).getDirectoryForNewSSTables();\n        SSTableReader sstable = sstable(dataFolder, cfs, 0, 128);\n\n        LogTransaction logs = new LogTransaction(OperationType.COMPACTION);\n        assertNotNull(logs);\n\n        LogTransaction.SSTableTidier tidier = logs.obsoleted(sstable);\n\n        logs.finish();\n\n        sstable.markObsolete(tidier);\n        sstable.selfRef().release();\n\n        \r\n        \r\n        \r\n        for (int i = 0; i < 200; i++)\n            getTemporaryFiles(dataFolder);\n    }\n","date":"2017-01-28 06:17:46","endLine":1130,"groupId":"10631","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"testGetTemporaryFilesSafeAfterObsoletion","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cassandra-10-0.7/blobInfo/CC_OUT/blobs/20/215386b1d2359d6646c13c7c8746d6b7d7bb62.src","preCode":"    public void testGetTemporaryFilesSafeAfterObsoletion() throws Throwable\n    {\n        ColumnFamilyStore cfs = MockSchema.newCFS(KEYSPACE);\n        File dataFolder = new Directories(cfs.metadata).getDirectoryForNewSSTables();\n        SSTableReader sstable = sstable(dataFolder, cfs, 0, 128);\n\n        LogTransaction logs = new LogTransaction(OperationType.COMPACTION);\n        assertNotNull(logs);\n\n        LogTransaction.SSTableTidier tidier = logs.obsoleted(sstable);\n\n        logs.finish();\n\n        sstable.markObsolete(tidier);\n        sstable.selfRef().release();\n\n        \r\n        \r\n        \r\n        for (int i = 0; i < 200; i++)\n            getTemporaryFiles(dataFolder);\n    }\n","realPath":"test/unit/org/apache/cassandra/db/lifecycle/LogTransactionTest.java","repoName":"cassandra","snippetEndLine":0,"snippetStartLine":0,"startLine":1109,"status":"M"},{"authorDate":"2016-11-10 09:16:59","commitOrder":5,"curCode":"    public void testGetTemporaryFilesThrowsIfCompletingAfterObsoletion() throws Throwable\n    {\n        ColumnFamilyStore cfs = MockSchema.newCFS(KEYSPACE);\n        File dataFolder = new Directories(cfs.metadata()).getDirectoryForNewSSTables();\n        SSTableReader sstable = sstable(dataFolder, cfs, 0, 128);\n\n        LogTransaction logs = new LogTransaction(OperationType.COMPACTION);\n        assertNotNull(logs);\n\n        LogTransaction.SSTableTidier tidier = logs.obsoleted(sstable);\n\n        sstable.markObsolete(tidier);\n        sstable.selfRef().release();\n\n        LogTransaction.waitForDeletions();\n\n        try\n        {\n            \r\n            \r\n            \r\n            getTemporaryFiles(dataFolder);\n            fail(\"Expected runtime exception\");\n        }\n        catch(RuntimeException e)\n        {\n            \r\n            assertFalse(e.getCause() instanceof AssertionError);\n        }\n\n        logs.finish();\n    }\n","date":"2017-01-28 06:17:46","endLine":1164,"groupId":"10631","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"testGetTemporaryFilesThrowsIfCompletingAfterObsoletion","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-cassandra-10-0.7/blobInfo/CC_OUT/blobs/20/215386b1d2359d6646c13c7c8746d6b7d7bb62.src","preCode":"    public void testGetTemporaryFilesThrowsIfCompletingAfterObsoletion() throws Throwable\n    {\n        ColumnFamilyStore cfs = MockSchema.newCFS(KEYSPACE);\n        File dataFolder = new Directories(cfs.metadata).getDirectoryForNewSSTables();\n        SSTableReader sstable = sstable(dataFolder, cfs, 0, 128);\n\n        LogTransaction logs = new LogTransaction(OperationType.COMPACTION);\n        assertNotNull(logs);\n\n        LogTransaction.SSTableTidier tidier = logs.obsoleted(sstable);\n\n        sstable.markObsolete(tidier);\n        sstable.selfRef().release();\n\n        LogTransaction.waitForDeletions();\n\n        try\n        {\n            \r\n            \r\n            \r\n            getTemporaryFiles(dataFolder);\n            fail(\"Expected runtime exception\");\n        }\n        catch(RuntimeException e)\n        {\n            \r\n            assertFalse(e.getCause() instanceof AssertionError);\n        }\n\n        logs.finish();\n    }\n","realPath":"test/unit/org/apache/cassandra/db/lifecycle/LogTransactionTest.java","repoName":"cassandra","snippetEndLine":0,"snippetStartLine":0,"startLine":1133,"status":"M"}],"commitId":"af3fe39dcabd9ef77a00309ce6741268423206df","commitMessage":"@@@Make TableMetadata immutable.  optimize Schema\n\npatch by Aleksey Yeschenko; reviewed by Sylvain Lebresne for\nCASSANDRA-9425\n","date":"2017-01-28 06:17:46","modifiedFileCount":"511","status":"M","submitter":"Aleksey Yeschenko"}]
