[{"authorTime":"2017-06-24 02:22:49","codes":[{"authorDate":"2021-06-03 05:17:04","commitOrder":2,"curCode":"    public static BundlesData getBundles(int numBundles) {\n        if (numBundles <= 0) {\n            throw new RestException(Response.Status.BAD_REQUEST,\n                    \"Invalid number of bundles. Number of bundles has to be in the range of (0, 2^32].\");\n        }\n        Long maxVal = MAX_BUNDLES;\n        Long segSize = maxVal / numBundles;\n        List<String> partitions = new ArrayList<>();\n        partitions.add(String.format(\"0x%08x\", 0L));\n        Long curPartition = segSize;\n        for (int i = 0; i < numBundles; i++) {\n            if (i != numBundles - 1) {\n                partitions.add(String.format(\"0x%08x\", curPartition));\n            } else {\n                partitions.add(String.format(\"0x%08x\", maxVal - 1));\n            }\n            curPartition += segSize;\n        }\n        return new BundlesData(partitions);\n    }\n","date":"2021-06-03 05:17:04","endLine":70,"groupId":"7214","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"getBundles","params":"(intnumBundles)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-pulsar-10-0.7/blobInfo/CC_OUT/blobs/de/f6a17388d548aa04b1c1035b021c7f020f63eb.src","preCode":"    public static BundlesData getBundles(int numBundles) {\n        if (numBundles <= 0) {\n            throw new RestException(Response.Status.BAD_REQUEST,\n                    \"Invalid number of bundles. Number of bundles has to be in the range of (0, 2^32].\");\n        }\n        Long maxVal = MAX_BUNDLES;\n        Long segSize = maxVal / numBundles;\n        List<String> partitions = new ArrayList<>();\n        partitions.add(String.format(\"0x%08x\", 0L));\n        Long curPartition = segSize;\n        for (int i = 0; i < numBundles; i++) {\n            if (i != numBundles - 1) {\n                partitions.add(String.format(\"0x%08x\", curPartition));\n            } else {\n                partitions.add(String.format(\"0x%08x\", maxVal - 1));\n            }\n            curPartition += segSize;\n        }\n        return new BundlesData(partitions);\n    }\n","realPath":"pulsar-common/src/main/java/org/apache/pulsar/common/policies/data/PoliciesUtil.java","repoName":"pulsar","snippetEndLine":0,"snippetStartLine":0,"startLine":51,"status":"B"},{"authorDate":"2017-06-24 02:22:49","commitOrder":2,"curCode":"    private BundlesData getBundles(int numBundles) {\n        Long maxVal = ((long) 1) << 32;\n        Long segSize = maxVal / numBundles;\n        List<String> partitions = Lists.newArrayList();\n        partitions.add(String.format(\"0x%08x\", 0l));\n        Long curPartition = segSize;\n        for (int i = 0; i < numBundles; i++) {\n            if (i != numBundles - 1) {\n                partitions.add(String.format(\"0x%08x\", curPartition));\n            } else {\n                partitions.add(String.format(\"0x%08x\", maxVal - 1));\n            }\n            curPartition += segSize;\n        }\n        return new BundlesData(partitions);\n    }\n","date":"2017-06-24 04:41:32","endLine":599,"groupId":"7214","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"getBundles","params":"(intnumBundles)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-pulsar-10-0.7/blobInfo/CC_OUT/blobs/b1/3f955cae98847d3f95f90a82f5f2a507f3b087.src","preCode":"    private BundlesData getBundles(int numBundles) {\n        Long maxVal = ((long) 1) << 32;\n        Long segSize = maxVal / numBundles;\n        List<String> partitions = Lists.newArrayList();\n        partitions.add(String.format(\"0x%08x\", 0l));\n        Long curPartition = segSize;\n        for (int i = 0; i < numBundles; i++) {\n            if (i != numBundles - 1) {\n                partitions.add(String.format(\"0x%08x\", curPartition));\n            } else {\n                partitions.add(String.format(\"0x%08x\", maxVal - 1));\n            }\n            curPartition += segSize;\n        }\n        return new BundlesData(partitions);\n    }\n","realPath":"pulsar-broker/src/test/java/org/apache/pulsar/broker/loadbalance/LoadBalancerTest.java","repoName":"pulsar","snippetEndLine":0,"snippetStartLine":0,"startLine":584,"status":"NB"}],"commitId":"301a76435ce918520f1b70b95b7ebed9bf1b08b5","commitMessage":"@@@Remove pulsar-client-admin-api dependency : pulsar-common (#10774)\n\n* remove gson from admin api Topics.java\n\n* Bookies.java\n\n* Brokers.java\n\n* BrokerStats.java\n\n* fix PulsarAdminException\n\n* Clusters.java\n\n* Tenants.java\n\n* minor fix on ResourceGroups\n\n* Namespaces.java & OffloadPolicies\n\n* temp remove JsonProperty in OffloadPolicies\n\n* Topics & NonPersistentTopics\n\n* ResourceQuotas with MixIn class\n\n* Functions\n\n* Sources.java\n\n* Sinks.java\n\n* Schemas.java\n\n* resolve checkstyle\n\n* minor fix\n\n* Transactions.java\n\n* fix stylecheck\n\n* set ObjectMapper module\n\n* fix ci\n\n* fix PulsarAdminException\n\n* remove gson\n\n* remove swagger\n\n* merge master\n\n* remove swagger\n\n* remove io.swagger\n\n* remove commons-lang3\n\n* use Objects.requireNonNull\n\n* remove commons-lang3\n\n* fix interface mapping\n\n* fix ci\n\n* extract OffloadPoliciesInterface\n\n* extract FunctionStats interfaces\n\n* fix unit test\n\n* fix shaded class\n\n* add object mapper mixin tests\n\n* fix ci\n\n* fix admin exception ci error\n\n* UpdateOptions\n\n* AutoFailoverPolicyData\n\n* BrokerNamespaceIsolationData\n\n* ClusterData\n\n* FailureDomain\n\n* FunctionInstanceStats\n\n* NamespaceIsolationData\n\n* OffloadPolicies\n\n* TenantInfo\n\n* FunctionStats\n\n* fix stylecheck\n\n* Fixed interface\n\n* Fixed ClusterData equals method\n\n* Fixed merge issue\n\n* Fixed another merge issue\n\n* Fixed test issue after merge\n\nCo-authored-by: Rui Fu <freelz@gmail.com>","date":"2021-06-03 05:17:04","modifiedFileCount":"266","status":"M","submitter":"Matteo Merli"},{"authorTime":"2021-06-06 12:37:53","codes":[{"authorDate":"2021-06-06 12:37:53","commitOrder":3,"curCode":"    public static BundlesData getBundles(int numBundles) {\n        if (numBundles <= 0) {\n            throw new RestException(Response.Status.BAD_REQUEST,\n                    \"Invalid number of bundles. Number of bundles has to be in the range of (0, 2^32].\");\n        }\n        Long maxVal = MAX_BUNDLES;\n        Long segSize = maxVal / numBundles;\n        List<String> partitions = new ArrayList<>();\n        partitions.add(String.format(\"0x%08x\", 0L));\n        Long curPartition = segSize;\n        for (int i = 0; i < numBundles; i++) {\n            if (i != numBundles - 1) {\n                partitions.add(String.format(\"0x%08x\", curPartition));\n            } else {\n                partitions.add(String.format(\"0x%08x\", maxVal - 1));\n            }\n            curPartition += segSize;\n        }\n        return BundlesData.builder()\n                .boundaries(partitions)\n                .numBundles(numBundles)\n                .build();\n    }\n","date":"2021-06-06 12:37:53","endLine":74,"groupId":"10200","id":3,"instanceNumber":1,"isCurCommit":1,"methodName":"getBundles","params":"(intnumBundles)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-pulsar-10-0.7/blobInfo/CC_OUT/blobs/c1/d61f41af5fcec9cc5ebdf18809e3dea571024b.src","preCode":"    public static BundlesData getBundles(int numBundles) {\n        if (numBundles <= 0) {\n            throw new RestException(Response.Status.BAD_REQUEST,\n                    \"Invalid number of bundles. Number of bundles has to be in the range of (0, 2^32].\");\n        }\n        Long maxVal = MAX_BUNDLES;\n        Long segSize = maxVal / numBundles;\n        List<String> partitions = new ArrayList<>();\n        partitions.add(String.format(\"0x%08x\", 0L));\n        Long curPartition = segSize;\n        for (int i = 0; i < numBundles; i++) {\n            if (i != numBundles - 1) {\n                partitions.add(String.format(\"0x%08x\", curPartition));\n            } else {\n                partitions.add(String.format(\"0x%08x\", maxVal - 1));\n            }\n            curPartition += segSize;\n        }\n        return new BundlesData(partitions);\n    }\n","realPath":"pulsar-common/src/main/java/org/apache/pulsar/common/policies/data/PoliciesUtil.java","repoName":"pulsar","snippetEndLine":0,"snippetStartLine":0,"startLine":52,"status":"M"},{"authorDate":"2021-06-06 12:37:53","commitOrder":3,"curCode":"    private BundlesData getBundles(int numBundles) {\n        Long maxVal = ((long) 1) << 32;\n        Long segSize = maxVal / numBundles;\n        List<String> partitions = Lists.newArrayList();\n        partitions.add(String.format(\"0x%08x\", 0l));\n        Long curPartition = segSize;\n        for (int i = 0; i < numBundles; i++) {\n            if (i != numBundles - 1) {\n                partitions.add(String.format(\"0x%08x\", curPartition));\n            } else {\n                partitions.add(String.format(\"0x%08x\", maxVal - 1));\n            }\n            curPartition += segSize;\n        }\n        return BundlesData.builder()\n                .boundaries(partitions)\n                .numBundles(partitions.size() - 1)\n                .build();\n    }\n","date":"2021-06-06 12:37:53","endLine":571,"groupId":"10200","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"getBundles","params":"(intnumBundles)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-pulsar-10-0.7/blobInfo/CC_OUT/blobs/17/5a1eb90fac4914ad6befb63a92efa8cf8812b2.src","preCode":"    private BundlesData getBundles(int numBundles) {\n        Long maxVal = ((long) 1) << 32;\n        Long segSize = maxVal / numBundles;\n        List<String> partitions = Lists.newArrayList();\n        partitions.add(String.format(\"0x%08x\", 0l));\n        Long curPartition = segSize;\n        for (int i = 0; i < numBundles; i++) {\n            if (i != numBundles - 1) {\n                partitions.add(String.format(\"0x%08x\", curPartition));\n            } else {\n                partitions.add(String.format(\"0x%08x\", maxVal - 1));\n            }\n            curPartition += segSize;\n        }\n        return new BundlesData(partitions);\n    }\n","realPath":"pulsar-broker/src/test/java/org/apache/pulsar/broker/loadbalance/LoadBalancerTest.java","repoName":"pulsar","snippetEndLine":0,"snippetStartLine":0,"startLine":553,"status":"M"}],"commitId":"da71ec2b2a6682ffbab60843756f638bedbd4460","commitMessage":"@@@Make client-admin-api to use interfaces with builders instead of POJOs (#10818)\n\n\n Motivation\n\nInstead of using POJOs types in the Java client-admin API.  use interfaces \n\n\n Modifications\n * Converted more POJOs into interfaces\n * Added builders to construct instances of the interfaces without directly using the implementation classes\n\nNote: for easier reviewing.  there are 2 commits in this PR: \n * https://github.com/apache/pulsar/commit/f14ce733f69633143bd3bf4b4f3ae99a2ea93551 includes the changes to production code\n * https://github.com/apache/pulsar/commit/23b6f74c608cefc5da14ce1d2b29f34efde6870f changes to the unit tests\n","date":"2021-06-06 12:37:53","modifiedFileCount":"275","status":"M","submitter":"Matteo Merli"}]
