[{"authorTime":"2019-03-29 12:39:54","codes":[{"authorDate":"2019-02-13 07:07:07","commitOrder":7,"curCode":"    public boolean run(String[] args) {\n        try {\n            jcommander.parse(args);\n        } catch (Exception e) {\n            System.err.println(e.getMessage());\n            System.err.println();\n            String chosenCommand = jcommander.getParsedCommand();\n            jcommander.usage(chosenCommand);\n            return false;\n        }\n\n        String cmd = jcommander.getParsedCommand();\n        if (cmd == null) {\n            jcommander.usage();\n            return false;\n        } else {\n            JCommander obj = jcommander.getCommands().get(cmd);\n            CliCommand cmdObj = (CliCommand) obj.getObjects().get(0);\n\n            try {\n                cmdObj.run();\n                return true;\n            } catch (ParameterException e) {\n                System.err.println(e.getMessage());\n                System.err.println();\n                return false;\n            } catch (ConnectException e) {\n                System.err.println(e.getMessage());\n                System.err.println();\n                System.err.println(\"Error connecting to: \" + admin.getServiceUrl());\n                return false;\n            } catch (PulsarAdminException e) {\n                System.err.println(e.getHttpError());\n                System.err.println();\n                System.err.println(\"Reason: \" + e.getMessage());\n                return false;\n            } catch (Exception e) {\n                e.printStackTrace();\n                return false;\n            }\n        }\n    }\n","date":"2019-02-13 07:07:07","endLine":83,"groupId":"6185","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"run","params":"(String[]args)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-pulsar-10-0.7/blobInfo/CC_OUT/blobs/a6/6436b293b59616b26acffa0f707ee892fee73e.src","preCode":"    public boolean run(String[] args) {\n        try {\n            jcommander.parse(args);\n        } catch (Exception e) {\n            System.err.println(e.getMessage());\n            System.err.println();\n            String chosenCommand = jcommander.getParsedCommand();\n            jcommander.usage(chosenCommand);\n            return false;\n        }\n\n        String cmd = jcommander.getParsedCommand();\n        if (cmd == null) {\n            jcommander.usage();\n            return false;\n        } else {\n            JCommander obj = jcommander.getCommands().get(cmd);\n            CliCommand cmdObj = (CliCommand) obj.getObjects().get(0);\n\n            try {\n                cmdObj.run();\n                return true;\n            } catch (ParameterException e) {\n                System.err.println(e.getMessage());\n                System.err.println();\n                return false;\n            } catch (ConnectException e) {\n                System.err.println(e.getMessage());\n                System.err.println();\n                System.err.println(\"Error connecting to: \" + admin.getServiceUrl());\n                return false;\n            } catch (PulsarAdminException e) {\n                System.err.println(e.getHttpError());\n                System.err.println();\n                System.err.println(\"Reason: \" + e.getMessage());\n                return false;\n            } catch (Exception e) {\n                e.printStackTrace();\n                return false;\n            }\n        }\n    }\n","realPath":"pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdBase.java","repoName":"pulsar","snippetEndLine":0,"snippetStartLine":0,"startLine":42,"status":"NB"},{"authorDate":"2019-03-29 12:39:54","commitOrder":7,"curCode":"        void run() throws Exception {\n            try {\n                processArguments();\n            } catch (Exception e) {\n                System.err.println(e.getMessage());\n                System.err.println();\n                String chosenCommand = jcommander.getParsedCommand();\n                jcommander.usage(chosenCommand);\n                return;\n            }\n            runCmd();\n        }\n","date":"2019-03-29 12:39:54","endLine":115,"groupId":"6185","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"run","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-pulsar-10-0.7/blobInfo/CC_OUT/blobs/c9/ebefba6dd49dc20a986693b81ca9ee9e367b73.src","preCode":"        void run() throws Exception {\n            try {\n                processArguments();\n            } catch (Exception e) {\n                System.err.println(e.getMessage());\n                System.err.println();\n                String chosenCommand = jcommander.getParsedCommand();\n                jcommander.usage(chosenCommand);\n                return;\n            }\n            runCmd();\n        }\n","realPath":"pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdSinks.java","repoName":"pulsar","snippetEndLine":0,"snippetStartLine":0,"startLine":104,"status":"B"}],"commitId":"07030e3af46f0f22805a1f51869501bee37bbe1b","commitMessage":"@@@[Issue 3867] Provide the description of sink/source command for better usage (#3868)\n\n\n Motivation\n\nFixes #3867\n\n\n Modifications\n\nAdd the usage of chosen subcommand when `processArguments` failed.\n","date":"2019-03-29 12:39:54","modifiedFileCount":"2","status":"M","submitter":"Fangbin Sun"},{"authorTime":"2019-03-29 12:39:54","codes":[{"authorDate":"2019-11-19 13:10:20","commitOrder":8,"curCode":"    public boolean run(String[] args) {\n        try {\n            jcommander.parse(args);\n        } catch (Exception e) {\n            System.err.println(e.getMessage());\n            System.err.println();\n            tryShowCommandUsage();\n            return false;\n        }\n\n        String cmd = jcommander.getParsedCommand();\n        if (cmd == null) {\n            jcommander.usage();\n            return false;\n        } else {\n            JCommander obj = jcommander.getCommands().get(cmd);\n            CliCommand cmdObj = (CliCommand) obj.getObjects().get(0);\n\n            try {\n                cmdObj.run();\n                return true;\n            } catch (ParameterException e) {\n                System.err.println(e.getMessage());\n                System.err.println();\n                return false;\n            } catch (ConnectException e) {\n                System.err.println(e.getMessage());\n                System.err.println();\n                System.err.println(\"Error connecting to: \" + admin.getServiceUrl());\n                return false;\n            } catch (PulsarAdminException e) {\n                System.err.println(e.getHttpError());\n                System.err.println();\n                System.err.println(\"Reason: \" + e.getMessage());\n                return false;\n            } catch (Exception e) {\n                e.printStackTrace();\n                return false;\n            }\n        }\n    }\n","date":"2019-11-19 13:10:20","endLine":92,"groupId":"6185","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"run","params":"(String[]args)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-pulsar-10-0.7/blobInfo/CC_OUT/blobs/cb/88bf8fde03086ccc1fbb68271f69c35939210b.src","preCode":"    public boolean run(String[] args) {\n        try {\n            jcommander.parse(args);\n        } catch (Exception e) {\n            System.err.println(e.getMessage());\n            System.err.println();\n            String chosenCommand = jcommander.getParsedCommand();\n            jcommander.usage(chosenCommand);\n            return false;\n        }\n\n        String cmd = jcommander.getParsedCommand();\n        if (cmd == null) {\n            jcommander.usage();\n            return false;\n        } else {\n            JCommander obj = jcommander.getCommands().get(cmd);\n            CliCommand cmdObj = (CliCommand) obj.getObjects().get(0);\n\n            try {\n                cmdObj.run();\n                return true;\n            } catch (ParameterException e) {\n                System.err.println(e.getMessage());\n                System.err.println();\n                return false;\n            } catch (ConnectException e) {\n                System.err.println(e.getMessage());\n                System.err.println();\n                System.err.println(\"Error connecting to: \" + admin.getServiceUrl());\n                return false;\n            } catch (PulsarAdminException e) {\n                System.err.println(e.getHttpError());\n                System.err.println();\n                System.err.println(\"Reason: \" + e.getMessage());\n                return false;\n            } catch (Exception e) {\n                e.printStackTrace();\n                return false;\n            }\n        }\n    }\n","realPath":"pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdBase.java","repoName":"pulsar","snippetEndLine":0,"snippetStartLine":0,"startLine":52,"status":"M"},{"authorDate":"2019-03-29 12:39:54","commitOrder":8,"curCode":"        void run() throws Exception {\n            try {\n                processArguments();\n            } catch (Exception e) {\n                System.err.println(e.getMessage());\n                System.err.println();\n                String chosenCommand = jcommander.getParsedCommand();\n                jcommander.usage(chosenCommand);\n                return;\n            }\n            runCmd();\n        }\n","date":"2019-03-29 12:39:54","endLine":115,"groupId":"6185","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"run","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-pulsar-10-0.7/blobInfo/CC_OUT/blobs/c9/ebefba6dd49dc20a986693b81ca9ee9e367b73.src","preCode":"        void run() throws Exception {\n            try {\n                processArguments();\n            } catch (Exception e) {\n                System.err.println(e.getMessage());\n                System.err.println();\n                String chosenCommand = jcommander.getParsedCommand();\n                jcommander.usage(chosenCommand);\n                return;\n            }\n            runCmd();\n        }\n","realPath":"pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdSinks.java","repoName":"pulsar","snippetEndLine":0,"snippetStartLine":0,"startLine":104,"status":"N"}],"commitId":"d16e79a1d42f1ad92c144f80ce429c3479d280a7","commitMessage":"@@@ Fix hangs when type invalid args at command-line (#5615)\n\nFixes #5533 \n\n*Motivation*\n\nWhen we using command-line tools.  it hangs after type an invalid args.\n\n*Modifications*\n\nWe don't need to parse the command.  just show the command usage.","date":"2019-11-19 13:10:20","modifiedFileCount":"1","status":"M","submitter":"Yong Zhang"},{"authorTime":"2020-10-08 04:23:51","codes":[{"authorDate":"2019-11-19 13:10:20","commitOrder":9,"curCode":"    public boolean run(String[] args) {\n        try {\n            jcommander.parse(args);\n        } catch (Exception e) {\n            System.err.println(e.getMessage());\n            System.err.println();\n            tryShowCommandUsage();\n            return false;\n        }\n\n        String cmd = jcommander.getParsedCommand();\n        if (cmd == null) {\n            jcommander.usage();\n            return false;\n        } else {\n            JCommander obj = jcommander.getCommands().get(cmd);\n            CliCommand cmdObj = (CliCommand) obj.getObjects().get(0);\n\n            try {\n                cmdObj.run();\n                return true;\n            } catch (ParameterException e) {\n                System.err.println(e.getMessage());\n                System.err.println();\n                return false;\n            } catch (ConnectException e) {\n                System.err.println(e.getMessage());\n                System.err.println();\n                System.err.println(\"Error connecting to: \" + admin.getServiceUrl());\n                return false;\n            } catch (PulsarAdminException e) {\n                System.err.println(e.getHttpError());\n                System.err.println();\n                System.err.println(\"Reason: \" + e.getMessage());\n                return false;\n            } catch (Exception e) {\n                e.printStackTrace();\n                return false;\n            }\n        }\n    }\n","date":"2019-11-19 13:10:20","endLine":92,"groupId":"6185","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"run","params":"(String[]args)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-pulsar-10-0.7/blobInfo/CC_OUT/blobs/cb/88bf8fde03086ccc1fbb68271f69c35939210b.src","preCode":"    public boolean run(String[] args) {\n        try {\n            jcommander.parse(args);\n        } catch (Exception e) {\n            System.err.println(e.getMessage());\n            System.err.println();\n            tryShowCommandUsage();\n            return false;\n        }\n\n        String cmd = jcommander.getParsedCommand();\n        if (cmd == null) {\n            jcommander.usage();\n            return false;\n        } else {\n            JCommander obj = jcommander.getCommands().get(cmd);\n            CliCommand cmdObj = (CliCommand) obj.getObjects().get(0);\n\n            try {\n                cmdObj.run();\n                return true;\n            } catch (ParameterException e) {\n                System.err.println(e.getMessage());\n                System.err.println();\n                return false;\n            } catch (ConnectException e) {\n                System.err.println(e.getMessage());\n                System.err.println();\n                System.err.println(\"Error connecting to: \" + admin.getServiceUrl());\n                return false;\n            } catch (PulsarAdminException e) {\n                System.err.println(e.getHttpError());\n                System.err.println();\n                System.err.println(\"Reason: \" + e.getMessage());\n                return false;\n            } catch (Exception e) {\n                e.printStackTrace();\n                return false;\n            }\n        }\n    }\n","realPath":"pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdBase.java","repoName":"pulsar","snippetEndLine":0,"snippetStartLine":0,"startLine":52,"status":"N"},{"authorDate":"2020-10-08 04:23:51","commitOrder":9,"curCode":"        void run() throws Exception {\n            try {\n                processArguments();\n            } catch (Exception e) {\n                System.err.println(e.getMessage());\n                System.err.println();\n                String chosenCommand = jcommander.getParsedCommand();\n                usageFormatter.usage(chosenCommand);\n                return;\n            }\n            runCmd();\n        }\n","date":"2020-10-08 04:23:51","endLine":119,"groupId":"6185","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"run","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-pulsar-10-0.7/blobInfo/CC_OUT/blobs/63/5ff9aa76b188665e98f115774ac276f9cdcd6b.src","preCode":"        void run() throws Exception {\n            try {\n                processArguments();\n            } catch (Exception e) {\n                System.err.println(e.getMessage());\n                System.err.println();\n                String chosenCommand = jcommander.getParsedCommand();\n                jcommander.usage(chosenCommand);\n                return;\n            }\n            runCmd();\n        }\n","realPath":"pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdSinks.java","repoName":"pulsar","snippetEndLine":0,"snippetStartLine":0,"startLine":108,"status":"M"}],"commitId":"f474ff0d31f54731f4c6085d5fa541ca6f0f3156","commitMessage":"@@@Upgrade Jcommander to 1.78 (#8206)\n\n* Upgrade Jcommander to 1.80\n\n* Fix build\n\n* 1.78 is the stable version\n\n* Fix test\n\nCo-authored-by: Sanjeev Kulkarni <sanjeevk@splunk.com>","date":"2020-10-08 04:23:51","modifiedFileCount":"8","status":"M","submitter":"Sanjeev Kulkarni"},{"authorTime":"2021-01-29 03:06:36","codes":[{"authorDate":"2021-01-29 03:06:36","commitOrder":10,"curCode":"    public boolean run(String[] args) {\n        try {\n            jcommander.parse(args);\n        } catch (Exception e) {\n            System.err.println(e.getMessage());\n            System.err.println();\n            tryShowCommandUsage();\n            return false;\n        }\n\n        String cmd = jcommander.getParsedCommand();\n        if (cmd == null) {\n            jcommander.usage();\n            return false;\n        } else {\n            JCommander obj = jcommander.getCommands().get(cmd);\n            CliCommand cmdObj = (CliCommand) obj.getObjects().get(0);\n\n            try {\n                cmdObj.run();\n                return true;\n            } catch (ParameterException e) {\n                System.err.println(e.getMessage());\n                System.err.println();\n                return false;\n            } catch (ConnectException e) {\n                System.err.println(e.getMessage());\n                System.err.println();\n                System.err.println(\"Error connecting to: \" + getAdmin().getServiceUrl());\n                return false;\n            } catch (PulsarAdminException e) {\n                System.err.println(e.getHttpError());\n                System.err.println();\n                System.err.println(\"Reason: \" + e.getMessage());\n                return false;\n            } catch (Exception e) {\n                e.printStackTrace();\n                return false;\n            }\n        }\n    }\n","date":"2021-01-29 03:06:36","endLine":107,"groupId":"10384","id":7,"instanceNumber":1,"isCurCommit":1,"methodName":"run","params":"(String[]args)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-pulsar-10-0.7/blobInfo/CC_OUT/blobs/57/f5fdb71b7e8a6487d7daa74aa16683f21e60c5.src","preCode":"    public boolean run(String[] args) {\n        try {\n            jcommander.parse(args);\n        } catch (Exception e) {\n            System.err.println(e.getMessage());\n            System.err.println();\n            tryShowCommandUsage();\n            return false;\n        }\n\n        String cmd = jcommander.getParsedCommand();\n        if (cmd == null) {\n            jcommander.usage();\n            return false;\n        } else {\n            JCommander obj = jcommander.getCommands().get(cmd);\n            CliCommand cmdObj = (CliCommand) obj.getObjects().get(0);\n\n            try {\n                cmdObj.run();\n                return true;\n            } catch (ParameterException e) {\n                System.err.println(e.getMessage());\n                System.err.println();\n                return false;\n            } catch (ConnectException e) {\n                System.err.println(e.getMessage());\n                System.err.println();\n                System.err.println(\"Error connecting to: \" + admin.getServiceUrl());\n                return false;\n            } catch (PulsarAdminException e) {\n                System.err.println(e.getHttpError());\n                System.err.println();\n                System.err.println(\"Reason: \" + e.getMessage());\n                return false;\n            } catch (Exception e) {\n                e.printStackTrace();\n                return false;\n            }\n        }\n    }\n","realPath":"pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdBase.java","repoName":"pulsar","snippetEndLine":0,"snippetStartLine":0,"startLine":67,"status":"M"},{"authorDate":"2021-01-29 03:06:36","commitOrder":10,"curCode":"        void run() throws Exception {\n            try {\n                processArguments();\n            } catch (Exception e) {\n                System.err.println(e.getMessage());\n                System.err.println();\n                String chosenCommand = jcommander.getParsedCommand();\n                getUsageFormatter().usage(chosenCommand);\n                return;\n            }\n            runCmd();\n        }\n","date":"2021-01-29 03:06:36","endLine":120,"groupId":"10384","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"run","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-pulsar-10-0.7/blobInfo/CC_OUT/blobs/bb/4d4b206896e7e4617c47b4b92f23725c740cac.src","preCode":"        void run() throws Exception {\n            try {\n                processArguments();\n            } catch (Exception e) {\n                System.err.println(e.getMessage());\n                System.err.println();\n                String chosenCommand = jcommander.getParsedCommand();\n                usageFormatter.usage(chosenCommand);\n                return;\n            }\n            runCmd();\n        }\n","realPath":"pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdSinks.java","repoName":"pulsar","snippetEndLine":0,"snippetStartLine":0,"startLine":109,"status":"M"}],"commitId":"232b32439687995dd3102d8c281cf50b7b91e0bf","commitMessage":"@@@Lazily init PulsarAdmin in PulsarAdminTool (#9312)\n\n\n Motivation\npulsar-admin (PulsarAdminTool) initialises eagerly the PulsarAdmin object and some of the the underlying REST API intefaces.\nThis initialisation process triggers lot of resource loading (like SSL/RESTAPI classes....) that slows down the JVM even for stuff that is not needed.\nAlso there are shutdown hooks that are useless by they are executed while existing from the command.\n\nRemoving initialisation of useless stuff helps in having a better bootstrap time.  especially in case that you are not performing API calls.  like when you are learning the tool and you make lots of syntax errors. \n\n\n Modifications\n- Initialise as lazily as possible PulsarAdmin \n- Make PulsarAdminTool#main \"testable\" by allowing it to not call System.exit\n- Use halt instead of exit in order to not trigger shutdown hooks\n\n\n Verifying this change\nThis change is a trivial rework / code cleanup.  but I have added tests for parts that have been touched and had not unit tests.\n","date":"2021-01-29 03:06:36","modifiedFileCount":"27","status":"M","submitter":"Enrico Olivelli"}]
