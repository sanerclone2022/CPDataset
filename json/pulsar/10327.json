[{"authorTime":"2019-09-09 03:04:39","codes":[{"authorDate":"2018-11-22 20:05:24","commitOrder":4,"curCode":"    public void testStateGetter() throws Exception {\n        String tenant = TEST_NAME + \"-tenant\";\n        String namespace = TEST_NAME + \"-namespace\";\n        String fnName = TEST_NAME + \"-function\";\n        String key = TEST_NAME + \"-key\";\n\n        cmd.run(new String[] {\n            \"querystate\",\n            \"--tenant\", tenant,\n            \"--namespace\", namespace,\n            \"--name\", fnName,\n            \"--key\", key\n        });\n\n        StateGetter stateGetter = cmd.getStateGetter();\n\n        assertEquals(tenant, stateGetter.getTenant());\n        assertEquals(namespace, stateGetter.getNamespace());\n        assertEquals(fnName, stateGetter.getFunctionName());\n\n        verify(functions, times(1)).getFunctionState(eq(tenant), eq(namespace), eq(fnName), eq(key));\n    }\n","date":"2018-11-22 20:05:24","endLine":521,"groupId":"1298","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testStateGetter","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-pulsar-10-0.7/blobInfo/CC_OUT/blobs/95/0ee941692920f0a8fbb27b93650b34d4caf69b.src","preCode":"    public void testStateGetter() throws Exception {\n        String tenant = TEST_NAME + \"-tenant\";\n        String namespace = TEST_NAME + \"-namespace\";\n        String fnName = TEST_NAME + \"-function\";\n        String key = TEST_NAME + \"-key\";\n\n        cmd.run(new String[] {\n            \"querystate\",\n            \"--tenant\", tenant,\n            \"--namespace\", namespace,\n            \"--name\", fnName,\n            \"--key\", key\n        });\n\n        StateGetter stateGetter = cmd.getStateGetter();\n\n        assertEquals(tenant, stateGetter.getTenant());\n        assertEquals(namespace, stateGetter.getNamespace());\n        assertEquals(fnName, stateGetter.getFunctionName());\n\n        verify(functions, times(1)).getFunctionState(eq(tenant), eq(namespace), eq(fnName), eq(key));\n    }\n","realPath":"pulsar-client-tools-test/src/test/java/org/apache/pulsar/admin/cli/CmdFunctionsTest.java","repoName":"pulsar","snippetEndLine":0,"snippetStartLine":0,"startLine":500,"status":"NB"},{"authorDate":"2019-09-09 03:04:39","commitOrder":4,"curCode":"    public void testStateGetterWithoutKey() throws Exception {\n        String tenant = TEST_NAME + \"-tenant\";\n        String namespace = TEST_NAME + \"-namespace\";\n        String fnName = TEST_NAME + \"-function\";\n        ConsoleOutputCapturer consoleOutputCapturer = new ConsoleOutputCapturer();\n        consoleOutputCapturer.start();\n        cmd.run(new String[] {\n                \"querystate\",\n                \"--tenant\", tenant,\n                \"--namespace\", namespace,\n                \"--name\", fnName,\n        });\n        consoleOutputCapturer.stop();\n        String output = consoleOutputCapturer.getStderr();\n        assertTrue(output.replace(\"\\n\", \"\").contains(\"State key needs to be specified\"));\n        StateGetter stateGetter = cmd.getStateGetter();\n        assertEquals(tenant, stateGetter.getTenant());\n        assertEquals(namespace, stateGetter.getNamespace());\n        assertEquals(fnName, stateGetter.getFunctionName());\n        verify(functions, times(0)).getFunctionState(any(), any(), any(), any());\n    }\n","date":"2019-09-09 03:04:39","endLine":574,"groupId":"3345","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testStateGetterWithoutKey","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-pulsar-10-0.7/blobInfo/CC_OUT/blobs/2c/a69acf1ac3fef76533a1f2b461f23c034f1573.src","preCode":"    public void testStateGetterWithoutKey() throws Exception {\n        String tenant = TEST_NAME + \"-tenant\";\n        String namespace = TEST_NAME + \"-namespace\";\n        String fnName = TEST_NAME + \"-function\";\n        ConsoleOutputCapturer consoleOutputCapturer = new ConsoleOutputCapturer();\n        consoleOutputCapturer.start();\n        cmd.run(new String[] {\n                \"querystate\",\n                \"--tenant\", tenant,\n                \"--namespace\", namespace,\n                \"--name\", fnName,\n        });\n        consoleOutputCapturer.stop();\n        String output = consoleOutputCapturer.getStderr();\n        assertTrue(output.replace(\"\\n\", \"\").contains(\"State key needs to be specified\"));\n        StateGetter stateGetter = cmd.getStateGetter();\n        assertEquals(tenant, stateGetter.getTenant());\n        assertEquals(namespace, stateGetter.getNamespace());\n        assertEquals(fnName, stateGetter.getFunctionName());\n        verify(functions, times(0)).getFunctionState(any(), any(), any(), any());\n    }\n","realPath":"pulsar-client-tools-test/src/test/java/org/apache/pulsar/admin/cli/CmdFunctionsTest.java","repoName":"pulsar","snippetEndLine":0,"snippetStartLine":0,"startLine":554,"status":"B"}],"commitId":"c50abe8fbf1a519f52ce4d21bce917678d30ff1c","commitMessage":"@@@Throw an error if the key was not specified for querying state (#5145)\n\n","date":"2019-09-09 03:04:39","modifiedFileCount":"2","status":"M","submitter":"Like"},{"authorTime":"2020-03-07 04:50:55","codes":[{"authorDate":"2020-03-07 04:50:55","commitOrder":5,"curCode":"    public void testStateGetter() throws Exception {\n        String key = TEST_NAME + \"-key\";\n\n        cmd.run(new String[] {\n            \"querystate\",\n            \"--tenant\", TENANT,\n            \"--namespace\", NAMESPACE,\n            \"--name\", FN_NAME,\n            \"--key\", key\n        });\n\n        StateGetter stateGetter = cmd.getStateGetter();\n\n        assertEquals(TENANT, stateGetter.getTenant());\n        assertEquals(NAMESPACE, stateGetter.getNamespace());\n        assertEquals(FN_NAME, stateGetter.getFunctionName());\n\n        verify(functions, times(1)).getFunctionState(eq(TENANT), eq(NAMESPACE), eq(FN_NAME), eq(key));\n    }\n","date":"2020-03-07 04:50:55","endLine":516,"groupId":"10327","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testStateGetter","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-pulsar-10-0.7/blobInfo/CC_OUT/blobs/c1/62c4b3f345a7ea314132b5719b0d52c74cbc1a.src","preCode":"    public void testStateGetter() throws Exception {\n        String tenant = TEST_NAME + \"-tenant\";\n        String namespace = TEST_NAME + \"-namespace\";\n        String fnName = TEST_NAME + \"-function\";\n        String key = TEST_NAME + \"-key\";\n\n        cmd.run(new String[] {\n            \"querystate\",\n            \"--tenant\", tenant,\n            \"--namespace\", namespace,\n            \"--name\", fnName,\n            \"--key\", key\n        });\n\n        StateGetter stateGetter = cmd.getStateGetter();\n\n        assertEquals(tenant, stateGetter.getTenant());\n        assertEquals(namespace, stateGetter.getNamespace());\n        assertEquals(fnName, stateGetter.getFunctionName());\n\n        verify(functions, times(1)).getFunctionState(eq(tenant), eq(namespace), eq(fnName), eq(key));\n    }\n","realPath":"pulsar-client-tools-test/src/test/java/org/apache/pulsar/admin/cli/CmdFunctionsTest.java","repoName":"pulsar","snippetEndLine":0,"snippetStartLine":0,"startLine":498,"status":"M"},{"authorDate":"2020-03-07 04:50:55","commitOrder":5,"curCode":"    public void testStateGetterWithoutKey() throws Exception {\n        ConsoleOutputCapturer consoleOutputCapturer = new ConsoleOutputCapturer();\n        consoleOutputCapturer.start();\n        cmd.run(new String[] {\n                \"querystate\",\n                \"--tenant\", TENANT,\n                \"--namespace\", NAMESPACE,\n                \"--name\", FN_NAME,\n        });\n        consoleOutputCapturer.stop();\n        String output = consoleOutputCapturer.getStderr();\n        assertTrue(output.replace(\"\\n\", \"\").contains(\"State key needs to be specified\"));\n        StateGetter stateGetter = cmd.getStateGetter();\n        assertEquals(TENANT, stateGetter.getTenant());\n        assertEquals(NAMESPACE, stateGetter.getNamespace());\n        assertEquals(FN_NAME, stateGetter.getFunctionName());\n        verify(functions, times(0)).getFunctionState(any(), any(), any(), any());\n    }\n","date":"2020-03-07 04:50:55","endLine":536,"groupId":"10327","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testStateGetterWithoutKey","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-pulsar-10-0.7/blobInfo/CC_OUT/blobs/c1/62c4b3f345a7ea314132b5719b0d52c74cbc1a.src","preCode":"    public void testStateGetterWithoutKey() throws Exception {\n        String tenant = TEST_NAME + \"-tenant\";\n        String namespace = TEST_NAME + \"-namespace\";\n        String fnName = TEST_NAME + \"-function\";\n        ConsoleOutputCapturer consoleOutputCapturer = new ConsoleOutputCapturer();\n        consoleOutputCapturer.start();\n        cmd.run(new String[] {\n                \"querystate\",\n                \"--tenant\", tenant,\n                \"--namespace\", namespace,\n                \"--name\", fnName,\n        });\n        consoleOutputCapturer.stop();\n        String output = consoleOutputCapturer.getStderr();\n        assertTrue(output.replace(\"\\n\", \"\").contains(\"State key needs to be specified\"));\n        StateGetter stateGetter = cmd.getStateGetter();\n        assertEquals(tenant, stateGetter.getTenant());\n        assertEquals(namespace, stateGetter.getNamespace());\n        assertEquals(fnName, stateGetter.getFunctionName());\n        verify(functions, times(0)).getFunctionState(any(), any(), any(), any());\n    }\n","realPath":"pulsar-client-tools-test/src/test/java/org/apache/pulsar/admin/cli/CmdFunctionsTest.java","repoName":"pulsar","snippetEndLine":0,"snippetStartLine":0,"startLine":519,"status":"M"}],"commitId":"73e8beb62f9a9bfc13a347611859f1b2af0fd33c","commitMessage":"@@@Refactor tests in pulsar client tools test (#6472)\n\n\n Modifications\n\nThe main modification was the reduction of repeated initialization of the variables in the tests.","date":"2020-03-07 04:50:55","modifiedFileCount":"3","status":"M","submitter":"Sergii Zhevzhyk"}]
