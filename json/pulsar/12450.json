[{"authorTime":"2020-04-22 17:13:20","codes":[{"authorDate":"2020-04-22 17:13:20","commitOrder":1,"curCode":"        void run() throws PulsarAdminException {\n            String persistentTopic = validatePersistentTopic(params);\n\n            Message<byte[]> message = persistentTopics.getMessageById(persistentTopic, ledgerId, entryId);\n\n            ByteBuf date = Unpooled.wrappedBuffer(message.getData());\n            System.out.println(ByteBufUtil.prettyHexDump(date));\n        }\n","date":"2020-04-22 17:13:20","endLine":595,"groupId":"4594","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"run","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-pulsar-10-0.7/blobInfo/CC_OUT/blobs/7b/32c64c60e12438603a2ba2c6a77668aceb5571.src","preCode":"        void run() throws PulsarAdminException {\n            String persistentTopic = validatePersistentTopic(params);\n\n            Message<byte[]> message = persistentTopics.getMessageById(persistentTopic, ledgerId, entryId);\n\n            ByteBuf date = Unpooled.wrappedBuffer(message.getData());\n            System.out.println(ByteBufUtil.prettyHexDump(date));\n        }\n","realPath":"pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdPersistentTopics.java","repoName":"pulsar","snippetEndLine":0,"snippetStartLine":0,"startLine":588,"status":"B"},{"authorDate":"2020-04-22 17:13:20","commitOrder":1,"curCode":"        void run() throws PulsarAdminException {\n            String persistentTopic = validatePersistentTopic(params);\n\n            Message<byte[]> message = topics.getMessageById(persistentTopic, ledgerId, entryId);\n\n            ByteBuf date = Unpooled.wrappedBuffer(message.getData());\n            System.out.println(ByteBufUtil.prettyHexDump(date));\n        }\n","date":"2020-04-22 17:13:20","endLine":661,"groupId":"4594","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"run","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-pulsar-10-0.7/blobInfo/CC_OUT/blobs/73/3a31d06d8a868d0ccce09da616a5334b44cb04.src","preCode":"        void run() throws PulsarAdminException {\n            String persistentTopic = validatePersistentTopic(params);\n\n            Message<byte[]> message = topics.getMessageById(persistentTopic, ledgerId, entryId);\n\n            ByteBuf date = Unpooled.wrappedBuffer(message.getData());\n            System.out.println(ByteBufUtil.prettyHexDump(date));\n        }\n","realPath":"pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdTopics.java","repoName":"pulsar","snippetEndLine":0,"snippetStartLine":0,"startLine":654,"status":"B"}],"commitId":"d3ac61f1d4861b8a7d842763facf9e1058bcdda2","commitMessage":"@@@[Issue 2912][pulsar-admin] add get-message-by-id cmd into pulsar-admin (#6331)\n\nFixes #2912 \n\n\n Motivation\nAdding a new command `get-message-by-id` to the pulsar-admin which allows user to look at a single message by providing ledger id and entry id.\n\n\n Modifications\n- pulsar-admin includes the new command `get-message-by-id`\n- pulsar-broker v1/v2 apis to handle the get-message-by-id request from pulsar-admin\n- managedCursor to read from ledgers with given ledger id and entry id","date":"2020-04-22 17:13:20","modifiedFileCount":"9","status":"B","submitter":"Neng Lu"},{"authorTime":"2021-01-29 03:06:36","codes":[{"authorDate":"2021-01-29 03:06:36","commitOrder":2,"curCode":"        void run() throws PulsarAdminException {\n            String persistentTopic = validatePersistentTopic(params);\n\n            Message<byte[]> message = getPersistentTopics().getMessageById(persistentTopic, ledgerId, entryId);\n\n            ByteBuf date = Unpooled.wrappedBuffer(message.getData());\n            System.out.println(ByteBufUtil.prettyHexDump(date));\n        }\n","date":"2021-01-29 03:06:36","endLine":605,"groupId":"4594","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"run","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-pulsar-10-0.7/blobInfo/CC_OUT/blobs/f5/6029d23fde419e8aa546ee22ae531b98ac9d44.src","preCode":"        void run() throws PulsarAdminException {\n            String persistentTopic = validatePersistentTopic(params);\n\n            Message<byte[]> message = persistentTopics.getMessageById(persistentTopic, ledgerId, entryId);\n\n            ByteBuf date = Unpooled.wrappedBuffer(message.getData());\n            System.out.println(ByteBufUtil.prettyHexDump(date));\n        }\n","realPath":"pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdPersistentTopics.java","repoName":"pulsar","snippetEndLine":0,"snippetStartLine":0,"startLine":598,"status":"M"},{"authorDate":"2021-01-29 03:06:36","commitOrder":2,"curCode":"        void run() throws PulsarAdminException {\n            String persistentTopic = validatePersistentTopic(params);\n\n            Message<byte[]> message = getTopics().getMessageById(persistentTopic, ledgerId, entryId);\n\n            ByteBuf date = Unpooled.wrappedBuffer(message.getData());\n            System.out.println(ByteBufUtil.prettyHexDump(date));\n        }\n","date":"2021-01-29 03:06:36","endLine":860,"groupId":"4594","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"run","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-pulsar-10-0.7/blobInfo/CC_OUT/blobs/0c/610c2779cd4584c2874daaace658aee5f2b9db.src","preCode":"        void run() throws PulsarAdminException {\n            String persistentTopic = validatePersistentTopic(params);\n\n            Message<byte[]> message = topics.getMessageById(persistentTopic, ledgerId, entryId);\n\n            ByteBuf date = Unpooled.wrappedBuffer(message.getData());\n            System.out.println(ByteBufUtil.prettyHexDump(date));\n        }\n","realPath":"pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdTopics.java","repoName":"pulsar","snippetEndLine":0,"snippetStartLine":0,"startLine":853,"status":"M"}],"commitId":"232b32439687995dd3102d8c281cf50b7b91e0bf","commitMessage":"@@@Lazily init PulsarAdmin in PulsarAdminTool (#9312)\n\n\n Motivation\npulsar-admin (PulsarAdminTool) initialises eagerly the PulsarAdmin object and some of the the underlying REST API intefaces.\nThis initialisation process triggers lot of resource loading (like SSL/RESTAPI classes....) that slows down the JVM even for stuff that is not needed.\nAlso there are shutdown hooks that are useless by they are executed while existing from the command.\n\nRemoving initialisation of useless stuff helps in having a better bootstrap time.  especially in case that you are not performing API calls.  like when you are learning the tool and you make lots of syntax errors. \n\n\n Modifications\n- Initialise as lazily as possible PulsarAdmin \n- Make PulsarAdminTool#main \"testable\" by allowing it to not call System.exit\n- Use halt instead of exit in order to not trigger shutdown hooks\n\n\n Verifying this change\nThis change is a trivial rework / code cleanup.  but I have added tests for parts that have been touched and had not unit tests.\n","date":"2021-01-29 03:06:36","modifiedFileCount":"27","status":"M","submitter":"Enrico Olivelli"},{"authorTime":"2021-02-15 13:06:41","codes":[{"authorDate":"2021-01-29 03:06:36","commitOrder":3,"curCode":"        void run() throws PulsarAdminException {\n            String persistentTopic = validatePersistentTopic(params);\n\n            Message<byte[]> message = getPersistentTopics().getMessageById(persistentTopic, ledgerId, entryId);\n\n            ByteBuf date = Unpooled.wrappedBuffer(message.getData());\n            System.out.println(ByteBufUtil.prettyHexDump(date));\n        }\n","date":"2021-01-29 03:06:36","endLine":605,"groupId":"4594","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"run","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-pulsar-10-0.7/blobInfo/CC_OUT/blobs/f5/6029d23fde419e8aa546ee22ae531b98ac9d44.src","preCode":"        void run() throws PulsarAdminException {\n            String persistentTopic = validatePersistentTopic(params);\n\n            Message<byte[]> message = getPersistentTopics().getMessageById(persistentTopic, ledgerId, entryId);\n\n            ByteBuf date = Unpooled.wrappedBuffer(message.getData());\n            System.out.println(ByteBufUtil.prettyHexDump(date));\n        }\n","realPath":"pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdPersistentTopics.java","repoName":"pulsar","snippetEndLine":0,"snippetStartLine":0,"startLine":598,"status":"N"},{"authorDate":"2021-02-15 13:06:41","commitOrder":3,"curCode":"        void run() throws PulsarAdminException {\n            String persistentTopic = validatePersistentTopic(params);\n\n            Message<byte[]> message = getTopics().getMessageById(persistentTopic, ledgerId, entryId);\n            if (message == null) {\n                System.out.println(\"Cannot find any messages based on ledgerId:\"\n                        + ledgerId + \" entryId:\" + entryId);\n            } else {\n                ByteBuf date = Unpooled.wrappedBuffer(message.getData());\n                System.out.println(ByteBufUtil.prettyHexDump(date));\n            }\n        }\n","date":"2021-02-15 13:06:41","endLine":899,"groupId":"560","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"run","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-pulsar-10-0.7/blobInfo/CC_OUT/blobs/e0/b9204c67e8a5a21b96cd0393c64dcda1f0d059.src","preCode":"        void run() throws PulsarAdminException {\n            String persistentTopic = validatePersistentTopic(params);\n\n            Message<byte[]> message = getTopics().getMessageById(persistentTopic, ledgerId, entryId);\n\n            ByteBuf date = Unpooled.wrappedBuffer(message.getData());\n            System.out.println(ByteBufUtil.prettyHexDump(date));\n        }\n","realPath":"pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdTopics.java","repoName":"pulsar","snippetEndLine":0,"snippetStartLine":0,"startLine":888,"status":"M"}],"commitId":"6ebc7959e595cb0878cb84d9cb756fd6ebb14050","commitMessage":"@@@Fix get-message-by-id throwing NPE when message is null (#9537)\n\nFixes #9518\n\n\n Modifications\nAdd friendly reminder tips for command","date":"2021-02-15 13:06:41","modifiedFileCount":"2","status":"M","submitter":"feynmanlin"},{"authorTime":"2021-06-26 00:27:00","codes":[{"authorDate":"2021-01-29 03:06:36","commitOrder":4,"curCode":"        void run() throws PulsarAdminException {\n            String persistentTopic = validatePersistentTopic(params);\n\n            Message<byte[]> message = getPersistentTopics().getMessageById(persistentTopic, ledgerId, entryId);\n\n            ByteBuf date = Unpooled.wrappedBuffer(message.getData());\n            System.out.println(ByteBufUtil.prettyHexDump(date));\n        }\n","date":"2021-01-29 03:06:36","endLine":605,"groupId":"4594","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"run","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-pulsar-10-0.7/blobInfo/CC_OUT/blobs/f5/6029d23fde419e8aa546ee22ae531b98ac9d44.src","preCode":"        void run() throws PulsarAdminException {\n            String persistentTopic = validatePersistentTopic(params);\n\n            Message<byte[]> message = getPersistentTopics().getMessageById(persistentTopic, ledgerId, entryId);\n\n            ByteBuf date = Unpooled.wrappedBuffer(message.getData());\n            System.out.println(ByteBufUtil.prettyHexDump(date));\n        }\n","realPath":"pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdPersistentTopics.java","repoName":"pulsar","snippetEndLine":0,"snippetStartLine":0,"startLine":598,"status":"N"},{"authorDate":"2021-06-26 00:27:00","commitOrder":4,"curCode":"        void run() throws PulsarAdminException {\n            String persistentTopic = validatePersistentTopic(params);\n\n            Message<byte[]> message = getTopics().getMessageById(persistentTopic, ledgerId, entryId);\n            if (message == null) {\n                System.out.println(\"Cannot find any messages based on ledgerId:\"\n                        + ledgerId + \" entryId:\" + entryId);\n            } else {\n                if (message.getMessageId() instanceof BatchMessageIdImpl) {\n                    BatchMessageIdImpl msgId = (BatchMessageIdImpl) message.getMessageId();\n                    System.out.println(\"Batch Message ID: \" + msgId.getLedgerId() + \":\" + msgId.getEntryId() + \":\" + msgId.getBatchIndex());\n                } else {\n                    MessageIdImpl msgId = (MessageIdImpl) message.getMessageId();\n                    System.out.println(\"Message ID: \" + msgId.getLedgerId() + \":\" + msgId.getEntryId());\n                }\n                if (message.getProperties().size() > 0) {\n                    System.out.println(\"Properties:\");\n                    print(message.getProperties());\n                }\n                ByteBuf date = Unpooled.wrappedBuffer(message.getData());\n                System.out.println(ByteBufUtil.prettyHexDump(date));\n            }\n        }\n","date":"2021-06-26 00:27:00","endLine":927,"groupId":"2954","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"run","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-pulsar-10-0.7/blobInfo/CC_OUT/blobs/6e/acf743fa77ea97be411f6c53de57060c2b3249.src","preCode":"        void run() throws PulsarAdminException {\n            String persistentTopic = validatePersistentTopic(params);\n\n            Message<byte[]> message = getTopics().getMessageById(persistentTopic, ledgerId, entryId);\n            if (message == null) {\n                System.out.println(\"Cannot find any messages based on ledgerId:\"\n                        + ledgerId + \" entryId:\" + entryId);\n            } else {\n                ByteBuf date = Unpooled.wrappedBuffer(message.getData());\n                System.out.println(ByteBufUtil.prettyHexDump(date));\n            }\n        }\n","realPath":"pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdTopics.java","repoName":"pulsar","snippetEndLine":0,"snippetStartLine":0,"startLine":905,"status":"M"}],"commitId":"cadf59d18d6f71f1da06f425709bffa1b10fcf11","commitMessage":"@@@Print message metadata when getting message by id (#11092)\n\n```\nBatch Message ID: 10:1:0\nProperties:\n\"X-Pulsar-batch-size    26825\"\n\"X-Pulsar-num-batch-message    26\"\n\"publish-time    2021-06-25T16:00:40.919+08:00\"\n```","date":"2021-06-26 00:27:00","modifiedFileCount":"3","status":"M","submitter":"lipenghui"},{"authorTime":"2021-07-15 16:49:04","codes":[{"authorDate":"2021-01-29 03:06:36","commitOrder":5,"curCode":"        void run() throws PulsarAdminException {\n            String persistentTopic = validatePersistentTopic(params);\n\n            Message<byte[]> message = getPersistentTopics().getMessageById(persistentTopic, ledgerId, entryId);\n\n            ByteBuf date = Unpooled.wrappedBuffer(message.getData());\n            System.out.println(ByteBufUtil.prettyHexDump(date));\n        }\n","date":"2021-01-29 03:06:36","endLine":605,"groupId":"12450","id":9,"instanceNumber":1,"isCurCommit":0,"methodName":"run","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-pulsar-10-0.7/blobInfo/CC_OUT/blobs/f5/6029d23fde419e8aa546ee22ae531b98ac9d44.src","preCode":"        void run() throws PulsarAdminException {\n            String persistentTopic = validatePersistentTopic(params);\n\n            Message<byte[]> message = getPersistentTopics().getMessageById(persistentTopic, ledgerId, entryId);\n\n            ByteBuf date = Unpooled.wrappedBuffer(message.getData());\n            System.out.println(ByteBufUtil.prettyHexDump(date));\n        }\n","realPath":"pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdPersistentTopics.java","repoName":"pulsar","snippetEndLine":0,"snippetStartLine":0,"startLine":598,"status":"N"},{"authorDate":"2021-07-15 16:49:04","commitOrder":5,"curCode":"        void run() throws PulsarAdminException {\n            String persistentTopic = validatePersistentTopic(params);\n\n            MessageImpl message = (MessageImpl) getTopics().getMessageById(persistentTopic, ledgerId, entryId);\n            if (message == null) {\n                System.out.println(\"Cannot find any messages based on ledgerId:\"\n                        + ledgerId + \" entryId:\" + entryId);\n            } else {\n                if (message.getMessageId() instanceof BatchMessageIdImpl) {\n                    BatchMessageIdImpl msgId = (BatchMessageIdImpl) message.getMessageId();\n                    System.out.println(\"Batch Message ID: \" + msgId.getLedgerId() + \":\" + msgId.getEntryId() + \":\" + msgId.getBatchIndex());\n                } else {\n                    MessageIdImpl msgId = (MessageIdImpl) message.getMessageId();\n                    System.out.println(\"Message ID: \" + msgId.getLedgerId() + \":\" + msgId.getEntryId());\n                }\n\n                System.out.println(\"Publish time: \" + message.getPublishTime());\n                System.out.println(\"Event time: \" + message.getEventTime());\n\n                if (message.getDeliverAtTime() != 0) {\n                    System.out.println(\"Deliver at time: \" + message.getDeliverAtTime());\n                }\n\n                if (message.getBrokerEntryMetadata() != null) {\n                    if (message.getBrokerEntryMetadata().hasBrokerTimestamp()) {\n                        System.out.println(\"Broker entry metadata timestamp: \" + message.getBrokerEntryMetadata().getBrokerTimestamp());\n                    }\n                    if (message.getBrokerEntryMetadata().hasIndex()) {\n                        System.out.println(\"Broker entry metadata index: \" + message.getBrokerEntryMetadata().getIndex());\n                    }\n                }\n\n                if (message.getProperties().size() > 0) {\n                    System.out.println(\"Properties:\");\n                    print(message.getProperties());\n                }\n                ByteBuf date = Unpooled.wrappedBuffer(message.getData());\n                System.out.println(ByteBufUtil.prettyHexDump(date));\n            }\n        }\n","date":"2021-07-15 16:49:04","endLine":989,"groupId":"12450","id":10,"instanceNumber":2,"isCurCommit":0,"methodName":"run","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-pulsar-10-0.7/blobInfo/CC_OUT/blobs/ee/488364bc9e42eb8d680ed6e9bf37ae7ba17704.src","preCode":"        void run() throws PulsarAdminException {\n            String persistentTopic = validatePersistentTopic(params);\n\n            Message<byte[]> message = getTopics().getMessageById(persistentTopic, ledgerId, entryId);\n            if (message == null) {\n                System.out.println(\"Cannot find any messages based on ledgerId:\"\n                        + ledgerId + \" entryId:\" + entryId);\n            } else {\n                if (message.getMessageId() instanceof BatchMessageIdImpl) {\n                    BatchMessageIdImpl msgId = (BatchMessageIdImpl) message.getMessageId();\n                    System.out.println(\"Batch Message ID: \" + msgId.getLedgerId() + \":\" + msgId.getEntryId() + \":\" + msgId.getBatchIndex());\n                } else {\n                    MessageIdImpl msgId = (MessageIdImpl) message.getMessageId();\n                    System.out.println(\"Message ID: \" + msgId.getLedgerId() + \":\" + msgId.getEntryId());\n                }\n                if (message.getProperties().size() > 0) {\n                    System.out.println(\"Properties:\");\n                    print(message.getProperties());\n                }\n                ByteBuf date = Unpooled.wrappedBuffer(message.getData());\n                System.out.println(ByteBufUtil.prettyHexDump(date));\n            }\n        }\n","realPath":"pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdTopics.java","repoName":"pulsar","snippetEndLine":0,"snippetStartLine":0,"startLine":950,"status":"M"}],"commitId":"72f77853a43fd439235b9594099494b1b3e12464","commitMessage":"@@@fix batch size < 0 error when peekmessage (#11301)\n\nFixes #11300 \n\n\n Motivation\nThis pull request fix the error of `X-Pulsar-batch-size` < 0\n\n\n Modifications\n\n1. fix the logic of calculate `X-Pulsar-batch-size`  to make sure it's the right size of batch message\n2. expose more attribute to Admin Tool command of getMessageById and examineMessage\n3. add test code for these changes\n","date":"2021-07-15 16:49:04","modifiedFileCount":"3","status":"M","submitter":"Aloys"}]
