[{"authorTime":"2016-06-30 06:23:27","codes":[{"authorDate":"2016-06-30 06:23:27","commitOrder":2,"curCode":"    int encodeUtf8(final CharSequence in, final byte[] out, final int offset, final int length) {\n      long outIx = getArrayBaseOffset() + offset;\n      final long outLimit = outIx + length;\n      final int inLimit = in.length();\n      if (inLimit > length || out.length - length < offset) {\n        \r\n        throw new ArrayIndexOutOfBoundsException(\n            \"Failed writing \" + in.charAt(inLimit - 1) + \" at index \" + (offset + length));\n      }\n\n      \r\n      \r\n      int inIx = 0;\n      for (char c; inIx < inLimit && (c = in.charAt(inIx)) < 0x80; ++inIx) {\n        UnsafeUtil.putByte(out, outIx++, (byte) c);\n      }\n      if (inIx == inLimit) {\n        \r\n        return (int) (outIx - getArrayBaseOffset());\n      }\n\n      for (char c; inIx < inLimit; ++inIx) {\n        c = in.charAt(inIx);\n        if (c < 0x80 && outIx < outLimit) {\n          UnsafeUtil.putByte(out, outIx++, (byte) c);\n        } else if (c < 0x800 && outIx <= outLimit - 2L) { \r\n          UnsafeUtil.putByte(out, outIx++, (byte) ((0xF << 6) | (c >>> 6)));\n          UnsafeUtil.putByte(out, outIx++, (byte) (0x80 | (0x3F & c)));\n        } else if ((c < MIN_SURROGATE || MAX_SURROGATE < c) && outIx <= outLimit - 3L) {\n          \r\n          UnsafeUtil.putByte(out, outIx++, (byte) ((0xF << 5) | (c >>> 12)));\n          UnsafeUtil.putByte(out, outIx++, (byte) (0x80 | (0x3F & (c >>> 6))));\n          UnsafeUtil.putByte(out, outIx++, (byte) (0x80 | (0x3F & c)));\n        } else if (outIx <= outLimit - 4L) {\n          \r\n          \r\n          final char low;\n          if (inIx + 1 == inLimit || !isSurrogatePair(c, (low = in.charAt(++inIx)))) {\n            throw new UnpairedSurrogateException((inIx - 1), inLimit);\n          }\n          int codePoint = toCodePoint(c, low);\n          UnsafeUtil.putByte(out, outIx++, (byte) ((0xF << 4) | (codePoint >>> 18)));\n          UnsafeUtil.putByte(out, outIx++, (byte) (0x80 | (0x3F & (codePoint >>> 12))));\n          UnsafeUtil.putByte(out, outIx++, (byte) (0x80 | (0x3F & (codePoint >>> 6))));\n          UnsafeUtil.putByte(out, outIx++, (byte) (0x80 | (0x3F & codePoint)));\n        } else {\n          if ((MIN_SURROGATE <= c && c <= MAX_SURROGATE)\n              && (inIx + 1 == inLimit || !isSurrogatePair(c, in.charAt(inIx + 1)))) {\n            \r\n            throw new UnpairedSurrogateException(inIx, inLimit);\n          }\n          \r\n          throw new ArrayIndexOutOfBoundsException(\"Failed writing \" + c + \" at index \" + outIx);\n        }\n      }\n\n      \r\n      return (int) (outIx - getArrayBaseOffset());\n    }\n","date":"2016-06-30 06:38:03","endLine":1247,"groupId":"1005","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"encodeUtf8","params":"(finalCharSequencein@finalbyte[]out@finalintoffset@finalintlength)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-protobuf-10-0.7/blobInfo/CC_OUT/blobs/5b/80d405ebda7c11b8fc524b62b2d67cd4900d9d.src","preCode":"    int encodeUtf8(final CharSequence in, final byte[] out, final int offset, final int length) {\n      long outIx = getArrayBaseOffset() + offset;\n      final long outLimit = outIx + length;\n      final int inLimit = in.length();\n      if (inLimit > length || out.length - length < offset) {\n        \r\n        throw new ArrayIndexOutOfBoundsException(\n            \"Failed writing \" + in.charAt(inLimit - 1) + \" at index \" + (offset + length));\n      }\n\n      \r\n      \r\n      int inIx = 0;\n      for (char c; inIx < inLimit && (c = in.charAt(inIx)) < 0x80; ++inIx) {\n        UnsafeUtil.putByte(out, outIx++, (byte) c);\n      }\n      if (inIx == inLimit) {\n        \r\n        return (int) (outIx - getArrayBaseOffset());\n      }\n\n      for (char c; inIx < inLimit; ++inIx) {\n        c = in.charAt(inIx);\n        if (c < 0x80 && outIx < outLimit) {\n          UnsafeUtil.putByte(out, outIx++, (byte) c);\n        } else if (c < 0x800 && outIx <= outLimit - 2L) { \r\n          UnsafeUtil.putByte(out, outIx++, (byte) ((0xF << 6) | (c >>> 6)));\n          UnsafeUtil.putByte(out, outIx++, (byte) (0x80 | (0x3F & c)));\n        } else if ((c < MIN_SURROGATE || MAX_SURROGATE < c) && outIx <= outLimit - 3L) {\n          \r\n          UnsafeUtil.putByte(out, outIx++, (byte) ((0xF << 5) | (c >>> 12)));\n          UnsafeUtil.putByte(out, outIx++, (byte) (0x80 | (0x3F & (c >>> 6))));\n          UnsafeUtil.putByte(out, outIx++, (byte) (0x80 | (0x3F & c)));\n        } else if (outIx <= outLimit - 4L) {\n          \r\n          \r\n          final char low;\n          if (inIx + 1 == inLimit || !isSurrogatePair(c, (low = in.charAt(++inIx)))) {\n            throw new UnpairedSurrogateException((inIx - 1), inLimit);\n          }\n          int codePoint = toCodePoint(c, low);\n          UnsafeUtil.putByte(out, outIx++, (byte) ((0xF << 4) | (codePoint >>> 18)));\n          UnsafeUtil.putByte(out, outIx++, (byte) (0x80 | (0x3F & (codePoint >>> 12))));\n          UnsafeUtil.putByte(out, outIx++, (byte) (0x80 | (0x3F & (codePoint >>> 6))));\n          UnsafeUtil.putByte(out, outIx++, (byte) (0x80 | (0x3F & codePoint)));\n        } else {\n          if ((MIN_SURROGATE <= c && c <= MAX_SURROGATE)\n              && (inIx + 1 == inLimit || !isSurrogatePair(c, in.charAt(inIx + 1)))) {\n            \r\n            throw new UnpairedSurrogateException(inIx, inLimit);\n          }\n          \r\n          throw new ArrayIndexOutOfBoundsException(\"Failed writing \" + c + \" at index \" + outIx);\n        }\n      }\n\n      \r\n      return (int) (outIx - getArrayBaseOffset());\n    }\n","realPath":"java/core/src/main/java/com/google/protobuf/Utf8.java","repoName":"protobuf","snippetEndLine":0,"snippetStartLine":0,"startLine":1189,"status":"MB"},{"authorDate":"2016-06-30 06:23:27","commitOrder":2,"curCode":"    void encodeUtf8Direct(CharSequence in, ByteBuffer out) {\n      final long address = addressOffset(out);\n      long outIx = address + out.position();\n      final long outLimit = address + out.limit();\n      final int inLimit = in.length();\n      if (inLimit > outLimit - outIx) {\n        \r\n        throw new ArrayIndexOutOfBoundsException(\n            \"Failed writing \" + in.charAt(inLimit - 1) + \" at index \" + out.limit());\n      }\n\n      \r\n      \r\n      int inIx = 0;\n      for (char c; inIx < inLimit && (c = in.charAt(inIx)) < 0x80; ++inIx) {\n        UnsafeUtil.putByte(outIx++, (byte) c);\n      }\n      if (inIx == inLimit) {\n        \r\n        out.position((int) (outIx - address));\n        return;\n      }\n\n      for (char c; inIx < inLimit; ++inIx) {\n        c = in.charAt(inIx);\n        if (c < 0x80 && outIx < outLimit) {\n          UnsafeUtil.putByte(outIx++, (byte) c);\n        } else if (c < 0x800 && outIx <= outLimit - 2L) { \r\n          UnsafeUtil.putByte(outIx++, (byte) ((0xF << 6) | (c >>> 6)));\n          UnsafeUtil.putByte(outIx++, (byte) (0x80 | (0x3F & c)));\n        } else if ((c < MIN_SURROGATE || MAX_SURROGATE < c) && outIx <= outLimit - 3L) {\n          \r\n          UnsafeUtil.putByte(outIx++, (byte) ((0xF << 5) | (c >>> 12)));\n          UnsafeUtil.putByte(outIx++, (byte) (0x80 | (0x3F & (c >>> 6))));\n          UnsafeUtil.putByte(outIx++, (byte) (0x80 | (0x3F & c)));\n        } else if (outIx <= outLimit - 4L) {\n          \r\n          \r\n          final char low;\n          if (inIx + 1 == inLimit || !isSurrogatePair(c, (low = in.charAt(++inIx)))) {\n            throw new UnpairedSurrogateException((inIx - 1), inLimit);\n          }\n          int codePoint = toCodePoint(c, low);\n          UnsafeUtil.putByte(outIx++, (byte) ((0xF << 4) | (codePoint >>> 18)));\n          UnsafeUtil.putByte(outIx++, (byte) (0x80 | (0x3F & (codePoint >>> 12))));\n          UnsafeUtil.putByte(outIx++, (byte) (0x80 | (0x3F & (codePoint >>> 6))));\n          UnsafeUtil.putByte(outIx++, (byte) (0x80 | (0x3F & codePoint)));\n        } else {\n          if ((MIN_SURROGATE <= c && c <= MAX_SURROGATE)\n              && (inIx + 1 == inLimit || !isSurrogatePair(c, in.charAt(inIx + 1)))) {\n            \r\n            throw new UnpairedSurrogateException(inIx, inLimit);\n          }\n          \r\n          throw new ArrayIndexOutOfBoundsException(\"Failed writing \" + c + \" at index \" + outIx);\n        }\n      }\n\n      \r\n      out.position((int) (outIx - address));\n    }\n","date":"2016-06-30 06:38:03","endLine":1310,"groupId":"1005","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"encodeUtf8Direct","params":"(CharSequencein@ByteBufferout)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-protobuf-10-0.7/blobInfo/CC_OUT/blobs/5b/80d405ebda7c11b8fc524b62b2d67cd4900d9d.src","preCode":"    void encodeUtf8Direct(CharSequence in, ByteBuffer out) {\n      final long address = addressOffset(out);\n      long outIx = address + out.position();\n      final long outLimit = address + out.limit();\n      final int inLimit = in.length();\n      if (inLimit > outLimit - outIx) {\n        \r\n        throw new ArrayIndexOutOfBoundsException(\n            \"Failed writing \" + in.charAt(inLimit - 1) + \" at index \" + out.limit());\n      }\n\n      \r\n      \r\n      int inIx = 0;\n      for (char c; inIx < inLimit && (c = in.charAt(inIx)) < 0x80; ++inIx) {\n        UnsafeUtil.putByte(outIx++, (byte) c);\n      }\n      if (inIx == inLimit) {\n        \r\n        out.position((int) (outIx - address));\n        return;\n      }\n\n      for (char c; inIx < inLimit; ++inIx) {\n        c = in.charAt(inIx);\n        if (c < 0x80 && outIx < outLimit) {\n          UnsafeUtil.putByte(outIx++, (byte) c);\n        } else if (c < 0x800 && outIx <= outLimit - 2L) { \r\n          UnsafeUtil.putByte(outIx++, (byte) ((0xF << 6) | (c >>> 6)));\n          UnsafeUtil.putByte(outIx++, (byte) (0x80 | (0x3F & c)));\n        } else if ((c < MIN_SURROGATE || MAX_SURROGATE < c) && outIx <= outLimit - 3L) {\n          \r\n          UnsafeUtil.putByte(outIx++, (byte) ((0xF << 5) | (c >>> 12)));\n          UnsafeUtil.putByte(outIx++, (byte) (0x80 | (0x3F & (c >>> 6))));\n          UnsafeUtil.putByte(outIx++, (byte) (0x80 | (0x3F & c)));\n        } else if (outIx <= outLimit - 4L) {\n          \r\n          \r\n          final char low;\n          if (inIx + 1 == inLimit || !isSurrogatePair(c, (low = in.charAt(++inIx)))) {\n            throw new UnpairedSurrogateException((inIx - 1), inLimit);\n          }\n          int codePoint = toCodePoint(c, low);\n          UnsafeUtil.putByte(outIx++, (byte) ((0xF << 4) | (codePoint >>> 18)));\n          UnsafeUtil.putByte(outIx++, (byte) (0x80 | (0x3F & (codePoint >>> 12))));\n          UnsafeUtil.putByte(outIx++, (byte) (0x80 | (0x3F & (codePoint >>> 6))));\n          UnsafeUtil.putByte(outIx++, (byte) (0x80 | (0x3F & codePoint)));\n        } else {\n          if ((MIN_SURROGATE <= c && c <= MAX_SURROGATE)\n              && (inIx + 1 == inLimit || !isSurrogatePair(c, in.charAt(inIx + 1)))) {\n            \r\n            throw new UnpairedSurrogateException(inIx, inLimit);\n          }\n          \r\n          throw new ArrayIndexOutOfBoundsException(\"Failed writing \" + c + \" at index \" + outIx);\n        }\n      }\n\n      \r\n      out.position((int) (outIx - address));\n    }\n","realPath":"java/core/src/main/java/com/google/protobuf/Utf8.java","repoName":"protobuf","snippetEndLine":0,"snippetStartLine":0,"startLine":1250,"status":"MB"}],"commitId":"d64a2d9941c36a7bc2a7959ea10ab8363192ac14","commitMessage":"@@@Integrated internal changes from Google\n\nThis includes all internal changes from around May 20 to now.\n","date":"2016-06-30 06:38:03","modifiedFileCount":"44","status":"M","submitter":"Adam Cozzette"},{"authorTime":"2016-06-30 06:23:27","codes":[{"authorDate":"2017-08-22 01:39:27","commitOrder":3,"curCode":"    int encodeUtf8(final CharSequence in, final byte[] out, final int offset, final int length) {\n      long outIx = offset;\n      final long outLimit = outIx + length;\n      final int inLimit = in.length();\n      if (inLimit > length || out.length - length < offset) {\n        \r\n        throw new ArrayIndexOutOfBoundsException(\n            \"Failed writing \" + in.charAt(inLimit - 1) + \" at index \" + (offset + length));\n      }\n\n      \r\n      \r\n      int inIx = 0;\n      for (char c; inIx < inLimit && (c = in.charAt(inIx)) < 0x80; ++inIx) {\n        UnsafeUtil.putByte(out, outIx++, (byte) c);\n      }\n      if (inIx == inLimit) {\n        \r\n        return (int) outIx;\n      }\n\n      for (char c; inIx < inLimit; ++inIx) {\n        c = in.charAt(inIx);\n        if (c < 0x80 && outIx < outLimit) {\n          UnsafeUtil.putByte(out, outIx++, (byte) c);\n        } else if (c < 0x800 && outIx <= outLimit - 2L) { \r\n          UnsafeUtil.putByte(out, outIx++, (byte) ((0xF << 6) | (c >>> 6)));\n          UnsafeUtil.putByte(out, outIx++, (byte) (0x80 | (0x3F & c)));\n        } else if ((c < MIN_SURROGATE || MAX_SURROGATE < c) && outIx <= outLimit - 3L) {\n          \r\n          UnsafeUtil.putByte(out, outIx++, (byte) ((0xF << 5) | (c >>> 12)));\n          UnsafeUtil.putByte(out, outIx++, (byte) (0x80 | (0x3F & (c >>> 6))));\n          UnsafeUtil.putByte(out, outIx++, (byte) (0x80 | (0x3F & c)));\n        } else if (outIx <= outLimit - 4L) {\n          \r\n          \r\n          final char low;\n          if (inIx + 1 == inLimit || !isSurrogatePair(c, (low = in.charAt(++inIx)))) {\n            throw new UnpairedSurrogateException((inIx - 1), inLimit);\n          }\n          int codePoint = toCodePoint(c, low);\n          UnsafeUtil.putByte(out, outIx++, (byte) ((0xF << 4) | (codePoint >>> 18)));\n          UnsafeUtil.putByte(out, outIx++, (byte) (0x80 | (0x3F & (codePoint >>> 12))));\n          UnsafeUtil.putByte(out, outIx++, (byte) (0x80 | (0x3F & (codePoint >>> 6))));\n          UnsafeUtil.putByte(out, outIx++, (byte) (0x80 | (0x3F & codePoint)));\n        } else {\n          if ((MIN_SURROGATE <= c && c <= MAX_SURROGATE)\n              && (inIx + 1 == inLimit || !isSurrogatePair(c, in.charAt(inIx + 1)))) {\n            \r\n            throw new UnpairedSurrogateException(inIx, inLimit);\n          }\n          \r\n          throw new ArrayIndexOutOfBoundsException(\"Failed writing \" + c + \" at index \" + outIx);\n        }\n      }\n\n      \r\n      return (int) outIx;\n    }\n","date":"2017-08-22 01:39:27","endLine":1246,"groupId":"12588","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"encodeUtf8","params":"(finalCharSequencein@finalbyte[]out@finalintoffset@finalintlength)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-protobuf-10-0.7/blobInfo/CC_OUT/blobs/1b/1361445b030280579777b3770a25497432137e.src","preCode":"    int encodeUtf8(final CharSequence in, final byte[] out, final int offset, final int length) {\n      long outIx = getArrayBaseOffset() + offset;\n      final long outLimit = outIx + length;\n      final int inLimit = in.length();\n      if (inLimit > length || out.length - length < offset) {\n        \r\n        throw new ArrayIndexOutOfBoundsException(\n            \"Failed writing \" + in.charAt(inLimit - 1) + \" at index \" + (offset + length));\n      }\n\n      \r\n      \r\n      int inIx = 0;\n      for (char c; inIx < inLimit && (c = in.charAt(inIx)) < 0x80; ++inIx) {\n        UnsafeUtil.putByte(out, outIx++, (byte) c);\n      }\n      if (inIx == inLimit) {\n        \r\n        return (int) (outIx - getArrayBaseOffset());\n      }\n\n      for (char c; inIx < inLimit; ++inIx) {\n        c = in.charAt(inIx);\n        if (c < 0x80 && outIx < outLimit) {\n          UnsafeUtil.putByte(out, outIx++, (byte) c);\n        } else if (c < 0x800 && outIx <= outLimit - 2L) { \r\n          UnsafeUtil.putByte(out, outIx++, (byte) ((0xF << 6) | (c >>> 6)));\n          UnsafeUtil.putByte(out, outIx++, (byte) (0x80 | (0x3F & c)));\n        } else if ((c < MIN_SURROGATE || MAX_SURROGATE < c) && outIx <= outLimit - 3L) {\n          \r\n          UnsafeUtil.putByte(out, outIx++, (byte) ((0xF << 5) | (c >>> 12)));\n          UnsafeUtil.putByte(out, outIx++, (byte) (0x80 | (0x3F & (c >>> 6))));\n          UnsafeUtil.putByte(out, outIx++, (byte) (0x80 | (0x3F & c)));\n        } else if (outIx <= outLimit - 4L) {\n          \r\n          \r\n          final char low;\n          if (inIx + 1 == inLimit || !isSurrogatePair(c, (low = in.charAt(++inIx)))) {\n            throw new UnpairedSurrogateException((inIx - 1), inLimit);\n          }\n          int codePoint = toCodePoint(c, low);\n          UnsafeUtil.putByte(out, outIx++, (byte) ((0xF << 4) | (codePoint >>> 18)));\n          UnsafeUtil.putByte(out, outIx++, (byte) (0x80 | (0x3F & (codePoint >>> 12))));\n          UnsafeUtil.putByte(out, outIx++, (byte) (0x80 | (0x3F & (codePoint >>> 6))));\n          UnsafeUtil.putByte(out, outIx++, (byte) (0x80 | (0x3F & codePoint)));\n        } else {\n          if ((MIN_SURROGATE <= c && c <= MAX_SURROGATE)\n              && (inIx + 1 == inLimit || !isSurrogatePair(c, in.charAt(inIx + 1)))) {\n            \r\n            throw new UnpairedSurrogateException(inIx, inLimit);\n          }\n          \r\n          throw new ArrayIndexOutOfBoundsException(\"Failed writing \" + c + \" at index \" + outIx);\n        }\n      }\n\n      \r\n      return (int) (outIx - getArrayBaseOffset());\n    }\n","realPath":"java/core/src/main/java/com/google/protobuf/Utf8.java","repoName":"protobuf","snippetEndLine":0,"snippetStartLine":0,"startLine":1188,"status":"M"},{"authorDate":"2016-06-30 06:23:27","commitOrder":3,"curCode":"    void encodeUtf8Direct(CharSequence in, ByteBuffer out) {\n      final long address = addressOffset(out);\n      long outIx = address + out.position();\n      final long outLimit = address + out.limit();\n      final int inLimit = in.length();\n      if (inLimit > outLimit - outIx) {\n        \r\n        throw new ArrayIndexOutOfBoundsException(\n            \"Failed writing \" + in.charAt(inLimit - 1) + \" at index \" + out.limit());\n      }\n\n      \r\n      \r\n      int inIx = 0;\n      for (char c; inIx < inLimit && (c = in.charAt(inIx)) < 0x80; ++inIx) {\n        UnsafeUtil.putByte(outIx++, (byte) c);\n      }\n      if (inIx == inLimit) {\n        \r\n        out.position((int) (outIx - address));\n        return;\n      }\n\n      for (char c; inIx < inLimit; ++inIx) {\n        c = in.charAt(inIx);\n        if (c < 0x80 && outIx < outLimit) {\n          UnsafeUtil.putByte(outIx++, (byte) c);\n        } else if (c < 0x800 && outIx <= outLimit - 2L) { \r\n          UnsafeUtil.putByte(outIx++, (byte) ((0xF << 6) | (c >>> 6)));\n          UnsafeUtil.putByte(outIx++, (byte) (0x80 | (0x3F & c)));\n        } else if ((c < MIN_SURROGATE || MAX_SURROGATE < c) && outIx <= outLimit - 3L) {\n          \r\n          UnsafeUtil.putByte(outIx++, (byte) ((0xF << 5) | (c >>> 12)));\n          UnsafeUtil.putByte(outIx++, (byte) (0x80 | (0x3F & (c >>> 6))));\n          UnsafeUtil.putByte(outIx++, (byte) (0x80 | (0x3F & c)));\n        } else if (outIx <= outLimit - 4L) {\n          \r\n          \r\n          final char low;\n          if (inIx + 1 == inLimit || !isSurrogatePair(c, (low = in.charAt(++inIx)))) {\n            throw new UnpairedSurrogateException((inIx - 1), inLimit);\n          }\n          int codePoint = toCodePoint(c, low);\n          UnsafeUtil.putByte(outIx++, (byte) ((0xF << 4) | (codePoint >>> 18)));\n          UnsafeUtil.putByte(outIx++, (byte) (0x80 | (0x3F & (codePoint >>> 12))));\n          UnsafeUtil.putByte(outIx++, (byte) (0x80 | (0x3F & (codePoint >>> 6))));\n          UnsafeUtil.putByte(outIx++, (byte) (0x80 | (0x3F & codePoint)));\n        } else {\n          if ((MIN_SURROGATE <= c && c <= MAX_SURROGATE)\n              && (inIx + 1 == inLimit || !isSurrogatePair(c, in.charAt(inIx + 1)))) {\n            \r\n            throw new UnpairedSurrogateException(inIx, inLimit);\n          }\n          \r\n          throw new ArrayIndexOutOfBoundsException(\"Failed writing \" + c + \" at index \" + outIx);\n        }\n      }\n\n      \r\n      out.position((int) (outIx - address));\n    }\n","date":"2016-06-30 06:38:03","endLine":1310,"groupId":"12588","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"encodeUtf8Direct","params":"(CharSequencein@ByteBufferout)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-protobuf-10-0.7/blobInfo/CC_OUT/blobs/5b/80d405ebda7c11b8fc524b62b2d67cd4900d9d.src","preCode":"    void encodeUtf8Direct(CharSequence in, ByteBuffer out) {\n      final long address = addressOffset(out);\n      long outIx = address + out.position();\n      final long outLimit = address + out.limit();\n      final int inLimit = in.length();\n      if (inLimit > outLimit - outIx) {\n        \r\n        throw new ArrayIndexOutOfBoundsException(\n            \"Failed writing \" + in.charAt(inLimit - 1) + \" at index \" + out.limit());\n      }\n\n      \r\n      \r\n      int inIx = 0;\n      for (char c; inIx < inLimit && (c = in.charAt(inIx)) < 0x80; ++inIx) {\n        UnsafeUtil.putByte(outIx++, (byte) c);\n      }\n      if (inIx == inLimit) {\n        \r\n        out.position((int) (outIx - address));\n        return;\n      }\n\n      for (char c; inIx < inLimit; ++inIx) {\n        c = in.charAt(inIx);\n        if (c < 0x80 && outIx < outLimit) {\n          UnsafeUtil.putByte(outIx++, (byte) c);\n        } else if (c < 0x800 && outIx <= outLimit - 2L) { \r\n          UnsafeUtil.putByte(outIx++, (byte) ((0xF << 6) | (c >>> 6)));\n          UnsafeUtil.putByte(outIx++, (byte) (0x80 | (0x3F & c)));\n        } else if ((c < MIN_SURROGATE || MAX_SURROGATE < c) && outIx <= outLimit - 3L) {\n          \r\n          UnsafeUtil.putByte(outIx++, (byte) ((0xF << 5) | (c >>> 12)));\n          UnsafeUtil.putByte(outIx++, (byte) (0x80 | (0x3F & (c >>> 6))));\n          UnsafeUtil.putByte(outIx++, (byte) (0x80 | (0x3F & c)));\n        } else if (outIx <= outLimit - 4L) {\n          \r\n          \r\n          final char low;\n          if (inIx + 1 == inLimit || !isSurrogatePair(c, (low = in.charAt(++inIx)))) {\n            throw new UnpairedSurrogateException((inIx - 1), inLimit);\n          }\n          int codePoint = toCodePoint(c, low);\n          UnsafeUtil.putByte(outIx++, (byte) ((0xF << 4) | (codePoint >>> 18)));\n          UnsafeUtil.putByte(outIx++, (byte) (0x80 | (0x3F & (codePoint >>> 12))));\n          UnsafeUtil.putByte(outIx++, (byte) (0x80 | (0x3F & (codePoint >>> 6))));\n          UnsafeUtil.putByte(outIx++, (byte) (0x80 | (0x3F & codePoint)));\n        } else {\n          if ((MIN_SURROGATE <= c && c <= MAX_SURROGATE)\n              && (inIx + 1 == inLimit || !isSurrogatePair(c, in.charAt(inIx + 1)))) {\n            \r\n            throw new UnpairedSurrogateException(inIx, inLimit);\n          }\n          \r\n          throw new ArrayIndexOutOfBoundsException(\"Failed writing \" + c + \" at index \" + outIx);\n        }\n      }\n\n      \r\n      out.position((int) (outIx - address));\n    }\n","realPath":"java/core/src/main/java/com/google/protobuf/Utf8.java","repoName":"protobuf","snippetEndLine":0,"snippetStartLine":0,"startLine":1250,"status":"N"}],"commitId":"ba4e54724d2e6a1881c4fe88664d81fbacaf8c08","commitMessage":"@@@Merge pull request #3529 from pherl/merge3.4.x\n\nMerge 3.4.x into master","date":"2017-08-22 01:39:27","modifiedFileCount":"32","status":"M","submitter":"Jisi Liu"}]
