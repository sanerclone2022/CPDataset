[{"authorTime":"2019-08-25 00:20:55","codes":[{"authorDate":"2019-08-25 00:20:55","commitOrder":2,"curCode":"    private void createUniqueKeysPage(Composite parent) {\n        uniqueConstraint = vEntity.getBestIdentifier();\n        if (uniqueConstraint == null) {\n            return;\n        }\n        Group group = UIUtils.createControlGroup(parent, \"Virtual Unique Keys\", 1, GridData.FILL_BOTH, SWT.DEFAULT);\n\n        ukTable = new Table(group, SWT.FULL_SELECTION | SWT.BORDER);\n        ukTable.setLayoutData(new GridData(GridData.FILL_BOTH));\n        ukTable.setHeaderVisible(true);\n\n        UIUtils.createTableColumn(ukTable, SWT.LEFT, \"Ref Table\");\n        UIUtils.createTableColumn(ukTable, SWT.LEFT, \"Columns\");\n\n        {\n            Composite buttonsPanel = UIUtils.createComposite(group, 3);\n            buttonsPanel.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_BEGINNING));\n\n            Button btnAdd = UIUtils.createDialogButton(buttonsPanel, \"Add\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityConstraint newConstraint = new DBVEntityConstraint(vEntity, DBSEntityConstraintType.VIRTUAL_KEY, vEntity.getName() + \"_uk\");\n                    EditConstraintPage editPage = new EditConstraintPage(\"Edit unique key\", newConstraint);\n                    if (editPage.edit()) {\n                        changeConstraint(newConstraint, editPage);\n                        vEntity.addConstraint(newConstraint);\n                        createUniqueKeyItem(ukTable, newConstraint);\n                        vEntity.persistConfiguration();\n                    }\n                }\n            });\n\n            Button btnEdit = UIUtils.createDialogButton(buttonsPanel, \"Edit\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    TableItem ukItem = ukTable.getSelection()[0];\n                    DBVEntityConstraint virtualUK = (DBVEntityConstraint) ukItem.getData();\n                    EditConstraintPage editPage = new EditConstraintPage(\"Edit unique key\", virtualUK);\n                    if (editPage.edit()) {\n                        changeConstraint(virtualUK, editPage);\n                        ukItem.setText(0, DBUtils.getObjectFullName(virtualUK, DBPEvaluationContext.UI));\n                        ukItem.setText(1, virtualUK.getAttributes().stream().map(DBVEntityConstraintColumn::getAttributeName).collect(Collectors.joining(\",\")));\n                        vEntity.persistConfiguration();\n                    }\n                }\n            });\n            btnEdit.setEnabled(false);\n\n            Button btnRemove = UIUtils.createDialogButton(buttonsPanel, \"Remove\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityConstraint virtualUK = (DBVEntityConstraint) ukTable.getSelection()[0].getData();\n                    if (!UIUtils.confirmAction(parent.getShell(),\n                        \"Delete virtual unique key\",\n                        \"Are you sure you want to delete virtual unique key '\" + virtualUK.getName() + \"'?\")) {\n                        return;\n                    }\n                    vEntity.removeConstraint(virtualUK);\n                    ukTable.remove(ukTable.getSelectionIndices());\n                    vEntity.persistConfiguration();\n                }\n            });\n            btnRemove.setEnabled(false);\n\n            ukTable.addSelectionListener(new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    btnRemove.setEnabled(ukTable.getSelectionIndex() >= 0);\n                    btnEdit.setEnabled(ukTable.getSelectionIndex() >= 0);\n                }\n            });\n        }\n\n\r\n\r\n\r\n\r\n\r\n\n    }\n","date":"2019-08-25 00:20:55","endLine":259,"groupId":"17375","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"createUniqueKeysPage","params":"(Compositeparent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/c6/aa990677ffebdbb1b4bc558e5ff983da41d0e9.src","preCode":"    private void createUniqueKeysPage(Composite parent) {\n        uniqueConstraint = vEntity.getBestIdentifier();\n        if (uniqueConstraint == null) {\n            return;\n        }\n        Group group = UIUtils.createControlGroup(parent, \"Virtual Unique Keys\", 1, GridData.FILL_BOTH, SWT.DEFAULT);\n\n        ukTable = new Table(group, SWT.FULL_SELECTION | SWT.BORDER);\n        ukTable.setLayoutData(new GridData(GridData.FILL_BOTH));\n        ukTable.setHeaderVisible(true);\n\n        UIUtils.createTableColumn(ukTable, SWT.LEFT, \"Ref Table\");\n        UIUtils.createTableColumn(ukTable, SWT.LEFT, \"Columns\");\n\n        {\n            Composite buttonsPanel = UIUtils.createComposite(group, 3);\n            buttonsPanel.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_BEGINNING));\n\n            Button btnAdd = UIUtils.createDialogButton(buttonsPanel, \"Add\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityConstraint newConstraint = new DBVEntityConstraint(vEntity, DBSEntityConstraintType.VIRTUAL_KEY, vEntity.getName() + \"_uk\");\n                    EditConstraintPage editPage = new EditConstraintPage(\"Edit unique key\", newConstraint);\n                    if (editPage.edit()) {\n                        changeConstraint(newConstraint, editPage);\n                        vEntity.addConstraint(newConstraint);\n                        createUniqueKeyItem(ukTable, newConstraint);\n                        vEntity.persistConfiguration();\n                    }\n                }\n            });\n\n            Button btnEdit = UIUtils.createDialogButton(buttonsPanel, \"Edit\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    TableItem ukItem = ukTable.getSelection()[0];\n                    DBVEntityConstraint virtualUK = (DBVEntityConstraint) ukItem.getData();\n                    EditConstraintPage editPage = new EditConstraintPage(\"Edit unique key\", virtualUK);\n                    if (editPage.edit()) {\n                        changeConstraint(virtualUK, editPage);\n                        ukItem.setText(0, DBUtils.getObjectFullName(virtualUK, DBPEvaluationContext.UI));\n                        ukItem.setText(1, virtualUK.getAttributes().stream().map(DBVEntityConstraintColumn::getAttributeName).collect(Collectors.joining(\",\")));\n                        vEntity.persistConfiguration();\n                    }\n                }\n            });\n            btnEdit.setEnabled(false);\n\n            Button btnRemove = UIUtils.createDialogButton(buttonsPanel, \"Remove\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityConstraint virtualUK = (DBVEntityConstraint) ukTable.getSelection()[0].getData();\n                    if (!UIUtils.confirmAction(parent.getShell(),\n                        \"Delete virtual unique key\",\n                        \"Are you sure you want to delete virtual unique key '\" + virtualUK.getName() + \"'?\")) {\n                        return;\n                    }\n                    vEntity.removeConstraint(virtualUK);\n                    ukTable.remove(ukTable.getSelectionIndices());\n                    vEntity.persistConfiguration();\n                }\n            });\n            btnRemove.setEnabled(false);\n\n            ukTable.addSelectionListener(new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    btnRemove.setEnabled(ukTable.getSelectionIndex() >= 0);\n                    btnEdit.setEnabled(ukTable.getSelectionIndex() >= 0);\n                }\n            });\n        }\n\n\r\n\r\n\r\n\r\n\r\n\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/editors/data/VirtualStructureEditor.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":180,"status":"MB"},{"authorDate":"2019-08-25 00:20:55","commitOrder":2,"curCode":"    private void createForeignKeysPage(Composite parent) {\n        Group group = UIUtils.createControlGroup(parent, \"Virtual Foreign Keys\", 1, GridData.FILL_BOTH, SWT.DEFAULT);\n\n        fkTable = new Table(group, SWT.FULL_SELECTION | SWT.BORDER);\n        fkTable.setLayoutData(new GridData(GridData.FILL_BOTH));\n        fkTable.setHeaderVisible(true);\n\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Ref Table\");\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Columns\");\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Ref Datasource\");\n\n        {\n            Composite buttonsPanel = UIUtils.createComposite(group, 2);\n            buttonsPanel.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_BEGINNING));\n\n            UIUtils.createDialogButton(buttonsPanel, \"Add\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityForeignKey virtualFK = EditForeignKeyPage.createVirtualForeignKey(vEntity);\n                    if (virtualFK != null) {\n                        createForeignKeyItem(fkTable, virtualFK);\n                    }\n                }\n            });\n\n            Button btnRemove = UIUtils.createDialogButton(buttonsPanel, \"Remove\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityForeignKey virtualFK = (DBVEntityForeignKey) fkTable.getSelection()[0].getData();\n                    if (!UIUtils.confirmAction(parent.getShell(),\n                        \"Delete virtual FK\",\n                        \"Are you sure you want to delete virtual foreign key '\" + virtualFK.getName() + \"'?\")) {\n                        return;\n                    }\n                    vEntity.removeForeignKey(virtualFK);\n                    fkTable.remove(fkTable.getSelectionIndices());\n                    ((Button)e.widget).setEnabled(false);\n                }\n            });\n            btnRemove.setEnabled(false);\n\n            fkTable.addSelectionListener(new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    btnRemove.setEnabled(fkTable.getSelectionIndex() >= 0);\n                }\n            });\n        }\n    }\n","date":"2019-08-25 00:20:55","endLine":326,"groupId":"1703","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"createForeignKeysPage","params":"(Compositeparent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/c6/aa990677ffebdbb1b4bc558e5ff983da41d0e9.src","preCode":"    private void createForeignKeysPage(Composite parent) {\n        Group group = UIUtils.createControlGroup(parent, \"Virtual Foreign Keys\", 1, GridData.FILL_BOTH, SWT.DEFAULT);\n\n        fkTable = new Table(group, SWT.FULL_SELECTION | SWT.BORDER);\n        fkTable.setLayoutData(new GridData(GridData.FILL_BOTH));\n        fkTable.setHeaderVisible(true);\n\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Ref Table\");\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Columns\");\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Ref Datasource\");\n\n        {\n            Composite buttonsPanel = UIUtils.createComposite(group, 2);\n            buttonsPanel.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_BEGINNING));\n\n            UIUtils.createDialogButton(buttonsPanel, \"Add\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityForeignKey virtualFK = EditForeignKeyPage.createVirtualForeignKey(vEntity);\n                    if (virtualFK != null) {\n                        createForeignKeyItem(fkTable, virtualFK);\n                    }\n                }\n            });\n\n            Button btnRemove = UIUtils.createDialogButton(buttonsPanel, \"Remove\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityForeignKey virtualFK = (DBVEntityForeignKey) fkTable.getSelection()[0].getData();\n                    if (!UIUtils.confirmAction(parent.getShell(),\n                        \"Delete virtual FK\",\n                        \"Are you sure you want to delete virtual foreign key '\" + virtualFK.getName() + \"'?\")) {\n                        return;\n                    }\n                    vEntity.removeForeignKey(virtualFK);\n                    fkTable.remove(fkTable.getSelectionIndices());\n                    ((Button)e.widget).setEnabled(false);\n                }\n            });\n            btnRemove.setEnabled(false);\n\n            fkTable.addSelectionListener(new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    btnRemove.setEnabled(fkTable.getSelectionIndex() >= 0);\n                }\n            });\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/editors/data/VirtualStructureEditor.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":278,"status":"MB"}],"commitId":"e274dc27ff5137c3b5bb8f22580169e5d1ee11e0","commitMessage":"@@@#6529 Virtual structure editor tab. Virt model events\n\n\nFormer-commit-id: 76e0c1ab9b6f0a82837ff850ab5285c8c71150ca","date":"2019-08-25 00:20:55","modifiedFileCount":"11","status":"M","submitter":"serge-rider"},{"authorTime":"2019-09-13 20:48:41","codes":[{"authorDate":"2019-09-13 20:48:41","commitOrder":3,"curCode":"    private void createUniqueKeysPage(Composite parent) {\n        uniqueConstraint = vEntity.getBestIdentifier();\n        if (uniqueConstraint == null) {\n            return;\n        }\n        Group group = UIUtils.createControlGroup(parent, \"Virtual Unique Keys\", 1, GridData.FILL_BOTH, SWT.DEFAULT);\n\n        ukTable = new Table(group, SWT.FULL_SELECTION | SWT.BORDER);\n        ukTable.setLayoutData(new GridData(GridData.FILL_BOTH));\n        ukTable.setHeaderVisible(true);\n\n        UIUtils.createTableColumn(ukTable, SWT.LEFT, \"Key name\");\n        UIUtils.createTableColumn(ukTable, SWT.LEFT, \"Columns\");\n\n        {\n            Composite buttonsPanel = UIUtils.createComposite(group, 3);\n            buttonsPanel.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_BEGINNING));\n\n            Button btnAdd = UIUtils.createDialogButton(buttonsPanel, \"Add\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityConstraint newConstraint = new DBVEntityConstraint(vEntity, DBSEntityConstraintType.VIRTUAL_KEY, vEntity.getName() + \"_uk\");\n                    EditConstraintPage editPage = new EditConstraintPage(\"Edit unique key\", newConstraint);\n                    if (editPage.edit()) {\n                        changeConstraint(newConstraint, editPage);\n                        vEntity.addConstraint(newConstraint);\n                        createUniqueKeyItem(ukTable, newConstraint);\n                        vEntity.persistConfiguration();\n                    }\n                }\n            });\n\n            Button btnEdit = UIUtils.createDialogButton(buttonsPanel, \"Edit\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    TableItem ukItem = ukTable.getSelection()[0];\n                    DBVEntityConstraint virtualUK = (DBVEntityConstraint) ukItem.getData();\n                    EditConstraintPage editPage = new EditConstraintPage(\"Edit unique key\", virtualUK);\n                    if (editPage.edit()) {\n                        changeConstraint(virtualUK, editPage);\n                        ukItem.setText(0, DBUtils.getObjectFullName(virtualUK, DBPEvaluationContext.UI));\n                        ukItem.setText(1, virtualUK.getAttributes().stream().map(DBVEntityConstraintColumn::getAttributeName).collect(Collectors.joining(\",\")));\n                        vEntity.persistConfiguration();\n                    }\n                }\n            });\n            btnEdit.setEnabled(false);\n\n            Button btnRemove = UIUtils.createDialogButton(buttonsPanel, \"Remove\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityConstraint virtualUK = (DBVEntityConstraint) ukTable.getSelection()[0].getData();\n                    if (!UIUtils.confirmAction(parent.getShell(),\n                        \"Delete virtual unique key\",\n                        \"Are you sure you want to delete virtual unique key '\" + virtualUK.getName() + \"'?\")) {\n                        return;\n                    }\n                    vEntity.removeConstraint(virtualUK);\n                    ukTable.remove(ukTable.getSelectionIndices());\n                    vEntity.persistConfiguration();\n                }\n            });\n            btnRemove.setEnabled(false);\n\n            ukTable.addSelectionListener(new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    btnRemove.setEnabled(ukTable.getSelectionIndex() >= 0);\n                    btnEdit.setEnabled(ukTable.getSelectionIndex() >= 0);\n                }\n            });\n        }\n\n\r\n\r\n\r\n\r\n\r\n\n    }\n","date":"2019-09-13 20:48:41","endLine":282,"groupId":"17375","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"createUniqueKeysPage","params":"(Compositeparent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/f6/060456a81b77fd0591af35acf5d36b8435c85c.src","preCode":"    private void createUniqueKeysPage(Composite parent) {\n        uniqueConstraint = vEntity.getBestIdentifier();\n        if (uniqueConstraint == null) {\n            return;\n        }\n        Group group = UIUtils.createControlGroup(parent, \"Virtual Unique Keys\", 1, GridData.FILL_BOTH, SWT.DEFAULT);\n\n        ukTable = new Table(group, SWT.FULL_SELECTION | SWT.BORDER);\n        ukTable.setLayoutData(new GridData(GridData.FILL_BOTH));\n        ukTable.setHeaderVisible(true);\n\n        UIUtils.createTableColumn(ukTable, SWT.LEFT, \"Ref Table\");\n        UIUtils.createTableColumn(ukTable, SWT.LEFT, \"Columns\");\n\n        {\n            Composite buttonsPanel = UIUtils.createComposite(group, 3);\n            buttonsPanel.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_BEGINNING));\n\n            Button btnAdd = UIUtils.createDialogButton(buttonsPanel, \"Add\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityConstraint newConstraint = new DBVEntityConstraint(vEntity, DBSEntityConstraintType.VIRTUAL_KEY, vEntity.getName() + \"_uk\");\n                    EditConstraintPage editPage = new EditConstraintPage(\"Edit unique key\", newConstraint);\n                    if (editPage.edit()) {\n                        changeConstraint(newConstraint, editPage);\n                        vEntity.addConstraint(newConstraint);\n                        createUniqueKeyItem(ukTable, newConstraint);\n                        vEntity.persistConfiguration();\n                    }\n                }\n            });\n\n            Button btnEdit = UIUtils.createDialogButton(buttonsPanel, \"Edit\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    TableItem ukItem = ukTable.getSelection()[0];\n                    DBVEntityConstraint virtualUK = (DBVEntityConstraint) ukItem.getData();\n                    EditConstraintPage editPage = new EditConstraintPage(\"Edit unique key\", virtualUK);\n                    if (editPage.edit()) {\n                        changeConstraint(virtualUK, editPage);\n                        ukItem.setText(0, DBUtils.getObjectFullName(virtualUK, DBPEvaluationContext.UI));\n                        ukItem.setText(1, virtualUK.getAttributes().stream().map(DBVEntityConstraintColumn::getAttributeName).collect(Collectors.joining(\",\")));\n                        vEntity.persistConfiguration();\n                    }\n                }\n            });\n            btnEdit.setEnabled(false);\n\n            Button btnRemove = UIUtils.createDialogButton(buttonsPanel, \"Remove\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityConstraint virtualUK = (DBVEntityConstraint) ukTable.getSelection()[0].getData();\n                    if (!UIUtils.confirmAction(parent.getShell(),\n                        \"Delete virtual unique key\",\n                        \"Are you sure you want to delete virtual unique key '\" + virtualUK.getName() + \"'?\")) {\n                        return;\n                    }\n                    vEntity.removeConstraint(virtualUK);\n                    ukTable.remove(ukTable.getSelectionIndices());\n                    vEntity.persistConfiguration();\n                }\n            });\n            btnRemove.setEnabled(false);\n\n            ukTable.addSelectionListener(new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    btnRemove.setEnabled(ukTable.getSelectionIndex() >= 0);\n                    btnEdit.setEnabled(ukTable.getSelectionIndex() >= 0);\n                }\n            });\n        }\n\n\r\n\r\n\r\n\r\n\r\n\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/editors/data/VirtualStructureEditor.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":203,"status":"M"},{"authorDate":"2019-09-13 20:48:41","commitOrder":3,"curCode":"    private void createForeignKeysPage(Composite parent) {\n        Group group = UIUtils.createControlGroup(parent, \"Virtual Foreign Keys\", 1, GridData.FILL_BOTH, SWT.DEFAULT);\n\n        fkTable = new Table(group, SWT.FULL_SELECTION | SWT.BORDER);\n        fkTable.setLayoutData(new GridData(GridData.FILL_BOTH));\n        fkTable.setHeaderVisible(true);\n\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Target Table\");\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Columns\");\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Target Datasource\");\n\n        {\n            Composite buttonsPanel = UIUtils.createComposite(group, 2);\n            buttonsPanel.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_BEGINNING));\n\n            UIUtils.createDialogButton(buttonsPanel, \"Add\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityForeignKey virtualFK = EditForeignKeyPage.createVirtualForeignKey(vEntity);\n                    if (virtualFK != null) {\n                        createForeignKeyItem(fkTable, virtualFK);\n                    }\n                }\n            });\n\n            Button btnRemove = UIUtils.createDialogButton(buttonsPanel, \"Remove\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityForeignKey virtualFK = (DBVEntityForeignKey) fkTable.getSelection()[0].getData();\n                    if (!UIUtils.confirmAction(parent.getShell(),\n                        \"Delete virtual FK\",\n                        \"Are you sure you want to delete virtual foreign key '\" + virtualFK.getName() + \"'?\")) {\n                        return;\n                    }\n                    vEntity.removeForeignKey(virtualFK);\n                    fkTable.remove(fkTable.getSelectionIndices());\n                    ((Button)e.widget).setEnabled(false);\n                }\n            });\n            btnRemove.setEnabled(false);\n\n            fkTable.addSelectionListener(new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    btnRemove.setEnabled(fkTable.getSelectionIndex() >= 0);\n                }\n            });\n        }\n    }\n","date":"2019-09-13 20:48:41","endLine":349,"groupId":"1703","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"createForeignKeysPage","params":"(Compositeparent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/f6/060456a81b77fd0591af35acf5d36b8435c85c.src","preCode":"    private void createForeignKeysPage(Composite parent) {\n        Group group = UIUtils.createControlGroup(parent, \"Virtual Foreign Keys\", 1, GridData.FILL_BOTH, SWT.DEFAULT);\n\n        fkTable = new Table(group, SWT.FULL_SELECTION | SWT.BORDER);\n        fkTable.setLayoutData(new GridData(GridData.FILL_BOTH));\n        fkTable.setHeaderVisible(true);\n\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Ref Table\");\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Columns\");\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Ref Datasource\");\n\n        {\n            Composite buttonsPanel = UIUtils.createComposite(group, 2);\n            buttonsPanel.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_BEGINNING));\n\n            UIUtils.createDialogButton(buttonsPanel, \"Add\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityForeignKey virtualFK = EditForeignKeyPage.createVirtualForeignKey(vEntity);\n                    if (virtualFK != null) {\n                        createForeignKeyItem(fkTable, virtualFK);\n                    }\n                }\n            });\n\n            Button btnRemove = UIUtils.createDialogButton(buttonsPanel, \"Remove\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityForeignKey virtualFK = (DBVEntityForeignKey) fkTable.getSelection()[0].getData();\n                    if (!UIUtils.confirmAction(parent.getShell(),\n                        \"Delete virtual FK\",\n                        \"Are you sure you want to delete virtual foreign key '\" + virtualFK.getName() + \"'?\")) {\n                        return;\n                    }\n                    vEntity.removeForeignKey(virtualFK);\n                    fkTable.remove(fkTable.getSelectionIndices());\n                    ((Button)e.widget).setEnabled(false);\n                }\n            });\n            btnRemove.setEnabled(false);\n\n            fkTable.addSelectionListener(new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    btnRemove.setEnabled(fkTable.getSelectionIndex() >= 0);\n                }\n            });\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/editors/data/VirtualStructureEditor.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":301,"status":"M"}],"commitId":"b5beb11472a2b1214e404405c2db2ff26c7c3ae7","commitMessage":"@@@#6725 Virtual structure editor\n\n\nFormer-commit-id: 7acfad07c353da6696b3362dfed31531d2c5d9af","date":"2019-09-13 20:48:41","modifiedFileCount":"5","status":"M","submitter":"Serge Rider"},{"authorTime":"2019-10-11 21:14:29","codes":[{"authorDate":"2019-09-13 20:48:41","commitOrder":4,"curCode":"    private void createUniqueKeysPage(Composite parent) {\n        uniqueConstraint = vEntity.getBestIdentifier();\n        if (uniqueConstraint == null) {\n            return;\n        }\n        Group group = UIUtils.createControlGroup(parent, \"Virtual Unique Keys\", 1, GridData.FILL_BOTH, SWT.DEFAULT);\n\n        ukTable = new Table(group, SWT.FULL_SELECTION | SWT.BORDER);\n        ukTable.setLayoutData(new GridData(GridData.FILL_BOTH));\n        ukTable.setHeaderVisible(true);\n\n        UIUtils.createTableColumn(ukTable, SWT.LEFT, \"Key name\");\n        UIUtils.createTableColumn(ukTable, SWT.LEFT, \"Columns\");\n\n        {\n            Composite buttonsPanel = UIUtils.createComposite(group, 3);\n            buttonsPanel.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_BEGINNING));\n\n            Button btnAdd = UIUtils.createDialogButton(buttonsPanel, \"Add\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityConstraint newConstraint = new DBVEntityConstraint(vEntity, DBSEntityConstraintType.VIRTUAL_KEY, vEntity.getName() + \"_uk\");\n                    EditConstraintPage editPage = new EditConstraintPage(\"Edit unique key\", newConstraint);\n                    if (editPage.edit()) {\n                        changeConstraint(newConstraint, editPage);\n                        vEntity.addConstraint(newConstraint);\n                        createUniqueKeyItem(ukTable, newConstraint);\n                        vEntity.persistConfiguration();\n                    }\n                }\n            });\n\n            Button btnEdit = UIUtils.createDialogButton(buttonsPanel, \"Edit\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    TableItem ukItem = ukTable.getSelection()[0];\n                    DBVEntityConstraint virtualUK = (DBVEntityConstraint) ukItem.getData();\n                    EditConstraintPage editPage = new EditConstraintPage(\"Edit unique key\", virtualUK);\n                    if (editPage.edit()) {\n                        changeConstraint(virtualUK, editPage);\n                        ukItem.setText(0, DBUtils.getObjectFullName(virtualUK, DBPEvaluationContext.UI));\n                        ukItem.setText(1, virtualUK.getAttributes().stream().map(DBVEntityConstraintColumn::getAttributeName).collect(Collectors.joining(\",\")));\n                        vEntity.persistConfiguration();\n                    }\n                }\n            });\n            btnEdit.setEnabled(false);\n\n            Button btnRemove = UIUtils.createDialogButton(buttonsPanel, \"Remove\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityConstraint virtualUK = (DBVEntityConstraint) ukTable.getSelection()[0].getData();\n                    if (!UIUtils.confirmAction(parent.getShell(),\n                        \"Delete virtual unique key\",\n                        \"Are you sure you want to delete virtual unique key '\" + virtualUK.getName() + \"'?\")) {\n                        return;\n                    }\n                    vEntity.removeConstraint(virtualUK);\n                    ukTable.remove(ukTable.getSelectionIndices());\n                    vEntity.persistConfiguration();\n                }\n            });\n            btnRemove.setEnabled(false);\n\n            ukTable.addSelectionListener(new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    btnRemove.setEnabled(ukTable.getSelectionIndex() >= 0);\n                    btnEdit.setEnabled(ukTable.getSelectionIndex() >= 0);\n                }\n            });\n        }\n\n\r\n\r\n\r\n\r\n\r\n\n    }\n","date":"2019-09-13 20:48:41","endLine":282,"groupId":"17375","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"createUniqueKeysPage","params":"(Compositeparent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/f6/060456a81b77fd0591af35acf5d36b8435c85c.src","preCode":"    private void createUniqueKeysPage(Composite parent) {\n        uniqueConstraint = vEntity.getBestIdentifier();\n        if (uniqueConstraint == null) {\n            return;\n        }\n        Group group = UIUtils.createControlGroup(parent, \"Virtual Unique Keys\", 1, GridData.FILL_BOTH, SWT.DEFAULT);\n\n        ukTable = new Table(group, SWT.FULL_SELECTION | SWT.BORDER);\n        ukTable.setLayoutData(new GridData(GridData.FILL_BOTH));\n        ukTable.setHeaderVisible(true);\n\n        UIUtils.createTableColumn(ukTable, SWT.LEFT, \"Key name\");\n        UIUtils.createTableColumn(ukTable, SWT.LEFT, \"Columns\");\n\n        {\n            Composite buttonsPanel = UIUtils.createComposite(group, 3);\n            buttonsPanel.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_BEGINNING));\n\n            Button btnAdd = UIUtils.createDialogButton(buttonsPanel, \"Add\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityConstraint newConstraint = new DBVEntityConstraint(vEntity, DBSEntityConstraintType.VIRTUAL_KEY, vEntity.getName() + \"_uk\");\n                    EditConstraintPage editPage = new EditConstraintPage(\"Edit unique key\", newConstraint);\n                    if (editPage.edit()) {\n                        changeConstraint(newConstraint, editPage);\n                        vEntity.addConstraint(newConstraint);\n                        createUniqueKeyItem(ukTable, newConstraint);\n                        vEntity.persistConfiguration();\n                    }\n                }\n            });\n\n            Button btnEdit = UIUtils.createDialogButton(buttonsPanel, \"Edit\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    TableItem ukItem = ukTable.getSelection()[0];\n                    DBVEntityConstraint virtualUK = (DBVEntityConstraint) ukItem.getData();\n                    EditConstraintPage editPage = new EditConstraintPage(\"Edit unique key\", virtualUK);\n                    if (editPage.edit()) {\n                        changeConstraint(virtualUK, editPage);\n                        ukItem.setText(0, DBUtils.getObjectFullName(virtualUK, DBPEvaluationContext.UI));\n                        ukItem.setText(1, virtualUK.getAttributes().stream().map(DBVEntityConstraintColumn::getAttributeName).collect(Collectors.joining(\",\")));\n                        vEntity.persistConfiguration();\n                    }\n                }\n            });\n            btnEdit.setEnabled(false);\n\n            Button btnRemove = UIUtils.createDialogButton(buttonsPanel, \"Remove\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityConstraint virtualUK = (DBVEntityConstraint) ukTable.getSelection()[0].getData();\n                    if (!UIUtils.confirmAction(parent.getShell(),\n                        \"Delete virtual unique key\",\n                        \"Are you sure you want to delete virtual unique key '\" + virtualUK.getName() + \"'?\")) {\n                        return;\n                    }\n                    vEntity.removeConstraint(virtualUK);\n                    ukTable.remove(ukTable.getSelectionIndices());\n                    vEntity.persistConfiguration();\n                }\n            });\n            btnRemove.setEnabled(false);\n\n            ukTable.addSelectionListener(new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    btnRemove.setEnabled(ukTable.getSelectionIndex() >= 0);\n                    btnEdit.setEnabled(ukTable.getSelectionIndex() >= 0);\n                }\n            });\n        }\n\n\r\n\r\n\r\n\r\n\r\n\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/editors/data/VirtualStructureEditor.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":203,"status":"N"},{"authorDate":"2019-10-11 21:14:29","commitOrder":4,"curCode":"    private void createForeignKeysPage(Composite parent) {\n        Group group = UIUtils.createControlGroup(parent, \"Virtual Foreign Keys\", 1, GridData.FILL_BOTH, SWT.DEFAULT);\n\n        fkTable = new Table(group, SWT.FULL_SELECTION | SWT.BORDER);\n        fkTable.setLayoutData(new GridData(GridData.FILL_BOTH));\n        fkTable.setHeaderVisible(true);\n\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Target Table\");\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Columns\");\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Target Datasource\");\n\n        {\n            Composite buttonsPanel = UIUtils.createComposite(group, 2);\n            buttonsPanel.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_BEGINNING));\n\n            UIUtils.createDialogButton(buttonsPanel, \"Add\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityForeignKey virtualFK = EditForeignKeyPage.createVirtualForeignKey(vEntity);\n                    if (virtualFK != null) {\n                        createForeignKeyItem(fkTable, virtualFK, true);\n                    }\n                }\n            });\n\n            Button btnRemove = UIUtils.createDialogButton(buttonsPanel, \"Remove\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityForeignKey virtualFK = (DBVEntityForeignKey) fkTable.getSelection()[0].getData();\n                    if (!UIUtils.confirmAction(parent.getShell(),\n                        \"Delete virtual FK\",\n                        \"Are you sure you want to delete virtual foreign key '\" + virtualFK.getName() + \"'?\")) {\n                        return;\n                    }\n                    vEntity.removeForeignKey(virtualFK);\n                    fkTable.remove(fkTable.getSelectionIndices());\n                    ((Button)e.widget).setEnabled(false);\n                }\n            });\n            btnRemove.setEnabled(false);\n\n            fkTable.addSelectionListener(new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    btnRemove.setEnabled(fkTable.getSelectionIndex() >= 0);\n                }\n            });\n        }\n    }\n","date":"2019-10-11 21:14:29","endLine":349,"groupId":"543","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"createForeignKeysPage","params":"(Compositeparent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/49/07464d8b208f38a4a9ec5db7cba50dd3503473.src","preCode":"    private void createForeignKeysPage(Composite parent) {\n        Group group = UIUtils.createControlGroup(parent, \"Virtual Foreign Keys\", 1, GridData.FILL_BOTH, SWT.DEFAULT);\n\n        fkTable = new Table(group, SWT.FULL_SELECTION | SWT.BORDER);\n        fkTable.setLayoutData(new GridData(GridData.FILL_BOTH));\n        fkTable.setHeaderVisible(true);\n\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Target Table\");\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Columns\");\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Target Datasource\");\n\n        {\n            Composite buttonsPanel = UIUtils.createComposite(group, 2);\n            buttonsPanel.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_BEGINNING));\n\n            UIUtils.createDialogButton(buttonsPanel, \"Add\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityForeignKey virtualFK = EditForeignKeyPage.createVirtualForeignKey(vEntity);\n                    if (virtualFK != null) {\n                        createForeignKeyItem(fkTable, virtualFK);\n                    }\n                }\n            });\n\n            Button btnRemove = UIUtils.createDialogButton(buttonsPanel, \"Remove\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityForeignKey virtualFK = (DBVEntityForeignKey) fkTable.getSelection()[0].getData();\n                    if (!UIUtils.confirmAction(parent.getShell(),\n                        \"Delete virtual FK\",\n                        \"Are you sure you want to delete virtual foreign key '\" + virtualFK.getName() + \"'?\")) {\n                        return;\n                    }\n                    vEntity.removeForeignKey(virtualFK);\n                    fkTable.remove(fkTable.getSelectionIndices());\n                    ((Button)e.widget).setEnabled(false);\n                }\n            });\n            btnRemove.setEnabled(false);\n\n            fkTable.addSelectionListener(new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    btnRemove.setEnabled(fkTable.getSelectionIndex() >= 0);\n                }\n            });\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/editors/data/VirtualStructureEditor.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":301,"status":"M"}],"commitId":"c2a08dad776e9a0001d5b6723b82701cfe7e94f9","commitMessage":"@@@#6885 Object rename - update name in container cache\n\n\nFormer-commit-id: 6e7cfd21b24414670305617ab51d32914108e21e","date":"2019-10-11 21:14:29","modifiedFileCount":"7","status":"M","submitter":"Serge Rider"},{"authorTime":"2019-10-11 21:14:29","codes":[{"authorDate":"2020-04-11 23:16:46","commitOrder":5,"curCode":"    private void createUniqueKeysPage(Composite parent) {\n        uniqueConstraint = vEntity.getBestIdentifier();\n        if (uniqueConstraint == null) {\n            return;\n        }\n        Group group = UIUtils.createControlGroup(parent, \"Virtual Unique Keys\", 1, GridData.FILL_BOTH, SWT.DEFAULT);\n\n        ukTable = new Table(group, SWT.FULL_SELECTION | SWT.BORDER);\n        ukTable.setLayoutData(new GridData(GridData.FILL_BOTH));\n        ukTable.setHeaderVisible(true);\n\n        UIUtils.createTableColumn(ukTable, SWT.LEFT, \"Key name\");\n        UIUtils.createTableColumn(ukTable, SWT.LEFT, \"Columns\");\n\n        {\n            Composite buttonsPanel = UIUtils.createComposite(group, 3);\n            buttonsPanel.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_BEGINNING));\n\n            Button btnAdd = UIUtils.createDialogButton(buttonsPanel, \"Add\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityConstraint newConstraint = new DBVEntityConstraint(vEntity, DBSEntityConstraintType.VIRTUAL_KEY, vEntity.getName() + \"_uk\");\n                    EditConstraintPage editPage = new EditConstraintPage(\"Edit unique key\", newConstraint);\n                    if (editPage.edit()) {\n                        changeConstraint(newConstraint, editPage);\n                        vEntity.addConstraint(newConstraint);\n                        createUniqueKeyItem(ukTable, newConstraint);\n                        vEntity.persistConfiguration();\n                    }\n                }\n            });\n\n            SelectionAdapter ukEditListener = new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    TableItem ukItem = ukTable.getSelection()[0];\n                    DBVEntityConstraint virtualUK = (DBVEntityConstraint) ukItem.getData();\n                    EditConstraintPage editPage = new EditConstraintPage(\"Edit unique key\", virtualUK);\n                    if (editPage.edit()) {\n                        changeConstraint(virtualUK, editPage);\n                        ukItem.setText(0, DBUtils.getObjectFullName(virtualUK, DBPEvaluationContext.UI));\n                        ukItem.setText(1, getConstraintAttrNames(virtualUK));\n                        vEntity.persistConfiguration();\n                    }\n                }\n            };\n            Button btnEdit = UIUtils.createDialogButton(buttonsPanel, \"Edit\", ukEditListener);\n            btnEdit.setEnabled(false);\n\n            Button btnRemove = UIUtils.createDialogButton(buttonsPanel, \"Remove\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityConstraint virtualUK = (DBVEntityConstraint) ukTable.getSelection()[0].getData();\n                    if (!UIUtils.confirmAction(parent.getShell(),\n                        \"Delete virtual unique key\",\n                        \"Are you sure you want to delete virtual unique key '\" + virtualUK.getName() + \"'?\")) {\n                        return;\n                    }\n                    vEntity.removeConstraint(virtualUK);\n                    ukTable.remove(ukTable.getSelectionIndices());\n                    vEntity.persistConfiguration();\n                }\n            });\n            btnRemove.setEnabled(false);\n\n            ukTable.addSelectionListener(new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    btnRemove.setEnabled(ukTable.getSelectionIndex() >= 0);\n                    btnEdit.setEnabled(ukTable.getSelectionIndex() >= 0);\n                }\n\n                @Override\n                public void widgetDefaultSelected(SelectionEvent e) {\n                    ukEditListener.widgetSelected(e);\n                }\n            });\n        }\n    }\n","date":"2020-04-11 23:16:46","endLine":281,"groupId":"17375","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"createUniqueKeysPage","params":"(Compositeparent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/15/d8f5cdfab961b7634b82ab2535524c6d227aba.src","preCode":"    private void createUniqueKeysPage(Composite parent) {\n        uniqueConstraint = vEntity.getBestIdentifier();\n        if (uniqueConstraint == null) {\n            return;\n        }\n        Group group = UIUtils.createControlGroup(parent, \"Virtual Unique Keys\", 1, GridData.FILL_BOTH, SWT.DEFAULT);\n\n        ukTable = new Table(group, SWT.FULL_SELECTION | SWT.BORDER);\n        ukTable.setLayoutData(new GridData(GridData.FILL_BOTH));\n        ukTable.setHeaderVisible(true);\n\n        UIUtils.createTableColumn(ukTable, SWT.LEFT, \"Key name\");\n        UIUtils.createTableColumn(ukTable, SWT.LEFT, \"Columns\");\n\n        {\n            Composite buttonsPanel = UIUtils.createComposite(group, 3);\n            buttonsPanel.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_BEGINNING));\n\n            Button btnAdd = UIUtils.createDialogButton(buttonsPanel, \"Add\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityConstraint newConstraint = new DBVEntityConstraint(vEntity, DBSEntityConstraintType.VIRTUAL_KEY, vEntity.getName() + \"_uk\");\n                    EditConstraintPage editPage = new EditConstraintPage(\"Edit unique key\", newConstraint);\n                    if (editPage.edit()) {\n                        changeConstraint(newConstraint, editPage);\n                        vEntity.addConstraint(newConstraint);\n                        createUniqueKeyItem(ukTable, newConstraint);\n                        vEntity.persistConfiguration();\n                    }\n                }\n            });\n\n            Button btnEdit = UIUtils.createDialogButton(buttonsPanel, \"Edit\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    TableItem ukItem = ukTable.getSelection()[0];\n                    DBVEntityConstraint virtualUK = (DBVEntityConstraint) ukItem.getData();\n                    EditConstraintPage editPage = new EditConstraintPage(\"Edit unique key\", virtualUK);\n                    if (editPage.edit()) {\n                        changeConstraint(virtualUK, editPage);\n                        ukItem.setText(0, DBUtils.getObjectFullName(virtualUK, DBPEvaluationContext.UI));\n                        ukItem.setText(1, virtualUK.getAttributes().stream().map(DBVEntityConstraintColumn::getAttributeName).collect(Collectors.joining(\",\")));\n                        vEntity.persistConfiguration();\n                    }\n                }\n            });\n            btnEdit.setEnabled(false);\n\n            Button btnRemove = UIUtils.createDialogButton(buttonsPanel, \"Remove\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityConstraint virtualUK = (DBVEntityConstraint) ukTable.getSelection()[0].getData();\n                    if (!UIUtils.confirmAction(parent.getShell(),\n                        \"Delete virtual unique key\",\n                        \"Are you sure you want to delete virtual unique key '\" + virtualUK.getName() + \"'?\")) {\n                        return;\n                    }\n                    vEntity.removeConstraint(virtualUK);\n                    ukTable.remove(ukTable.getSelectionIndices());\n                    vEntity.persistConfiguration();\n                }\n            });\n            btnRemove.setEnabled(false);\n\n            ukTable.addSelectionListener(new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    btnRemove.setEnabled(ukTable.getSelectionIndex() >= 0);\n                    btnEdit.setEnabled(ukTable.getSelectionIndex() >= 0);\n                }\n            });\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/editors/data/VirtualStructureEditor.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":203,"status":"M"},{"authorDate":"2019-10-11 21:14:29","commitOrder":5,"curCode":"    private void createForeignKeysPage(Composite parent) {\n        Group group = UIUtils.createControlGroup(parent, \"Virtual Foreign Keys\", 1, GridData.FILL_BOTH, SWT.DEFAULT);\n\n        fkTable = new Table(group, SWT.FULL_SELECTION | SWT.BORDER);\n        fkTable.setLayoutData(new GridData(GridData.FILL_BOTH));\n        fkTable.setHeaderVisible(true);\n\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Target Table\");\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Columns\");\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Target Datasource\");\n\n        {\n            Composite buttonsPanel = UIUtils.createComposite(group, 2);\n            buttonsPanel.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_BEGINNING));\n\n            UIUtils.createDialogButton(buttonsPanel, \"Add\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityForeignKey virtualFK = EditForeignKeyPage.createVirtualForeignKey(vEntity);\n                    if (virtualFK != null) {\n                        createForeignKeyItem(fkTable, virtualFK, true);\n                    }\n                }\n            });\n\n            Button btnRemove = UIUtils.createDialogButton(buttonsPanel, \"Remove\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityForeignKey virtualFK = (DBVEntityForeignKey) fkTable.getSelection()[0].getData();\n                    if (!UIUtils.confirmAction(parent.getShell(),\n                        \"Delete virtual FK\",\n                        \"Are you sure you want to delete virtual foreign key '\" + virtualFK.getName() + \"'?\")) {\n                        return;\n                    }\n                    vEntity.removeForeignKey(virtualFK);\n                    fkTable.remove(fkTable.getSelectionIndices());\n                    ((Button)e.widget).setEnabled(false);\n                }\n            });\n            btnRemove.setEnabled(false);\n\n            fkTable.addSelectionListener(new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    btnRemove.setEnabled(fkTable.getSelectionIndex() >= 0);\n                }\n            });\n        }\n    }\n","date":"2019-10-11 21:14:29","endLine":349,"groupId":"543","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"createForeignKeysPage","params":"(Compositeparent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/49/07464d8b208f38a4a9ec5db7cba50dd3503473.src","preCode":"    private void createForeignKeysPage(Composite parent) {\n        Group group = UIUtils.createControlGroup(parent, \"Virtual Foreign Keys\", 1, GridData.FILL_BOTH, SWT.DEFAULT);\n\n        fkTable = new Table(group, SWT.FULL_SELECTION | SWT.BORDER);\n        fkTable.setLayoutData(new GridData(GridData.FILL_BOTH));\n        fkTable.setHeaderVisible(true);\n\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Target Table\");\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Columns\");\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Target Datasource\");\n\n        {\n            Composite buttonsPanel = UIUtils.createComposite(group, 2);\n            buttonsPanel.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_BEGINNING));\n\n            UIUtils.createDialogButton(buttonsPanel, \"Add\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityForeignKey virtualFK = EditForeignKeyPage.createVirtualForeignKey(vEntity);\n                    if (virtualFK != null) {\n                        createForeignKeyItem(fkTable, virtualFK, true);\n                    }\n                }\n            });\n\n            Button btnRemove = UIUtils.createDialogButton(buttonsPanel, \"Remove\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityForeignKey virtualFK = (DBVEntityForeignKey) fkTable.getSelection()[0].getData();\n                    if (!UIUtils.confirmAction(parent.getShell(),\n                        \"Delete virtual FK\",\n                        \"Are you sure you want to delete virtual foreign key '\" + virtualFK.getName() + \"'?\")) {\n                        return;\n                    }\n                    vEntity.removeForeignKey(virtualFK);\n                    fkTable.remove(fkTable.getSelectionIndices());\n                    ((Button)e.widget).setEnabled(false);\n                }\n            });\n            btnRemove.setEnabled(false);\n\n            fkTable.addSelectionListener(new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    btnRemove.setEnabled(fkTable.getSelectionIndex() >= 0);\n                }\n            });\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/editors/data/VirtualStructureEditor.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":301,"status":"N"}],"commitId":"1ef885eea0699d442142acc3d3f1265d3531358c","commitMessage":"@@@#8035 Virtual PK/UK edit fix (use all columns flag handle)\n\n\nFormer-commit-id: 8b98d720484f0f0cf49070a87f6b7bdbe62e2af5","date":"2020-04-11 23:16:46","modifiedFileCount":"2","status":"M","submitter":"serge-rider"},{"authorTime":"2020-04-20 15:35:49","codes":[{"authorDate":"2020-04-20 15:35:49","commitOrder":6,"curCode":"    private void createUniqueKeysPage(Composite parent) {\n        uniqueConstraint = vEntity.getBestIdentifier();\n        if (uniqueConstraint == null) {\n            return;\n        }\n        Group group = UIUtils.createControlGroup(parent, DataEditorsMessages.virtual_structure_editor_columns_group_unique_keys, 1, GridData.FILL_BOTH, SWT.DEFAULT);\n\n        ukTable = new Table(group, SWT.FULL_SELECTION | SWT.BORDER);\n        ukTable.setLayoutData(new GridData(GridData.FILL_BOTH));\n        ukTable.setHeaderVisible(true);\n\n        UIUtils.createTableColumn(ukTable, SWT.LEFT, DataEditorsMessages.virtual_structure_editor_table_column_key_name);\n        UIUtils.createTableColumn(ukTable, SWT.LEFT, DataEditorsMessages.virtual_structure_editor_table_column_columns);\n\n        {\n            Composite buttonsPanel = UIUtils.createComposite(group, 3);\n            buttonsPanel.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_BEGINNING));\n\n            Button btnAdd = UIUtils.createDialogButton(buttonsPanel, DataEditorsMessages.virtual_structure_editor_dialog_button_add, new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityConstraint newConstraint = new DBVEntityConstraint(vEntity, DBSEntityConstraintType.VIRTUAL_KEY, vEntity.getName() + \"_uk\");\n                    EditConstraintPage editPage = new EditConstraintPage(DataEditorsMessages.virtual_structure_editor_constraint_page_edit_key, newConstraint);\n                    if (editPage.edit()) {\n                        changeConstraint(newConstraint, editPage);\n                        vEntity.addConstraint(newConstraint);\n                        createUniqueKeyItem(ukTable, newConstraint);\n                        vEntity.persistConfiguration();\n                    }\n                }\n            });\n\n            SelectionAdapter ukEditListener = new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    TableItem ukItem = ukTable.getSelection()[0];\n                    DBVEntityConstraint virtualUK = (DBVEntityConstraint) ukItem.getData();\n                    EditConstraintPage editPage = new EditConstraintPage(DataEditorsMessages.virtual_structure_editor_constraint_page_edit_key, virtualUK);\n                    if (editPage.edit()) {\n                        changeConstraint(virtualUK, editPage);\n                        ukItem.setText(0, DBUtils.getObjectFullName(virtualUK, DBPEvaluationContext.UI));\n                        ukItem.setText(1, getConstraintAttrNames(virtualUK));\n                        vEntity.persistConfiguration();\n                    }\n                }\n            };\n            Button btnEdit = UIUtils.createDialogButton(buttonsPanel, DataEditorsMessages.virtual_structure_editor_dialog_button_edit, ukEditListener);\n            btnEdit.setEnabled(false);\n\n            Button btnRemove = UIUtils.createDialogButton(buttonsPanel, DataEditorsMessages.virtual_structure_editor_dialog_button_remove, new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityConstraint virtualUK = (DBVEntityConstraint) ukTable.getSelection()[0].getData();\n                    if (!UIUtils.confirmAction(parent.getShell(),\n                    \t\tDataEditorsMessages.virtual_structure_editor_confirm_action_delete_key,\n                        NLS.bind(DataEditorsMessages.virtual_structure_editor_confirm_action_question_delete, virtualUK.getName()))) {\n                        return;\n                    }\n                    vEntity.removeConstraint(virtualUK);\n                    ukTable.remove(ukTable.getSelectionIndices());\n                    vEntity.persistConfiguration();\n                }\n            });\n            btnRemove.setEnabled(false);\n\n            ukTable.addSelectionListener(new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    btnRemove.setEnabled(ukTable.getSelectionIndex() >= 0);\n                    btnEdit.setEnabled(ukTable.getSelectionIndex() >= 0);\n                }\n\n                @Override\n                public void widgetDefaultSelected(SelectionEvent e) {\n                    ukEditListener.widgetSelected(e);\n                }\n            });\n        }\n    }\n","date":"2020-04-20 15:35:49","endLine":281,"groupId":"17375","id":9,"instanceNumber":1,"isCurCommit":0,"methodName":"createUniqueKeysPage","params":"(Compositeparent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/76/3a6f11245816eb1086282f81223f6a0b345d5b.src","preCode":"    private void createUniqueKeysPage(Composite parent) {\n        uniqueConstraint = vEntity.getBestIdentifier();\n        if (uniqueConstraint == null) {\n            return;\n        }\n        Group group = UIUtils.createControlGroup(parent, \"Virtual Unique Keys\", 1, GridData.FILL_BOTH, SWT.DEFAULT);\n\n        ukTable = new Table(group, SWT.FULL_SELECTION | SWT.BORDER);\n        ukTable.setLayoutData(new GridData(GridData.FILL_BOTH));\n        ukTable.setHeaderVisible(true);\n\n        UIUtils.createTableColumn(ukTable, SWT.LEFT, \"Key name\");\n        UIUtils.createTableColumn(ukTable, SWT.LEFT, \"Columns\");\n\n        {\n            Composite buttonsPanel = UIUtils.createComposite(group, 3);\n            buttonsPanel.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_BEGINNING));\n\n            Button btnAdd = UIUtils.createDialogButton(buttonsPanel, \"Add\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityConstraint newConstraint = new DBVEntityConstraint(vEntity, DBSEntityConstraintType.VIRTUAL_KEY, vEntity.getName() + \"_uk\");\n                    EditConstraintPage editPage = new EditConstraintPage(\"Edit unique key\", newConstraint);\n                    if (editPage.edit()) {\n                        changeConstraint(newConstraint, editPage);\n                        vEntity.addConstraint(newConstraint);\n                        createUniqueKeyItem(ukTable, newConstraint);\n                        vEntity.persistConfiguration();\n                    }\n                }\n            });\n\n            SelectionAdapter ukEditListener = new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    TableItem ukItem = ukTable.getSelection()[0];\n                    DBVEntityConstraint virtualUK = (DBVEntityConstraint) ukItem.getData();\n                    EditConstraintPage editPage = new EditConstraintPage(\"Edit unique key\", virtualUK);\n                    if (editPage.edit()) {\n                        changeConstraint(virtualUK, editPage);\n                        ukItem.setText(0, DBUtils.getObjectFullName(virtualUK, DBPEvaluationContext.UI));\n                        ukItem.setText(1, getConstraintAttrNames(virtualUK));\n                        vEntity.persistConfiguration();\n                    }\n                }\n            };\n            Button btnEdit = UIUtils.createDialogButton(buttonsPanel, \"Edit\", ukEditListener);\n            btnEdit.setEnabled(false);\n\n            Button btnRemove = UIUtils.createDialogButton(buttonsPanel, \"Remove\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityConstraint virtualUK = (DBVEntityConstraint) ukTable.getSelection()[0].getData();\n                    if (!UIUtils.confirmAction(parent.getShell(),\n                        \"Delete virtual unique key\",\n                        \"Are you sure you want to delete virtual unique key '\" + virtualUK.getName() + \"'?\")) {\n                        return;\n                    }\n                    vEntity.removeConstraint(virtualUK);\n                    ukTable.remove(ukTable.getSelectionIndices());\n                    vEntity.persistConfiguration();\n                }\n            });\n            btnRemove.setEnabled(false);\n\n            ukTable.addSelectionListener(new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    btnRemove.setEnabled(ukTable.getSelectionIndex() >= 0);\n                    btnEdit.setEnabled(ukTable.getSelectionIndex() >= 0);\n                }\n\n                @Override\n                public void widgetDefaultSelected(SelectionEvent e) {\n                    ukEditListener.widgetSelected(e);\n                }\n            });\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/editors/data/VirtualStructureEditor.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":203,"status":"M"},{"authorDate":"2020-04-20 15:35:49","commitOrder":6,"curCode":"    private void createForeignKeysPage(Composite parent) {\n        Group group = UIUtils.createControlGroup(parent, DataEditorsMessages.virtual_structure_editor_control_group_label_foreign_key, 1, GridData.FILL_BOTH, SWT.DEFAULT);\n\n        fkTable = new Table(group, SWT.FULL_SELECTION | SWT.BORDER);\n        fkTable.setLayoutData(new GridData(GridData.FILL_BOTH));\n        fkTable.setHeaderVisible(true);\n\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, DataEditorsMessages.virtual_structure_editor_table_column_target_table);\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, DataEditorsMessages.virtual_structure_editor_table_column_columns);\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, DataEditorsMessages.virtual_structure_editor_table_column_datasource);\n\n        {\n            Composite buttonsPanel = UIUtils.createComposite(group, 2);\n            buttonsPanel.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_BEGINNING));\n\n            UIUtils.createDialogButton(buttonsPanel, DataEditorsMessages.virtual_structure_editor_dialog_button_add, new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityForeignKey virtualFK = EditForeignKeyPage.createVirtualForeignKey(vEntity);\n                    if (virtualFK != null) {\n                        createForeignKeyItem(fkTable, virtualFK, true);\n                    }\n                }\n            });\n\n            Button btnRemove = UIUtils.createDialogButton(buttonsPanel, DataEditorsMessages.virtual_structure_editor_dialog_button_remove, new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityForeignKey virtualFK = (DBVEntityForeignKey) fkTable.getSelection()[0].getData();\n                    if (!UIUtils.confirmAction(parent.getShell(),\n                    \t\tDataEditorsMessages.virtual_structure_editor_confirm_action_delete_fk,\n                        NLS.bind(DataEditorsMessages.virtual_structure_editor_confirm_action_question_delete_foreign, virtualFK.getName()))) {\n                        return;\n                    }\n                    vEntity.removeForeignKey(virtualFK);\n                    fkTable.remove(fkTable.getSelectionIndices());\n                    ((Button)e.widget).setEnabled(false);\n                }\n            });\n            btnRemove.setEnabled(false);\n\n            fkTable.addSelectionListener(new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    btnRemove.setEnabled(fkTable.getSelectionIndex() >= 0);\n                }\n            });\n        }\n    }\n","date":"2020-04-20 15:35:49","endLine":353,"groupId":"13262","id":10,"instanceNumber":2,"isCurCommit":0,"methodName":"createForeignKeysPage","params":"(Compositeparent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/76/3a6f11245816eb1086282f81223f6a0b345d5b.src","preCode":"    private void createForeignKeysPage(Composite parent) {\n        Group group = UIUtils.createControlGroup(parent, \"Virtual Foreign Keys\", 1, GridData.FILL_BOTH, SWT.DEFAULT);\n\n        fkTable = new Table(group, SWT.FULL_SELECTION | SWT.BORDER);\n        fkTable.setLayoutData(new GridData(GridData.FILL_BOTH));\n        fkTable.setHeaderVisible(true);\n\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Target Table\");\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Columns\");\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, \"Target Datasource\");\n\n        {\n            Composite buttonsPanel = UIUtils.createComposite(group, 2);\n            buttonsPanel.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_BEGINNING));\n\n            UIUtils.createDialogButton(buttonsPanel, \"Add\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityForeignKey virtualFK = EditForeignKeyPage.createVirtualForeignKey(vEntity);\n                    if (virtualFK != null) {\n                        createForeignKeyItem(fkTable, virtualFK, true);\n                    }\n                }\n            });\n\n            Button btnRemove = UIUtils.createDialogButton(buttonsPanel, \"Remove\", new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityForeignKey virtualFK = (DBVEntityForeignKey) fkTable.getSelection()[0].getData();\n                    if (!UIUtils.confirmAction(parent.getShell(),\n                        \"Delete virtual FK\",\n                        \"Are you sure you want to delete virtual foreign key '\" + virtualFK.getName() + \"'?\")) {\n                        return;\n                    }\n                    vEntity.removeForeignKey(virtualFK);\n                    fkTable.remove(fkTable.getSelectionIndices());\n                    ((Button)e.widget).setEnabled(false);\n                }\n            });\n            btnRemove.setEnabled(false);\n\n            fkTable.addSelectionListener(new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    btnRemove.setEnabled(fkTable.getSelectionIndex() >= 0);\n                }\n            });\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/editors/data/VirtualStructureEditor.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":305,"status":"M"}],"commitId":"8a955e1228e475ca8fe67946794b3320703eb57f","commitMessage":"@@@Merge pull request #8488 from dbeaver/localization#170\n\ndbeaver-corp/dbeaver-i18n#170\n\nFormer-commit-id: acddc13868fabe7fa15ce8a15627c0173f30d067","date":"2020-04-20 15:35:49","modifiedFileCount":"4","status":"M","submitter":"Serge Rider"},{"authorTime":"2020-12-29 12:33:39","codes":[{"authorDate":"2020-04-20 15:35:49","commitOrder":7,"curCode":"    private void createUniqueKeysPage(Composite parent) {\n        uniqueConstraint = vEntity.getBestIdentifier();\n        if (uniqueConstraint == null) {\n            return;\n        }\n        Group group = UIUtils.createControlGroup(parent, DataEditorsMessages.virtual_structure_editor_columns_group_unique_keys, 1, GridData.FILL_BOTH, SWT.DEFAULT);\n\n        ukTable = new Table(group, SWT.FULL_SELECTION | SWT.BORDER);\n        ukTable.setLayoutData(new GridData(GridData.FILL_BOTH));\n        ukTable.setHeaderVisible(true);\n\n        UIUtils.createTableColumn(ukTable, SWT.LEFT, DataEditorsMessages.virtual_structure_editor_table_column_key_name);\n        UIUtils.createTableColumn(ukTable, SWT.LEFT, DataEditorsMessages.virtual_structure_editor_table_column_columns);\n\n        {\n            Composite buttonsPanel = UIUtils.createComposite(group, 3);\n            buttonsPanel.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_BEGINNING));\n\n            Button btnAdd = UIUtils.createDialogButton(buttonsPanel, DataEditorsMessages.virtual_structure_editor_dialog_button_add, new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityConstraint newConstraint = new DBVEntityConstraint(vEntity, DBSEntityConstraintType.VIRTUAL_KEY, vEntity.getName() + \"_uk\");\n                    EditConstraintPage editPage = new EditConstraintPage(DataEditorsMessages.virtual_structure_editor_constraint_page_edit_key, newConstraint);\n                    if (editPage.edit()) {\n                        changeConstraint(newConstraint, editPage);\n                        vEntity.addConstraint(newConstraint);\n                        createUniqueKeyItem(ukTable, newConstraint);\n                        vEntity.persistConfiguration();\n                    }\n                }\n            });\n\n            SelectionAdapter ukEditListener = new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    TableItem ukItem = ukTable.getSelection()[0];\n                    DBVEntityConstraint virtualUK = (DBVEntityConstraint) ukItem.getData();\n                    EditConstraintPage editPage = new EditConstraintPage(DataEditorsMessages.virtual_structure_editor_constraint_page_edit_key, virtualUK);\n                    if (editPage.edit()) {\n                        changeConstraint(virtualUK, editPage);\n                        ukItem.setText(0, DBUtils.getObjectFullName(virtualUK, DBPEvaluationContext.UI));\n                        ukItem.setText(1, getConstraintAttrNames(virtualUK));\n                        vEntity.persistConfiguration();\n                    }\n                }\n            };\n            Button btnEdit = UIUtils.createDialogButton(buttonsPanel, DataEditorsMessages.virtual_structure_editor_dialog_button_edit, ukEditListener);\n            btnEdit.setEnabled(false);\n\n            Button btnRemove = UIUtils.createDialogButton(buttonsPanel, DataEditorsMessages.virtual_structure_editor_dialog_button_remove, new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityConstraint virtualUK = (DBVEntityConstraint) ukTable.getSelection()[0].getData();\n                    if (!UIUtils.confirmAction(parent.getShell(),\n                    \t\tDataEditorsMessages.virtual_structure_editor_confirm_action_delete_key,\n                        NLS.bind(DataEditorsMessages.virtual_structure_editor_confirm_action_question_delete, virtualUK.getName()))) {\n                        return;\n                    }\n                    vEntity.removeConstraint(virtualUK);\n                    ukTable.remove(ukTable.getSelectionIndices());\n                    vEntity.persistConfiguration();\n                }\n            });\n            btnRemove.setEnabled(false);\n\n            ukTable.addSelectionListener(new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    btnRemove.setEnabled(ukTable.getSelectionIndex() >= 0);\n                    btnEdit.setEnabled(ukTable.getSelectionIndex() >= 0);\n                }\n\n                @Override\n                public void widgetDefaultSelected(SelectionEvent e) {\n                    ukEditListener.widgetSelected(e);\n                }\n            });\n        }\n    }\n","date":"2020-04-20 15:35:49","endLine":281,"groupId":"10383","id":11,"instanceNumber":1,"isCurCommit":0,"methodName":"createUniqueKeysPage","params":"(Compositeparent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/76/3a6f11245816eb1086282f81223f6a0b345d5b.src","preCode":"    private void createUniqueKeysPage(Composite parent) {\n        uniqueConstraint = vEntity.getBestIdentifier();\n        if (uniqueConstraint == null) {\n            return;\n        }\n        Group group = UIUtils.createControlGroup(parent, DataEditorsMessages.virtual_structure_editor_columns_group_unique_keys, 1, GridData.FILL_BOTH, SWT.DEFAULT);\n\n        ukTable = new Table(group, SWT.FULL_SELECTION | SWT.BORDER);\n        ukTable.setLayoutData(new GridData(GridData.FILL_BOTH));\n        ukTable.setHeaderVisible(true);\n\n        UIUtils.createTableColumn(ukTable, SWT.LEFT, DataEditorsMessages.virtual_structure_editor_table_column_key_name);\n        UIUtils.createTableColumn(ukTable, SWT.LEFT, DataEditorsMessages.virtual_structure_editor_table_column_columns);\n\n        {\n            Composite buttonsPanel = UIUtils.createComposite(group, 3);\n            buttonsPanel.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_BEGINNING));\n\n            Button btnAdd = UIUtils.createDialogButton(buttonsPanel, DataEditorsMessages.virtual_structure_editor_dialog_button_add, new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityConstraint newConstraint = new DBVEntityConstraint(vEntity, DBSEntityConstraintType.VIRTUAL_KEY, vEntity.getName() + \"_uk\");\n                    EditConstraintPage editPage = new EditConstraintPage(DataEditorsMessages.virtual_structure_editor_constraint_page_edit_key, newConstraint);\n                    if (editPage.edit()) {\n                        changeConstraint(newConstraint, editPage);\n                        vEntity.addConstraint(newConstraint);\n                        createUniqueKeyItem(ukTable, newConstraint);\n                        vEntity.persistConfiguration();\n                    }\n                }\n            });\n\n            SelectionAdapter ukEditListener = new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    TableItem ukItem = ukTable.getSelection()[0];\n                    DBVEntityConstraint virtualUK = (DBVEntityConstraint) ukItem.getData();\n                    EditConstraintPage editPage = new EditConstraintPage(DataEditorsMessages.virtual_structure_editor_constraint_page_edit_key, virtualUK);\n                    if (editPage.edit()) {\n                        changeConstraint(virtualUK, editPage);\n                        ukItem.setText(0, DBUtils.getObjectFullName(virtualUK, DBPEvaluationContext.UI));\n                        ukItem.setText(1, getConstraintAttrNames(virtualUK));\n                        vEntity.persistConfiguration();\n                    }\n                }\n            };\n            Button btnEdit = UIUtils.createDialogButton(buttonsPanel, DataEditorsMessages.virtual_structure_editor_dialog_button_edit, ukEditListener);\n            btnEdit.setEnabled(false);\n\n            Button btnRemove = UIUtils.createDialogButton(buttonsPanel, DataEditorsMessages.virtual_structure_editor_dialog_button_remove, new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityConstraint virtualUK = (DBVEntityConstraint) ukTable.getSelection()[0].getData();\n                    if (!UIUtils.confirmAction(parent.getShell(),\n                    \t\tDataEditorsMessages.virtual_structure_editor_confirm_action_delete_key,\n                        NLS.bind(DataEditorsMessages.virtual_structure_editor_confirm_action_question_delete, virtualUK.getName()))) {\n                        return;\n                    }\n                    vEntity.removeConstraint(virtualUK);\n                    ukTable.remove(ukTable.getSelectionIndices());\n                    vEntity.persistConfiguration();\n                }\n            });\n            btnRemove.setEnabled(false);\n\n            ukTable.addSelectionListener(new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    btnRemove.setEnabled(ukTable.getSelectionIndex() >= 0);\n                    btnEdit.setEnabled(ukTable.getSelectionIndex() >= 0);\n                }\n\n                @Override\n                public void widgetDefaultSelected(SelectionEvent e) {\n                    ukEditListener.widgetSelected(e);\n                }\n            });\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/editors/data/VirtualStructureEditor.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":203,"status":"N"},{"authorDate":"2020-12-29 12:33:39","commitOrder":7,"curCode":"    private void createForeignKeysPage(Composite parent) {\n        Group group = UIUtils.createControlGroup(parent, DataEditorsMessages.virtual_structure_editor_control_group_label_foreign_key, 1, GridData.FILL_BOTH, SWT.DEFAULT);\n\n        fkTable = new Table(group, SWT.FULL_SELECTION | SWT.BORDER);\n        fkTable.setLayoutData(new GridData(GridData.FILL_BOTH));\n        fkTable.setHeaderVisible(true);\n\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, DataEditorsMessages.virtual_structure_editor_table_column_target_table);\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, DataEditorsMessages.virtual_structure_editor_table_column_columns);\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, DataEditorsMessages.virtual_structure_editor_table_column_datasource);\n\n        {\n            Composite buttonsPanel = UIUtils.createComposite(group, 2);\n            buttonsPanel.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_BEGINNING));\n\n            UIUtils.createDialogButton(buttonsPanel, DataEditorsMessages.virtual_structure_editor_dialog_button_add, new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityForeignKey virtualFK = EditForeignKeyPage.createVirtualForeignKey(vEntity);\n                    if (virtualFK != null) {\n                        createForeignKeyItem(fkTable, virtualFK, true);\n                        vEntity.persistConfiguration();\n                    }\n                }\n            });\n\n            Button btnRemove = UIUtils.createDialogButton(buttonsPanel, DataEditorsMessages.virtual_structure_editor_dialog_button_remove, new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityForeignKey virtualFK = (DBVEntityForeignKey) fkTable.getSelection()[0].getData();\n                    if (!UIUtils.confirmAction(parent.getShell(),\n                    \t\tDataEditorsMessages.virtual_structure_editor_confirm_action_delete_fk,\n                        NLS.bind(DataEditorsMessages.virtual_structure_editor_confirm_action_question_delete_foreign, virtualFK.getName()))) {\n                        return;\n                    }\n                    vEntity.removeForeignKey(virtualFK);\n                    fkTable.remove(fkTable.getSelectionIndices());\n                    ((Button)e.widget).setEnabled(false);\n                    vEntity.persistConfiguration();\n                }\n            });\n            btnRemove.setEnabled(false);\n\n            fkTable.addSelectionListener(new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    btnRemove.setEnabled(fkTable.getSelectionIndex() >= 0);\n                }\n            });\n        }\n    }\n","date":"2020-12-29 12:33:39","endLine":355,"groupId":"10383","id":12,"instanceNumber":2,"isCurCommit":0,"methodName":"createForeignKeysPage","params":"(Compositeparent)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/18/549ecb832972f9cf9da8929c94a6114fd89303.src","preCode":"    private void createForeignKeysPage(Composite parent) {\n        Group group = UIUtils.createControlGroup(parent, DataEditorsMessages.virtual_structure_editor_control_group_label_foreign_key, 1, GridData.FILL_BOTH, SWT.DEFAULT);\n\n        fkTable = new Table(group, SWT.FULL_SELECTION | SWT.BORDER);\n        fkTable.setLayoutData(new GridData(GridData.FILL_BOTH));\n        fkTable.setHeaderVisible(true);\n\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, DataEditorsMessages.virtual_structure_editor_table_column_target_table);\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, DataEditorsMessages.virtual_structure_editor_table_column_columns);\n        UIUtils.createTableColumn(fkTable, SWT.LEFT, DataEditorsMessages.virtual_structure_editor_table_column_datasource);\n\n        {\n            Composite buttonsPanel = UIUtils.createComposite(group, 2);\n            buttonsPanel.setLayoutData(new GridData(GridData.HORIZONTAL_ALIGN_BEGINNING));\n\n            UIUtils.createDialogButton(buttonsPanel, DataEditorsMessages.virtual_structure_editor_dialog_button_add, new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityForeignKey virtualFK = EditForeignKeyPage.createVirtualForeignKey(vEntity);\n                    if (virtualFK != null) {\n                        createForeignKeyItem(fkTable, virtualFK, true);\n                    }\n                }\n            });\n\n            Button btnRemove = UIUtils.createDialogButton(buttonsPanel, DataEditorsMessages.virtual_structure_editor_dialog_button_remove, new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    DBVEntityForeignKey virtualFK = (DBVEntityForeignKey) fkTable.getSelection()[0].getData();\n                    if (!UIUtils.confirmAction(parent.getShell(),\n                    \t\tDataEditorsMessages.virtual_structure_editor_confirm_action_delete_fk,\n                        NLS.bind(DataEditorsMessages.virtual_structure_editor_confirm_action_question_delete_foreign, virtualFK.getName()))) {\n                        return;\n                    }\n                    vEntity.removeForeignKey(virtualFK);\n                    fkTable.remove(fkTable.getSelectionIndices());\n                    ((Button)e.widget).setEnabled(false);\n                }\n            });\n            btnRemove.setEnabled(false);\n\n            fkTable.addSelectionListener(new SelectionAdapter() {\n                @Override\n                public void widgetSelected(SelectionEvent e) {\n                    btnRemove.setEnabled(fkTable.getSelectionIndex() >= 0);\n                }\n            });\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/editors/data/VirtualStructureEditor.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":305,"status":"M"}],"commitId":"3834aa13656b624511b89a345ece791f38bbf808","commitMessage":"@@@#10681 Virtual FK create/delete: persist config\n\n\nFormer-commit-id: d22ebdf015e7242fc40ebceef32669d4735817a6","date":"2020-12-29 12:33:39","modifiedFileCount":"1","status":"M","submitter":"serge-rider"}]
