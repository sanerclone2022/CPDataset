[{"authorTime":"2018-11-11 06:27:22","codes":[{"authorDate":"2019-01-12 18:15:27","commitOrder":2,"curCode":"    protected void createOrReplaceTriggerQuery(List<DBEPersistAction> actions, SQLServerTableTrigger trigger) {\n        DBSObject defaultDatabase = trigger.getDataSource().getDefaultObject();\n        if (defaultDatabase != trigger.getTable().getDatabase()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current database\", \"USE \" + DBUtils.getQuotedIdentifier(trigger.getTable().getDatabase()), false)); \r\n        }\n\n        actions.add(new SQLDatabasePersistAction(\"Create trigger\",\n            trigger.getBody(), true)); \r\n\n        if (defaultDatabase != trigger.getTable().getDatabase()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current database \", \"USE \" + DBUtils.getQuotedIdentifier(defaultDatabase), false)); \r\n        }\n    }\n","date":"2019-01-12 18:15:27","endLine":74,"groupId":"13540","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"createOrReplaceTriggerQuery","params":"(List<DBEPersistAction>actions@SQLServerTableTriggertrigger)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/0c/06be135a1e136e1d7a961316203f155ebbc92b.src","preCode":"    protected void createOrReplaceTriggerQuery(List<DBEPersistAction> actions, SQLServerTableTrigger trigger) {\n        DBSObject defaultDatabase = trigger.getDataSource().getDefaultObject();\n        if (defaultDatabase != trigger.getTable().getDatabase()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current database\", \"USE \" + DBUtils.getQuotedIdentifier(trigger.getTable().getDatabase()), false)); \r\n        }\n\n        actions.add(new SQLDatabasePersistAction(\"Create trigger\",\n            trigger.getBody(), true)); \r\n\n        if (defaultDatabase != trigger.getTable().getDatabase()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current database \", \"USE \" + DBUtils.getQuotedIdentifier(defaultDatabase), false)); \r\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.mssql/src/org/jkiss/dbeaver/ext/mssql/edit/SQLServerTableTriggerManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":62,"status":"B"},{"authorDate":"2018-11-11 06:27:22","commitOrder":2,"curCode":"    protected void addObjectDeleteActions(List<DBEPersistAction> actions, ObjectDeleteCommand command, Map<String, Object> options) {\n        SQLServerGenericTrigger trigger = command.getObject();\n        DBSObject defaultDatabase = trigger.getDataSource().getDefaultObject();\n        if (defaultDatabase != trigger.getTable().getCatalog()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current database\", \"USE \" + DBUtils.getQuotedIdentifier(trigger.getTable().getCatalog()), false)); \r\n        }\n\n        super.addObjectDeleteActions(actions, command, options);\n\n        if (defaultDatabase != trigger.getTable().getCatalog()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current schema \", \"USE \" + DBUtils.getQuotedIdentifier(defaultDatabase), false)); \r\n        }\n    }\n","date":"2018-11-11 06:27:22","endLine":81,"groupId":"13915","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"addObjectDeleteActions","params":"(List<DBEPersistAction>actions@ObjectDeleteCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/fa/82fe1f87515562fbb7339aa1695275ab6ee618.src","preCode":"    protected void addObjectDeleteActions(List<DBEPersistAction> actions, ObjectDeleteCommand command, Map<String, Object> options) {\n        SQLServerGenericTrigger trigger = command.getObject();\n        DBSObject defaultDatabase = trigger.getDataSource().getDefaultObject();\n        if (defaultDatabase != trigger.getTable().getCatalog()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current database\", \"USE \" + DBUtils.getQuotedIdentifier(trigger.getTable().getCatalog()), false)); \r\n        }\n\n        super.addObjectDeleteActions(actions, command, options);\n\n        if (defaultDatabase != trigger.getTable().getCatalog()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current schema \", \"USE \" + DBUtils.getQuotedIdentifier(defaultDatabase), false)); \r\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.mssql/src/org/jkiss/dbeaver/ext/mssql/edit/generic/SQLServerGenericTriggerManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":69,"status":"NB"}],"commitId":"9ef97fa114a107274904920ae971a637ec93de0b","commitMessage":"@@@#4983 SQL Server: trigger manager\n\n\nFormer-commit-id: d0b0f7ea7bb5f2003c8d01dc12ef0970c4e14595","date":"2019-01-12 18:15:27","modifiedFileCount":"2","status":"M","submitter":"serge-rider"},{"authorTime":"2018-11-11 06:27:22","codes":[{"authorDate":"2019-08-07 17:18:28","commitOrder":3,"curCode":"    protected void createOrReplaceTriggerQuery(List<DBEPersistAction> actions, SQLServerTableTrigger trigger, boolean create) {\n        DBSObject defaultDatabase = trigger.getDataSource().getDefaultObject();\n        if (defaultDatabase != trigger.getTable().getDatabase()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current database\", \"USE \" + DBUtils.getQuotedIdentifier(trigger.getTable().getDatabase()), false)); \r\n        }\n\n        if (create) {\n            actions.add(new SQLDatabasePersistAction(\"Create trigger\", trigger.getBody(), true)); \r\n        } else {\n            actions.add(new SQLDatabasePersistAction(\"Alter trigger\",\n                SQLServerUtils.changeCreateToAlterDDL(trigger.getDataSource().getSQLDialect(), trigger.getBody()), true)); \r\n        }\n\n        if (defaultDatabase != trigger.getTable().getDatabase()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current database \", \"USE \" + DBUtils.getQuotedIdentifier(defaultDatabase), false)); \r\n        }\n    }\n","date":"2019-08-07 17:18:28","endLine":80,"groupId":"17194","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"createOrReplaceTriggerQuery","params":"(List<DBEPersistAction>actions@SQLServerTableTriggertrigger@booleancreate)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/9b/dcd2669fb46d674562d4602a73c14189e562fb.src","preCode":"    protected void createOrReplaceTriggerQuery(List<DBEPersistAction> actions, SQLServerTableTrigger trigger) {\n        DBSObject defaultDatabase = trigger.getDataSource().getDefaultObject();\n        if (defaultDatabase != trigger.getTable().getDatabase()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current database\", \"USE \" + DBUtils.getQuotedIdentifier(trigger.getTable().getDatabase()), false)); \r\n        }\n\n        actions.add(new SQLDatabasePersistAction(\"Create trigger\",\n            trigger.getBody(), true)); \r\n\n        if (defaultDatabase != trigger.getTable().getDatabase()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current database \", \"USE \" + DBUtils.getQuotedIdentifier(defaultDatabase), false)); \r\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.mssql/src/org/jkiss/dbeaver/ext/mssql/edit/SQLServerTableTriggerManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":64,"status":"M"},{"authorDate":"2018-11-11 06:27:22","commitOrder":3,"curCode":"    protected void addObjectDeleteActions(List<DBEPersistAction> actions, ObjectDeleteCommand command, Map<String, Object> options) {\n        SQLServerGenericTrigger trigger = command.getObject();\n        DBSObject defaultDatabase = trigger.getDataSource().getDefaultObject();\n        if (defaultDatabase != trigger.getTable().getCatalog()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current database\", \"USE \" + DBUtils.getQuotedIdentifier(trigger.getTable().getCatalog()), false)); \r\n        }\n\n        super.addObjectDeleteActions(actions, command, options);\n\n        if (defaultDatabase != trigger.getTable().getCatalog()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current schema \", \"USE \" + DBUtils.getQuotedIdentifier(defaultDatabase), false)); \r\n        }\n    }\n","date":"2018-11-11 06:27:22","endLine":81,"groupId":"13915","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"addObjectDeleteActions","params":"(List<DBEPersistAction>actions@ObjectDeleteCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/fa/82fe1f87515562fbb7339aa1695275ab6ee618.src","preCode":"    protected void addObjectDeleteActions(List<DBEPersistAction> actions, ObjectDeleteCommand command, Map<String, Object> options) {\n        SQLServerGenericTrigger trigger = command.getObject();\n        DBSObject defaultDatabase = trigger.getDataSource().getDefaultObject();\n        if (defaultDatabase != trigger.getTable().getCatalog()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current database\", \"USE \" + DBUtils.getQuotedIdentifier(trigger.getTable().getCatalog()), false)); \r\n        }\n\n        super.addObjectDeleteActions(actions, command, options);\n\n        if (defaultDatabase != trigger.getTable().getCatalog()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current schema \", \"USE \" + DBUtils.getQuotedIdentifier(defaultDatabase), false)); \r\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.mssql/src/org/jkiss/dbeaver/ext/mssql/edit/generic/SQLServerGenericTriggerManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":69,"status":"N"}],"commitId":"68d6b326cc907ca51f2a082be4dfa0f795300c96","commitMessage":"@@@SQL Server & PG model refactoring (extract UI)\n\n\nFormer-commit-id: 10dde7954f22c87c4711bd41832e0f49198acef7","date":"2019-08-07 17:18:28","modifiedFileCount":"2","status":"M","submitter":"Serge Rider"},{"authorTime":"2019-12-14 19:22:29","codes":[{"authorDate":"2019-12-14 19:22:29","commitOrder":4,"curCode":"    protected void createOrReplaceTriggerQuery(DBRProgressMonitor monitor, List<DBEPersistAction> actions, SQLServerTableTrigger trigger, boolean create) {\n        DBSObject defaultDatabase = trigger.getDataSource().getDefaultDatabase(monitor);\n        if (defaultDatabase != trigger.getTable().getDatabase()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current database\", \"USE \" + DBUtils.getQuotedIdentifier(trigger.getTable().getDatabase()), false)); \r\n        }\n\n        if (create) {\n            actions.add(new SQLDatabasePersistAction(\"Create trigger\", trigger.getBody(), true)); \r\n        } else {\n            actions.add(new SQLDatabasePersistAction(\"Alter trigger\",\n                SQLServerUtils.changeCreateToAlterDDL(trigger.getDataSource().getSQLDialect(), trigger.getBody()), true)); \r\n        }\n\n        if (defaultDatabase != trigger.getTable().getDatabase()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current database \", \"USE \" + DBUtils.getQuotedIdentifier(defaultDatabase), false)); \r\n        }\n    }\n","date":"2019-12-14 19:22:29","endLine":80,"groupId":"17194","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"createOrReplaceTriggerQuery","params":"(DBRProgressMonitormonitor@List<DBEPersistAction>actions@SQLServerTableTriggertrigger@booleancreate)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/b6/063b0022ad13484d4e83aa8e7f06aa06286334.src","preCode":"    protected void createOrReplaceTriggerQuery(List<DBEPersistAction> actions, SQLServerTableTrigger trigger, boolean create) {\n        DBSObject defaultDatabase = trigger.getDataSource().getDefaultObject();\n        if (defaultDatabase != trigger.getTable().getDatabase()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current database\", \"USE \" + DBUtils.getQuotedIdentifier(trigger.getTable().getDatabase()), false)); \r\n        }\n\n        if (create) {\n            actions.add(new SQLDatabasePersistAction(\"Create trigger\", trigger.getBody(), true)); \r\n        } else {\n            actions.add(new SQLDatabasePersistAction(\"Alter trigger\",\n                SQLServerUtils.changeCreateToAlterDDL(trigger.getDataSource().getSQLDialect(), trigger.getBody()), true)); \r\n        }\n\n        if (defaultDatabase != trigger.getTable().getDatabase()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current database \", \"USE \" + DBUtils.getQuotedIdentifier(defaultDatabase), false)); \r\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.mssql/src/org/jkiss/dbeaver/ext/mssql/edit/SQLServerTableTriggerManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":64,"status":"M"},{"authorDate":"2019-12-14 19:22:29","commitOrder":4,"curCode":"    protected void addObjectDeleteActions(DBRProgressMonitor monitor, List<DBEPersistAction> actions, ObjectDeleteCommand command, Map<String, Object> options) {\n        SQLServerGenericTrigger trigger = command.getObject();\n        DBSObject defaultDatabase = DBUtils.getDefaultContext(trigger.getDataSource(), true).getContextDefaults().getDefaultCatalog();\n        if (defaultDatabase != trigger.getTable().getCatalog()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current database\", \"USE \" + DBUtils.getQuotedIdentifier(trigger.getTable().getCatalog()), false)); \r\n        }\n\n        super.addObjectDeleteActions(monitor, actions, command, options);\n\n        if (defaultDatabase != trigger.getTable().getCatalog()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current schema \", \"USE \" + DBUtils.getQuotedIdentifier(defaultDatabase), false)); \r\n        }\n    }\n","date":"2019-12-14 19:22:29","endLine":81,"groupId":"13915","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"addObjectDeleteActions","params":"(DBRProgressMonitormonitor@List<DBEPersistAction>actions@ObjectDeleteCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/58/b6a85d8d241199154fbaae11f4cf1d713a35af.src","preCode":"    protected void addObjectDeleteActions(List<DBEPersistAction> actions, ObjectDeleteCommand command, Map<String, Object> options) {\n        SQLServerGenericTrigger trigger = command.getObject();\n        DBSObject defaultDatabase = trigger.getDataSource().getDefaultObject();\n        if (defaultDatabase != trigger.getTable().getCatalog()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current database\", \"USE \" + DBUtils.getQuotedIdentifier(trigger.getTable().getCatalog()), false)); \r\n        }\n\n        super.addObjectDeleteActions(actions, command, options);\n\n        if (defaultDatabase != trigger.getTable().getCatalog()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current schema \", \"USE \" + DBUtils.getQuotedIdentifier(defaultDatabase), false)); \r\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.mssql/src/org/jkiss/dbeaver/ext/mssql/edit/generic/SQLServerGenericTriggerManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":69,"status":"M"}],"commitId":"76a3766a90da4be088984efb29f03f378afbf684","commitMessage":"@@@#5172 SQL Server model. SQL completion fix (use new model). Object editor model refactoring.\n\n\nFormer-commit-id: cbce7d3db1845ea37dec53c38f7ca97e1c052f4e","date":"2019-12-14 19:22:29","modifiedFileCount":"72","status":"M","submitter":"Serge Rider"},{"authorTime":"2020-01-13 04:05:09","codes":[{"authorDate":"2020-01-13 04:05:09","commitOrder":5,"curCode":"    protected void createOrReplaceTriggerQuery(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actions, SQLServerTableTrigger trigger, boolean create) {\n        DBSObject defaultDatabase = ((SQLServerExecutionContext)executionContext).getDefaultCatalog();\n        if (defaultDatabase != trigger.getTable().getDatabase()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current database\", \"USE \" + DBUtils.getQuotedIdentifier(trigger.getTable().getDatabase()), false)); \r\n        }\n\n        if (create) {\n            actions.add(new SQLDatabasePersistAction(\"Create trigger\", trigger.getBody(), true)); \r\n        } else {\n            actions.add(new SQLDatabasePersistAction(\"Alter trigger\",\n                SQLServerUtils.changeCreateToAlterDDL(trigger.getDataSource().getSQLDialect(), trigger.getBody()), true)); \r\n        }\n\n        if (defaultDatabase != trigger.getTable().getDatabase()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current database \", \"USE \" + DBUtils.getQuotedIdentifier(defaultDatabase), false)); \r\n        }\n    }\n","date":"2020-01-13 04:05:09","endLine":82,"groupId":"10826","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"createOrReplaceTriggerQuery","params":"(DBRProgressMonitormonitor@DBCExecutionContextexecutionContext@List<DBEPersistAction>actions@SQLServerTableTriggertrigger@booleancreate)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/e7/6cd04f8e514596e8852bc9ec4c623d852da2db.src","preCode":"    protected void createOrReplaceTriggerQuery(DBRProgressMonitor monitor, List<DBEPersistAction> actions, SQLServerTableTrigger trigger, boolean create) {\n        DBSObject defaultDatabase = trigger.getDataSource().getDefaultDatabase(monitor);\n        if (defaultDatabase != trigger.getTable().getDatabase()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current database\", \"USE \" + DBUtils.getQuotedIdentifier(trigger.getTable().getDatabase()), false)); \r\n        }\n\n        if (create) {\n            actions.add(new SQLDatabasePersistAction(\"Create trigger\", trigger.getBody(), true)); \r\n        } else {\n            actions.add(new SQLDatabasePersistAction(\"Alter trigger\",\n                SQLServerUtils.changeCreateToAlterDDL(trigger.getDataSource().getSQLDialect(), trigger.getBody()), true)); \r\n        }\n\n        if (defaultDatabase != trigger.getTable().getDatabase()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current database \", \"USE \" + DBUtils.getQuotedIdentifier(defaultDatabase), false)); \r\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.mssql/src/org/jkiss/dbeaver/ext/mssql/edit/SQLServerTableTriggerManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":66,"status":"M"},{"authorDate":"2020-01-13 04:05:09","commitOrder":5,"curCode":"    protected void addObjectDeleteActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actions, ObjectDeleteCommand command, Map<String, Object> options) {\n        SQLServerGenericTrigger trigger = command.getObject();\n        DBSObject defaultDatabase = DBUtils.getDefaultContext(trigger.getDataSource(), true).getContextDefaults().getDefaultCatalog();\n        if (defaultDatabase != trigger.getTable().getCatalog()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current database\", \"USE \" + DBUtils.getQuotedIdentifier(trigger.getTable().getCatalog()), false)); \r\n        }\n\n        super.addObjectDeleteActions(monitor, executionContext, actions, command, options);\n\n        if (defaultDatabase != trigger.getTable().getCatalog()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current schema \", \"USE \" + DBUtils.getQuotedIdentifier(defaultDatabase), false)); \r\n        }\n    }\n","date":"2020-01-13 04:05:09","endLine":82,"groupId":"10826","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"addObjectDeleteActions","params":"(DBRProgressMonitormonitor@DBCExecutionContextexecutionContext@List<DBEPersistAction>actions@ObjectDeleteCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/d7/61eb32beb97d7c635a091ef84b2682b8b12c32.src","preCode":"    protected void addObjectDeleteActions(DBRProgressMonitor monitor, List<DBEPersistAction> actions, ObjectDeleteCommand command, Map<String, Object> options) {\n        SQLServerGenericTrigger trigger = command.getObject();\n        DBSObject defaultDatabase = DBUtils.getDefaultContext(trigger.getDataSource(), true).getContextDefaults().getDefaultCatalog();\n        if (defaultDatabase != trigger.getTable().getCatalog()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current database\", \"USE \" + DBUtils.getQuotedIdentifier(trigger.getTable().getCatalog()), false)); \r\n        }\n\n        super.addObjectDeleteActions(monitor, actions, command, options);\n\n        if (defaultDatabase != trigger.getTable().getCatalog()) {\n            actions.add(new SQLDatabasePersistAction(\"Set current schema \", \"USE \" + DBUtils.getQuotedIdentifier(defaultDatabase), false)); \r\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.mssql/src/org/jkiss/dbeaver/ext/mssql/edit/generic/SQLServerGenericTriggerManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":70,"status":"M"}],"commitId":"ea43e170ae31b314627af8f5035dc13373eefe5f","commitMessage":"@@@Merge remote-tracking branch 'origin/devel' into devel\n\n\nFormer-commit-id: b8a88ef308f898dd3c5f78540f0e556e77b18cad","date":"2020-01-13 04:05:09","modifiedFileCount":"136","status":"M","submitter":"serge-rider"}]
