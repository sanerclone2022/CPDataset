[{"authorTime":"2019-06-11 20:23:01","codes":[{"authorDate":"2018-07-23 15:41:36","commitOrder":4,"curCode":"    public String getViewDDL(DBRProgressMonitor monitor, GenericTable sourceObject, Map<String, Object> options) throws DBException {\n        GenericDataSource dataSource = sourceObject.getDataSource();\n        try (JDBCSession session = DBUtils.openMetaSession(monitor, sourceObject, \"Read HANA view source\")) {\n            try (JDBCPreparedStatement dbStat = session.prepareStatement(\n                \"SELECT DEFINITION\\n\" +\n                    \"FROM SYS.VIEWS\\n\" +\n                    \"WHERE SCHEMA_NAME=? and VIEW_NAME=?\"))\n            {\n                dbStat.setString(1, sourceObject.getContainer().getName());\n                dbStat.setString(2, sourceObject.getName());\n                try (JDBCResultSet dbResult = dbStat.executeQuery()) {\n                    if (dbResult.nextRow()) {\n                        return\n                            \"CREATE VIEW \" + sourceObject.getFullyQualifiedName(DBPEvaluationContext.DDL) + \" AS\\n\" +\n                            dbResult.getString(1);\n                    }\n                    return \"-- HANA view definition not found\";\n                }\n            }\n        } catch (SQLException e) {\n            throw new DBException(e, dataSource);\n        }\n    }\n","date":"2018-07-23 15:41:36","endLine":71,"groupId":"5405","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"getViewDDL","params":"(DBRProgressMonitormonitor@GenericTablesourceObject@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/8f/bc7e3e7c9e4caa96f8cec2fbe17a6df618cc9a.src","preCode":"    public String getViewDDL(DBRProgressMonitor monitor, GenericTable sourceObject, Map<String, Object> options) throws DBException {\n        GenericDataSource dataSource = sourceObject.getDataSource();\n        try (JDBCSession session = DBUtils.openMetaSession(monitor, sourceObject, \"Read HANA view source\")) {\n            try (JDBCPreparedStatement dbStat = session.prepareStatement(\n                \"SELECT DEFINITION\\n\" +\n                    \"FROM SYS.VIEWS\\n\" +\n                    \"WHERE SCHEMA_NAME=? and VIEW_NAME=?\"))\n            {\n                dbStat.setString(1, sourceObject.getContainer().getName());\n                dbStat.setString(2, sourceObject.getName());\n                try (JDBCResultSet dbResult = dbStat.executeQuery()) {\n                    if (dbResult.nextRow()) {\n                        return\n                            \"CREATE VIEW \" + sourceObject.getFullyQualifiedName(DBPEvaluationContext.DDL) + \" AS\\n\" +\n                            dbResult.getString(1);\n                    }\n                    return \"-- HANA view definition not found\";\n                }\n            }\n        } catch (SQLException e) {\n            throw new DBException(e, dataSource);\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.hana/src/org/jkiss/dbeaver/ext/hana/model/HANAMetaModel.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":49,"status":"NB"},{"authorDate":"2019-06-11 20:23:01","commitOrder":4,"curCode":"\tpublic String getTriggerDDL(DBRProgressMonitor monitor, GenericTrigger sourceObject) throws DBException {\n        GenericDataSource dataSource = sourceObject.getDataSource();\n        try (JDBCSession session = DBUtils.openMetaSession(monitor, sourceObject, \"Read HANA trigger source\")) {\n            try (JDBCPreparedStatement dbStat = session.prepareStatement(\n                \"SELECT SCHEMA_NAME,TRIGGER_NAME,DEFINITION FROM SYS.TRIGGERS\\n\" +\n                    \"WHERE SCHEMA_NAME = ? AND TRIGGER_NAME = ?\"))\n            {\n                dbStat.setString(1, sourceObject.getContainer().getName());\n                dbStat.setString(2, sourceObject.getName());\n                try (JDBCResultSet dbResult = dbStat.executeQuery()) {\n                    if (dbResult.nextRow()) {\n                        return dbResult.getString(3);\n                    }\n                    return \"-- HANA trigger source not found\";\n                }\n            }\n        } catch (SQLException e) {\n            throw new DBException(e, dataSource);\n        }\n    }\n","date":"2019-06-11 20:23:01","endLine":182,"groupId":"15529","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"getTriggerDDL","params":"(DBRProgressMonitormonitor@GenericTriggersourceObject)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/fa/450f6b143aa5cd2e289cfbf77f84f3fd61576f.src","preCode":"\tpublic String getTriggerDDL(DBRProgressMonitor monitor, GenericTrigger sourceObject) throws DBException {\n        GenericDataSource dataSource = sourceObject.getDataSource();\n        try (JDBCSession session = DBUtils.openMetaSession(monitor, sourceObject, \"Read HANA trigger source\")) {\n            try (JDBCPreparedStatement dbStat = session.prepareStatement(\n                \"SELECT SCHEMA_NAME,TRIGGER_NAME,DEFINITION FROM SYS.TRIGGERS\\n\" +\n                    \"WHERE SCHEMA_NAME = ? AND TRIGGER_NAME = ?\"))\n            {\n                dbStat.setString(1, sourceObject.getContainer().getName());\n                dbStat.setString(2, sourceObject.getName());\n                try (JDBCResultSet dbResult = dbStat.executeQuery()) {\n                    if (dbResult.nextRow()) {\n                        return dbResult.getString(3);\n                    }\n                    return \"-- HANA trigger source not found\";\n                }\n            }\n        } catch (SQLException e) {\n            throw new DBException(e, dataSource);\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.hana/src/org/jkiss/dbeaver/ext/hana/model/HANAMetaModel.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":163,"status":"B"}],"commitId":"042b6bd4fceeaebe0a6b6aa602c58a34d3313f9f","commitMessage":"@@@Merge pull request #6079 from correiadn/patch-2\n\nIssue 5810 - Show Triggers on SAP HANA DB- Tested\n\nFormer-commit-id: 4865f1ca89e4d89d40706ede92ae713e7fbaf4b8","date":"2019-06-11 20:23:01","modifiedFileCount":"1","status":"M","submitter":"Serge Rider"},{"authorTime":"2019-06-11 20:23:01","codes":[{"authorDate":"2019-07-02 19:55:19","commitOrder":5,"curCode":"    public String getViewDDL(DBRProgressMonitor monitor, GenericView sourceObject, Map<String, Object> options) throws DBException {\n        GenericDataSource dataSource = sourceObject.getDataSource();\n        try (JDBCSession session = DBUtils.openMetaSession(monitor, sourceObject, \"Read HANA view source\")) {\n            try (JDBCPreparedStatement dbStat = session.prepareStatement(\n                \"SELECT DEFINITION\\n\" +\n                    \"FROM SYS.VIEWS\\n\" +\n                    \"WHERE SCHEMA_NAME=? and VIEW_NAME=?\"))\n            {\n                dbStat.setString(1, sourceObject.getContainer().getName());\n                dbStat.setString(2, sourceObject.getName());\n                try (JDBCResultSet dbResult = dbStat.executeQuery()) {\n                    if (dbResult.nextRow()) {\n                        return\n                            \"CREATE VIEW \" + sourceObject.getFullyQualifiedName(DBPEvaluationContext.DDL) + \" AS\\n\" +\n                            dbResult.getString(1);\n                    }\n                    return \"-- HANA view definition not found\";\n                }\n            }\n        } catch (SQLException e) {\n            throw new DBException(e, dataSource);\n        }\n    }\n","date":"2019-07-02 19:55:19","endLine":79,"groupId":"5405","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"getViewDDL","params":"(DBRProgressMonitormonitor@GenericViewsourceObject@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/fd/eef963e59fe176ac11d647e2585264d705d66f.src","preCode":"    public String getViewDDL(DBRProgressMonitor monitor, GenericTable sourceObject, Map<String, Object> options) throws DBException {\n        GenericDataSource dataSource = sourceObject.getDataSource();\n        try (JDBCSession session = DBUtils.openMetaSession(monitor, sourceObject, \"Read HANA view source\")) {\n            try (JDBCPreparedStatement dbStat = session.prepareStatement(\n                \"SELECT DEFINITION\\n\" +\n                    \"FROM SYS.VIEWS\\n\" +\n                    \"WHERE SCHEMA_NAME=? and VIEW_NAME=?\"))\n            {\n                dbStat.setString(1, sourceObject.getContainer().getName());\n                dbStat.setString(2, sourceObject.getName());\n                try (JDBCResultSet dbResult = dbStat.executeQuery()) {\n                    if (dbResult.nextRow()) {\n                        return\n                            \"CREATE VIEW \" + sourceObject.getFullyQualifiedName(DBPEvaluationContext.DDL) + \" AS\\n\" +\n                            dbResult.getString(1);\n                    }\n                    return \"-- HANA view definition not found\";\n                }\n            }\n        } catch (SQLException e) {\n            throw new DBException(e, dataSource);\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.hana/src/org/jkiss/dbeaver/ext/hana/model/HANAMetaModel.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":57,"status":"M"},{"authorDate":"2019-06-11 20:23:01","commitOrder":5,"curCode":"\tpublic String getTriggerDDL(DBRProgressMonitor monitor, GenericTrigger sourceObject) throws DBException {\n        GenericDataSource dataSource = sourceObject.getDataSource();\n        try (JDBCSession session = DBUtils.openMetaSession(monitor, sourceObject, \"Read HANA trigger source\")) {\n            try (JDBCPreparedStatement dbStat = session.prepareStatement(\n                \"SELECT SCHEMA_NAME,TRIGGER_NAME,DEFINITION FROM SYS.TRIGGERS\\n\" +\n                    \"WHERE SCHEMA_NAME = ? AND TRIGGER_NAME = ?\"))\n            {\n                dbStat.setString(1, sourceObject.getContainer().getName());\n                dbStat.setString(2, sourceObject.getName());\n                try (JDBCResultSet dbResult = dbStat.executeQuery()) {\n                    if (dbResult.nextRow()) {\n                        return dbResult.getString(3);\n                    }\n                    return \"-- HANA trigger source not found\";\n                }\n            }\n        } catch (SQLException e) {\n            throw new DBException(e, dataSource);\n        }\n    }\n","date":"2019-06-11 20:23:01","endLine":182,"groupId":"15529","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"getTriggerDDL","params":"(DBRProgressMonitormonitor@GenericTriggersourceObject)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/fa/450f6b143aa5cd2e289cfbf77f84f3fd61576f.src","preCode":"\tpublic String getTriggerDDL(DBRProgressMonitor monitor, GenericTrigger sourceObject) throws DBException {\n        GenericDataSource dataSource = sourceObject.getDataSource();\n        try (JDBCSession session = DBUtils.openMetaSession(monitor, sourceObject, \"Read HANA trigger source\")) {\n            try (JDBCPreparedStatement dbStat = session.prepareStatement(\n                \"SELECT SCHEMA_NAME,TRIGGER_NAME,DEFINITION FROM SYS.TRIGGERS\\n\" +\n                    \"WHERE SCHEMA_NAME = ? AND TRIGGER_NAME = ?\"))\n            {\n                dbStat.setString(1, sourceObject.getContainer().getName());\n                dbStat.setString(2, sourceObject.getName());\n                try (JDBCResultSet dbResult = dbStat.executeQuery()) {\n                    if (dbResult.nextRow()) {\n                        return dbResult.getString(3);\n                    }\n                    return \"-- HANA trigger source not found\";\n                }\n            }\n        } catch (SQLException e) {\n            throw new DBException(e, dataSource);\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.hana/src/org/jkiss/dbeaver/ext/hana/model/HANAMetaModel.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":163,"status":"N"}],"commitId":"35c8a5c86f34a9accca540a7ad7f1e5420630e9b","commitMessage":"@@@Generic model refactoring (split tables and views)\n\n\nFormer-commit-id: f967aa59fa19129394816550531b85ccb2ea7b73","date":"2019-07-02 19:55:19","modifiedFileCount":"53","status":"M","submitter":"serge@jkiss.org"},{"authorTime":"2021-06-22 02:29:23","codes":[{"authorDate":"2019-07-02 19:55:19","commitOrder":6,"curCode":"    public String getViewDDL(DBRProgressMonitor monitor, GenericView sourceObject, Map<String, Object> options) throws DBException {\n        GenericDataSource dataSource = sourceObject.getDataSource();\n        try (JDBCSession session = DBUtils.openMetaSession(monitor, sourceObject, \"Read HANA view source\")) {\n            try (JDBCPreparedStatement dbStat = session.prepareStatement(\n                \"SELECT DEFINITION\\n\" +\n                    \"FROM SYS.VIEWS\\n\" +\n                    \"WHERE SCHEMA_NAME=? and VIEW_NAME=?\"))\n            {\n                dbStat.setString(1, sourceObject.getContainer().getName());\n                dbStat.setString(2, sourceObject.getName());\n                try (JDBCResultSet dbResult = dbStat.executeQuery()) {\n                    if (dbResult.nextRow()) {\n                        return\n                            \"CREATE VIEW \" + sourceObject.getFullyQualifiedName(DBPEvaluationContext.DDL) + \" AS\\n\" +\n                            dbResult.getString(1);\n                    }\n                    return \"-- HANA view definition not found\";\n                }\n            }\n        } catch (SQLException e) {\n            throw new DBException(e, dataSource);\n        }\n    }\n","date":"2019-07-02 19:55:19","endLine":79,"groupId":"101038","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"getViewDDL","params":"(DBRProgressMonitormonitor@GenericViewsourceObject@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/fd/eef963e59fe176ac11d647e2585264d705d66f.src","preCode":"    public String getViewDDL(DBRProgressMonitor monitor, GenericView sourceObject, Map<String, Object> options) throws DBException {\n        GenericDataSource dataSource = sourceObject.getDataSource();\n        try (JDBCSession session = DBUtils.openMetaSession(monitor, sourceObject, \"Read HANA view source\")) {\n            try (JDBCPreparedStatement dbStat = session.prepareStatement(\n                \"SELECT DEFINITION\\n\" +\n                    \"FROM SYS.VIEWS\\n\" +\n                    \"WHERE SCHEMA_NAME=? and VIEW_NAME=?\"))\n            {\n                dbStat.setString(1, sourceObject.getContainer().getName());\n                dbStat.setString(2, sourceObject.getName());\n                try (JDBCResultSet dbResult = dbStat.executeQuery()) {\n                    if (dbResult.nextRow()) {\n                        return\n                            \"CREATE VIEW \" + sourceObject.getFullyQualifiedName(DBPEvaluationContext.DDL) + \" AS\\n\" +\n                            dbResult.getString(1);\n                    }\n                    return \"-- HANA view definition not found\";\n                }\n            }\n        } catch (SQLException e) {\n            throw new DBException(e, dataSource);\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.hana/src/org/jkiss/dbeaver/ext/hana/model/HANAMetaModel.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":57,"status":"N"},{"authorDate":"2021-06-22 02:29:23","commitOrder":6,"curCode":"    public String getTriggerDDL(@NotNull DBRProgressMonitor monitor, @NotNull GenericTrigger sourceObject) throws DBException {\n        if (sourceObject instanceof HANATrigger) {\n            return ((HANATrigger) sourceObject).getDefinition();\n        }\n        GenericDataSource dataSource = sourceObject.getDataSource();\n        try (JDBCSession session = DBUtils.openMetaSession(monitor, sourceObject, \"Read HANA trigger source\")) {\n            try (JDBCPreparedStatement dbStat = session.prepareStatement(\n                \"SELECT SCHEMA_NAME,TRIGGER_NAME,DEFINITION FROM SYS.TRIGGERS\\n\" +\n                    \"WHERE SCHEMA_NAME = ? AND TRIGGER_NAME = ?\"))\n            {\n                dbStat.setString(1, sourceObject.getContainer().getName());\n                dbStat.setString(2, sourceObject.getName());\n                try (JDBCResultSet dbResult = dbStat.executeQuery()) {\n                    if (dbResult.nextRow()) {\n                        return dbResult.getString(3);\n                    }\n                    return \"-- HANA trigger source not found\";\n                }\n            }\n        } catch (SQLException e) {\n            throw new DBException(e, dataSource);\n        }\n    }\n","date":"2021-06-22 02:29:23","endLine":280,"groupId":"101038","id":6,"instanceNumber":2,"isCurCommit":1,"methodName":"getTriggerDDL","params":"(@NotNullDBRProgressMonitormonitor@@NotNullGenericTriggersourceObject)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/51/45cb9c346ab43af2956d6cd116d7aae713c820.src","preCode":"    public String getTriggerDDL(DBRProgressMonitor monitor, GenericTrigger sourceObject) throws DBException {\n        GenericDataSource dataSource = sourceObject.getDataSource();\n        try (JDBCSession session = DBUtils.openMetaSession(monitor, sourceObject, \"Read HANA trigger source\")) {\n            try (JDBCPreparedStatement dbStat = session.prepareStatement(\n                \"SELECT SCHEMA_NAME,TRIGGER_NAME,DEFINITION FROM SYS.TRIGGERS\\n\" +\n                    \"WHERE SCHEMA_NAME = ? AND TRIGGER_NAME = ?\"))\n            {\n                dbStat.setString(1, sourceObject.getContainer().getName());\n                dbStat.setString(2, sourceObject.getName());\n                try (JDBCResultSet dbResult = dbStat.executeQuery()) {\n                    if (dbResult.nextRow()) {\n                        return dbResult.getString(3);\n                    }\n                    return \"-- HANA trigger source not found\";\n                }\n            }\n        } catch (SQLException e) {\n            throw new DBException(e, dataSource);\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.hana/src/org/jkiss/dbeaver/ext/hana/model/HANAMetaModel.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":258,"status":"M"}],"commitId":"2518e4a91e5c228d6bef4abbf3b21f772004d581","commitMessage":"@@@Merge pull request #12885 from dbeaver/genericTriggersCache#11013\n\n#11013 add support of trigger cache for generic triggers","date":"2021-06-22 02:29:23","modifiedFileCount":"19","status":"M","submitter":"Serge Rider"}]
