[{"authorTime":"2019-12-05 19:34:33","codes":[{"authorDate":"2020-04-25 02:39:46","commitOrder":6,"curCode":"        private EnumValuesData readEnum(DBRProgressMonitor monitor) throws DBException {\n    \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n            IAttributeController attributeController = (IAttributeController)valueController;\n            final DBSEntityAttribute tableColumn = attributeController.getBinding().getEntityAttribute();\n            if (tableColumn == null) {\n                return null;\n            }\n            final DBSEntityAttributeRef fkColumn = DBUtils.getConstraintAttribute(monitor, refConstraint, tableColumn);\n            if (fkColumn == null) {\n                return null;\n            }\n            DBSEntityAssociation association;\n            if (refConstraint instanceof DBSEntityAssociation) {\n                association = (DBSEntityAssociation)refConstraint;\n            } else {\n                return null;\n            }\n            final DBSEntityAttribute refColumn = DBUtils.getReferenceAttribute(monitor, association, tableColumn, false);\n            if (refColumn == null) {\n                return null;\n            }\n            List<DBDAttributeValue> precedingKeys = null;\n            List<? extends DBSEntityAttributeRef> allColumns = CommonUtils.safeList(refConstraint.getAttributeReferences(monitor));\n            if (allColumns.size() > 1 && allColumns.get(0) != fkColumn) {\n                \r\n                \r\n                List<DBDAttributeBinding> rowAttributes = attributeController.getRowController().getRowAttributes();\n                precedingKeys = new ArrayList<>();\n                for (DBSEntityAttributeRef precColumn : allColumns) {\n                    if (precColumn == fkColumn) {\n                        \r\n                        break;\n                    }\n                    DBSEntityAttribute precAttribute = precColumn.getAttribute();\n                    if (precAttribute != null) {\n                        DBDAttributeBinding rowAttr = DBUtils.findBinding(rowAttributes, precAttribute);\n                        if (rowAttr != null) {\n                            Object precValue = attributeController.getRowController().getAttributeValue(rowAttr);\n                            precedingKeys.add(new DBDAttributeValue(precAttribute, precValue));\n                        }\n                    }\n                }\n            }\n            final DBSEntityAttribute fkAttribute = fkColumn.getAttribute();\n            final DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n            final DBSDictionary enumConstraint = (DBSDictionary) refConstraint.getParentObject();\n            if (fkAttribute != null && enumConstraint != null) {\n                Collection<DBDLabelValuePair> enumValues = enumConstraint.getDictionaryEnumeration(\n                    monitor,\n                    refColumn,\n                    pattern,\n                    precedingKeys,\n                    sortByValue,\n                    sortAsc,\n                    200);\n\r\n\r\n\r\n                if (monitor.isCanceled()) {\n                    return null;\n                }\n                final DBDValueHandler colHandler = DBUtils.findValueHandler(fkAttribute.getDataSource(), fkAttribute);\n                return new EnumValuesData(enumValues, fkColumn, colHandler);\n            }\n\n            return null;\n        }\n","date":"2020-04-25 02:39:46","endLine":507,"groupId":"13489","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"readEnum","params":"(DBRProgressMonitormonitor)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/e9/ee9468ddbb367e7235bb60c6600a36bcf1298c.src","preCode":"        private EnumValuesData readEnum(DBRProgressMonitor monitor) throws DBException {\n    \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n            IAttributeController attributeController = (IAttributeController)valueController;\n            final DBSEntityAttribute tableColumn = attributeController.getBinding().getEntityAttribute();\n            if (tableColumn == null) {\n                return null;\n            }\n            final DBSEntityAttributeRef fkColumn = DBUtils.getConstraintAttribute(monitor, refConstraint, tableColumn);\n            if (fkColumn == null) {\n                return null;\n            }\n            DBSEntityAssociation association;\n            if (refConstraint instanceof DBSEntityAssociation) {\n                association = (DBSEntityAssociation)refConstraint;\n            } else {\n                return null;\n            }\n            final DBSEntityAttribute refColumn = DBUtils.getReferenceAttribute(monitor, association, tableColumn, false);\n            if (refColumn == null) {\n                return null;\n            }\n            List<DBDAttributeValue> precedingKeys = null;\n            List<? extends DBSEntityAttributeRef> allColumns = CommonUtils.safeList(refConstraint.getAttributeReferences(monitor));\n            if (allColumns.size() > 1 && allColumns.get(0) != fkColumn) {\n                \r\n                \r\n                List<DBDAttributeBinding> rowAttributes = attributeController.getRowController().getRowAttributes();\n                precedingKeys = new ArrayList<>();\n                for (DBSEntityAttributeRef precColumn : allColumns) {\n                    if (precColumn == fkColumn) {\n                        \r\n                        break;\n                    }\n                    DBSEntityAttribute precAttribute = precColumn.getAttribute();\n                    if (precAttribute != null) {\n                        DBDAttributeBinding rowAttr = DBUtils.findBinding(rowAttributes, precAttribute);\n                        if (rowAttr != null) {\n                            Object precValue = attributeController.getRowController().getAttributeValue(rowAttr);\n                            precedingKeys.add(new DBDAttributeValue(precAttribute, precValue));\n                        }\n                    }\n                }\n            }\n            final DBSEntityAttribute fkAttribute = fkColumn.getAttribute();\n            final DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n            final DBSDictionary enumConstraint = (DBSDictionary) refConstraint.getParentObject();\n            if (fkAttribute != null && enumConstraint != null) {\n                Collection<DBDLabelValuePair> enumValues = enumConstraint.getDictionaryEnumeration(\n                    monitor,\n                    refColumn,\n                    pattern,\n                    precedingKeys,\n                    sortByValue,\n                    sortAsc,\n                    200);\n\r\n\r\n\r\n                if (monitor.isCanceled()) {\n                    return null;\n                }\n                final DBDValueHandler colHandler = DBUtils.findValueHandler(fkAttribute.getDataSource(), fkAttribute);\n                return new EnumValuesData(enumValues, fkColumn, colHandler);\n            }\n\n            return null;\n        }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/data/editors/ReferenceValueEditor.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":425,"status":"B"},{"authorDate":"2019-12-05 19:34:33","commitOrder":6,"curCode":"    private void loadConstraintEnum(final DBSEntityReferrer refConstraint, Runnable onFinish) {\n        loadJob = new KeyLoadJob(\"Load constraint '\" + refConstraint.getName() + \"' values\", onFinish) {\n            @Override\n            List<DBDLabelValuePair> readEnumeration(DBRProgressMonitor monitor) throws DBException {\n                final DBSEntityAttribute tableColumn = attribute.getEntityAttribute();\n                if (tableColumn == null) {\n                    return null;\n                }\n                final DBSEntityAttributeRef fkColumn = DBUtils.getConstraintAttribute(monitor, refConstraint, tableColumn);\n                if (fkColumn == null) {\n                    return null;\n                }\n                DBSEntityAssociation association;\n                if (refConstraint instanceof DBSEntityAssociation) {\n                    association = (DBSEntityAssociation) refConstraint;\n                } else {\n                    return null;\n                }\n                final DBSEntityAttribute refColumn = DBUtils.getReferenceAttribute(monitor, association, tableColumn, false);\n                if (refColumn == null) {\n                    return null;\n                }\n                final DBSEntityAttribute fkAttribute = fkColumn.getAttribute();\n                final DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n                final DBSDictionary enumConstraint = (DBSDictionary) refConstraint.getParentObject();\n                if (fkAttribute != null && enumConstraint != null) {\n                    return enumConstraint.getDictionaryEnumeration(\n                        monitor,\n                        refColumn,\n                        filterPattern,\n                        null,\n                        true,\n                        true,\n                        MAX_MULTI_VALUES);\n                }\n                return null;\n            }\n\n        };\n        loadJob.schedule();\n    }\n","date":"2019-12-05 19:34:33","endLine":254,"groupId":"12598","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"loadConstraintEnum","params":"(finalDBSEntityReferrerrefConstraint@RunnableonFinish)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/6a/af21c32859e2e1781ed50084f05a32662f44d3.src","preCode":"    private void loadConstraintEnum(final DBSEntityReferrer refConstraint, Runnable onFinish) {\n        loadJob = new KeyLoadJob(\"Load constraint '\" + refConstraint.getName() + \"' values\", onFinish) {\n            @Override\n            List<DBDLabelValuePair> readEnumeration(DBRProgressMonitor monitor) throws DBException {\n                final DBSEntityAttribute tableColumn = attribute.getEntityAttribute();\n                if (tableColumn == null) {\n                    return null;\n                }\n                final DBSEntityAttributeRef fkColumn = DBUtils.getConstraintAttribute(monitor, refConstraint, tableColumn);\n                if (fkColumn == null) {\n                    return null;\n                }\n                DBSEntityAssociation association;\n                if (refConstraint instanceof DBSEntityAssociation) {\n                    association = (DBSEntityAssociation) refConstraint;\n                } else {\n                    return null;\n                }\n                final DBSEntityAttribute refColumn = DBUtils.getReferenceAttribute(monitor, association, tableColumn, false);\n                if (refColumn == null) {\n                    return null;\n                }\n                final DBSEntityAttribute fkAttribute = fkColumn.getAttribute();\n                final DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n                final DBSDictionary enumConstraint = (DBSDictionary) refConstraint.getParentObject();\n                if (fkAttribute != null && enumConstraint != null) {\n                    return enumConstraint.getDictionaryEnumeration(\n                        monitor,\n                        refColumn,\n                        filterPattern,\n                        null,\n                        true,\n                        true,\n                        MAX_MULTI_VALUES);\n                }\n                return null;\n            }\n\n        };\n        loadJob.schedule();\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/controls/resultset/valuefilter/GenericFilterValueEdit.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":214,"status":"NB"}],"commitId":"d6d55ca5e1ab0c2069d181a6293daff8c2c5594a","commitMessage":"@@@Reference panel: connection recovery\n\n\nFormer-commit-id: 8e049adc93ebbd06dfa00f0af3a94ff7142a2c11","date":"2020-04-25 02:39:46","modifiedFileCount":"1","status":"M","submitter":"serge-rider"},{"authorTime":"2021-04-09 00:26:19","codes":[{"authorDate":"2021-04-09 00:26:19","commitOrder":7,"curCode":"        private EnumValuesData readEnum(DBRProgressMonitor monitor) throws DBException {\n    \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n            IAttributeController attributeController = (IAttributeController)valueController;\n            final DBSEntityAttribute tableColumn = attributeController.getBinding().getEntityAttribute();\n            if (tableColumn == null) {\n                return null;\n            }\n            final DBSEntityAttributeRef fkColumn = DBUtils.getConstraintAttribute(monitor, refConstraint, tableColumn);\n            if (fkColumn == null) {\n                return null;\n            }\n            DBSEntityAssociation association;\n            if (refConstraint instanceof DBSEntityAssociation) {\n                association = (DBSEntityAssociation)refConstraint;\n            } else {\n                return null;\n            }\n            final DBSEntityAttribute refColumn = DBUtils.getReferenceAttribute(monitor, association, tableColumn, false);\n            if (refColumn == null) {\n                return null;\n            }\n            List<DBDAttributeValue> precedingKeys = null;\n            List<? extends DBSEntityAttributeRef> allColumns = CommonUtils.safeList(refConstraint.getAttributeReferences(monitor));\n            if (allColumns.size() > 1 && allColumns.get(0) != fkColumn) {\n                \r\n                \r\n                List<DBDAttributeBinding> rowAttributes = attributeController.getRowController().getRowAttributes();\n                precedingKeys = new ArrayList<>();\n                for (DBSEntityAttributeRef precColumn : allColumns) {\n                    if (precColumn == fkColumn) {\n                        \r\n                        break;\n                    }\n                    DBSEntityAttribute precAttribute = precColumn.getAttribute();\n                    if (precAttribute != null) {\n                        DBDAttributeBinding rowAttr = DBUtils.findBinding(rowAttributes, precAttribute);\n                        if (rowAttr != null) {\n                            Object precValue = attributeController.getRowController().getAttributeValue(rowAttr);\n                            precedingKeys.add(new DBDAttributeValue(precAttribute, precValue));\n                        }\n                    }\n                }\n            }\n            final DBSEntityAttribute fkAttribute = fkColumn.getAttribute();\n            final DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n            final DBSDictionary enumConstraint = (DBSDictionary) refConstraint.getParentObject();\n            if (fkAttribute != null && enumConstraint != null) {\n                Collection<DBDLabelValuePair> enumValues = enumConstraint.getDictionaryEnumeration(\n                    monitor,\n                    refColumn,\n                    pattern,\n                    precedingKeys,\n                    sortByValue,\n                    sortAsc,\n                    false,\n                    200);\n\r\n\r\n\r\n                if (monitor.isCanceled()) {\n                    return null;\n                }\n                final DBDValueHandler colHandler = DBUtils.findValueHandler(fkAttribute.getDataSource(), fkAttribute);\n                return new EnumValuesData(enumValues, fkColumn, colHandler);\n            }\n\n            return null;\n        }\n","date":"2021-04-09 00:26:19","endLine":510,"groupId":"10379","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"readEnum","params":"(DBRProgressMonitormonitor)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/71/177ebf481c1ac2b5ec2fd7ea0a5e6129c49601.src","preCode":"        private EnumValuesData readEnum(DBRProgressMonitor monitor) throws DBException {\n    \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n            IAttributeController attributeController = (IAttributeController)valueController;\n            final DBSEntityAttribute tableColumn = attributeController.getBinding().getEntityAttribute();\n            if (tableColumn == null) {\n                return null;\n            }\n            final DBSEntityAttributeRef fkColumn = DBUtils.getConstraintAttribute(monitor, refConstraint, tableColumn);\n            if (fkColumn == null) {\n                return null;\n            }\n            DBSEntityAssociation association;\n            if (refConstraint instanceof DBSEntityAssociation) {\n                association = (DBSEntityAssociation)refConstraint;\n            } else {\n                return null;\n            }\n            final DBSEntityAttribute refColumn = DBUtils.getReferenceAttribute(monitor, association, tableColumn, false);\n            if (refColumn == null) {\n                return null;\n            }\n            List<DBDAttributeValue> precedingKeys = null;\n            List<? extends DBSEntityAttributeRef> allColumns = CommonUtils.safeList(refConstraint.getAttributeReferences(monitor));\n            if (allColumns.size() > 1 && allColumns.get(0) != fkColumn) {\n                \r\n                \r\n                List<DBDAttributeBinding> rowAttributes = attributeController.getRowController().getRowAttributes();\n                precedingKeys = new ArrayList<>();\n                for (DBSEntityAttributeRef precColumn : allColumns) {\n                    if (precColumn == fkColumn) {\n                        \r\n                        break;\n                    }\n                    DBSEntityAttribute precAttribute = precColumn.getAttribute();\n                    if (precAttribute != null) {\n                        DBDAttributeBinding rowAttr = DBUtils.findBinding(rowAttributes, precAttribute);\n                        if (rowAttr != null) {\n                            Object precValue = attributeController.getRowController().getAttributeValue(rowAttr);\n                            precedingKeys.add(new DBDAttributeValue(precAttribute, precValue));\n                        }\n                    }\n                }\n            }\n            final DBSEntityAttribute fkAttribute = fkColumn.getAttribute();\n            final DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n            final DBSDictionary enumConstraint = (DBSDictionary) refConstraint.getParentObject();\n            if (fkAttribute != null && enumConstraint != null) {\n                Collection<DBDLabelValuePair> enumValues = enumConstraint.getDictionaryEnumeration(\n                    monitor,\n                    refColumn,\n                    pattern,\n                    precedingKeys,\n                    sortByValue,\n                    sortAsc,\n                    200);\n\r\n\r\n\r\n                if (monitor.isCanceled()) {\n                    return null;\n                }\n                final DBDValueHandler colHandler = DBUtils.findValueHandler(fkAttribute.getDataSource(), fkAttribute);\n                return new EnumValuesData(enumValues, fkColumn, colHandler);\n            }\n\n            return null;\n        }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/data/editors/ReferenceValueEditor.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":427,"status":"M"},{"authorDate":"2021-04-09 00:26:19","commitOrder":7,"curCode":"    private void loadConstraintEnum(final DBSEntityReferrer refConstraint, Runnable onFinish) {\n        loadJob = new KeyLoadJob(\"Load constraint '\" + refConstraint.getName() + \"' values\", onFinish) {\n            @Override\n            List<DBDLabelValuePair> readEnumeration(DBRProgressMonitor monitor) throws DBException {\n                final DBSEntityAttribute tableColumn = attribute.getEntityAttribute();\n                if (tableColumn == null) {\n                    return null;\n                }\n                final DBSEntityAttributeRef fkColumn = DBUtils.getConstraintAttribute(monitor, refConstraint, tableColumn);\n                if (fkColumn == null) {\n                    return null;\n                }\n                DBSEntityAssociation association;\n                if (refConstraint instanceof DBSEntityAssociation) {\n                    association = (DBSEntityAssociation) refConstraint;\n                } else {\n                    return null;\n                }\n                final DBSEntityAttribute refColumn = DBUtils.getReferenceAttribute(monitor, association, tableColumn, false);\n                if (refColumn == null) {\n                    return null;\n                }\n                final DBSEntityAttribute fkAttribute = fkColumn.getAttribute();\n                final DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n                final DBSDictionary enumConstraint = (DBSDictionary) refConstraint.getParentObject();\n                if (fkAttribute != null && enumConstraint != null) {\n                    return enumConstraint.getDictionaryEnumeration(\n                        monitor,\n                        refColumn,\n                        filterPattern,\n                        null,\n                        true,\n                        true,\n                        caseInsensitiveSearch,\n                        MAX_MULTI_VALUES);\n                }\n                return null;\n            }\n\n        };\n        loadJob.schedule();\n    }\n","date":"2021-04-09 00:26:19","endLine":304,"groupId":"10379","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"loadConstraintEnum","params":"(finalDBSEntityReferrerrefConstraint@RunnableonFinish)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/97/3698f6a2a61a87b697c37d3d4cbb57baee364c.src","preCode":"    private void loadConstraintEnum(final DBSEntityReferrer refConstraint, Runnable onFinish) {\n        loadJob = new KeyLoadJob(\"Load constraint '\" + refConstraint.getName() + \"' values\", onFinish) {\n            @Override\n            List<DBDLabelValuePair> readEnumeration(DBRProgressMonitor monitor) throws DBException {\n                final DBSEntityAttribute tableColumn = attribute.getEntityAttribute();\n                if (tableColumn == null) {\n                    return null;\n                }\n                final DBSEntityAttributeRef fkColumn = DBUtils.getConstraintAttribute(monitor, refConstraint, tableColumn);\n                if (fkColumn == null) {\n                    return null;\n                }\n                DBSEntityAssociation association;\n                if (refConstraint instanceof DBSEntityAssociation) {\n                    association = (DBSEntityAssociation) refConstraint;\n                } else {\n                    return null;\n                }\n                final DBSEntityAttribute refColumn = DBUtils.getReferenceAttribute(monitor, association, tableColumn, false);\n                if (refColumn == null) {\n                    return null;\n                }\n                final DBSEntityAttribute fkAttribute = fkColumn.getAttribute();\n                final DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n                final DBSDictionary enumConstraint = (DBSDictionary) refConstraint.getParentObject();\n                if (fkAttribute != null && enumConstraint != null) {\n                    return enumConstraint.getDictionaryEnumeration(\n                        monitor,\n                        refColumn,\n                        filterPattern,\n                        null,\n                        true,\n                        true,\n                        MAX_MULTI_VALUES);\n                }\n                return null;\n            }\n\n        };\n        loadJob.schedule();\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/controls/resultset/valuefilter/GenericFilterValueEdit.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":263,"status":"M"}],"commitId":"1e1f46a021373bee6c210a658725c7b615cc89c2","commitMessage":"@@@Merge remote-tracking branch 'origin/devel' into devel\n\n\nFormer-commit-id: 3cf886b64155ddd1df1b72ce668bff4fb7fcf2c0","date":"2021-04-09 00:26:19","modifiedFileCount":"15","status":"M","submitter":"Serge Rider"}]
