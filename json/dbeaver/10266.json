[{"authorTime":"2018-11-04 00:58:17","codes":[{"authorDate":"2018-11-11 06:27:22","commitOrder":7,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Comment column\",\n                \"COMMENT ON COLUMN \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \".\" + DBUtils.getQuotedIdentifier(column) +\n                    \" IS '\" + column.getComment() + \"'\"));\n        }\n    }\n","date":"2018-11-11 06:27:22","endLine":92,"groupId":"2473","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/90/992ce4634c6e8c781bd2606a3d078a3ef62890.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Comment column\",\n                \"COMMENT ON COLUMN \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \".\" + DBUtils.getQuotedIdentifier(column) +\n                    \" IS '\" + column.getComment() + \"'\"));\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.mssql/src/org/jkiss/dbeaver/ext/mssql/edit/SQLServerTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":76,"status":"B"},{"authorDate":"2018-11-04 00:58:17","commitOrder":7,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Comment column\",\n                \"COMMENT ON COLUMN \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \".\" + DBUtils.getQuotedIdentifier(column) +\n                    \" IS '\" + column.getComment(new VoidProgressMonitor()) + \"'\"));\n        }\n    }\n","date":"2018-11-04 00:58:17","endLine":92,"groupId":"2473","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/82/d5c6860e9f99424c6cc75603f9f873deb81061.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Comment column\",\n                \"COMMENT ON COLUMN \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \".\" + DBUtils.getQuotedIdentifier(column) +\n                    \" IS '\" + column.getComment(new VoidProgressMonitor()) + \"'\"));\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.oracle/src/org/jkiss/dbeaver/ext/oracle/edit/OracleTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":76,"status":"NB"}],"commitId":"ec919fa7398d9e61c655390ae654c1ad8691a0ae","commitMessage":"@@@#810 SQL Server: views.  procedures\n\n\nFormer-commit-id: aa4f243ac727d8f586d95a1a0616447959373035","date":"2018-11-11 06:27:22","modifiedFileCount":"7","status":"M","submitter":"serge-rider"},{"authorTime":"2018-11-04 00:58:17","codes":[{"authorDate":"2018-11-12 04:33:26","commitOrder":8,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"description\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Comment column\",\n                \"COMMENT ON COLUMN \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \".\" + DBUtils.getQuotedIdentifier(column) +\n                    \" IS '\" + column.getDescription() + \"'\"));\n        }\n    }\n","date":"2018-11-12 04:33:26","endLine":92,"groupId":"2473","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/80/f0339a919c0c6022cfaf6f85ae5cf7345808d2.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Comment column\",\n                \"COMMENT ON COLUMN \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \".\" + DBUtils.getQuotedIdentifier(column) +\n                    \" IS '\" + column.getComment() + \"'\"));\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.mssql/src/org/jkiss/dbeaver/ext/mssql/edit/SQLServerTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":76,"status":"M"},{"authorDate":"2018-11-04 00:58:17","commitOrder":8,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Comment column\",\n                \"COMMENT ON COLUMN \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \".\" + DBUtils.getQuotedIdentifier(column) +\n                    \" IS '\" + column.getComment(new VoidProgressMonitor()) + \"'\"));\n        }\n    }\n","date":"2018-11-04 00:58:17","endLine":92,"groupId":"2473","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/82/d5c6860e9f99424c6cc75603f9f873deb81061.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Comment column\",\n                \"COMMENT ON COLUMN \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \".\" + DBUtils.getQuotedIdentifier(column) +\n                    \" IS '\" + column.getComment(new VoidProgressMonitor()) + \"'\"));\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.oracle/src/org/jkiss/dbeaver/ext/oracle/edit/OracleTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":76,"status":"N"}],"commitId":"66f6b467f950a94567950ae1256ffc434a51103d","commitMessage":"@@@#810 SQL Server: object descriptions\n\n\nFormer-commit-id: 5f02759b4edc902414ccf8fa8b27a6c09bd684a8","date":"2018-11-12 04:33:26","modifiedFileCount":"11","status":"M","submitter":"serge-rider"},{"authorTime":"2018-11-04 00:58:17","codes":[{"authorDate":"2018-11-14 18:32:45","commitOrder":9,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"description\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" ALTER COLUMN \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Comment column\",\n                \"COMMENT ON COLUMN \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \".\" + DBUtils.getQuotedIdentifier(column) +\n                    \" IS '\" + column.getDescription() + \"'\"));\n        }\n    }\n","date":"2018-11-14 18:32:45","endLine":103,"groupId":"2473","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/70/24e433b87edd3f127265298bcfa4b2d801b009.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"description\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Comment column\",\n                \"COMMENT ON COLUMN \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \".\" + DBUtils.getQuotedIdentifier(column) +\n                    \" IS '\" + column.getDescription() + \"'\"));\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.mssql/src/org/jkiss/dbeaver/ext/mssql/edit/SQLServerTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":87,"status":"M"},{"authorDate":"2018-11-04 00:58:17","commitOrder":9,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Comment column\",\n                \"COMMENT ON COLUMN \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \".\" + DBUtils.getQuotedIdentifier(column) +\n                    \" IS '\" + column.getComment(new VoidProgressMonitor()) + \"'\"));\n        }\n    }\n","date":"2018-11-04 00:58:17","endLine":92,"groupId":"2473","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/82/d5c6860e9f99424c6cc75603f9f873deb81061.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Comment column\",\n                \"COMMENT ON COLUMN \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \".\" + DBUtils.getQuotedIdentifier(column) +\n                    \" IS '\" + column.getComment(new VoidProgressMonitor()) + \"'\"));\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.oracle/src/org/jkiss/dbeaver/ext/oracle/edit/OracleTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":76,"status":"N"}],"commitId":"ee3fbec326acf1658acab60582a819bc5f4f8556","commitMessage":"@@@#2793 SQL Server; alter column\n\n\nFormer-commit-id: 8f473cc41fa7fbe321131ba31ac55a2ea89428d2","date":"2018-11-14 18:32:45","modifiedFileCount":"1","status":"M","submitter":"Serge Rider"},{"authorTime":"2018-11-04 00:58:17","codes":[{"authorDate":"2018-11-14 22:26:30","commitOrder":10,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"description\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" ALTER COLUMN \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            boolean isUpdate = SQLServerUtils.isCommentSet(\n                monitor,\n                column.getTable().getDatabase(),\n                SQLServerObjectClass.OBJECT_OR_COLUMN,\n                column.getTable().getObjectId(),\n                column.getObjectId());\n            actionList.add(\n                new SQLDatabasePersistAction(\n                    \"Add column comment\",\n                    \"EXEC \" + SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), isUpdate ? \"sp_updateextendedproperty\" : \"sp_addextendedproperty\") +\n                        \" 'MS_Description', \" + SQLUtils.quoteString(command.getObject(), command.getObject().getDescription()) + \",\" +\n                        \" 'user', '\" + column.getTable().getSchema().getName() + \"',\" +\n                        \" 'table', '\" + column.getTable().getName() + \"',\" +\n                        \" 'column', '\" + column.getName() + \"'\"));\n        }\n    }\n","date":"2018-11-14 22:26:30","endLine":127,"groupId":"6559","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/1c/7ab42b3a1f4ab08387ece4f51bfcf9ac7fcb8b.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"description\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" ALTER COLUMN \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Comment column\",\n                \"COMMENT ON COLUMN \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \".\" + DBUtils.getQuotedIdentifier(column) +\n                    \" IS '\" + column.getDescription() + \"'\"));\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.mssql/src/org/jkiss/dbeaver/ext/mssql/edit/SQLServerTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":101,"status":"M"},{"authorDate":"2018-11-04 00:58:17","commitOrder":10,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Comment column\",\n                \"COMMENT ON COLUMN \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \".\" + DBUtils.getQuotedIdentifier(column) +\n                    \" IS '\" + column.getComment(new VoidProgressMonitor()) + \"'\"));\n        }\n    }\n","date":"2018-11-04 00:58:17","endLine":92,"groupId":"2473","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/82/d5c6860e9f99424c6cc75603f9f873deb81061.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Comment column\",\n                \"COMMENT ON COLUMN \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \".\" + DBUtils.getQuotedIdentifier(column) +\n                    \" IS '\" + column.getComment(new VoidProgressMonitor()) + \"'\"));\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.oracle/src/org/jkiss/dbeaver/ext/oracle/edit/OracleTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":76,"status":"N"}],"commitId":"eed32dea59d334cdf9280561a89ab9bf86ffd1ea","commitMessage":"@@@#2793 SQL Server: table and column comments\n\n\nFormer-commit-id: 824cb016a6d74df41cc2d9b4e718abc64429a731","date":"2018-11-14 22:26:30","modifiedFileCount":"3","status":"M","submitter":"Serge Rider"},{"authorTime":"2018-11-04 00:58:17","codes":[{"authorDate":"2018-11-14 22:28:52","commitOrder":11,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(DBConstants.PROP_ID_DESCRIPTION) != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" ALTER COLUMN \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            boolean isUpdate = SQLServerUtils.isCommentSet(\n                monitor,\n                column.getTable().getDatabase(),\n                SQLServerObjectClass.OBJECT_OR_COLUMN,\n                column.getTable().getObjectId(),\n                column.getObjectId());\n            actionList.add(\n                new SQLDatabasePersistAction(\n                    \"Add column comment\",\n                    \"EXEC \" + SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), isUpdate ? \"sp_updateextendedproperty\" : \"sp_addextendedproperty\") +\n                        \" 'MS_Description', \" + SQLUtils.quoteString(command.getObject(), command.getObject().getDescription()) + \",\" +\n                        \" 'user', '\" + column.getTable().getSchema().getName() + \"',\" +\n                        \" 'table', '\" + column.getTable().getName() + \"',\" +\n                        \" 'column', '\" + column.getName() + \"'\"));\n        }\n    }\n","date":"2018-11-14 22:28:52","endLine":128,"groupId":"6559","id":9,"instanceNumber":1,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/6d/4057be45da68fcd73e784861e6c5792f45dbac.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"description\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" ALTER COLUMN \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            boolean isUpdate = SQLServerUtils.isCommentSet(\n                monitor,\n                column.getTable().getDatabase(),\n                SQLServerObjectClass.OBJECT_OR_COLUMN,\n                column.getTable().getObjectId(),\n                column.getObjectId());\n            actionList.add(\n                new SQLDatabasePersistAction(\n                    \"Add column comment\",\n                    \"EXEC \" + SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), isUpdate ? \"sp_updateextendedproperty\" : \"sp_addextendedproperty\") +\n                        \" 'MS_Description', \" + SQLUtils.quoteString(command.getObject(), command.getObject().getDescription()) + \",\" +\n                        \" 'user', '\" + column.getTable().getSchema().getName() + \"',\" +\n                        \" 'table', '\" + column.getTable().getName() + \"',\" +\n                        \" 'column', '\" + column.getName() + \"'\"));\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.mssql/src/org/jkiss/dbeaver/ext/mssql/edit/SQLServerTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":102,"status":"M"},{"authorDate":"2018-11-04 00:58:17","commitOrder":11,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Comment column\",\n                \"COMMENT ON COLUMN \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \".\" + DBUtils.getQuotedIdentifier(column) +\n                    \" IS '\" + column.getComment(new VoidProgressMonitor()) + \"'\"));\n        }\n    }\n","date":"2018-11-04 00:58:17","endLine":92,"groupId":"2473","id":10,"instanceNumber":2,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/82/d5c6860e9f99424c6cc75603f9f873deb81061.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Comment column\",\n                \"COMMENT ON COLUMN \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \".\" + DBUtils.getQuotedIdentifier(column) +\n                    \" IS '\" + column.getComment(new VoidProgressMonitor()) + \"'\"));\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.oracle/src/org/jkiss/dbeaver/ext/oracle/edit/OracleTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":76,"status":"N"}],"commitId":"5b97df4758e024fef20e410ecc4e2e6ed4b04652","commitMessage":"@@@#2793 SQL Server: table and column comments\n\n\nFormer-commit-id: 66f5727016973d8439ecf89ff20ae4187fe8b9b3","date":"2018-11-14 22:28:52","modifiedFileCount":"2","status":"M","submitter":"Serge Rider"},{"authorTime":"2018-11-04 00:58:17","codes":[{"authorDate":"2019-08-25 22:16:20","commitOrder":12,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        int totalProps = command.getProperties().size();\n        boolean hasComment = command.getProperty(DBConstants.PROP_ID_DESCRIPTION) != null;\n        if (hasComment) totalProps--;\n        if (column.isPersisted() && command.hasProperty(\"defaultValue\")) {\n            totalProps--;\n\n            \r\n            String oldConstraintName = null;\n            try (JDBCSession session = DBUtils.openMetaSession(monitor, column, \"Read default constraint\")) {\n                oldConstraintName = JDBCUtils.queryString(session, \"SELECT name FROM \" +\n                    SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), \"DEFAULT_CONSTRAINTS\") +\n                    \" WHERE PARENT_OBJECT_ID = ? AND PARENT_COLUMN_ID = ?\", column.getTable().getObjectId(), column.getObjectId());\n            } catch (SQLException e) {\n                log.error(e);\n            }\n\n            if (oldConstraintName != null) {\n                actionList.add(new SQLDatabasePersistAction(\"Drop default constraint\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \" DROP CONSTRAINT \" + DBUtils.getQuotedIdentifier(column.getDataSource(), oldConstraintName)  \r\n                    ));\n            }\n\n            String defaultValue = column.getDefaultValue();\n            if (!CommonUtils.isEmpty(defaultValue)) {\n                StringBuilder sql = new StringBuilder();\n                sql.append(\"ALTER TABLE \").append(column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL)).append(\" ADD \");\n                DefaultModifier.appendModifier(monitor, column, sql, command);\n                sql.append(\" FOR \").append(DBUtils.getQuotedIdentifier(column));\n                actionList.add(new SQLDatabasePersistAction(\"Alter default value\", sql.toString())); \r\n            }\n        }\n        if (hasComment) {\n            boolean isUpdate = SQLServerUtils.isCommentSet(\n                monitor,\n                column.getTable().getDatabase(),\n                SQLServerObjectClass.OBJECT_OR_COLUMN,\n                column.getTable().getObjectId(),\n                column.getObjectId());\n            actionList.add(\n                new SQLDatabasePersistAction(\n                    \"Add column comment\",\n                    \"EXEC \" + SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), isUpdate ? \"sp_updateextendedproperty\" : \"sp_addextendedproperty\") +\n                        \" 'MS_Description', \" + SQLUtils.quoteString(command.getObject(), command.getObject().getDescription()) + \",\" +\n                        \" 'user', '\" + column.getTable().getSchema().getName() + \"',\" +\n                        \" 'table', '\" + column.getTable().getName() + \"',\" +\n                        \" 'column', '\" + column.getName() + \"'\"));\n        }\n        if (totalProps > 0) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                    \" ALTER COLUMN \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n    }\n","date":"2019-08-25 22:16:20","endLine":164,"groupId":"2473","id":11,"instanceNumber":1,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/f4/5d030a7a0c7cee70416f74bf1d0514ff9c7aa1.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(DBConstants.PROP_ID_DESCRIPTION) != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" ALTER COLUMN \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            boolean isUpdate = SQLServerUtils.isCommentSet(\n                monitor,\n                column.getTable().getDatabase(),\n                SQLServerObjectClass.OBJECT_OR_COLUMN,\n                column.getTable().getObjectId(),\n                column.getObjectId());\n            actionList.add(\n                new SQLDatabasePersistAction(\n                    \"Add column comment\",\n                    \"EXEC \" + SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), isUpdate ? \"sp_updateextendedproperty\" : \"sp_addextendedproperty\") +\n                        \" 'MS_Description', \" + SQLUtils.quoteString(command.getObject(), command.getObject().getDescription()) + \",\" +\n                        \" 'user', '\" + column.getTable().getSchema().getName() + \"',\" +\n                        \" 'table', '\" + column.getTable().getName() + \"',\" +\n                        \" 'column', '\" + column.getName() + \"'\"));\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.mssql/src/org/jkiss/dbeaver/ext/mssql/edit/SQLServerTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":108,"status":"M"},{"authorDate":"2018-11-04 00:58:17","commitOrder":12,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Comment column\",\n                \"COMMENT ON COLUMN \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \".\" + DBUtils.getQuotedIdentifier(column) +\n                    \" IS '\" + column.getComment(new VoidProgressMonitor()) + \"'\"));\n        }\n    }\n","date":"2018-11-04 00:58:17","endLine":92,"groupId":"2473","id":12,"instanceNumber":2,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/82/d5c6860e9f99424c6cc75603f9f873deb81061.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Comment column\",\n                \"COMMENT ON COLUMN \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \".\" + DBUtils.getQuotedIdentifier(column) +\n                    \" IS '\" + column.getComment(new VoidProgressMonitor()) + \"'\"));\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.oracle/src/org/jkiss/dbeaver/ext/oracle/edit/OracleTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":76,"status":"N"}],"commitId":"077aefeaedd901b7e58b61fd1e23c9e16d8cc827","commitMessage":"@@@#6583 SQL Server: column default value change support\n\n\nFormer-commit-id: 39a1f8af0ab96358d789ac57c93e3aae2db51efa","date":"2019-08-25 22:16:20","modifiedFileCount":"1","status":"M","submitter":"serge-rider"},{"authorTime":"2019-10-29 20:01:31","codes":[{"authorDate":"2019-08-25 22:16:20","commitOrder":13,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        int totalProps = command.getProperties().size();\n        boolean hasComment = command.getProperty(DBConstants.PROP_ID_DESCRIPTION) != null;\n        if (hasComment) totalProps--;\n        if (column.isPersisted() && command.hasProperty(\"defaultValue\")) {\n            totalProps--;\n\n            \r\n            String oldConstraintName = null;\n            try (JDBCSession session = DBUtils.openMetaSession(monitor, column, \"Read default constraint\")) {\n                oldConstraintName = JDBCUtils.queryString(session, \"SELECT name FROM \" +\n                    SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), \"DEFAULT_CONSTRAINTS\") +\n                    \" WHERE PARENT_OBJECT_ID = ? AND PARENT_COLUMN_ID = ?\", column.getTable().getObjectId(), column.getObjectId());\n            } catch (SQLException e) {\n                log.error(e);\n            }\n\n            if (oldConstraintName != null) {\n                actionList.add(new SQLDatabasePersistAction(\"Drop default constraint\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \" DROP CONSTRAINT \" + DBUtils.getQuotedIdentifier(column.getDataSource(), oldConstraintName)  \r\n                    ));\n            }\n\n            String defaultValue = column.getDefaultValue();\n            if (!CommonUtils.isEmpty(defaultValue)) {\n                StringBuilder sql = new StringBuilder();\n                sql.append(\"ALTER TABLE \").append(column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL)).append(\" ADD \");\n                DefaultModifier.appendModifier(monitor, column, sql, command);\n                sql.append(\" FOR \").append(DBUtils.getQuotedIdentifier(column));\n                actionList.add(new SQLDatabasePersistAction(\"Alter default value\", sql.toString())); \r\n            }\n        }\n        if (hasComment) {\n            boolean isUpdate = SQLServerUtils.isCommentSet(\n                monitor,\n                column.getTable().getDatabase(),\n                SQLServerObjectClass.OBJECT_OR_COLUMN,\n                column.getTable().getObjectId(),\n                column.getObjectId());\n            actionList.add(\n                new SQLDatabasePersistAction(\n                    \"Add column comment\",\n                    \"EXEC \" + SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), isUpdate ? \"sp_updateextendedproperty\" : \"sp_addextendedproperty\") +\n                        \" 'MS_Description', \" + SQLUtils.quoteString(command.getObject(), command.getObject().getDescription()) + \",\" +\n                        \" 'user', '\" + column.getTable().getSchema().getName() + \"',\" +\n                        \" 'table', '\" + column.getTable().getName() + \"',\" +\n                        \" 'column', '\" + column.getName() + \"'\"));\n        }\n        if (totalProps > 0) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                    \" ALTER COLUMN \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n    }\n","date":"2019-08-25 22:16:20","endLine":164,"groupId":"2473","id":13,"instanceNumber":1,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/f4/5d030a7a0c7cee70416f74bf1d0514ff9c7aa1.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        int totalProps = command.getProperties().size();\n        boolean hasComment = command.getProperty(DBConstants.PROP_ID_DESCRIPTION) != null;\n        if (hasComment) totalProps--;\n        if (column.isPersisted() && command.hasProperty(\"defaultValue\")) {\n            totalProps--;\n\n            \r\n            String oldConstraintName = null;\n            try (JDBCSession session = DBUtils.openMetaSession(monitor, column, \"Read default constraint\")) {\n                oldConstraintName = JDBCUtils.queryString(session, \"SELECT name FROM \" +\n                    SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), \"DEFAULT_CONSTRAINTS\") +\n                    \" WHERE PARENT_OBJECT_ID = ? AND PARENT_COLUMN_ID = ?\", column.getTable().getObjectId(), column.getObjectId());\n            } catch (SQLException e) {\n                log.error(e);\n            }\n\n            if (oldConstraintName != null) {\n                actionList.add(new SQLDatabasePersistAction(\"Drop default constraint\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \" DROP CONSTRAINT \" + DBUtils.getQuotedIdentifier(column.getDataSource(), oldConstraintName)  \r\n                    ));\n            }\n\n            String defaultValue = column.getDefaultValue();\n            if (!CommonUtils.isEmpty(defaultValue)) {\n                StringBuilder sql = new StringBuilder();\n                sql.append(\"ALTER TABLE \").append(column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL)).append(\" ADD \");\n                DefaultModifier.appendModifier(monitor, column, sql, command);\n                sql.append(\" FOR \").append(DBUtils.getQuotedIdentifier(column));\n                actionList.add(new SQLDatabasePersistAction(\"Alter default value\", sql.toString())); \r\n            }\n        }\n        if (hasComment) {\n            boolean isUpdate = SQLServerUtils.isCommentSet(\n                monitor,\n                column.getTable().getDatabase(),\n                SQLServerObjectClass.OBJECT_OR_COLUMN,\n                column.getTable().getObjectId(),\n                column.getObjectId());\n            actionList.add(\n                new SQLDatabasePersistAction(\n                    \"Add column comment\",\n                    \"EXEC \" + SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), isUpdate ? \"sp_updateextendedproperty\" : \"sp_addextendedproperty\") +\n                        \" 'MS_Description', \" + SQLUtils.quoteString(command.getObject(), command.getObject().getDescription()) + \",\" +\n                        \" 'user', '\" + column.getTable().getSchema().getName() + \"',\" +\n                        \" 'table', '\" + column.getTable().getName() + \"',\" +\n                        \" 'column', '\" + column.getName() + \"'\"));\n        }\n        if (totalProps > 0) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                    \" ALTER COLUMN \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.mssql/src/org/jkiss/dbeaver/ext/mssql/edit/SQLServerTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":108,"status":"N"},{"authorDate":"2019-10-29 20:01:31","commitOrder":13,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            addColumnCommentAction(actionList, column);\n        }\n    }\n","date":"2019-10-29 20:01:31","endLine":104,"groupId":"2473","id":14,"instanceNumber":2,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/c2/2c786f6f5da691b525d8e2861528bf75f9c6a7.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Comment column\",\n                \"COMMENT ON COLUMN \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \".\" + DBUtils.getQuotedIdentifier(column) +\n                    \" IS '\" + column.getComment(new VoidProgressMonitor()) + \"'\"));\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.oracle/src/org/jkiss/dbeaver/ext/oracle/edit/OracleTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":91,"status":"M"}],"commitId":"53ee1958479791f62c16b0019868ca6b44d6f27e","commitMessage":"@@@#6940 Oracle table comments: include in create DDL\n\n\nFormer-commit-id: 3ac8473beb0d20fa382686ec4750946bf18ad725","date":"2019-10-29 20:01:31","modifiedFileCount":"2","status":"M","submitter":"Serge Rider"},{"authorTime":"2020-01-13 04:05:09","codes":[{"authorDate":"2020-01-13 04:05:09","commitOrder":14,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        int totalProps = command.getProperties().size();\n        boolean hasComment = command.getProperty(DBConstants.PROP_ID_DESCRIPTION) != null;\n        if (hasComment) totalProps--;\n        if (column.isPersisted() && command.hasProperty(\"defaultValue\")) {\n            totalProps--;\n\n            \r\n            String oldConstraintName = null;\n            try (JDBCSession session = DBUtils.openMetaSession(monitor, column, \"Read default constraint\")) {\n                oldConstraintName = JDBCUtils.queryString(session, \"SELECT name FROM \" +\n                    SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), \"DEFAULT_CONSTRAINTS\") +\n                    \" WHERE PARENT_OBJECT_ID = ? AND PARENT_COLUMN_ID = ?\", column.getTable().getObjectId(), column.getObjectId());\n            } catch (SQLException e) {\n                log.error(e);\n            }\n\n            if (oldConstraintName != null) {\n                actionList.add(new SQLDatabasePersistAction(\"Drop default constraint\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \" DROP CONSTRAINT \" + DBUtils.getQuotedIdentifier(column.getDataSource(), oldConstraintName)  \r\n                    ));\n            }\n\n            String defaultValue = column.getDefaultValue();\n            if (!CommonUtils.isEmpty(defaultValue)) {\n                StringBuilder sql = new StringBuilder();\n                sql.append(\"ALTER TABLE \").append(column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL)).append(\" ADD \");\n                DefaultModifier.appendModifier(monitor, column, sql, command);\n                sql.append(\" FOR \").append(DBUtils.getQuotedIdentifier(column));\n                actionList.add(new SQLDatabasePersistAction(\"Alter default value\", sql.toString())); \r\n            }\n        }\n        if (hasComment) {\n            boolean isUpdate = SQLServerUtils.isCommentSet(\n                monitor,\n                column.getTable().getDatabase(),\n                SQLServerObjectClass.OBJECT_OR_COLUMN,\n                column.getTable().getObjectId(),\n                column.getObjectId());\n            actionList.add(\n                new SQLDatabasePersistAction(\n                    \"Add column comment\",\n                    \"EXEC \" + SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), isUpdate ? \"sp_updateextendedproperty\" : \"sp_addextendedproperty\") +\n                        \" 'MS_Description', \" + SQLUtils.quoteString(command.getObject(), command.getObject().getDescription()) + \",\" +\n                        \" 'user', '\" + column.getTable().getSchema().getName() + \"',\" +\n                        \" 'table', '\" + column.getTable().getName() + \"',\" +\n                        \" 'column', '\" + column.getName() + \"'\"));\n        }\n        if (totalProps > 0) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                    \" ALTER COLUMN \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n    }\n","date":"2020-01-13 04:05:09","endLine":165,"groupId":"2473","id":15,"instanceNumber":1,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@DBCExecutionContextexecutionContext@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/65/44e6f22431582677d954cb4c174c0bb6321a67.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        int totalProps = command.getProperties().size();\n        boolean hasComment = command.getProperty(DBConstants.PROP_ID_DESCRIPTION) != null;\n        if (hasComment) totalProps--;\n        if (column.isPersisted() && command.hasProperty(\"defaultValue\")) {\n            totalProps--;\n\n            \r\n            String oldConstraintName = null;\n            try (JDBCSession session = DBUtils.openMetaSession(monitor, column, \"Read default constraint\")) {\n                oldConstraintName = JDBCUtils.queryString(session, \"SELECT name FROM \" +\n                    SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), \"DEFAULT_CONSTRAINTS\") +\n                    \" WHERE PARENT_OBJECT_ID = ? AND PARENT_COLUMN_ID = ?\", column.getTable().getObjectId(), column.getObjectId());\n            } catch (SQLException e) {\n                log.error(e);\n            }\n\n            if (oldConstraintName != null) {\n                actionList.add(new SQLDatabasePersistAction(\"Drop default constraint\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \" DROP CONSTRAINT \" + DBUtils.getQuotedIdentifier(column.getDataSource(), oldConstraintName)  \r\n                    ));\n            }\n\n            String defaultValue = column.getDefaultValue();\n            if (!CommonUtils.isEmpty(defaultValue)) {\n                StringBuilder sql = new StringBuilder();\n                sql.append(\"ALTER TABLE \").append(column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL)).append(\" ADD \");\n                DefaultModifier.appendModifier(monitor, column, sql, command);\n                sql.append(\" FOR \").append(DBUtils.getQuotedIdentifier(column));\n                actionList.add(new SQLDatabasePersistAction(\"Alter default value\", sql.toString())); \r\n            }\n        }\n        if (hasComment) {\n            boolean isUpdate = SQLServerUtils.isCommentSet(\n                monitor,\n                column.getTable().getDatabase(),\n                SQLServerObjectClass.OBJECT_OR_COLUMN,\n                column.getTable().getObjectId(),\n                column.getObjectId());\n            actionList.add(\n                new SQLDatabasePersistAction(\n                    \"Add column comment\",\n                    \"EXEC \" + SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), isUpdate ? \"sp_updateextendedproperty\" : \"sp_addextendedproperty\") +\n                        \" 'MS_Description', \" + SQLUtils.quoteString(command.getObject(), command.getObject().getDescription()) + \",\" +\n                        \" 'user', '\" + column.getTable().getSchema().getName() + \"',\" +\n                        \" 'table', '\" + column.getTable().getName() + \"',\" +\n                        \" 'column', '\" + column.getName() + \"'\"));\n        }\n        if (totalProps > 0) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                    \" ALTER COLUMN \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.mssql/src/org/jkiss/dbeaver/ext/mssql/edit/SQLServerTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":109,"status":"M"},{"authorDate":"2020-01-13 04:05:09","commitOrder":14,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            addColumnCommentAction(actionList, column);\n        }\n    }\n","date":"2020-01-13 04:05:09","endLine":105,"groupId":"2473","id":16,"instanceNumber":2,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@DBCExecutionContextexecutionContext@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/7e/c53c05fe02d9197f8ca4d73b12b1668c77eb18.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            addColumnCommentAction(actionList, column);\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.oracle/src/org/jkiss/dbeaver/ext/oracle/edit/OracleTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":92,"status":"M"}],"commitId":"ea43e170ae31b314627af8f5035dc13373eefe5f","commitMessage":"@@@Merge remote-tracking branch 'origin/devel' into devel\n\n\nFormer-commit-id: b8a88ef308f898dd3c5f78540f0e556e77b18cad","date":"2020-01-13 04:05:09","modifiedFileCount":"136","status":"M","submitter":"serge-rider"},{"authorTime":"2020-01-13 04:05:09","codes":[{"authorDate":"2020-03-25 00:06:16","commitOrder":15,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        int totalProps = command.getProperties().size();\n        boolean hasComment = command.getProperty(DBConstants.PROP_ID_DESCRIPTION) != null;\n        if (hasComment) totalProps--;\n        if (column.isPersisted() && command.hasProperty(\"defaultValue\")) {\n            totalProps--;\n\n            \r\n            String oldConstraintName = null;\n            try (JDBCSession session = DBUtils.openMetaSession(monitor, column, \"Read default constraint\")) {\n                oldConstraintName = JDBCUtils.queryString(session, \"SELECT name FROM \" +\n                    SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), \"DEFAULT_CONSTRAINTS\") +\n                    \" WHERE PARENT_OBJECT_ID = ? AND PARENT_COLUMN_ID = ?\", column.getTable().getObjectId(), column.getObjectId());\n            } catch (SQLException e) {\n                log.error(e);\n            }\n\n            if (oldConstraintName != null) {\n                actionList.add(new SQLDatabasePersistAction(\"Drop default constraint\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \" DROP CONSTRAINT \" + DBUtils.getQuotedIdentifier(column.getDataSource(), oldConstraintName)  \r\n                    ));\n            }\n\n            String defaultValue = column.getDefaultValue();\n            if (!CommonUtils.isEmpty(defaultValue)) {\n                StringBuilder sql = new StringBuilder();\n                sql.append(\"ALTER TABLE \").append(column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL)).append(\" ADD \");\n                DefaultModifier.appendModifier(monitor, column, sql, command);\n                sql.append(\" FOR \").append(DBUtils.getQuotedIdentifier(column));\n                actionList.add(new SQLDatabasePersistAction(\"Alter default value\", sql.toString())); \r\n            }\n        }\n        if (hasComment) {\n            boolean isUpdate = SQLServerUtils.isCommentSet(\n                monitor,\n                column.getTable().getDatabase(),\n                SQLServerObjectClass.OBJECT_OR_COLUMN,\n                column.getTable().getObjectId(),\n                column.getObjectId());\n            actionList.add(\n                new SQLDatabasePersistAction(\n                    \"Add column comment\",\n                    \"EXEC \" + SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), isUpdate ? \"sp_updateextendedproperty\" : \"sp_addextendedproperty\") +\n                        \" 'MS_Description', \" + SQLUtils.quoteString(command.getObject(), command.getObject().getDescription()) + \",\" +\n                        \" 'schema', '\" + column.getTable().getSchema().getName() + \"',\" +\n                        \" 'table', '\" + column.getTable().getName() + \"',\" +\n                        \" 'column', '\" + column.getName() + \"'\"));\n        }\n        if (totalProps > 0) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                    \" ALTER COLUMN \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n    }\n","date":"2020-03-25 00:06:16","endLine":165,"groupId":"2473","id":17,"instanceNumber":1,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@DBCExecutionContextexecutionContext@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/4a/81c7503f0caf12a8f0e0704b7294e147f54d85.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        int totalProps = command.getProperties().size();\n        boolean hasComment = command.getProperty(DBConstants.PROP_ID_DESCRIPTION) != null;\n        if (hasComment) totalProps--;\n        if (column.isPersisted() && command.hasProperty(\"defaultValue\")) {\n            totalProps--;\n\n            \r\n            String oldConstraintName = null;\n            try (JDBCSession session = DBUtils.openMetaSession(monitor, column, \"Read default constraint\")) {\n                oldConstraintName = JDBCUtils.queryString(session, \"SELECT name FROM \" +\n                    SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), \"DEFAULT_CONSTRAINTS\") +\n                    \" WHERE PARENT_OBJECT_ID = ? AND PARENT_COLUMN_ID = ?\", column.getTable().getObjectId(), column.getObjectId());\n            } catch (SQLException e) {\n                log.error(e);\n            }\n\n            if (oldConstraintName != null) {\n                actionList.add(new SQLDatabasePersistAction(\"Drop default constraint\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \" DROP CONSTRAINT \" + DBUtils.getQuotedIdentifier(column.getDataSource(), oldConstraintName)  \r\n                    ));\n            }\n\n            String defaultValue = column.getDefaultValue();\n            if (!CommonUtils.isEmpty(defaultValue)) {\n                StringBuilder sql = new StringBuilder();\n                sql.append(\"ALTER TABLE \").append(column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL)).append(\" ADD \");\n                DefaultModifier.appendModifier(monitor, column, sql, command);\n                sql.append(\" FOR \").append(DBUtils.getQuotedIdentifier(column));\n                actionList.add(new SQLDatabasePersistAction(\"Alter default value\", sql.toString())); \r\n            }\n        }\n        if (hasComment) {\n            boolean isUpdate = SQLServerUtils.isCommentSet(\n                monitor,\n                column.getTable().getDatabase(),\n                SQLServerObjectClass.OBJECT_OR_COLUMN,\n                column.getTable().getObjectId(),\n                column.getObjectId());\n            actionList.add(\n                new SQLDatabasePersistAction(\n                    \"Add column comment\",\n                    \"EXEC \" + SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), isUpdate ? \"sp_updateextendedproperty\" : \"sp_addextendedproperty\") +\n                        \" 'MS_Description', \" + SQLUtils.quoteString(command.getObject(), command.getObject().getDescription()) + \",\" +\n                        \" 'user', '\" + column.getTable().getSchema().getName() + \"',\" +\n                        \" 'table', '\" + column.getTable().getName() + \"',\" +\n                        \" 'column', '\" + column.getName() + \"'\"));\n        }\n        if (totalProps > 0) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                    \" ALTER COLUMN \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.mssql/src/org/jkiss/dbeaver/ext/mssql/edit/SQLServerTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":109,"status":"M"},{"authorDate":"2020-01-13 04:05:09","commitOrder":15,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            addColumnCommentAction(actionList, column);\n        }\n    }\n","date":"2020-01-13 04:05:09","endLine":105,"groupId":"2473","id":18,"instanceNumber":2,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@DBCExecutionContextexecutionContext@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/7e/c53c05fe02d9197f8ca4d73b12b1668c77eb18.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            addColumnCommentAction(actionList, column);\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.oracle/src/org/jkiss/dbeaver/ext/oracle/edit/OracleTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":92,"status":"N"}],"commitId":"8ac9977357f94047b50d7f0c851c8e08c7b9d511","commitMessage":"@@@#8174 SQL Server: column comment edit.  use 'schema' instead of 'user'\n\n\nFormer-commit-id: cdae17574e8c9fcd9caa5b15bf556604d5638930","date":"2020-03-25 00:06:16","modifiedFileCount":"1","status":"M","submitter":"Serge Rider"},{"authorTime":"2020-01-13 04:05:09","codes":[{"authorDate":"2020-10-29 22:55:35","commitOrder":16,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        int totalProps = command.getProperties().size();\n        boolean hasComment = command.getProperty(DBConstants.PROP_ID_DESCRIPTION) != null;\n        if (hasComment) totalProps--;\n        if (column.isPersisted() && command.hasProperty(\"defaultValue\")) {\n            totalProps--;\n\n            \r\n            String oldConstraintName = null;\n            try (JDBCSession session = DBUtils.openMetaSession(monitor, column, \"Read default constraint\")) {\n                oldConstraintName = JDBCUtils.queryString(session, \"SELECT name FROM \" +\n                    SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), \"DEFAULT_CONSTRAINTS\") +\n                    \" WHERE PARENT_OBJECT_ID = ? AND PARENT_COLUMN_ID = ?\", column.getTable().getObjectId(), column.getObjectId());\n            } catch (SQLException e) {\n                log.error(e);\n            }\n\n            if (oldConstraintName != null) {\n                actionList.add(new SQLDatabasePersistAction(\"Drop default constraint\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \" DROP CONSTRAINT \" + DBUtils.getQuotedIdentifier(column.getDataSource(), oldConstraintName)  \r\n                    ));\n            }\n\n            String defaultValue = column.getDefaultValue();\n            if (!CommonUtils.isEmpty(defaultValue)) {\n                StringBuilder sql = new StringBuilder();\n                sql.append(\"ALTER TABLE \").append(column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL)).append(\" ADD \"); \r\n                DefaultModifier.appendModifier(monitor, column, sql, command);\n                sql.append(\" FOR \").append(DBUtils.getQuotedIdentifier(column)); \r\n                actionList.add(new SQLDatabasePersistAction(\"Alter default value\", sql.toString())); \r\n            }\n        }\n        if (hasComment) {\n            boolean isUpdate = SQLServerUtils.isCommentSet(\n                monitor,\n                column.getTable().getDatabase(),\n                SQLServerObjectClass.OBJECT_OR_COLUMN,\n                column.getTable().getObjectId(),\n                column.getObjectId());\n            actionList.add(\n                new SQLDatabasePersistAction(\n                    \"Add column comment\",\n                    \"EXEC \" + SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), isUpdate ? \"sp_updateextendedproperty\" : \"sp_addextendedproperty\") +\n                        \" 'MS_Description', N\" + SQLUtils.quoteString(command.getObject(), command.getObject().getDescription()) + \",\" +\n                        \" 'schema', N'\" + column.getTable().getSchema().getName() + \"',\" +\n                        \" 'table', N'\" + column.getTable().getName() + \"',\" +\n                        \" 'column', N'\" + column.getName() + \"'\"));\n        }\n        if (totalProps > 0) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                    \" ALTER COLUMN \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n    }\n","date":"2020-10-29 22:55:35","endLine":184,"groupId":"2473","id":19,"instanceNumber":1,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@DBCExecutionContextexecutionContext@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/82/9b8da100f6b61ec08bcb5068f90abf91fac048.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        int totalProps = command.getProperties().size();\n        boolean hasComment = command.getProperty(DBConstants.PROP_ID_DESCRIPTION) != null;\n        if (hasComment) totalProps--;\n        if (column.isPersisted() && command.hasProperty(\"defaultValue\")) {\n            totalProps--;\n\n            \r\n            String oldConstraintName = null;\n            try (JDBCSession session = DBUtils.openMetaSession(monitor, column, \"Read default constraint\")) {\n                oldConstraintName = JDBCUtils.queryString(session, \"SELECT name FROM \" +\n                    SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), \"DEFAULT_CONSTRAINTS\") +\n                    \" WHERE PARENT_OBJECT_ID = ? AND PARENT_COLUMN_ID = ?\", column.getTable().getObjectId(), column.getObjectId());\n            } catch (SQLException e) {\n                log.error(e);\n            }\n\n            if (oldConstraintName != null) {\n                actionList.add(new SQLDatabasePersistAction(\"Drop default constraint\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \" DROP CONSTRAINT \" + DBUtils.getQuotedIdentifier(column.getDataSource(), oldConstraintName)  \r\n                    ));\n            }\n\n            String defaultValue = column.getDefaultValue();\n            if (!CommonUtils.isEmpty(defaultValue)) {\n                StringBuilder sql = new StringBuilder();\n                sql.append(\"ALTER TABLE \").append(column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL)).append(\" ADD \"); \r\n                DefaultModifier.appendModifier(monitor, column, sql, command);\n                sql.append(\" FOR \").append(DBUtils.getQuotedIdentifier(column)); \r\n                actionList.add(new SQLDatabasePersistAction(\"Alter default value\", sql.toString())); \r\n            }\n        }\n        if (hasComment) {\n            boolean isUpdate = SQLServerUtils.isCommentSet(\n                monitor,\n                column.getTable().getDatabase(),\n                SQLServerObjectClass.OBJECT_OR_COLUMN,\n                column.getTable().getObjectId(),\n                column.getObjectId());\n            actionList.add(\n                new SQLDatabasePersistAction(\n                    \"Add column comment\",\n                    \"EXEC \" + SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), isUpdate ? \"sp_updateextendedproperty\" : \"sp_addextendedproperty\") +\n                        \" 'MS_Description', \" + SQLUtils.quoteString(command.getObject(), command.getObject().getDescription()) + \",\" +\n                        \" 'schema', '\" + column.getTable().getSchema().getName() + \"',\" +\n                        \" 'table', '\" + column.getTable().getName() + \"',\" +\n                        \" 'column', '\" + column.getName() + \"'\"));\n        }\n        if (totalProps > 0) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                    \" ALTER COLUMN \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.mssql/src/org/jkiss/dbeaver/ext/mssql/edit/SQLServerTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":128,"status":"M"},{"authorDate":"2020-01-13 04:05:09","commitOrder":16,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            addColumnCommentAction(actionList, column);\n        }\n    }\n","date":"2020-01-13 04:05:09","endLine":105,"groupId":"2473","id":20,"instanceNumber":2,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@DBCExecutionContextexecutionContext@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/7e/c53c05fe02d9197f8ca4d73b12b1668c77eb18.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            addColumnCommentAction(actionList, column);\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.oracle/src/org/jkiss/dbeaver/ext/oracle/edit/OracleTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":92,"status":"N"}],"commitId":"da6a13223bc92b029d47c34b7665855f045ad09f","commitMessage":"@@@Merge pull request #10201 from dbeaver/sqlserver-comments-utf8#9664\n\n#9664 SQL Server Unicode text\n\nFormer-commit-id: 7a7c2d51c9f2e8a3fb256f5da0c22e3478fba2ad","date":"2020-10-29 22:55:35","modifiedFileCount":"4","status":"M","submitter":"Serge Rider"},{"authorTime":"2020-01-13 04:05:09","codes":[{"authorDate":"2021-03-31 23:52:23","commitOrder":17,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        int totalProps = command.getProperties().size();\n        boolean hasComment = command.getProperty(DBConstants.PROP_ID_DESCRIPTION) != null;\n        if (hasComment) totalProps--;\n        if (column.isPersisted() && command.hasProperty(\"defaultValue\")) {\n            totalProps--;\n\n            \r\n            String oldConstraintName = null;\n            try (JDBCSession session = DBUtils.openMetaSession(monitor, column, \"Read default constraint\")) {\n                oldConstraintName = JDBCUtils.queryString(session, \"SELECT name FROM \" +\n                    SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), \"DEFAULT_CONSTRAINTS\") +\n                    \" WHERE PARENT_OBJECT_ID = ? AND PARENT_COLUMN_ID = ?\", column.getTable().getObjectId(), column.getObjectId());\n            } catch (SQLException e) {\n                log.error(e);\n            }\n\n            if (oldConstraintName != null) {\n                actionList.add(new SQLDatabasePersistAction(\"Drop default constraint\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \" DROP CONSTRAINT \" + DBUtils.getQuotedIdentifier(column.getDataSource(), oldConstraintName)  \r\n                    ));\n            }\n\n            String defaultValue = column.getDefaultValue();\n            if (!CommonUtils.isEmpty(defaultValue)) {\n                StringBuilder sql = new StringBuilder();\n                sql.append(\"ALTER TABLE \").append(column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL)).append(\" ADD \"); \r\n                DefaultModifier.appendModifier(monitor, column, sql, command);\n                sql.append(\" FOR \").append(DBUtils.getQuotedIdentifier(column)); \r\n                actionList.add(new SQLDatabasePersistAction(\"Alter default value\", sql.toString())); \r\n            }\n        }\n        if (hasComment) {\n            boolean isUpdate = SQLServerUtils.isCommentSet(\n                monitor,\n                column.getTable().getDatabase(),\n                SQLServerObjectClass.OBJECT_OR_COLUMN,\n                column.getTable().getObjectId(),\n                column.getObjectId());\n            actionList.add(\n                new SQLDatabasePersistAction(\n                    \"Add column comment\",\n                    \"EXEC \" + SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), isUpdate ? \"sp_updateextendedproperty\" : \"sp_addextendedproperty\") +\n                        \" 'MS_Description', \" + SQLUtils.quoteString(column, column.getDescription()) + \",\" +\n                        \" 'schema', \" + SQLUtils.quoteString(column, column.getTable().getSchema().getName()) + \",\" +\n                        \" 'table', \" + SQLUtils.quoteString(column, column.getTable().getName()) + \",\" +\n                        \" 'column', \" + SQLUtils.quoteString(column, column.getName())));\n        }\n        if (totalProps > 0) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                    \" ALTER COLUMN \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n    }\n","date":"2021-03-31 23:52:23","endLine":184,"groupId":"2473","id":21,"instanceNumber":1,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@DBCExecutionContextexecutionContext@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/bb/c0df96b968818a84b6d63fc4027618225fbebb.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        int totalProps = command.getProperties().size();\n        boolean hasComment = command.getProperty(DBConstants.PROP_ID_DESCRIPTION) != null;\n        if (hasComment) totalProps--;\n        if (column.isPersisted() && command.hasProperty(\"defaultValue\")) {\n            totalProps--;\n\n            \r\n            String oldConstraintName = null;\n            try (JDBCSession session = DBUtils.openMetaSession(monitor, column, \"Read default constraint\")) {\n                oldConstraintName = JDBCUtils.queryString(session, \"SELECT name FROM \" +\n                    SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), \"DEFAULT_CONSTRAINTS\") +\n                    \" WHERE PARENT_OBJECT_ID = ? AND PARENT_COLUMN_ID = ?\", column.getTable().getObjectId(), column.getObjectId());\n            } catch (SQLException e) {\n                log.error(e);\n            }\n\n            if (oldConstraintName != null) {\n                actionList.add(new SQLDatabasePersistAction(\"Drop default constraint\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \" DROP CONSTRAINT \" + DBUtils.getQuotedIdentifier(column.getDataSource(), oldConstraintName)  \r\n                    ));\n            }\n\n            String defaultValue = column.getDefaultValue();\n            if (!CommonUtils.isEmpty(defaultValue)) {\n                StringBuilder sql = new StringBuilder();\n                sql.append(\"ALTER TABLE \").append(column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL)).append(\" ADD \"); \r\n                DefaultModifier.appendModifier(monitor, column, sql, command);\n                sql.append(\" FOR \").append(DBUtils.getQuotedIdentifier(column)); \r\n                actionList.add(new SQLDatabasePersistAction(\"Alter default value\", sql.toString())); \r\n            }\n        }\n        if (hasComment) {\n            boolean isUpdate = SQLServerUtils.isCommentSet(\n                monitor,\n                column.getTable().getDatabase(),\n                SQLServerObjectClass.OBJECT_OR_COLUMN,\n                column.getTable().getObjectId(),\n                column.getObjectId());\n            actionList.add(\n                new SQLDatabasePersistAction(\n                    \"Add column comment\",\n                    \"EXEC \" + SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), isUpdate ? \"sp_updateextendedproperty\" : \"sp_addextendedproperty\") +\n                        \" 'MS_Description', N\" + SQLUtils.quoteString(command.getObject(), command.getObject().getDescription()) + \",\" +\n                        \" 'schema', N'\" + column.getTable().getSchema().getName() + \"',\" +\n                        \" 'table', N'\" + column.getTable().getName() + \"',\" +\n                        \" 'column', N'\" + column.getName() + \"'\"));\n        }\n        if (totalProps > 0) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                    \" ALTER COLUMN \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.mssql/src/org/jkiss/dbeaver/ext/mssql/edit/SQLServerTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":128,"status":"M"},{"authorDate":"2020-01-13 04:05:09","commitOrder":17,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            addColumnCommentAction(actionList, column);\n        }\n    }\n","date":"2020-01-13 04:05:09","endLine":105,"groupId":"2473","id":22,"instanceNumber":2,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@DBCExecutionContextexecutionContext@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/7e/c53c05fe02d9197f8ca4d73b12b1668c77eb18.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            addColumnCommentAction(actionList, column);\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.oracle/src/org/jkiss/dbeaver/ext/oracle/edit/OracleTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":92,"status":"N"}],"commitId":"4eb83f0088d4a535649fb25c4f0d83bd7ed8d356","commitMessage":"@@@Merge remote-tracking branch 'origin/devel' into devel\n\n\nFormer-commit-id: dd519197dd0cfcce6a10408bc15b6391a5585e7c","date":"2021-03-31 23:52:23","modifiedFileCount":"20","status":"M","submitter":"Serge Rider"},{"authorTime":"2021-04-08 04:43:33","codes":[{"authorDate":"2021-03-31 23:52:23","commitOrder":18,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        int totalProps = command.getProperties().size();\n        boolean hasComment = command.getProperty(DBConstants.PROP_ID_DESCRIPTION) != null;\n        if (hasComment) totalProps--;\n        if (column.isPersisted() && command.hasProperty(\"defaultValue\")) {\n            totalProps--;\n\n            \r\n            String oldConstraintName = null;\n            try (JDBCSession session = DBUtils.openMetaSession(monitor, column, \"Read default constraint\")) {\n                oldConstraintName = JDBCUtils.queryString(session, \"SELECT name FROM \" +\n                    SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), \"DEFAULT_CONSTRAINTS\") +\n                    \" WHERE PARENT_OBJECT_ID = ? AND PARENT_COLUMN_ID = ?\", column.getTable().getObjectId(), column.getObjectId());\n            } catch (SQLException e) {\n                log.error(e);\n            }\n\n            if (oldConstraintName != null) {\n                actionList.add(new SQLDatabasePersistAction(\"Drop default constraint\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \" DROP CONSTRAINT \" + DBUtils.getQuotedIdentifier(column.getDataSource(), oldConstraintName)  \r\n                    ));\n            }\n\n            String defaultValue = column.getDefaultValue();\n            if (!CommonUtils.isEmpty(defaultValue)) {\n                StringBuilder sql = new StringBuilder();\n                sql.append(\"ALTER TABLE \").append(column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL)).append(\" ADD \"); \r\n                DefaultModifier.appendModifier(monitor, column, sql, command);\n                sql.append(\" FOR \").append(DBUtils.getQuotedIdentifier(column)); \r\n                actionList.add(new SQLDatabasePersistAction(\"Alter default value\", sql.toString())); \r\n            }\n        }\n        if (hasComment) {\n            boolean isUpdate = SQLServerUtils.isCommentSet(\n                monitor,\n                column.getTable().getDatabase(),\n                SQLServerObjectClass.OBJECT_OR_COLUMN,\n                column.getTable().getObjectId(),\n                column.getObjectId());\n            actionList.add(\n                new SQLDatabasePersistAction(\n                    \"Add column comment\",\n                    \"EXEC \" + SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), isUpdate ? \"sp_updateextendedproperty\" : \"sp_addextendedproperty\") +\n                        \" 'MS_Description', \" + SQLUtils.quoteString(column, column.getDescription()) + \",\" +\n                        \" 'schema', \" + SQLUtils.quoteString(column, column.getTable().getSchema().getName()) + \",\" +\n                        \" 'table', \" + SQLUtils.quoteString(column, column.getTable().getName()) + \",\" +\n                        \" 'column', \" + SQLUtils.quoteString(column, column.getName())));\n        }\n        if (totalProps > 0) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                    \" ALTER COLUMN \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n    }\n","date":"2021-03-31 23:52:23","endLine":184,"groupId":"2473","id":23,"instanceNumber":1,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@DBCExecutionContextexecutionContext@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/bb/c0df96b968818a84b6d63fc4027618225fbebb.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        int totalProps = command.getProperties().size();\n        boolean hasComment = command.getProperty(DBConstants.PROP_ID_DESCRIPTION) != null;\n        if (hasComment) totalProps--;\n        if (column.isPersisted() && command.hasProperty(\"defaultValue\")) {\n            totalProps--;\n\n            \r\n            String oldConstraintName = null;\n            try (JDBCSession session = DBUtils.openMetaSession(monitor, column, \"Read default constraint\")) {\n                oldConstraintName = JDBCUtils.queryString(session, \"SELECT name FROM \" +\n                    SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), \"DEFAULT_CONSTRAINTS\") +\n                    \" WHERE PARENT_OBJECT_ID = ? AND PARENT_COLUMN_ID = ?\", column.getTable().getObjectId(), column.getObjectId());\n            } catch (SQLException e) {\n                log.error(e);\n            }\n\n            if (oldConstraintName != null) {\n                actionList.add(new SQLDatabasePersistAction(\"Drop default constraint\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \" DROP CONSTRAINT \" + DBUtils.getQuotedIdentifier(column.getDataSource(), oldConstraintName)  \r\n                    ));\n            }\n\n            String defaultValue = column.getDefaultValue();\n            if (!CommonUtils.isEmpty(defaultValue)) {\n                StringBuilder sql = new StringBuilder();\n                sql.append(\"ALTER TABLE \").append(column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL)).append(\" ADD \"); \r\n                DefaultModifier.appendModifier(monitor, column, sql, command);\n                sql.append(\" FOR \").append(DBUtils.getQuotedIdentifier(column)); \r\n                actionList.add(new SQLDatabasePersistAction(\"Alter default value\", sql.toString())); \r\n            }\n        }\n        if (hasComment) {\n            boolean isUpdate = SQLServerUtils.isCommentSet(\n                monitor,\n                column.getTable().getDatabase(),\n                SQLServerObjectClass.OBJECT_OR_COLUMN,\n                column.getTable().getObjectId(),\n                column.getObjectId());\n            actionList.add(\n                new SQLDatabasePersistAction(\n                    \"Add column comment\",\n                    \"EXEC \" + SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), isUpdate ? \"sp_updateextendedproperty\" : \"sp_addextendedproperty\") +\n                        \" 'MS_Description', \" + SQLUtils.quoteString(column, column.getDescription()) + \",\" +\n                        \" 'schema', \" + SQLUtils.quoteString(column, column.getTable().getSchema().getName()) + \",\" +\n                        \" 'table', \" + SQLUtils.quoteString(column, column.getTable().getName()) + \",\" +\n                        \" 'column', \" + SQLUtils.quoteString(column, column.getName())));\n        }\n        if (totalProps > 0) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                    \" ALTER COLUMN \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.mssql/src/org/jkiss/dbeaver/ext/mssql/edit/SQLServerTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":128,"status":"N"},{"authorDate":"2021-04-08 04:43:33","commitOrder":18,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            addColumnCommentAction(new VoidProgressMonitor(), actionList, column);\n        }\n    }\n","date":"2021-04-08 04:43:33","endLine":106,"groupId":"2473","id":24,"instanceNumber":2,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@DBCExecutionContextexecutionContext@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/48/5255cb63619c55d82a9ea4418b29b9315b6564.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            addColumnCommentAction(actionList, column);\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.oracle/src/org/jkiss/dbeaver/ext/oracle/edit/OracleTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":93,"status":"M"}],"commitId":"5e37e140a08e859bd36f7d55771c29423df32f3b","commitMessage":"@@@Merge remote-tracking branch 'origin/devel' into devel\n\n\nFormer-commit-id: d8e6b1ab84719284c2861825a31f2376ff3d0534","date":"2021-04-08 04:43:33","modifiedFileCount":"10","status":"M","submitter":"serge-rider"},{"authorTime":"2021-04-08 04:43:33","codes":[{"authorDate":"2021-04-09 23:01:24","commitOrder":19,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        int totalProps = command.getProperties().size();\n        boolean hasComment = command.getProperty(DBConstants.PROP_ID_DESCRIPTION) != null;\n        if (hasComment) totalProps--;\n        if (column.isPersisted() && command.hasProperty(\"defaultValue\")) {\n            totalProps--;\n\n            \r\n            String oldConstraintName = null;\n            try (JDBCSession session = DBUtils.openMetaSession(monitor, column, \"Read default constraint\")) {\n                oldConstraintName = JDBCUtils.queryString(session, \"SELECT name FROM \" +\n                    SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), \"DEFAULT_CONSTRAINTS\") +\n                    \" WHERE PARENT_OBJECT_ID = ? AND PARENT_COLUMN_ID = ?\", column.getTable().getObjectId(), column.getObjectId());\n            } catch (Exception e) {\n                log.error(\"Error reading default constraints\", e);\n            }\n\n            if (oldConstraintName != null) {\n                actionList.add(new SQLDatabasePersistAction(\"Drop default constraint\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \" DROP CONSTRAINT \" + DBUtils.getQuotedIdentifier(column.getDataSource(), oldConstraintName)  \r\n                    ));\n            }\n\n            String defaultValue = column.getDefaultValue();\n            if (!CommonUtils.isEmpty(defaultValue)) {\n                StringBuilder sql = new StringBuilder();\n                sql.append(\"ALTER TABLE \").append(column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL)).append(\" ADD \"); \r\n                DefaultModifier.appendModifier(monitor, column, sql, command);\n                sql.append(\" FOR \").append(DBUtils.getQuotedIdentifier(column)); \r\n                actionList.add(new SQLDatabasePersistAction(\"Alter default value\", sql.toString())); \r\n            }\n        }\n        if (hasComment) {\n            boolean isUpdate = SQLServerUtils.isCommentSet(\n                monitor,\n                column.getTable().getDatabase(),\n                SQLServerObjectClass.OBJECT_OR_COLUMN,\n                column.getTable().getObjectId(),\n                column.getObjectId());\n            actionList.add(\n                new SQLDatabasePersistAction(\n                    \"Add column comment\",\n                    \"EXEC \" + SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), isUpdate ? \"sp_updateextendedproperty\" : \"sp_addextendedproperty\") +\n                        \" 'MS_Description', \" + SQLUtils.quoteString(column, column.getDescription()) + \",\" +\n                        \" 'schema', \" + SQLUtils.quoteString(column, column.getTable().getSchema().getName()) + \",\" +\n                        \" 'table', \" + SQLUtils.quoteString(column, column.getTable().getName()) + \",\" +\n                        \" 'column', \" + SQLUtils.quoteString(column, column.getName())));\n        }\n        if (totalProps > 0) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                    \" ALTER COLUMN \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n    }\n","date":"2021-04-09 23:01:24","endLine":183,"groupId":"2473","id":25,"instanceNumber":1,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@DBCExecutionContextexecutionContext@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/1a/1bb1190a975a432c9d715c8c32556abefe15a3.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        int totalProps = command.getProperties().size();\n        boolean hasComment = command.getProperty(DBConstants.PROP_ID_DESCRIPTION) != null;\n        if (hasComment) totalProps--;\n        if (column.isPersisted() && command.hasProperty(\"defaultValue\")) {\n            totalProps--;\n\n            \r\n            String oldConstraintName = null;\n            try (JDBCSession session = DBUtils.openMetaSession(monitor, column, \"Read default constraint\")) {\n                oldConstraintName = JDBCUtils.queryString(session, \"SELECT name FROM \" +\n                    SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), \"DEFAULT_CONSTRAINTS\") +\n                    \" WHERE PARENT_OBJECT_ID = ? AND PARENT_COLUMN_ID = ?\", column.getTable().getObjectId(), column.getObjectId());\n            } catch (SQLException e) {\n                log.error(e);\n            }\n\n            if (oldConstraintName != null) {\n                actionList.add(new SQLDatabasePersistAction(\"Drop default constraint\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \" DROP CONSTRAINT \" + DBUtils.getQuotedIdentifier(column.getDataSource(), oldConstraintName)  \r\n                    ));\n            }\n\n            String defaultValue = column.getDefaultValue();\n            if (!CommonUtils.isEmpty(defaultValue)) {\n                StringBuilder sql = new StringBuilder();\n                sql.append(\"ALTER TABLE \").append(column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL)).append(\" ADD \"); \r\n                DefaultModifier.appendModifier(monitor, column, sql, command);\n                sql.append(\" FOR \").append(DBUtils.getQuotedIdentifier(column)); \r\n                actionList.add(new SQLDatabasePersistAction(\"Alter default value\", sql.toString())); \r\n            }\n        }\n        if (hasComment) {\n            boolean isUpdate = SQLServerUtils.isCommentSet(\n                monitor,\n                column.getTable().getDatabase(),\n                SQLServerObjectClass.OBJECT_OR_COLUMN,\n                column.getTable().getObjectId(),\n                column.getObjectId());\n            actionList.add(\n                new SQLDatabasePersistAction(\n                    \"Add column comment\",\n                    \"EXEC \" + SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), isUpdate ? \"sp_updateextendedproperty\" : \"sp_addextendedproperty\") +\n                        \" 'MS_Description', \" + SQLUtils.quoteString(column, column.getDescription()) + \",\" +\n                        \" 'schema', \" + SQLUtils.quoteString(column, column.getTable().getSchema().getName()) + \",\" +\n                        \" 'table', \" + SQLUtils.quoteString(column, column.getTable().getName()) + \",\" +\n                        \" 'column', \" + SQLUtils.quoteString(column, column.getName())));\n        }\n        if (totalProps > 0) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                    \" ALTER COLUMN \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.mssql/src/org/jkiss/dbeaver/ext/mssql/edit/SQLServerTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":127,"status":"M"},{"authorDate":"2021-04-08 04:43:33","commitOrder":19,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            addColumnCommentAction(new VoidProgressMonitor(), actionList, column);\n        }\n    }\n","date":"2021-04-08 04:43:33","endLine":106,"groupId":"2473","id":26,"instanceNumber":2,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@DBCExecutionContextexecutionContext@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/48/5255cb63619c55d82a9ea4418b29b9315b6564.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            addColumnCommentAction(new VoidProgressMonitor(), actionList, column);\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.oracle/src/org/jkiss/dbeaver/ext/oracle/edit/OracleTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":93,"status":"N"}],"commitId":"b6a37e2c613c55a56a87322498ee2d0414fcb598","commitMessage":"@@@Merge pull request #12062 from dbeaver/npeERDopemmeta#11806\n\n#11806 added exception to open Meta session; avoid NPE from null defa?\n\nFormer-commit-id: 840b8a120070dc1dbf634e95f6fd9d66b81da406","date":"2021-04-09 23:01:24","modifiedFileCount":"17","status":"M","submitter":"Serge Rider"},{"authorTime":"2021-06-16 23:16:36","codes":[{"authorDate":"2021-04-09 23:01:24","commitOrder":20,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        int totalProps = command.getProperties().size();\n        boolean hasComment = command.getProperty(DBConstants.PROP_ID_DESCRIPTION) != null;\n        if (hasComment) totalProps--;\n        if (column.isPersisted() && command.hasProperty(\"defaultValue\")) {\n            totalProps--;\n\n            \r\n            String oldConstraintName = null;\n            try (JDBCSession session = DBUtils.openMetaSession(monitor, column, \"Read default constraint\")) {\n                oldConstraintName = JDBCUtils.queryString(session, \"SELECT name FROM \" +\n                    SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), \"DEFAULT_CONSTRAINTS\") +\n                    \" WHERE PARENT_OBJECT_ID = ? AND PARENT_COLUMN_ID = ?\", column.getTable().getObjectId(), column.getObjectId());\n            } catch (Exception e) {\n                log.error(\"Error reading default constraints\", e);\n            }\n\n            if (oldConstraintName != null) {\n                actionList.add(new SQLDatabasePersistAction(\"Drop default constraint\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \" DROP CONSTRAINT \" + DBUtils.getQuotedIdentifier(column.getDataSource(), oldConstraintName)  \r\n                    ));\n            }\n\n            String defaultValue = column.getDefaultValue();\n            if (!CommonUtils.isEmpty(defaultValue)) {\n                StringBuilder sql = new StringBuilder();\n                sql.append(\"ALTER TABLE \").append(column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL)).append(\" ADD \"); \r\n                DefaultModifier.appendModifier(monitor, column, sql, command);\n                sql.append(\" FOR \").append(DBUtils.getQuotedIdentifier(column)); \r\n                actionList.add(new SQLDatabasePersistAction(\"Alter default value\", sql.toString())); \r\n            }\n        }\n        if (hasComment) {\n            boolean isUpdate = SQLServerUtils.isCommentSet(\n                monitor,\n                column.getTable().getDatabase(),\n                SQLServerObjectClass.OBJECT_OR_COLUMN,\n                column.getTable().getObjectId(),\n                column.getObjectId());\n            actionList.add(\n                new SQLDatabasePersistAction(\n                    \"Add column comment\",\n                    \"EXEC \" + SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), isUpdate ? \"sp_updateextendedproperty\" : \"sp_addextendedproperty\") +\n                        \" 'MS_Description', \" + SQLUtils.quoteString(column, column.getDescription()) + \",\" +\n                        \" 'schema', \" + SQLUtils.quoteString(column, column.getTable().getSchema().getName()) + \",\" +\n                        \" 'table', \" + SQLUtils.quoteString(column, column.getTable().getName()) + \",\" +\n                        \" 'column', \" + SQLUtils.quoteString(column, column.getName())));\n        }\n        if (totalProps > 0) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                    \" ALTER COLUMN \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n    }\n","date":"2021-04-09 23:01:24","endLine":183,"groupId":"2473","id":27,"instanceNumber":1,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@DBCExecutionContextexecutionContext@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/1a/1bb1190a975a432c9d715c8c32556abefe15a3.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        int totalProps = command.getProperties().size();\n        boolean hasComment = command.getProperty(DBConstants.PROP_ID_DESCRIPTION) != null;\n        if (hasComment) totalProps--;\n        if (column.isPersisted() && command.hasProperty(\"defaultValue\")) {\n            totalProps--;\n\n            \r\n            String oldConstraintName = null;\n            try (JDBCSession session = DBUtils.openMetaSession(monitor, column, \"Read default constraint\")) {\n                oldConstraintName = JDBCUtils.queryString(session, \"SELECT name FROM \" +\n                    SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), \"DEFAULT_CONSTRAINTS\") +\n                    \" WHERE PARENT_OBJECT_ID = ? AND PARENT_COLUMN_ID = ?\", column.getTable().getObjectId(), column.getObjectId());\n            } catch (Exception e) {\n                log.error(\"Error reading default constraints\", e);\n            }\n\n            if (oldConstraintName != null) {\n                actionList.add(new SQLDatabasePersistAction(\"Drop default constraint\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \" DROP CONSTRAINT \" + DBUtils.getQuotedIdentifier(column.getDataSource(), oldConstraintName)  \r\n                    ));\n            }\n\n            String defaultValue = column.getDefaultValue();\n            if (!CommonUtils.isEmpty(defaultValue)) {\n                StringBuilder sql = new StringBuilder();\n                sql.append(\"ALTER TABLE \").append(column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL)).append(\" ADD \"); \r\n                DefaultModifier.appendModifier(monitor, column, sql, command);\n                sql.append(\" FOR \").append(DBUtils.getQuotedIdentifier(column)); \r\n                actionList.add(new SQLDatabasePersistAction(\"Alter default value\", sql.toString())); \r\n            }\n        }\n        if (hasComment) {\n            boolean isUpdate = SQLServerUtils.isCommentSet(\n                monitor,\n                column.getTable().getDatabase(),\n                SQLServerObjectClass.OBJECT_OR_COLUMN,\n                column.getTable().getObjectId(),\n                column.getObjectId());\n            actionList.add(\n                new SQLDatabasePersistAction(\n                    \"Add column comment\",\n                    \"EXEC \" + SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), isUpdate ? \"sp_updateextendedproperty\" : \"sp_addextendedproperty\") +\n                        \" 'MS_Description', \" + SQLUtils.quoteString(column, column.getDescription()) + \",\" +\n                        \" 'schema', \" + SQLUtils.quoteString(column, column.getTable().getSchema().getName()) + \",\" +\n                        \" 'table', \" + SQLUtils.quoteString(column, column.getTable().getName()) + \",\" +\n                        \" 'column', \" + SQLUtils.quoteString(column, column.getName())));\n        }\n        if (totalProps > 0) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                    \" ALTER COLUMN \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.mssql/src/org/jkiss/dbeaver/ext/mssql/edit/SQLServerTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":127,"status":"N"},{"authorDate":"2021-06-16 23:16:36","commitOrder":20,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            addColumnCommentAction(actionList, column, column.getTable());\n        }\n    }\n","date":"2021-06-16 23:16:36","endLine":135,"groupId":"2473","id":28,"instanceNumber":2,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@DBCExecutionContextexecutionContext@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/ea/9295f6fe12803d22e6201168ed0001d365506d.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            addColumnCommentAction(new VoidProgressMonitor(), actionList, column);\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.oracle/src/org/jkiss/dbeaver/ext/oracle/edit/OracleTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":122,"status":"M"}],"commitId":"3ae36127af8abdb932451296aa3892a48c193c19","commitMessage":"@@@Merge pull request #12847 from dbeaver/columnComments#12846\n\n#12846 Column comments Generic + Oracle","date":"2021-06-16 23:16:36","modifiedFileCount":"6","status":"M","submitter":"Serge Rider"},{"authorTime":"2021-06-16 23:16:36","codes":[{"authorDate":"2021-08-31 18:43:23","commitOrder":21,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        int totalProps = command.getProperties().size();\n        boolean hasComment = command.getProperty(DBConstants.PROP_ID_DESCRIPTION) != null;\n        if (hasComment) totalProps--;\n        if (column.isPersisted() && command.hasProperty(\"defaultValue\")) {\n            totalProps--;\n\n            \r\n            addDropConstraintAction(actionList, column);\n\n            String defaultValue = column.getDefaultValue();\n            if (!CommonUtils.isEmpty(defaultValue)) {\n                StringBuilder sql = new StringBuilder();\n                sql.append(\"ALTER TABLE \").append(column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL)).append(\" ADD \"); \r\n                DefaultModifier.appendModifier(monitor, column, sql, command);\n                sql.append(\" FOR \").append(DBUtils.getQuotedIdentifier(column)); \r\n                actionList.add(new SQLDatabasePersistAction(\"Alter default value\", sql.toString())); \r\n            }\n        }\n        if (hasComment) {\n            boolean isUpdate = SQLServerUtils.isCommentSet(\n                monitor,\n                column.getTable().getDatabase(),\n                SQLServerObjectClass.OBJECT_OR_COLUMN,\n                column.getTable().getObjectId(),\n                column.getObjectId());\n            actionList.add(\n                new SQLDatabasePersistAction(\n                    \"Add column comment\",\n                    \"EXEC \" + SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), isUpdate ? \"sp_updateextendedproperty\" : \"sp_addextendedproperty\") +\n                        \" 'MS_Description', \" + SQLUtils.quoteString(column, column.getDescription()) + \",\" +\n                        \" 'schema', \" + SQLUtils.quoteString(column, column.getTable().getSchema().getName()) + \",\" +\n                        \" 'table', \" + SQLUtils.quoteString(column, column.getTable().getName()) + \",\" +\n                        \" 'column', \" + SQLUtils.quoteString(column, column.getName())));\n        }\n        if (totalProps > 0) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                    \" ALTER COLUMN \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n    }\n","date":"2021-08-31 18:43:23","endLine":199,"groupId":"10266","id":29,"instanceNumber":1,"isCurCommit":1,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@DBCExecutionContextexecutionContext@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/0d/5bed9c0aefd44f00b22081cacf865e12b1b68e.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final SQLServerTableColumn column = command.getObject();\n        int totalProps = command.getProperties().size();\n        boolean hasComment = command.getProperty(DBConstants.PROP_ID_DESCRIPTION) != null;\n        if (hasComment) totalProps--;\n        if (column.isPersisted() && command.hasProperty(\"defaultValue\")) {\n            totalProps--;\n\n            \r\n            String oldConstraintName = null;\n            try (JDBCSession session = DBUtils.openMetaSession(monitor, column, \"Read default constraint\")) {\n                oldConstraintName = JDBCUtils.queryString(session, \"SELECT name FROM \" +\n                    SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), \"DEFAULT_CONSTRAINTS\") +\n                    \" WHERE PARENT_OBJECT_ID = ? AND PARENT_COLUMN_ID = ?\", column.getTable().getObjectId(), column.getObjectId());\n            } catch (Exception e) {\n                log.error(\"Error reading default constraints\", e);\n            }\n\n            if (oldConstraintName != null) {\n                actionList.add(new SQLDatabasePersistAction(\"Drop default constraint\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \" DROP CONSTRAINT \" + DBUtils.getQuotedIdentifier(column.getDataSource(), oldConstraintName)  \r\n                    ));\n            }\n\n            String defaultValue = column.getDefaultValue();\n            if (!CommonUtils.isEmpty(defaultValue)) {\n                StringBuilder sql = new StringBuilder();\n                sql.append(\"ALTER TABLE \").append(column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL)).append(\" ADD \"); \r\n                DefaultModifier.appendModifier(monitor, column, sql, command);\n                sql.append(\" FOR \").append(DBUtils.getQuotedIdentifier(column)); \r\n                actionList.add(new SQLDatabasePersistAction(\"Alter default value\", sql.toString())); \r\n            }\n        }\n        if (hasComment) {\n            boolean isUpdate = SQLServerUtils.isCommentSet(\n                monitor,\n                column.getTable().getDatabase(),\n                SQLServerObjectClass.OBJECT_OR_COLUMN,\n                column.getTable().getObjectId(),\n                column.getObjectId());\n            actionList.add(\n                new SQLDatabasePersistAction(\n                    \"Add column comment\",\n                    \"EXEC \" + SQLServerUtils.getSystemTableName(column.getTable().getDatabase(), isUpdate ? \"sp_updateextendedproperty\" : \"sp_addextendedproperty\") +\n                        \" 'MS_Description', \" + SQLUtils.quoteString(column, column.getDescription()) + \",\" +\n                        \" 'schema', \" + SQLUtils.quoteString(column, column.getTable().getSchema().getName()) + \",\" +\n                        \" 'table', \" + SQLUtils.quoteString(column, column.getTable().getName()) + \",\" +\n                        \" 'column', \" + SQLUtils.quoteString(column, column.getName())));\n        }\n        if (totalProps > 0) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                    \" ALTER COLUMN \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.mssql/src/org/jkiss/dbeaver/ext/mssql/edit/SQLServerTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":156,"status":"M"},{"authorDate":"2021-06-16 23:16:36","commitOrder":21,"curCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            addColumnCommentAction(actionList, column, column.getTable());\n        }\n    }\n","date":"2021-06-16 23:16:36","endLine":135,"groupId":"10266","id":30,"instanceNumber":2,"isCurCommit":0,"methodName":"addObjectModifyActions","params":"(DBRProgressMonitormonitor@DBCExecutionContextexecutionContext@List<DBEPersistAction>actionList@ObjectChangeCommandcommand@Map<String@Object>options)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/ea/9295f6fe12803d22e6201168ed0001d365506d.src","preCode":"    protected void addObjectModifyActions(DBRProgressMonitor monitor, DBCExecutionContext executionContext, List<DBEPersistAction> actionList, ObjectChangeCommand command, Map<String, Object> options)\n    {\n        final OracleTableColumn column = command.getObject();\n        boolean hasComment = command.getProperty(\"comment\") != null;\n        if (!hasComment || command.getProperties().size() > 1) {\n            actionList.add(new SQLDatabasePersistAction(\n                \"Modify column\",\n                \"ALTER TABLE \" + column.getTable().getFullyQualifiedName(DBPEvaluationContext.DDL) + \r\n                \" MODIFY \" + getNestedDeclaration(monitor, column.getTable(), command, options))); \r\n        }\n        if (hasComment) {\n            addColumnCommentAction(actionList, column, column.getTable());\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ext.oracle/src/org/jkiss/dbeaver/ext/oracle/edit/OracleTableColumnManager.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":122,"status":"N"}],"commitId":"23058f8163495881b15f7f0089eda509a15cb52a","commitMessage":"@@@Merge pull request #13714 from dbeaver/sql-server-default-constraint-column-drop-fix#13432\n\n#13432 Drop dependent default constraint before dropping column","date":"2021-08-31 18:43:23","modifiedFileCount":"3","status":"M","submitter":"Serge Rider"}]
