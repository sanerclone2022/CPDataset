[{"authorTime":"2018-12-29 05:36:45","codes":[{"authorDate":"2018-12-29 05:36:45","commitOrder":1,"curCode":"    public void navigateAssociation(@NotNull DBRProgressMonitor monitor, @Nullable DBSEntityAssociation association, @Nullable DBDAttributeBinding attr, @NotNull ResultSetRow row, boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n        if (!newWindow && !confirmPanelsReset()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n        if (association == null) {\n            List<DBSEntityReferrer> referrers = attr.getReferrers();\n            if (referrers != null) {\n                for (final DBSEntityReferrer referrer : referrers) {\n                    if (referrer instanceof DBSEntityAssociation) {\n                        association = (DBSEntityAssociation) referrer;\n                        break;\n                    }\n                }\n            }\n            if (association == null) {\n                throw new DBException(\"Association not found in attribute [\" + attr.getName() + \"]\");\n            }\n        }\n\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Broken association (referenced constraint missing)\");\n        }\n        if (!(refConstraint instanceof DBSEntityReferrer)) {\n            throw new DBException(\"Referenced constraint [\" + refConstraint + \"] is not a referrer\");\n        }\n        DBSEntity targetEntity = refConstraint.getParentObject();\n        if (targetEntity == null) {\n            throw new DBException(\"Null constraint parent\");\n        }\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n        int visualPosition = 0;\n        \r\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differs from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        \r\n        for (int i = 0; i < ownAttrs.size(); i++) {\n            DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n            DBDAttributeBinding ownBinding = model.getAttributeBinding(ownAttr.getAttribute());\n            if (ownBinding == null) {\n                DBWorkbench.getPlatformUI().showError(\"Can't navigate\", \"Attribute \" + ownAttr.getAttribute() + \" is missing in result set\");\n                return;\n            }\n\n            DBDAttributeConstraint constraint = new DBDAttributeConstraint(refAttr.getAttribute(), visualPosition++);\n            constraint.setVisible(true);\n            constraints.add(constraint);\n\n            Object keyValue = model.getCellValue(ownBinding, row);\n            constraint.setOperator(DBCLogicalOperator.EQUALS);\n            constraint.setValue(keyValue);\n        }\n        \r\n        curState.filter = new DBDDataFilter(model.getDataFilter());\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","date":"2018-12-29 05:36:49","endLine":2414,"groupId":"13171","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"navigateAssociation","params":"(@NotNullDBRProgressMonitormonitor@@NullableDBSEntityAssociationassociation@@NullableDBDAttributeBindingattr@@NotNullResultSetRowrow@booleannewWindow)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/40/3e941284ddfaf5a3ed656775ac02750f7fdc94.src","preCode":"    public void navigateAssociation(@NotNull DBRProgressMonitor monitor, @Nullable DBSEntityAssociation association, @Nullable DBDAttributeBinding attr, @NotNull ResultSetRow row, boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n        if (!newWindow && !confirmPanelsReset()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n        if (association == null) {\n            List<DBSEntityReferrer> referrers = attr.getReferrers();\n            if (referrers != null) {\n                for (final DBSEntityReferrer referrer : referrers) {\n                    if (referrer instanceof DBSEntityAssociation) {\n                        association = (DBSEntityAssociation) referrer;\n                        break;\n                    }\n                }\n            }\n            if (association == null) {\n                throw new DBException(\"Association not found in attribute [\" + attr.getName() + \"]\");\n            }\n        }\n\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Broken association (referenced constraint missing)\");\n        }\n        if (!(refConstraint instanceof DBSEntityReferrer)) {\n            throw new DBException(\"Referenced constraint [\" + refConstraint + \"] is not a referrer\");\n        }\n        DBSEntity targetEntity = refConstraint.getParentObject();\n        if (targetEntity == null) {\n            throw new DBException(\"Null constraint parent\");\n        }\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n        int visualPosition = 0;\n        \r\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differs from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        \r\n        for (int i = 0; i < ownAttrs.size(); i++) {\n            DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n            DBDAttributeBinding ownBinding = model.getAttributeBinding(ownAttr.getAttribute());\n            if (ownBinding == null) {\n                DBWorkbench.getPlatformUI().showError(\"Can't navigate\", \"Attribute \" + ownAttr.getAttribute() + \" is missing in result set\");\n                return;\n            }\n\n            DBDAttributeConstraint constraint = new DBDAttributeConstraint(refAttr.getAttribute(), visualPosition++);\n            constraint.setVisible(true);\n            constraints.add(constraint);\n\n            Object keyValue = model.getCellValue(ownBinding, row);\n            constraint.setOperator(DBCLogicalOperator.EQUALS);\n            constraint.setValue(keyValue);\n        }\n        \r\n        curState.filter = new DBDDataFilter(model.getDataFilter());\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/controls/resultset/ResultSetViewer.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":2339,"status":"B"},{"authorDate":"2018-12-29 05:36:45","commitOrder":1,"curCode":"    public void navigateReference(@NotNull DBRProgressMonitor monitor, @NotNull DBSEntityAssociation association, @NotNull ResultSetRow row, boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n\n        DBSEntity targetEntity = association.getParentObject();\n        if (targetEntity == null) {\n            throw new DBException(\"Null constraint parent\");\n        }\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Referencing entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n        int visualPosition = 0;\n        \r\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Can't obtain association '\" + DBUtils.getQuotedIdentifier(association) + \"' target constraint (table \" +\n                (association.getAssociatedEntity() == null ? \"???\" : DBUtils.getQuotedIdentifier(association.getAssociatedEntity())) + \")\");\n        }\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differ from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        if (ownAttrs.isEmpty()) {\n            throw new DBException(\"Association '\" + DBUtils.getQuotedIdentifier(association) + \"' has empty column list\");\n        }\n        \r\n        for (int i = 0; i < refAttrs.size(); i++) {\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n\n            DBDAttributeBinding attrBinding = model.getAttributeBinding(refAttr.getAttribute());\n            if (attrBinding == null) {\n                log.error(\"Can't find attribute binding for ref attribute '\" + refAttr.getAttribute().getName() + \"'\");\n            } else {\n                \r\n                DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n                DBDAttributeConstraint constraint = new DBDAttributeConstraint(ownAttr.getAttribute(), visualPosition++);\n                constraint.setVisible(true);\n                constraints.add(constraint);\n\n                Object keyValue = model.getCellValue(attrBinding, row);\n                constraint.setOperator(DBCLogicalOperator.EQUALS);\n                constraint.setValue(keyValue);\n            }\n        }\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","date":"2018-12-29 05:36:49","endLine":2475,"groupId":"5170","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"navigateReference","params":"(@NotNullDBRProgressMonitormonitor@@NotNullDBSEntityAssociationassociation@@NotNullResultSetRowrow@booleannewWindow)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/40/3e941284ddfaf5a3ed656775ac02750f7fdc94.src","preCode":"    public void navigateReference(@NotNull DBRProgressMonitor monitor, @NotNull DBSEntityAssociation association, @NotNull ResultSetRow row, boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n\n        DBSEntity targetEntity = association.getParentObject();\n        if (targetEntity == null) {\n            throw new DBException(\"Null constraint parent\");\n        }\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Referencing entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n        int visualPosition = 0;\n        \r\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Can't obtain association '\" + DBUtils.getQuotedIdentifier(association) + \"' target constraint (table \" +\n                (association.getAssociatedEntity() == null ? \"???\" : DBUtils.getQuotedIdentifier(association.getAssociatedEntity())) + \")\");\n        }\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differ from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        if (ownAttrs.isEmpty()) {\n            throw new DBException(\"Association '\" + DBUtils.getQuotedIdentifier(association) + \"' has empty column list\");\n        }\n        \r\n        for (int i = 0; i < refAttrs.size(); i++) {\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n\n            DBDAttributeBinding attrBinding = model.getAttributeBinding(refAttr.getAttribute());\n            if (attrBinding == null) {\n                log.error(\"Can't find attribute binding for ref attribute '\" + refAttr.getAttribute().getName() + \"'\");\n            } else {\n                \r\n                DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n                DBDAttributeConstraint constraint = new DBDAttributeConstraint(ownAttr.getAttribute(), visualPosition++);\n                constraint.setVisible(true);\n                constraints.add(constraint);\n\n                Object keyValue = model.getCellValue(attrBinding, row);\n                constraint.setOperator(DBCLogicalOperator.EQUALS);\n                constraint.setValue(keyValue);\n            }\n        }\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/controls/resultset/ResultSetViewer.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":2417,"status":"B"}],"commitId":"3752e74ff31a5aee8616c9e37d50626de690a976","commitMessage":"@@@#10 RSV implementation extraction\n\n\nFormer-commit-id: aa7c026a3e9871fad79ded3afbf21c0e1684c7dd","date":"2018-12-29 05:36:49","modifiedFileCount":"16","status":"B","submitter":"serge-rider"},{"authorTime":"2019-04-30 23:01:17","codes":[{"authorDate":"2019-04-30 23:01:17","commitOrder":2,"curCode":"    public void navigateAssociation(@NotNull DBRProgressMonitor monitor, @Nullable DBSEntityAssociation association, @Nullable DBDAttributeBinding attr, @NotNull List<ResultSetRow> rows, boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n        if (!newWindow && !confirmPanelsReset()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n        if (association == null) {\n            List<DBSEntityReferrer> referrers = attr.getReferrers();\n            if (referrers != null) {\n                for (final DBSEntityReferrer referrer : referrers) {\n                    if (referrer instanceof DBSEntityAssociation) {\n                        association = (DBSEntityAssociation) referrer;\n                        break;\n                    }\n                }\n            }\n            if (association == null) {\n                throw new DBException(\"Association not found in attribute [\" + attr.getName() + \"]\");\n            }\n        }\n\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Broken association (referenced constraint missing)\");\n        }\n        if (!(refConstraint instanceof DBSEntityReferrer)) {\n            throw new DBException(\"Referenced constraint [\" + refConstraint + \"] is not a referrer\");\n        }\n        DBSEntity targetEntity = refConstraint.getParentObject();\n        if (targetEntity == null) {\n            throw new DBException(\"Null constraint parent\");\n        }\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n        int visualPosition = 0;\n        \r\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differs from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        \r\n        for (int i = 0; i < ownAttrs.size(); i++) {\n            DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n            DBDAttributeBinding ownBinding = model.getAttributeBinding(ownAttr.getAttribute());\n            if (ownBinding == null) {\n                DBWorkbench.getPlatformUI().showError(\"Can't navigate\", \"Attribute \" + ownAttr.getAttribute() + \" is missing in result set\");\n                return;\n            }\n\n            DBDAttributeConstraint constraint = new DBDAttributeConstraint(refAttr.getAttribute(), visualPosition++);\n            constraint.setVisible(true);\n            constraints.add(constraint);\n\n            createFilterConstraint(rows, ownBinding, constraint);\n        }\n        \r\n        curState.filter = new DBDDataFilter(model.getDataFilter());\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","date":"2019-04-30 23:01:17","endLine":2634,"groupId":"13171","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"navigateAssociation","params":"(@NotNullDBRProgressMonitormonitor@@NullableDBSEntityAssociationassociation@@NullableDBDAttributeBindingattr@@NotNullList<ResultSetRow>rows@booleannewWindow)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/cf/a698e6b6870d67094921faaf78b860654a7b86.src","preCode":"    public void navigateAssociation(@NotNull DBRProgressMonitor monitor, @Nullable DBSEntityAssociation association, @Nullable DBDAttributeBinding attr, @NotNull ResultSetRow row, boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n        if (!newWindow && !confirmPanelsReset()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n        if (association == null) {\n            List<DBSEntityReferrer> referrers = attr.getReferrers();\n            if (referrers != null) {\n                for (final DBSEntityReferrer referrer : referrers) {\n                    if (referrer instanceof DBSEntityAssociation) {\n                        association = (DBSEntityAssociation) referrer;\n                        break;\n                    }\n                }\n            }\n            if (association == null) {\n                throw new DBException(\"Association not found in attribute [\" + attr.getName() + \"]\");\n            }\n        }\n\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Broken association (referenced constraint missing)\");\n        }\n        if (!(refConstraint instanceof DBSEntityReferrer)) {\n            throw new DBException(\"Referenced constraint [\" + refConstraint + \"] is not a referrer\");\n        }\n        DBSEntity targetEntity = refConstraint.getParentObject();\n        if (targetEntity == null) {\n            throw new DBException(\"Null constraint parent\");\n        }\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n        int visualPosition = 0;\n        \r\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differs from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        \r\n        for (int i = 0; i < ownAttrs.size(); i++) {\n            DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n            DBDAttributeBinding ownBinding = model.getAttributeBinding(ownAttr.getAttribute());\n            if (ownBinding == null) {\n                DBWorkbench.getPlatformUI().showError(\"Can't navigate\", \"Attribute \" + ownAttr.getAttribute() + \" is missing in result set\");\n                return;\n            }\n\n            DBDAttributeConstraint constraint = new DBDAttributeConstraint(refAttr.getAttribute(), visualPosition++);\n            constraint.setVisible(true);\n            constraints.add(constraint);\n\n            Object keyValue = model.getCellValue(ownBinding, row);\n            constraint.setOperator(DBCLogicalOperator.EQUALS);\n            constraint.setValue(keyValue);\n        }\n        \r\n        curState.filter = new DBDDataFilter(model.getDataFilter());\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/controls/resultset/ResultSetViewer.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":2561,"status":"M"},{"authorDate":"2019-04-30 23:01:17","commitOrder":2,"curCode":"    public void navigateReference(@NotNull DBRProgressMonitor monitor, @NotNull DBSEntityAssociation association, @NotNull List<ResultSetRow> rows, boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n\n        DBSEntity targetEntity = association.getParentObject();\n        if (targetEntity == null) {\n            throw new DBException(\"Null constraint parent\");\n        }\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Referencing entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n        int visualPosition = 0;\n        \r\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Can't obtain association '\" + DBUtils.getQuotedIdentifier(association) + \"' target constraint (table \" +\n                (association.getAssociatedEntity() == null ? \"???\" : DBUtils.getQuotedIdentifier(association.getAssociatedEntity())) + \")\");\n        }\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differ from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        if (ownAttrs.isEmpty()) {\n            throw new DBException(\"Association '\" + DBUtils.getQuotedIdentifier(association) + \"' has empty column list\");\n        }\n        \r\n        for (int i = 0; i < refAttrs.size(); i++) {\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n\n            DBDAttributeBinding attrBinding = model.getAttributeBinding(refAttr.getAttribute());\n            if (attrBinding == null) {\n                log.error(\"Can't find attribute binding for ref attribute '\" + refAttr.getAttribute().getName() + \"'\");\n            } else {\n                \r\n                DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n                DBDAttributeConstraint constraint = new DBDAttributeConstraint(ownAttr.getAttribute(), visualPosition++);\n                constraint.setVisible(true);\n                constraints.add(constraint);\n\n                createFilterConstraint(rows, attrBinding, constraint);\n\n            }\n        }\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","date":"2019-04-30 23:01:17","endLine":2694,"groupId":"5170","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"navigateReference","params":"(@NotNullDBRProgressMonitormonitor@@NotNullDBSEntityAssociationassociation@@NotNullList<ResultSetRow>rows@booleannewWindow)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/cf/a698e6b6870d67094921faaf78b860654a7b86.src","preCode":"    public void navigateReference(@NotNull DBRProgressMonitor monitor, @NotNull DBSEntityAssociation association, @NotNull ResultSetRow row, boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n\n        DBSEntity targetEntity = association.getParentObject();\n        if (targetEntity == null) {\n            throw new DBException(\"Null constraint parent\");\n        }\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Referencing entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n        int visualPosition = 0;\n        \r\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Can't obtain association '\" + DBUtils.getQuotedIdentifier(association) + \"' target constraint (table \" +\n                (association.getAssociatedEntity() == null ? \"???\" : DBUtils.getQuotedIdentifier(association.getAssociatedEntity())) + \")\");\n        }\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differ from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        if (ownAttrs.isEmpty()) {\n            throw new DBException(\"Association '\" + DBUtils.getQuotedIdentifier(association) + \"' has empty column list\");\n        }\n        \r\n        for (int i = 0; i < refAttrs.size(); i++) {\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n\n            DBDAttributeBinding attrBinding = model.getAttributeBinding(refAttr.getAttribute());\n            if (attrBinding == null) {\n                log.error(\"Can't find attribute binding for ref attribute '\" + refAttr.getAttribute().getName() + \"'\");\n            } else {\n                \r\n                DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n                DBDAttributeConstraint constraint = new DBDAttributeConstraint(ownAttr.getAttribute(), visualPosition++);\n                constraint.setVisible(true);\n                constraints.add(constraint);\n\n                Object keyValue = model.getCellValue(attrBinding, row);\n                constraint.setOperator(DBCLogicalOperator.EQUALS);\n                constraint.setValue(keyValue);\n            }\n        }\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/controls/resultset/ResultSetViewer.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":2637,"status":"M"}],"commitId":"036e0ebdba86787dc2fab808ffdfb13ec2d66a95","commitMessage":"@@@Data viewer: navigate to multiple rows fks/refs\n\n\nFormer-commit-id: 4d5311afdb0fc695dda98cb0b29d27f180b031c7","date":"2019-04-30 23:01:17","modifiedFileCount":"5","status":"M","submitter":"Serge Rider"},{"authorTime":"2019-07-08 04:14:01","codes":[{"authorDate":"2019-04-30 23:01:17","commitOrder":3,"curCode":"    public void navigateAssociation(@NotNull DBRProgressMonitor monitor, @Nullable DBSEntityAssociation association, @Nullable DBDAttributeBinding attr, @NotNull List<ResultSetRow> rows, boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n        if (!newWindow && !confirmPanelsReset()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n        if (association == null) {\n            List<DBSEntityReferrer> referrers = attr.getReferrers();\n            if (referrers != null) {\n                for (final DBSEntityReferrer referrer : referrers) {\n                    if (referrer instanceof DBSEntityAssociation) {\n                        association = (DBSEntityAssociation) referrer;\n                        break;\n                    }\n                }\n            }\n            if (association == null) {\n                throw new DBException(\"Association not found in attribute [\" + attr.getName() + \"]\");\n            }\n        }\n\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Broken association (referenced constraint missing)\");\n        }\n        if (!(refConstraint instanceof DBSEntityReferrer)) {\n            throw new DBException(\"Referenced constraint [\" + refConstraint + \"] is not a referrer\");\n        }\n        DBSEntity targetEntity = refConstraint.getParentObject();\n        if (targetEntity == null) {\n            throw new DBException(\"Null constraint parent\");\n        }\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n        int visualPosition = 0;\n        \r\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differs from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        \r\n        for (int i = 0; i < ownAttrs.size(); i++) {\n            DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n            DBDAttributeBinding ownBinding = model.getAttributeBinding(ownAttr.getAttribute());\n            if (ownBinding == null) {\n                DBWorkbench.getPlatformUI().showError(\"Can't navigate\", \"Attribute \" + ownAttr.getAttribute() + \" is missing in result set\");\n                return;\n            }\n\n            DBDAttributeConstraint constraint = new DBDAttributeConstraint(refAttr.getAttribute(), visualPosition++);\n            constraint.setVisible(true);\n            constraints.add(constraint);\n\n            createFilterConstraint(rows, ownBinding, constraint);\n        }\n        \r\n        curState.filter = new DBDDataFilter(model.getDataFilter());\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","date":"2019-04-30 23:01:17","endLine":2634,"groupId":"13171","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"navigateAssociation","params":"(@NotNullDBRProgressMonitormonitor@@NullableDBSEntityAssociationassociation@@NullableDBDAttributeBindingattr@@NotNullList<ResultSetRow>rows@booleannewWindow)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/cf/a698e6b6870d67094921faaf78b860654a7b86.src","preCode":"    public void navigateAssociation(@NotNull DBRProgressMonitor monitor, @Nullable DBSEntityAssociation association, @Nullable DBDAttributeBinding attr, @NotNull List<ResultSetRow> rows, boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n        if (!newWindow && !confirmPanelsReset()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n        if (association == null) {\n            List<DBSEntityReferrer> referrers = attr.getReferrers();\n            if (referrers != null) {\n                for (final DBSEntityReferrer referrer : referrers) {\n                    if (referrer instanceof DBSEntityAssociation) {\n                        association = (DBSEntityAssociation) referrer;\n                        break;\n                    }\n                }\n            }\n            if (association == null) {\n                throw new DBException(\"Association not found in attribute [\" + attr.getName() + \"]\");\n            }\n        }\n\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Broken association (referenced constraint missing)\");\n        }\n        if (!(refConstraint instanceof DBSEntityReferrer)) {\n            throw new DBException(\"Referenced constraint [\" + refConstraint + \"] is not a referrer\");\n        }\n        DBSEntity targetEntity = refConstraint.getParentObject();\n        if (targetEntity == null) {\n            throw new DBException(\"Null constraint parent\");\n        }\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n        int visualPosition = 0;\n        \r\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differs from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        \r\n        for (int i = 0; i < ownAttrs.size(); i++) {\n            DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n            DBDAttributeBinding ownBinding = model.getAttributeBinding(ownAttr.getAttribute());\n            if (ownBinding == null) {\n                DBWorkbench.getPlatformUI().showError(\"Can't navigate\", \"Attribute \" + ownAttr.getAttribute() + \" is missing in result set\");\n                return;\n            }\n\n            DBDAttributeConstraint constraint = new DBDAttributeConstraint(refAttr.getAttribute(), visualPosition++);\n            constraint.setVisible(true);\n            constraints.add(constraint);\n\n            createFilterConstraint(rows, ownBinding, constraint);\n        }\n        \r\n        curState.filter = new DBDDataFilter(model.getDataFilter());\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/controls/resultset/ResultSetViewer.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":2561,"status":"N"},{"authorDate":"2019-07-08 04:14:01","commitOrder":3,"curCode":"    public void navigateReference(@NotNull DBRProgressMonitor monitor, @NotNull ResultSetModel bindingsModel, @NotNull DBSEntityAssociation association, @NotNull List<ResultSetRow> rows, boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n\n        DBSEntity targetEntity = association.getParentObject();\n        if (targetEntity == null) {\n            throw new DBException(\"Null constraint parent\");\n        }\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Referencing entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n        int visualPosition = 0;\n        \r\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Can't obtain association '\" + DBUtils.getQuotedIdentifier(association) + \"' target constraint (table \" +\n                (association.getAssociatedEntity() == null ? \"???\" : DBUtils.getQuotedIdentifier(association.getAssociatedEntity())) + \")\");\n        }\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differ from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        if (ownAttrs.isEmpty()) {\n            throw new DBException(\"Association '\" + DBUtils.getQuotedIdentifier(association) + \"' has empty column list\");\n        }\n        \r\n        for (int i = 0; i < refAttrs.size(); i++) {\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n\n            DBDAttributeBinding attrBinding = bindingsModel.getAttributeBinding(refAttr.getAttribute());\n            if (attrBinding == null) {\n                log.error(\"Can't find attribute binding for ref attribute '\" + refAttr.getAttribute().getName() + \"'\");\n            } else {\n                \r\n                DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n                DBDAttributeConstraint constraint = new DBDAttributeConstraint(ownAttr.getAttribute(), visualPosition++);\n                constraint.setVisible(true);\n                constraints.add(constraint);\n\n                createFilterConstraint(rows, attrBinding, constraint);\n\n            }\n        }\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","date":"2019-07-08 04:14:01","endLine":2756,"groupId":"5170","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"navigateReference","params":"(@NotNullDBRProgressMonitormonitor@@NotNullResultSetModelbindingsModel@@NotNullDBSEntityAssociationassociation@@NotNullList<ResultSetRow>rows@booleannewWindow)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/74/31cc0c365b2a322b1f4e53284ad9442a6d193c.src","preCode":"    public void navigateReference(@NotNull DBRProgressMonitor monitor, @NotNull DBSEntityAssociation association, @NotNull List<ResultSetRow> rows, boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n\n        DBSEntity targetEntity = association.getParentObject();\n        if (targetEntity == null) {\n            throw new DBException(\"Null constraint parent\");\n        }\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Referencing entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n        int visualPosition = 0;\n        \r\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Can't obtain association '\" + DBUtils.getQuotedIdentifier(association) + \"' target constraint (table \" +\n                (association.getAssociatedEntity() == null ? \"???\" : DBUtils.getQuotedIdentifier(association.getAssociatedEntity())) + \")\");\n        }\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differ from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        if (ownAttrs.isEmpty()) {\n            throw new DBException(\"Association '\" + DBUtils.getQuotedIdentifier(association) + \"' has empty column list\");\n        }\n        \r\n        for (int i = 0; i < refAttrs.size(); i++) {\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n\n            DBDAttributeBinding attrBinding = model.getAttributeBinding(refAttr.getAttribute());\n            if (attrBinding == null) {\n                log.error(\"Can't find attribute binding for ref attribute '\" + refAttr.getAttribute().getName() + \"'\");\n            } else {\n                \r\n                DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n                DBDAttributeConstraint constraint = new DBDAttributeConstraint(ownAttr.getAttribute(), visualPosition++);\n                constraint.setVisible(true);\n                constraints.add(constraint);\n\n                createFilterConstraint(rows, attrBinding, constraint);\n\n            }\n        }\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/controls/resultset/ResultSetViewer.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":2699,"status":"M"}],"commitId":"32761d539e36ab7f76ee653bb611227ac51f9b7a","commitMessage":"@@@#5934 Data viewer: references panel\n\n\nFormer-commit-id: aa4d0884258467c510fa4323ed17ac250ffff1bc","date":"2019-07-08 04:14:01","modifiedFileCount":"5","status":"M","submitter":"Serge Rider"},{"authorTime":"2019-07-08 04:14:01","codes":[{"authorDate":"2019-07-09 00:52:51","commitOrder":4,"curCode":"    public void navigateAssociation(@NotNull DBRProgressMonitor monitor, @NotNull ResultSetModel bindingsModel, @NotNull DBSEntityAssociation association, @NotNull List<ResultSetRow> rows, boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n        if (!newWindow && !confirmPanelsReset()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Broken association (referenced constraint missing)\");\n        }\n        if (!(refConstraint instanceof DBSEntityReferrer)) {\n            throw new DBException(\"Referenced constraint [\" + refConstraint + \"] is not a referrer\");\n        }\n        DBSEntity targetEntity = refConstraint.getParentObject();\n        if (targetEntity == null) {\n            throw new DBException(\"Null constraint parent\");\n        }\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n        int visualPosition = 0;\n        \r\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differs from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        \r\n        for (int i = 0; i < ownAttrs.size(); i++) {\n            DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n            DBDAttributeBinding ownBinding = bindingsModel.getAttributeBinding(ownAttr.getAttribute());\n            if (ownBinding == null) {\n                DBWorkbench.getPlatformUI().showError(\"Can't navigate\", \"Attribute \" + ownAttr.getAttribute() + \" is missing in result set\");\n                return;\n            }\n\n            DBDAttributeConstraint constraint = new DBDAttributeConstraint(refAttr.getAttribute(), visualPosition++);\n            constraint.setVisible(true);\n            constraints.add(constraint);\n\n            createFilterConstraint(rows, ownBinding, constraint);\n        }\n        \r\n        if (curState == null) {\n            setNewState((DBSDataContainer) targetEntity, model.getDataFilter());\n        }\n        curState.filter = new DBDDataFilter(bindingsModel.getDataFilter());\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","date":"2019-07-09 00:52:51","endLine":2690,"groupId":"13171","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"navigateAssociation","params":"(@NotNullDBRProgressMonitormonitor@@NotNullResultSetModelbindingsModel@@NotNullDBSEntityAssociationassociation@@NotNullList<ResultSetRow>rows@booleannewWindow)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/00/57c3e7ed5dfd4fd690f82b724a4db69f7be78f.src","preCode":"    public void navigateAssociation(@NotNull DBRProgressMonitor monitor, @Nullable DBSEntityAssociation association, @Nullable DBDAttributeBinding attr, @NotNull List<ResultSetRow> rows, boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n        if (!newWindow && !confirmPanelsReset()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n        if (association == null) {\n            List<DBSEntityReferrer> referrers = attr.getReferrers();\n            if (referrers != null) {\n                for (final DBSEntityReferrer referrer : referrers) {\n                    if (referrer instanceof DBSEntityAssociation) {\n                        association = (DBSEntityAssociation) referrer;\n                        break;\n                    }\n                }\n            }\n            if (association == null) {\n                throw new DBException(\"Association not found in attribute [\" + attr.getName() + \"]\");\n            }\n        }\n\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Broken association (referenced constraint missing)\");\n        }\n        if (!(refConstraint instanceof DBSEntityReferrer)) {\n            throw new DBException(\"Referenced constraint [\" + refConstraint + \"] is not a referrer\");\n        }\n        DBSEntity targetEntity = refConstraint.getParentObject();\n        if (targetEntity == null) {\n            throw new DBException(\"Null constraint parent\");\n        }\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n        int visualPosition = 0;\n        \r\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differs from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        \r\n        for (int i = 0; i < ownAttrs.size(); i++) {\n            DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n            DBDAttributeBinding ownBinding = model.getAttributeBinding(ownAttr.getAttribute());\n            if (ownBinding == null) {\n                DBWorkbench.getPlatformUI().showError(\"Can't navigate\", \"Attribute \" + ownAttr.getAttribute() + \" is missing in result set\");\n                return;\n            }\n\n            DBDAttributeConstraint constraint = new DBDAttributeConstraint(refAttr.getAttribute(), visualPosition++);\n            constraint.setVisible(true);\n            constraints.add(constraint);\n\n            createFilterConstraint(rows, ownBinding, constraint);\n        }\n        \r\n        curState.filter = new DBDDataFilter(model.getDataFilter());\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/controls/resultset/ResultSetViewer.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":2629,"status":"M"},{"authorDate":"2019-07-08 04:14:01","commitOrder":4,"curCode":"    public void navigateReference(@NotNull DBRProgressMonitor monitor, @NotNull ResultSetModel bindingsModel, @NotNull DBSEntityAssociation association, @NotNull List<ResultSetRow> rows, boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n\n        DBSEntity targetEntity = association.getParentObject();\n        if (targetEntity == null) {\n            throw new DBException(\"Null constraint parent\");\n        }\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Referencing entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n        int visualPosition = 0;\n        \r\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Can't obtain association '\" + DBUtils.getQuotedIdentifier(association) + \"' target constraint (table \" +\n                (association.getAssociatedEntity() == null ? \"???\" : DBUtils.getQuotedIdentifier(association.getAssociatedEntity())) + \")\");\n        }\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differ from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        if (ownAttrs.isEmpty()) {\n            throw new DBException(\"Association '\" + DBUtils.getQuotedIdentifier(association) + \"' has empty column list\");\n        }\n        \r\n        for (int i = 0; i < refAttrs.size(); i++) {\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n\n            DBDAttributeBinding attrBinding = bindingsModel.getAttributeBinding(refAttr.getAttribute());\n            if (attrBinding == null) {\n                log.error(\"Can't find attribute binding for ref attribute '\" + refAttr.getAttribute().getName() + \"'\");\n            } else {\n                \r\n                DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n                DBDAttributeConstraint constraint = new DBDAttributeConstraint(ownAttr.getAttribute(), visualPosition++);\n                constraint.setVisible(true);\n                constraints.add(constraint);\n\n                createFilterConstraint(rows, attrBinding, constraint);\n\n            }\n        }\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","date":"2019-07-08 04:14:01","endLine":2756,"groupId":"5170","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"navigateReference","params":"(@NotNullDBRProgressMonitormonitor@@NotNullResultSetModelbindingsModel@@NotNullDBSEntityAssociationassociation@@NotNullList<ResultSetRow>rows@booleannewWindow)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/74/31cc0c365b2a322b1f4e53284ad9442a6d193c.src","preCode":"    public void navigateReference(@NotNull DBRProgressMonitor monitor, @NotNull ResultSetModel bindingsModel, @NotNull DBSEntityAssociation association, @NotNull List<ResultSetRow> rows, boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n\n        DBSEntity targetEntity = association.getParentObject();\n        if (targetEntity == null) {\n            throw new DBException(\"Null constraint parent\");\n        }\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Referencing entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n        int visualPosition = 0;\n        \r\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Can't obtain association '\" + DBUtils.getQuotedIdentifier(association) + \"' target constraint (table \" +\n                (association.getAssociatedEntity() == null ? \"???\" : DBUtils.getQuotedIdentifier(association.getAssociatedEntity())) + \")\");\n        }\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differ from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        if (ownAttrs.isEmpty()) {\n            throw new DBException(\"Association '\" + DBUtils.getQuotedIdentifier(association) + \"' has empty column list\");\n        }\n        \r\n        for (int i = 0; i < refAttrs.size(); i++) {\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n\n            DBDAttributeBinding attrBinding = bindingsModel.getAttributeBinding(refAttr.getAttribute());\n            if (attrBinding == null) {\n                log.error(\"Can't find attribute binding for ref attribute '\" + refAttr.getAttribute().getName() + \"'\");\n            } else {\n                \r\n                DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n                DBDAttributeConstraint constraint = new DBDAttributeConstraint(ownAttr.getAttribute(), visualPosition++);\n                constraint.setVisible(true);\n                constraints.add(constraint);\n\n                createFilterConstraint(rows, attrBinding, constraint);\n\n            }\n        }\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/controls/resultset/ResultSetViewer.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":2699,"status":"N"}],"commitId":"61cf1b691438ab2a3dafe32c66b6765b16e03489","commitMessage":"@@@#5934 References panel - show foreign keys\n\n\nFormer-commit-id: 01270d24f56621ce74687d984729fe2560d7de47","date":"2019-07-09 00:52:51","modifiedFileCount":"7","status":"M","submitter":"serge@jkiss.org"},{"authorTime":"2019-07-19 17:30:29","codes":[{"authorDate":"2019-07-19 17:30:29","commitOrder":5,"curCode":"    public void navigateAssociation(@NotNull DBRProgressMonitor monitor, @NotNull ResultSetModel bindingsModel, @NotNull DBSEntityAssociation association, @NotNull List<ResultSetRow> rows, boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n        if (!newWindow && !confirmPanelsReset()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Broken association (referenced constraint missing)\");\n        }\n        if (!(refConstraint instanceof DBSEntityReferrer)) {\n            throw new DBException(\"Referenced constraint [\" + refConstraint + \"] is not a referrer\");\n        }\n        DBSEntity targetEntity = refConstraint.getParentObject();\n        if (targetEntity == null) {\n            throw new DBException(\"Null constraint parent\");\n        }\n        targetEntity = DBVUtils.getRealEntity(monitor, targetEntity);\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n        int visualPosition = 0;\n        \r\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differs from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        \r\n        for (int i = 0; i < ownAttrs.size(); i++) {\n            DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n            DBDAttributeBinding ownBinding = bindingsModel.getAttributeBinding(ownAttr.getAttribute());\n            if (ownBinding == null) {\n                DBWorkbench.getPlatformUI().showError(\"Can't navigate\", \"Attribute \" + ownAttr.getAttribute() + \" is missing in result set\");\n                return;\n            }\n\n            DBDAttributeConstraint constraint = new DBDAttributeConstraint(refAttr.getAttribute(), visualPosition++);\n            constraint.setVisible(true);\n            constraints.add(constraint);\n\n            createFilterConstraint(rows, ownBinding, constraint);\n        }\n        \r\n        if (curState == null) {\n            setNewState((DBSDataContainer) targetEntity, model.getDataFilter());\n        }\n        curState.filter = new DBDDataFilter(bindingsModel.getDataFilter());\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","date":"2019-07-19 17:30:29","endLine":2701,"groupId":"13171","id":9,"instanceNumber":1,"isCurCommit":0,"methodName":"navigateAssociation","params":"(@NotNullDBRProgressMonitormonitor@@NotNullResultSetModelbindingsModel@@NotNullDBSEntityAssociationassociation@@NotNullList<ResultSetRow>rows@booleannewWindow)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/2a/e968745c2b807a655700a7bf8f3854c9b302d7.src","preCode":"    public void navigateAssociation(@NotNull DBRProgressMonitor monitor, @NotNull ResultSetModel bindingsModel, @NotNull DBSEntityAssociation association, @NotNull List<ResultSetRow> rows, boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n        if (!newWindow && !confirmPanelsReset()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Broken association (referenced constraint missing)\");\n        }\n        if (!(refConstraint instanceof DBSEntityReferrer)) {\n            throw new DBException(\"Referenced constraint [\" + refConstraint + \"] is not a referrer\");\n        }\n        DBSEntity targetEntity = refConstraint.getParentObject();\n        if (targetEntity == null) {\n            throw new DBException(\"Null constraint parent\");\n        }\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n        int visualPosition = 0;\n        \r\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differs from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        \r\n        for (int i = 0; i < ownAttrs.size(); i++) {\n            DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n            DBDAttributeBinding ownBinding = bindingsModel.getAttributeBinding(ownAttr.getAttribute());\n            if (ownBinding == null) {\n                DBWorkbench.getPlatformUI().showError(\"Can't navigate\", \"Attribute \" + ownAttr.getAttribute() + \" is missing in result set\");\n                return;\n            }\n\n            DBDAttributeConstraint constraint = new DBDAttributeConstraint(refAttr.getAttribute(), visualPosition++);\n            constraint.setVisible(true);\n            constraints.add(constraint);\n\n            createFilterConstraint(rows, ownBinding, constraint);\n        }\n        \r\n        if (curState == null) {\n            setNewState((DBSDataContainer) targetEntity, model.getDataFilter());\n        }\n        curState.filter = new DBDDataFilter(bindingsModel.getDataFilter());\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/controls/resultset/ResultSetViewer.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":2639,"status":"M"},{"authorDate":"2019-07-19 17:30:29","commitOrder":5,"curCode":"    public void navigateReference(@NotNull DBRProgressMonitor monitor, @NotNull ResultSetModel bindingsModel, @NotNull DBSEntityAssociation association, @NotNull List<ResultSetRow> rows, boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n\n        DBSEntity targetEntity = association.getParentObject();\n        if (targetEntity == null) {\n            throw new DBException(\"Null constraint parent\");\n        }\n        \r\n        targetEntity = DBVUtils.getRealEntity(monitor, targetEntity);\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Referencing entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n        int visualPosition = 0;\n        \r\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Can't obtain association '\" + DBUtils.getQuotedIdentifier(association) + \"' target constraint (table \" +\n                (association.getAssociatedEntity() == null ? \"???\" : DBUtils.getQuotedIdentifier(association.getAssociatedEntity())) + \")\");\n        }\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differ from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        if (ownAttrs.isEmpty()) {\n            throw new DBException(\"Association '\" + DBUtils.getQuotedIdentifier(association) + \"' has empty column list\");\n        }\n        \r\n        for (int i = 0; i < refAttrs.size(); i++) {\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n\n            DBDAttributeBinding attrBinding = bindingsModel.getAttributeBinding(refAttr.getAttribute());\n            if (attrBinding == null) {\n                log.error(\"Can't find attribute binding for ref attribute '\" + refAttr.getAttribute().getName() + \"'\");\n            } else {\n                \r\n                DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n                DBDAttributeConstraint constraint = new DBDAttributeConstraint(ownAttr.getAttribute(), visualPosition++);\n                constraint.setVisible(true);\n                constraints.add(constraint);\n\n                createFilterConstraint(rows, attrBinding, constraint);\n\n            }\n        }\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","date":"2019-07-19 17:30:29","endLine":2767,"groupId":"5170","id":10,"instanceNumber":2,"isCurCommit":0,"methodName":"navigateReference","params":"(@NotNullDBRProgressMonitormonitor@@NotNullResultSetModelbindingsModel@@NotNullDBSEntityAssociationassociation@@NotNullList<ResultSetRow>rows@booleannewWindow)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/2a/e968745c2b807a655700a7bf8f3854c9b302d7.src","preCode":"    public void navigateReference(@NotNull DBRProgressMonitor monitor, @NotNull ResultSetModel bindingsModel, @NotNull DBSEntityAssociation association, @NotNull List<ResultSetRow> rows, boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n\n        DBSEntity targetEntity = association.getParentObject();\n        if (targetEntity == null) {\n            throw new DBException(\"Null constraint parent\");\n        }\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Referencing entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n        int visualPosition = 0;\n        \r\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Can't obtain association '\" + DBUtils.getQuotedIdentifier(association) + \"' target constraint (table \" +\n                (association.getAssociatedEntity() == null ? \"???\" : DBUtils.getQuotedIdentifier(association.getAssociatedEntity())) + \")\");\n        }\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differ from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        if (ownAttrs.isEmpty()) {\n            throw new DBException(\"Association '\" + DBUtils.getQuotedIdentifier(association) + \"' has empty column list\");\n        }\n        \r\n        for (int i = 0; i < refAttrs.size(); i++) {\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n\n            DBDAttributeBinding attrBinding = bindingsModel.getAttributeBinding(refAttr.getAttribute());\n            if (attrBinding == null) {\n                log.error(\"Can't find attribute binding for ref attribute '\" + refAttr.getAttribute().getName() + \"'\");\n            } else {\n                \r\n                DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n                DBDAttributeConstraint constraint = new DBDAttributeConstraint(ownAttr.getAttribute(), visualPosition++);\n                constraint.setVisible(true);\n                constraints.add(constraint);\n\n                createFilterConstraint(rows, attrBinding, constraint);\n\n            }\n        }\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/controls/resultset/ResultSetViewer.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":2708,"status":"M"}],"commitId":"c4359c2323029325c28a7276ab427d1bb94d7bfd","commitMessage":"@@@#5384 Virtual FK navigation/references preview\n\n\nFormer-commit-id: f98ae7e2313a628ca612fb540db09b84a8b25cc8","date":"2019-07-19 17:30:29","modifiedFileCount":"12","status":"M","submitter":"Serge Rider"},{"authorTime":"2019-08-05 21:38:53","codes":[{"authorDate":"2019-08-05 21:38:53","commitOrder":6,"curCode":"    public void navigateAssociation(\n        @NotNull DBRProgressMonitor monitor,\n        @NotNull ResultSetModel bindingsModel,\n        @NotNull DBSEntityAssociation association,\n        @NotNull List<ResultSetRow> rows,\n        boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n        if (!newWindow && !confirmPanelsReset()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Broken association (referenced constraint missing)\");\n        }\n        if (!(refConstraint instanceof DBSEntityReferrer)) {\n            throw new DBException(\"Referenced constraint [\" + refConstraint + \"] is not a referrer\");\n        }\n        DBSEntity targetEntity = refConstraint.getParentObject();\n        if (targetEntity == null) {\n            throw new DBException(\"Null constraint parent\");\n        }\n        targetEntity = DBVUtils.getRealEntity(monitor, targetEntity);\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n\n        \r\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differs from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        \r\n        for (int i = 0; i < ownAttrs.size(); i++) {\n            DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n            DBDAttributeBinding ownBinding = bindingsModel.getAttributeBinding(ownAttr.getAttribute());\n            if (ownBinding == null) {\n                DBWorkbench.getPlatformUI().showError(\"Can't navigate\", \"Attribute \" + ownAttr.getAttribute() + \" is missing in result set\");\n                return;\n            }\n\n            DBDAttributeConstraint constraint = new DBDAttributeConstraint(refAttr.getAttribute(), DBDAttributeConstraint.NULL_VISUAL_POSITION);\n            constraint.setVisible(true);\n            constraints.add(constraint);\n\n            createFilterConstraint(rows, ownBinding, constraint);\n        }\n        \r\n        if (curState == null) {\n            setNewState((DBSDataContainer) targetEntity, model.getDataFilter());\n        }\n        curState.filter = new DBDDataFilter(bindingsModel.getDataFilter());\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","date":"2019-08-05 21:38:53","endLine":2736,"groupId":"15918","id":11,"instanceNumber":1,"isCurCommit":0,"methodName":"navigateAssociation","params":"(@NotNullDBRProgressMonitormonitor@@NotNullResultSetModelbindingsModel@@NotNullDBSEntityAssociationassociation@@NotNullList<ResultSetRow>rows@booleannewWindow)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/56/71f656c298a66ef7358a70f1487084048266f5.src","preCode":"    public void navigateAssociation(\n        @NotNull DBRProgressMonitor monitor,\n        @NotNull ResultSetModel bindingsModel,\n        @NotNull DBSEntityAssociation association,\n        @NotNull List<ResultSetRow> rows,\n        boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n        if (!newWindow && !confirmPanelsReset()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Broken association (referenced constraint missing)\");\n        }\n        if (!(refConstraint instanceof DBSEntityReferrer)) {\n            throw new DBException(\"Referenced constraint [\" + refConstraint + \"] is not a referrer\");\n        }\n        DBSEntity targetEntity = refConstraint.getParentObject();\n        if (targetEntity == null) {\n            throw new DBException(\"Null constraint parent\");\n        }\n        targetEntity = DBVUtils.getRealEntity(monitor, targetEntity);\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n        int visualPosition = 0;\n        \r\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differs from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        \r\n        for (int i = 0; i < ownAttrs.size(); i++) {\n            DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n            DBDAttributeBinding ownBinding = bindingsModel.getAttributeBinding(ownAttr.getAttribute());\n            if (ownBinding == null) {\n                DBWorkbench.getPlatformUI().showError(\"Can't navigate\", \"Attribute \" + ownAttr.getAttribute() + \" is missing in result set\");\n                return;\n            }\n\n            DBDAttributeConstraint constraint = new DBDAttributeConstraint(refAttr.getAttribute(), visualPosition++);\n            constraint.setVisible(true);\n            constraints.add(constraint);\n\n            createFilterConstraint(rows, ownBinding, constraint);\n        }\n        \r\n        if (curState == null) {\n            setNewState((DBSDataContainer) targetEntity, model.getDataFilter());\n        }\n        curState.filter = new DBDDataFilter(bindingsModel.getDataFilter());\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/controls/resultset/ResultSetViewer.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":2669,"status":"M"},{"authorDate":"2019-08-05 21:38:53","commitOrder":6,"curCode":"    public void navigateReference(@NotNull DBRProgressMonitor monitor, @NotNull ResultSetModel bindingsModel, @NotNull DBSEntityAssociation association, @NotNull List<ResultSetRow> rows, boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n\n        DBSEntity targetEntity = association.getParentObject();\n        if (targetEntity == null) {\n            throw new DBException(\"Null constraint parent\");\n        }\n        \r\n        targetEntity = DBVUtils.getRealEntity(monitor, targetEntity);\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Referencing entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n\n        \r\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Can't obtain association '\" + DBUtils.getQuotedIdentifier(association) + \"' target constraint (table \" +\n                (association.getAssociatedEntity() == null ? \"???\" : DBUtils.getQuotedIdentifier(association.getAssociatedEntity())) + \")\");\n        }\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differ from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        if (ownAttrs.isEmpty()) {\n            throw new DBException(\"Association '\" + DBUtils.getQuotedIdentifier(association) + \"' has empty column list\");\n        }\n        \r\n        for (int i = 0; i < refAttrs.size(); i++) {\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n\n            DBDAttributeBinding attrBinding = bindingsModel.getAttributeBinding(refAttr.getAttribute());\n            if (attrBinding == null) {\n                log.error(\"Can't find attribute binding for ref attribute '\" + refAttr.getAttribute().getName() + \"'\");\n            } else {\n                \r\n                DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n                DBDAttributeConstraint constraint = new DBDAttributeConstraint(ownAttr.getAttribute(), DBDAttributeConstraint.NULL_VISUAL_POSITION);\n                constraint.setVisible(true);\n                constraints.add(constraint);\n\n                createFilterConstraint(rows, attrBinding, constraint);\n\n            }\n        }\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","date":"2019-08-05 21:38:53","endLine":2802,"groupId":"6832","id":12,"instanceNumber":2,"isCurCommit":0,"methodName":"navigateReference","params":"(@NotNullDBRProgressMonitormonitor@@NotNullResultSetModelbindingsModel@@NotNullDBSEntityAssociationassociation@@NotNullList<ResultSetRow>rows@booleannewWindow)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/56/71f656c298a66ef7358a70f1487084048266f5.src","preCode":"    public void navigateReference(@NotNull DBRProgressMonitor monitor, @NotNull ResultSetModel bindingsModel, @NotNull DBSEntityAssociation association, @NotNull List<ResultSetRow> rows, boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n\n        DBSEntity targetEntity = association.getParentObject();\n        if (targetEntity == null) {\n            throw new DBException(\"Null constraint parent\");\n        }\n        \r\n        targetEntity = DBVUtils.getRealEntity(monitor, targetEntity);\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Referencing entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n        int visualPosition = 0;\n        \r\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Can't obtain association '\" + DBUtils.getQuotedIdentifier(association) + \"' target constraint (table \" +\n                (association.getAssociatedEntity() == null ? \"???\" : DBUtils.getQuotedIdentifier(association.getAssociatedEntity())) + \")\");\n        }\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differ from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        if (ownAttrs.isEmpty()) {\n            throw new DBException(\"Association '\" + DBUtils.getQuotedIdentifier(association) + \"' has empty column list\");\n        }\n        \r\n        for (int i = 0; i < refAttrs.size(); i++) {\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n\n            DBDAttributeBinding attrBinding = bindingsModel.getAttributeBinding(refAttr.getAttribute());\n            if (attrBinding == null) {\n                log.error(\"Can't find attribute binding for ref attribute '\" + refAttr.getAttribute().getName() + \"'\");\n            } else {\n                \r\n                DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n                DBDAttributeConstraint constraint = new DBDAttributeConstraint(ownAttr.getAttribute(), visualPosition++);\n                constraint.setVisible(true);\n                constraints.add(constraint);\n\n                createFilterConstraint(rows, attrBinding, constraint);\n\n            }\n        }\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/controls/resultset/ResultSetViewer.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":2743,"status":"M"}],"commitId":"c91c30920147b3585533727f46f396cd53b0d1ca","commitMessage":"@@@#6436 RSV: filter update fix (ignore visual pos when navigate assoc/ref)\n\n\nFormer-commit-id: b8706e5a04a4d7e489dcbf7bfd4a6aefa3b42dc1","date":"2019-08-05 21:38:53","modifiedFileCount":"3","status":"M","submitter":"Serge Rider"},{"authorTime":"2019-08-25 00:20:55","codes":[{"authorDate":"2019-08-25 00:20:55","commitOrder":7,"curCode":"    public void navigateAssociation(\n        @NotNull DBRProgressMonitor monitor,\n        @NotNull ResultSetModel bindingsModel,\n        @NotNull DBSEntityAssociation association,\n        @NotNull List<ResultSetRow> rows,\n        boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n        if (!newWindow && !confirmPanelsReset()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Broken association (referenced constraint missing)\");\n        }\n        if (!(refConstraint instanceof DBSEntityReferrer)) {\n            throw new DBException(\"Referenced constraint [\" + refConstraint + \"] is not a referrer\");\n        }\n        DBSEntity targetEntity = refConstraint.getParentObject();\n        targetEntity = DBVUtils.getRealEntity(monitor, targetEntity);\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n\n        \r\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differs from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        \r\n        for (int i = 0; i < ownAttrs.size(); i++) {\n            DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n            DBDAttributeBinding ownBinding = bindingsModel.getAttributeBinding(ownAttr.getAttribute());\n            if (ownBinding == null) {\n                DBWorkbench.getPlatformUI().showError(\"Can't navigate\", \"Attribute \" + ownAttr.getAttribute() + \" is missing in result set\");\n                return;\n            }\n\n            DBSEntityAttribute attribute = refAttr.getAttribute();\n            if (attribute != null) {\n                DBDAttributeConstraint constraint = new DBDAttributeConstraint(attribute, DBDAttributeConstraint.NULL_VISUAL_POSITION);\n                constraint.setVisible(true);\n                constraints.add(constraint);\n                createFilterConstraint(rows, ownBinding, constraint);\n            }\n\n        }\n        \r\n        if (curState == null) {\n            setNewState((DBSDataContainer) targetEntity, model.getDataFilter());\n        }\n        curState.filter = new DBDDataFilter(bindingsModel.getDataFilter());\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","date":"2019-08-25 00:20:55","endLine":2806,"groupId":"10410","id":13,"instanceNumber":1,"isCurCommit":0,"methodName":"navigateAssociation","params":"(@NotNullDBRProgressMonitormonitor@@NotNullResultSetModelbindingsModel@@NotNullDBSEntityAssociationassociation@@NotNullList<ResultSetRow>rows@booleannewWindow)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/00/237ec61dea80d10a8a4ba6fbaf8ce2ea829a80.src","preCode":"    public void navigateAssociation(\n        @NotNull DBRProgressMonitor monitor,\n        @NotNull ResultSetModel bindingsModel,\n        @NotNull DBSEntityAssociation association,\n        @NotNull List<ResultSetRow> rows,\n        boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n        if (!newWindow && !confirmPanelsReset()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Broken association (referenced constraint missing)\");\n        }\n        if (!(refConstraint instanceof DBSEntityReferrer)) {\n            throw new DBException(\"Referenced constraint [\" + refConstraint + \"] is not a referrer\");\n        }\n        DBSEntity targetEntity = refConstraint.getParentObject();\n        if (targetEntity == null) {\n            throw new DBException(\"Null constraint parent\");\n        }\n        targetEntity = DBVUtils.getRealEntity(monitor, targetEntity);\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n\n        \r\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differs from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        \r\n        for (int i = 0; i < ownAttrs.size(); i++) {\n            DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n            DBDAttributeBinding ownBinding = bindingsModel.getAttributeBinding(ownAttr.getAttribute());\n            if (ownBinding == null) {\n                DBWorkbench.getPlatformUI().showError(\"Can't navigate\", \"Attribute \" + ownAttr.getAttribute() + \" is missing in result set\");\n                return;\n            }\n\n            DBDAttributeConstraint constraint = new DBDAttributeConstraint(refAttr.getAttribute(), DBDAttributeConstraint.NULL_VISUAL_POSITION);\n            constraint.setVisible(true);\n            constraints.add(constraint);\n\n            createFilterConstraint(rows, ownBinding, constraint);\n        }\n        \r\n        if (curState == null) {\n            setNewState((DBSDataContainer) targetEntity, model.getDataFilter());\n        }\n        curState.filter = new DBDDataFilter(bindingsModel.getDataFilter());\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/controls/resultset/ResultSetViewer.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":2739,"status":"M"},{"authorDate":"2019-08-25 00:20:55","commitOrder":7,"curCode":"    public void navigateReference(@NotNull DBRProgressMonitor monitor, @NotNull ResultSetModel bindingsModel, @NotNull DBSEntityAssociation association, @NotNull List<ResultSetRow> rows, boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n\n        DBSEntity targetEntity = association.getParentObject();\n        \r\n        targetEntity = DBVUtils.getRealEntity(monitor, targetEntity);\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Referencing entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n\n        \r\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Can't obtain association '\" + DBUtils.getQuotedIdentifier(association) + \"' target constraint (table \" +\n                (association.getAssociatedEntity() == null ? \"???\" : DBUtils.getQuotedIdentifier(association.getAssociatedEntity())) + \")\");\n        }\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differ from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        if (ownAttrs.isEmpty()) {\n            throw new DBException(\"Association '\" + DBUtils.getQuotedIdentifier(association) + \"' has empty column list\");\n        }\n        \r\n        for (int i = 0; i < refAttrs.size(); i++) {\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n\n            DBDAttributeBinding attrBinding = bindingsModel.getAttributeBinding(refAttr.getAttribute());\n            if (attrBinding == null) {\n                log.error(\"Can't find attribute binding for ref attribute '\" + refAttr.getAttribute().getName() + \"'\");\n            } else {\n                \r\n                DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n                DBDAttributeConstraint constraint = new DBDAttributeConstraint(ownAttr.getAttribute(), DBDAttributeConstraint.NULL_VISUAL_POSITION);\n                constraint.setVisible(true);\n                constraints.add(constraint);\n\n                createFilterConstraint(rows, attrBinding, constraint);\n\n            }\n        }\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","date":"2019-08-25 00:20:55","endLine":2869,"groupId":"10410","id":14,"instanceNumber":2,"isCurCommit":0,"methodName":"navigateReference","params":"(@NotNullDBRProgressMonitormonitor@@NotNullResultSetModelbindingsModel@@NotNullDBSEntityAssociationassociation@@NotNullList<ResultSetRow>rows@booleannewWindow)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/00/237ec61dea80d10a8a4ba6fbaf8ce2ea829a80.src","preCode":"    public void navigateReference(@NotNull DBRProgressMonitor monitor, @NotNull ResultSetModel bindingsModel, @NotNull DBSEntityAssociation association, @NotNull List<ResultSetRow> rows, boolean newWindow)\n        throws DBException\n    {\n        if (!confirmProceed()) {\n            return;\n        }\n\n        if (getExecutionContext() == null) {\n            throw new DBException(ModelMessages.error_not_connected_to_database);\n        }\n\n        DBSEntity targetEntity = association.getParentObject();\n        if (targetEntity == null) {\n            throw new DBException(\"Null constraint parent\");\n        }\n        \r\n        targetEntity = DBVUtils.getRealEntity(monitor, targetEntity);\n        if (!(targetEntity instanceof DBSDataContainer)) {\n            throw new DBException(\"Referencing entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] is not a data container\");\n        }\n\n        \r\n        List<DBDAttributeConstraint> constraints = new ArrayList<>();\n\n        \r\n        DBSEntityConstraint refConstraint = association.getReferencedConstraint();\n        if (refConstraint == null) {\n            throw new DBException(\"Can't obtain association '\" + DBUtils.getQuotedIdentifier(association) + \"' target constraint (table \" +\n                (association.getAssociatedEntity() == null ? \"???\" : DBUtils.getQuotedIdentifier(association.getAssociatedEntity())) + \")\");\n        }\n        List<? extends DBSEntityAttributeRef> ownAttrs = CommonUtils.safeList(((DBSEntityReferrer) association).getAttributeReferences(monitor));\n        List<? extends DBSEntityAttributeRef> refAttrs = CommonUtils.safeList(((DBSEntityReferrer) refConstraint).getAttributeReferences(monitor));\n        if (ownAttrs.size() != refAttrs.size()) {\n            throw new DBException(\n                \"Entity [\" + DBUtils.getObjectFullName(targetEntity, DBPEvaluationContext.UI) + \"] association [\" + association.getName() +\n                    \"] columns differ from referenced constraint [\" + refConstraint.getName() + \"] (\" + ownAttrs.size() + \"<>\" + refAttrs.size() + \")\");\n        }\n        if (ownAttrs.isEmpty()) {\n            throw new DBException(\"Association '\" + DBUtils.getQuotedIdentifier(association) + \"' has empty column list\");\n        }\n        \r\n        for (int i = 0; i < refAttrs.size(); i++) {\n            DBSEntityAttributeRef refAttr = refAttrs.get(i);\n\n            DBDAttributeBinding attrBinding = bindingsModel.getAttributeBinding(refAttr.getAttribute());\n            if (attrBinding == null) {\n                log.error(\"Can't find attribute binding for ref attribute '\" + refAttr.getAttribute().getName() + \"'\");\n            } else {\n                \r\n                DBSEntityAttributeRef ownAttr = ownAttrs.get(i);\n                DBDAttributeConstraint constraint = new DBDAttributeConstraint(ownAttr.getAttribute(), DBDAttributeConstraint.NULL_VISUAL_POSITION);\n                constraint.setVisible(true);\n                constraints.add(constraint);\n\n                createFilterConstraint(rows, attrBinding, constraint);\n\n            }\n        }\n        navigateEntity(monitor, newWindow, targetEntity, constraints);\n    }\n","realPath":"plugins/org.jkiss.dbeaver.ui.editors.data/src/org/jkiss/dbeaver/ui/controls/resultset/ResultSetViewer.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":2813,"status":"M"}],"commitId":"e274dc27ff5137c3b5bb8f22580169e5d1ee11e0","commitMessage":"@@@#6529 Virtual structure editor tab. Virt model events\n\n\nFormer-commit-id: 76e0c1ab9b6f0a82837ff850ab5285c8c71150ca","date":"2019-08-25 00:20:55","modifiedFileCount":"11","status":"M","submitter":"serge-rider"}]
