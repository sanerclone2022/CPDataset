[{"authorTime":"2019-04-18 17:54:31","codes":[{"authorDate":"2019-04-18 17:54:31","commitOrder":2,"curCode":"    public static void setGeometryProperties(IResultSetController controller, GeomAttrs geomAttrs, DBGeometry geometry) {\n        \r\n        ResultSetModel model = controller.getModel();\n        ResultSetRow currentRow = controller.getCurrentRow();\n        if (currentRow != null) {\n            Object value = model.getCellValue(geomAttrs.geomAttr, currentRow);\n            \r\n            if (!geomAttrs.descAttrs.isEmpty()) {\n                Map<String, Object> properties = new LinkedHashMap<>();\n                for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                    Object descValue = model.getCellValue(da, currentRow);\n                    properties.put(da.getName(), descValue);\n                }\n                geometry.setProperties(properties);\n            }\n        }\n    }\n","date":"2019-04-18 17:54:31","endLine":101,"groupId":"9683","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"setGeometryProperties","params":"(IResultSetControllercontroller@GeomAttrsgeomAttrs@DBGeometrygeometry)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/98/89852255140535a2d83ff24d1fa59af0018412.src","preCode":"    public static void setGeometryProperties(IResultSetController controller, GeomAttrs geomAttrs, DBGeometry geometry) {\n        \r\n        ResultSetModel model = controller.getModel();\n        ResultSetRow currentRow = controller.getCurrentRow();\n        if (currentRow != null) {\n            Object value = model.getCellValue(geomAttrs.geomAttr, currentRow);\n            \r\n            if (!geomAttrs.descAttrs.isEmpty()) {\n                Map<String, Object> properties = new LinkedHashMap<>();\n                for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                    Object descValue = model.getCellValue(da, currentRow);\n                    properties.put(da.getName(), descValue);\n                }\n                geometry.setProperties(properties);\n            }\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.data.gis.view/src/org/jkiss/dbeaver/ui/gis/GeometryDataUtils.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":85,"status":"B"},{"authorDate":"2019-04-18 17:54:31","commitOrder":2,"curCode":"    public void refreshData(boolean refreshMetadata, boolean append, boolean keepState) {\n        List<GeometryDataUtils.GeomAttrs> result = GeometryDataUtils.extractGeometryAttributes(getController());\n        ResultSetModel model = getController().getModel();\n\n        \r\n        List<DBGeometry> geometries = new ArrayList<>();\n        for (GeometryDataUtils.GeomAttrs geomAttrs : result) {\n            for (ResultSetRow row : model.getAllRows()) {\n                Object value = model.getCellValue(geomAttrs.geomAttr, row);\n                if (value instanceof DBGeometry) {\n                    DBGeometry geometry = (DBGeometry)value;\n                    geometries.add(geometry);\n                    \r\n                    if (!geomAttrs.descAttrs.isEmpty()) {\n                        Map<String, Object> properties = new LinkedHashMap<>();\n                        for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                            Object descValue = model.getCellValue(da, row);\n                            properties.put(da.getName(), descValue);\n                        }\n                        geometry.setProperties(properties);\n                    }\n                }\n            }\n        }\n        try {\n            leafletViewer.setGeometryData(geometries.toArray(new DBGeometry[0]));\n        } catch (DBException e) {\n            DBWorkbench.getPlatformUI().showError(\"Error rendering GIS data\", \"Error while rendering geometry data\", e);\n        }\n    }\n","date":"2019-04-18 17:54:31","endLine":144,"groupId":"9683","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"refreshData","params":"(booleanrefreshMetadata@booleanappend@booleankeepState)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/ea/072116c7d5fbf9bfa7dd2b11fd62f9befa2409.src","preCode":"    public void refreshData(boolean refreshMetadata, boolean append, boolean keepState) {\n        List<GeometryDataUtils.GeomAttrs> result = GeometryDataUtils.extractGeometryAttributes(getController());\n        ResultSetModel model = getController().getModel();\n\n        \r\n        List<DBGeometry> geometries = new ArrayList<>();\n        for (GeometryDataUtils.GeomAttrs geomAttrs : result) {\n            for (ResultSetRow row : model.getAllRows()) {\n                Object value = model.getCellValue(geomAttrs.geomAttr, row);\n                if (value instanceof DBGeometry) {\n                    DBGeometry geometry = (DBGeometry)value;\n                    geometries.add(geometry);\n                    \r\n                    if (!geomAttrs.descAttrs.isEmpty()) {\n                        Map<String, Object> properties = new LinkedHashMap<>();\n                        for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                            Object descValue = model.getCellValue(da, row);\n                            properties.put(da.getName(), descValue);\n                        }\n                        geometry.setProperties(properties);\n                    }\n                }\n            }\n        }\n        try {\n            leafletViewer.setGeometryData(geometries.toArray(new DBGeometry[0]));\n        } catch (DBException e) {\n            DBWorkbench.getPlatformUI().showError(\"Error rendering GIS data\", \"Error while rendering geometry data\", e);\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.data.gis.view/src/org/jkiss/dbeaver/ui/gis/presentation/GeometryPresentation.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":115,"status":"MB"}],"commitId":"78f8201736423093a78a26fab28ce5ba8cdbc168","commitMessage":"@@@#4222 GIS tooltips for individual values\n\n\nFormer-commit-id: 493a92f5335fa2dd43bcfeec9ea50fb1fddb78e3","date":"2019-04-18 17:54:31","modifiedFileCount":"7","status":"M","submitter":"Serge Rider"},{"authorTime":"2019-04-18 17:54:31","codes":[{"authorDate":"2019-04-18 18:16:32","commitOrder":3,"curCode":"    public static void setGeometryProperties(IResultSetController controller, GeomAttrs geomAttrs, DBGeometry geometry, ResultSetRow row) {\n        \r\n        ResultSetModel model = controller.getModel();\n        if (row != null) {\n            \r\n            if (!geomAttrs.descAttrs.isEmpty()) {\n                Map<String, Object> properties = new LinkedHashMap<>();\n                for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                    Object descValue = model.getCellValue(da, row);\n                    properties.put(da.getName(), descValue);\n                }\n                geometry.setProperties(properties);\n            }\n        }\n    }\n","date":"2019-04-18 18:16:32","endLine":99,"groupId":"9683","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"setGeometryProperties","params":"(IResultSetControllercontroller@GeomAttrsgeomAttrs@DBGeometrygeometry@ResultSetRowrow)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/32/67b5273376f49170a25881bcdaa8af4d1a3fe5.src","preCode":"    public static void setGeometryProperties(IResultSetController controller, GeomAttrs geomAttrs, DBGeometry geometry) {\n        \r\n        ResultSetModel model = controller.getModel();\n        ResultSetRow currentRow = controller.getCurrentRow();\n        if (currentRow != null) {\n            Object value = model.getCellValue(geomAttrs.geomAttr, currentRow);\n            \r\n            if (!geomAttrs.descAttrs.isEmpty()) {\n                Map<String, Object> properties = new LinkedHashMap<>();\n                for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                    Object descValue = model.getCellValue(da, currentRow);\n                    properties.put(da.getName(), descValue);\n                }\n                geometry.setProperties(properties);\n            }\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.data.gis.view/src/org/jkiss/dbeaver/ui/gis/GeometryDataUtils.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":85,"status":"M"},{"authorDate":"2019-04-18 17:54:31","commitOrder":3,"curCode":"    public void refreshData(boolean refreshMetadata, boolean append, boolean keepState) {\n        List<GeometryDataUtils.GeomAttrs> result = GeometryDataUtils.extractGeometryAttributes(getController());\n        ResultSetModel model = getController().getModel();\n\n        \r\n        List<DBGeometry> geometries = new ArrayList<>();\n        for (GeometryDataUtils.GeomAttrs geomAttrs : result) {\n            for (ResultSetRow row : model.getAllRows()) {\n                Object value = model.getCellValue(geomAttrs.geomAttr, row);\n                if (value instanceof DBGeometry) {\n                    DBGeometry geometry = (DBGeometry)value;\n                    geometries.add(geometry);\n                    \r\n                    if (!geomAttrs.descAttrs.isEmpty()) {\n                        Map<String, Object> properties = new LinkedHashMap<>();\n                        for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                            Object descValue = model.getCellValue(da, row);\n                            properties.put(da.getName(), descValue);\n                        }\n                        geometry.setProperties(properties);\n                    }\n                }\n            }\n        }\n        try {\n            leafletViewer.setGeometryData(geometries.toArray(new DBGeometry[0]));\n        } catch (DBException e) {\n            DBWorkbench.getPlatformUI().showError(\"Error rendering GIS data\", \"Error while rendering geometry data\", e);\n        }\n    }\n","date":"2019-04-18 17:54:31","endLine":144,"groupId":"9683","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"refreshData","params":"(booleanrefreshMetadata@booleanappend@booleankeepState)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/ea/072116c7d5fbf9bfa7dd2b11fd62f9befa2409.src","preCode":"    public void refreshData(boolean refreshMetadata, boolean append, boolean keepState) {\n        List<GeometryDataUtils.GeomAttrs> result = GeometryDataUtils.extractGeometryAttributes(getController());\n        ResultSetModel model = getController().getModel();\n\n        \r\n        List<DBGeometry> geometries = new ArrayList<>();\n        for (GeometryDataUtils.GeomAttrs geomAttrs : result) {\n            for (ResultSetRow row : model.getAllRows()) {\n                Object value = model.getCellValue(geomAttrs.geomAttr, row);\n                if (value instanceof DBGeometry) {\n                    DBGeometry geometry = (DBGeometry)value;\n                    geometries.add(geometry);\n                    \r\n                    if (!geomAttrs.descAttrs.isEmpty()) {\n                        Map<String, Object> properties = new LinkedHashMap<>();\n                        for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                            Object descValue = model.getCellValue(da, row);\n                            properties.put(da.getName(), descValue);\n                        }\n                        geometry.setProperties(properties);\n                    }\n                }\n            }\n        }\n        try {\n            leafletViewer.setGeometryData(geometries.toArray(new DBGeometry[0]));\n        } catch (DBException e) {\n            DBWorkbench.getPlatformUI().showError(\"Error rendering GIS data\", \"Error while rendering geometry data\", e);\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.data.gis.view/src/org/jkiss/dbeaver/ui/gis/presentation/GeometryPresentation.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":115,"status":"N"}],"commitId":"9cd658f1f4e1a66ef217fb2081dff5d97a1b8812","commitMessage":"@@@#4222 Multiple value viewer\n\n\nFormer-commit-id: 8759df88b2d5da6ce14d5e73244669917471013c","date":"2019-04-18 18:16:32","modifiedFileCount":"2","status":"M","submitter":"Serge Rider"},{"authorTime":"2019-04-18 17:54:31","codes":[{"authorDate":"2019-04-23 16:24:31","commitOrder":4,"curCode":"    public static void setGeometryProperties(IResultSetController controller, GeomAttrs geomAttrs, DBGeometry geometry, ResultSetRow row) {\n        \r\n        ResultSetModel model = controller.getModel();\n        if (row != null) {\n            \r\n            if (!geomAttrs.descAttrs.isEmpty()) {\n                Map<String, Object> properties = new LinkedHashMap<>();\n                for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                    Object descValue = model.getCellValue(da, row);\n                    if (!DBUtils.isNullValue(descValue)) {\n                        properties.put(da.getName(), descValue);\n                    }\n                }\n                geometry.setProperties(properties);\n            }\n        }\n    }\n","date":"2019-04-23 16:24:31","endLine":95,"groupId":"9683","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"setGeometryProperties","params":"(IResultSetControllercontroller@GeomAttrsgeomAttrs@DBGeometrygeometry@ResultSetRowrow)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/bd/cefeab6daf47858d54f6d9a5247cdcc049f2b2.src","preCode":"    public static void setGeometryProperties(IResultSetController controller, GeomAttrs geomAttrs, DBGeometry geometry, ResultSetRow row) {\n        \r\n        ResultSetModel model = controller.getModel();\n        if (row != null) {\n            \r\n            if (!geomAttrs.descAttrs.isEmpty()) {\n                Map<String, Object> properties = new LinkedHashMap<>();\n                for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                    Object descValue = model.getCellValue(da, row);\n                    properties.put(da.getName(), descValue);\n                }\n                geometry.setProperties(properties);\n            }\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.data.gis.view/src/org/jkiss/dbeaver/ui/gis/GeometryDataUtils.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":79,"status":"M"},{"authorDate":"2019-04-18 17:54:31","commitOrder":4,"curCode":"    public void refreshData(boolean refreshMetadata, boolean append, boolean keepState) {\n        List<GeometryDataUtils.GeomAttrs> result = GeometryDataUtils.extractGeometryAttributes(getController());\n        ResultSetModel model = getController().getModel();\n\n        \r\n        List<DBGeometry> geometries = new ArrayList<>();\n        for (GeometryDataUtils.GeomAttrs geomAttrs : result) {\n            for (ResultSetRow row : model.getAllRows()) {\n                Object value = model.getCellValue(geomAttrs.geomAttr, row);\n                if (value instanceof DBGeometry) {\n                    DBGeometry geometry = (DBGeometry)value;\n                    geometries.add(geometry);\n                    \r\n                    if (!geomAttrs.descAttrs.isEmpty()) {\n                        Map<String, Object> properties = new LinkedHashMap<>();\n                        for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                            Object descValue = model.getCellValue(da, row);\n                            properties.put(da.getName(), descValue);\n                        }\n                        geometry.setProperties(properties);\n                    }\n                }\n            }\n        }\n        try {\n            leafletViewer.setGeometryData(geometries.toArray(new DBGeometry[0]));\n        } catch (DBException e) {\n            DBWorkbench.getPlatformUI().showError(\"Error rendering GIS data\", \"Error while rendering geometry data\", e);\n        }\n    }\n","date":"2019-04-18 17:54:31","endLine":144,"groupId":"9683","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"refreshData","params":"(booleanrefreshMetadata@booleanappend@booleankeepState)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/ea/072116c7d5fbf9bfa7dd2b11fd62f9befa2409.src","preCode":"    public void refreshData(boolean refreshMetadata, boolean append, boolean keepState) {\n        List<GeometryDataUtils.GeomAttrs> result = GeometryDataUtils.extractGeometryAttributes(getController());\n        ResultSetModel model = getController().getModel();\n\n        \r\n        List<DBGeometry> geometries = new ArrayList<>();\n        for (GeometryDataUtils.GeomAttrs geomAttrs : result) {\n            for (ResultSetRow row : model.getAllRows()) {\n                Object value = model.getCellValue(geomAttrs.geomAttr, row);\n                if (value instanceof DBGeometry) {\n                    DBGeometry geometry = (DBGeometry)value;\n                    geometries.add(geometry);\n                    \r\n                    if (!geomAttrs.descAttrs.isEmpty()) {\n                        Map<String, Object> properties = new LinkedHashMap<>();\n                        for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                            Object descValue = model.getCellValue(da, row);\n                            properties.put(da.getName(), descValue);\n                        }\n                        geometry.setProperties(properties);\n                    }\n                }\n            }\n        }\n        try {\n            leafletViewer.setGeometryData(geometries.toArray(new DBGeometry[0]));\n        } catch (DBException e) {\n            DBWorkbench.getPlatformUI().showError(\"Error rendering GIS data\", \"Error while rendering geometry data\", e);\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.data.gis.view/src/org/jkiss/dbeaver/ui/gis/presentation/GeometryPresentation.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":115,"status":"N"}],"commitId":"04839476658bb1b293a9d8e073da1c12c93fde78","commitMessage":"@@@GIS converter fix\n\n\nFormer-commit-id: 5d678fabd344a0266792d196ba2191f12cf7765f","date":"2019-04-23 16:24:31","modifiedFileCount":"3","status":"M","submitter":"Serge Rider"},{"authorTime":"2019-04-29 05:10:08","codes":[{"authorDate":"2019-04-23 16:24:31","commitOrder":5,"curCode":"    public static void setGeometryProperties(IResultSetController controller, GeomAttrs geomAttrs, DBGeometry geometry, ResultSetRow row) {\n        \r\n        ResultSetModel model = controller.getModel();\n        if (row != null) {\n            \r\n            if (!geomAttrs.descAttrs.isEmpty()) {\n                Map<String, Object> properties = new LinkedHashMap<>();\n                for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                    Object descValue = model.getCellValue(da, row);\n                    if (!DBUtils.isNullValue(descValue)) {\n                        properties.put(da.getName(), descValue);\n                    }\n                }\n                geometry.setProperties(properties);\n            }\n        }\n    }\n","date":"2019-04-23 16:24:31","endLine":95,"groupId":"9683","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"setGeometryProperties","params":"(IResultSetControllercontroller@GeomAttrsgeomAttrs@DBGeometrygeometry@ResultSetRowrow)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/bd/cefeab6daf47858d54f6d9a5247cdcc049f2b2.src","preCode":"    public static void setGeometryProperties(IResultSetController controller, GeomAttrs geomAttrs, DBGeometry geometry, ResultSetRow row) {\n        \r\n        ResultSetModel model = controller.getModel();\n        if (row != null) {\n            \r\n            if (!geomAttrs.descAttrs.isEmpty()) {\n                Map<String, Object> properties = new LinkedHashMap<>();\n                for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                    Object descValue = model.getCellValue(da, row);\n                    if (!DBUtils.isNullValue(descValue)) {\n                        properties.put(da.getName(), descValue);\n                    }\n                }\n                geometry.setProperties(properties);\n            }\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.data.gis.view/src/org/jkiss/dbeaver/ui/gis/GeometryDataUtils.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":79,"status":"N"},{"authorDate":"2019-04-29 05:10:08","commitOrder":5,"curCode":"    public void refreshData(boolean refreshMetadata, boolean append, boolean keepState) {\n        List<GeometryDataUtils.GeomAttrs> result = GeometryDataUtils.extractGeometryAttributes(getController());\n        ResultSetModel model = getController().getModel();\n\n        \r\n        List<DBGeometry> geometries = new ArrayList<>();\n        for (GeometryDataUtils.GeomAttrs geomAttrs : result) {\n            for (ResultSetRow row : model.getAllRows()) {\n                Object value = model.getCellValue(geomAttrs.geomAttr, row);\n                if (value instanceof DBGeometry) {\n                    DBGeometry geometry = (DBGeometry)value;\n                    geometries.add(geometry);\n                    \r\n                    if (!geomAttrs.descAttrs.isEmpty()) {\n                        Map<String, Object> properties = new LinkedHashMap<>();\n                        for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                            Object descValue = model.getCellValue(da, row);\n                            if (!DBUtils.isNullValue(descValue)) {\n                                properties.put(da.getName(), descValue);\n                            }\n                        }\n                        geometry.setProperties(properties);\n                    }\n                }\n            }\n        }\n        try {\n            leafletViewer.setGeometryData(geometries.toArray(new DBGeometry[0]));\n        } catch (DBException e) {\n            DBWorkbench.getPlatformUI().showError(\"Error rendering GIS data\", \"Error while rendering geometry data\", e);\n        }\n    }\n","date":"2019-04-29 05:10:08","endLine":147,"groupId":"9683","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"refreshData","params":"(booleanrefreshMetadata@booleanappend@booleankeepState)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/c9/6b96cae031ce28de26dd2fcf22d96601e96b4a.src","preCode":"    public void refreshData(boolean refreshMetadata, boolean append, boolean keepState) {\n        List<GeometryDataUtils.GeomAttrs> result = GeometryDataUtils.extractGeometryAttributes(getController());\n        ResultSetModel model = getController().getModel();\n\n        \r\n        List<DBGeometry> geometries = new ArrayList<>();\n        for (GeometryDataUtils.GeomAttrs geomAttrs : result) {\n            for (ResultSetRow row : model.getAllRows()) {\n                Object value = model.getCellValue(geomAttrs.geomAttr, row);\n                if (value instanceof DBGeometry) {\n                    DBGeometry geometry = (DBGeometry)value;\n                    geometries.add(geometry);\n                    \r\n                    if (!geomAttrs.descAttrs.isEmpty()) {\n                        Map<String, Object> properties = new LinkedHashMap<>();\n                        for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                            Object descValue = model.getCellValue(da, row);\n                            properties.put(da.getName(), descValue);\n                        }\n                        geometry.setProperties(properties);\n                    }\n                }\n            }\n        }\n        try {\n            leafletViewer.setGeometryData(geometries.toArray(new DBGeometry[0]));\n        } catch (DBException e) {\n            DBWorkbench.getPlatformUI().showError(\"Error rendering GIS data\", \"Error while rendering geometry data\", e);\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.data.gis.view/src/org/jkiss/dbeaver/ui/gis/presentation/GeometryPresentation.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":116,"status":"M"}],"commitId":"318b8ab58f6b9d435dd8b21a11acfb60d94ba9b9","commitMessage":"@@@GIS view: remove NULLs from tooltips\n\n\nFormer-commit-id: 136624da6dd7e7275c4ae79a42646e63337058f9","date":"2019-04-29 05:10:08","modifiedFileCount":"1","status":"M","submitter":"serge-rider"},{"authorTime":"2019-04-29 05:41:31","codes":[{"authorDate":"2019-04-23 16:24:31","commitOrder":6,"curCode":"    public static void setGeometryProperties(IResultSetController controller, GeomAttrs geomAttrs, DBGeometry geometry, ResultSetRow row) {\n        \r\n        ResultSetModel model = controller.getModel();\n        if (row != null) {\n            \r\n            if (!geomAttrs.descAttrs.isEmpty()) {\n                Map<String, Object> properties = new LinkedHashMap<>();\n                for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                    Object descValue = model.getCellValue(da, row);\n                    if (!DBUtils.isNullValue(descValue)) {\n                        properties.put(da.getName(), descValue);\n                    }\n                }\n                geometry.setProperties(properties);\n            }\n        }\n    }\n","date":"2019-04-23 16:24:31","endLine":95,"groupId":"9683","id":9,"instanceNumber":1,"isCurCommit":0,"methodName":"setGeometryProperties","params":"(IResultSetControllercontroller@GeomAttrsgeomAttrs@DBGeometrygeometry@ResultSetRowrow)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/bd/cefeab6daf47858d54f6d9a5247cdcc049f2b2.src","preCode":"    public static void setGeometryProperties(IResultSetController controller, GeomAttrs geomAttrs, DBGeometry geometry, ResultSetRow row) {\n        \r\n        ResultSetModel model = controller.getModel();\n        if (row != null) {\n            \r\n            if (!geomAttrs.descAttrs.isEmpty()) {\n                Map<String, Object> properties = new LinkedHashMap<>();\n                for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                    Object descValue = model.getCellValue(da, row);\n                    if (!DBUtils.isNullValue(descValue)) {\n                        properties.put(da.getName(), descValue);\n                    }\n                }\n                geometry.setProperties(properties);\n            }\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.data.gis.view/src/org/jkiss/dbeaver/ui/gis/GeometryDataUtils.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":79,"status":"N"},{"authorDate":"2019-04-29 05:41:31","commitOrder":6,"curCode":"    public void refreshData(boolean refreshMetadata, boolean append, boolean keepState) {\n        controller.updateEditControls();\n\n        List<GeometryDataUtils.GeomAttrs> result = GeometryDataUtils.extractGeometryAttributes(getController());\n        ResultSetModel model = getController().getModel();\n\n        \r\n        List<DBGeometry> geometries = new ArrayList<>();\n        for (GeometryDataUtils.GeomAttrs geomAttrs : result) {\n            for (ResultSetRow row : model.getAllRows()) {\n                Object value = model.getCellValue(geomAttrs.geomAttr, row);\n                if (value instanceof DBGeometry) {\n                    DBGeometry geometry = (DBGeometry)value;\n                    geometries.add(geometry);\n                    \r\n                    if (!geomAttrs.descAttrs.isEmpty()) {\n                        Map<String, Object> properties = new LinkedHashMap<>();\n                        for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                            Object descValue = model.getCellValue(da, row);\n                            if (!DBUtils.isNullValue(descValue)) {\n                                properties.put(da.getName(), descValue);\n                            }\n                        }\n                        geometry.setProperties(properties);\n                    }\n                }\n            }\n        }\n        try {\n            leafletViewer.setGeometryData(geometries.toArray(new DBGeometry[0]));\n        } catch (DBException e) {\n            DBWorkbench.getPlatformUI().showError(\"Error rendering GIS data\", \"Error while rendering geometry data\", e);\n        }\n    }\n","date":"2019-04-29 05:41:31","endLine":149,"groupId":"9683","id":10,"instanceNumber":2,"isCurCommit":0,"methodName":"refreshData","params":"(booleanrefreshMetadata@booleanappend@booleankeepState)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/e2/529162d2fe7d6f3b4cf9fdf8029a5b94af7561.src","preCode":"    public void refreshData(boolean refreshMetadata, boolean append, boolean keepState) {\n        List<GeometryDataUtils.GeomAttrs> result = GeometryDataUtils.extractGeometryAttributes(getController());\n        ResultSetModel model = getController().getModel();\n\n        \r\n        List<DBGeometry> geometries = new ArrayList<>();\n        for (GeometryDataUtils.GeomAttrs geomAttrs : result) {\n            for (ResultSetRow row : model.getAllRows()) {\n                Object value = model.getCellValue(geomAttrs.geomAttr, row);\n                if (value instanceof DBGeometry) {\n                    DBGeometry geometry = (DBGeometry)value;\n                    geometries.add(geometry);\n                    \r\n                    if (!geomAttrs.descAttrs.isEmpty()) {\n                        Map<String, Object> properties = new LinkedHashMap<>();\n                        for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                            Object descValue = model.getCellValue(da, row);\n                            if (!DBUtils.isNullValue(descValue)) {\n                                properties.put(da.getName(), descValue);\n                            }\n                        }\n                        geometry.setProperties(properties);\n                    }\n                }\n            }\n        }\n        try {\n            leafletViewer.setGeometryData(geometries.toArray(new DBGeometry[0]));\n        } catch (DBException e) {\n            DBWorkbench.getPlatformUI().showError(\"Error rendering GIS data\", \"Error while rendering geometry data\", e);\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.data.gis.view/src/org/jkiss/dbeaver/ui/gis/presentation/GeometryPresentation.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":116,"status":"M"}],"commitId":"5679bba1a06486d9d7ea627c52ddf1d5f01b6679","commitMessage":"@@@Presentations extra settings\n\n\nFormer-commit-id: 81d665cd5249e0a9b752fd6db96e37dfe2ae6449","date":"2019-04-29 05:41:31","modifiedFileCount":"4","status":"M","submitter":"serge-rider"},{"authorTime":"2019-04-30 14:18:13","codes":[{"authorDate":"2019-04-23 16:24:31","commitOrder":7,"curCode":"    public static void setGeometryProperties(IResultSetController controller, GeomAttrs geomAttrs, DBGeometry geometry, ResultSetRow row) {\n        \r\n        ResultSetModel model = controller.getModel();\n        if (row != null) {\n            \r\n            if (!geomAttrs.descAttrs.isEmpty()) {\n                Map<String, Object> properties = new LinkedHashMap<>();\n                for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                    Object descValue = model.getCellValue(da, row);\n                    if (!DBUtils.isNullValue(descValue)) {\n                        properties.put(da.getName(), descValue);\n                    }\n                }\n                geometry.setProperties(properties);\n            }\n        }\n    }\n","date":"2019-04-23 16:24:31","endLine":95,"groupId":"9683","id":11,"instanceNumber":1,"isCurCommit":0,"methodName":"setGeometryProperties","params":"(IResultSetControllercontroller@GeomAttrsgeomAttrs@DBGeometrygeometry@ResultSetRowrow)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/bd/cefeab6daf47858d54f6d9a5247cdcc049f2b2.src","preCode":"    public static void setGeometryProperties(IResultSetController controller, GeomAttrs geomAttrs, DBGeometry geometry, ResultSetRow row) {\n        \r\n        ResultSetModel model = controller.getModel();\n        if (row != null) {\n            \r\n            if (!geomAttrs.descAttrs.isEmpty()) {\n                Map<String, Object> properties = new LinkedHashMap<>();\n                for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                    Object descValue = model.getCellValue(da, row);\n                    if (!DBUtils.isNullValue(descValue)) {\n                        properties.put(da.getName(), descValue);\n                    }\n                }\n                geometry.setProperties(properties);\n            }\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.data.gis.view/src/org/jkiss/dbeaver/ui/gis/GeometryDataUtils.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":79,"status":"N"},{"authorDate":"2019-04-30 14:18:13","commitOrder":7,"curCode":"    public void refreshData(boolean refreshMetadata, boolean append, boolean keepState) {\n        controller.updateEditControls();\n\n        List<GeometryDataUtils.GeomAttrs> result = GeometryDataUtils.extractGeometryAttributes(getController());\n        ResultSetModel model = getController().getModel();\n\n        \r\n        List<DBGeometry> geometries = new ArrayList<>();\n        for (GeometryDataUtils.GeomAttrs geomAttrs : result) {\n            for (ResultSetRow row : model.getAllRows()) {\n                Object value = model.getCellValue(geomAttrs.geomAttr, row);\n\n                DBGeometry geometry = GisTransformUtils.getGeometryValueFromObject(\n                    controller.getDataContainer(),\n                    geomAttrs.geomAttr.getValueHandler(),\n                    geomAttrs.geomAttr,\n                    value);\n\n                if (geometry != null) {\n                    geometries.add(geometry);\n                    \r\n                    if (!geomAttrs.descAttrs.isEmpty()) {\n                        Map<String, Object> properties = new LinkedHashMap<>();\n                        for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                            Object descValue = model.getCellValue(da, row);\n                            if (!DBUtils.isNullValue(descValue)) {\n                                properties.put(da.getName(), descValue);\n                            }\n                        }\n                        geometry.setProperties(properties);\n                    }\n                }\n            }\n        }\n        try {\n            leafletViewer.setGeometryData(geometries.toArray(new DBGeometry[0]));\n        } catch (DBException e) {\n            DBWorkbench.getPlatformUI().showError(\"Error rendering GIS data\", \"Error while rendering geometry data\", e);\n        }\n    }\n","date":"2019-04-30 14:18:13","endLine":156,"groupId":"10682","id":12,"instanceNumber":2,"isCurCommit":0,"methodName":"refreshData","params":"(booleanrefreshMetadata@booleanappend@booleankeepState)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/9f/5bbcf9b4ff70ebc1f07129a1d266d734fa21bb.src","preCode":"    public void refreshData(boolean refreshMetadata, boolean append, boolean keepState) {\n        controller.updateEditControls();\n\n        List<GeometryDataUtils.GeomAttrs> result = GeometryDataUtils.extractGeometryAttributes(getController());\n        ResultSetModel model = getController().getModel();\n\n        \r\n        List<DBGeometry> geometries = new ArrayList<>();\n        for (GeometryDataUtils.GeomAttrs geomAttrs : result) {\n            for (ResultSetRow row : model.getAllRows()) {\n                Object value = model.getCellValue(geomAttrs.geomAttr, row);\n                if (value instanceof DBGeometry) {\n                    DBGeometry geometry = (DBGeometry)value;\n                    geometries.add(geometry);\n                    \r\n                    if (!geomAttrs.descAttrs.isEmpty()) {\n                        Map<String, Object> properties = new LinkedHashMap<>();\n                        for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                            Object descValue = model.getCellValue(da, row);\n                            if (!DBUtils.isNullValue(descValue)) {\n                                properties.put(da.getName(), descValue);\n                            }\n                        }\n                        geometry.setProperties(properties);\n                    }\n                }\n            }\n        }\n        try {\n            leafletViewer.setGeometryData(geometries.toArray(new DBGeometry[0]));\n        } catch (DBException e) {\n            DBWorkbench.getPlatformUI().showError(\"Error rendering GIS data\", \"Error while rendering geometry data\", e);\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.data.gis.view/src/org/jkiss/dbeaver/ui/gis/presentation/GeometryPresentation.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":117,"status":"M"}],"commitId":"06e61362a7a1005d6c66c3e9e804f730eb699e9c","commitMessage":"@@@#4222 Spatial attribute transformers\n\n\nFormer-commit-id: dc5bbc59883f6f2ee522271e48add5cc58d4ed76","date":"2019-04-30 14:18:13","modifiedFileCount":"4","status":"M","submitter":"serge-rider"},{"authorTime":"2019-09-14 20:12:30","codes":[{"authorDate":"2019-04-23 16:24:31","commitOrder":8,"curCode":"    public static void setGeometryProperties(IResultSetController controller, GeomAttrs geomAttrs, DBGeometry geometry, ResultSetRow row) {\n        \r\n        ResultSetModel model = controller.getModel();\n        if (row != null) {\n            \r\n            if (!geomAttrs.descAttrs.isEmpty()) {\n                Map<String, Object> properties = new LinkedHashMap<>();\n                for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                    Object descValue = model.getCellValue(da, row);\n                    if (!DBUtils.isNullValue(descValue)) {\n                        properties.put(da.getName(), descValue);\n                    }\n                }\n                geometry.setProperties(properties);\n            }\n        }\n    }\n","date":"2019-04-23 16:24:31","endLine":95,"groupId":"9683","id":13,"instanceNumber":1,"isCurCommit":0,"methodName":"setGeometryProperties","params":"(IResultSetControllercontroller@GeomAttrsgeomAttrs@DBGeometrygeometry@ResultSetRowrow)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/bd/cefeab6daf47858d54f6d9a5247cdcc049f2b2.src","preCode":"    public static void setGeometryProperties(IResultSetController controller, GeomAttrs geomAttrs, DBGeometry geometry, ResultSetRow row) {\n        \r\n        ResultSetModel model = controller.getModel();\n        if (row != null) {\n            \r\n            if (!geomAttrs.descAttrs.isEmpty()) {\n                Map<String, Object> properties = new LinkedHashMap<>();\n                for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                    Object descValue = model.getCellValue(da, row);\n                    if (!DBUtils.isNullValue(descValue)) {\n                        properties.put(da.getName(), descValue);\n                    }\n                }\n                geometry.setProperties(properties);\n            }\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.data.gis.view/src/org/jkiss/dbeaver/ui/gis/GeometryDataUtils.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":79,"status":"N"},{"authorDate":"2019-09-14 20:12:30","commitOrder":8,"curCode":"    public void refreshData(boolean refreshMetadata, boolean append, boolean keepState) {\n        controller.updateEditControls();\n\n        List<GeometryDataUtils.GeomAttrs> result = GeometryDataUtils.extractGeometryAttributes(getController());\n        ResultSetModel model = getController().getModel();\n\n        \r\n        List<DBGeometry> geometries = new ArrayList<>();\n        for (GeometryDataUtils.GeomAttrs geomAttrs : result) {\n            for (ResultSetRow row : model.getAllRows()) {\n                Object value = model.getCellValue(geomAttrs.geomAttr, row);\n\n                DBGeometry geometry = GisTransformUtils.getGeometryValueFromObject(\n                    controller.getDataContainer(),\n                    geomAttrs.geomAttr.getValueHandler(),\n                    geomAttrs.geomAttr,\n                    value);\n\n                if (geometry != null) {\n                    geometries.add(geometry);\n                    \r\n                    Map<String, Object> properties = new LinkedHashMap<>();\n                    properties.put(\"Column\", DBUtils.getObjectFullName(geomAttrs.geomAttr, DBPEvaluationContext.UI));\n                    if (!geomAttrs.descAttrs.isEmpty()) {\n                        for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                            Object descValue = model.getCellValue(da, row);\n                            if (!DBUtils.isNullValue(descValue)) {\n                                properties.put(da.getName(), descValue);\n                            }\n                        }\n                    }\n                    geometry.setProperties(properties);\n                }\n            }\n        }\n        try {\n            leafletViewer.setGeometryData(geometries.toArray(new DBGeometry[0]));\n        } catch (DBException e) {\n            DBWorkbench.getPlatformUI().showError(\"Error rendering GIS data\", \"Error while rendering geometry data\", e);\n        }\n    }\n","date":"2019-09-14 20:12:30","endLine":161,"groupId":"0","id":14,"instanceNumber":2,"isCurCommit":0,"methodName":"refreshData","params":"(booleanrefreshMetadata@booleanappend@booleankeepState)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/80/fdf0d047cf436a605e5e22ed5579ca4581ee68.src","preCode":"    public void refreshData(boolean refreshMetadata, boolean append, boolean keepState) {\n        controller.updateEditControls();\n\n        List<GeometryDataUtils.GeomAttrs> result = GeometryDataUtils.extractGeometryAttributes(getController());\n        ResultSetModel model = getController().getModel();\n\n        \r\n        List<DBGeometry> geometries = new ArrayList<>();\n        for (GeometryDataUtils.GeomAttrs geomAttrs : result) {\n            for (ResultSetRow row : model.getAllRows()) {\n                Object value = model.getCellValue(geomAttrs.geomAttr, row);\n\n                DBGeometry geometry = GisTransformUtils.getGeometryValueFromObject(\n                    controller.getDataContainer(),\n                    geomAttrs.geomAttr.getValueHandler(),\n                    geomAttrs.geomAttr,\n                    value);\n\n                if (geometry != null) {\n                    geometries.add(geometry);\n                    \r\n                    if (!geomAttrs.descAttrs.isEmpty()) {\n                        Map<String, Object> properties = new LinkedHashMap<>();\n                        for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                            Object descValue = model.getCellValue(da, row);\n                            if (!DBUtils.isNullValue(descValue)) {\n                                properties.put(da.getName(), descValue);\n                            }\n                        }\n                        geometry.setProperties(properties);\n                    }\n                }\n            }\n        }\n        try {\n            leafletViewer.setGeometryData(geometries.toArray(new DBGeometry[0]));\n        } catch (DBException e) {\n            DBWorkbench.getPlatformUI().showError(\"Error rendering GIS data\", \"Error while rendering geometry data\", e);\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.data.gis.view/src/org/jkiss/dbeaver/ui/gis/presentation/GeometryPresentation.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":121,"status":"M"}],"commitId":"ab5c91c16f1abf7f3ffc01c83469ee3f98a32f8d","commitMessage":"@@@#6743 Shape colorer. Tooltps provider fix.\n\n\nFormer-commit-id: ee5765105334ae77ca6b86af2a5fdc4c9972cd32","date":"2019-09-14 20:12:30","modifiedFileCount":"2","status":"M","submitter":"serge-rider"},{"authorTime":"2019-09-14 22:03:30","codes":[{"authorDate":"2019-04-23 16:24:31","commitOrder":9,"curCode":"    public static void setGeometryProperties(IResultSetController controller, GeomAttrs geomAttrs, DBGeometry geometry, ResultSetRow row) {\n        \r\n        ResultSetModel model = controller.getModel();\n        if (row != null) {\n            \r\n            if (!geomAttrs.descAttrs.isEmpty()) {\n                Map<String, Object> properties = new LinkedHashMap<>();\n                for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                    Object descValue = model.getCellValue(da, row);\n                    if (!DBUtils.isNullValue(descValue)) {\n                        properties.put(da.getName(), descValue);\n                    }\n                }\n                geometry.setProperties(properties);\n            }\n        }\n    }\n","date":"2019-04-23 16:24:31","endLine":95,"groupId":"9683","id":15,"instanceNumber":1,"isCurCommit":0,"methodName":"setGeometryProperties","params":"(IResultSetControllercontroller@GeomAttrsgeomAttrs@DBGeometrygeometry@ResultSetRowrow)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/bd/cefeab6daf47858d54f6d9a5247cdcc049f2b2.src","preCode":"    public static void setGeometryProperties(IResultSetController controller, GeomAttrs geomAttrs, DBGeometry geometry, ResultSetRow row) {\n        \r\n        ResultSetModel model = controller.getModel();\n        if (row != null) {\n            \r\n            if (!geomAttrs.descAttrs.isEmpty()) {\n                Map<String, Object> properties = new LinkedHashMap<>();\n                for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                    Object descValue = model.getCellValue(da, row);\n                    if (!DBUtils.isNullValue(descValue)) {\n                        properties.put(da.getName(), descValue);\n                    }\n                }\n                geometry.setProperties(properties);\n            }\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.data.gis.view/src/org/jkiss/dbeaver/ui/gis/GeometryDataUtils.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":79,"status":"N"},{"authorDate":"2019-09-14 22:03:30","commitOrder":9,"curCode":"    public void refreshData(boolean refreshMetadata, boolean append, boolean keepState) {\n        controller.updateEditControls();\n\n        List<GeometryDataUtils.GeomAttrs> result = GeometryDataUtils.extractGeometryAttributes(getController());\n        ResultSetModel model = getController().getModel();\n\n        \r\n        List<DBGeometry> geometries = new ArrayList<>();\n        for (GeometryDataUtils.GeomAttrs geomAttrs : result) {\n            for (ResultSetRow row : model.getAllRows()) {\n                Object value = model.getCellValue(geomAttrs.geomAttr, row);\n\n                DBGeometry geometry = GisTransformUtils.getGeometryValueFromObject(\n                    controller.getDataContainer(),\n                    geomAttrs.geomAttr.getValueHandler(),\n                    geomAttrs.geomAttr,\n                    value);\n\n                if (geometry != null && !(geometry.getSRID() != 0 && geometry.isEmpty())) {\n                    geometries.add(geometry);\n                    \r\n                    Map<String, Object> properties = new LinkedHashMap<>();\n                    properties.put(\"id\", DBUtils.getObjectFullName(geomAttrs.geomAttr, DBPEvaluationContext.UI));\n                    properties.put(\"color\", \"blue\");\n                    if (!geomAttrs.descAttrs.isEmpty()) {\n                        Map<String, Object> infoMap = new LinkedHashMap<>();\n                        properties.put(\"info\", infoMap);\n                        for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                            Object descValue = model.getCellValue(da, row);\n                            if (!DBUtils.isNullValue(descValue) && !(descValue instanceof String && ((String) descValue).isEmpty())) {\n                                infoMap.put(da.getName(), descValue);\n                            }\n                        }\n                    }\n                    geometry.setProperties(properties);\n                }\n            }\n        }\n        try {\n            leafletViewer.setGeometryData(geometries.toArray(new DBGeometry[0]));\n        } catch (DBException e) {\n            DBWorkbench.getPlatformUI().showError(\"Error rendering GIS data\", \"Error while rendering geometry data\", e);\n        }\n    }\n","date":"2019-09-14 22:03:30","endLine":164,"groupId":"10682","id":16,"instanceNumber":2,"isCurCommit":0,"methodName":"refreshData","params":"(booleanrefreshMetadata@booleanappend@booleankeepState)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/f1/ead9a53a254adc830bffcc9dbb4fe579dc5cfd.src","preCode":"    public void refreshData(boolean refreshMetadata, boolean append, boolean keepState) {\n        controller.updateEditControls();\n\n        List<GeometryDataUtils.GeomAttrs> result = GeometryDataUtils.extractGeometryAttributes(getController());\n        ResultSetModel model = getController().getModel();\n\n        \r\n        List<DBGeometry> geometries = new ArrayList<>();\n        for (GeometryDataUtils.GeomAttrs geomAttrs : result) {\n            for (ResultSetRow row : model.getAllRows()) {\n                Object value = model.getCellValue(geomAttrs.geomAttr, row);\n\n                DBGeometry geometry = GisTransformUtils.getGeometryValueFromObject(\n                    controller.getDataContainer(),\n                    geomAttrs.geomAttr.getValueHandler(),\n                    geomAttrs.geomAttr,\n                    value);\n\n                if (geometry != null) {\n                    geometries.add(geometry);\n                    \r\n                    Map<String, Object> properties = new LinkedHashMap<>();\n                    properties.put(\"Column\", DBUtils.getObjectFullName(geomAttrs.geomAttr, DBPEvaluationContext.UI));\n                    if (!geomAttrs.descAttrs.isEmpty()) {\n                        for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                            Object descValue = model.getCellValue(da, row);\n                            if (!DBUtils.isNullValue(descValue)) {\n                                properties.put(da.getName(), descValue);\n                            }\n                        }\n                    }\n                    geometry.setProperties(properties);\n                }\n            }\n        }\n        try {\n            leafletViewer.setGeometryData(geometries.toArray(new DBGeometry[0]));\n        } catch (DBException e) {\n            DBWorkbench.getPlatformUI().showError(\"Error rendering GIS data\", \"Error while rendering geometry data\", e);\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.data.gis.view/src/org/jkiss/dbeaver/ui/gis/presentation/GeometryPresentation.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":121,"status":"M"}],"commitId":"ab1083c9f8982e77c370250807c3d1a5e87d4300","commitMessage":"@@@#6743 Object tooltips redesign\n\n\nFormer-commit-id: e0d40e779c7aac266f79f3ae993be045cc8a1932","date":"2019-09-14 22:03:30","modifiedFileCount":"4","status":"M","submitter":"serge-rider"},{"authorTime":"2019-09-14 22:42:51","codes":[{"authorDate":"2019-04-23 16:24:31","commitOrder":10,"curCode":"    public static void setGeometryProperties(IResultSetController controller, GeomAttrs geomAttrs, DBGeometry geometry, ResultSetRow row) {\n        \r\n        ResultSetModel model = controller.getModel();\n        if (row != null) {\n            \r\n            if (!geomAttrs.descAttrs.isEmpty()) {\n                Map<String, Object> properties = new LinkedHashMap<>();\n                for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                    Object descValue = model.getCellValue(da, row);\n                    if (!DBUtils.isNullValue(descValue)) {\n                        properties.put(da.getName(), descValue);\n                    }\n                }\n                geometry.setProperties(properties);\n            }\n        }\n    }\n","date":"2019-04-23 16:24:31","endLine":95,"groupId":"101017","id":17,"instanceNumber":1,"isCurCommit":0,"methodName":"setGeometryProperties","params":"(IResultSetControllercontroller@GeomAttrsgeomAttrs@DBGeometrygeometry@ResultSetRowrow)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/bd/cefeab6daf47858d54f6d9a5247cdcc049f2b2.src","preCode":"    public static void setGeometryProperties(IResultSetController controller, GeomAttrs geomAttrs, DBGeometry geometry, ResultSetRow row) {\n        \r\n        ResultSetModel model = controller.getModel();\n        if (row != null) {\n            \r\n            if (!geomAttrs.descAttrs.isEmpty()) {\n                Map<String, Object> properties = new LinkedHashMap<>();\n                for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                    Object descValue = model.getCellValue(da, row);\n                    if (!DBUtils.isNullValue(descValue)) {\n                        properties.put(da.getName(), descValue);\n                    }\n                }\n                geometry.setProperties(properties);\n            }\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.data.gis.view/src/org/jkiss/dbeaver/ui/gis/GeometryDataUtils.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":79,"status":"N"},{"authorDate":"2019-09-14 22:42:51","commitOrder":10,"curCode":"    public void refreshData(boolean refreshMetadata, boolean append, boolean keepState) {\n        controller.updateEditControls();\n\n        List<GeometryDataUtils.GeomAttrs> result = GeometryDataUtils.extractGeometryAttributes(getController());\n        ResultSetModel model = getController().getModel();\n\n        \r\n        List<DBGeometry> geometries = new ArrayList<>();\n        for (int i = 0; i < result.size(); i++) {\n            GeometryDataUtils.GeomAttrs geomAttrs = result.get(i);\n            Color attrColor;\n            if (i == 0) {\n                attrColor = Display.getCurrent().getSystemColor(SWT.COLOR_BLUE);\n            } else {\n                attrColor = UIColors.getColor(i);\n            }\n            RGB rgb = attrColor.getRGB();\n            String colorCode = String.format(\"#%02x%02x%02x\", rgb.red, rgb.green, rgb.blue);\n\n            for (ResultSetRow row : model.getAllRows()) {\n                Object value = model.getCellValue(geomAttrs.geomAttr, row);\n\n                DBGeometry geometry = GisTransformUtils.getGeometryValueFromObject(\n                    controller.getDataContainer(),\n                    geomAttrs.geomAttr.getValueHandler(),\n                    geomAttrs.geomAttr,\n                    value);\n\n                if (geometry != null && !(geometry.getSRID() != 0 && geometry.isEmpty())) {\n                    geometries.add(geometry);\n                    \r\n                    Map<String, Object> properties = new LinkedHashMap<>();\n                    properties.put(\"id\", DBUtils.getObjectFullName(geomAttrs.geomAttr, DBPEvaluationContext.UI));\n                    properties.put(\"color\", colorCode);\n                    if (!geomAttrs.descAttrs.isEmpty()) {\n                        Map<String, Object> infoMap = new LinkedHashMap<>();\n                        properties.put(\"info\", infoMap);\n                        for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                            Object descValue = model.getCellValue(da, row);\n                            if (!DBUtils.isNullValue(descValue) && !(descValue instanceof String && ((String) descValue).isEmpty())) {\n                                infoMap.put(da.getName(), descValue);\n                            }\n                        }\n                    }\n                    geometry.setProperties(properties);\n                }\n            }\n        }\n        try {\n            leafletViewer.setGeometryData(geometries.toArray(new DBGeometry[0]));\n        } catch (DBException e) {\n            DBWorkbench.getPlatformUI().showError(\"Error rendering GIS data\", \"Error while rendering geometry data\", e);\n        }\n    }\n","date":"2019-09-14 22:42:51","endLine":179,"groupId":"101017","id":18,"instanceNumber":2,"isCurCommit":0,"methodName":"refreshData","params":"(booleanrefreshMetadata@booleanappend@booleankeepState)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/3b/8665662af48fc6bb004a9b10e34d67a3619f69.src","preCode":"    public void refreshData(boolean refreshMetadata, boolean append, boolean keepState) {\n        controller.updateEditControls();\n\n        List<GeometryDataUtils.GeomAttrs> result = GeometryDataUtils.extractGeometryAttributes(getController());\n        ResultSetModel model = getController().getModel();\n\n        \r\n        List<DBGeometry> geometries = new ArrayList<>();\n        for (GeometryDataUtils.GeomAttrs geomAttrs : result) {\n            for (ResultSetRow row : model.getAllRows()) {\n                Object value = model.getCellValue(geomAttrs.geomAttr, row);\n\n                DBGeometry geometry = GisTransformUtils.getGeometryValueFromObject(\n                    controller.getDataContainer(),\n                    geomAttrs.geomAttr.getValueHandler(),\n                    geomAttrs.geomAttr,\n                    value);\n\n                if (geometry != null && !(geometry.getSRID() != 0 && geometry.isEmpty())) {\n                    geometries.add(geometry);\n                    \r\n                    Map<String, Object> properties = new LinkedHashMap<>();\n                    properties.put(\"id\", DBUtils.getObjectFullName(geomAttrs.geomAttr, DBPEvaluationContext.UI));\n                    properties.put(\"color\", \"blue\");\n                    if (!geomAttrs.descAttrs.isEmpty()) {\n                        Map<String, Object> infoMap = new LinkedHashMap<>();\n                        properties.put(\"info\", infoMap);\n                        for (DBDAttributeBinding da : geomAttrs.descAttrs) {\n                            Object descValue = model.getCellValue(da, row);\n                            if (!DBUtils.isNullValue(descValue) && !(descValue instanceof String && ((String) descValue).isEmpty())) {\n                                infoMap.put(da.getName(), descValue);\n                            }\n                        }\n                    }\n                    geometry.setProperties(properties);\n                }\n            }\n        }\n        try {\n            leafletViewer.setGeometryData(geometries.toArray(new DBGeometry[0]));\n        } catch (DBException e) {\n            DBWorkbench.getPlatformUI().showError(\"Error rendering GIS data\", \"Error while rendering geometry data\", e);\n        }\n    }\n","realPath":"plugins/org.jkiss.dbeaver.data.gis.view/src/org/jkiss/dbeaver/ui/gis/presentation/GeometryPresentation.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":126,"status":"M"}],"commitId":"1091f8e332269567569585456500167883df3b01","commitMessage":"@@@#6743 Use different colors for different attributes\n\n\nFormer-commit-id: 47ab0ddb81fea05f61363ab6d9ed115926fdda37","date":"2019-09-14 22:42:51","modifiedFileCount":"6","status":"M","submitter":"serge-rider"}]
