[{"authorTime":"2020-10-22 03:33:39","codes":[{"authorDate":"2020-12-01 02:59:36","commitOrder":32,"curCode":"    public synchronized void dispose() {\n        long startTime = System.currentTimeMillis();\n        log.debug(\"Shutdown Core...\");\n\n        DBeaverTestPlatform.setClosing(true);\n\n        super.dispose();\n\n        workspace.dispose();\n\n        DataSourceProviderRegistry.getInstance().dispose();\n\n        \r\n        if (tempFolder != null) {\n\n            if (!ContentUtils.deleteFileRecursive(tempFolder)) {\n                log.warn(\"Can't delete temp folder '\" + tempFolder.getAbsolutePath() + \"'\");\n            }\n            tempFolder = null;\n        }\n\n        DBeaverTestPlatform.instance = null;\n        DBeaverTestPlatform.disposed = true;\n        System.gc();\n        log.debug(\"Test platform shutdown completed in \" + (System.currentTimeMillis() - startTime) + \"ms\");\n    }\n","date":"2020-12-01 02:59:36","endLine":165,"groupId":"6711","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"dispose","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/35/764cee8cce76c1b0669d5a629f1fce3776e8a8.src","preCode":"    public synchronized void dispose() {\n        long startTime = System.currentTimeMillis();\n        log.debug(\"Shutdown Core...\");\n\n        DBeaverTestPlatform.setClosing(true);\n\n        super.dispose();\n\n        workspace.dispose();\n\n        DataSourceProviderRegistry.getInstance().dispose();\n\n        \r\n        if (tempFolder != null) {\n\n            if (!ContentUtils.deleteFileRecursive(tempFolder)) {\n                log.warn(\"Can't delete temp folder '\" + tempFolder.getAbsolutePath() + \"'\");\n            }\n            tempFolder = null;\n        }\n\n        DBeaverTestPlatform.instance = null;\n        DBeaverTestPlatform.disposed = true;\n        System.gc();\n        log.debug(\"Test platform shutdown completed in \" + (System.currentTimeMillis() - startTime) + \"ms\");\n    }\n","realPath":"plugins/org.jkiss.dbeaver.headless/src/org/jkiss/dbeaver/headless/DBeaverTestPlatform.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":140,"status":"B"},{"authorDate":"2020-10-22 03:33:39","commitOrder":32,"curCode":"    public synchronized void dispose() {\n        long startTime = System.currentTimeMillis();\n        log.debug(\"Shutdown Core...\");\n\n        DBeaverCore.setClosing(true);\n        DBPApplication application = getApplication();\n        if (application instanceof DBPApplicationController) {\n            \r\n            ((DBPApplicationController) application).setHeadlessMode(true);\n        }\n\n        super.dispose();\n\n        workspace.dispose();\n\n        if (this.qmLogWriter != null) {\n            this.queryManager.unregisterMetaListener(qmLogWriter);\n            this.qmLogWriter.dispose();\n            this.qmLogWriter = null;\n        }\n        if (this.queryManager != null) {\n            this.queryManager.dispose();\n            \r\n        }\n        DataSourceProviderRegistry.getInstance().dispose();\n\n        if (isStandalone() && workspace != null) {\n            try {\n                workspace.save(new VoidProgressMonitor());\n            } catch (DBException ex) {\n                log.error(\"Can't save workspace\", ex); \r\n            }\n        }\n\n        \r\n        if (tempFolder != null) {\n\n            if (!ContentUtils.deleteFileRecursive(tempFolder)) {\n                log.warn(\"Can't delete temp folder '\" + tempFolder.getAbsolutePath() + \"'\");\n            }\n            tempFolder = null;\n        }\n\n        DBeaverCore.instance = null;\n        DBeaverCore.disposed = true;\n        System.gc();\n        log.debug(\"Shutdown completed in \" + (System.currentTimeMillis() - startTime) + \"ms\");\n    }\n","date":"2020-10-22 03:33:39","endLine":218,"groupId":"13937","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"dispose","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/64/e2347f1157d65bc4876796efcc71e91fb6d843.src","preCode":"    public synchronized void dispose() {\n        long startTime = System.currentTimeMillis();\n        log.debug(\"Shutdown Core...\");\n\n        DBeaverCore.setClosing(true);\n        DBPApplication application = getApplication();\n        if (application instanceof DBPApplicationController) {\n            \r\n            ((DBPApplicationController) application).setHeadlessMode(true);\n        }\n\n        super.dispose();\n\n        workspace.dispose();\n\n        if (this.qmLogWriter != null) {\n            this.queryManager.unregisterMetaListener(qmLogWriter);\n            this.qmLogWriter.dispose();\n            this.qmLogWriter = null;\n        }\n        if (this.queryManager != null) {\n            this.queryManager.dispose();\n            \r\n        }\n        DataSourceProviderRegistry.getInstance().dispose();\n\n        if (isStandalone() && workspace != null) {\n            try {\n                workspace.save(new VoidProgressMonitor());\n            } catch (DBException ex) {\n                log.error(\"Can't save workspace\", ex); \r\n            }\n        }\n\n        \r\n        if (tempFolder != null) {\n\n            if (!ContentUtils.deleteFileRecursive(tempFolder)) {\n                log.warn(\"Can't delete temp folder '\" + tempFolder.getAbsolutePath() + \"'\");\n            }\n            tempFolder = null;\n        }\n\n        DBeaverCore.instance = null;\n        DBeaverCore.disposed = true;\n        System.gc();\n        log.debug(\"Shutdown completed in \" + (System.currentTimeMillis() - startTime) + \"ms\");\n    }\n","realPath":"plugins/org.jkiss.dbeaver.core/src/org/jkiss/dbeaver/core/DBeaverCore.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":171,"status":"NB"}],"commitId":"ddfd4529cb6ea272bde87ca10e64ac460eb7df5c","commitMessage":"@@@Headless platform refactoring\n\n\nFormer-commit-id: 6e2f088b3a8e7e2103b9312e82888ad86ca7e162","date":"2020-12-01 02:59:36","modifiedFileCount":"0","status":"M","submitter":"serge-rider"},{"authorTime":"2021-05-14 23:21:38","codes":[{"authorDate":"2020-12-01 02:59:36","commitOrder":33,"curCode":"    public synchronized void dispose() {\n        long startTime = System.currentTimeMillis();\n        log.debug(\"Shutdown Core...\");\n\n        DBeaverTestPlatform.setClosing(true);\n\n        super.dispose();\n\n        workspace.dispose();\n\n        DataSourceProviderRegistry.getInstance().dispose();\n\n        \r\n        if (tempFolder != null) {\n\n            if (!ContentUtils.deleteFileRecursive(tempFolder)) {\n                log.warn(\"Can't delete temp folder '\" + tempFolder.getAbsolutePath() + \"'\");\n            }\n            tempFolder = null;\n        }\n\n        DBeaverTestPlatform.instance = null;\n        DBeaverTestPlatform.disposed = true;\n        System.gc();\n        log.debug(\"Test platform shutdown completed in \" + (System.currentTimeMillis() - startTime) + \"ms\");\n    }\n","date":"2020-12-01 02:59:36","endLine":165,"groupId":"10296","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"dispose","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/35/764cee8cce76c1b0669d5a629f1fce3776e8a8.src","preCode":"    public synchronized void dispose() {\n        long startTime = System.currentTimeMillis();\n        log.debug(\"Shutdown Core...\");\n\n        DBeaverTestPlatform.setClosing(true);\n\n        super.dispose();\n\n        workspace.dispose();\n\n        DataSourceProviderRegistry.getInstance().dispose();\n\n        \r\n        if (tempFolder != null) {\n\n            if (!ContentUtils.deleteFileRecursive(tempFolder)) {\n                log.warn(\"Can't delete temp folder '\" + tempFolder.getAbsolutePath() + \"'\");\n            }\n            tempFolder = null;\n        }\n\n        DBeaverTestPlatform.instance = null;\n        DBeaverTestPlatform.disposed = true;\n        System.gc();\n        log.debug(\"Test platform shutdown completed in \" + (System.currentTimeMillis() - startTime) + \"ms\");\n    }\n","realPath":"plugins/org.jkiss.dbeaver.headless/src/org/jkiss/dbeaver/headless/DBeaverTestPlatform.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":140,"status":"N"},{"authorDate":"2021-05-14 23:21:38","commitOrder":33,"curCode":"    public synchronized void dispose() {\n        long startTime = System.currentTimeMillis();\n        log.debug(\"Shutdown Core...\");\n\n        DBeaverCore.setClosing(true);\n        DBPApplication application = getApplication();\n        if (application instanceof DBPApplicationController) {\n            \r\n            ((DBPApplicationController) application).setHeadlessMode(true);\n        }\n\n        super.dispose();\n\n        workspace.dispose();\n\n        if (this.qmLogWriter != null) {\n            this.queryManager.unregisterMetaListener(qmLogWriter);\n            this.qmLogWriter.dispose();\n            this.qmLogWriter = null;\n        }\n        if (this.queryManager != null) {\n            this.queryManager.dispose();\n            \r\n        }\n        DataSourceProviderRegistry.getInstance().dispose();\n\n        if (isStandalone() && workspace != null && !application.isExclusiveMode()) {\n            try {\n                workspace.save(new VoidProgressMonitor());\n            } catch (DBException ex) {\n                log.error(\"Can't save workspace\", ex); \r\n            }\n        }\n\n        \r\n        if (tempFolder != null) {\n\n            if (!ContentUtils.deleteFileRecursive(tempFolder)) {\n                log.warn(\"Can't delete temp folder '\" + tempFolder.getAbsolutePath() + \"'\");\n            }\n            tempFolder = null;\n        }\n\n        DBeaverCore.instance = null;\n        DBeaverCore.disposed = true;\n        System.gc();\n        log.debug(\"Shutdown completed in \" + (System.currentTimeMillis() - startTime) + \"ms\");\n    }\n","date":"2021-05-14 23:21:38","endLine":216,"groupId":"10296","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"dispose","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-dbeaver-10-0.7/blobInfo/CC_OUT/blobs/23/a43639f83625b9ea0ca65ddef1b2b30b51011d.src","preCode":"    public synchronized void dispose() {\n        long startTime = System.currentTimeMillis();\n        log.debug(\"Shutdown Core...\");\n\n        DBeaverCore.setClosing(true);\n        DBPApplication application = getApplication();\n        if (application instanceof DBPApplicationController) {\n            \r\n            ((DBPApplicationController) application).setHeadlessMode(true);\n        }\n\n        super.dispose();\n\n        workspace.dispose();\n\n        if (this.qmLogWriter != null) {\n            this.queryManager.unregisterMetaListener(qmLogWriter);\n            this.qmLogWriter.dispose();\n            this.qmLogWriter = null;\n        }\n        if (this.queryManager != null) {\n            this.queryManager.dispose();\n            \r\n        }\n        DataSourceProviderRegistry.getInstance().dispose();\n\n        if (isStandalone() && workspace != null) {\n            try {\n                workspace.save(new VoidProgressMonitor());\n            } catch (DBException ex) {\n                log.error(\"Can't save workspace\", ex); \r\n            }\n        }\n\n        \r\n        if (tempFolder != null) {\n\n            if (!ContentUtils.deleteFileRecursive(tempFolder)) {\n                log.warn(\"Can't delete temp folder '\" + tempFolder.getAbsolutePath() + \"'\");\n            }\n            tempFolder = null;\n        }\n\n        DBeaverCore.instance = null;\n        DBeaverCore.disposed = true;\n        System.gc();\n        log.debug(\"Shutdown completed in \" + (System.currentTimeMillis() - startTime) + \"ms\");\n    }\n","realPath":"plugins/org.jkiss.dbeaver.core/src/org/jkiss/dbeaver/core/DBeaverCore.java","repoName":"dbeaver","snippetEndLine":0,"snippetStartLine":0,"startLine":169,"status":"M"}],"commitId":"e0e401653d8e68387288b2314ab56ff7ca600e11","commitMessage":"@@@dbeaver/dbeaver-ee#945 Do not save workspace in exclusive mode\n\n\nFormer-commit-id: 2a148c6b97ca9d2e7c6ce50ddade4ab5649bfe37","date":"2021-05-14 23:21:38","modifiedFileCount":"1","status":"M","submitter":"Serge Rider"}]
